var di,oe=globalThis.trustedTypes,dr=oe?oe.createPolicy("lit-html",{createHTML:s=>s}):void 0,Jt=`lit$${(Math.random()+"").slice(9)}$`,mr="?"+Jt,go=`<${mr}>`,ae=document,Se=(s="")=>ae.createComment(s),Ae=s=>s===null||typeof s!="object"&&typeof s!="function",vr=Array.isArray,Co=s=>{var e;return vr(s)||typeof((e=s)===null||e===void 0?void 0:e[Symbol.iterator])=="function"},_e=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,yr=/-->/g,xr=/>/g,Qt=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,gr=/'/g,Cr=/"/g,Dr=/^(?:script|style|textarea|title)$/i,Er=s=>(e,...n)=>({_$litType$:s,strings:e,values:n}),$t=Er(1),Bt=Er(2),Ie=Symbol.for("lit-noChange"),vt=Symbol.for("lit-nothing"),Pr=new WeakMap,wr=(s,e,n)=>{var o,h;let l=(o=n==null?void 0:n.renderBefore)!==null&&o!==void 0?o:e,f=l._$litPart$;if(f===void 0){let m=(h=n==null?void 0:n.renderBefore)!==null&&h!==void 0?h:null;l._$litPart$=f=new le(e.insertBefore(Se(),m),m,void 0,n!=null?n:{})}return f._$AI(s),f},ue=ae.createTreeWalker(ae,129,null,!1),Do=(s,e)=>{let n=s.length-1,o=[],h,l=e===2?"<svg>":"",f=_e;for(let i=0;i<n;i++){let D=s[i],A,S,x=-1,w=0;for(;w<D.length&&(f.lastIndex=w,S=f.exec(D),S!==null);)w=f.lastIndex,f===_e?S[1]==="!--"?f=yr:S[1]!==void 0?f=xr:S[2]!==void 0?(Dr.test(S[2])&&(h=RegExp("</"+S[2],"g")),f=Qt):S[3]!==void 0&&(f=Qt):f===Qt?S[0]===">"?(f=h!=null?h:_e,x=-1):S[1]===void 0?x=-2:(x=f.lastIndex-S[2].length,A=S[1],f=S[3]===void 0?Qt:S[3]==='"'?Cr:gr):f===Cr||f===gr?f=Qt:f===yr||f===xr?f=_e:(f=Qt,h=void 0);let y=f===Qt&&s[i+1].startsWith("/>")?" ":"";l+=f===_e?D+go:x>=0?(o.push(A),D.slice(0,x)+"$lit$"+D.slice(x)+Jt+y):D+Jt+(x===-2?(o.push(void 0),i):y)}let m=l+(s[n]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(s)||!s.hasOwnProperty("raw"))throw Error("invalid template strings array");return[dr!==void 0?dr.createHTML(m):m,o]},he=class{constructor({strings:e,_$litType$:n},o){let h;this.parts=[];let l=0,f=0,m=e.length-1,i=this.parts,[D,A]=Do(e,n);if(this.el=he.createElement(D,o),ue.currentNode=this.el.content,n===2){let S=this.el.content,x=S.firstChild;x.remove(),S.append(...x.childNodes)}for(;(h=ue.nextNode())!==null&&i.length<m;){if(h.nodeType===1){if(h.hasAttributes()){let S=[];for(let x of h.getAttributeNames())if(x.endsWith("$lit$")||x.startsWith(Jt)){let w=A[f++];if(S.push(x),w!==void 0){let y=h.getAttribute(w.toLowerCase()+"$lit$").split(Jt),c=/([.?@])?(.*)/.exec(w);i.push({type:1,index:l,name:c[2],strings:y,ctor:c[1]==="."?Sr:c[1]==="?"?Ar:c[1]==="@"?_r:Te})}else i.push({type:6,index:l})}for(let x of S)h.removeAttribute(x)}if(Dr.test(h.tagName)){let S=h.textContent.split(Jt),x=S.length-1;if(x>0){h.textContent=oe?oe.emptyScript:"";for(let w=0;w<x;w++)h.append(S[w],Se()),ue.nextNode(),i.push({type:2,index:++l});h.append(S[x],Se())}}}else if(h.nodeType===8)if(h.data===mr)i.push({type:2,index:l});else{let S=-1;for(;(S=h.data.indexOf(Jt,S+1))!==-1;)i.push({type:7,index:l}),S+=Jt.length-1}l++}}static createElement(e,n){let o=ae.createElement("template");return o.innerHTML=e,o}};function ce(s,e,n=s,o){var h,l,f,m;if(e===Ie)return e;let i=o!==void 0?(h=n._$Cl)===null||h===void 0?void 0:h[o]:n._$Cu,D=Ae(e)?void 0:e._$litDirective$;return(i==null?void 0:i.constructor)!==D&&((l=i==null?void 0:i._$AO)===null||l===void 0||l.call(i,!1),D===void 0?i=void 0:(i=new D(s),i._$AT(s,n,o)),o!==void 0?((f=(m=n)._$Cl)!==null&&f!==void 0?f:m._$Cl=[])[o]=i:n._$Cu=i),i!==void 0&&(e=ce(s,i._$AS(s,e.values),i,o)),e}var Ir=class{constructor(e,n){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var n;let{el:{content:o},parts:h}=this._$AD,l=((n=e==null?void 0:e.creationScope)!==null&&n!==void 0?n:ae).importNode(o,!0);ue.currentNode=l;let f=ue.nextNode(),m=0,i=0,D=h[0];for(;D!==void 0;){if(m===D.index){let A;D.type===2?A=new le(f,f.nextSibling,this,e):D.type===1?A=new D.ctor(f,D.name,D.strings,this,e):D.type===6&&(A=new Tr(f,this,e)),this.v.push(A),D=h[++i]}m!==(D==null?void 0:D.index)&&(f=ue.nextNode(),m++)}return l}m(e){let n=0;for(let o of this.v)o!==void 0&&(o.strings!==void 0?(o._$AI(e,o,n),n+=o.strings.length-2):o._$AI(e[n])),n++}},le=class{constructor(e,n,o,h){var l;this.type=2,this._$AH=vt,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=o,this.options=h,this._$Cg=(l=h==null?void 0:h.isConnected)===null||l===void 0||l}get _$AU(){var e,n;return(n=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&n!==void 0?n:this._$Cg}get parentNode(){let e=this._$AA.parentNode,n=this._$AM;return n!==void 0&&e.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=ce(this,e,n),Ae(e)?e===vt||e==null||e===""?(this._$AH!==vt&&this._$AR(),this._$AH=vt):e!==this._$AH&&e!==Ie&&this.$(e):e._$litType$!==void 0?this.T(e):e.nodeType!==void 0?this.k(e):Co(e)?this.S(e):this.$(e)}M(e,n=this._$AB){return this._$AA.parentNode.insertBefore(e,n)}k(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}$(e){this._$AH!==vt&&Ae(this._$AH)?this._$AA.nextSibling.data=e:this.k(ae.createTextNode(e)),this._$AH=e}T(e){var n;let{values:o,_$litType$:h}=e,l=typeof h=="number"?this._$AC(e):(h.el===void 0&&(h.el=he.createElement(h.h,this.options)),h);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===l)this._$AH.m(o);else{let f=new Ir(l,this),m=f.p(this.options);f.m(o),this.k(m),this._$AH=f}}_$AC(e){let n=Pr.get(e.strings);return n===void 0&&Pr.set(e.strings,n=new he(e)),n}S(e){vr(this._$AH)||(this._$AH=[],this._$AR());let n=this._$AH,o,h=0;for(let l of e)h===n.length?n.push(o=new le(this.M(Se()),this.M(Se()),this,this.options)):o=n[h],o._$AI(l),h++;h<n.length&&(this._$AR(o&&o._$AB.nextSibling,h),n.length=h)}_$AR(e=this._$AA.nextSibling,n){var o;for((o=this._$AP)===null||o===void 0||o.call(this,!1,!0,n);e&&e!==this._$AB;){let h=e.nextSibling;e.remove(),e=h}}setConnected(e){var n;this._$AM===void 0&&(this._$Cg=e,(n=this._$AP)===null||n===void 0||n.call(this,e))}},Te=class{constructor(e,n,o,h,l){this.type=1,this._$AH=vt,this._$AN=void 0,this.element=e,this.name=n,this._$AM=h,this.options=l,o.length>2||o[0]!==""||o[1]!==""?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=vt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,n=this,o,h){let l=this.strings,f=!1;if(l===void 0)e=ce(this,e,n,0),f=!Ae(e)||e!==this._$AH&&e!==Ie,f&&(this._$AH=e);else{let m=e,i,D;for(e=l[0],i=0;i<l.length-1;i++)D=ce(this,m[o+i],n,i),D===Ie&&(D=this._$AH[i]),f||(f=!Ae(D)||D!==this._$AH[i]),D===vt?e=vt:e!==vt&&(e+=(D!=null?D:"")+l[i+1]),this._$AH[i]=D}f&&!h&&this.C(e)}C(e){e===vt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}},Sr=class extends Te{constructor(){super(...arguments),this.type=3}C(e){this.element[this.name]=e===vt?void 0:e}},Eo=oe?oe.emptyScript:"",Ar=class extends Te{constructor(){super(...arguments),this.type=4}C(e){e&&e!==vt?this.element.setAttribute(this.name,Eo):this.element.removeAttribute(this.name)}},_r=class extends Te{constructor(e,n,o,h,l){super(e,n,o,h,l),this.type=5}_$AI(e,n=this){var o;if((e=(o=ce(this,e,n,0))!==null&&o!==void 0?o:vt)===Ie)return;let h=this._$AH,l=e===vt&&h!==vt||e.capture!==h.capture||e.once!==h.once||e.passive!==h.passive,f=e!==vt&&(h===vt||l);l&&this.element.removeEventListener(this.name,this,h),f&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n,o;typeof this._$AH=="function"?this._$AH.call((o=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&o!==void 0?o:this.element,e):this._$AH.handleEvent(e)}},Tr=class{constructor(e,n,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){ce(this,e)}},Fr=window.litHtmlPolyfillSupport;Fr==null||Fr(he,le),((di=globalThis.litHtmlVersions)!==null&&di!==void 0?di:globalThis.litHtmlVersions=[]).push("2.2.2");var zt=function(){function s(e,n){this.next=null,this.key=e,this.data=n,this.left=null,this.right=null}return s}();function Po(s,e){return s>e?1:s<e?-1:0}function Wt(s,e,n){for(var o=new zt(null,null),h=o,l=o;;){var f=n(s,e.key);if(f<0){if(e.left===null)break;if(n(s,e.left.key)<0){var m=e.left;if(e.left=m.right,m.right=e,e=m,e.left===null)break}l.left=e,l=e,e=e.left}else if(f>0){if(e.right===null)break;if(n(s,e.right.key)>0){var m=e.right;if(e.right=m.left,m.left=e,e=m,e.right===null)break}h.right=e,h=e,e=e.right}else break}return h.right=e.left,l.left=e.right,e.left=o.right,e.right=o.left,e}function mi(s,e,n,o){var h=new zt(s,e);if(n===null)return h.left=h.right=null,h;n=Wt(s,n,o);var l=o(s,n.key);return l<0?(h.left=n.left,h.right=n,n.left=null):l>=0&&(h.right=n.right,h.left=n,n.right=null),h}function br(s,e,n){var o=null,h=null;if(e){e=Wt(s,e,n);var l=n(e.key,s);l===0?(o=e.left,h=e.right):l<0?(h=e.right,e.right=null,o=e):(o=e.left,e.left=null,h=e)}return{left:o,right:h}}function wo(s,e,n){return e===null?s:(s===null||(e=Wt(s.key,e,n),e.left=s),e)}function vi(s,e,n,o,h){if(s){o(""+e+(n?"└── ":"├── ")+h(s)+`
`);var l=e+(n?"    ":"│   ");s.left&&vi(s.left,l,!1,o,h),s.right&&vi(s.right,l,!0,o,h)}}var Ci=function(){function s(e){e===void 0&&(e=Po),this._root=null,this._size=0,this._comparator=e}return s.prototype.insert=function(e,n){return this._size++,this._root=mi(e,n,this._root,this._comparator)},s.prototype.add=function(e,n){var o=new zt(e,n);this._root===null&&(o.left=o.right=null,this._size++,this._root=o);var h=this._comparator,l=Wt(e,this._root,h),f=h(e,l.key);return f===0?this._root=l:(f<0?(o.left=l.left,o.right=l,l.left=null):f>0&&(o.right=l.right,o.left=l,l.right=null),this._size++,this._root=o),this._root},s.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},s.prototype._remove=function(e,n,o){var h;if(n===null)return null;n=Wt(e,n,o);var l=o(e,n.key);return l===0?(n.left===null?h=n.right:(h=Wt(e,n.left,o),h.right=n.right),this._size--,h):n},s.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=Wt(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},s.prototype.findStatic=function(e){for(var n=this._root,o=this._comparator;n;){var h=o(e,n.key);if(h===0)return n;h<0?n=n.left:n=n.right}return null},s.prototype.find=function(e){return this._root&&(this._root=Wt(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},s.prototype.contains=function(e){for(var n=this._root,o=this._comparator;n;){var h=o(e,n.key);if(h===0)return!0;h<0?n=n.left:n=n.right}return!1},s.prototype.forEach=function(e,n){for(var o=this._root,h=[],l=!1;!l;)o!==null?(h.push(o),o=o.left):h.length!==0?(o=h.pop(),e.call(n,o),o=o.right):l=!0;return this},s.prototype.range=function(e,n,o,h){for(var l=[],f=this._comparator,m=this._root,i;l.length!==0||m;)if(m)l.push(m),m=m.left;else{if(m=l.pop(),i=f(m.key,n),i>0)break;if(f(m.key,e)>=0&&o.call(h,m))return this;m=m.right}return this},s.prototype.keys=function(){var e=[];return this.forEach(function(n){var o=n.key;return e.push(o)}),e},s.prototype.values=function(){var e=[];return this.forEach(function(n){var o=n.data;return e.push(o)}),e},s.prototype.min=function(){return this._root?this.minNode(this._root).key:null},s.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},s.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},s.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},s.prototype.at=function(e){for(var n=this._root,o=!1,h=0,l=[];!o;)if(n)l.push(n),n=n.left;else if(l.length>0){if(n=l.pop(),h===e)return n;h++,n=n.right}else o=!0;return null},s.prototype.next=function(e){var n=this._root,o=null;if(e.right){for(o=e.right;o.left;)o=o.left;return o}for(var h=this._comparator;n;){var l=h(e.key,n.key);if(l===0)break;l<0?(o=n,n=n.left):n=n.right}return o},s.prototype.prev=function(e){var n=this._root,o=null;if(e.left!==null){for(o=e.left;o.right;)o=o.right;return o}for(var h=this._comparator;n;){var l=h(e.key,n.key);if(l===0)break;l<0?n=n.left:(o=n,n=n.right)}return o},s.prototype.clear=function(){return this._root=null,this._size=0,this},s.prototype.toList=function(){return Ao(this._root)},s.prototype.load=function(e,n,o){n===void 0&&(n=[]),o===void 0&&(o=!1);var h=e.length,l=this._comparator;if(o&&gi(e,n,0,h-1,l),this._root===null)this._root=yi(e,n,0,h),this._size=h;else{var f=_o(this.toList(),So(e,n),l);h=this._size+h,this._root=xi({head:f},0,h)}return this},s.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),s.prototype.toString=function(e){e===void 0&&(e=function(o){return String(o.key)});var n=[];return vi(this._root,"",!0,function(o){return n.push(o)},e),n.join("")},s.prototype.update=function(e,n,o){var h=this._comparator,l=br(e,this._root,h),f=l.left,m=l.right;h(e,n)<0?m=mi(n,o,m,h):f=mi(n,o,f,h),this._root=wo(f,m,h)},s.prototype.split=function(e){return br(e,this._root,this._comparator)},s}();function yi(s,e,n,o){var h=o-n;if(h>0){var l=n+Math.floor(h/2),f=s[l],m=e[l],i=new zt(f,m);return i.left=yi(s,e,n,l),i.right=yi(s,e,l+1,o),i}return null}function So(s,e){for(var n=new zt(null,null),o=n,h=0;h<s.length;h++)o=o.next=new zt(s[h],e[h]);return o.next=null,n.next}function Ao(s){for(var e=s,n=[],o=!1,h=new zt(null,null),l=h;!o;)e?(n.push(e),e=e.left):n.length>0?(e=l=l.next=n.pop(),e=e.right):o=!0;return l.next=null,h.next}function xi(s,e,n){var o=n-e;if(o>0){var h=e+Math.floor(o/2),l=xi(s,e,h),f=s.head;return f.left=l,s.head=s.head.next,f.right=xi(s,h+1,n),f}return null}function _o(s,e,n){for(var o=new zt(null,null),h=o,l=s,f=e;l!==null&&f!==null;)n(l.key,f.key)<0?(h.next=l,l=l.next):(h.next=f,f=f.next),h=h.next;return l!==null?h.next=l:f!==null&&(h.next=f),o.next}function gi(s,e,n,o,h){if(!(n>=o)){for(var l=s[n+o>>1],f=n-1,m=o+1;;){do f++;while(h(s[f],l)<0);do m--;while(h(s[m],l)>0);if(f>=m)break;var i=s[f];s[f]=s[m],s[m]=i,i=e[f],e[f]=e[m],e[m]=i}gi(s,e,n,m,h),gi(s,e,m+1,o,h)}}function Br(){throw new Error("setTimeout has not been defined")}function kr(){throw new Error("clearTimeout has not been defined")}var Ht=Br,qt=kr,pe;typeof window!="undefined"?pe=window:typeof self!="undefined"?pe=self:pe={};typeof pe.setTimeout=="function"&&(Ht=setTimeout);typeof pe.clearTimeout=="function"&&(qt=clearTimeout);function Nr(s){if(Ht===setTimeout)return setTimeout(s,0);if((Ht===Br||!Ht)&&setTimeout)return Ht=setTimeout,setTimeout(s,0);try{return Ht(s,0)}catch(e){try{return Ht.call(null,s,0)}catch(n){return Ht.call(this,s,0)}}}function Io(s){if(qt===clearTimeout)return clearTimeout(s);if((qt===kr||!qt)&&clearTimeout)return qt=clearTimeout,clearTimeout(s);try{return qt(s)}catch(e){try{return qt.call(null,s)}catch(n){return qt.call(this,s)}}}var jt=[],fe=!1,te,Me=-1;function To(){!fe||!te||(fe=!1,te.length?jt=te.concat(jt):Me=-1,jt.length&&Lr())}function Lr(){if(!fe){var s=Nr(To);fe=!0;for(var e=jt.length;e;){for(te=jt,jt=[];++Me<e;)te&&te[Me].run();Me=-1,e=jt.length}te=null,fe=!1,Io(s)}}function Fo(s){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];jt.push(new Mr(s,e)),jt.length===1&&!fe&&Nr(Lr)}function Mr(s,e){this.fun=s,this.array=e}Mr.prototype.run=function(){this.fun.apply(null,this.array)};var bo="browser",Bo="browser",ko=!0,No=[],Lo="",Mo={},Xo={},Oo={};function ee(){}var Yo=ee,Ro=ee,jo=ee,Uo=ee,Jo=ee,$o=ee,zo=ee;function Wo(s){throw new Error("process.binding is not supported")}function Ho(){return"/"}function qo(s){throw new Error("process.chdir is not supported")}function Vo(){return 0}var de=pe.performance||{},Go=de.now||de.mozNow||de.msNow||de.oNow||de.webkitNow||function(){return new Date().getTime()};function Zo(s){var e=Go.call(de)*.001,n=Math.floor(e),o=Math.floor(e%1*1e9);return s&&(n=n-s[0],o=o-s[1],o<0&&(n--,o+=1e9)),[n,o]}var Ko=new Date;function Qo(){var s=new Date,e=s-Ko;return e/1e3}var Xe={nextTick:Fo,title:bo,browser:ko,env:{NODE_ENV:"production"},argv:No,version:Lo,versions:Mo,on:Yo,addListener:Ro,once:jo,off:Uo,removeListener:Jo,removeAllListeners:$o,emit:zo,binding:Wo,cwd:Ho,chdir:qo,umask:Vo,hrtime:Zo,platform:Bo,release:Xo,config:Oo,uptime:Qo};function kt(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function Xr(s,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(s,o.key,o)}}function wt(s,e,n){return e&&Xr(s.prototype,e),n&&Xr(s,n),s}var Fe=function(e,n){return e.ll.x<=n.x&&n.x<=e.ur.x&&e.ll.y<=n.y&&n.y<=e.ur.y},Di=function(e,n){if(n.ur.x<e.ll.x||e.ur.x<n.ll.x||n.ur.y<e.ll.y||e.ur.y<n.ll.y)return null;var o=e.ll.x<n.ll.x?n.ll.x:e.ll.x,h=e.ur.x<n.ur.x?e.ur.x:n.ur.x,l=e.ll.y<n.ll.y?n.ll.y:e.ll.y,f=e.ur.y<n.ur.y?e.ur.y:n.ur.y;return{ll:{x:o,y:l},ur:{x:h,y:f}}},Vt=Number.EPSILON;Vt===void 0&&(Vt=Math.pow(2,-52));var ta=Vt*Vt,Ei=function(e,n){if(-Vt<e&&e<Vt&&-Vt<n&&n<Vt)return 0;var o=e-n;return o*o<ta*e*n?0:e<n?-1:1},ea=function(){function s(){kt(this,s),this.reset()}return wt(s,[{key:"reset",value:function(){this.xRounder=new Or,this.yRounder=new Or}},{key:"round",value:function(n,o){return{x:this.xRounder.round(n),y:this.yRounder.round(o)}}}]),s}(),Or=function(){function s(){kt(this,s),this.tree=new Ci,this.round(0)}return wt(s,[{key:"round",value:function(n){var o=this.tree.add(n),h=this.tree.prev(o);if(h!==null&&Ei(o.key,h.key)===0)return this.tree.remove(n),h.key;var l=this.tree.next(o);return l!==null&&Ei(o.key,l.key)===0?(this.tree.remove(n),l.key):n}}]),s}(),be=new ea,Be=function(e,n){return e.x*n.y-e.y*n.x},Yr=function(e,n){return e.x*n.x+e.y*n.y},Rr=function(e,n,o){var h={x:n.x-e.x,y:n.y-e.y},l={x:o.x-e.x,y:o.y-e.y},f=Be(h,l);return Ei(f,0)},Oe=function(e){return Math.sqrt(Yr(e,e))},ia=function(e,n,o){var h={x:n.x-e.x,y:n.y-e.y},l={x:o.x-e.x,y:o.y-e.y};return Be(l,h)/Oe(l)/Oe(h)},ra=function(e,n,o){var h={x:n.x-e.x,y:n.y-e.y},l={x:o.x-e.x,y:o.y-e.y};return Yr(l,h)/Oe(l)/Oe(h)},jr=function(e,n,o){return n.y===0?null:{x:e.x+n.x/n.y*(o-e.y),y:o}},Ur=function(e,n,o){return n.x===0?null:{x:o,y:e.y+n.y/n.x*(o-e.x)}},na=function(e,n,o,h){if(n.x===0)return Ur(o,h,e.x);if(h.x===0)return Ur(e,n,o.x);if(n.y===0)return jr(o,h,e.y);if(h.y===0)return jr(e,n,o.y);var l=Be(n,h);if(l==0)return null;var f={x:o.x-e.x,y:o.y-e.y},m=Be(f,n)/l,i=Be(f,h)/l,D=e.x+i*n.x,A=o.x+m*h.x,S=e.y+i*n.y,x=o.y+m*h.y,w=(D+A)/2,y=(S+x)/2;return{x:w,y}},Rt=function(){wt(s,null,[{key:"compare",value:function(n,o){var h=s.comparePoints(n.point,o.point);return h!==0?h:(n.point!==o.point&&n.link(o),n.isLeft!==o.isLeft?n.isLeft?1:-1:Ye.compare(n.segment,o.segment))}},{key:"comparePoints",value:function(n,o){return n.x<o.x?-1:n.x>o.x?1:n.y<o.y?-1:n.y>o.y?1:0}}]);function s(e,n){kt(this,s),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return wt(s,[{key:"link",value:function(n){if(n.point===this.point)throw new Error("Tried to link already linked events");for(var o=n.point.events,h=0,l=o.length;h<l;h++){var f=o[h];this.point.events.push(f),f.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var n=this.point.events.length,o=0;o<n;o++){var h=this.point.events[o];if(h.segment.consumedBy===void 0)for(var l=o+1;l<n;l++){var f=this.point.events[l];f.consumedBy===void 0&&h.otherSE.point.events===f.otherSE.point.events&&h.segment.consume(f.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var n=[],o=0,h=this.point.events.length;o<h;o++){var l=this.point.events[o];l!==this&&!l.segment.ringOut&&l.segment.isInResult()&&n.push(l)}return n}},{key:"getLeftmostComparator",value:function(n){var o=this,h=new Map,l=function(m){var i=m.otherSE;h.set(m,{sine:ia(o.point,n.point,i.point),cosine:ra(o.point,n.point,i.point)})};return function(f,m){h.has(f)||l(f),h.has(m)||l(m);var i=h.get(f),D=i.sine,A=i.cosine,S=h.get(m),x=S.sine,w=S.cosine;return D>=0&&x>=0?A<w?1:A>w?-1:0:D<0&&x<0?A<w?-1:A>w?1:0:x<D?-1:x>D?1:0}}}]),s}(),sa=0,Ye=function(){wt(s,null,[{key:"compare",value:function(n,o){var h=n.leftSE.point.x,l=o.leftSE.point.x,f=n.rightSE.point.x,m=o.rightSE.point.x;if(m<h)return 1;if(f<l)return-1;var i=n.leftSE.point.y,D=o.leftSE.point.y,A=n.rightSE.point.y,S=o.rightSE.point.y;if(h<l){if(D<i&&D<A)return 1;if(D>i&&D>A)return-1;var x=n.comparePoint(o.leftSE.point);if(x<0)return 1;if(x>0)return-1;var w=o.comparePoint(n.rightSE.point);return w!==0?w:-1}if(h>l){if(i<D&&i<S)return-1;if(i>D&&i>S)return 1;var y=o.comparePoint(n.leftSE.point);if(y!==0)return y;var c=n.comparePoint(o.rightSE.point);return c<0?1:c>0?-1:1}if(i<D)return-1;if(i>D)return 1;if(f<m){var p=o.comparePoint(n.rightSE.point);if(p!==0)return p}if(f>m){var v=n.comparePoint(o.rightSE.point);if(v<0)return 1;if(v>0)return-1}if(f!==m){var C=A-i,I=f-h,T=S-D,L=m-l;if(C>I&&T<L)return 1;if(C<I&&T>L)return-1}return f>m?1:f<m||A<S?-1:A>S?1:n.id<o.id?-1:n.id>o.id?1:0}}]);function s(e,n,o,h){kt(this,s),this.id=++sa,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=o,this.windings=h}return wt(s,[{key:"replaceRightSE",value:function(n){this.rightSE=n,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var n=this.leftSE.point.y,o=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n<o?n:o},ur:{x:this.rightSE.point.x,y:n>o?n:o}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(n){return n.x===this.leftSE.point.x&&n.y===this.leftSE.point.y||n.x===this.rightSE.point.x&&n.y===this.rightSE.point.y}},{key:"comparePoint",value:function(n){if(this.isAnEndpoint(n))return 0;var o=this.leftSE.point,h=this.rightSE.point,l=this.vector();if(o.x===h.x)return n.x===o.x?0:n.x<o.x?1:-1;var f=(n.y-o.y)/l.y,m=o.x+f*l.x;if(n.x===m)return 0;var i=(n.x-o.x)/l.x,D=o.y+i*l.y;return n.y===D?0:n.y<D?-1:1}},{key:"getIntersection",value:function(n){var o=this.bbox(),h=n.bbox(),l=Di(o,h);if(l===null)return null;var f=this.leftSE.point,m=this.rightSE.point,i=n.leftSE.point,D=n.rightSE.point,A=Fe(o,i)&&this.comparePoint(i)===0,S=Fe(h,f)&&n.comparePoint(f)===0,x=Fe(o,D)&&this.comparePoint(D)===0,w=Fe(h,m)&&n.comparePoint(m)===0;if(S&&A)return w&&!x?m:!w&&x?D:null;if(S)return x&&f.x===D.x&&f.y===D.y?null:f;if(A)return w&&m.x===i.x&&m.y===i.y?null:i;if(w&&x)return null;if(w)return m;if(x)return D;var y=na(f,this.vector(),i,n.vector());return y===null||!Fe(l,y)?null:be.round(y.x,y.y)}},{key:"split",value:function(n){var o=[],h=n.events!==void 0,l=new Rt(n,!0),f=new Rt(n,!1),m=this.rightSE;this.replaceRightSE(f),o.push(f),o.push(l);var i=new s(l,m,this.rings.slice(),this.windings.slice());return Rt.comparePoints(i.leftSE.point,i.rightSE.point)>0&&i.swapEvents(),Rt.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),h&&(l.checkForConsuming(),f.checkForConsuming()),o}},{key:"swapEvents",value:function(){var n=this.rightSE;this.rightSE=this.leftSE,this.leftSE=n,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var o=0,h=this.windings.length;o<h;o++)this.windings[o]*=-1}},{key:"consume",value:function(n){for(var o=this,h=n;o.consumedBy;)o=o.consumedBy;for(;h.consumedBy;)h=h.consumedBy;var l=s.compare(o,h);if(l!==0){if(l>0){var f=o;o=h,h=f}if(o.prev===h){var m=o;o=h,h=m}for(var i=0,D=h.rings.length;i<D;i++){var A=h.rings[i],S=h.windings[i],x=o.rings.indexOf(A);x===-1?(o.rings.push(A),o.windings.push(S)):o.windings[x]+=S}h.rings=null,h.windings=null,h.consumedBy=o,h.leftSE.consumedBy=o.leftSE,h.rightSE.consumedBy=o.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var n=this.beforeState();this._afterState={rings:n.rings.slice(0),windings:n.windings.slice(0),multiPolys:[]};for(var o=this._afterState.rings,h=this._afterState.windings,l=this._afterState.multiPolys,f=0,m=this.rings.length;f<m;f++){var i=this.rings[f],D=this.windings[f],A=o.indexOf(i);A===-1?(o.push(i),h.push(D)):h[A]+=D}for(var S=[],x=[],w=0,y=o.length;w<y;w++)if(h[w]!==0){var c=o[w],p=c.poly;if(x.indexOf(p)===-1)if(c.isExterior)S.push(p);else{x.indexOf(p)===-1&&x.push(p);var v=S.indexOf(c.poly);v!==-1&&S.splice(v,1)}}for(var C=0,I=S.length;C<I;C++){var T=S[C].multiPoly;l.indexOf(T)===-1&&l.push(T)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var n=this.beforeState().multiPolys,o=this.afterState().multiPolys;switch(Lt.type){case"union":{var h=n.length===0,l=o.length===0;this._isInResult=h!==l;break}case"intersection":{var f,m;n.length<o.length?(f=n.length,m=o.length):(f=o.length,m=n.length),this._isInResult=m===Lt.numMultiPolys&&f<m;break}case"xor":{var i=Math.abs(n.length-o.length);this._isInResult=i%2==1;break}case"difference":{var D=function(S){return S.length===1&&S[0].isSubject};this._isInResult=D(n)!==D(o);break}default:throw new Error("Unrecognized operation type found ".concat(Lt.type))}return this._isInResult}}],[{key:"fromRing",value:function(n,o,h){var l,f,m,i=Rt.comparePoints(n,o);if(i<0)l=n,f=o,m=1;else if(i>0)l=o,f=n,m=-1;else throw new Error("Tried to create degenerate segment at [".concat(n.x,", ").concat(n.y,"]"));var D=new Rt(l,!0),A=new Rt(f,!1);return new s(D,A,[h],[m])}}]),s}(),Jr=function(){function s(e,n,o){if(kt(this,s),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=o,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var h=be.round(e[0][0],e[0][1]);this.bbox={ll:{x:h.x,y:h.y},ur:{x:h.x,y:h.y}};for(var l=h,f=1,m=e.length;f<m;f++){if(typeof e[f][0]!="number"||typeof e[f][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=be.round(e[f][0],e[f][1]);i.x===l.x&&i.y===l.y||(this.segments.push(Ye.fromRing(l,i,this)),i.x<this.bbox.ll.x&&(this.bbox.ll.x=i.x),i.y<this.bbox.ll.y&&(this.bbox.ll.y=i.y),i.x>this.bbox.ur.x&&(this.bbox.ur.x=i.x),i.y>this.bbox.ur.y&&(this.bbox.ur.y=i.y),l=i)}(h.x!==l.x||h.y!==l.y)&&this.segments.push(Ye.fromRing(l,h,this))}return wt(s,[{key:"getSweepEvents",value:function(){for(var n=[],o=0,h=this.segments.length;o<h;o++){var l=this.segments[o];n.push(l.leftSE),n.push(l.rightSE)}return n}}]),s}(),oa=function(){function s(e,n){if(kt(this,s),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Jr(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var o=1,h=e.length;o<h;o++){var l=new Jr(e[o],this,!1);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.interiorRings.push(l)}this.multiPoly=n}return wt(s,[{key:"getSweepEvents",value:function(){for(var n=this.exteriorRing.getSweepEvents(),o=0,h=this.interiorRings.length;o<h;o++)for(var l=this.interiorRings[o].getSweepEvents(),f=0,m=l.length;f<m;f++)n.push(l[f]);return n}}]),s}(),$r=function(){function s(e,n){if(kt(this,s),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch(f){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var o=0,h=e.length;o<h;o++){var l=new oa(e[o],this);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.polys.push(l)}this.isSubject=n}return wt(s,[{key:"getSweepEvents",value:function(){for(var n=[],o=0,h=this.polys.length;o<h;o++)for(var l=this.polys[o].getSweepEvents(),f=0,m=l.length;f<m;f++)n.push(l[f]);return n}}]),s}(),aa=function(){wt(s,null,[{key:"factory",value:function(n){for(var o=[],h=0,l=n.length;h<l;h++){var f=n[h];if(!(!f.isInResult()||f.ringOut)){for(var m=null,i=f.leftSE,D=f.rightSE,A=[i],S=i.point,x=[];m=i,i=D,A.push(i),i.point!==S;)for(;;){var w=i.getAvailableLinkedEvents();if(w.length===0){var y=A[0].point,c=A[A.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(y.x,",")+" ".concat(y.y,"]. Last matching segment found ends at")+" [".concat(c.x,", ").concat(c.y,"]."))}if(w.length===1){D=w[0].otherSE;break}for(var p=null,v=0,C=x.length;v<C;v++)if(x[v].point===i.point){p=v;break}if(p!==null){var I=x.splice(p)[0],T=A.splice(I.index);T.unshift(T[0].otherSE),o.push(new s(T.reverse()));continue}x.push({index:A.length,point:i.point});var L=i.getLeftmostComparator(m);D=w.sort(L)[0].otherSE;break}o.push(new s(A))}}return o}}]);function s(e){kt(this,s),this.events=e;for(var n=0,o=e.length;n<o;n++)e[n].segment.ringOut=this;this.poly=null}return wt(s,[{key:"getGeom",value:function(){for(var n=this.events[0].point,o=[n],h=1,l=this.events.length-1;h<l;h++){var f=this.events[h].point,m=this.events[h+1].point;Rr(f,n,m)!==0&&(o.push(f),n=f)}if(o.length===1)return null;var i=o[0],D=o[1];Rr(i,n,D)===0&&o.shift(),o.push(o[0]);for(var A=this.isExteriorRing()?1:-1,S=this.isExteriorRing()?0:o.length-1,x=this.isExteriorRing()?o.length:-1,w=[],y=S;y!=x;y+=A)w.push([o[y].x,o[y].y]);return w}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var n=this.enclosingRing();this._isExteriorRing=n?!n.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var n=this.events[0],o=1,h=this.events.length;o<h;o++){var l=this.events[o];Rt.compare(n,l)>0&&(n=l)}for(var f=n.segment.prevInResult(),m=f?f.prevInResult():null;;){if(!f)return null;if(!m)return f.ringOut;if(m.ringOut!==f.ringOut)return m.ringOut.enclosingRing()!==f.ringOut?f.ringOut:f.ringOut.enclosingRing();f=m.prevInResult(),m=f?f.prevInResult():null}}}]),s}(),zr=function(){function s(e){kt(this,s),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return wt(s,[{key:"addInterior",value:function(n){this.interiorRings.push(n),n.poly=this}},{key:"getGeom",value:function(){var n=[this.exteriorRing.getGeom()];if(n[0]===null)return null;for(var o=0,h=this.interiorRings.length;o<h;o++){var l=this.interiorRings[o].getGeom();l!==null&&n.push(l)}return n}}]),s}(),la=function(){function s(e){kt(this,s),this.rings=e,this.polys=this._composePolys(e)}return wt(s,[{key:"getGeom",value:function(){for(var n=[],o=0,h=this.polys.length;o<h;o++){var l=this.polys[o].getGeom();l!==null&&n.push(l)}return n}},{key:"_composePolys",value:function(n){for(var o=[],h=0,l=n.length;h<l;h++){var f=n[h];if(!f.poly)if(f.isExteriorRing())o.push(new zr(f));else{var m=f.enclosingRing();m.poly||o.push(new zr(m)),m.poly.addInterior(f)}}return o}}]),s}(),ua=function(){function s(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ye.compare;kt(this,s),this.queue=e,this.tree=new Ci(n),this.segments=[]}return wt(s,[{key:"process",value:function(n){var o=n.segment,h=[];if(n.consumedBy)return n.isLeft?this.queue.remove(n.otherSE):this.tree.remove(o),h;var l=n.isLeft?this.tree.insert(o):this.tree.find(o);if(!l)throw new Error("Unable to find segment #".concat(o.id," ")+"[".concat(o.leftSE.point.x,", ").concat(o.leftSE.point.y,"] -> ")+"[".concat(o.rightSE.point.x,", ").concat(o.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var f=l,m=l,i=void 0,D=void 0;i===void 0;)f=this.tree.prev(f),f===null?i=null:f.key.consumedBy===void 0&&(i=f.key);for(;D===void 0;)m=this.tree.next(m),m===null?D=null:m.key.consumedBy===void 0&&(D=m.key);if(n.isLeft){var A=null;if(i){var S=i.getIntersection(o);if(S!==null&&(o.isAnEndpoint(S)||(A=S),!i.isAnEndpoint(S)))for(var x=this._splitSafely(i,S),w=0,y=x.length;w<y;w++)h.push(x[w])}var c=null;if(D){var p=D.getIntersection(o);if(p!==null&&(o.isAnEndpoint(p)||(c=p),!D.isAnEndpoint(p)))for(var v=this._splitSafely(D,p),C=0,I=v.length;C<I;C++)h.push(v[C])}if(A!==null||c!==null){var T=null;if(A===null)T=c;else if(c===null)T=A;else{var L=Rt.comparePoints(A,c);T=L<=0?A:c}this.queue.remove(o.rightSE),h.push(o.rightSE);for(var Y=o.split(T),j=0,z=Y.length;j<z;j++)h.push(Y[j])}h.length>0?(this.tree.remove(o),h.push(n)):(this.segments.push(o),o.prev=i)}else{if(i&&D){var q=i.getIntersection(D);if(q!==null){if(!i.isAnEndpoint(q))for(var Z=this._splitSafely(i,q),k=0,P=Z.length;k<P;k++)h.push(Z[k]);if(!D.isAnEndpoint(q))for(var g=this._splitSafely(D,q),B=0,M=g.length;B<M;B++)h.push(g[B])}}this.tree.remove(o)}return h}},{key:"_splitSafely",value:function(n,o){this.tree.remove(n);var h=n.rightSE;this.queue.remove(h);var l=n.split(o);return l.push(h),n.consumedBy===void 0&&this.tree.insert(n),l}}]),s}(),Wr=typeof Xe!="undefined"&&Xe.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,ha=typeof Xe!="undefined"&&Xe.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,ca=function(){function s(){kt(this,s)}return wt(s,[{key:"run",value:function(n,o,h){Lt.type=n,be.reset();for(var l=[new $r(o,!0)],f=0,m=h.length;f<m;f++)l.push(new $r(h[f],!1));if(Lt.numMultiPolys=l.length,Lt.type==="difference")for(var i=l[0],D=1;D<l.length;)Di(l[D].bbox,i.bbox)!==null?D++:l.splice(D,1);if(Lt.type==="intersection"){for(var A=0,S=l.length;A<S;A++)for(var x=l[A],w=A+1,y=l.length;w<y;w++)if(Di(x.bbox,l[w].bbox)===null)return[]}for(var c=new Ci(Rt.compare),p=0,v=l.length;p<v;p++)for(var C=l[p].getSweepEvents(),I=0,T=C.length;I<T;I++)if(c.insert(C[I]),c.size>Wr)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var L=new ua(c),Y=c.size,j=c.pop();j;){var z=j.key;if(c.size===Y){var q=z.segment;throw new Error("Unable to pop() ".concat(z.isLeft?"left":"right"," SweepEvent ")+"[".concat(z.point.x,", ").concat(z.point.y,"] from segment #").concat(q.id," ")+"[".concat(q.leftSE.point.x,", ").concat(q.leftSE.point.y,"] -> ")+"[".concat(q.rightSE.point.x,", ").concat(q.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(c.size>Wr)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(L.segments.length>ha)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Z=L.process(z),k=0,P=Z.length;k<P;k++){var g=Z[k];g.consumedBy===void 0&&c.insert(g)}Y=c.size,j=c.pop()}be.reset();var B=aa.factory(L.segments),M=new la(B);return M.getGeom()}}]),s}(),Lt=new ca,pa=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),h=1;h<n;h++)o[h-1]=arguments[h];return Lt.run("union",e,o)},fa=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),h=1;h<n;h++)o[h-1]=arguments[h];return Lt.run("intersection",e,o)},da=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),h=1;h<n;h++)o[h-1]=arguments[h];return Lt.run("xor",e,o)},ma=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),h=1;h<n;h++)o[h-1]=arguments[h];return Lt.run("difference",e,o)},Re={union:pa,intersection:fa,xor:da,difference:ma},me,Pi,je;(()=>{let s=new Map;me={register(m,i,D){s.set(m,{d:i,f:D,exp:{}})}};async function e(m,i){let D=m.replace(/\.\w+$/i,"");if(D.includes("./")){let[A,...S]=D.split("/").reverse(),[,...x]=i.split("/").reverse(),w=[A],y=0,c;for(;c=S.shift();)if(c==="..")y++;else{if(c===".")break;w.push(c)}y<x.length&&w.push(...x.slice(y)),D=w.reverse().join("/")}return s.has(D)?l(D):import(m)}function n(m,i){return{id:m,import:D=>e(D,m),meta:{url:m,main:i}}}function o(m){return(i,D)=>{D=typeof i=="string"?{[i]:D}:i;for(let[A,S]of Object.entries(D))Object.defineProperty(m,A,{value:S,writable:!0,enumerable:!0})}}function h(m){for(let[i,D]of s.entries()){let{f:A,exp:S}=D,{execute:x,setters:w}=A(o(S),n(i,i===m));delete D.f,D.e=x,D.s=w}}async function l(m){if(!s.has(m))return;let i=s.get(m);if(i.s){let{d:D,e:A,s:S}=i;delete i.s,delete i.e;for(let w=0;w<S.length;w++)S[w](await l(D[w]));let x=A();x&&await x}return i.exp}function f(m){if(!s.has(m))return;let i=s.get(m);if(i.s){let{d:D,e:A,s:S}=i;delete i.s,delete i.e;for(let x=0;x<S.length;x++)S[x](f(D[x]));A()}return i.exp}Pi=async m=>(me=Pi=je=void 0,h(m),l(m)),je=m=>(me=Pi=je=void 0,h(m),f(m))})();me.register("-/clipper-lib@v6.4.2-JisZmmhC7gDAFmHQLYDu/dist=es2020/clipper-lib",[],function(s,e){"use strict";var n,o,h=e&&e.id;function l(m,i,D){return D={path:i,exports:{},require:function(A,S){return f(A,S==null?D.path:S)}},m(D,D.exports),D.exports}function f(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}return{setters:[],execute:function(){n=l(function(m){(function(){var i={};i.version="6.4.2.2",i.use_lines=!0,i.use_xyz=!1;var D=!1;m.exports?(m.exports=i,D=!0):typeof document!="undefined"?window.ClipperLib=i:self.ClipperLib=i;var A;if(D){var S="chrome";A="Netscape"}else{var S=navigator.userAgent.toString().toLowerCase();A=navigator.appName}var x={};S.indexOf("chrome")!=-1&&S.indexOf("chromium")==-1?x.chrome=1:x.chrome=0,S.indexOf("chromium")!=-1?x.chromium=1:x.chromium=0,S.indexOf("safari")!=-1&&S.indexOf("chrome")==-1&&S.indexOf("chromium")==-1?x.safari=1:x.safari=0,S.indexOf("firefox")!=-1?x.firefox=1:x.firefox=0,S.indexOf("firefox/17")!=-1?x.firefox17=1:x.firefox17=0,S.indexOf("firefox/15")!=-1?x.firefox15=1:x.firefox15=0,S.indexOf("firefox/3")!=-1?x.firefox3=1:x.firefox3=0,S.indexOf("opera")!=-1?x.opera=1:x.opera=0,S.indexOf("msie 10")!=-1?x.msie10=1:x.msie10=0,S.indexOf("msie 9")!=-1?x.msie9=1:x.msie9=0,S.indexOf("msie 8")!=-1?x.msie8=1:x.msie8=0,S.indexOf("msie 7")!=-1?x.msie7=1:x.msie7=0,S.indexOf("msie ")!=-1?x.msie=1:x.msie=0,i.biginteger_used=null;var w;function y(t,r,a){i.biginteger_used=1,t!=null&&(typeof t=="number"&&typeof r=="undefined"?this.fromInt(t):typeof t=="number"?this.fromNumber(t,r,a):r==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,r))}function c(){return new y(null,void 0,void 0)}function p(t,r,a,u,d,E){for(;--E>=0;){var _=r*this[t++]+a[u]+d;d=Math.floor(_/67108864),a[u++]=_&67108863}return d}function v(t,r,a,u,d,E){for(var _=r&32767,b=r>>15;--E>=0;){var F=this[t]&32767,X=this[t++]>>15,$=b*F+X*_;F=_*F+(($&32767)<<15)+a[u]+(d&1073741823),d=(F>>>30)+($>>>15)+b*X+(d>>>30),a[u++]=F&1073741823}return d}function C(t,r,a,u,d,E){for(var _=r&16383,b=r>>14;--E>=0;){var F=this[t]&16383,X=this[t++]>>14,$=b*F+X*_;F=_*F+(($&16383)<<14)+a[u]+d,d=(F>>28)+($>>14)+b*X,a[u++]=F&268435455}return d}A=="Microsoft Internet Explorer"?(y.prototype.am=v,w=30):A!="Netscape"?(y.prototype.am=p,w=26):(y.prototype.am=C,w=28),y.prototype.DB=w,y.prototype.DM=(1<<w)-1,y.prototype.DV=1<<w;var I=52;y.prototype.FV=Math.pow(2,I),y.prototype.F1=I-w,y.prototype.F2=2*w-I;var T="0123456789abcdefghijklmnopqrstuvwxyz",L=new Array,Y,j;for(Y="0".charCodeAt(0),j=0;j<=9;++j)L[Y++]=j;for(Y="a".charCodeAt(0),j=10;j<36;++j)L[Y++]=j;for(Y="A".charCodeAt(0),j=10;j<36;++j)L[Y++]=j;function z(t){return T.charAt(t)}function q(t,r){var a=L[t.charCodeAt(r)];return a==null?-1:a}function Z(t){for(var r=this.t-1;r>=0;--r)t[r]=this[r];t.t=this.t,t.s=this.s}function k(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function P(t){var r=c();return r.fromInt(t),r}function g(t,r){var a;if(r==16)a=4;else if(r==8)a=3;else if(r==256)a=8;else if(r==2)a=1;else if(r==32)a=5;else if(r==4)a=2;else{this.fromRadix(t,r);return}this.t=0,this.s=0;for(var u=t.length,d=!1,E=0;--u>=0;){var _=a==8?t[u]&255:q(t,u);if(_<0){t.charAt(u)=="-"&&(d=!0);continue}d=!1,E==0?this[this.t++]=_:E+a>this.DB?(this[this.t-1]|=(_&(1<<this.DB-E)-1)<<E,this[this.t++]=_>>this.DB-E):this[this.t-1]|=_<<E,E+=a,E>=this.DB&&(E-=this.DB)}a==8&&(t[0]&128)!=0&&(this.s=-1,E>0&&(this[this.t-1]|=(1<<this.DB-E)-1<<E)),this.clamp(),d&&y.ZERO.subTo(this,this)}function B(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function M(t){if(this.s<0)return"-"+this.negate().toString(t);var r;if(t==16)r=4;else if(t==8)r=3;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else return this.toRadix(t);var a=(1<<r)-1,u,d=!1,E="",_=this.t,b=this.DB-_*this.DB%r;if(_-- >0)for(b<this.DB&&(u=this[_]>>b)>0&&(d=!0,E=z(u));_>=0;)b<r?(u=(this[_]&(1<<b)-1)<<r-b,u|=this[--_]>>(b+=this.DB-r)):(u=this[_]>>(b-=r)&a,b<=0&&(b+=this.DB,--_)),u>0&&(d=!0),d&&(E+=z(u));return d?E:"0"}function N(){var t=c();return y.ZERO.subTo(this,t),t}function U(){return this.s<0?this.negate():this}function H(t){var r=this.s-t.s;if(r!=0)return r;var a=this.t;if(r=a-t.t,r!=0)return this.s<0?-r:r;for(;--a>=0;)if((r=this[a]-t[a])!=0)return r;return 0}function G(t){var r=1,a;return(a=t>>>16)!=0&&(t=a,r+=16),(a=t>>8)!=0&&(t=a,r+=8),(a=t>>4)!=0&&(t=a,r+=4),(a=t>>2)!=0&&(t=a,r+=2),(a=t>>1)!=0&&(t=a,r+=1),r}function K(){return this.t<=0?0:this.DB*(this.t-1)+G(this[this.t-1]^this.s&this.DM)}function ot(t,r){var a;for(a=this.t-1;a>=0;--a)r[a+t]=this[a];for(a=t-1;a>=0;--a)r[a]=0;r.t=this.t+t,r.s=this.s}function ut(t,r){for(var a=t;a<this.t;++a)r[a-t]=this[a];r.t=Math.max(this.t-t,0),r.s=this.s}function pt(t,r){var a=t%this.DB,u=this.DB-a,d=(1<<u)-1,E=Math.floor(t/this.DB),_=this.s<<a&this.DM,b;for(b=this.t-1;b>=0;--b)r[b+E+1]=this[b]>>u|_,_=(this[b]&d)<<a;for(b=E-1;b>=0;--b)r[b]=0;r[E]=_,r.t=this.t+E+1,r.s=this.s,r.clamp()}function ft(t,r){r.s=this.s;var a=Math.floor(t/this.DB);if(a>=this.t){r.t=0;return}var u=t%this.DB,d=this.DB-u,E=(1<<u)-1;r[0]=this[a]>>u;for(var _=a+1;_<this.t;++_)r[_-a-1]|=(this[_]&E)<<d,r[_-a]=this[_]>>u;u>0&&(r[this.t-a-1]|=(this.s&E)<<d),r.t=this.t-a,r.clamp()}function ht(t,r){for(var a=0,u=0,d=Math.min(t.t,this.t);a<d;)u+=this[a]-t[a],r[a++]=u&this.DM,u>>=this.DB;if(t.t<this.t){for(u-=t.s;a<this.t;)u+=this[a],r[a++]=u&this.DM,u>>=this.DB;u+=this.s}else{for(u+=this.s;a<t.t;)u-=t[a],r[a++]=u&this.DM,u>>=this.DB;u-=t.s}r.s=u<0?-1:0,u<-1?r[a++]=this.DV+u:u>0&&(r[a++]=u),r.t=a,r.clamp()}function ct(t,r){var a=this.abs(),u=t.abs(),d=a.t;for(r.t=d+u.t;--d>=0;)r[d]=0;for(d=0;d<u.t;++d)r[d+a.t]=a.am(0,u[d],r,d,0,a.t);r.s=0,r.clamp(),this.s!=t.s&&y.ZERO.subTo(r,r)}function St(t){for(var r=this.abs(),a=t.t=2*r.t;--a>=0;)t[a]=0;for(a=0;a<r.t-1;++a){var u=r.am(a,r[a],t,2*a,0,1);(t[a+r.t]+=r.am(a+1,2*r[a],t,2*a+1,u,r.t-a-1))>=r.DV&&(t[a+r.t]-=r.DV,t[a+r.t+1]=1)}t.t>0&&(t[t.t-1]+=r.am(a,r[a],t,2*a,0,1)),t.s=0,t.clamp()}function Tt(t,r,a){var u=t.abs();if(!(u.t<=0)){var d=this.abs();if(d.t<u.t){r!=null&&r.fromInt(0),a!=null&&this.copyTo(a);return}a==null&&(a=c());var E=c(),_=this.s,b=t.s,F=this.DB-G(u[u.t-1]);F>0?(u.lShiftTo(F,E),d.lShiftTo(F,a)):(u.copyTo(E),d.copyTo(a));var X=E.t,$=E[X-1];if($!=0){var J=$*(1<<this.F1)+(X>1?E[X-2]>>this.F2:0),V=this.FV/J,Q=(1<<this.F1)/J,it=1<<this.F2,nt=a.t,lt=nt-X,_t=r==null?c():r;for(E.dlShiftTo(lt,_t),a.compareTo(_t)>=0&&(a[a.t++]=1,a.subTo(_t,a)),y.ONE.dlShiftTo(X,_t),_t.subTo(E,E);E.t<X;)E[E.t++]=0;for(;--lt>=0;){var Yt=a[--nt]==$?this.DM:Math.floor(a[nt]*V+(a[nt-1]+it)*Q);if((a[nt]+=E.am(0,Yt,a,lt,0,X))<Yt)for(E.dlShiftTo(lt,_t),a.subTo(_t,a);a[nt]<--Yt;)a.subTo(_t,a)}r!=null&&(a.drShiftTo(X,r),_!=b&&y.ZERO.subTo(r,r)),a.t=X,a.clamp(),F>0&&a.rShiftTo(F,a),_<0&&y.ZERO.subTo(a,a)}}}function yt(t){var r=c();return this.abs().divRemTo(t,null,r),this.s<0&&r.compareTo(y.ZERO)>0&&t.subTo(r,r),r}function gt(t){this.m=t}function mt(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function Ft(t){return t}function It(t){t.divRemTo(this.m,null,t)}function bt(t,r,a){t.multiplyTo(r,a),this.reduce(a)}function Et(t,r){t.squareTo(r),this.reduce(r)}gt.prototype.convert=mt,gt.prototype.revert=Ft,gt.prototype.reduce=It,gt.prototype.mulTo=bt,gt.prototype.sqrTo=Et;function At(){if(this.t<1)return 0;var t=this[0];if((t&1)==0)return 0;var r=t&3;return r=r*(2-(t&15)*r)&15,r=r*(2-(t&255)*r)&255,r=r*(2-((t&65535)*r&65535))&65535,r=r*(2-t*r%this.DV)%this.DV,r>0?this.DV-r:-r}function xt(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Ot(t){var r=c();return t.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),t.s<0&&r.compareTo(y.ZERO)>0&&this.m.subTo(r,r),r}function ie(t){var r=c();return t.copyTo(r),this.reduce(r),r}function Gt(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var r=0;r<this.m.t;++r){var a=t[r]&32767,u=a*this.mpl+((a*this.mph+(t[r]>>15)*this.mpl&this.um)<<15)&t.DM;for(a=r+this.m.t,t[a]+=this.m.am(0,u,t,r,0,this.m.t);t[a]>=t.DV;)t[a]-=t.DV,t[++a]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Zt(t,r){t.squareTo(r),this.reduce(r)}function Ce(t,r,a){t.multiplyTo(r,a),this.reduce(a)}xt.prototype.convert=Ot,xt.prototype.revert=ie,xt.prototype.reduce=Gt,xt.prototype.mulTo=Ce,xt.prototype.sqrTo=Zt;function De(){return(this.t>0?this[0]&1:this.s)==0}function Kt(t,r){if(t>4294967295||t<1)return y.ONE;var a=c(),u=c(),d=r.convert(this),E=G(t)-1;for(d.copyTo(a);--E>=0;)if(r.sqrTo(a,u),(t&1<<E)>0)r.mulTo(u,d,a);else{var _=a;a=u,u=_}return r.revert(a)}function Ee(t,r){var a;return t<256||r.isEven()?a=new gt(r):a=new xt(r),this.exp(t,a)}y.prototype.copyTo=Z,y.prototype.fromInt=k,y.prototype.fromString=g,y.prototype.clamp=B,y.prototype.dlShiftTo=ot,y.prototype.drShiftTo=ut,y.prototype.lShiftTo=pt,y.prototype.rShiftTo=ft,y.prototype.subTo=ht,y.prototype.multiplyTo=ct,y.prototype.squareTo=St,y.prototype.divRemTo=Tt,y.prototype.invDigit=At,y.prototype.isEven=De,y.prototype.exp=Kt,y.prototype.toString=M,y.prototype.negate=N,y.prototype.abs=U,y.prototype.compareTo=H,y.prototype.bitLength=K,y.prototype.mod=yt,y.prototype.modPowInt=Ee,y.ZERO=P(0),y.ONE=P(1);function Ze(){var t=c();return this.copyTo(t),t}function Ke(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Qe(){return this.t==0?this.s:this[0]<<24>>24}function ti(){return this.t==0?this.s:this[0]<<16>>16}function ei(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function ii(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function ri(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var r=this.chunkSize(t),a=Math.pow(t,r),u=P(a),d=c(),E=c(),_="";for(this.divRemTo(u,d,E);d.signum()>0;)_=(a+E.intValue()).toString(t).substr(1)+_,d.divRemTo(u,d,E);return E.intValue().toString(t)+_}function ni(t,r){this.fromInt(0),r==null&&(r=10);for(var a=this.chunkSize(r),u=Math.pow(r,a),d=!1,E=0,_=0,b=0;b<t.length;++b){var F=q(t,b);if(F<0){t.charAt(b)=="-"&&this.signum()==0&&(d=!0);continue}_=r*_+F,++E>=a&&(this.dMultiply(u),this.dAddOffset(_,0),E=0,_=0)}E>0&&(this.dMultiply(Math.pow(r,E)),this.dAddOffset(_,0)),d&&y.ZERO.subTo(this,this)}function si(t,r,a){if(typeof r=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,a),this.testBit(t-1)||this.bitwiseTo(y.ONE.shiftLeft(t-1),O,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(y.ONE.shiftLeft(t-1),this);else{var u=new Array,d=t&7;u.length=(t>>3)+1,r.nextBytes(u),d>0?u[0]&=(1<<d)-1:u[0]=0,this.fromString(u,256)}}function oi(){var t=this.t,r=new Array;r[0]=this.s;var a=this.DB-t*this.DB%8,u,d=0;if(t-- >0)for(a<this.DB&&(u=this[t]>>a)!=(this.s&this.DM)>>a&&(r[d++]=u|this.s<<this.DB-a);t>=0;)a<8?(u=(this[t]&(1<<a)-1)<<8-a,u|=this[--t]>>(a+=this.DB-8)):(u=this[t]>>(a-=8)&255,a<=0&&(a+=this.DB,--t)),(u&128)!=0&&(u|=-256),d==0&&(this.s&128)!=(u&128)&&++d,(d>0||u!=this.s)&&(r[d++]=u);return r}function ai(t){return this.compareTo(t)==0}function li(t){return this.compareTo(t)<0?this:t}function ui(t){return this.compareTo(t)>0?this:t}function hi(t,r,a){var u,d,E=Math.min(t.t,this.t);for(u=0;u<E;++u)a[u]=r(this[u],t[u]);if(t.t<this.t){for(d=t.s&this.DM,u=E;u<this.t;++u)a[u]=r(this[u],d);a.t=this.t}else{for(d=this.s&this.DM,u=E;u<t.t;++u)a[u]=r(d,t[u]);a.t=t.t}a.s=r(this.s,t.s),a.clamp()}function ci(t,r){return t&r}function pi(t){var r=c();return this.bitwiseTo(t,ci,r),r}function O(t,r){return t|r}function R(t){var r=c();return this.bitwiseTo(t,O,r),r}function W(t,r){return t^r}function tt(t){var r=c();return this.bitwiseTo(t,W,r),r}function Ct(t,r){return t&~r}function Pe(t){var r=c();return this.bitwiseTo(t,Ct,r),r}function fi(){for(var t=c(),r=0;r<this.t;++r)t[r]=this.DM&~this[r];return t.t=this.t,t.s=~this.s,t}function Is(t){var r=c();return t<0?this.rShiftTo(-t,r):this.lShiftTo(t,r),r}function Ts(t){var r=c();return t<0?this.lShiftTo(-t,r):this.rShiftTo(t,r),r}function Fs(t){if(t==0)return-1;var r=0;return(t&65535)==0&&(t>>=16,r+=16),(t&255)==0&&(t>>=8,r+=8),(t&15)==0&&(t>>=4,r+=4),(t&3)==0&&(t>>=2,r+=2),(t&1)==0&&++r,r}function bs(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+Fs(this[t]);return this.s<0?this.t*this.DB:-1}function Bs(t){for(var r=0;t!=0;)t&=t-1,++r;return r}function ks(){for(var t=0,r=this.s&this.DM,a=0;a<this.t;++a)t+=Bs(this[a]^r);return t}function Ns(t){var r=Math.floor(t/this.DB);return r>=this.t?this.s!=0:(this[r]&1<<t%this.DB)!=0}function Ls(t,r){var a=y.ONE.shiftLeft(t);return this.bitwiseTo(a,r,a),a}function Ms(t){return this.changeBit(t,O)}function Xs(t){return this.changeBit(t,Ct)}function Os(t){return this.changeBit(t,W)}function Ys(t,r){for(var a=0,u=0,d=Math.min(t.t,this.t);a<d;)u+=this[a]+t[a],r[a++]=u&this.DM,u>>=this.DB;if(t.t<this.t){for(u+=t.s;a<this.t;)u+=this[a],r[a++]=u&this.DM,u>>=this.DB;u+=this.s}else{for(u+=this.s;a<t.t;)u+=t[a],r[a++]=u&this.DM,u>>=this.DB;u+=t.s}r.s=u<0?-1:0,u>0?r[a++]=u:u<-1&&(r[a++]=this.DV+u),r.t=a,r.clamp()}function Rs(t){var r=c();return this.addTo(t,r),r}function js(t){var r=c();return this.subTo(t,r),r}function Us(t){var r=c();return this.multiplyTo(t,r),r}function Js(){var t=c();return this.squareTo(t),t}function $s(t){var r=c();return this.divRemTo(t,r,null),r}function zs(t){var r=c();return this.divRemTo(t,null,r),r}function Ws(t){var r=c(),a=c();return this.divRemTo(t,r,a),new Array(r,a)}function Hs(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function qs(t,r){if(t!=0){for(;this.t<=r;)this[this.t++]=0;for(this[r]+=t;this[r]>=this.DV;)this[r]-=this.DV,++r>=this.t&&(this[this.t++]=0),++this[r]}}function we(){}function pr(t){return t}function Vs(t,r,a){t.multiplyTo(r,a)}function Gs(t,r){t.squareTo(r)}we.prototype.convert=pr,we.prototype.revert=pr,we.prototype.mulTo=Vs,we.prototype.sqrTo=Gs;function Zs(t){return this.exp(t,new we)}function Ks(t,r,a){var u=Math.min(this.t+t.t,r);for(a.s=0,a.t=u;u>0;)a[--u]=0;var d;for(d=a.t-this.t;u<d;++u)a[u+this.t]=this.am(0,t[u],a,u,0,this.t);for(d=Math.min(t.t,r);u<d;++u)this.am(0,t[u],a,u,0,r-u);a.clamp()}function Qs(t,r,a){--r;var u=a.t=this.t+t.t-r;for(a.s=0;--u>=0;)a[u]=0;for(u=Math.max(r-this.t,0);u<t.t;++u)a[this.t+u-r]=this.am(r-u,t[u],a,0,0,this.t+u-r);a.clamp(),a.drShiftTo(1,a)}function re(t){this.r2=c(),this.q3=c(),y.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function to(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var r=c();return t.copyTo(r),this.reduce(r),r}function eo(t){return t}function io(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function ro(t,r){t.squareTo(r),this.reduce(r)}function no(t,r,a){t.multiplyTo(r,a),this.reduce(a)}re.prototype.convert=to,re.prototype.revert=eo,re.prototype.reduce=io,re.prototype.mulTo=no,re.prototype.sqrTo=ro;function so(t,r){var a=t.bitLength(),u,d=P(1),E;if(a<=0)return d;a<18?u=1:a<48?u=3:a<144?u=4:a<768?u=5:u=6,a<8?E=new gt(r):r.isEven()?E=new re(r):E=new xt(r);var _=new Array,b=3,F=u-1,X=(1<<u)-1;if(_[1]=E.convert(this),u>1){var $=c();for(E.sqrTo(_[1],$);b<=X;)_[b]=c(),E.mulTo($,_[b-2],_[b]),b+=2}var J=t.t-1,V,Q=!0,it=c(),nt;for(a=G(t[J])-1;J>=0;){for(a>=F?V=t[J]>>a-F&X:(V=(t[J]&(1<<a+1)-1)<<F-a,J>0&&(V|=t[J-1]>>this.DB+a-F)),b=u;(V&1)==0;)V>>=1,--b;if((a-=b)<0&&(a+=this.DB,--J),Q)_[V].copyTo(d),Q=!1;else{for(;b>1;)E.sqrTo(d,it),E.sqrTo(it,d),b-=2;b>0?E.sqrTo(d,it):(nt=d,d=it,it=nt),E.mulTo(it,_[V],d)}for(;J>=0&&(t[J]&1<<a)==0;)E.sqrTo(d,it),nt=d,d=it,it=nt,--a<0&&(a=this.DB-1,--J)}return E.revert(d)}function oo(t){var r=this.s<0?this.negate():this.clone(),a=t.s<0?t.negate():t.clone();if(r.compareTo(a)<0){var u=r;r=a,a=u}var d=r.getLowestSetBit(),E=a.getLowestSetBit();if(E<0)return r;for(d<E&&(E=d),E>0&&(r.rShiftTo(E,r),a.rShiftTo(E,a));r.signum()>0;)(d=r.getLowestSetBit())>0&&r.rShiftTo(d,r),(d=a.getLowestSetBit())>0&&a.rShiftTo(d,a),r.compareTo(a)>=0?(r.subTo(a,r),r.rShiftTo(1,r)):(a.subTo(r,a),a.rShiftTo(1,a));return E>0&&a.lShiftTo(E,a),a}function ao(t){if(t<=0)return 0;var r=this.DV%t,a=this.s<0?t-1:0;if(this.t>0)if(r==0)a=this[0]%t;else for(var u=this.t-1;u>=0;--u)a=(r*a+this[u])%t;return a}function lo(t){var r=t.isEven();if(this.isEven()&&r||t.signum()==0)return y.ZERO;for(var a=t.clone(),u=this.clone(),d=P(1),E=P(0),_=P(0),b=P(1);a.signum()!=0;){for(;a.isEven();)a.rShiftTo(1,a),r?((!d.isEven()||!E.isEven())&&(d.addTo(this,d),E.subTo(t,E)),d.rShiftTo(1,d)):E.isEven()||E.subTo(t,E),E.rShiftTo(1,E);for(;u.isEven();)u.rShiftTo(1,u),r?((!_.isEven()||!b.isEven())&&(_.addTo(this,_),b.subTo(t,b)),_.rShiftTo(1,_)):b.isEven()||b.subTo(t,b),b.rShiftTo(1,b);a.compareTo(u)>=0?(a.subTo(u,a),r&&d.subTo(_,d),E.subTo(b,E)):(u.subTo(a,u),r&&_.subTo(d,_),b.subTo(E,b))}if(u.compareTo(y.ONE)!=0)return y.ZERO;if(b.compareTo(t)>=0)return b.subtract(t);if(b.signum()<0)b.addTo(t,b);else return b;return b.signum()<0?b.add(t):b}var Pt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],uo=(1<<26)/Pt[Pt.length-1];function ho(t){var r,a=this.abs();if(a.t==1&&a[0]<=Pt[Pt.length-1]){for(r=0;r<Pt.length;++r)if(a[0]==Pt[r])return!0;return!1}if(a.isEven())return!1;for(r=1;r<Pt.length;){for(var u=Pt[r],d=r+1;d<Pt.length&&u<uo;)u*=Pt[d++];for(u=a.modInt(u);r<d;)if(u%Pt[r++]==0)return!1}return a.millerRabin(t)}function co(t){var r=this.subtract(y.ONE),a=r.getLowestSetBit();if(a<=0)return!1;var u=r.shiftRight(a);t=t+1>>1,t>Pt.length&&(t=Pt.length);for(var d=c(),E=0;E<t;++E){d.fromInt(Pt[Math.floor(Math.random()*Pt.length)]);var _=d.modPow(u,this);if(_.compareTo(y.ONE)!=0&&_.compareTo(r)!=0){for(var b=1;b++<a&&_.compareTo(r)!=0;)if(_=_.modPowInt(2,this),_.compareTo(y.ONE)==0)return!1;if(_.compareTo(r)!=0)return!1}}return!0}y.prototype.chunkSize=ei,y.prototype.toRadix=ri,y.prototype.fromRadix=ni,y.prototype.fromNumber=si,y.prototype.bitwiseTo=hi,y.prototype.changeBit=Ls,y.prototype.addTo=Ys,y.prototype.dMultiply=Hs,y.prototype.dAddOffset=qs,y.prototype.multiplyLowerTo=Ks,y.prototype.multiplyUpperTo=Qs,y.prototype.modInt=ao,y.prototype.millerRabin=co,y.prototype.clone=Ze,y.prototype.intValue=Ke,y.prototype.byteValue=Qe,y.prototype.shortValue=ti,y.prototype.signum=ii,y.prototype.toByteArray=oi,y.prototype.equals=ai,y.prototype.min=li,y.prototype.max=ui,y.prototype.and=pi,y.prototype.or=R,y.prototype.xor=tt,y.prototype.andNot=Pe,y.prototype.not=fi,y.prototype.shiftLeft=Is,y.prototype.shiftRight=Ts,y.prototype.getLowestSetBit=bs,y.prototype.bitCount=ks,y.prototype.testBit=Ns,y.prototype.setBit=Ms,y.prototype.clearBit=Xs,y.prototype.flipBit=Os,y.prototype.add=Rs,y.prototype.subtract=js,y.prototype.multiply=Us,y.prototype.divide=$s,y.prototype.remainder=zs,y.prototype.divideAndRemainder=Ws,y.prototype.modPow=so,y.prototype.modInverse=lo,y.prototype.pow=Zs,y.prototype.gcd=oo,y.prototype.isProbablePrime=ho,y.prototype.square=Js;var et=y;et.prototype.IsNegative=function(){return this.compareTo(et.ZERO)==-1},et.op_Equality=function(t,r){return t.compareTo(r)==0},et.op_Inequality=function(t,r){return t.compareTo(r)!=0},et.op_GreaterThan=function(t,r){return t.compareTo(r)>0},et.op_LessThan=function(t,r){return t.compareTo(r)<0},et.op_Addition=function(t,r){return new et(t,void 0,void 0).add(new et(r,void 0,void 0))},et.op_Subtraction=function(t,r){return new et(t,void 0,void 0).subtract(new et(r,void 0,void 0))},et.Int128Mul=function(t,r){return new et(t,void 0,void 0).multiply(new et(r,void 0,void 0))},et.op_Division=function(t,r){return t.divide(r)},et.prototype.ToDouble=function(){return parseFloat(this.toString())};var fr=function(t,r){var a;if(typeof Object.getOwnPropertyNames=="undefined"){for(a in r.prototype)(typeof t.prototype[a]=="undefined"||t.prototype[a]===Object.prototype[a])&&(t.prototype[a]=r.prototype[a]);for(a in r)typeof t[a]=="undefined"&&(t[a]=r[a]);t.$baseCtor=r}else{for(var u=Object.getOwnPropertyNames(r.prototype),d=0;d<u.length;d++)typeof Object.getOwnPropertyDescriptor(t.prototype,u[d])=="undefined"&&Object.defineProperty(t.prototype,u[d],Object.getOwnPropertyDescriptor(r.prototype,u[d]));for(a in r)typeof t[a]=="undefined"&&(t[a]=r[a]);t.$baseCtor=r}};i.Path=function(){return[]},i.Path.prototype.push=Array.prototype.push,i.Paths=function(){return[]},i.Paths.prototype.push=Array.prototype.push,i.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,t.length===1?(this.X=t[0].X,this.Y=t[0].Y):t.length===2&&(this.X=t[0],this.Y=t[1])},i.DoublePoint0=function(){this.X=0,this.Y=0},i.DoublePoint0.prototype=i.DoublePoint.prototype,i.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},i.DoublePoint1.prototype=i.DoublePoint.prototype,i.DoublePoint2=function(t,r){this.X=t,this.Y=r},i.DoublePoint2.prototype=i.DoublePoint.prototype,i.PolyNode=function(){this.m_Parent=null,this.m_polygon=new i.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},i.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,r=this.m_Parent;r!==null;)t=!t,r=r.m_Parent;return t},i.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},i.PolyNode.prototype.Contour=function(){return this.m_polygon},i.PolyNode.prototype.AddChild=function(t){var r=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=r},i.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},i.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},i.PolyNode.prototype.Childs=function(){return this.m_Childs},i.PolyNode.prototype.Parent=function(){return this.m_Parent},i.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},i.PolyTree=function(){this.m_AllPolys=[],i.PolyNode.call(this)},i.PolyTree.prototype.Clear=function(){for(var t=0,r=this.m_AllPolys.length;t<r;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},i.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},i.PolyTree.prototype.Total=function(){var t=this.m_AllPolys.length;return t>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&t--,t},fr(i.PolyTree,i.PolyNode),i.Math_Abs_Int64=i.Math_Abs_Int32=i.Math_Abs_Double=function(t){return Math.abs(t)},i.Math_Max_Int32_Int32=function(t,r){return Math.max(t,r)},x.msie||x.opera||x.safari?i.Cast_Int32=function(t){return t|0}:i.Cast_Int32=function(t){return~~t},typeof Number.toInteger=="undefined"&&(Number.toInteger=null),x.chrome?i.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):~~t}:x.firefox&&typeof Number.toInteger=="function"?i.Cast_Int64=function(t){return Number.toInteger(t)}:x.msie7||x.msie8?i.Cast_Int64=function(t){return parseInt(t,10)}:x.msie?i.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):t|0}:i.Cast_Int64=function(t){return t<0?Math.ceil(t):Math.floor(t)},i.Clear=function(t){t.length=0},i.PI=3.141592653589793,i.PI2=2*3.141592653589793,i.IntPoint=function(){var t=arguments,r=t.length;if(this.X=0,this.Y=0,i.use_xyz)if(this.Z=0,r===3)this.X=t[0],this.Y=t[1],this.Z=t[2];else if(r===2)this.X=t[0],this.Y=t[1],this.Z=0;else if(r===1)if(t[0]instanceof i.DoublePoint){var a=t[0];this.X=i.Clipper.Round(a.X),this.Y=i.Clipper.Round(a.Y),this.Z=0}else{var u=t[0];typeof u.Z=="undefined"&&(u.Z=0),this.X=u.X,this.Y=u.Y,this.Z=u.Z}else this.X=0,this.Y=0,this.Z=0;else if(r===2)this.X=t[0],this.Y=t[1];else if(r===1)if(t[0]instanceof i.DoublePoint){var a=t[0];this.X=i.Clipper.Round(a.X),this.Y=i.Clipper.Round(a.Y)}else{var u=t[0];this.X=u.X,this.Y=u.Y}else this.X=0,this.Y=0},i.IntPoint.op_Equality=function(t,r){return t.X===r.X&&t.Y===r.Y},i.IntPoint.op_Inequality=function(t,r){return t.X!==r.X||t.Y!==r.Y},i.IntPoint0=function(){this.X=0,this.Y=0,i.use_xyz&&(this.Z=0)},i.IntPoint0.prototype=i.IntPoint.prototype,i.IntPoint1=function(t){this.X=t.X,this.Y=t.Y,i.use_xyz&&(typeof t.Z=="undefined"?this.Z=0:this.Z=t.Z)},i.IntPoint1.prototype=i.IntPoint.prototype,i.IntPoint1dp=function(t){this.X=i.Clipper.Round(t.X),this.Y=i.Clipper.Round(t.Y),i.use_xyz&&(this.Z=0)},i.IntPoint1dp.prototype=i.IntPoint.prototype,i.IntPoint2=function(t,r,a){this.X=t,this.Y=r,i.use_xyz&&(typeof a=="undefined"?this.Z=0:this.Z=a)},i.IntPoint2.prototype=i.IntPoint.prototype,i.IntRect=function(){var t=arguments,r=t.length;if(r===4)this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3];else if(r===1){var a=t[0];this.left=a.left,this.top=a.top,this.right=a.right,this.bottom=a.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},i.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},i.IntRect0.prototype=i.IntRect.prototype,i.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},i.IntRect1.prototype=i.IntRect.prototype,i.IntRect4=function(t,r,a,u){this.left=t,this.top=r,this.right=a,this.bottom=u},i.IntRect4.prototype=i.IntRect.prototype,i.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},i.PolyType={ptSubject:0,ptClip:1},i.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},i.JoinType={jtSquare:0,jtRound:1,jtMiter:2},i.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},i.EdgeSide={esLeft:0,esRight:1},i.Direction={dRightToLeft:0,dLeftToRight:1},i.TEdge=function(){this.Bot=new i.IntPoint0,this.Curr=new i.IntPoint0,this.Top=new i.IntPoint0,this.Delta=new i.IntPoint0,this.Dx=0,this.PolyTyp=i.PolyType.ptSubject,this.Side=i.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},i.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new i.IntPoint0},i.MyIntersectNodeSort=function(){},i.MyIntersectNodeSort.Compare=function(t,r){var a=r.Pt.Y-t.Pt.Y;return a>0?1:a<0?-1:0},i.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},i.Scanbeam=function(){this.Y=0,this.Next=null},i.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},i.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},i.OutPt=function(){this.Idx=0,this.Pt=new i.IntPoint0,this.Next=null,this.Prev=null},i.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new i.IntPoint0},i.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},i.ClipperBase.horizontal=-9007199254740992,i.ClipperBase.Skip=-2,i.ClipperBase.Unassigned=-1,i.ClipperBase.tolerance=1e-20,i.ClipperBase.loRange=47453132,i.ClipperBase.hiRange=4503599627370495,i.ClipperBase.near_zero=function(t){return t>-i.ClipperBase.tolerance&&t<i.ClipperBase.tolerance},i.ClipperBase.IsHorizontal=function(t){return t.Delta.Y===0},i.ClipperBase.prototype.PointIsVertex=function(t,r){var a=r;do{if(i.IntPoint.op_Equality(a.Pt,t))return!0;a=a.Next}while(a!==r);return!1},i.ClipperBase.prototype.PointOnLineSegment=function(t,r,a,u){return u?t.X===r.X&&t.Y===r.Y||t.X===a.X&&t.Y===a.Y||t.X>r.X==t.X<a.X&&t.Y>r.Y==t.Y<a.Y&&et.op_Equality(et.Int128Mul(t.X-r.X,a.Y-r.Y),et.Int128Mul(a.X-r.X,t.Y-r.Y)):t.X===r.X&&t.Y===r.Y||t.X===a.X&&t.Y===a.Y||t.X>r.X==t.X<a.X&&t.Y>r.Y==t.Y<a.Y&&(t.X-r.X)*(a.Y-r.Y)==(a.X-r.X)*(t.Y-r.Y)},i.ClipperBase.prototype.PointOnPolygon=function(t,r,a){for(var u=r;;){if(this.PointOnLineSegment(t,u.Pt,u.Next.Pt,a))return!0;if(u=u.Next,u===r)break}return!1},i.ClipperBase.prototype.SlopesEqual=i.ClipperBase.SlopesEqual=function(){var t=arguments,r=t.length,a,u,d,E,_,b,F;return r===3?(a=t[0],u=t[1],F=t[2],F?et.op_Equality(et.Int128Mul(a.Delta.Y,u.Delta.X),et.Int128Mul(a.Delta.X,u.Delta.Y)):i.Cast_Int64(a.Delta.Y*u.Delta.X)===i.Cast_Int64(a.Delta.X*u.Delta.Y)):r===4?(d=t[0],E=t[1],_=t[2],F=t[3],F?et.op_Equality(et.Int128Mul(d.Y-E.Y,E.X-_.X),et.Int128Mul(d.X-E.X,E.Y-_.Y)):i.Cast_Int64((d.Y-E.Y)*(E.X-_.X))-i.Cast_Int64((d.X-E.X)*(E.Y-_.Y))==0):(d=t[0],E=t[1],_=t[2],b=t[3],F=t[4],F?et.op_Equality(et.Int128Mul(d.Y-E.Y,_.X-b.X),et.Int128Mul(d.X-E.X,_.Y-b.Y)):i.Cast_Int64((d.Y-E.Y)*(_.X-b.X))-i.Cast_Int64((d.X-E.X)*(_.Y-b.Y))==0)},i.ClipperBase.SlopesEqual3=function(t,r,a){return a?et.op_Equality(et.Int128Mul(t.Delta.Y,r.Delta.X),et.Int128Mul(t.Delta.X,r.Delta.Y)):i.Cast_Int64(t.Delta.Y*r.Delta.X)===i.Cast_Int64(t.Delta.X*r.Delta.Y)},i.ClipperBase.SlopesEqual4=function(t,r,a,u){return u?et.op_Equality(et.Int128Mul(t.Y-r.Y,r.X-a.X),et.Int128Mul(t.X-r.X,r.Y-a.Y)):i.Cast_Int64((t.Y-r.Y)*(r.X-a.X))-i.Cast_Int64((t.X-r.X)*(r.Y-a.Y))==0},i.ClipperBase.SlopesEqual5=function(t,r,a,u,d){return d?et.op_Equality(et.Int128Mul(t.Y-r.Y,a.X-u.X),et.Int128Mul(t.X-r.X,a.Y-u.Y)):i.Cast_Int64((t.Y-r.Y)*(a.X-u.X))-i.Cast_Int64((t.X-r.X)*(a.Y-u.Y))==0},i.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,r=this.m_edges.length;t<r;++t){for(var a=0,u=this.m_edges[t].length;a<u;++a)this.m_edges[t][a]=null;i.Clear(this.m_edges[t])}i.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},i.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},i.ClipperBase.prototype.RangeTest=function(t,r){r.Value?(t.X>i.ClipperBase.hiRange||t.Y>i.ClipperBase.hiRange||-t.X>i.ClipperBase.hiRange||-t.Y>i.ClipperBase.hiRange)&&i.Error("Coordinate outside allowed range in RangeTest()."):(t.X>i.ClipperBase.loRange||t.Y>i.ClipperBase.loRange||-t.X>i.ClipperBase.loRange||-t.Y>i.ClipperBase.loRange)&&(r.Value=!0,this.RangeTest(t,r))},i.ClipperBase.prototype.InitEdge=function(t,r,a,u){t.Next=r,t.Prev=a,t.Curr.X=u.X,t.Curr.Y=u.Y,i.use_xyz&&(t.Curr.Z=u.Z),t.OutIdx=-1},i.ClipperBase.prototype.InitEdge2=function(t,r){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,i.use_xyz&&(t.Bot.Z=t.Curr.Z),t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y,i.use_xyz&&(t.Top.Z=t.Next.Curr.Z)):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,i.use_xyz&&(t.Top.Z=t.Curr.Z),t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y,i.use_xyz&&(t.Bot.Z=t.Next.Curr.Z)),this.SetDx(t),t.PolyTyp=r},i.ClipperBase.prototype.FindNextLocMin=function(t){for(var r;;){for(;i.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||i.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!==i.ClipperBase.horizontal&&t.Prev.Dx!==i.ClipperBase.horizontal)break;for(;t.Prev.Dx===i.ClipperBase.horizontal;)t=t.Prev;for(r=t;t.Dx===i.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!==t.Prev.Bot.Y){r.Prev.Bot.X<t.Bot.X&&(t=r);break}}return t},i.ClipperBase.prototype.ProcessBound=function(t,r){var a,u=t,d;if(u.OutIdx===i.ClipperBase.Skip){if(t=u,r){for(;t.Top.Y===t.Next.Bot.Y;)t=t.Next;for(;t!==u&&t.Dx===i.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y===t.Prev.Bot.Y;)t=t.Prev;for(;t!==u&&t.Dx===i.ClipperBase.horizontal;)t=t.Next}if(t===u)r?u=t.Next:u=t.Prev;else{r?t=u.Next:t=u.Prev;var E=new i.LocalMinima;E.Next=null,E.Y=t.Bot.Y,E.LeftBound=null,E.RightBound=t,t.WindDelta=0,u=this.ProcessBound(t,r),this.InsertLocalMinima(E)}return u}if(t.Dx===i.ClipperBase.horizontal&&(r?a=t.Prev:a=t.Next,a.Dx===i.ClipperBase.horizontal?a.Bot.X!==t.Bot.X&&a.Top.X!==t.Bot.X&&this.ReverseHorizontal(t):a.Bot.X!==t.Bot.X&&this.ReverseHorizontal(t)),a=t,r){for(;u.Top.Y===u.Next.Bot.Y&&u.Next.OutIdx!==i.ClipperBase.Skip;)u=u.Next;if(u.Dx===i.ClipperBase.horizontal&&u.Next.OutIdx!==i.ClipperBase.Skip){for(d=u;d.Prev.Dx===i.ClipperBase.horizontal;)d=d.Prev;d.Prev.Top.X>u.Next.Top.X&&(u=d.Prev)}for(;t!==u;)t.NextInLML=t.Next,t.Dx===i.ClipperBase.horizontal&&t!==a&&t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx===i.ClipperBase.horizontal&&t!==a&&t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),u=u.Next}else{for(;u.Top.Y===u.Prev.Bot.Y&&u.Prev.OutIdx!==i.ClipperBase.Skip;)u=u.Prev;if(u.Dx===i.ClipperBase.horizontal&&u.Prev.OutIdx!==i.ClipperBase.Skip){for(d=u;d.Next.Dx===i.ClipperBase.horizontal;)d=d.Next;(d.Next.Top.X===u.Prev.Top.X||d.Next.Top.X>u.Prev.Top.X)&&(u=d.Next)}for(;t!==u;)t.NextInLML=t.Prev,t.Dx===i.ClipperBase.horizontal&&t!==a&&t.Bot.X!==t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx===i.ClipperBase.horizontal&&t!==a&&t.Bot.X!==t.Next.Top.X&&this.ReverseHorizontal(t),u=u.Prev}return u},i.ClipperBase.prototype.AddPath=function(t,r,a){i.use_lines?!a&&r===i.PolyType.ptClip&&i.Error("AddPath: Open paths must be subject."):a||i.Error("AddPath: Open paths have been disabled.");var u=t.length-1;if(a)for(;u>0&&i.IntPoint.op_Equality(t[u],t[0]);)--u;for(;u>0&&i.IntPoint.op_Equality(t[u],t[u-1]);)--u;if(a&&u<2||!a&&u<1)return!1;for(var d=new Array,E=0;E<=u;E++)d.push(new i.TEdge);var _=!0;d[1].Curr.X=t[1].X,d[1].Curr.Y=t[1].Y,i.use_xyz&&(d[1].Curr.Z=t[1].Z);var b={Value:this.m_UseFullRange};this.RangeTest(t[0],b),this.m_UseFullRange=b.Value,b.Value=this.m_UseFullRange,this.RangeTest(t[u],b),this.m_UseFullRange=b.Value,this.InitEdge(d[0],d[1],d[u],t[0]),this.InitEdge(d[u],d[0],d[u-1],t[u]);for(var E=u-1;E>=1;--E)b.Value=this.m_UseFullRange,this.RangeTest(t[E],b),this.m_UseFullRange=b.Value,this.InitEdge(d[E],d[E+1],d[E-1],t[E]);for(var F=d[0],X=F,$=F;;){if(X.Curr===X.Next.Curr&&(a||X.Next!==F)){if(X===X.Next)break;X===F&&(F=X.Next),X=this.RemoveEdge(X),$=X;continue}if(X.Prev===X.Next)break;if(a&&i.ClipperBase.SlopesEqual4(X.Prev.Curr,X.Curr,X.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(X.Prev.Curr,X.Curr,X.Next.Curr))){X===F&&(F=X.Next),X=this.RemoveEdge(X),X=X.Prev,$=X;continue}if(X=X.Next,X===$||!a&&X.Next===F)break}if(!a&&X===X.Next||a&&X.Prev===X.Next)return!1;a||(this.m_HasOpenPaths=!0,F.Prev.OutIdx=i.ClipperBase.Skip),X=F;do this.InitEdge2(X,r),X=X.Next,_&&X.Curr.Y!==F.Curr.Y&&(_=!1);while(X!==F);if(_){if(a)return!1;X.Prev.OutIdx=i.ClipperBase.Skip;var J=new i.LocalMinima;for(J.Next=null,J.Y=X.Bot.Y,J.LeftBound=null,J.RightBound=X,J.RightBound.Side=i.EdgeSide.esRight,J.RightBound.WindDelta=0;X.Bot.X!==X.Prev.Top.X&&this.ReverseHorizontal(X),X.Next.OutIdx!==i.ClipperBase.Skip;)X.NextInLML=X.Next,X=X.Next;return this.InsertLocalMinima(J),this.m_edges.push(d),!0}this.m_edges.push(d);var V,Q=null;for(i.IntPoint.op_Equality(X.Prev.Bot,X.Prev.Top)&&(X=X.Next);X=this.FindNextLocMin(X),X!==Q;){Q===null&&(Q=X);var J=new i.LocalMinima;J.Next=null,J.Y=X.Bot.Y,X.Dx<X.Prev.Dx?(J.LeftBound=X.Prev,J.RightBound=X,V=!1):(J.LeftBound=X,J.RightBound=X.Prev,V=!0),J.LeftBound.Side=i.EdgeSide.esLeft,J.RightBound.Side=i.EdgeSide.esRight,a?J.LeftBound.Next===J.RightBound?J.LeftBound.WindDelta=-1:J.LeftBound.WindDelta=1:J.LeftBound.WindDelta=0,J.RightBound.WindDelta=-J.LeftBound.WindDelta,X=this.ProcessBound(J.LeftBound,V),X.OutIdx===i.ClipperBase.Skip&&(X=this.ProcessBound(X,V));var it=this.ProcessBound(J.RightBound,!V);it.OutIdx===i.ClipperBase.Skip&&(it=this.ProcessBound(it,!V)),J.LeftBound.OutIdx===i.ClipperBase.Skip?J.LeftBound=null:J.RightBound.OutIdx===i.ClipperBase.Skip&&(J.RightBound=null),this.InsertLocalMinima(J),V||(X=it)}return!0},i.ClipperBase.prototype.AddPaths=function(t,r,a){for(var u=!1,d=0,E=t.length;d<E;++d)this.AddPath(t[d],r,a)&&(u=!0);return u},i.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,r,a){return i.IntPoint.op_Equality(t,a)||i.IntPoint.op_Equality(t,r)||i.IntPoint.op_Equality(a,r)?!1:t.X!==a.X?r.X>t.X==r.X<a.X:r.Y>t.Y==r.Y<a.Y},i.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var r=t.Next;return t.Prev=null,r},i.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,t.Delta.Y===0?t.Dx=i.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},i.ClipperBase.prototype.InsertLocalMinima=function(t){if(this.m_MinimaList===null)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var r=this.m_MinimaList;r.Next!==null&&t.Y<r.Next.Y;)r=r.Next;t.Next=r.Next,r.Next=t}},i.ClipperBase.prototype.PopLocalMinima=function(t,r){return r.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===t?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},i.ClipperBase.prototype.ReverseHorizontal=function(t){var r=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=r,i.use_xyz&&(r=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=r)},i.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var t=this.m_MinimaList;t!==null;){this.InsertScanbeam(t.Y);var r=t.LeftBound;r!==null&&(r.Curr.X=r.Bot.X,r.Curr.Y=r.Bot.Y,i.use_xyz&&(r.Curr.Z=r.Bot.Z),r.OutIdx=i.ClipperBase.Unassigned),r=t.RightBound,r!==null&&(r.Curr.X=r.Bot.X,r.Curr.Y=r.Bot.Y,i.use_xyz&&(r.Curr.Z=r.Bot.Z),r.OutIdx=i.ClipperBase.Unassigned),t=t.Next}this.m_ActiveEdges=null}},i.ClipperBase.prototype.InsertScanbeam=function(t){if(this.m_Scanbeam===null)this.m_Scanbeam=new i.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var r=new i.Scanbeam;r.Y=t,r.Next=this.m_Scanbeam,this.m_Scanbeam=r}else{for(var a=this.m_Scanbeam;a.Next!==null&&t<=a.Next.Y;)a=a.Next;if(t===a.Y)return;var u=new i.Scanbeam;u.Y=t,u.Next=a.Next,a.Next=u}},i.ClipperBase.prototype.PopScanbeam=function(t){return this.m_Scanbeam===null?(t.v=0,!1):(t.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},i.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},i.ClipperBase.prototype.CreateOutRec=function(){var t=new i.OutRec;return t.Idx=i.ClipperBase.Unassigned,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},i.ClipperBase.prototype.DisposeOutRec=function(t){var r=this.m_PolyOuts[t];r.Pts=null,r=null,this.m_PolyOuts[t]=null},i.ClipperBase.prototype.UpdateEdgeIntoAEL=function(t){t.NextInLML===null&&i.Error("UpdateEdgeIntoAEL: invalid call");var r=t.PrevInAEL,a=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,r!==null?r.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,a!==null&&(a.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,t=t.NextInLML,t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=r,t.NextInAEL=a,i.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},i.ClipperBase.prototype.SwapPositionsInAEL=function(t,r){if(!(t.NextInAEL===t.PrevInAEL||r.NextInAEL===r.PrevInAEL)){if(t.NextInAEL===r){var a=r.NextInAEL;a!==null&&(a.PrevInAEL=t);var u=t.PrevInAEL;u!==null&&(u.NextInAEL=r),r.PrevInAEL=u,r.NextInAEL=t,t.PrevInAEL=r,t.NextInAEL=a}else if(r.NextInAEL===t){var d=t.NextInAEL;d!==null&&(d.PrevInAEL=r);var E=r.PrevInAEL;E!==null&&(E.NextInAEL=t),t.PrevInAEL=E,t.NextInAEL=r,r.PrevInAEL=t,r.NextInAEL=d}else{var _=t.NextInAEL,b=t.PrevInAEL;t.NextInAEL=r.NextInAEL,t.NextInAEL!==null&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=r.PrevInAEL,t.PrevInAEL!==null&&(t.PrevInAEL.NextInAEL=t),r.NextInAEL=_,r.NextInAEL!==null&&(r.NextInAEL.PrevInAEL=r),r.PrevInAEL=b,r.PrevInAEL!==null&&(r.PrevInAEL.NextInAEL=r)}t.PrevInAEL===null?this.m_ActiveEdges=t:r.PrevInAEL===null&&(this.m_ActiveEdges=r)}},i.ClipperBase.prototype.DeleteFromAEL=function(t){var r=t.PrevInAEL,a=t.NextInAEL;r===null&&a===null&&t!==this.m_ActiveEdges||(r!==null?r.NextInAEL=a:this.m_ActiveEdges=a,a!==null&&(a.PrevInAEL=r),t.NextInAEL=null,t.PrevInAEL=null)},i.Clipper=function(t){typeof t=="undefined"&&(t=0),this.m_PolyOuts=null,this.m_ClipType=i.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=i.PolyFillType.pftEvenOdd,this.m_SubjFillType=i.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,i.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=i.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&t)!=0,this.StrictlySimple=(2&t)!=0,this.PreserveCollinear=(4&t)!=0,i.use_xyz&&(this.ZFillFunction=null)},i.Clipper.ioReverseSolution=1,i.Clipper.ioStrictlySimple=2,i.Clipper.ioPreserveCollinear=4,i.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),i.ClipperBase.prototype.Clear.call(this))},i.Clipper.prototype.InsertMaxima=function(t){var r=new i.Maxima;if(r.X=t,this.m_Maxima===null)this.m_Maxima=r,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(t<this.m_Maxima.X)r.Next=this.m_Maxima,r.Prev=null,this.m_Maxima=r;else{for(var a=this.m_Maxima;a.Next!==null&&t>=a.Next.X;)a=a.Next;if(t===a.X)return;r.Next=a.Next,r.Prev=a,a.Next!==null&&(a.Next.Prev=r),a.Next=r}},i.Clipper.prototype.Execute=function(){var t=arguments,r=t.length,a=t[1]instanceof i.PolyTree;if(r===4&&!a){var u=t[0],d=t[1],E=t[2],_=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&i.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,i.Clear(d),this.m_SubjFillType=E,this.m_ClipFillType=_,this.m_ClipType=u,this.m_UsingPolyTree=!1;try{var b=this.ExecuteInternal();b&&this.BuildResult(d)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return b}else if(r===4&&a){var u=t[0],F=t[1],E=t[2],_=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=E,this.m_ClipFillType=_,this.m_ClipType=u,this.m_UsingPolyTree=!0;try{var b=this.ExecuteInternal();b&&this.BuildResult2(F)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return b}else if(r===2&&!a){var u=t[0],d=t[1];return this.Execute(u,d,i.PolyFillType.pftEvenOdd,i.PolyFillType.pftEvenOdd)}else if(r===2&&a){var u=t[0],F=t[1];return this.Execute(u,F,i.PolyFillType.pftEvenOdd,i.PolyFillType.pftEvenOdd)}},i.Clipper.prototype.FixHoleLinkage=function(t){if(!(t.FirstLeft===null||t.IsHole!==t.FirstLeft.IsHole&&t.FirstLeft.Pts!==null)){for(var r=t.FirstLeft;r!==null&&(r.IsHole===t.IsHole||r.Pts===null);)r=r.FirstLeft;t.FirstLeft=r}},i.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var t={},r={};if(!this.PopScanbeam(t))return!1;for(this.InsertLocalMinimaIntoAEL(t.v);this.PopScanbeam(r)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(r.v))return!1;this.ProcessEdgesAtTopOfScanbeam(r.v),t.v=r.v,this.InsertLocalMinimaIntoAEL(t.v)}var a,u,d;for(u=0,d=this.m_PolyOuts.length;u<d;u++)a=this.m_PolyOuts[u],!(a.Pts===null||a.IsOpen)&&(a.IsHole^this.ReverseSolution)==this.Area$1(a)>0&&this.ReversePolyPtLinks(a.Pts);for(this.JoinCommonEdges(),u=0,d=this.m_PolyOuts.length;u<d;u++)a=this.m_PolyOuts[u],a.Pts!==null&&(a.IsOpen?this.FixupOutPolyline(a):this.FixupOutPolygon(a));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},i.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,r=this.m_PolyOuts.length;t<r;++t)this.DisposeOutRec(t);i.Clear(this.m_PolyOuts)},i.Clipper.prototype.AddJoin=function(t,r,a){var u=new i.Join;u.OutPt1=t,u.OutPt2=r,u.OffPt.X=a.X,u.OffPt.Y=a.Y,i.use_xyz&&(u.OffPt.Z=a.Z),this.m_Joins.push(u)},i.Clipper.prototype.AddGhostJoin=function(t,r){var a=new i.Join;a.OutPt1=t,a.OffPt.X=r.X,a.OffPt.Y=r.Y,i.use_xyz&&(a.OffPt.Z=r.Z),this.m_GhostJoins.push(a)},i.Clipper.prototype.SetZ=function(t,r,a){if(this.ZFillFunction!==null){if(t.Z!==0||this.ZFillFunction===null)return;i.IntPoint.op_Equality(t,r.Bot)?t.Z=r.Bot.Z:i.IntPoint.op_Equality(t,r.Top)?t.Z=r.Top.Z:i.IntPoint.op_Equality(t,a.Bot)?t.Z=a.Bot.Z:i.IntPoint.op_Equality(t,a.Top)?t.Z=a.Top.Z:this.ZFillFunction(r.Bot,r.Top,a.Bot,a.Top,t)}},i.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(var r={},a,u;this.PopLocalMinima(t,r);){a=r.v.LeftBound,u=r.v.RightBound;var d=null;if(a===null?(this.InsertEdgeIntoAEL(u,null),this.SetWindingCount(u),this.IsContributing(u)&&(d=this.AddOutPt(u,u.Bot))):u===null?(this.InsertEdgeIntoAEL(a,null),this.SetWindingCount(a),this.IsContributing(a)&&(d=this.AddOutPt(a,a.Bot)),this.InsertScanbeam(a.Top.Y)):(this.InsertEdgeIntoAEL(a,null),this.InsertEdgeIntoAEL(u,a),this.SetWindingCount(a),u.WindCnt=a.WindCnt,u.WindCnt2=a.WindCnt2,this.IsContributing(a)&&(d=this.AddLocalMinPoly(a,u,a.Bot)),this.InsertScanbeam(a.Top.Y)),u!==null&&(i.ClipperBase.IsHorizontal(u)?(u.NextInLML!==null&&this.InsertScanbeam(u.NextInLML.Top.Y),this.AddEdgeToSEL(u)):this.InsertScanbeam(u.Top.Y)),!(a===null||u===null)){if(d!==null&&i.ClipperBase.IsHorizontal(u)&&this.m_GhostJoins.length>0&&u.WindDelta!==0)for(var E=0,_=this.m_GhostJoins.length;E<_;E++){var b=this.m_GhostJoins[E];this.HorzSegmentsOverlap(b.OutPt1.Pt.X,b.OffPt.X,u.Bot.X,u.Top.X)&&this.AddJoin(b.OutPt1,d,b.OffPt)}if(a.OutIdx>=0&&a.PrevInAEL!==null&&a.PrevInAEL.Curr.X===a.Bot.X&&a.PrevInAEL.OutIdx>=0&&i.ClipperBase.SlopesEqual5(a.PrevInAEL.Curr,a.PrevInAEL.Top,a.Curr,a.Top,this.m_UseFullRange)&&a.WindDelta!==0&&a.PrevInAEL.WindDelta!==0){var F=this.AddOutPt(a.PrevInAEL,a.Bot);this.AddJoin(d,F,a.Top)}if(a.NextInAEL!==u){if(u.OutIdx>=0&&u.PrevInAEL.OutIdx>=0&&i.ClipperBase.SlopesEqual5(u.PrevInAEL.Curr,u.PrevInAEL.Top,u.Curr,u.Top,this.m_UseFullRange)&&u.WindDelta!==0&&u.PrevInAEL.WindDelta!==0){var F=this.AddOutPt(u.PrevInAEL,u.Bot);this.AddJoin(d,F,u.Top)}var X=a.NextInAEL;if(X!==null)for(;X!==u;)this.IntersectEdges(u,X,a.Curr),X=X.NextInAEL}}}},i.Clipper.prototype.InsertEdgeIntoAEL=function(t,r){if(this.m_ActiveEdges===null)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(r===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(r===null&&(r=this.m_ActiveEdges);r.NextInAEL!==null&&!this.E2InsertsBeforeE1(r.NextInAEL,t);)r=r.NextInAEL;t.NextInAEL=r.NextInAEL,r.NextInAEL!==null&&(r.NextInAEL.PrevInAEL=t),t.PrevInAEL=r,r.NextInAEL=t}},i.Clipper.prototype.E2InsertsBeforeE1=function(t,r){return r.Curr.X===t.Curr.X?r.Top.Y>t.Top.Y?r.Top.X<i.Clipper.TopX(t,r.Top.Y):t.Top.X>i.Clipper.TopX(r,t.Top.Y):r.Curr.X<t.Curr.X},i.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp===i.PolyType.ptSubject?this.m_SubjFillType===i.PolyFillType.pftEvenOdd:this.m_ClipFillType===i.PolyFillType.pftEvenOdd},i.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp===i.PolyType.ptSubject?this.m_ClipFillType===i.PolyFillType.pftEvenOdd:this.m_SubjFillType===i.PolyFillType.pftEvenOdd},i.Clipper.prototype.IsContributing=function(t){var r,a;switch(t.PolyTyp===i.PolyType.ptSubject?(r=this.m_SubjFillType,a=this.m_ClipFillType):(r=this.m_ClipFillType,a=this.m_SubjFillType),r){case i.PolyFillType.pftEvenOdd:if(t.WindDelta===0&&t.WindCnt!==1)return!1;break;case i.PolyFillType.pftNonZero:if(Math.abs(t.WindCnt)!==1)return!1;break;case i.PolyFillType.pftPositive:if(t.WindCnt!==1)return!1;break;default:if(t.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case i.ClipType.ctIntersection:switch(a){case i.PolyFillType.pftEvenOdd:case i.PolyFillType.pftNonZero:return t.WindCnt2!==0;case i.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case i.ClipType.ctUnion:switch(a){case i.PolyFillType.pftEvenOdd:case i.PolyFillType.pftNonZero:return t.WindCnt2===0;case i.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case i.ClipType.ctDifference:if(t.PolyTyp===i.PolyType.ptSubject)switch(a){case i.PolyFillType.pftEvenOdd:case i.PolyFillType.pftNonZero:return t.WindCnt2===0;case i.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(a){case i.PolyFillType.pftEvenOdd:case i.PolyFillType.pftNonZero:return t.WindCnt2!==0;case i.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case i.ClipType.ctXor:if(t.WindDelta===0)switch(a){case i.PolyFillType.pftEvenOdd:case i.PolyFillType.pftNonZero:return t.WindCnt2===0;case i.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else return!0}return!0},i.Clipper.prototype.SetWindingCount=function(t){for(var r=t.PrevInAEL;r!==null&&(r.PolyTyp!==t.PolyTyp||r.WindDelta===0);)r=r.PrevInAEL;if(r===null){var a=t.PolyTyp===i.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;t.WindDelta===0?t.WindCnt=a===i.PolyFillType.pftNegative?-1:1:t.WindCnt=t.WindDelta,t.WindCnt2=0,r=this.m_ActiveEdges}else if(t.WindDelta===0&&this.m_ClipType!==i.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=r.WindCnt2,r=r.NextInAEL;else if(this.IsEvenOddFillType(t)){if(t.WindDelta===0){for(var u=!0,d=r.PrevInAEL;d!==null;)d.PolyTyp===r.PolyTyp&&d.WindDelta!==0&&(u=!u),d=d.PrevInAEL;t.WindCnt=u?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=r.WindCnt2,r=r.NextInAEL}else r.WindCnt*r.WindDelta<0?Math.abs(r.WindCnt)>1?r.WindDelta*t.WindDelta<0?t.WindCnt=r.WindCnt:t.WindCnt=r.WindCnt+t.WindDelta:t.WindCnt=t.WindDelta===0?1:t.WindDelta:t.WindDelta===0?t.WindCnt=r.WindCnt<0?r.WindCnt-1:r.WindCnt+1:r.WindDelta*t.WindDelta<0?t.WindCnt=r.WindCnt:t.WindCnt=r.WindCnt+t.WindDelta,t.WindCnt2=r.WindCnt2,r=r.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;r!==t;)r.WindDelta!==0&&(t.WindCnt2=t.WindCnt2===0?1:0),r=r.NextInAEL;else for(;r!==t;)t.WindCnt2+=r.WindDelta,r=r.NextInAEL},i.Clipper.prototype.AddEdgeToSEL=function(t){this.m_SortedEdges===null?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},i.Clipper.prototype.PopEdgeFromSEL=function(t){if(t.v=this.m_SortedEdges,t.v===null)return!1;var r=t.v;return this.m_SortedEdges=t.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),r.NextInSEL=null,r.PrevInSEL=null,!0},i.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;t!==null;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},i.Clipper.prototype.SwapPositionsInSEL=function(t,r){if(!(t.NextInSEL===null&&t.PrevInSEL===null)&&!(r.NextInSEL===null&&r.PrevInSEL===null)){if(t.NextInSEL===r){var a=r.NextInSEL;a!==null&&(a.PrevInSEL=t);var u=t.PrevInSEL;u!==null&&(u.NextInSEL=r),r.PrevInSEL=u,r.NextInSEL=t,t.PrevInSEL=r,t.NextInSEL=a}else if(r.NextInSEL===t){var a=t.NextInSEL;a!==null&&(a.PrevInSEL=r);var u=r.PrevInSEL;u!==null&&(u.NextInSEL=t),t.PrevInSEL=u,t.NextInSEL=r,r.PrevInSEL=t,r.NextInSEL=a}else{var a=t.NextInSEL,u=t.PrevInSEL;t.NextInSEL=r.NextInSEL,t.NextInSEL!==null&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=r.PrevInSEL,t.PrevInSEL!==null&&(t.PrevInSEL.NextInSEL=t),r.NextInSEL=a,r.NextInSEL!==null&&(r.NextInSEL.PrevInSEL=r),r.PrevInSEL=u,r.PrevInSEL!==null&&(r.PrevInSEL.NextInSEL=r)}t.PrevInSEL===null?this.m_SortedEdges=t:r.PrevInSEL===null&&(this.m_SortedEdges=r)}},i.Clipper.prototype.AddLocalMaxPoly=function(t,r,a){this.AddOutPt(t,a),r.WindDelta===0&&this.AddOutPt(r,a),t.OutIdx===r.OutIdx?(t.OutIdx=-1,r.OutIdx=-1):t.OutIdx<r.OutIdx?this.AppendPolygon(t,r):this.AppendPolygon(r,t)},i.Clipper.prototype.AddLocalMinPoly=function(t,r,a){var u,d,E;if(i.ClipperBase.IsHorizontal(r)||t.Dx>r.Dx?(u=this.AddOutPt(t,a),r.OutIdx=t.OutIdx,t.Side=i.EdgeSide.esLeft,r.Side=i.EdgeSide.esRight,d=t,d.PrevInAEL===r?E=r.PrevInAEL:E=d.PrevInAEL):(u=this.AddOutPt(r,a),t.OutIdx=r.OutIdx,t.Side=i.EdgeSide.esRight,r.Side=i.EdgeSide.esLeft,d=r,d.PrevInAEL===t?E=t.PrevInAEL:E=d.PrevInAEL),E!==null&&E.OutIdx>=0&&E.Top.Y<a.Y&&d.Top.Y<a.Y){var _=i.Clipper.TopX(E,a.Y),b=i.Clipper.TopX(d,a.Y);if(_===b&&d.WindDelta!==0&&E.WindDelta!==0&&i.ClipperBase.SlopesEqual5(new i.IntPoint2(_,a.Y),E.Top,new i.IntPoint2(b,a.Y),d.Top,this.m_UseFullRange)){var F=this.AddOutPt(E,a);this.AddJoin(u,F,d.Top)}}return u},i.Clipper.prototype.AddOutPt=function(t,r){if(t.OutIdx<0){var a=this.CreateOutRec();a.IsOpen=t.WindDelta===0;var u=new i.OutPt;return a.Pts=u,u.Idx=a.Idx,u.Pt.X=r.X,u.Pt.Y=r.Y,i.use_xyz&&(u.Pt.Z=r.Z),u.Next=u,u.Prev=u,a.IsOpen||this.SetHoleState(t,a),t.OutIdx=a.Idx,u}else{var a=this.m_PolyOuts[t.OutIdx],d=a.Pts,E=t.Side===i.EdgeSide.esLeft;if(E&&i.IntPoint.op_Equality(r,d.Pt))return d;if(!E&&i.IntPoint.op_Equality(r,d.Prev.Pt))return d.Prev;var u=new i.OutPt;return u.Idx=a.Idx,u.Pt.X=r.X,u.Pt.Y=r.Y,i.use_xyz&&(u.Pt.Z=r.Z),u.Next=d,u.Prev=d.Prev,u.Prev.Next=u,d.Prev=u,E&&(a.Pts=u),u}},i.Clipper.prototype.GetLastOutPt=function(t){var r=this.m_PolyOuts[t.OutIdx];return t.Side===i.EdgeSide.esLeft?r.Pts:r.Pts.Prev},i.Clipper.prototype.SwapPoints=function(t,r){var a=new i.IntPoint1(t.Value);t.Value.X=r.Value.X,t.Value.Y=r.Value.Y,i.use_xyz&&(t.Value.Z=r.Value.Z),r.Value.X=a.X,r.Value.Y=a.Y,i.use_xyz&&(r.Value.Z=a.Z)},i.Clipper.prototype.HorzSegmentsOverlap=function(t,r,a,u){var d;return t>r&&(d=t,t=r,r=d),a>u&&(d=a,a=u,u=d),t<u&&a<r},i.Clipper.prototype.SetHoleState=function(t,r){for(var a=t.PrevInAEL,u=null;a!==null;)a.OutIdx>=0&&a.WindDelta!==0&&(u===null?u=a:u.OutIdx===a.OutIdx&&(u=null)),a=a.PrevInAEL;u===null?(r.FirstLeft=null,r.IsHole=!1):(r.FirstLeft=this.m_PolyOuts[u.OutIdx],r.IsHole=!r.FirstLeft.IsHole)},i.Clipper.prototype.GetDx=function(t,r){return t.Y===r.Y?i.ClipperBase.horizontal:(r.X-t.X)/(r.Y-t.Y)},i.Clipper.prototype.FirstIsBottomPt=function(t,r){for(var a=t.Prev;i.IntPoint.op_Equality(a.Pt,t.Pt)&&a!==t;)a=a.Prev;var u=Math.abs(this.GetDx(t.Pt,a.Pt));for(a=t.Next;i.IntPoint.op_Equality(a.Pt,t.Pt)&&a!==t;)a=a.Next;var d=Math.abs(this.GetDx(t.Pt,a.Pt));for(a=r.Prev;i.IntPoint.op_Equality(a.Pt,r.Pt)&&a!==r;)a=a.Prev;var E=Math.abs(this.GetDx(r.Pt,a.Pt));for(a=r.Next;i.IntPoint.op_Equality(a.Pt,r.Pt)&&a!==r;)a=a.Next;var _=Math.abs(this.GetDx(r.Pt,a.Pt));return Math.max(u,d)===Math.max(E,_)&&Math.min(u,d)===Math.min(E,_)?this.Area(t)>0:u>=E&&u>=_||d>=E&&d>=_},i.Clipper.prototype.GetBottomPt=function(t){for(var r=null,a=t.Next;a!==t;)a.Pt.Y>t.Pt.Y?(t=a,r=null):a.Pt.Y===t.Pt.Y&&a.Pt.X<=t.Pt.X&&(a.Pt.X<t.Pt.X?(r=null,t=a):a.Next!==t&&a.Prev!==t&&(r=a)),a=a.Next;if(r!==null)for(;r!==a;)for(this.FirstIsBottomPt(a,r)||(t=r),r=r.Next;i.IntPoint.op_Inequality(r.Pt,t.Pt);)r=r.Next;return t},i.Clipper.prototype.GetLowermostRec=function(t,r){t.BottomPt===null&&(t.BottomPt=this.GetBottomPt(t.Pts)),r.BottomPt===null&&(r.BottomPt=this.GetBottomPt(r.Pts));var a=t.BottomPt,u=r.BottomPt;return a.Pt.Y>u.Pt.Y?t:a.Pt.Y<u.Pt.Y?r:a.Pt.X<u.Pt.X?t:a.Pt.X>u.Pt.X||a.Next===a?r:u.Next===u||this.FirstIsBottomPt(a,u)?t:r},i.Clipper.prototype.OutRec1RightOfOutRec2=function(t,r){do if(t=t.FirstLeft,t===r)return!0;while(t!==null);return!1},i.Clipper.prototype.GetOutRec=function(t){for(var r=this.m_PolyOuts[t];r!==this.m_PolyOuts[r.Idx];)r=this.m_PolyOuts[r.Idx];return r},i.Clipper.prototype.AppendPolygon=function(t,r){var a=this.m_PolyOuts[t.OutIdx],u=this.m_PolyOuts[r.OutIdx],d;this.OutRec1RightOfOutRec2(a,u)?d=u:this.OutRec1RightOfOutRec2(u,a)?d=a:d=this.GetLowermostRec(a,u);var E=a.Pts,_=E.Prev,b=u.Pts,F=b.Prev;t.Side===i.EdgeSide.esLeft?r.Side===i.EdgeSide.esLeft?(this.ReversePolyPtLinks(b),b.Next=E,E.Prev=b,_.Next=F,F.Prev=_,a.Pts=F):(F.Next=E,E.Prev=F,b.Prev=_,_.Next=b,a.Pts=b):r.Side===i.EdgeSide.esRight?(this.ReversePolyPtLinks(b),_.Next=F,F.Prev=_,b.Next=E,E.Prev=b):(_.Next=b,b.Prev=_,E.Prev=F,F.Next=E),a.BottomPt=null,d===u&&(u.FirstLeft!==a&&(a.FirstLeft=u.FirstLeft),a.IsHole=u.IsHole),u.Pts=null,u.BottomPt=null,u.FirstLeft=a;var X=t.OutIdx,$=r.OutIdx;t.OutIdx=-1,r.OutIdx=-1;for(var J=this.m_ActiveEdges;J!==null;){if(J.OutIdx===$){J.OutIdx=X,J.Side=t.Side;break}J=J.NextInAEL}u.Idx=a.Idx},i.Clipper.prototype.ReversePolyPtLinks=function(t){if(t!==null){var r,a;r=t;do a=r.Next,r.Next=r.Prev,r.Prev=a,r=a;while(r!==t)}},i.Clipper.SwapSides=function(t,r){var a=t.Side;t.Side=r.Side,r.Side=a},i.Clipper.SwapPolyIndexes=function(t,r){var a=t.OutIdx;t.OutIdx=r.OutIdx,r.OutIdx=a},i.Clipper.prototype.IntersectEdges=function(t,r,a){var u=t.OutIdx>=0,d=r.OutIdx>=0;if(i.use_xyz&&this.SetZ(a,t,r),i.use_lines&&(t.WindDelta===0||r.WindDelta===0)){if(t.WindDelta===0&&r.WindDelta===0)return;t.PolyTyp===r.PolyTyp&&t.WindDelta!==r.WindDelta&&this.m_ClipType===i.ClipType.ctUnion?t.WindDelta===0?d&&(this.AddOutPt(t,a),u&&(t.OutIdx=-1)):u&&(this.AddOutPt(r,a),d&&(r.OutIdx=-1)):t.PolyTyp!==r.PolyTyp&&(t.WindDelta===0&&Math.abs(r.WindCnt)===1&&(this.m_ClipType!==i.ClipType.ctUnion||r.WindCnt2===0)?(this.AddOutPt(t,a),u&&(t.OutIdx=-1)):r.WindDelta===0&&Math.abs(t.WindCnt)===1&&(this.m_ClipType!==i.ClipType.ctUnion||t.WindCnt2===0)&&(this.AddOutPt(r,a),d&&(r.OutIdx=-1)));return}if(t.PolyTyp===r.PolyTyp)if(this.IsEvenOddFillType(t)){var E=t.WindCnt;t.WindCnt=r.WindCnt,r.WindCnt=E}else t.WindCnt+r.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=r.WindDelta,r.WindCnt-t.WindDelta==0?r.WindCnt=-r.WindCnt:r.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(r)?t.WindCnt2=t.WindCnt2===0?1:0:t.WindCnt2+=r.WindDelta,this.IsEvenOddFillType(t)?r.WindCnt2=r.WindCnt2===0?1:0:r.WindCnt2-=t.WindDelta;var _,b,F,X;t.PolyTyp===i.PolyType.ptSubject?(_=this.m_SubjFillType,F=this.m_ClipFillType):(_=this.m_ClipFillType,F=this.m_SubjFillType),r.PolyTyp===i.PolyType.ptSubject?(b=this.m_SubjFillType,X=this.m_ClipFillType):(b=this.m_ClipFillType,X=this.m_SubjFillType);var $,J;switch(_){case i.PolyFillType.pftPositive:$=t.WindCnt;break;case i.PolyFillType.pftNegative:$=-t.WindCnt;break;default:$=Math.abs(t.WindCnt);break}switch(b){case i.PolyFillType.pftPositive:J=r.WindCnt;break;case i.PolyFillType.pftNegative:J=-r.WindCnt;break;default:J=Math.abs(r.WindCnt);break}if(u&&d)$!==0&&$!==1||J!==0&&J!==1||t.PolyTyp!==r.PolyTyp&&this.m_ClipType!==i.ClipType.ctXor?this.AddLocalMaxPoly(t,r,a):(this.AddOutPt(t,a),this.AddOutPt(r,a),i.Clipper.SwapSides(t,r),i.Clipper.SwapPolyIndexes(t,r));else if(u)(J===0||J===1)&&(this.AddOutPt(t,a),i.Clipper.SwapSides(t,r),i.Clipper.SwapPolyIndexes(t,r));else if(d)($===0||$===1)&&(this.AddOutPt(r,a),i.Clipper.SwapSides(t,r),i.Clipper.SwapPolyIndexes(t,r));else if(($===0||$===1)&&(J===0||J===1)){var V,Q;switch(F){case i.PolyFillType.pftPositive:V=t.WindCnt2;break;case i.PolyFillType.pftNegative:V=-t.WindCnt2;break;default:V=Math.abs(t.WindCnt2);break}switch(X){case i.PolyFillType.pftPositive:Q=r.WindCnt2;break;case i.PolyFillType.pftNegative:Q=-r.WindCnt2;break;default:Q=Math.abs(r.WindCnt2);break}if(t.PolyTyp!==r.PolyTyp)this.AddLocalMinPoly(t,r,a);else if($===1&&J===1)switch(this.m_ClipType){case i.ClipType.ctIntersection:V>0&&Q>0&&this.AddLocalMinPoly(t,r,a);break;case i.ClipType.ctUnion:V<=0&&Q<=0&&this.AddLocalMinPoly(t,r,a);break;case i.ClipType.ctDifference:(t.PolyTyp===i.PolyType.ptClip&&V>0&&Q>0||t.PolyTyp===i.PolyType.ptSubject&&V<=0&&Q<=0)&&this.AddLocalMinPoly(t,r,a);break;case i.ClipType.ctXor:this.AddLocalMinPoly(t,r,a);break}else i.Clipper.SwapSides(t,r)}},i.Clipper.prototype.DeleteFromSEL=function(t){var r=t.PrevInSEL,a=t.NextInSEL;r===null&&a===null&&t!==this.m_SortedEdges||(r!==null?r.NextInSEL=a:this.m_SortedEdges=a,a!==null&&(a.PrevInSEL=r),t.NextInSEL=null,t.PrevInSEL=null)},i.Clipper.prototype.ProcessHorizontals=function(){for(var t={};this.PopEdgeFromSEL(t);)this.ProcessHorizontal(t.v)},i.Clipper.prototype.GetHorzDirection=function(t,r){t.Bot.X<t.Top.X?(r.Left=t.Bot.X,r.Right=t.Top.X,r.Dir=i.Direction.dLeftToRight):(r.Left=t.Top.X,r.Right=t.Bot.X,r.Dir=i.Direction.dRightToLeft)},i.Clipper.prototype.ProcessHorizontal=function(t){var r={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,r);for(var a=r.Dir,u=r.Left,d=r.Right,E=t.WindDelta===0,_=t,b=null;_.NextInLML!==null&&i.ClipperBase.IsHorizontal(_.NextInLML);)_=_.NextInLML;_.NextInLML===null&&(b=this.GetMaximaPair(_));var F=this.m_Maxima;if(F!==null)if(a===i.Direction.dLeftToRight){for(;F!==null&&F.X<=t.Bot.X;)F=F.Next;F!==null&&F.X>=_.Top.X&&(F=null)}else{for(;F.Next!==null&&F.Next.X<t.Bot.X;)F=F.Next;F.X<=_.Top.X&&(F=null)}for(var X=null;;){for(var $=t===_,J=this.GetNextInAEL(t,a);J!==null;){if(F!==null)if(a===i.Direction.dLeftToRight)for(;F!==null&&F.X<J.Curr.X;)t.OutIdx>=0&&!E&&this.AddOutPt(t,new i.IntPoint2(F.X,t.Bot.Y)),F=F.Next;else for(;F!==null&&F.X>J.Curr.X;)t.OutIdx>=0&&!E&&this.AddOutPt(t,new i.IntPoint2(F.X,t.Bot.Y)),F=F.Prev;if(a===i.Direction.dLeftToRight&&J.Curr.X>d||a===i.Direction.dRightToLeft&&J.Curr.X<u||J.Curr.X===t.Top.X&&t.NextInLML!==null&&J.Dx<t.NextInLML.Dx)break;if(t.OutIdx>=0&&!E){i.use_xyz&&(a===i.Direction.dLeftToRight?this.SetZ(J.Curr,t,J):this.SetZ(J.Curr,J,t)),X=this.AddOutPt(t,J.Curr);for(var V=this.m_SortedEdges;V!==null;){if(V.OutIdx>=0&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,V.Bot.X,V.Top.X)){var Q=this.GetLastOutPt(V);this.AddJoin(Q,X,V.Top)}V=V.NextInSEL}this.AddGhostJoin(X,t.Bot)}if(J===b&&$){t.OutIdx>=0&&this.AddLocalMaxPoly(t,b,t.Top),this.DeleteFromAEL(t),this.DeleteFromAEL(b);return}if(a===i.Direction.dLeftToRight){var it=new i.IntPoint2(J.Curr.X,t.Curr.Y);this.IntersectEdges(t,J,it)}else{var it=new i.IntPoint2(J.Curr.X,t.Curr.Y);this.IntersectEdges(J,t,it)}var nt=this.GetNextInAEL(J,a);this.SwapPositionsInAEL(t,J),J=nt}if(t.NextInLML===null||!i.ClipperBase.IsHorizontal(t.NextInLML))break;t=this.UpdateEdgeIntoAEL(t),t.OutIdx>=0&&this.AddOutPt(t,t.Bot),r={Dir:a,Left:u,Right:d},this.GetHorzDirection(t,r),a=r.Dir,u=r.Left,d=r.Right}if(t.OutIdx>=0&&X===null){X=this.GetLastOutPt(t);for(var V=this.m_SortedEdges;V!==null;){if(V.OutIdx>=0&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,V.Bot.X,V.Top.X)){var Q=this.GetLastOutPt(V);this.AddJoin(Q,X,V.Top)}V=V.NextInSEL}this.AddGhostJoin(X,t.Top)}if(t.NextInLML!==null)if(t.OutIdx>=0){if(X=this.AddOutPt(t,t.Top),t=this.UpdateEdgeIntoAEL(t),t.WindDelta===0)return;var lt=t.PrevInAEL,nt=t.NextInAEL;if(lt!==null&&lt.Curr.X===t.Bot.X&&lt.Curr.Y===t.Bot.Y&&lt.WindDelta===0&&lt.OutIdx>=0&&lt.Curr.Y>lt.Top.Y&&i.ClipperBase.SlopesEqual3(t,lt,this.m_UseFullRange)){var Q=this.AddOutPt(lt,t.Bot);this.AddJoin(X,Q,t.Top)}else if(nt!==null&&nt.Curr.X===t.Bot.X&&nt.Curr.Y===t.Bot.Y&&nt.WindDelta!==0&&nt.OutIdx>=0&&nt.Curr.Y>nt.Top.Y&&i.ClipperBase.SlopesEqual3(t,nt,this.m_UseFullRange)){var Q=this.AddOutPt(nt,t.Bot);this.AddJoin(X,Q,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t)},i.Clipper.prototype.GetNextInAEL=function(t,r){return r===i.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},i.Clipper.prototype.IsMinima=function(t){return t!==null&&t.Prev.NextInLML!==t&&t.Next.NextInLML!==t},i.Clipper.prototype.IsMaxima=function(t,r){return t!==null&&t.Top.Y===r&&t.NextInLML===null},i.Clipper.prototype.IsIntermediate=function(t,r){return t.Top.Y===r&&t.NextInLML!==null},i.Clipper.prototype.GetMaximaPair=function(t){return i.IntPoint.op_Equality(t.Next.Top,t.Top)&&t.Next.NextInLML===null?t.Next:i.IntPoint.op_Equality(t.Prev.Top,t.Top)&&t.Prev.NextInLML===null?t.Prev:null},i.Clipper.prototype.GetMaximaPairEx=function(t){var r=this.GetMaximaPair(t);return r===null||r.OutIdx===i.ClipperBase.Skip||r.NextInAEL===r.PrevInAEL&&!i.ClipperBase.IsHorizontal(r)?null:r},i.Clipper.prototype.ProcessIntersections=function(t){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(t),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch(r){this.m_SortedEdges=null,this.m_IntersectList.length=0,i.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},i.Clipper.prototype.BuildIntersectList=function(t){if(this.m_ActiveEdges!==null){var r=this.m_ActiveEdges;for(this.m_SortedEdges=r;r!==null;)r.PrevInSEL=r.PrevInAEL,r.NextInSEL=r.NextInAEL,r.Curr.X=i.Clipper.TopX(r,t),r=r.NextInAEL;for(var a=!0;a&&this.m_SortedEdges!==null;){for(a=!1,r=this.m_SortedEdges;r.NextInSEL!==null;){var u=r.NextInSEL,d=new i.IntPoint0;if(r.Curr.X>u.Curr.X){this.IntersectPoint(r,u,d),d.Y<t&&(d=new i.IntPoint2(i.Clipper.TopX(r,t),t));var E=new i.IntersectNode;E.Edge1=r,E.Edge2=u,E.Pt.X=d.X,E.Pt.Y=d.Y,i.use_xyz&&(E.Pt.Z=d.Z),this.m_IntersectList.push(E),this.SwapPositionsInSEL(r,u),a=!0}else r=u}if(r.PrevInSEL!==null)r.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},i.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL===t.Edge2||t.Edge1.PrevInSEL===t.Edge2},i.Clipper.IntersectNodeSort=function(t,r){return r.Pt.Y-t.Pt.Y},i.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,r=0;r<t;r++){if(!this.EdgesAdjacent(this.m_IntersectList[r])){for(var a=r+1;a<t&&!this.EdgesAdjacent(this.m_IntersectList[a]);)a++;if(a===t)return!1;var u=this.m_IntersectList[r];this.m_IntersectList[r]=this.m_IntersectList[a],this.m_IntersectList[a]=u}this.SwapPositionsInSEL(this.m_IntersectList[r].Edge1,this.m_IntersectList[r].Edge2)}return!0},i.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,r=this.m_IntersectList.length;t<r;t++){var a=this.m_IntersectList[t];this.IntersectEdges(a.Edge1,a.Edge2,a.Pt),this.SwapPositionsInAEL(a.Edge1,a.Edge2)}this.m_IntersectList.length=0};var po=function(t){return t<0?Math.ceil(t-.5):Math.round(t)},fo=function(t){return t<0?Math.ceil(t-.5):Math.floor(t+.5)},mo=function(t){return t<0?-Math.round(Math.abs(t)):Math.round(t)},vo=function(t){return t<0?(t-=.5,t<-2147483648?Math.ceil(t):t|0):(t+=.5,t>2147483647?Math.floor(t):t|0)};x.msie?i.Clipper.Round=po:x.chromium?i.Clipper.Round=mo:x.safari?i.Clipper.Round=vo:i.Clipper.Round=fo,i.Clipper.TopX=function(t,r){return r===t.Top.Y?t.Top.X:t.Bot.X+i.Clipper.Round(t.Dx*(r-t.Bot.Y))},i.Clipper.prototype.IntersectPoint=function(t,r,a){a.X=0,a.Y=0;var u,d;if(t.Dx===r.Dx){a.Y=t.Curr.Y,a.X=i.Clipper.TopX(t,a.Y);return}if(t.Delta.X===0)a.X=t.Bot.X,i.ClipperBase.IsHorizontal(r)?a.Y=r.Bot.Y:(d=r.Bot.Y-r.Bot.X/r.Dx,a.Y=i.Clipper.Round(a.X/r.Dx+d));else if(r.Delta.X===0)a.X=r.Bot.X,i.ClipperBase.IsHorizontal(t)?a.Y=t.Bot.Y:(u=t.Bot.Y-t.Bot.X/t.Dx,a.Y=i.Clipper.Round(a.X/t.Dx+u));else{u=t.Bot.X-t.Bot.Y*t.Dx,d=r.Bot.X-r.Bot.Y*r.Dx;var E=(d-u)/(t.Dx-r.Dx);a.Y=i.Clipper.Round(E),Math.abs(t.Dx)<Math.abs(r.Dx)?a.X=i.Clipper.Round(t.Dx*E+u):a.X=i.Clipper.Round(r.Dx*E+d)}if(a.Y<t.Top.Y||a.Y<r.Top.Y){if(t.Top.Y>r.Top.Y)return a.Y=t.Top.Y,a.X=i.Clipper.TopX(r,t.Top.Y),a.X<t.Top.X;a.Y=r.Top.Y,Math.abs(t.Dx)<Math.abs(r.Dx)?a.X=i.Clipper.TopX(t,a.Y):a.X=i.Clipper.TopX(r,a.Y)}a.Y>t.Curr.Y&&(a.Y=t.Curr.Y,Math.abs(t.Dx)>Math.abs(r.Dx)?a.X=i.Clipper.TopX(r,a.Y):a.X=i.Clipper.TopX(t,a.Y))},i.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var r=this.m_ActiveEdges;r!==null;){var a=this.IsMaxima(r,t);if(a){var u=this.GetMaximaPairEx(r);a=u===null||!i.ClipperBase.IsHorizontal(u)}if(a){this.StrictlySimple&&this.InsertMaxima(r.Top.X);var d=r.PrevInAEL;this.DoMaxima(r),d===null?r=this.m_ActiveEdges:r=d.NextInAEL}else{if(this.IsIntermediate(r,t)&&i.ClipperBase.IsHorizontal(r.NextInLML)?(r=this.UpdateEdgeIntoAEL(r),r.OutIdx>=0&&this.AddOutPt(r,r.Bot),this.AddEdgeToSEL(r)):(r.Curr.X=i.Clipper.TopX(r,t),r.Curr.Y=t),i.use_xyz&&(r.Top.Y===t?r.Curr.Z=r.Top.Z:r.Bot.Y===t?r.Curr.Z=r.Bot.Z:r.Curr.Z=0),this.StrictlySimple){var d=r.PrevInAEL;if(r.OutIdx>=0&&r.WindDelta!==0&&d!==null&&d.OutIdx>=0&&d.Curr.X===r.Curr.X&&d.WindDelta!==0){var E=new i.IntPoint1(r.Curr);i.use_xyz&&this.SetZ(E,d,r);var _=this.AddOutPt(d,E),b=this.AddOutPt(r,E);this.AddJoin(_,b,E)}}r=r.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,r=this.m_ActiveEdges;r!==null;){if(this.IsIntermediate(r,t)){var _=null;r.OutIdx>=0&&(_=this.AddOutPt(r,r.Top)),r=this.UpdateEdgeIntoAEL(r);var d=r.PrevInAEL,F=r.NextInAEL;if(d!==null&&d.Curr.X===r.Bot.X&&d.Curr.Y===r.Bot.Y&&_!==null&&d.OutIdx>=0&&d.Curr.Y===d.Top.Y&&i.ClipperBase.SlopesEqual5(r.Curr,r.Top,d.Curr,d.Top,this.m_UseFullRange)&&r.WindDelta!==0&&d.WindDelta!==0){var b=this.AddOutPt(ePrev2,r.Bot);this.AddJoin(_,b,r.Top)}else if(F!==null&&F.Curr.X===r.Bot.X&&F.Curr.Y===r.Bot.Y&&_!==null&&F.OutIdx>=0&&F.Curr.Y===F.Top.Y&&i.ClipperBase.SlopesEqual5(r.Curr,r.Top,F.Curr,F.Top,this.m_UseFullRange)&&r.WindDelta!==0&&F.WindDelta!==0){var b=this.AddOutPt(F,r.Bot);this.AddJoin(_,b,r.Top)}}r=r.NextInAEL}},i.Clipper.prototype.DoMaxima=function(t){var r=this.GetMaximaPairEx(t);if(r===null){t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t);return}for(var a=t.NextInAEL;a!==null&&a!==r;)this.IntersectEdges(t,a,t.Top),this.SwapPositionsInAEL(t,a),a=t.NextInAEL;t.OutIdx===-1&&r.OutIdx===-1?(this.DeleteFromAEL(t),this.DeleteFromAEL(r)):t.OutIdx>=0&&r.OutIdx>=0?(t.OutIdx>=0&&this.AddLocalMaxPoly(t,r,t.Top),this.DeleteFromAEL(t),this.DeleteFromAEL(r)):i.use_lines&&t.WindDelta===0?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=i.ClipperBase.Unassigned),this.DeleteFromAEL(t),r.OutIdx>=0&&(this.AddOutPt(r,t.Top),r.OutIdx=i.ClipperBase.Unassigned),this.DeleteFromAEL(r)):i.Error("DoMaxima error")},i.Clipper.ReversePaths=function(t){for(var r=0,a=t.length;r<a;r++)t[r].reverse()},i.Clipper.Orientation=function(t){return i.Clipper.Area(t)>=0},i.Clipper.prototype.PointCount=function(t){if(t===null)return 0;var r=0,a=t;do r++,a=a.Next;while(a!==t);return r},i.Clipper.prototype.BuildResult=function(t){i.Clear(t);for(var r=0,a=this.m_PolyOuts.length;r<a;r++){var u=this.m_PolyOuts[r];if(u.Pts!==null){var d=u.Pts.Prev,E=this.PointCount(d);if(!(E<2)){for(var _=new Array(E),b=0;b<E;b++)_[b]=d.Pt,d=d.Prev;t.push(_)}}}},i.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var r=0,a=this.m_PolyOuts.length;r<a;r++){var u=this.m_PolyOuts[r],d=this.PointCount(u.Pts);if(!(u.IsOpen&&d<2||!u.IsOpen&&d<3)){this.FixHoleLinkage(u);var E=new i.PolyNode;t.m_AllPolys.push(E),u.PolyNode=E,E.m_polygon.length=d;for(var _=u.Pts.Prev,b=0;b<d;b++)E.m_polygon[b]=_.Pt,_=_.Prev}}for(var r=0,a=this.m_PolyOuts.length;r<a;r++){var u=this.m_PolyOuts[r];u.PolyNode!==null&&(u.IsOpen?(u.PolyNode.IsOpen=!0,t.AddChild(u.PolyNode)):u.FirstLeft!==null&&u.FirstLeft.PolyNode!==null?u.FirstLeft.PolyNode.AddChild(u.PolyNode):t.AddChild(u.PolyNode))}},i.Clipper.prototype.FixupOutPolyline=function(t){for(var r=t.Pts,a=r.Prev;r!==a;)if(r=r.Next,i.IntPoint.op_Equality(r.Pt,r.Prev.Pt)){r===a&&(a=r.Prev);var u=r.Prev;u.Next=r.Next,r.Next.Prev=u,r=u}r===r.Prev&&(t.Pts=null)},i.Clipper.prototype.FixupOutPolygon=function(t){var r=null;t.BottomPt=null;for(var a=t.Pts,u=this.PreserveCollinear||this.StrictlySimple;;){if(a.Prev===a||a.Prev===a.Next){t.Pts=null;return}if(i.IntPoint.op_Equality(a.Pt,a.Next.Pt)||i.IntPoint.op_Equality(a.Pt,a.Prev.Pt)||i.ClipperBase.SlopesEqual4(a.Prev.Pt,a.Pt,a.Next.Pt,this.m_UseFullRange)&&(!u||!this.Pt2IsBetweenPt1AndPt3(a.Prev.Pt,a.Pt,a.Next.Pt)))r=null,a.Prev.Next=a.Next,a.Next.Prev=a.Prev,a=a.Prev;else{if(a===r)break;r===null&&(r=a),a=a.Next}}t.Pts=a},i.Clipper.prototype.DupOutPt=function(t,r){var a=new i.OutPt;return a.Pt.X=t.Pt.X,a.Pt.Y=t.Pt.Y,i.use_xyz&&(a.Pt.Z=t.Pt.Z),a.Idx=t.Idx,r?(a.Next=t.Next,a.Prev=t,t.Next.Prev=a,t.Next=a):(a.Prev=t.Prev,a.Next=t,t.Prev.Next=a,t.Prev=a),a},i.Clipper.prototype.GetOverlap=function(t,r,a,u,d){return t<r?a<u?(d.Left=Math.max(t,a),d.Right=Math.min(r,u)):(d.Left=Math.max(t,u),d.Right=Math.min(r,a)):a<u?(d.Left=Math.max(r,a),d.Right=Math.min(t,u)):(d.Left=Math.max(r,u),d.Right=Math.min(t,a)),d.Left<d.Right},i.Clipper.prototype.JoinHorz=function(t,r,a,u,d,E){var _=t.Pt.X>r.Pt.X?i.Direction.dRightToLeft:i.Direction.dLeftToRight,b=a.Pt.X>u.Pt.X?i.Direction.dRightToLeft:i.Direction.dLeftToRight;if(_===b)return!1;if(_===i.Direction.dLeftToRight){for(;t.Next.Pt.X<=d.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y===d.Y;)t=t.Next;E&&t.Pt.X!==d.X&&(t=t.Next),r=this.DupOutPt(t,!E),i.IntPoint.op_Inequality(r.Pt,d)&&(t=r,t.Pt.X=d.X,t.Pt.Y=d.Y,i.use_xyz&&(t.Pt.Z=d.Z),r=this.DupOutPt(t,!E))}else{for(;t.Next.Pt.X>=d.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y===d.Y;)t=t.Next;!E&&t.Pt.X!==d.X&&(t=t.Next),r=this.DupOutPt(t,E),i.IntPoint.op_Inequality(r.Pt,d)&&(t=r,t.Pt.X=d.X,t.Pt.Y=d.Y,i.use_xyz&&(t.Pt.Z=d.Z),r=this.DupOutPt(t,E))}if(b===i.Direction.dLeftToRight){for(;a.Next.Pt.X<=d.X&&a.Next.Pt.X>=a.Pt.X&&a.Next.Pt.Y===d.Y;)a=a.Next;E&&a.Pt.X!==d.X&&(a=a.Next),u=this.DupOutPt(a,!E),i.IntPoint.op_Inequality(u.Pt,d)&&(a=u,a.Pt.X=d.X,a.Pt.Y=d.Y,i.use_xyz&&(a.Pt.Z=d.Z),u=this.DupOutPt(a,!E))}else{for(;a.Next.Pt.X>=d.X&&a.Next.Pt.X<=a.Pt.X&&a.Next.Pt.Y===d.Y;)a=a.Next;!E&&a.Pt.X!==d.X&&(a=a.Next),u=this.DupOutPt(a,E),i.IntPoint.op_Inequality(u.Pt,d)&&(a=u,a.Pt.X=d.X,a.Pt.Y=d.Y,i.use_xyz&&(a.Pt.Z=d.Z),u=this.DupOutPt(a,E))}return _===i.Direction.dLeftToRight===E?(t.Prev=a,a.Next=t,r.Next=u,u.Prev=r):(t.Next=a,a.Prev=t,r.Prev=u,u.Next=r),!0},i.Clipper.prototype.JoinPoints=function(t,r,a){var u=t.OutPt1,d=new i.OutPt,E=t.OutPt2,_=new i.OutPt,b=t.OutPt1.Pt.Y===t.OffPt.Y;if(b&&i.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&i.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){if(r!==a)return!1;for(d=t.OutPt1.Next;d!==u&&i.IntPoint.op_Equality(d.Pt,t.OffPt);)d=d.Next;var F=d.Pt.Y>t.OffPt.Y;for(_=t.OutPt2.Next;_!==E&&i.IntPoint.op_Equality(_.Pt,t.OffPt);)_=_.Next;var X=_.Pt.Y>t.OffPt.Y;return F===X?!1:F?(d=this.DupOutPt(u,!1),_=this.DupOutPt(E,!0),u.Prev=E,E.Next=u,d.Next=_,_.Prev=d,t.OutPt1=u,t.OutPt2=d,!0):(d=this.DupOutPt(u,!0),_=this.DupOutPt(E,!1),u.Next=E,E.Prev=u,d.Prev=_,_.Next=d,t.OutPt1=u,t.OutPt2=d,!0)}else if(b){for(d=u;u.Prev.Pt.Y===u.Pt.Y&&u.Prev!==d&&u.Prev!==E;)u=u.Prev;for(;d.Next.Pt.Y===d.Pt.Y&&d.Next!==u&&d.Next!==E;)d=d.Next;if(d.Next===u||d.Next===E)return!1;for(_=E;E.Prev.Pt.Y===E.Pt.Y&&E.Prev!==_&&E.Prev!==d;)E=E.Prev;for(;_.Next.Pt.Y===_.Pt.Y&&_.Next!==E&&_.Next!==u;)_=_.Next;if(_.Next===E||_.Next===u)return!1;var $={Left:null,Right:null};if(!this.GetOverlap(u.Pt.X,d.Pt.X,E.Pt.X,_.Pt.X,$))return!1;var J=$.Left,V=$.Right,Q=new i.IntPoint0,it;return u.Pt.X>=J&&u.Pt.X<=V?(Q.X=u.Pt.X,Q.Y=u.Pt.Y,i.use_xyz&&(Q.Z=u.Pt.Z),it=u.Pt.X>d.Pt.X):E.Pt.X>=J&&E.Pt.X<=V?(Q.X=E.Pt.X,Q.Y=E.Pt.Y,i.use_xyz&&(Q.Z=E.Pt.Z),it=E.Pt.X>_.Pt.X):d.Pt.X>=J&&d.Pt.X<=V?(Q.X=d.Pt.X,Q.Y=d.Pt.Y,i.use_xyz&&(Q.Z=d.Pt.Z),it=d.Pt.X>u.Pt.X):(Q.X=_.Pt.X,Q.Y=_.Pt.Y,i.use_xyz&&(Q.Z=_.Pt.Z),it=_.Pt.X>E.Pt.X),t.OutPt1=u,t.OutPt2=E,this.JoinHorz(u,d,E,_,Q,it)}else{for(d=u.Next;i.IntPoint.op_Equality(d.Pt,u.Pt)&&d!==u;)d=d.Next;var nt=d.Pt.Y>u.Pt.Y||!i.ClipperBase.SlopesEqual4(u.Pt,d.Pt,t.OffPt,this.m_UseFullRange);if(nt){for(d=u.Prev;i.IntPoint.op_Equality(d.Pt,u.Pt)&&d!==u;)d=d.Prev;if(d.Pt.Y>u.Pt.Y||!i.ClipperBase.SlopesEqual4(u.Pt,d.Pt,t.OffPt,this.m_UseFullRange))return!1}for(_=E.Next;i.IntPoint.op_Equality(_.Pt,E.Pt)&&_!==E;)_=_.Next;var lt=_.Pt.Y>E.Pt.Y||!i.ClipperBase.SlopesEqual4(E.Pt,_.Pt,t.OffPt,this.m_UseFullRange);if(lt){for(_=E.Prev;i.IntPoint.op_Equality(_.Pt,E.Pt)&&_!==E;)_=_.Prev;if(_.Pt.Y>E.Pt.Y||!i.ClipperBase.SlopesEqual4(E.Pt,_.Pt,t.OffPt,this.m_UseFullRange))return!1}return d===u||_===E||d===_||r===a&&nt===lt?!1:nt?(d=this.DupOutPt(u,!1),_=this.DupOutPt(E,!0),u.Prev=E,E.Next=u,d.Next=_,_.Prev=d,t.OutPt1=u,t.OutPt2=d,!0):(d=this.DupOutPt(u,!0),_=this.DupOutPt(E,!1),u.Next=E,E.Prev=u,d.Prev=_,_.Next=d,t.OutPt1=u,t.OutPt2=d,!0)}},i.Clipper.GetBounds=function(t){for(var r=0,a=t.length;r<a&&t[r].length===0;)r++;if(r===a)return new i.IntRect(0,0,0,0);var u=new i.IntRect;for(u.left=t[r][0].X,u.right=u.left,u.top=t[r][0].Y,u.bottom=u.top;r<a;r++)for(var d=0,E=t[r].length;d<E;d++)t[r][d].X<u.left?u.left=t[r][d].X:t[r][d].X>u.right&&(u.right=t[r][d].X),t[r][d].Y<u.top?u.top=t[r][d].Y:t[r][d].Y>u.bottom&&(u.bottom=t[r][d].Y);return u},i.Clipper.prototype.GetBounds2=function(t){var r=t,a=new i.IntRect;for(a.left=t.Pt.X,a.right=t.Pt.X,a.top=t.Pt.Y,a.bottom=t.Pt.Y,t=t.Next;t!==r;)t.Pt.X<a.left&&(a.left=t.Pt.X),t.Pt.X>a.right&&(a.right=t.Pt.X),t.Pt.Y<a.top&&(a.top=t.Pt.Y),t.Pt.Y>a.bottom&&(a.bottom=t.Pt.Y),t=t.Next;return a},i.Clipper.PointInPolygon=function(t,r){var a=0,u=r.length;if(u<3)return 0;for(var d=r[0],E=1;E<=u;++E){var _=E===u?r[0]:r[E];if(_.Y===t.Y&&(_.X===t.X||d.Y===t.Y&&_.X>t.X==d.X<t.X))return-1;if(d.Y<t.Y!=_.Y<t.Y){if(d.X>=t.X)if(_.X>t.X)a=1-a;else{var b=(d.X-t.X)*(_.Y-t.Y)-(_.X-t.X)*(d.Y-t.Y);if(b===0)return-1;b>0==_.Y>d.Y&&(a=1-a)}else if(_.X>t.X){var b=(d.X-t.X)*(_.Y-t.Y)-(_.X-t.X)*(d.Y-t.Y);if(b===0)return-1;b>0==_.Y>d.Y&&(a=1-a)}}d=_}return a},i.Clipper.prototype.PointInPolygon=function(t,r){var a=0,u=r,d=t.X,E=t.Y,_=r.Pt.X,b=r.Pt.Y;do{r=r.Next;var F=r.Pt.X,X=r.Pt.Y;if(X===E&&(F===d||b===E&&F>d==_<d))return-1;if(b<E!=X<E){if(_>=d)if(F>d)a=1-a;else{var $=(_-d)*(X-E)-(F-d)*(b-E);if($===0)return-1;$>0==X>b&&(a=1-a)}else if(F>d){var $=(_-d)*(X-E)-(F-d)*(b-E);if($===0)return-1;$>0==X>b&&(a=1-a)}}_=F,b=X}while(u!==r);return a},i.Clipper.prototype.Poly2ContainsPoly1=function(t,r){var a=t;do{var u=this.PointInPolygon(a.Pt,r);if(u>=0)return u>0;a=a.Next}while(a!==t);return!0},i.Clipper.prototype.FixupFirstLefts1=function(t,r){for(var a,u,d=0,E=this.m_PolyOuts.length;d<E;d++)a=this.m_PolyOuts[d],u=i.Clipper.ParseFirstLeft(a.FirstLeft),a.Pts!==null&&u===t&&this.Poly2ContainsPoly1(a.Pts,r.Pts)&&(a.FirstLeft=r)},i.Clipper.prototype.FixupFirstLefts2=function(t,r){for(var a=r.FirstLeft,u,d,E=0,_=this.m_PolyOuts.length;E<_;E++)u=this.m_PolyOuts[E],!(u.Pts===null||u===r||u===t)&&(d=i.Clipper.ParseFirstLeft(u.FirstLeft),!(d!==a&&d!==t&&d!==r)&&(this.Poly2ContainsPoly1(u.Pts,t.Pts)?u.FirstLeft=t:this.Poly2ContainsPoly1(u.Pts,r.Pts)?u.FirstLeft=r:(u.FirstLeft===t||u.FirstLeft===r)&&(u.FirstLeft=a)))},i.Clipper.prototype.FixupFirstLefts3=function(t,r){for(var a,u,d=0,E=this.m_PolyOuts.length;d<E;d++)a=this.m_PolyOuts[d],u=i.Clipper.ParseFirstLeft(a.FirstLeft),a.Pts!==null&&u===t&&(a.FirstLeft=r)},i.Clipper.ParseFirstLeft=function(t){for(;t!==null&&t.Pts===null;)t=t.FirstLeft;return t},i.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,r=this.m_Joins.length;t<r;t++){var a=this.m_Joins[t],u=this.GetOutRec(a.OutPt1.Idx),d=this.GetOutRec(a.OutPt2.Idx);if(!(u.Pts===null||d.Pts===null)&&!(u.IsOpen||d.IsOpen)){var E;u===d?E=u:this.OutRec1RightOfOutRec2(u,d)?E=d:this.OutRec1RightOfOutRec2(d,u)?E=u:E=this.GetLowermostRec(u,d),!!this.JoinPoints(a,u,d)&&(u===d?(u.Pts=a.OutPt1,u.BottomPt=null,d=this.CreateOutRec(),d.Pts=a.OutPt2,this.UpdateOutPtIdxs(d),this.Poly2ContainsPoly1(d.Pts,u.Pts)?(d.IsHole=!u.IsHole,d.FirstLeft=u,this.m_UsingPolyTree&&this.FixupFirstLefts2(d,u),(d.IsHole^this.ReverseSolution)==this.Area$1(d)>0&&this.ReversePolyPtLinks(d.Pts)):this.Poly2ContainsPoly1(u.Pts,d.Pts)?(d.IsHole=u.IsHole,u.IsHole=!d.IsHole,d.FirstLeft=u.FirstLeft,u.FirstLeft=d,this.m_UsingPolyTree&&this.FixupFirstLefts2(u,d),(u.IsHole^this.ReverseSolution)==this.Area$1(u)>0&&this.ReversePolyPtLinks(u.Pts)):(d.IsHole=u.IsHole,d.FirstLeft=u.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(u,d))):(d.Pts=null,d.BottomPt=null,d.Idx=u.Idx,u.IsHole=E.IsHole,E===d&&(u.FirstLeft=d.FirstLeft),d.FirstLeft=u,this.m_UsingPolyTree&&this.FixupFirstLefts3(d,u)))}}},i.Clipper.prototype.UpdateOutPtIdxs=function(t){var r=t.Pts;do r.Idx=t.Idx,r=r.Prev;while(r!==t.Pts)},i.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var r=this.m_PolyOuts[t++],a=r.Pts;if(!(a===null||r.IsOpen))do{for(var u=a.Next;u!==r.Pts;){if(i.IntPoint.op_Equality(a.Pt,u.Pt)&&u.Next!==a&&u.Prev!==a){var d=a.Prev,E=u.Prev;a.Prev=E,E.Next=a,u.Prev=d,d.Next=u,r.Pts=a;var _=this.CreateOutRec();_.Pts=u,this.UpdateOutPtIdxs(_),this.Poly2ContainsPoly1(_.Pts,r.Pts)?(_.IsHole=!r.IsHole,_.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(_,r)):this.Poly2ContainsPoly1(r.Pts,_.Pts)?(_.IsHole=r.IsHole,r.IsHole=!_.IsHole,_.FirstLeft=r.FirstLeft,r.FirstLeft=_,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,_)):(_.IsHole=r.IsHole,_.FirstLeft=r.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(r,_)),u=a}u=u.Next}a=a.Next}while(a!==r.Pts)}},i.Clipper.Area=function(t){if(!Array.isArray(t))return 0;var r=t.length;if(r<3)return 0;for(var a=0,u=0,d=r-1;u<r;++u)a+=(t[d].X+t[u].X)*(t[d].Y-t[u].Y),d=u;return-a*.5},i.Clipper.prototype.Area=function(t){var r=t;if(t===null)return 0;var a=0;do a=a+(t.Prev.Pt.X+t.Pt.X)*(t.Prev.Pt.Y-t.Pt.Y),t=t.Next;while(t!==r);return a*.5},i.Clipper.prototype.Area$1=function(t){return this.Area(t.Pts)},i.Clipper.SimplifyPolygon=function(t,r){var a=new Array,u=new i.Clipper(0);return u.StrictlySimple=!0,u.AddPath(t,i.PolyType.ptSubject,!0),u.Execute(i.ClipType.ctUnion,a,r,r),a},i.Clipper.SimplifyPolygons=function(t,r){typeof r=="undefined"&&(r=i.PolyFillType.pftEvenOdd);var a=new Array,u=new i.Clipper(0);return u.StrictlySimple=!0,u.AddPaths(t,i.PolyType.ptSubject,!0),u.Execute(i.ClipType.ctUnion,a,r,r),a},i.Clipper.DistanceSqrd=function(t,r){var a=t.X-r.X,u=t.Y-r.Y;return a*a+u*u},i.Clipper.DistanceFromLineSqrd=function(t,r,a){var u=r.Y-a.Y,d=a.X-r.X,E=u*r.X+d*r.Y;return E=u*t.X+d*t.Y-E,E*E/(u*u+d*d)},i.Clipper.SlopesNearCollinear=function(t,r,a,u){return Math.abs(t.X-r.X)>Math.abs(t.Y-r.Y)?t.X>r.X==t.X<a.X?i.Clipper.DistanceFromLineSqrd(t,r,a)<u:r.X>t.X==r.X<a.X?i.Clipper.DistanceFromLineSqrd(r,t,a)<u:i.Clipper.DistanceFromLineSqrd(a,t,r)<u:t.Y>r.Y==t.Y<a.Y?i.Clipper.DistanceFromLineSqrd(t,r,a)<u:r.Y>t.Y==r.Y<a.Y?i.Clipper.DistanceFromLineSqrd(r,t,a)<u:i.Clipper.DistanceFromLineSqrd(a,t,r)<u},i.Clipper.PointsAreClose=function(t,r,a){var u=t.X-r.X,d=t.Y-r.Y;return u*u+d*d<=a},i.Clipper.ExcludeOp=function(t){var r=t.Prev;return r.Next=t.Next,t.Next.Prev=r,r.Idx=0,r},i.Clipper.CleanPolygon=function(t,r){typeof r=="undefined"&&(r=1.415);var a=t.length;if(a===0)return new Array;for(var u=new Array(a),d=0;d<a;++d)u[d]=new i.OutPt;for(var d=0;d<a;++d)u[d].Pt=t[d],u[d].Next=u[(d+1)%a],u[d].Next.Prev=u[d],u[d].Idx=0;for(var E=r*r,_=u[0];_.Idx===0&&_.Next!==_.Prev;)i.Clipper.PointsAreClose(_.Pt,_.Prev.Pt,E)?(_=i.Clipper.ExcludeOp(_),a--):i.Clipper.PointsAreClose(_.Prev.Pt,_.Next.Pt,E)?(i.Clipper.ExcludeOp(_.Next),_=i.Clipper.ExcludeOp(_),a-=2):i.Clipper.SlopesNearCollinear(_.Prev.Pt,_.Pt,_.Next.Pt,E)?(_=i.Clipper.ExcludeOp(_),a--):(_.Idx=1,_=_.Next);a<3&&(a=0);for(var b=new Array(a),d=0;d<a;++d)b[d]=new i.IntPoint1(_.Pt),_=_.Next;return u=null,b},i.Clipper.CleanPolygons=function(t,r){for(var a=new Array(t.length),u=0,d=t.length;u<d;u++)a[u]=i.Clipper.CleanPolygon(t[u],r);return a},i.Clipper.Minkowski=function(t,r,a,u){var d=u?1:0,E=t.length,_=r.length,b=new Array;if(a)for(var F=0;F<_;F++){for(var X=new Array(E),$=0,J=t.length,V=t[$];$<J;$++,V=t[$])X[$]=new i.IntPoint2(r[F].X+V.X,r[F].Y+V.Y);b.push(X)}else for(var F=0;F<_;F++){for(var X=new Array(E),$=0,J=t.length,V=t[$];$<J;$++,V=t[$])X[$]=new i.IntPoint2(r[F].X-V.X,r[F].Y-V.Y);b.push(X)}for(var Q=new Array,F=0;F<_-1+d;F++)for(var $=0;$<E;$++){var it=new Array;it.push(b[F%_][$%E]),it.push(b[(F+1)%_][$%E]),it.push(b[(F+1)%_][($+1)%E]),it.push(b[F%_][($+1)%E]),i.Clipper.Orientation(it)||it.reverse(),Q.push(it)}return Q},i.Clipper.MinkowskiSum=function(t,r,a){if(r[0]instanceof Array){for(var d=r,_=new i.Paths,E=new i.Clipper,b=0;b<d.length;++b){var F=i.Clipper.Minkowski(t,d[b],!0,a);if(E.AddPaths(F,i.PolyType.ptSubject,!0),a){var u=i.Clipper.TranslatePath(d[b],t[0]);E.AddPath(u,i.PolyType.ptClip,!0)}}return E.Execute(i.ClipType.ctUnion,_,i.PolyFillType.pftNonZero,i.PolyFillType.pftNonZero),_}else{var u=r,d=i.Clipper.Minkowski(t,u,!0,a),E=new i.Clipper;return E.AddPaths(d,i.PolyType.ptSubject,!0),E.Execute(i.ClipType.ctUnion,d,i.PolyFillType.pftNonZero,i.PolyFillType.pftNonZero),d}},i.Clipper.TranslatePath=function(t,r){for(var a=new i.Path,u=0;u<t.length;u++)a.push(new i.IntPoint2(t[u].X+r.X,t[u].Y+r.Y));return a},i.Clipper.MinkowskiDiff=function(t,r){var a=i.Clipper.Minkowski(t,r,!1,!0),u=new i.Clipper;return u.AddPaths(a,i.PolyType.ptSubject,!0),u.Execute(i.ClipType.ctUnion,a,i.PolyFillType.pftNonZero,i.PolyFillType.pftNonZero),a},i.Clipper.PolyTreeToPaths=function(t){var r=new Array;return i.Clipper.AddPolyNodeToPaths(t,i.Clipper.NodeType.ntAny,r),r},i.Clipper.AddPolyNodeToPaths=function(t,r,a){var u=!0;switch(r){case i.Clipper.NodeType.ntOpen:return;case i.Clipper.NodeType.ntClosed:u=!t.IsOpen;break}t.m_polygon.length>0&&u&&a.push(t.m_polygon);for(var d=0,E=t.Childs(),_=E.length,b=E[d];d<_;d++,b=E[d])i.Clipper.AddPolyNodeToPaths(b,r,a)},i.Clipper.OpenPathsFromPolyTree=function(t){for(var r=new i.Paths,a=0,u=t.ChildCount();a<u;a++)t.Childs()[a].IsOpen&&r.push(t.Childs()[a].m_polygon);return r},i.Clipper.ClosedPathsFromPolyTree=function(t){var r=new i.Paths;return i.Clipper.AddPolyNodeToPaths(t,i.Clipper.NodeType.ntClosed,r),r},fr(i.Clipper,i.ClipperBase),i.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},i.ClipperOffset=function(t,r){typeof t=="undefined"&&(t=2),typeof r=="undefined"&&(r=i.ClipperOffset.def_arc_tolerance),this.m_destPolys=new i.Paths,this.m_srcPoly=new i.Path,this.m_destPoly=new i.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new i.IntPoint0,this.m_polyNodes=new i.PolyNode,this.MiterLimit=t,this.ArcTolerance=r,this.m_lowest.X=-1},i.ClipperOffset.two_pi=6.28318530717959,i.ClipperOffset.def_arc_tolerance=.25,i.ClipperOffset.prototype.Clear=function(){i.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},i.ClipperOffset.Round=i.Clipper.Round,i.ClipperOffset.prototype.AddPath=function(t,r,a){var u=t.length-1;if(!(u<0)){var d=new i.PolyNode;if(d.m_jointype=r,d.m_endtype=a,a===i.EndType.etClosedLine||a===i.EndType.etClosedPolygon)for(;u>0&&i.IntPoint.op_Equality(t[0],t[u]);)u--;d.m_polygon.push(t[0]);for(var E=0,_=0,b=1;b<=u;b++)i.IntPoint.op_Inequality(d.m_polygon[E],t[b])&&(E++,d.m_polygon.push(t[b]),(t[b].Y>d.m_polygon[_].Y||t[b].Y===d.m_polygon[_].Y&&t[b].X<d.m_polygon[_].X)&&(_=E));if(!(a===i.EndType.etClosedPolygon&&E<2)&&(this.m_polyNodes.AddChild(d),a===i.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new i.IntPoint2(this.m_polyNodes.ChildCount()-1,_);else{var F=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(d.m_polygon[_].Y>F.Y||d.m_polygon[_].Y===F.Y&&d.m_polygon[_].X<F.X)&&(this.m_lowest=new i.IntPoint2(this.m_polyNodes.ChildCount()-1,_))}}},i.ClipperOffset.prototype.AddPaths=function(t,r,a){for(var u=0,d=t.length;u<d;u++)this.AddPath(t[u],r,a)},i.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!i.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){var r=this.m_polyNodes.Childs()[t];(r.m_endtype===i.EndType.etClosedPolygon||r.m_endtype===i.EndType.etClosedLine&&i.Clipper.Orientation(r.m_polygon))&&r.m_polygon.reverse()}else for(var t=0;t<this.m_polyNodes.ChildCount();t++){var r=this.m_polyNodes.Childs()[t];r.m_endtype===i.EndType.etClosedLine&&!i.Clipper.Orientation(r.m_polygon)&&r.m_polygon.reverse()}},i.ClipperOffset.GetUnitNormal=function(t,r){var a=r.X-t.X,u=r.Y-t.Y;if(a===0&&u===0)return new i.DoublePoint2(0,0);var d=1/Math.sqrt(a*a+u*u);return a*=d,u*=d,new i.DoublePoint2(u,-a)},i.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,i.ClipperBase.near_zero(t)){for(var r=0;r<this.m_polyNodes.ChildCount();r++){var a=this.m_polyNodes.Childs()[r];a.m_endtype===i.EndType.etClosedPolygon&&this.m_destPolys.push(a.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var u;this.ArcTolerance<=0?u=i.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*i.ClipperOffset.def_arc_tolerance?u=Math.abs(t)*i.ClipperOffset.def_arc_tolerance:u=this.ArcTolerance;var d=3.14159265358979/Math.acos(1-u/Math.abs(t));this.m_sin=Math.sin(i.ClipperOffset.two_pi/d),this.m_cos=Math.cos(i.ClipperOffset.two_pi/d),this.m_StepsPerRad=d/i.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin);for(var r=0;r<this.m_polyNodes.ChildCount();r++){var a=this.m_polyNodes.Childs()[r];this.m_srcPoly=a.m_polygon;var E=this.m_srcPoly.length;if(!(E===0||t<=0&&(E<3||a.m_endtype!==i.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,E===1){if(a.m_jointype===i.JoinType.jtRound)for(var _=1,b=0,F=1;F<=d;F++){this.m_destPoly.push(new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[0].X+_*t),i.ClipperOffset.Round(this.m_srcPoly[0].Y+b*t)));var X=_;_=_*this.m_cos-this.m_sin*b,b=X*this.m_sin+b*this.m_cos}else for(var _=-1,b=-1,F=0;F<4;++F)this.m_destPoly.push(new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[0].X+_*t),i.ClipperOffset.Round(this.m_srcPoly[0].Y+b*t))),_<0?_=1:b<0?b=1:_=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var F=0;F<E-1;F++)this.m_normals.push(i.ClipperOffset.GetUnitNormal(this.m_srcPoly[F],this.m_srcPoly[F+1]));if(a.m_endtype===i.EndType.etClosedLine||a.m_endtype===i.EndType.etClosedPolygon?this.m_normals.push(i.ClipperOffset.GetUnitNormal(this.m_srcPoly[E-1],this.m_srcPoly[0])):this.m_normals.push(new i.DoublePoint1(this.m_normals[E-2])),a.m_endtype===i.EndType.etClosedPolygon){for(var $=E-1,F=0;F<E;F++)$=this.OffsetPoint(F,$,a.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(a.m_endtype===i.EndType.etClosedLine){for(var $=E-1,F=0;F<E;F++)$=this.OffsetPoint(F,$,a.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var J=this.m_normals[E-1],F=E-1;F>0;F--)this.m_normals[F]=new i.DoublePoint2(-this.m_normals[F-1].X,-this.m_normals[F-1].Y);this.m_normals[0]=new i.DoublePoint2(-J.X,-J.Y),$=0;for(var F=E-1;F>=0;F--)$=this.OffsetPoint(F,$,a.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var $=0,F=1;F<E-1;++F)$=this.OffsetPoint(F,$,a.m_jointype);var V;if(a.m_endtype===i.EndType.etOpenButt){var F=E-1;V=new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[F].X+this.m_normals[F].X*t),i.ClipperOffset.Round(this.m_srcPoly[F].Y+this.m_normals[F].Y*t)),this.m_destPoly.push(V),V=new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[F].X-this.m_normals[F].X*t),i.ClipperOffset.Round(this.m_srcPoly[F].Y-this.m_normals[F].Y*t)),this.m_destPoly.push(V)}else{var F=E-1;$=E-2,this.m_sinA=0,this.m_normals[F]=new i.DoublePoint2(-this.m_normals[F].X,-this.m_normals[F].Y),a.m_endtype===i.EndType.etOpenSquare?this.DoSquare(F,$):this.DoRound(F,$)}for(var F=E-1;F>0;F--)this.m_normals[F]=new i.DoublePoint2(-this.m_normals[F-1].X,-this.m_normals[F-1].Y);this.m_normals[0]=new i.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),$=E-1;for(var F=$-1;F>0;--F)$=this.OffsetPoint(F,$,a.m_jointype);a.m_endtype===i.EndType.etOpenButt?(V=new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),i.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(V),V=new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),i.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(V)):($=1,this.m_sinA=0,a.m_endtype===i.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},i.ClipperOffset.prototype.Execute=function(){var t=arguments,r=t[0]instanceof i.PolyTree;if(r){var a=t[0],u=t[1];a.Clear(),this.FixOrientations(),this.DoOffset(u);var d=new i.Clipper(0);if(d.AddPaths(this.m_destPolys,i.PolyType.ptSubject,!0),u>0)d.Execute(i.ClipType.ctUnion,a,i.PolyFillType.pftPositive,i.PolyFillType.pftPositive);else{var E=i.Clipper.GetBounds(this.m_destPolys),_=new i.Path;if(_.push(new i.IntPoint2(E.left-10,E.bottom+10)),_.push(new i.IntPoint2(E.right+10,E.bottom+10)),_.push(new i.IntPoint2(E.right+10,E.top-10)),_.push(new i.IntPoint2(E.left-10,E.top-10)),d.AddPath(_,i.PolyType.ptSubject,!0),d.ReverseSolution=!0,d.Execute(i.ClipType.ctUnion,a,i.PolyFillType.pftNegative,i.PolyFillType.pftNegative),a.ChildCount()===1&&a.Childs()[0].ChildCount()>0){var b=a.Childs()[0];a.Childs()[0]=b.Childs()[0],a.Childs()[0].m_Parent=a;for(var F=1;F<b.ChildCount();F++)a.AddChild(b.Childs()[F])}else a.Clear()}}else{var a=t[0],u=t[1];i.Clear(a),this.FixOrientations(),this.DoOffset(u);var d=new i.Clipper(0);if(d.AddPaths(this.m_destPolys,i.PolyType.ptSubject,!0),u>0)d.Execute(i.ClipType.ctUnion,a,i.PolyFillType.pftPositive,i.PolyFillType.pftPositive);else{var E=i.Clipper.GetBounds(this.m_destPolys),_=new i.Path;_.push(new i.IntPoint2(E.left-10,E.bottom+10)),_.push(new i.IntPoint2(E.right+10,E.bottom+10)),_.push(new i.IntPoint2(E.right+10,E.top-10)),_.push(new i.IntPoint2(E.left-10,E.top-10)),d.AddPath(_,i.PolyType.ptSubject,!0),d.ReverseSolution=!0,d.Execute(i.ClipType.ctUnion,a,i.PolyFillType.pftNegative,i.PolyFillType.pftNegative),a.length>0&&a.splice(0,1)}}},i.ClipperOffset.prototype.OffsetPoint=function(t,r,a){if(this.m_sinA=this.m_normals[r].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[r].Y,Math.abs(this.m_sinA*this.m_delta)<1){var u=this.m_normals[r].X*this.m_normals[t].X+this.m_normals[t].Y*this.m_normals[r].Y;if(u>0)return this.m_destPoly.push(new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[r].X*this.m_delta),i.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[r].Y*this.m_delta))),r}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[r].X*this.m_delta),i.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[r].Y*this.m_delta))),this.m_destPoly.push(new i.IntPoint1(this.m_srcPoly[t])),this.m_destPoly.push(new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),i.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(a){case i.JoinType.jtMiter:{var d=1+(this.m_normals[t].X*this.m_normals[r].X+this.m_normals[t].Y*this.m_normals[r].Y);d>=this.m_miterLim?this.DoMiter(t,r,d):this.DoSquare(t,r);break}case i.JoinType.jtSquare:this.DoSquare(t,r);break;case i.JoinType.jtRound:this.DoRound(t,r);break}return r=t,r},i.ClipperOffset.prototype.DoSquare=function(t,r){var a=Math.tan(Math.atan2(this.m_sinA,this.m_normals[r].X*this.m_normals[t].X+this.m_normals[r].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[r].X-this.m_normals[r].Y*a)),i.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[r].Y+this.m_normals[r].X*a)))),this.m_destPoly.push(new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*a)),i.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*a))))},i.ClipperOffset.prototype.DoMiter=function(t,r,a){var u=this.m_delta/a;this.m_destPoly.push(new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[r].X+this.m_normals[t].X)*u),i.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[r].Y+this.m_normals[t].Y)*u)))},i.ClipperOffset.prototype.DoRound=function(t,r){for(var a=Math.atan2(this.m_sinA,this.m_normals[r].X*this.m_normals[t].X+this.m_normals[r].Y*this.m_normals[t].Y),u=Math.max(i.Cast_Int32(i.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(a))),1),d=this.m_normals[r].X,E=this.m_normals[r].Y,_,b=0;b<u;++b)this.m_destPoly.push(new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[t].X+d*this.m_delta),i.ClipperOffset.Round(this.m_srcPoly[t].Y+E*this.m_delta))),_=d,d=d*this.m_cos-this.m_sin*E,E=_*this.m_sin+E*this.m_cos;this.m_destPoly.push(new i.IntPoint2(i.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),i.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},i.Error=function(t){try{throw new Error(t)}catch(r){alert(r.message)}},i.JS={},i.JS.AreaOfPolygon=function(t,r){return r||(r=1),i.Clipper.Area(t)/(r*r)},i.JS.AreaOfPolygons=function(t,r){r||(r=1);for(var a=0,u=0;u<t.length;u++)a+=i.Clipper.Area(t[u]);return a/(r*r)},i.JS.BoundsOfPath=function(t,r){return i.JS.BoundsOfPaths([t],r)},i.JS.BoundsOfPaths=function(t,r){r||(r=1);var a=i.Clipper.GetBounds(t);return a.left/=r,a.bottom/=r,a.right/=r,a.top/=r,a},i.JS.Clean=function(t,r){if(!(t instanceof Array))return[];var a=t[0]instanceof Array,t=i.JS.Clone(t);if(typeof r!="number"||r===null)return i.Error("Delta is not a number in Clean()."),t;if(t.length===0||t.length===1&&t[0].length===0||r<0)return t;a||(t=[t]);for(var u=t.length,d,E,_,b,F,X,$,J=[],V=0;V<u;V++)if(E=t[V],d=E.length,d!==0){if(d<3){_=E,J.push(_);continue}for(_=E,b=r*r,F=E[0],X=1,$=1;$<d;$++)(E[$].X-F.X)*(E[$].X-F.X)+(E[$].Y-F.Y)*(E[$].Y-F.Y)<=b||(_[X]=E[$],F=E[$],X++);F=E[X-1],(E[0].X-F.X)*(E[0].X-F.X)+(E[0].Y-F.Y)*(E[0].Y-F.Y)<=b&&X--,X<d&&_.splice(X,d-X),_.length&&J.push(_)}return!a&&J.length?J=J[0]:!a&&J.length===0?J=[]:a&&J.length===0&&(J=[[]]),J},i.JS.Clone=function(t){if(!(t instanceof Array))return[];if(t.length===0)return[];if(t.length===1&&t[0].length===0)return[[]];var r=t[0]instanceof Array;r||(t=[t]);var a=t.length,u,d,E,_,b=new Array(a);for(d=0;d<a;d++){for(u=t[d].length,_=new Array(u),E=0;E<u;E++)_[E]={X:t[d][E].X,Y:t[d][E].Y};b[d]=_}return r||(b=b[0]),b},i.JS.Lighten=function(t,r){if(!(t instanceof Array))return[];if(typeof r!="number"||r===null)return i.Error("Tolerance is not a number in Lighten()."),i.JS.Clone(t);if(t.length===0||t.length===1&&t[0].length===0||r<0)return i.JS.Clone(t);var a=t[0]instanceof Array;a||(t=[t]);var u,d,E,_,b,F,X,$,J,V,Q,it,nt,lt,_t,Yt,ne,yo=t.length,xo=r*r,se=[];for(u=0;u<yo;u++)if(E=t[u],F=E.length,F!==0){for(_=0;_<1e6;_++){for(b=[],F=E.length,E[F-1].X!==E[0].X||E[F-1].Y!==E[0].Y?(it=1,E.push({X:E[0].X,Y:E[0].Y}),F=E.length):it=0,Q=[],d=0;d<F-2;d++)X=E[d],J=E[d+1],$=E[d+2],Yt=X.X,ne=X.Y,nt=$.X-Yt,lt=$.Y-ne,(nt!==0||lt!==0)&&(_t=((J.X-Yt)*nt+(J.Y-ne)*lt)/(nt*nt+lt*lt),_t>1?(Yt=$.X,ne=$.Y):_t>0&&(Yt+=nt*_t,ne+=lt*_t)),nt=J.X-Yt,lt=J.Y-ne,V=nt*nt+lt*lt,V<=xo&&(Q[d+1]=1,d++);for(b.push({X:E[0].X,Y:E[0].Y}),d=1;d<F-1;d++)Q[d]||b.push({X:E[d].X,Y:E[d].Y});if(b.push({X:E[F-1].X,Y:E[F-1].Y}),it&&E.pop(),Q.length)E=b;else break}F=b.length,b[F-1].X===b[0].X&&b[F-1].Y===b[0].Y&&b.pop(),b.length>2&&se.push(b)}return a||(se=se[0]),typeof se=="undefined"&&(se=[]),se},i.JS.PerimeterOfPath=function(t,r,a){if(typeof t=="undefined")return 0;var u=Math.sqrt,d=0,E,_,b=0,F=0,X=0,$=0,J=t.length;if(J<2)return 0;for(r&&(t[J]=t[0],J++);--J;)E=t[J],b=E.X,F=E.Y,_=t[J-1],X=_.X,$=_.Y,d+=u((b-X)*(b-X)+(F-$)*(F-$));return r&&t.pop(),d/a},i.JS.PerimeterOfPaths=function(t,r,a){a||(a=1);for(var u=0,d=0;d<t.length;d++)u+=i.JS.PerimeterOfPath(t[d],r,a);return u},i.JS.ScaleDownPath=function(t,r){var a,u;for(r||(r=1),a=t.length;a--;)u=t[a],u.X=u.X/r,u.Y=u.Y/r},i.JS.ScaleDownPaths=function(t,r){var a,u,d;for(r||(r=1),a=t.length;a--;)for(u=t[a].length;u--;)d=t[a][u],d.X=d.X/r,d.Y=d.Y/r},i.JS.ScaleUpPath=function(t,r){var a,u,d=Math.round;for(r||(r=1),a=t.length;a--;)u=t[a],u.X=d(u.X*r),u.Y=d(u.Y*r)},i.JS.ScaleUpPaths=function(t,r){var a,u,d,E=Math.round;for(r||(r=1),a=t.length;a--;)for(u=t[a].length;u--;)d=t[a][u],d.X=E(d.X*r),d.Y=E(d.Y*r)},i.ExPolygons=function(){return[]},i.ExPolygon=function(){this.outer=null,this.holes=null},i.JS.AddOuterPolyNodeToExPolygons=function(t,r){var a=new i.ExPolygon;a.outer=t.Contour();var u=t.Childs(),d=u.length;a.holes=new Array(d);var E,_,b,F,X,$;for(b=0;b<d;b++)for(E=u[b],a.holes[b]=E.Contour(),F=0,X=E.Childs(),$=X.length;F<$;F++)_=X[F],i.JS.AddOuterPolyNodeToExPolygons(_,r);r.push(a)},i.JS.ExPolygonsToPaths=function(t){var r,a,u,d,E=new i.Paths;for(r=0,u=t.length;r<u;r++)for(E.push(t[r].outer),a=0,d=t[r].holes.length;a<d;a++)E.push(t[r].holes[a]);return E},i.JS.PolyTreeToExPolygons=function(t){var r=new i.ExPolygons,a,u,d,E;for(u=0,d=t.Childs(),E=d.length;u<E;u++)a=d[u],i.JS.AddOuterPolyNodeToExPolygons(a,r);return r}})()}),s("default",n),s("__esModule",o=!0)}}});me.register("-/clipper-js@v1.0.2-Mou0diNPTgyilhisGDlW/dist=es2020/clipper-js",["-/clipper-lib@v6.4.2-JisZmmhC7gDAFmHQLYDu/dist=es2020/clipper-lib"],function(s,e){"use strict";var n,o,h,l,f=e&&e.id;function m(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}function i(A,S,x){return x={path:S,exports:{},require:function(w,y){return D(w,y==null?x.path:y)}},A(x,x.exports),x.exports}function D(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}return{setters:[function(A){n=A}],execute:function(){o=i(function(A,S){Object.defineProperty(S,"__esModule",{value:!0}),S.setErrorCallback=void 0;var x=function(){function B(M,N){for(var U=0;U<N.length;U++){var H=N[U];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(M,H.key,H)}}return function(M,N,U){return N&&B(M.prototype,N),U&&B(M,U),M}}(),w=y(n.default);function y(B){return B&&B.__esModule?B:{default:B}}function c(B){if(Array.isArray(B)){for(var M=0,N=Array(B.length);M<B.length;M++)N[M]=B[M];return N}else return Array.from(B)}function p(B,M){if(!(B instanceof M))throw new TypeError("Cannot call a class as a function")}var v=void 0,C=S.setErrorCallback=function(M){v=M};w.default.Error=function(B){v&&v(B)};var I=new w.default.Clipper,T=new w.default.ClipperOffset,L=function(){function B(){var M=arguments.length<=0||arguments[0]===void 0?[]:arguments[0],N=arguments.length<=1||arguments[1]===void 0?!0:arguments[1],U=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],H=arguments.length<=3||arguments[3]===void 0?!1:arguments[3],G=arguments.length<=4||arguments[4]===void 0?!1:arguments[4];p(this,B),this.paths=M,U&&(this.paths=this.paths.map(z)),H&&(this.paths=this.paths.map(Z)),G&&(this.paths=this.paths.map(P)),this.closed=N}return x(B,[{key:"_clip",value:function(N,U){var H=new w.default.PolyTree;I.Clear(),I.AddPaths(this.paths,w.default.PolyType.ptSubject,this.closed),I.AddPaths(N.paths,w.default.PolyType.ptClip,N.closed),I.Execute(U,H);var G=w.default.Clipper.PolyTreeToPaths(H);return new B(G,this.closed)}},{key:"union",value:function(N){return this._clip(N,w.default.ClipType.ctUnion)}},{key:"difference",value:function(N){return this._clip(N,w.default.ClipType.ctDifference)}},{key:"intersect",value:function(N){return this._clip(N,w.default.ClipType.ctIntersection)}},{key:"xor",value:function(N){return this._clip(N,w.default.ClipType.ctXor)}},{key:"offset",value:function(N){var U=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],H=U.jointType,G=H===void 0?"jtSquare":H,K=U.endType,ot=K===void 0?"etClosedPolygon":K,ut=U.miterLimit,pt=ut===void 0?2:ut,ft=U.roundPrecision,ht=ft===void 0?.25:ft;T.Clear(),T.ArcTolerance=ht,T.MiterLimit=pt;var ct=new w.default.Paths;return T.AddPaths(this.paths,w.default.JoinType[G],w.default.EndType[ot]),T.Execute(ct,N),new B(ct,!0)}},{key:"scaleUp",value:function(N){return w.default.JS.ScaleUpPaths(this.paths,N),this}},{key:"scaleDown",value:function(N){return w.default.JS.ScaleDownPaths(this.paths,N),this}},{key:"firstPoint",value:function(){var N=arguments.length<=0||arguments[0]===void 0?!1:arguments[0];if(this.paths.length!==0){var U=this.paths[0],H=U[0];return N?j(H):H}}},{key:"lastPoint",value:function(){var N=arguments.length<=0||arguments[0]===void 0?!1:arguments[0];if(this.paths.length!==0){var U=this.paths[this.paths.length-1],H=this.closed?U[0]:U[U.length-1];return N?j(H):H}}},{key:"areas",value:function(){var N=this,U=this.paths.map(function(H,G){return N.area(G)});return U}},{key:"area",value:function(N){var U=this.paths[N],H=w.default.Clipper.Area(U);return H}},{key:"totalArea",value:function(){return this.areas().reduce(function(N,U){return N+U},0)}},{key:"perimeter",value:function(N){var U=this.paths[N],H=w.default.JS.PerimeterOfPath(U,this.closed,1);return H}},{key:"perimeters",value:function(){var N=this;return this.paths.map(function(U){return w.default.JS.PerimeterOfPath(U,N.closed,1)})}},{key:"totalPerimeter",value:function(){var N=w.default.JS.PerimeterOfPaths(this.paths,this.closed);return N}},{key:"reverse",value:function(){return w.default.Clipper.ReversePaths(this.paths),this}},{key:"thresholdArea",value:function(N){for(var U=[].concat(c(this.paths)),H=0;H<U.length;H++){var G=U[H],K=Math.abs(w.default.Clipper.Area(shape));if(K<N){var ot=this.paths.indexOf(G);this.splice(ot,1)}}}},{key:"join",value:function(N){var U;return(U=this.paths).splice.apply(U,[this.paths.length,0].concat(c(N.paths))),this}},{key:"clone",value:function(){return new B(w.default.JS.Clone(this.paths),this.closed)}},{key:"shapeBounds",value:function(){var N=w.default.JS.BoundsOfPaths(this.paths);return N.width=N.right-N.left,N.height=N.bottom-N.top,N.size=N.width*N.height,N}},{key:"pathBounds",value:function(N){var U=this.paths[N],H=w.default.JS.BoundsOfPath(U);return H.width=H.right-H.left,H.height=H.bottom-H.top,H.size=H.width*H.height,H}},{key:"clean",value:function(N){return new B(w.default.Clipper.CleanPolygons(this.paths,N),this.closed)}},{key:"orientation",value:function(N){var U=this.paths[N];return w.default.Clipper.Orientation(U)}},{key:"pointInShape",value:function(N){var U=arguments.length<=1||arguments[1]===void 0?!1:arguments[1],H=arguments.length<=2||arguments[2]===void 0?!1:arguments[2];U&&(N=q(N)),H&&(N=k(N));for(var G=0;G<this.paths.length;G++){var K=this.pointInPath(G,N),ot=this.orientation(G);if(!K&&ot||K&&!ot)return!1}return!0}},{key:"pointInPath",value:function(N,U){var H=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],G=arguments.length<=3||arguments[3]===void 0?!1:arguments[3];H&&(U=q(U)),G&&(U=k(U));var K=this.paths[N],ot={X:Math.round(U.X),Y:Math.round(U.Y)};return w.default.Clipper.PointInPolygon(ot,K)>0}},{key:"fixOrientation",value:function(){return this.closed?(this.totalArea()<0&&this.reverse(),this):this}},{key:"removeOverlap",value:function(){console.warn("Shape.removeOverlap is being depricated, use Shape.simplify('pftNonZero') instead"),this.simplify("pftNonZero")}},{key:"simplify",value:function(N){if(this.closed){var U=w.default.Clipper.SimplifyPolygons(this.paths,w.default.PolyFillType[N]);return new B(U,!0)}else return this}},{key:"seperateShapes",value:function(){var N=this,U=[];if(this.closed)(function(){for(var ft=new WeakMap,ht=[],ct=[],St=0;St<N.paths.length;St++){var Tt=N.paths[St],yt=N.orientation(St);if(yt){var gt=N.area(St);ft.set(Tt,gt),ht.push(Tt)}else ct.push(Tt)}ht.sort(function(Kt,Ee){return ft.get(Kt)-ft.get(Ee)});var mt=!0,Ft=!1,It=void 0;try{for(var bt=ht[Symbol.iterator](),Et;!(mt=(Et=bt.next()).done);mt=!0){for(var At=Et.value,xt=[At],Ot=N.paths.indexOf(At),ie=[].concat(ct),Gt=0;Gt<ie.length;Gt++){var Zt=ie[Gt],Ce=N.pointInPath(Ot,Zt[0]);if(Ce){xt.push(Zt);var De=ct.indexOf(Zt);ct.splice(De,1)}}U.push(new B(xt,!0))}}catch(Kt){Ft=!0,It=Kt}finally{try{!mt&&bt.return&&bt.return()}finally{if(Ft)throw It}}})();else{var H=!0,G=!1,K=void 0;try{for(var ot=this.paths[Symbol.iterator](),ut;!(H=(ut=ot.next()).done);H=!0){var pt=ut.value;U.push(new B([pt],!1))}}catch(ft){G=!0,K=ft}finally{try{!H&&ot.return&&ot.return()}finally{if(G)throw K}}}return U}},{key:"round",value:function(){return new B(this.paths.map(Z),this.closed)}},{key:"removeDuplicates",value:function(){return new B(this.paths.map(P),this.closed)}},{key:"mapToLower",value:function(){return this.paths.map(Y)}}]),B}();S.default=L;function Y(B){return B.map(j)}function j(B){var M=B.X,N=B.Y;return{x:M,y:N}}function z(B){return B.map(q)}function q(B){var M=B.x,N=B.y;return{X:M,Y:N}}function Z(B){return B.map(k)}function k(B){var M=B.X,N=B.Y;return{X:Math.round(M),Y:Math.round(N)}}function P(B){return B.filter(g)}function g(B,M,N){if(M===0)return!0;var U=N[M-1];return!(B.X===U.X&&B.Y===U.Y)}}),h=m(o),s("default",h),s("__esModule",l=!0)}}});me.register("clipper-js",["-/clipper-js@v1.0.2-Mou0diNPTgyilhisGDlW/dist=es2020/clipper-js"],function(s,e){"use strict";var n=e&&e.id,o={default:!0};function h(l){var f={};for(var m in l)m!=="default"&&!o.hasOwnProperty(m)&&(f[m]=l[m]);s(f)}return{setters:[function(l){h(l),s({default:l.default})}],execute:function(){}}});var va=je("clipper-js"),wi=va.default,Ue={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},Hr=function(s){this._string=s,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()};Hr.prototype={parseSegment:function(){var s=this._string[this._currentIndex],e=Ue[s]?Ue[s]:null;if(e===null){if(this._prevCommand===null||((s==="+"||s==="-"||s==="."||s>="0"&&s<="9")&&this._prevCommand!=="Z"?this._prevCommand==="M"?e="L":this._prevCommand==="m"?e="l":e=this._prevCommand:e=null,e===null))return null}else this._currentIndex+=1;this._prevCommand=e;var n=null,o=e.toUpperCase();return o==="H"||o==="V"?n=[this._parseNumber()]:o==="M"||o==="L"||o==="T"?n=[this._parseNumber(),this._parseNumber()]:o==="S"||o==="Q"?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:o==="C"?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:o==="A"?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:o==="Z"&&(this._skipOptionalSpaces(),n=[]),n===null||n.indexOf(null)>=0?null:{type:e,values:n}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var s=this._string[this._currentIndex];return Ue[s]?Ue[s]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var s=this.peekSegmentType();return s==="M"||s==="m"},_isCurrentSpace:function(){var s=this._string[this._currentIndex];return s<=" "&&(s===" "||s===`
`||s==="	"||s==="\r"||s==="\f")},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string[this._currentIndex]!==","?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string[this._currentIndex]===","&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var s=0,e=0,n=1,o=0,h=1,l=1,f=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,h=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")&&this._string[this._currentIndex]!==".")return null;for(var m=this._currentIndex;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==m)for(var i=this._currentIndex-1,D=1;i>=m;)e+=D*(this._string[i]-"0"),i-=1,D*=10;if(this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="."){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)n*=10,o+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!==f&&this._currentIndex+1<this._endIndex&&(this._string[this._currentIndex]==="e"||this._string[this._currentIndex]==="E")&&this._string[this._currentIndex+1]!=="x"&&this._string[this._currentIndex+1]!=="m"){if(this._currentIndex+=1,this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,l=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)s*=10,s+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var A=e+o;return A*=h,s&&(A*=Math.pow(10,l*s)),f===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),A)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var s=null,e=this._string[this._currentIndex];if(this._currentIndex+=1,e==="0")s=0;else if(e==="1")s=1;else return null;return this._skipOptionalSpacesOrDelimiter(),s}};var qr=function(s){if(!s||s.length===0)return[];var e=new Hr(s),n=[];if(e.initialCommandIsMoveTo())for(;e.hasMoreData();){var o=e.parseSegment();if(o===null)break;n.push(o)}return n},ve=typeof Symbol!="undefined"?Symbol():"__cachedPathData",Si=typeof Symbol!="undefined"?Symbol():"__cachedNormalizedPathData",Vr=function(s,e,n,o,h,l,f,m,i,D){var A=function(mt){return Math.PI*mt/180},S=function(mt,Ft,It){var bt=mt*Math.cos(It)-Ft*Math.sin(It),Et=mt*Math.sin(It)+Ft*Math.cos(It);return{x:bt,y:Et}},x=A(f),w=[],y,c,p,v;if(D)y=D[0],c=D[1],p=D[2],v=D[3];else{var C=S(s,e,-x);s=C.x,e=C.y;var I=S(n,o,-x);n=I.x,o=I.y;var T=(s-n)/2,L=(e-o)/2,Y=T*T/(h*h)+L*L/(l*l);Y>1&&(Y=Math.sqrt(Y),h=Y*h,l=Y*l);var j;m===i?j=-1:j=1;var z=h*h,q=l*l,Z=z*q-z*L*L-q*T*T,k=z*L*L+q*T*T,P=j*Math.sqrt(Math.abs(Z/k));p=P*h*L/l+(s+n)/2,v=P*-l*T/h+(e+o)/2,y=Math.asin(parseFloat(((e-v)/l).toFixed(9))),c=Math.asin(parseFloat(((o-v)/l).toFixed(9))),s<p&&(y=Math.PI-y),n<p&&(c=Math.PI-c),y<0&&(y=Math.PI*2+y),c<0&&(c=Math.PI*2+c),i&&y>c&&(y=y-Math.PI*2),!i&&c>y&&(c=c-Math.PI*2)}var g=c-y;if(Math.abs(g)>Math.PI*120/180){var B=c,M=n,N=o;i&&c>y?c=y+Math.PI*120/180*1:c=y+Math.PI*120/180*-1,n=p+h*Math.cos(c),o=v+l*Math.sin(c),w=Vr(n,o,M,N,h,l,f,0,i,[c,B,p,v])}g=c-y;var U=Math.cos(y),H=Math.sin(y),G=Math.cos(c),K=Math.sin(c),ot=Math.tan(g/4),ut=4/3*h*ot,pt=4/3*l*ot,ft=[s,e],ht=[s+ut*H,e-pt*U],ct=[n+ut*K,o-pt*G],St=[n,o];if(ht[0]=2*ft[0]-ht[0],ht[1]=2*ft[1]-ht[1],D)return[ht,ct,St].concat(w);w=[ht,ct,St].concat(w);for(var Tt=[],yt=0;yt<w.length;yt+=3){var h=S(w[yt][0],w[yt][1],x),l=S(w[yt+1][0],w[yt+1][1],x),gt=S(w[yt+2][0],w[yt+2][1],x);Tt.push([h.x,h.y,l.x,l.y,gt.x,gt.y])}return Tt},ye=function(s){return s.map(function(e){return{type:e.type,values:Array.prototype.slice.call(e.values)}})},ya=function(s){var e=[],n=null,o=null,h=null,l=null;return s.forEach(function(f){var m=f.type;if(m==="M"){var i=f.values[0],D=f.values[1];e.push({type:"M",values:[i,D]}),h=i,l=D,n=i,o=D}else if(m==="m"){var i=n+f.values[0],D=o+f.values[1];e.push({type:"M",values:[i,D]}),h=i,l=D,n=i,o=D}else if(m==="L"){var i=f.values[0],D=f.values[1];e.push({type:"L",values:[i,D]}),n=i,o=D}else if(m==="l"){var i=n+f.values[0],D=o+f.values[1];e.push({type:"L",values:[i,D]}),n=i,o=D}else if(m==="C"){var A=f.values[0],S=f.values[1],x=f.values[2],w=f.values[3],i=f.values[4],D=f.values[5];e.push({type:"C",values:[A,S,x,w,i,D]}),n=i,o=D}else if(m==="c"){var A=n+f.values[0],S=o+f.values[1],x=n+f.values[2],w=o+f.values[3],i=n+f.values[4],D=o+f.values[5];e.push({type:"C",values:[A,S,x,w,i,D]}),n=i,o=D}else if(m==="Q"){var A=f.values[0],S=f.values[1],i=f.values[2],D=f.values[3];e.push({type:"Q",values:[A,S,i,D]}),n=i,o=D}else if(m==="q"){var A=n+f.values[0],S=o+f.values[1],i=n+f.values[2],D=o+f.values[3];e.push({type:"Q",values:[A,S,i,D]}),n=i,o=D}else if(m==="A"){var i=f.values[5],D=f.values[6];e.push({type:"A",values:[f.values[0],f.values[1],f.values[2],f.values[3],f.values[4],i,D]}),n=i,o=D}else if(m==="a"){var i=n+f.values[5],D=o+f.values[6];e.push({type:"A",values:[f.values[0],f.values[1],f.values[2],f.values[3],f.values[4],i,D]}),n=i,o=D}else if(m==="H"){var i=f.values[0];e.push({type:"H",values:[i]}),n=i}else if(m==="h"){var i=n+f.values[0];e.push({type:"H",values:[i]}),n=i}else if(m==="V"){var D=f.values[0];e.push({type:"V",values:[D]}),o=D}else if(m==="v"){var D=o+f.values[0];e.push({type:"V",values:[D]}),o=D}else if(m==="S"){var x=f.values[0],w=f.values[1],i=f.values[2],D=f.values[3];e.push({type:"S",values:[x,w,i,D]}),n=i,o=D}else if(m==="s"){var x=n+f.values[0],w=o+f.values[1],i=n+f.values[2],D=o+f.values[3];e.push({type:"S",values:[x,w,i,D]}),n=i,o=D}else if(m==="T"){var i=f.values[0],D=f.values[1];e.push({type:"T",values:[i,D]}),n=i,o=D}else if(m==="t"){var i=n+f.values[0],D=o+f.values[1];e.push({type:"T",values:[i,D]}),n=i,o=D}else(m==="Z"||m==="z")&&(e.push({type:"Z",values:[]}),n=h,o=l)}),e},Je=function(s){var e=[],n=null,o=null,h=null,l=null,f=null,m=null,i=null;return s.forEach(function(D){if(D.type==="M"){var A=D.values[0],S=D.values[1];e.push({type:"M",values:[A,S]}),m=A,i=S,l=A,f=S}else if(D.type==="C"){var x=D.values[0],w=D.values[1],y=D.values[2],c=D.values[3],A=D.values[4],S=D.values[5];e.push({type:"C",values:[x,w,y,c,A,S]}),o=y,h=c,l=A,f=S}else if(D.type==="L"){var A=D.values[0],S=D.values[1];e.push({type:"L",values:[A,S]}),l=A,f=S}else if(D.type==="H"){var A=D.values[0];e.push({type:"L",values:[A,f]}),l=A}else if(D.type==="V"){var S=D.values[0];e.push({type:"L",values:[l,S]}),f=S}else if(D.type==="S"){var y=D.values[0],c=D.values[1],A=D.values[2],S=D.values[3],p,v;n==="C"||n==="S"?(p=l+(l-o),v=f+(f-h)):(p=l,v=f),e.push({type:"C",values:[p,v,y,c,A,S]}),o=y,h=c,l=A,f=S}else if(D.type==="T"){var A=D.values[0],S=D.values[1],x,w;n==="Q"||n==="T"?(x=l+(l-o),w=f+(f-h)):(x=l,w=f);var p=l+2*(x-l)/3,v=f+2*(w-f)/3,C=A+2*(x-A)/3,I=S+2*(w-S)/3;e.push({type:"C",values:[p,v,C,I,A,S]}),o=x,h=w,l=A,f=S}else if(D.type==="Q"){var x=D.values[0],w=D.values[1],A=D.values[2],S=D.values[3],p=l+2*(x-l)/3,v=f+2*(w-f)/3,C=A+2*(x-A)/3,I=S+2*(w-S)/3;e.push({type:"C",values:[p,v,C,I,A,S]}),o=x,h=w,l=A,f=S}else if(D.type==="A"){var T=Math.abs(D.values[0]),L=Math.abs(D.values[1]),Y=D.values[2],j=D.values[3],z=D.values[4],A=D.values[5],S=D.values[6];if(T===0||L===0)e.push({type:"C",values:[l,f,A,S,A,S]}),l=A,f=S;else if(l!==A||f!==S){var q=Vr(l,f,A,S,T,L,Y,j,z);q.forEach(function(P){e.push({type:"C",values:P})}),l=A,f=S}}else D.type==="Z"&&(e.push(D),l=m,f=i);n=D.type}),e},dt=(s,e)=>e in s&&"baseVal"in s[e]?s[e].baseVal.value:+s.getAttribute(e),xa=function(s){if(s&&s.normalize){if(this[Si])return ye(this[Si]);var e;this[ve]?e=ye(this[ve]):(e=qr(this.getAttribute("d")||""),this[ve]=ye(e));var n=Je(ya(e));return this[Si]=ye(n),n}else{if(this[ve])return ye(this[ve]);var e=qr(this.getAttribute("d")||"");return this[ve]=ye(e),e}},ga=function(s){var e=dt(this,"x"),n=dt(this,"y"),o=dt(this,"width"),h=dt(this,"height"),l=this.hasAttribute("rx")?dt(this,"rx"):dt(this,"ry"),f=this.hasAttribute("ry")?dt(this,"ry"):dt(this,"rx");l>o/2&&(l=o/2),f>h/2&&(f=h/2);var m=[{type:"M",values:[e+l,n]},{type:"H",values:[e+o-l]},{type:"A",values:[l,f,0,0,1,e+o,n+f]},{type:"V",values:[n+h-f]},{type:"A",values:[l,f,0,0,1,e+o-l,n+h]},{type:"H",values:[e+l]},{type:"A",values:[l,f,0,0,1,e,n+h-f]},{type:"V",values:[n+f]},{type:"A",values:[l,f,0,0,1,e+l,n]},{type:"Z",values:[]}];return m=m.filter(function(i){return!(i.type==="A"&&(i.values[0]===0||i.values[1]===0))}),s&&s.normalize===!0&&(m=Je(m)),m},Ca=function(s){var e=dt(this,"cx"),n=dt(this,"cy"),o=dt(this,"r"),h=[{type:"M",values:[e+o,n]},{type:"A",values:[o,o,0,0,1,e,n+o]},{type:"A",values:[o,o,0,0,1,e-o,n]},{type:"A",values:[o,o,0,0,1,e,n-o]},{type:"A",values:[o,o,0,0,1,e+o,n]},{type:"Z",values:[]}];return s&&s.normalize===!0&&(h=Je(h)),h},Da=function(s){var e=dt(this,"cx"),n=dt(this,"cy"),o=dt(this,"rx"),h=dt(this,"ry"),l=[{type:"M",values:[e+o,n]},{type:"A",values:[o,h,0,0,1,e,n+h]},{type:"A",values:[o,h,0,0,1,e-o,n]},{type:"A",values:[o,h,0,0,1,e,n-h]},{type:"A",values:[o,h,0,0,1,e+o,n]},{type:"Z",values:[]}];return s&&s.normalize===!0&&(l=Je(l)),l},Ea=function(){let s=dt(this,"x1"),e=dt(this,"x2"),n=dt(this,"y1"),o=dt(this,"y2");return[{type:"M",values:[s,n]},{type:"L",values:[e,o]}]},Pa=function(){for(var s=[],e=0;e<this.points.numberOfItems;e+=1){var n=this.points.getItem(e);s.push({type:e===0?"M":"L",values:[n.x,n.y]})}return s},wa=function(){for(var s=[],e=0;e<this.points.numberOfItems;e+=1){var n=this.points.getItem(e);s.push({type:e===0?"M":"L",values:[n.x,n.y]})}return s.push({type:"Z",values:[]}),s},Gr={circle:Ca,ellipse:Da,path:xa,polygon:wa,polyline:Pa,line:Ea,rect:ga};function Sa(s,e){let n=s.nodeName.toLowerCase();if(n in Gr)return Gr[n].call(s,e);throw new Error(`Unsupported SVG element type: '${n}'`)}function Aa([s,e,n,o,h,l,f,m],i){let D=3*n-2*s-f,A=3*o-2*e-m,S=3*h-2*f-s,x=3*l-2*m-e;return Math.max(D*D,S*S)+Math.max(A*A,x*x)<=16*i*i}function _a([s,e,n,o,h,l,f,m],i){i===void 0&&(i=.5);let D=1-i,A=D*s+i*n,S=D*e+i*o,x=D*n+i*h,w=D*o+i*l,y=D*h+i*f,c=D*l+i*m,p=D*A+i*x,v=D*S+i*w,C=D*x+i*y,I=D*w+i*c,T=D*p+i*C,L=D*v+i*I;return[[s,e,A,S,p,v,T,L],[T,L,C,I,y,c,f,m]]}function Ia(s,e,n=32){let o=1/n,h=[];function l(f,m,i){if(i-m>o&&!Aa(f,e)){let D=_a(f,.5),A=(m+i)/2;l(D[0],m,A),l(D[1],A,i)}else{let D=f[6]-f[0],A=f[7]-f[1];Math.sqrt(D*D+A*A)>0&&h.push(f)}}return l(s,0,1),h}function Ta(s,e={}){let n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",s);let{maxError:o=.1}=e,h=[],l=([D,A])=>[D,A],f=Sa(n,{normalize:!0}),m=null,i=null;for(let D of f)if(D.type==="M")m=l(D.values),i=m,h.push({points:[m]});else if(D.type==="L")m=l(D.values),h[h.length-1].points.push(m);else if(D.type==="C"){let[A,S,x,w,y,c]=D.values,[p,v]=m,[C,I]=l([A,S]),[T,L]=l([x,w]),[Y,j]=l([y,c]),z=Ia([p,v,C,I,T,L,Y,j],o);for(let q of z)h[h.length-1].points.push([q[6],q[7]]);m=[Y,j]}else if(D.type==="A"){let[A,S,x,w,y,c,p]=D.values,v=x,C=y,I=w,{cos:T,sin:L,atan2:Y,sqrt:j,sign:z,acos:q,abs:Z,ceil:k}=Math,P=(m[0]-c)/2,g=(m[1]-p)/2,B=T(v)*P+L(v)*g,M=-L(v)*P+T(v)*g,N=B*B,U=M*M,H=N/(A*A)+U/(S*S),G=H<=1?j(H)*A:A,K=H<=1?j(H)*S:S,ot=G*G,ut=K*K,pt=(ot*ut-ot*U-ut*N)/(ot*U+ut*N);if(Z(pt)<1e-4&&(pt=0),pt<0)throw new Error(`bad arc args ${pt}`);let ft=(I===C?-1:1)*j(pt),ht=ft*G*M/K,ct=ft*-K*B/G,St=T(v)*ht-L(v)*ct+(m[0]+c)/2,Tt=L(v)*ht+T(v)*ct+(m[1]+p)/2,yt=(Et,At,xt,Ot)=>Y(Et*Ot-At*xt,Et*xt+At*Ot),gt=yt(1,0,(B-ht)/G,(M-ct)/K),mt=yt((B-ht)/G,(M-ct)/K,(-B-ht)/G,(-M-ct)/K)%(Math.PI*2),Ft=C===0&&mt>0?mt-Math.PI*2:C===1&&mt<0?mt+Math.PI*2:mt,It=o,bt=k(Z(Ft)/q(1-It/G));for(let Et=1;Et<=bt;Et++){let At=gt+Ft*Et/bt,xt=T(v)*G*T(At)-L(v)*K*L(At)+St,Ot=L(v)*G*T(At)+T(v)*K*L(At)+Tt;h[h.length-1].points.push([xt,Ot])}m=[c,p]}else if(D.type==="Z")i&&(m[0]!==i[0]||m[1]!==i[1])&&h[h.length-1].points.push(i);else throw Error(`Unexpected path command: "${D}"`);return h}var Mt=s=>Array.isArray(s)?{x:s[0],y:s[1]}:s;function Fa(s){return new st(JSON.parse(JSON.stringify({angle:s.angle,path:s.path})))}function ba(){return[{points:[{x:0,y:0}],fillColor:"none",strokeWidth:1,strokeColor:"black",construction:!1,dashed:0,linecap:"butt",linejoin:"mitre"}]}function Ba(s,e,n){let{x:o,y:h}=e,{x:l,y:f}=s,m=l-o,i=f-h;return n.path=n.pointMap(D=>({x:D.x+m,y:D.y+i})),n}function ka(s,e,n){return e||(e=n.centroid),n.path=n.pointMap(o=>{let h=s*2*Math.PI/360,l=o.x-e.x,f=o.y-e.y;return{x:l*Math.cos(h)-f*Math.sin(h)+e.x,y:f*Math.cos(h)+l*Math.sin(h)+e.y}}),n.angle=n.angle+s,n}function Na([s,e],n,o){let{x:h,y:l}=n;return o.path=o.pointMap(f=>({x:(f.x-h)*s+h,y:(f.y-l)*e+l})),o.alignHead(),o}function Ai(s,e,n){let o=n.end,{x:h,y:l}=s;return n.addPoint({x:h,y:l},e),n.angle=Math.atan2(o.y-l,o.x-h)*180/Math.PI+180,n}function _i(s,e){return e.angle=s,e}function La(s){return s.path=s.path.map(e=>({...e,points:e.points.reverse()})),s.alignHead(),s}function Ma(s,e){let n=Object.values(s.paths).map(o=>(o=o.map(({X:l,Y:f})=>({x:l/e.booleanScale,y:f/e.booleanScale})),{points:[...o,o[0]],fillColor:"none",strokeWidth:1,strokeColor:"black",construction:!1}));return e.path=n,e}function Ii(s){let e=[];return s.forEach(n=>{Array.isArray(n)?e.push(...Ii(n)):e.push(n)}),e}function Xa(s){return s.pathMap(e=>e.construction=!0),s}function Oa(s){let e=s.path;for(;Array.isArray(e);)e=e[e.length-1];return e}function Ya(s){return Zr(s.path)}function Kr(s,e){return e.lastPath().points.slice(-1-s)[0]}function Qr(s,e){return e.firstPath().points[s]}function tn(s){let e=[];return s.forEach(n=>{Array.isArray(n)?e.push(...tn(n)):e.push(n)}),e}function Ra(s,e,n){let o=n.lastPath(),h=o.points;return e?h.push(s):h.length===1?o.points=[s]:n.path.push({points:[s],fillColor:"none",strokeWidth:1,strokeColor:"black",construction:!1,linecap:"butt",linejoin:"mitre"}),n}function ja(s,e){return e.path.map(n=>en(n,s))}function Ua(s,e){return e.pathMap(n=>({...n,points:n.points.map(s)}))}function Ja(s,e){return e.pathMap(n=>({...n,points:n.points.filter(s)}))}function Ti(s){let e;if(s.points.length>1){let n=s.pointsFromLast(0),o=s.pointsFromLast(1),h=n.x-o.x,l=n.y-o.y;e=Math.atan2(l,h)*180/Math.PI}else e=0;return e}function Fi(s){return s.angle=s.lastAngle(),s}function $a(s){let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;return s.points.forEach(l=>{e>l.x&&(e=l.x),n<l.x&&(n=l.x),o>l.y&&(o=l.y),h<l.y&&(h=l.y)}),{xMin:e,xMax:n,yMin:o,yMax:h}}function za(s){let{xMin:e,xMax:n}=s.extrema();return Math.abs(e-n)}function Wa(s){let{yMin:e,yMax:n}=s.extrema();return Math.abs(e-n)}function bi(s,e){return e.pathMap(n=>n.fillColor=s),e}function Ha(s){for(var e=0,n=0;n<s.length;n++){let o=(n+1)%s.length;e+=s[n].x*s[o].y,e-=s[o].x*s[n].y}return e/2}function Bi(s,e){return e.pathMap(n=>n.strokeWidth=s),e}function ki(s,e){return e.pathMap(n=>n.strokeColor=s),e}function Ni(s,e){if(!["round","butt","square"].includes(s))throw"Unrecognized type: "+s;return e.pathMap(o=>o.linecap=s),e}function Li(s,e){if(!["round","mitre","bevel"].includes(s))throw"Unrecognized type: "+s;return e.pathMap(o=>o.linejoin=s),e}function Mi(s,e){let n=e.angle+s%360;return e.angle=n,e}var rn=s=>s/360*2*Math.PI;function Xi(s,e,n){return n.turn(s),n.forward(e),n}function Oi(s){return s.addPoint({...s.start}),s.alignHead(),s}function Nt(s,e){if(s==="start")return e.pointsFromFirst(0);if(s==="end")return e.pointsFromLast(0);let{xMax:n,xMin:o,yMax:h,yMin:l}=e.extrema(),f=(n+o)/2,m=(h+l)/2;if(s==="center"||s==="center center"||s==="cc")return{x:f,y:m};if(s==="min"||s==="left bottom"||s==="lb")return{x:o,y:l};if(s==="max"||s==="right top"||s==="rt")return{x:n,y:h};if(s==="min center"||s==="left center"||s==="lc")return{x:o,y:m};if(s==="min max"||s==="left top"||s==="lt")return{x:o,y:h};if(s==="center min"||s==="center bottom"||s==="cb")return{x:f,y:l};if(s==="center max"||s==="center top"||s==="ct")return{x:f,y:h};if(s==="max min"||s==="right bottom"||s==="rb")return{x:n,y:l};if(s==="max center"||s==="right center"||s==="rc")return{x:n,y:m};throw'"'+s+'" is not an origin point. "right" or "left" come first then "bottom" or "top"'}function $e(s,e,n,o){let h=(D,A)=>2*D*Math.sin(A*Math.PI/360),l=(D,A,S)=>{let x=Math.cos(D*Math.PI/180),w=Math.sin(D*Math.PI/180),y=A.x+S*x,c=A.y+S*w;return{x:y,y:c}};s<0&&(e=-e);let f=o.end,m=o.angle,i=Math.abs(Math.floor(s/2));return[...Array(i).keys()].forEach(D=>{let A=180-(360-s/i*(D+1))/2+m,{x:S,y:x}=l(A,f,h(e,s/i*(D+1)));o.goTo({x:S,y:x},n)}),o.setAngle(s+m),o}function qa(s,e){let n=e.point("cc"),o,h;return e.path=e.pointMap(l=>(o=Math.abs(n.x-l.x),h=Math.abs(n.y-l.y),s.includes("y")&&(l.x=l.x<n.x?l.x+2*o:l.x-2*o),s.includes("x")&&(l.y=l.y<n.y?l.y+2*h:l.y-2*h),l)),e}function Va(s,e){let n=e.copy(),o=n.start,h=e.angle,l,f;for(let m=0;m<s;m++)l=n.copy(),f=e.end,l.translate([f.x-o.x,f.y-o.y]),l.rotate(h*(m+1),l.start),l.points.forEach((i,D)=>{D!==0&&e.addPoint(i)});return e.angle=h*(s+1),e}function Ga(s){let e=s.copy();e.reverse(),e.flip("y");let{x:n,y:o}=s.end;return e.translate({x:n,y:o},e.start),e.rotate(s.angle*2,e.start),e.points.forEach((h,l)=>{l>0&&s.addPoint(h)}),s.alignHead(),s}var nn=(s,e)=>Math.sqrt((s.x-e.x)**2+(s.y-e.y)**2);function Yi(s,e,n){let{x:o,y:h}=s,l=n.angle,f=n.end,m=Math.tan(l*Math.PI/180),i=f.y-m*f.x;if(e==="x"){let D=(h-i)/m;n.goTo({x:D,y:h})}else if(e==="y"){let D=m*o+i;n.goTo({x:o,y:D})}return n.goTo({x:o,y:h}),n}function Za(s){return s.translate({x:0,y:0},s.cc)}var Ka=(s,e)=>1e-8>Math.abs(s.x-e.x)+Math.abs(s.y-e.y);function Ri(s,e,n){let o=[],h=n.copy(),l;for(let m=0;m<s;m++)e(h),o.push(h),h=h.copy(),l=h.angle;let f=[...n.path];for(let m of o)f=[...f,...m.path];return n.path=f,n.angle=l,n}function Qa(s,e,n){let{x:o,y:h}=n.end;return Math.abs(s.x-o)<1e-5&&Math.abs(s.y-h)<1e-5||(n.points.length===1?n.lastPath().points[0]=s:(n.path.push({points:[s],fillColor:"none",strokeWidth:1,strokeColor:"black",construction:!1,linecap:"butt",linejoin:"mitre"}),n.angle=0)),n}function tl(s,e){var n=s[0]-e[0],o=s[1]-e[1];return n*n+o*o}var el=(s,e)=>Math.sqrt((s.x-e.x)**2+(s.y-e.y)**2);function Ui(s,e){let n=s.start,o=s.end,h=s.points.reduce((f,m,i)=>{let D=e.copy().translate(e.cc,m);return f.concat(D)},[]),l=ji(...h);return e.path=l.path,e}function il(s,e,n){let o=new st,h=0;return n.pathMap(l=>{let f=!1;l.points.forEach(m=>{h>=s&&h<=e&&(f?o.addPoint(m):(o.newStroke(m),f=!0)),h++})}),n.path=o.path,n.alignHead(),n}function rl(s,e){return e.pathMap(n=>n.dashed=s),e}function nl(s){let e=s.points;if(e.length===1)return e[0];if(e.length===2)return{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2};var n=e[0],o=e[e.length-1];(n.x!=o.x||n.y!=o.y)&&e.push(n);for(var h=0,l=0,f=0,m=e.length,i,D,A,S=0,x=m-1;S<m;x=S++)i=e[S],D=e[x],A=i.x*D.y-D.x*i.y,h+=A,l+=(i.x+D.x)*A,f+=(i.y+D.y)*A;return A=h*3,{x:l/A,y:f/A}}function sl([s,e],n,o){if(s===0&&e===0)return o;let{x:h,y:l}=o.end;return o.addPoint({x:h+s,y:l+e},n),o.angle=Math.atan2(e,s)*180/Math.PI,o}function ol(s,e){return Ta(s,{maxError:.001}).map(o=>o.points).forEach(o=>{o.forEach((h,l)=>l===0?e.newStroke(h):e.goTo(h))}),e}function al(s,e,n){return n.path=n.pointMap(o=>({x:o.x+e*Math.cos(s/180*Math.PI),y:o.y+e*Math.sin(s/180*Math.PI)})),n}function Ji({axiom:s,rules:e,instructions:n,steps:o,max:h},l){let f=typeof s=="string"?s.split(""):s;for(let i=0;i<o;i++){let D=[];f.forEach(A=>{var x;let S=(x=e[A])!=null?x:[A];typeof S=="string"&&(S=S.split("")),D.push(...S)}),f=D}let m=l;return m.l_system_tape=f,f.forEach((i,D)=>{if((h===void 0||D<h)&&n[i])return n[i](m)}),m}function ll(s,e){return e.path=e.pointMap(n=>({x:s[0][0]*n.x+s[0][1]*n.y+s[0][2],y:s[1][0]*n.x+s[1][1]*n.y+s[1][2]})),e}var ul=(s,e)=>{let n={};return n.X=Math.round(s.x*e),n.Y=Math.round(s.y*e),n};function ji(){let s=arguments,e=[];for(let o of s)o.points.length!==1&&(e=o.path.length===1?[...e,...o.path]:[...e,o.path]);let n=new st;return e.length>0&&(n.path=e),n.angle=s[s.length-1].angle,n}function sn(s){let e=[];return s.forEach(n=>{Array.isArray(n)?e.push(...sn(n)):e.push(n)}),e}function on(s){let e=[];return s.forEach(n=>{Array.isArray(n)?e.push(...on(n)):e.push(n)}),e}function an(s){let e=[];return s.forEach(n=>{Array.isArray(n)?e.push(...an(n)):e.push(n)}),e}function ln(s){let e=[];return s.forEach(n=>{Array.isArray(n)?e.push(...ln(n)):e.push(n)}),e}var un=(s,e)=>{let n={};return n.X=Math.round(s.x*e),n.Y=Math.round(s.y*e),n};function hl(s){let[e,...n]=s.path.reverse();return e=Array.isArray(e)?Ii(e):[e],n=Array.isArray(n)?Ii(n):[n],e=e.map(o=>o.points.map(h=>un(h,s.booleanScale))),n=n.map(o=>o.points.map(h=>un(h,s.booleanScale))),n&&e?[n,e]:e}function cl(s,e,n){if(s===0)return n;let o=n.end,h=n.angle,l=Math.cos(rn(h)),f=Math.sin(rn(h)),m=o.x+s*l,i=o.y+s*f;return n.addPoint({x:m,y:i},e),n}var hn=(s,e)=>180/Math.PI*Math.atan2(e.y-s.y,e.x-s.x),cn=(s,e,n)=>nn(s.pointsFromLast(e),s.pointsFromLast(n)),pn=(s,e,n)=>hn(s.pointsFromLast(e),s.pointsFromLast(n)),pl=({points:s})=>{let e=s,n=1e-8,o=e[0],h=e[e.length-1],l=Math.abs(o.x-h.x),f=Math.abs(o.y-h.y);return l<1e-8&&f<1e-8};function fl(s,e){let n=e.lastPath();if(n.points.length<3)return e;let h=cn(e,0,1),l=cn(e,1,2),f=pn(e,1,0),m=pn(e,2,1),i=f-m,D=Math.abs(Math.tan(i/360*Math.PI)*s);n.points=n.points.slice(0,-2),e.setAngle(m),e.forward(l-D);let A=i;return A>180?A=i-360:A<-180&&(A=360+i),$e(A,s,!0,e),e.forward(h-D),e}function $i(s,e,n){let{endType:o,jointType:h="jtRound",miterLimit:l=2,roundPrecision:f=.25}=e;o||(o=Ka(n.start,n.end)?"etClosedRound":"etOpenRound");let m=n.getBooleanForm().flat(),D=new wi(m,!0).offset(s*n.booleanScale,{jointType:h,endType:o,miterLimit:l,roundPrecision:f});return n.setBooleanForm(D),n}function dl(s,e,n){var o=e[0],h=e[1],l=n[0]-o,f=n[1]-h;if(l!==0||f!==0){var m=((s[0]-o)*l+(s[1]-h)*f)/(l*l+f*f);m>1?(o=n[0],h=n[1]):m>0&&(o+=l*m,h+=f*m)}return l=s[0]-o,f=s[1]-h,l*l+f*f}function ml(s,e){for(var n=s[0],o=[n],h,l=1,f=s.length;l<f;l++)h=s[l],tl(h,n)>e&&(o.push(h),n=h);return n!==h&&o.push(h),o}function zi(s,e,n,o,h){for(var l=o,f,m=e+1;m<n;m++){var i=dl(s[m],s[e],s[n]);i>l&&(f=m,l=i)}l>o&&(f-e>1&&zi(s,e,f,o,h),h.push(s[f]),n-f>1&&zi(s,f,n,o,h))}function vl(s,e){var n=s.length-1,o=[s[0]];return zi(s,0,n,e,o),o.push(s[n]),o}function yl(s,e,n){if(s.length<=2)return s;var o=e!==void 0?e*e:1;return s=n?s:ml(s,o),s=vl(s,o),s}function xl(s){let{width:e,height:n}=s.getBoundingClientRect();return s.width=e,s.height=n,{w:e,h:n}}var gl=s=>s.getContext("2d").getImageData(0,0,s.width,s.height);function fn(s,e,n=!0){let{w:o,h}=xl(e);var l=e.getContext("2d");let f=0;l.font="100pt helvetica",l.textBaseline="middle",l.textAlign="center";let m=l.measureText(s),i=m.width+0,D=m.fontBoundingBoxAscent+m.fontBoundingBoxDescent;n&&(e.style.height=`${D}px`,e.style.width=`${i}px`),l.fillText(s,i/2,h/2),n&&fn(s,e,!1)}function at(s,e,n){let o,h;s===0?(o=e[0],h=e[1]):s===1?(o=e[1],h=e[2]):s===2?(o=e[3],h=e[2]):s===3&&(o=e[3],h=e[0]);let l=-1,f=1,m=(h-o)/(f-l),i=h-m*f,D=(.5-i)/m;return n*D}var dn={"0000":([s,e],n,o)=>[],"0001":([s,e],n,o)=>[[[s-n,e-at(3,o,n)],[s+at(2,o,n),e+n]]],"0010":([s,e],n,o)=>[[[s+at(2,o,n),e+n],[s+n,e+at(1,o,n)]]],"0100":([s,e],n,o)=>[[[s+n,e+at(1,o,n)],[s+at(0,o,n),e-n]]],"1000":([s,e],n,o)=>[[[s+at(0,o,n),e-n],[s-n,e-at(3,o,n)]]],"0011":([s,e],n,o)=>[[[s-n,e-at(3,o,n)],[s+n,e+at(1,o,n)]]],"0101":([s,e],n,o)=>[[[s-n,e-at(3,o,n)],[s+at(0,o,n),e-n]],[[s+n,e+at(1,o,n)],[s+at(2,o,n),e+n]]],"1001":([s,e],n,o)=>[[[s+at(0,o,n),e-n],[s+at(2,o,n),e+n]]],"0110":([s,e],n,o)=>[[[s+at(2,o,n),e+n],[s+at(0,o,n),e-n]]],"1010":([s,e],n,o)=>[[[s+at(2,o,n),e+n],[s-n,e-at(3,o,n)]],[[s+at(0,o,n),e-n],[s+n,e+at(1,o,n)]]],"1100":([s,e],n,o)=>[[[s+n,e+at(1,o,n)],[s-n,e-at(3,o,n)]]],"0111":([s,e],n,o)=>[[[s-n,e-at(3,o,n)],[s+at(0,o,n),e-n]]],"1011":([s,e],n,o)=>[[[s+at(0,o,n),e-n],[s+n,e+at(1,o,n)]]],"1110":([s,e],n,o)=>[[[s+at(2,o,n),e+n],[s-n,e-at(3,o,n)]]],"1101":([s,e],n,o)=>[[[s+n,e+at(1,o,n)],[s+at(2,o,n),e+n]]],"1111":([s,e],n,o)=>[]},mn={"0000":void 0,"0001":"down","0010":"right","0100":"up","1000":"left","0011":"right","0101":void 0,"1001":"down","0110":"up","1010":void 0,"1100":"left","0111":"up","1011":"right","1110":"left","1101":"down","1111":void 0};function Cl(s){let{data:e,width:n,height:o}=s,h=(A,S)=>e[(A*n+S)*4+3]/255,l=(A,S)=>[h(A-1,S-1),h(A-1,S),h(A,S),h(A,S-1)],f=A=>A.map(S=>S>=.5?1:0).join(""),m=[],i={},D=[];for(let A=1;A<o;A++)for(let S=1;S<n;S++){if(i[`${S},${A}`])continue;let x=l(A,S),w=f(x),y=dn[w],c=mn[w],p=y([S,A],.5,x);if(i[`${S},${A}`]=!0,p.flat().length>0&&m.push(p.flat()),c){let C=[S,A];for(;c&&(c==="up"?A-=1:c==="down"?A+=1:c==="right"?S+=1:c==="left"&&(S-=1),i[`${S},${A}`]!==!0);){x=l(A,S),w=f(x),y=dn[w],c=mn[w],i[`${S},${A}`]=!0;let I=y([S,A],.5,x),T=m[m.length-1];I.forEach(L=>{T.push(L[1])})}[S,A]=C}}return m}function Dl(s){let e=document.createElement("canvas");document.body.appendChild(e),fn(s,e);let n=gl(e),o=Cl(n);return o=o.map(h=>(h=yl(h,.1),h.reverse())),document.body.removeChild(e),o}var vn={};function El(s,e){let n=vn[s]||Dl(s);return vn[s]=n,n.forEach(o=>{o.forEach((h,l)=>{l===0&&e.newStroke(h),e.goTo(h)})}),e.flip("x"),e}var yn=s=>sn(s.path).map(e=>e.points.map(({x:n,y:o})=>[n,o]));function Pl(s,e){let n=yn(s),o=[...e].map(yn),l=Re.union(n,o).flat().map(f=>({points:f.map(m=>({x:m[0],y:m[1]})),fillColor:"none",strokeWidth:1,strokeColor:"black",construction:!1}));return s.path=l,s}var xn=s=>on(s.path).map(e=>e.points.map(({x:n,y:o})=>[n,o]));function wl(s,e){let n=xn(s),o=[...e].map(xn),l=Re.intersection(n,o).flat().map(f=>({points:f.map(m=>({x:m[0],y:m[1]})),fillColor:"none",strokeWidth:1,strokeColor:"black",construction:!1}));return s.path=l,s}var gn=s=>an(s.path).map(e=>e.points.map(({x:n,y:o})=>[n,o]));function Sl(s,e){let n=gn(s),o=[...e].map(gn),l=Re.difference(n,o).flat().map(f=>({points:f.map(m=>({x:m[0],y:m[1]})),fillColor:"none",strokeWidth:1,strokeColor:"black",construction:!1}));return s.path=l,s}var Cn=s=>ln(s.path).map(e=>e.points.map(({x:n,y:o})=>[n,o]));function Al(s,e){let n=Cn(s),o=[...e].map(Cn),l=Re.xor(n,o).flat().map(f=>({points:f.map(m=>({x:m[0],y:m[1]})),fillColor:"none",strokeWidth:1,strokeColor:"black",construction:!1}));return s.path=l,s}function Dn(s){let e=[];return s.forEach(n=>{Array.isArray(n)?e.push(...Dn(n)):e.push(n)}),e}function _l(s,e,n){let o=l=>({inside:l.fillColor==="white",pts:l.points.map(({x:f,y:m})=>s?[f,m]:{x:f,y:m})});return Dn(n.path).map(o)}function Il(s,e){return s.x*e.y-e.x*s.y}function Tl(s,e){return s.xMin<=e.xMax&&s.xMax>=e.xMin&&s.yMin<=e.yMax&&s.yMax>=e.yMin}function En(s,e){let n=[{x:0,y:0},{x:s[1].x-s[0].x,y:s[1].y-s[0].y}],o={x:e.x-s[0].x,y:e.y-s[0].y};return Il(n[1],o)<0}function Pn(s,e){return En(s,e[0])^En(s,e[1])}function wn(s){let e=Math.min(s[0].x,s[1].x),n=Math.max(s[0].x,s[1].x),o=Math.min(s[0].y,s[1].y),h=Math.max(s[0].y,s[1].y);return{xMin:e,xMax:n,yMin:o,yMax:h}}function Fl(s,e){let n=wn(s),o=wn(e);return Tl(n,o)&&Pn(s,e)&&Pn(e,s)}function Sn({x:s,y:e},{x:n,y:o},{x:h,y:l},{x:f,y:m}){let i,D,A,S,x,w;return i=(s+n+h+f)/4,D=(e+o+l+m)/4,A=(i-s)**2+(D-e)**2,S=(i-n)**2+(D-o)**2,x=(i-h)**2+(D-l)**2,w=(i-f)**2+(D-m)**2,xe(A,S)&&xe(A,x)&&xe(A,w)}var xe=(s,e)=>Math.abs(s-e)<1,bl=(s,e)=>xe(s.x,e.x)&&xe(s.y,e.y),Wi=(s,e)=>(e.x-s.x)**2+(e.y-s.y)**2;function Bl(s,e){return{x:(s.x+e.x)/2,y:(s.y+e.y)/2}}function An(s,e){let n=e.length,o=0;for(let h=0,l=1;l<n;l++,h++){let f=[e[h],e[l]],m=[s,{x:s.x,y:-999999999999}];Fl(f,m)&&o++}return o%2!=0}function _n(s,e,n){let o=Bl(s,n),h=Wi(s,e),l=Wi(e,n),f=Wi(s,n);return{isRight:xe(h+l,f),midPt:o}}function kl(s){let e=[];for(let o=0;o<s.length;o++){let h=s[o],l=h.pts.length;for(let f=0;f<l-2;f++){let[m,i,D]=h.pts.slice(f),{isRight:A,midPt:S}=_n(m,i,D);if(A){let x=An(S,h.pts);if(e.push({contained:x&&!h.inside,midPt:S,pts:[m,i,D]}),h.pts.length===5){let[y,c,p,v]=h.pts;Sn(y,c,p,v)&&(f+=1)}}if(f===l-3){let x=h.pts[1],[w,y]=h.pts.slice(f+1),{isRight:c,midPt:p}=_n(w,y,x);{let v=An(p,h.pts);if(e.push({contained:v&&!h.inside,midPt:p,pts:[w,y,x],last:!0}),h.pts.length===5){let[I,T,L,Y]=h.pts;Sn(I,T,L,Y)&&(f+=1)}}}}}let n=[];for(let o=0;o<e.length;o++){let h=e[o];for(let l=o+1;l<e.length;l++){let f=e[l];bl(h.midPt,f.midPt)&&(h.pts.push(f.pts[2]),n.push(h))}}return[e,n]}function Hi(s){return kl(s.copy().polylines())}function Nl(s){return tn(s.pathMap(e=>e.points))}var Ll=s=>Ha(s)>0;function qi(s,e){return e.xor(),e.pathMap((n,o)=>{Ll(n.points)?n.fillColor=s:n.fillColor="white"}),e}function Ml(s){let n=s.polylines().map(f=>f.pts.map(m=>ul(m,s.booleanScale))),[o,...h]=n,l=new wi([o],!0);return h.forEach(f=>{let m=new wi([f],!0);l=l.union(m)}),s.setBooleanForm(l)}var st=class{constructor(e){this.angle=0,this.path=ba(),this.savedStates=[],this.booleanScale=1e4,e&&(this.angle=e.angle,this.path=e.path)}overwrite(e){return this.angle=e.angle,this.path=e.path,this.savedStates=e.savedStates,this.booleanScale=e.booleanScale,this}firstPath(){return Ya(this)}lastPath(){return Oa(this)}pointsFromLast(e){return Kr(e,this)}pointsFromFirst(e){return Qr(e,this)}getPoint(e){return e>=0?Qr(e,this):Kr(-e,this)}addPoint(e,n=!0){return Ra(e,n,this)}pathMap(e){return ja(e,this)}pointMap(e){return Ua(e,this)}pointFilter(e){return Ja(e,this)}extrema(){return $a(this)}copy(){return Fa(this)}setBooleanForm(e){return Ma(e,this)}getBooleanForm(){return hl(this)}point(e){return Nt(e,this)}store(){return this.savedStates.push({pos:this.end,angle:this.angle}),this}restore(){let e=this.savedStates.pop();return this.goTo(e.pos,!1),this.angle=e.angle,this}newStroke(e=[0,0],n="point"){return Qa(Mt(e),n,this)}construction(){return Xa(this)}lastAngle(){return Ti(this)}lastangle(){return Ti(this)}last_angle(){return Ti(this)}alignHead(){return Fi(this)}alignhead(){return Fi(this)}align_head(){return Fi(this)}fillColor(e){return bi(e,this)}fillcolor(e){return bi(e,this)}fill_color(e){return bi(e,this)}strokeWidth(e){return Bi(e,this)}strokewidth(e){return Bi(e,this)}stroke_width(e){return Bi(e,this)}strokeColor(e){return ki(e,this)}strokecolor(e){return ki(e,this)}stroke_color(e){return ki(e,this)}strokeLinecap(e){return Ni(e,this)}strokelinecap(e){return Ni(e,this)}stroke_linecap(e){return Ni(e,this)}strokeLinejoin(e){return Li(e,this)}strokelinejoin(e){return Li(e,this)}stroke_linejoin(e){return Li(e,this)}goTo(e,n=!0){return Ai(Mt(e),n,this)}goto(e,n=!0){return Ai(Mt(e),n,this)}go_to(e,n=!0){return Ai(Mt(e),n,this)}forward(e,n=!0){return cl(e,n,this)}vec(e,n=!0){return sl(e,n,this)}arc(e,n,o=!0){return $e(e,n,o,this)}turnForward(e,n){return Xi(e,n,this)}turnforward(e,n){return Xi(e,n,this)}turn_forward(e,n){return Xi(e,n,this)}turn(e){return Mi(e,this)}right(e){return Mi(-e,this)}left(e){return Mi(e,this)}setAngle(e){return _i(e,this)}setangle(e){return _i(e,this)}set_angle(e){return _i(e,this)}flatGoTo(e,n){return Yi(Mt(e),n,this)}flatgoto(e,n){return Yi(Mt(e),n,this)}flat_goto(e,n){return Yi(Mt(e),n,this)}closePath(){return Oi(this)}closepath(){return Oi(this)}close_path(){return Oi(this)}translate(e,n=[0,0]){return Ba(Mt(e),Mt(n),this)}rotate(e,n){return ka(e,n?Mt(n):this.centroid,this)}scale(e,n){return n=n?Mt(n):this.centroid,typeof e=="number"&&(e=[e,e]),Na(e,n,this)}originate(){return Za(this)}reverse(){return La(this)}flip(e){return qa(e,this)}repeat(e){return Va(e,this)}mirror(){return Ga(this)}fillet(e){return fl(e,this)}roundCorners(e,n=!1){return Vi(e,n,this)}roundcorners(e,n=!1){return Vi(e,n,this)}round_corners(e,n=!1){return Vi(e,n,this)}thicken(e){return Xl(e,this)}copyPaste(e,n){return Ri(e,n,this)}copypaste(e,n){return Ri(e,n,this)}copy_paste(e,n){return Ri(e,n,this)}offset(e,n={}){return $i(e,n,this)}outline(){return $i(0,{endType:"etClosedPolygon"},this)}expand(e){return $i(e,{endType:"etClosedPolygon"},this)}text(e){return El(e,this)}dogbone(e,n=!1){return Ol(e,n,this)}trim(e,n){return il(e,n,this)}union(){return this.overwrite(Pl(this,arguments))}intersect(){return this.overwrite(wl(this,arguments))}difference(){return this.overwrite(Sl(this,arguments))}xor(){return this.overwrite(Al(this,arguments))}placeAlong(e){return Ui(e,this)}placealong(e){return Ui(e,this)}place_along(e){return Ui(e,this)}dashed(e){return rl(e,this)}bezier(e){return ol(e,this)}slide(e,n){return al(e,n,this)}polylines(e=!1,n=0){return _l(e,n,this)}getTabs(){return Hi(this)}gettabs(){return Hi(this)}get_tabs(){return Hi(this)}lSystem(e){return Ji(e,this)}lsystem(e){return Ji(e,this)}l_system(e){return Ji(e,this)}transform(e){return ll(e,this)}get start(){return Nt("start",this)}get end(){return Nt("end",this)}get lt(){return Nt("lt",this)}get lc(){return Nt("lc",this)}get lb(){return Nt("lb",this)}get ct(){return Nt("ct",this)}get cc(){return Nt("cc",this)}get cb(){return Nt("cb",this)}get rt(){return Nt("rt",this)}get rc(){return Nt("rc",this)}get rb(){return Nt("rb",this)}get centroid(){return nl(this)}get width(){return za(this)}get height(){return Wa(this)}get points(){return Nl(this)}floodFill(e){return qi(e,this)}floodfill(e){return qi(e,this)}flood_fill(e){return qi(e,this)}group(){return this.overwrite(ji(this,...arguments))}flatten(){return this.overwrite(Ml(this))}getPathData(e=!0){let n=[],o=this.polylines();for(let h=0;h<o.length;h++)for(let l=0;l<o[h].pts.length;l++){let f=o[h].pts[l];l===0?n.push(`M ${f.x} ${f.y}`):n[n.length-1]+=`L ${f.x} ${f.y}`}return e?n.join(" "):n}};function Zr(s){let e=s[0];return Array.isArray(e)?Zr(e):e}function en(s,e){return Array.isArray(s)?s.map(n=>en(n,e)):e(s)}var Gi=(s,e,n)=>nn(s[e],s[n]),Zi=(s,e,n)=>hn(s[e],s[n]);function Yl(s,e,n){if(n.points.length<3)return n;let h=new st,l=n.points.length,{x:f,y:m}=n.points[0];h.translate({x:f,y:m},h.start);let i=0,D=0;for(let A=0;A<l-2;A++){let S=Gi(n.points,A,A+1),x=Gi(n.points,A+1,A+2),w=Zi(n.points,A,A+1),y=Zi(n.points,A+1,A+2),c=y-w;if(Math.abs(c)<3&&!e){h.goTo(n.points[A+1]),A===n.points.length-3&&h.goTo(n.points[A+2]),i=0;continue}let p=Math.abs(Math.tan(c/360*Math.PI)*s);if(A===0&&(D=p),h.setAngle(w),h.forward(S-p-i),c>180?c-=360:c<-180&&(c+=360),$e(c,s,!0,h),A===n.points.length-3)if(pl(n)){let v=Gi(n.points,0,1),I=Zi(n.points,0,1)-y,T=Math.abs(Math.tan(I/360*Math.PI)*s);h.path=h.pointFilter((L,Y)=>Y!==0),h.forward(x-p-T),I>180?I-=360:I<-180&&(I+=360),$e(I,s,!0,h),h.forward(v-T-D)}else h.forward(x-p);i=p}return h.path}function Vi(s,e,n){return n.path=n.pathMap(o=>Yl(s,e,o)),n}function Rl(s,e){return 1e-7>Math.abs(s.x-e.x)+Math.abs(s.y-e.y)}function In(s){var e=[];return s.forEach(function(n){Array.isArray(n)?e=e.concat(In(n)):e.push(n)}),e}function Xl(s,e){let n=In(e.pathMap(o=>new st({angle:0,path:[o]})));return n.forEach(o=>{let h=Rl(o.start,o.end)?"etClosedLine":"etOpenButt";o.offset(s/2,{endType:h,jointType:"jtMiter"})}),e.path=ji(...n).path,e}var jl=(s,e)=>180/Math.PI*Math.atan2(e.y-s.y,e.x-s.x),Ki=(s,e,n)=>el(s[e],s[n]),Qi=(s,e,n)=>jl(s[e],s[n]),Ul=({points:s})=>{let e=s,n=1e-8,o=e[0],h=e[e.length-1],l=Math.abs(o.x-h.x),f=Math.abs(o.y-h.y);return l<1e-8&&f<1e-8};function Jl(s,e,n){if(n.points.length<3)return n;let h=new st,l=n.points.length,{x:f,y:m}=n.points[0];h.translate({x:f,y:m},h.start);let i=0,D=0;for(let A=0;A<l-2;A++){let S=Ki(n.points,A,A+1),x=Qi(n.points,A,A+1),w=Qi(n.points,A+1,A+2),y=w-x;if(y>180?y-=360:y<-180&&(y+=y),Math.abs(y)<3&&!e){h.goTo(n.points[A+1]),A===n.points.length-3&&h.goTo(n.points[A+2]),i=0;continue}let c=Math.abs(2*s*Math.sin(y*Math.PI/180/2));if(A===0&&(D=c),h.forward(S-c-i).left(-y/2).arc(2*y,s).left(-y/2),i=c,A===n.points.length-3){let p=Ki(n.points,A+1,A+2);if(Ul(n)){let v=Ki(n.points,0,1),I=Qi(n.points,0,1)-w,T=Math.abs(2*s*Math.sin(I*Math.PI/180/2));h.path=h.pointFilter((L,Y)=>Y!==0),h.forward(p-c-T),h.left(-I/2).arc(2*I,s).left(-I/2).forward(v-T-D)}else h.forward(p-c)}}return h.path}function Ol(s,e,n){return n.path=n.pathMap(o=>Jl(s,e,o)),n}var $l=new WeakMap;var ke=s=>typeof s=="function"&&$l.has(s),Tn=typeof window!="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0;var zl=(s,e,n=null)=>{for(;e!==n;){let o=e.nextSibling;s.removeChild(e),e=o}},Xt={},Fn={},ze=`{{lit-${String(Math.random()).slice(2)}}}`,bn=`<!--${ze}-->`,Lu=new RegExp(`${ze}|${bn}`),Wl="$lit$";var Hl=s=>s.index!==-1,Ne=()=>document.createComment(""),ql=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,tr=class{constructor(e,n,o){this.__parts=[],this.template=e,this.processor=n,this.options=o}update(e){let n=0;for(let o of this.__parts)o!==void 0&&o.setValue(e[n]),n++;for(let o of this.__parts)o!==void 0&&o.commit()}_clone(){let e=Tn?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),n=[],o=this.template.parts,h=document.createTreeWalker(e,133,null,!1),l=0,f=0,m,i=h.nextNode();for(;l<o.length;){if(m=o[l],!Hl(m)){this.__parts.push(void 0),l++;continue}for(;f<m.index;)f++,i.nodeName==="TEMPLATE"&&(n.push(i),h.currentNode=i.content),(i=h.nextNode())===null&&(h.currentNode=n.pop(),i=h.nextNode());if(m.type==="node"){let D=this.processor.handleTextExpression(this.options);D.insertAfterNode(i.previousSibling),this.__parts.push(D)}else this.__parts.push(...this.processor.handleAttributeExpressions(i,m.name,m.strings,this.options));l++}return Tn&&(document.adoptNode(e),customElements.upgrade(e)),e}},Bn=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:s=>s}),Vl=` ${ze} `,kn=class{constructor(e,n,o,h){this.strings=e,this.values=n,this.type=o,this.processor=h}getHTML(){let e=this.strings.length-1,n="",o=!1;for(let h=0;h<e;h++){let l=this.strings[h],f=l.lastIndexOf("<!--");o=(f>-1||o)&&l.indexOf("-->",f+1)===-1;let m=ql.exec(l);m===null?n+=l+(o?Vl:bn):n+=l.substr(0,m.index)+m[1]+m[2]+Wl+m[3]+ze}return n+=this.strings[e],n}getTemplateElement(){let e=document.createElement("template"),n=this.getHTML();return Bn!==void 0&&(n=Bn.createHTML(n)),e.innerHTML=n,e}};var er=s=>s===null||!(typeof s=="object"||typeof s=="function"),ir=s=>Array.isArray(s)||!!(s&&s[Symbol.iterator]),rr=class{constructor(e,n,o){this.dirty=!0,this.element=e,this.name=n,this.strings=o,this.parts=[];for(let h=0;h<o.length-1;h++)this.parts[h]=this._createPart()}_createPart(){return new nr(this)}_getValue(){let e=this.strings,n=e.length-1,o=this.parts;if(n===1&&e[0]===""&&e[1]===""){let l=o[0].value;if(typeof l=="symbol")return String(l);if(typeof l=="string"||!ir(l))return l}let h="";for(let l=0;l<n;l++){h+=e[l];let f=o[l];if(f!==void 0){let m=f.value;if(er(m)||!ir(m))h+=typeof m=="string"?m:String(m);else for(let i of m)h+=typeof i=="string"?i:String(i)}}return h+=e[n],h}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}},nr=class{constructor(e){this.value=void 0,this.committer=e}setValue(e){e!==Xt&&(!er(e)||e!==this.value)&&(this.value=e,ke(e)||(this.committer.dirty=!0))}commit(){for(;ke(this.value);){let e=this.value;this.value=Xt,e(this)}this.value!==Xt&&this.committer.commit()}},We=class{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(Ne()),this.endNode=e.appendChild(Ne())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=Ne()),e.__insert(this.endNode=Ne())}insertAfterPart(e){e.__insert(this.startNode=Ne()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(this.startNode.parentNode===null)return;for(;ke(this.__pendingValue);){let n=this.__pendingValue;this.__pendingValue=Xt,n(this)}let e=this.__pendingValue;e!==Xt&&(er(e)?e!==this.value&&this.__commitText(e):e instanceof kn?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):ir(e)?this.__commitIterable(e):e===Fn?(this.value=Fn,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){let n=this.startNode.nextSibling;e=e==null?"":e;let o=typeof e=="string"?e:String(e);n===this.endNode.previousSibling&&n.nodeType===3?n.data=o:this.__commitNode(document.createTextNode(o)),this.value=e}__commitTemplateResult(e){let n=this.options.templateFactory(e);if(this.value instanceof tr&&this.value.template===n)this.value.update(e.values);else{let o=new tr(n,e.processor,this.options),h=o._clone();o.update(e.values),this.__commitNode(h),this.value=o}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());let n=this.value,o=0,h;for(let l of e)h=n[o],h===void 0&&(h=new We(this.options),n.push(h),o===0?h.appendIntoPart(this):h.insertAfterPart(n[o-1])),h.setValue(l),h.commit(),o++;o<n.length&&(n.length=o,this.clear(h&&h.endNode))}clear(e=this.startNode){zl(this.startNode.parentNode,e.nextSibling,this.endNode)}},Nn=class{constructor(e,n,o){if(this.value=void 0,this.__pendingValue=void 0,o.length!==2||o[0]!==""||o[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=n,this.strings=o}setValue(e){this.__pendingValue=e}commit(){for(;ke(this.__pendingValue);){let n=this.__pendingValue;this.__pendingValue=Xt,n(this)}if(this.__pendingValue===Xt)return;let e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=Xt}},Ln=class extends rr{constructor(e,n,o){super(e,n,o);this.single=o.length===2&&o[0]===""&&o[1]===""}_createPart(){return new Mn(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}},Mn=class extends nr{},Xn=!1;(()=>{try{let s={get capture(){return Xn=!0,!1}};window.addEventListener("test",s,s),window.removeEventListener("test",s,s)}catch(s){}})();var On=class{constructor(e,n,o){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=n,this.eventContext=o,this.__boundHandleEvent=h=>this.handleEvent(h)}setValue(e){this.__pendingValue=e}commit(){for(;ke(this.__pendingValue);){let l=this.__pendingValue;this.__pendingValue=Xt,l(this)}if(this.__pendingValue===Xt)return;let e=this.__pendingValue,n=this.value,o=e==null||n!=null&&(e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive),h=e!=null&&(n==null||o);o&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),h&&(this.__options=Gl(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=Xt}handleEvent(e){typeof this.value=="function"?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}},Gl=s=>s&&(Xn?{capture:s.capture,passive:s.passive,once:s.once}:s.capture),Yn=class{handleAttributeExpressions(e,n,o,h){let l=n[0];return l==="."?new Ln(e,n.slice(1),o).parts:l==="@"?[new On(e,n.slice(1),h.eventContext)]:l==="?"?[new Nn(e,n.slice(1),o)]:new rr(e,n,o).parts}handleTextExpression(e){return new We(e)}},Mu=new Yn;var Xu=new Map,Ou=new WeakMap;typeof window!="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");import"https://leomcelroy.com/widgets/code-mirror.js";var Rn=["./library/connectors/ESP8266_12E.json","./library/connectors/header_FTDI.json","./library/connectors/power_65mm.json","./library/connectors/ESP32_CAM.json","./library/connectors/USB_A_plug.json","./library/connectors/header_i0.json","./library/connectors/header_serial_reverse.json","./library/connectors/header_4.json","./library/connectors/header_signal.json","./library/connectors/MTA_i0.json","./library/connectors/HM11.json","./library/connectors/header_MFRC522.json","./library/connectors/header_serial_reverse_5V.json","./library/connectors/USB_mini_B.json","./library/connectors/ESC.json","./library/connectors/MTA_PS2.json","./library/connectors/header_APA.json","./library/connectors/MTA_ICP.json","./library/connectors/stereo_2_5mm.json","./library/connectors/header_VL53L1X_3415.json","./library/connectors/Molex_serial.json","./library/connectors/header_SWD_4_1.json","./library/connectors/ESP_01.json","./library/connectors/HCSR04.json","./library/connectors/header_SWD_4_05.json","./library/connectors/ESP32_WROOM.json","./library/connectors/header_serial.json","./library/connectors/header_PDI.json","./library/connectors/I2C4x1v.json","./library/connectors/header_power.json","./library/connectors/MTA_serial.json","./library/connectors/header_LSM6DS33_2736.json","./library/connectors/MTA_2.json","./library/connectors/MTA_3.json","./library/connectors/header_LCD.json","./library/connectors/screw_terminal_2.json","./library/connectors/HCSR501.json","./library/connectors/screw_terminal_i0.json","./library/connectors/header_unipolar_stepper.json","./library/connectors/screw_terminal_power.json","./library/connectors/header_nRF24L01.json","./library/connectors/header_serial_reverse_3V3.json","./library/connectors/MTA_power.json","./library/connectors/MTA_4.json","./library/connectors/RCWL0516.json","./library/connectors/ESP_WROOM_02D.json","./library/connectors/RN4871.json","./library/connectors/header_I2C.json","./library/connectors/header_SWD.json","./library/connectors/header_servo.json","./library/connectors/microSD.json","./library/connectors/header_4H.json","./library/connectors/header_UPDI.json","./library/connectors/I2C4x1i.json","./library/connectors/I2C4x1h.json","./library/connectors/header_ISP.json","./library/connectors/header_NEO_6M.json","./library/connectors/MTA_5.json","./library/connectors/header_6.json","./library/connectors/header_UPDI_reverse.json","./library/connectors/header_bus.json","./library/connectors/TFT8x1v.json","./library/connectors/header_2H.json","./library/connectors/header_ATP.json","./library/switches/button_6mm.json","./library/switches/slide_switch.json","./library/diodes_transistors_regulators_sensors/D_1206.json","./library/diodes_transistors_regulators_sensors/mic_SPM1437.json","./library/diodes_transistors_regulators_sensors/LED_1206.json","./library/diodes_transistors_regulators_sensors/NMOSFET_TO252AA.json","./library/diodes_transistors_regulators_sensors/regulator_SOT223.json","./library/diodes_transistors_regulators_sensors/regulator_SOT23.json","./library/diodes_transistors_regulators_sensors/VL53L1X.json","./library/diodes_transistors_regulators_sensors/H_bridge_SM8.json","./library/diodes_transistors_regulators_sensors/SPG08P4HM4H.json","./library/diodes_transistors_regulators_sensors/Hall_SOT23.json","./library/diodes_transistors_regulators_sensors/VEML6040.json","./library/diodes_transistors_regulators_sensors/phototransistor_1206.json","./library/diodes_transistors_regulators_sensors/LED_RGB.json","./library/diodes_transistors_regulators_sensors/accel_MXD6235M.json","./library/diodes_transistors_regulators_sensors/ADXL343.json","./library/diodes_transistors_regulators_sensors/mic_SPU0414HR5H.json","./library/diodes_transistors_regulators_sensors/D_SOD_123.json","./library/diodes_transistors_regulators_sensors/LED_3014_1100.json","./library/diodes_transistors_regulators_sensors/A4953_SOICN.json","./library/diodes_transistors_regulators_sensors/NMOSFET_SOT23.json","./library/diodes_transistors_regulators_sensors/phototransistor_PLCC2.json","./library/diodes_transistors_regulators_sensors/PMOSFET_SOT23.json","./library/diodes_transistors_regulators_sensors/DRV8428_HTSSOP.json","./library/diodes_transistors_regulators_sensors/CMM4030D261I2STR.json","./library/crystals_and_resonators/XTAL_CSM_7.json","./library/crystals_and_resonators/XTAL_NX5032GA.json","./library/crystals_and_resonators/XTAL_EFOBM.json","./library/discretes/R_0402.json","./library/discretes/ST4EB.json","./library/discretes/C_1206.json","./library/discretes/R_1206.json","./library/discretes/choke.json","./library/discretes/L_1210.json","./library/discretes/C_FND.json","./library/ICs/CBA.json","./library/ICs/SAMD21E.json","./library/ICs/AVRDB28.json","./library/ICs/FT230XS.json","./library/ICs/ATtiny1614.json","./library/ICs/fab.json","./library/ICs/ATtiny44_SOICN.json","./library/ICs/ATxmegaE5_TQFP.json","./library/ICs/op_amp_SOICN.json","./library/ICs/ATtiny45_SOIC.json","./library/ICs/ATmega88_TQFP.json","./library/ICs/SAMD11D.json","./library/ICs/TRC102.json","./library/ICs/ATtiny412.json","./library/ICs/ATmega644_TQFP.json","./library/ICs/op_amp_SOT23_5.json","./library/ICs/SAMD11C.json","./library/ICs/ATtiny3216.json"];function jn(s){let e=new XMLSerializer,n=document.querySelector("svg").cloneNode(!0),o=n.querySelectorAll(".no-download");for(let A of o)A.remove();let h=n.querySelector(".transform-group");h.style.transformOrigin="",h.style.transform="";let l=s.limits.x[1]-s.limits.x[0],f=s.limits.y[1]-s.limits.y[0];h.setAttribute("transform",`scale(1, -1) translate(0, ${-(s.limits.y[0]+s.limits.y[1])})`),n.setAttribute("style",""),n.setAttribute("width",`${l*s.mm_per_unit}mm`),n.setAttribute("height",`${f*s.mm_per_unit}mm`),n.setAttribute("viewBox",`${s.limits.x[0]} ${s.limits.y[0]} ${l} ${f}`),n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");let m=e.serializeToString(n),i="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(m),D=document.createElement("a");D.href=i,D.download="download.svg",document.body.appendChild(D),D.click(),document.body.removeChild(D)}function Un(s){var e=s.toFixed(6);return e=e.substr(0,e.length-7)+e.substr(-6,6),e}function Jn(s){let e=s.storedPCB.layers,n="";n+=`%MOIN*%
`,n+=`%LPD*%
`,n+=`%FSLAX66Y66*%
`,n+=`G01*
`,n+=e["F.Cu"].polylines().map(l=>{let{pts:f}=l,m=f.reduce((i,D,A)=>`${i}X${Un(D.x)}Y${Un(D.y)}D0${A===0?2:1}*
`,`G36*
`);return m+=`G37*
`,m}).join("")+"M02*",sr("anon.gerber",n)}function sr(s,e){let n=new Blob([e],{type:"text/plain"});var o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=`${s}`,o.click(),URL.revokeObjectURL(o)}var $n=s=>s.map(e=>e.slice(10)).map(e=>$t`
  <div class="import-item" @mousedown=${async n=>{let h=await(await fetch(`components/${e}`)).text();rt("ADD_IMPORT",{text:h,name:n.target.innerText.split("/")[1].split(".")[0]})}}>${e}</div>
`);var zn=([s,e,n],o)=>{let[h,l]=o;return $t`
    <style>
      .path-footprint-dragged {
        fill: black;
      }
    </style>

    <svg 
      style="position: absolute; left: ${h}; top: ${l}; transform: translate(-50%, -50%);"
      width="50px"
      height="50px">
      <path
          class="path-footprint-dragged" 
          d="${n.getPathData()}"
          fill-rule="nonzero"
          />
    </svg>

  `};var Zl=s=>s.reduce((e,n,o)=>`${e} ${o===0?"M":"L"} ${n.join(",")}`,""),Wn=(s,e)=>{let n=[[s.lt.x,(s.lt.y+s.lb.y)/2],[s.rt.x,(s.rt.y+s.rb.y)/2]],o=[[(s.lt.x+s.rt.x)/2,s.lt.y],[(s.lb.x+s.rb.x)/2,s.lb.y]],h=[[s.lt.x,0],[s.rt.x,0]],l=[[0,s.lt.y],[0,s.lb.y]],f=[s.lt.x,s.rt.x],m=Math.abs(f[1]-f[0]),i=[s.lb.y,s.lt.y],D=Math.abs(i[1]-i[0]);function A(I,T){return Math.log(T)/Math.log(I)}let S=Math.round(A(5,Math.max(m,D))),x=e,w=(I,T)=>{let L=[],Y=T*Math.ceil(I[0]/T)-T;for(;Y<I[1]+T;)Y=Y+T,L.push(Y);return L},y=I=>[[s.lt.x,I],[s.rt.x,I]],c=I=>[[I,s.lt.y],[I,s.lb.y]],p=I=>T=>Bt`<path stroke="black" vector-effect="non-scaling-stroke" stroke-width="${I}" d="${Zl(T)}"/>`,v=w(i,x).map(y).map(p(.2)),C=w(f,x).map(c).map(p(.2));return Bt`
        <g class="grid no-download">
            ${p(.6)(h)}
            ${p(.6)(l)}
            ${v}
            ${C}
        </g>
    `};var Hn=({data:s,color:e,groupId:n=""})=>{let o=parseInt(e.slice(-2),16)/255,h=m=>Bt`
    <path
        d="${m}"
        fill-rule="nonzero"
        fill="${e.slice(0,-2)}"
        fill-opacity=${o}/>
  `,l=m=>Bt`
    <text 
      text-anchor="middle" 
      x=${m.translate[0]} 
      y=${-m.translate[1]+m.size*.352778}
      transform=${"scale(1 -1)"}
      style=${`font: ${m.size}pt sans-serif;`}
      fill=${e.slice(0,-2)}
      opacity=${o}
      >
      ${m.value}
    </text>
  `,f=[];return s.forEach(m=>{typeof m=="string"?m.split(/(?=M)/g).forEach(i=>{f.push(h(i))}):f.push(l(m))}),Bt`
    <g id=${n}>
      ${f}
    </g>
  `};function Kl(s){return new st().arc(360,s).originate()}function Ql(s,e){return new st().forward(s).right(90).forward(e).right(90).repeat(1).originate()}st.prototype.circle=Kl;st.prototype.rectangle=Ql;var qn=(s,e,n)=>[(1-s)*e[0]+s*n[0],(1-s)*e[1]+s*n[1]],Vn=(s,e,n,...o)=>o.length>0?[qn(s,e,n),...Vn(s,n,...o)]:[qn(s,e,n)],Gn=(s,e)=>e.length>1?Gn(s,Vn(s,...e)):e[0];function tu(s,e){let n=[];for(let o=0;o<=1;o+=1/64){let h=Gn(o,[[e.end.x,e.end.y],...s]);n.push(h)}return n.forEach(o=>{e.goTo(o)}),e}st.prototype.pathD=st.prototype.bezier;st.prototype.bezier=function(...s){return tu(s,this)};var or=.02,Zn=s=>s.components.map((e,n)=>Bt`
  <g class="no-download translate-handle">
    <path
          d="${new st().arc(361,or).translate([e.posX,e.posY-or]).offset(.003).getPathData()}"
      />
      <circle
        class="translate-handle-trigger" 
      data-index=${n}
        stroke="none"
        fill="#00000000"
      cx="${e.posX}"
      cy="${e.posY}"
      r="${or}"
      />
  </g>
`);var Kn=s=>{var o;let e=s.shapes.map(h=>Hn(h)),n=(o=s.panZoomParams)==null?void 0:o.corners();return Bt`
    <svg id="viewer" style="width: 100%; height: 100%; transform: scale(1, -1);">
      <g class="transform-group">
            ${s.selectBox.start&&s.selectBox.end?Bt`
              <path
                class="selectBox"
                d="
                  M ${s.selectBox.start.x} ${s.selectBox.start.y}
                  L ${s.selectBox.end.x} ${s.selectBox.start.y}
                  L ${s.selectBox.end.x} ${s.selectBox.end.y}
                  L ${s.selectBox.start.x} ${s.selectBox.end.y}
                "
              />`:""}
          <g class="shapes">${e}</g>
        ${s.panZoomParams&&s.gridSize>0&&s.grid?Wn(s.panZoomParams.corners(),s.gridSize):""}

        <rect
          class="limits no-download"
          width="${s.limits.x[1]-s.limits.x[0]}"
          height="${s.limits.y[1]-s.limits.y[0]}"
          stroke="black" fill="transparent" stroke-width="1"
          vector-effect="non-scaling-stroke"
          transform="translate(${s.limits.x[0]}, ${s.limits.y[0]})"/>
        ${s.storedPCB&&s.viewHandles?Zn(s.storedPCB):""}
      </g>

    </svg>
  `};var Qn=([s,e,n],o)=>$t`
    <style>
      .path-footprint {
        fill: black;
      }

      .footprint-svg:hover .path-footprint {
        fill: orange;
      }
    </style>
    <div class="footprint-item">
      <svg 
        data-index=${o}
        class="footprint-svg footprint-${o}" 
        width="50px"
        height="50px">
        <path
            class="path-footprint"
            data-index=${o} 
            d="${n.getPathData()}"
            fill-rule="nonzero"
            />
      </svg>
      <span style="padding-left: 5px;">${s}</span>
    </div>
  `;function ts(s){return $t`
		<div class="top-menu">
			<div class="left">
				<button
					@click=${()=>rt("RUN")}>
					run (shift + enter)
				</button>
				<div class="seperator"></div>
				<div class="dropdown-container">
				 	import
				 	<div class="dropdown-content">
				 		${$n(Rn)}
				 	</div>
				 </div>
				 <div class="seperator"></div>
				 <div class="dropdown-container">
					download
					<div class="dropdown-content dropdown-content">
						<button
							@click=${()=>jn(s)}>
							svg
						</button>
						<button
							@click=${()=>sr("anon.js",s.codemirror.view.state.doc.toString())}>
							js
						</button>
						<button
							@click=${()=>Jn(s)}>
							gerber
						</button>
					</div>
				</div>
				<div class="seperator"></div>
				<div class="dropdown-container">
					drawing
					<div class="dropdown-content dropdown-content">
						<button
							class="center-button"
							@click=${()=>{s.panZoomParams.setScaleXY(s.limits)}}>
							center
						</button>
						<div>
							<span>handles</span>
							<input
								type="checkbox"
								checked=${s.viewHandles}
								@change=${e=>{s.viewHandles=e.target.checked,rt("RENDER")}}
								class="handles-checkbox">
							</input>
						</div>
						<div>
							<span>grid</span>
							<input
								type="checkbox"
								checked=${s.grid}
								@change=${e=>{s.grid=e.target.checked,rt("RENDER")}}
								>
							</input>
						</div>
						<div>
							<span>grid size:</span>
							<input
								type="number"
								step="0.005"
								min="0"
								value=${s.gridSize}
								@change=${e=>{s.gridSize=Number(e.target.value),rt("RENDER")}}>
							</input>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div style="display: flex; height: 100%; min-height: 100%; max-height: 100%;">
			<code-mirror id="code-editor" style="overflow: scroll;"></code-mirror>
			<div class="right-side">
				${Kn(s)}
				<div class="footprint-toolbox">${s.footprints.map(Qn)}</div>
				${s.previewFootprint?zn(...s.previewFootprint):""}
			</div>
		</div>
		<div id="vertical-bar"></div>
	`}var He=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function es(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function qe(s,e,n){return n={path:e,exports:{},require:function(o,h){return eu(o,h==null?n.path:h)}},s(n,n.exports),n.exports}function eu(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var iu=qe(function(s,e){(function(o,h){s.exports=h()})(He,function(){return function(n){var o={};function h(l){if(o[l])return o[l].exports;var f=o[l]={exports:{},id:l,loaded:!1};return n[l].call(f.exports,f,f.exports,h),f.loaded=!0,f.exports}return h.m=n,h.c=o,h.p="",h(0)}([function(n,o,h){Object.defineProperty(o,"__esModule",{value:!0});var l=h(1),f=h(3),m=h(8),i=h(15);function D(y,c,p){var v=null,C=function(Z,k){p&&p(Z,k),v&&v.visit(Z,k)},I=typeof p=="function"?C:null,T=!1;if(c){T=typeof c.comment=="boolean"&&c.comment;var L=typeof c.attachComment=="boolean"&&c.attachComment;(T||L)&&(v=new l.CommentHandler,v.attach=L,c.comment=!0,I=C)}var Y=!1;c&&typeof c.sourceType=="string"&&(Y=c.sourceType==="module");var j;c&&typeof c.jsx=="boolean"&&c.jsx?j=new f.JSXParser(y,c,I):j=new m.Parser(y,c,I);var z=Y?j.parseModule():j.parseScript(),q=z;return T&&v&&(q.comments=v.comments),j.config.tokens&&(q.tokens=j.tokens),j.config.tolerant&&(q.errors=j.errorHandler.errors),q}o.parse=D;function A(y,c,p){var v=c||{};return v.sourceType="module",D(y,v,p)}o.parseModule=A;function S(y,c,p){var v=c||{};return v.sourceType="script",D(y,v,p)}o.parseScript=S;function x(y,c,p){var v=new i.Tokenizer(y,c),C;C=[];try{for(;;){var I=v.getNextToken();if(!I)break;p&&(I=p(I)),C.push(I)}}catch(T){v.errorHandler.tolerate(T)}return v.errorHandler.tolerant&&(C.errors=v.errors()),C}o.tokenize=x;var w=h(2);o.Syntax=w.Syntax,o.version="4.0.1"},function(n,o,h){Object.defineProperty(o,"__esModule",{value:!0});var l=h(2),f=function(){function m(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return m.prototype.insertInnerComments=function(i,D){if(i.type===l.Syntax.BlockStatement&&i.body.length===0){for(var A=[],S=this.leading.length-1;S>=0;--S){var x=this.leading[S];D.end.offset>=x.start&&(A.unshift(x.comment),this.leading.splice(S,1),this.trailing.splice(S,1))}A.length&&(i.innerComments=A)}},m.prototype.findTrailingComments=function(i){var D=[];if(this.trailing.length>0){for(var A=this.trailing.length-1;A>=0;--A){var S=this.trailing[A];S.start>=i.end.offset&&D.unshift(S.comment)}return this.trailing.length=0,D}var x=this.stack[this.stack.length-1];if(x&&x.node.trailingComments){var w=x.node.trailingComments[0];w&&w.range[0]>=i.end.offset&&(D=x.node.trailingComments,delete x.node.trailingComments)}return D},m.prototype.findLeadingComments=function(i){for(var D=[],A;this.stack.length>0;){var S=this.stack[this.stack.length-1];if(S&&S.start>=i.start.offset)A=S.node,this.stack.pop();else break}if(A){for(var x=A.leadingComments?A.leadingComments.length:0,w=x-1;w>=0;--w){var y=A.leadingComments[w];y.range[1]<=i.start.offset&&(D.unshift(y),A.leadingComments.splice(w,1))}return A.leadingComments&&A.leadingComments.length===0&&delete A.leadingComments,D}for(var w=this.leading.length-1;w>=0;--w){var S=this.leading[w];S.start<=i.start.offset&&(D.unshift(S.comment),this.leading.splice(w,1))}return D},m.prototype.visitNode=function(i,D){if(!(i.type===l.Syntax.Program&&i.body.length>0)){this.insertInnerComments(i,D);var A=this.findTrailingComments(D),S=this.findLeadingComments(D);S.length>0&&(i.leadingComments=S),A.length>0&&(i.trailingComments=A),this.stack.push({node:i,start:D.start.offset})}},m.prototype.visitComment=function(i,D){var A=i.type[0]==="L"?"Line":"Block",S={type:A,value:i.value};if(i.range&&(S.range=i.range),i.loc&&(S.loc=i.loc),this.comments.push(S),this.attach){var x={comment:{type:A,value:i.value,range:[D.start.offset,D.end.offset]},start:D.start.offset};i.loc&&(x.comment.loc=i.loc),i.type=A,this.leading.push(x),this.trailing.push(x)}},m.prototype.visit=function(i,D){i.type==="LineComment"?this.visitComment(i,D):i.type==="BlockComment"?this.visitComment(i,D):this.attach&&this.visitNode(i,D)},m}();o.CommentHandler=f},function(n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(n,o,h){var l=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,v){p.__proto__=v}||function(p,v){for(var C in v)v.hasOwnProperty(C)&&(p[C]=v[C])};return function(p,v){c(p,v);function C(){this.constructor=p}p.prototype=v===null?Object.create(v):(C.prototype=v.prototype,new C)}}();Object.defineProperty(o,"__esModule",{value:!0});var f=h(4),m=h(5),i=h(6),D=h(7),A=h(8),S=h(13),x=h(14);S.TokenName[100]="JSXIdentifier",S.TokenName[101]="JSXText";function w(c){var p;switch(c.type){case i.JSXSyntax.JSXIdentifier:var v=c;p=v.name;break;case i.JSXSyntax.JSXNamespacedName:var C=c;p=w(C.namespace)+":"+w(C.name);break;case i.JSXSyntax.JSXMemberExpression:var I=c;p=w(I.object)+"."+w(I.property);break}return p}var y=function(c){l(p,c);function p(v,C,I){return c.call(this,v,C,I)||this}return p.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():c.prototype.parsePrimaryExpression.call(this)},p.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},p.prototype.finishJSX=function(){this.nextToken()},p.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},p.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},p.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},p.prototype.scanXHTMLEntity=function(v){for(var C="&",I=!0,T=!1,L=!1,Y=!1;!this.scanner.eof()&&I&&!T;){var j=this.scanner.source[this.scanner.index];if(j===v)break;if(T=j===";",C+=j,++this.scanner.index,!T)switch(C.length){case 2:L=j==="#";break;case 3:L&&(Y=j==="x",I=Y||f.Character.isDecimalDigit(j.charCodeAt(0)),L=L&&!Y);break;default:I=I&&!(L&&!f.Character.isDecimalDigit(j.charCodeAt(0))),I=I&&!(Y&&!f.Character.isHexDigit(j.charCodeAt(0)));break}}if(I&&T&&C.length>2){var z=C.substr(1,C.length-2);L&&z.length>1?C=String.fromCharCode(parseInt(z.substr(1),10)):Y&&z.length>2?C=String.fromCharCode(parseInt("0"+z.substr(1),16)):!L&&!Y&&x.XHTMLEntities[z]&&(C=x.XHTMLEntities[z])}return C},p.prototype.lexJSX=function(){var v=this.scanner.source.charCodeAt(this.scanner.index);if(v===60||v===62||v===47||v===58||v===61||v===123||v===125){var C=this.scanner.source[this.scanner.index++];return{type:7,value:C,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(v===34||v===39){for(var I=this.scanner.index,T=this.scanner.source[this.scanner.index++],L="";!this.scanner.eof();){var Y=this.scanner.source[this.scanner.index++];if(Y===T)break;Y==="&"?L+=this.scanXHTMLEntity(T):L+=Y}return{type:8,value:L,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:I,end:this.scanner.index}}if(v===46){var j=this.scanner.source.charCodeAt(this.scanner.index+1),z=this.scanner.source.charCodeAt(this.scanner.index+2),C=j===46&&z===46?"...":".",I=this.scanner.index;return this.scanner.index+=C.length,{type:7,value:C,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:I,end:this.scanner.index}}if(v===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(f.Character.isIdentifierStart(v)&&v!==92){var I=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var Y=this.scanner.source.charCodeAt(this.scanner.index);if(f.Character.isIdentifierPart(Y)&&Y!==92)++this.scanner.index;else if(Y===45)++this.scanner.index;else break}var q=this.scanner.source.slice(I,this.scanner.index);return{type:100,value:q,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:I,end:this.scanner.index}}return this.scanner.lex()},p.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var v=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(v)),v},p.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var v=this.scanner.index,C="";!this.scanner.eof();){var I=this.scanner.source[this.scanner.index];if(I==="{"||I==="<")break;++this.scanner.index,C+=I,f.Character.isLineTerminator(I.charCodeAt(0))&&(++this.scanner.lineNumber,I==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var T={type:101,value:C,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:v,end:this.scanner.index};return C.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(T)),T},p.prototype.peekJSXToken=function(){var v=this.scanner.saveState();this.scanner.scanComments();var C=this.lexJSX();return this.scanner.restoreState(v),C},p.prototype.expectJSX=function(v){var C=this.nextJSXToken();(C.type!==7||C.value!==v)&&this.throwUnexpectedToken(C)},p.prototype.matchJSX=function(v){var C=this.peekJSXToken();return C.type===7&&C.value===v},p.prototype.parseJSXIdentifier=function(){var v=this.createJSXNode(),C=this.nextJSXToken();return C.type!==100&&this.throwUnexpectedToken(C),this.finalize(v,new m.JSXIdentifier(C.value))},p.prototype.parseJSXElementName=function(){var v=this.createJSXNode(),C=this.parseJSXIdentifier();if(this.matchJSX(":")){var I=C;this.expectJSX(":");var T=this.parseJSXIdentifier();C=this.finalize(v,new m.JSXNamespacedName(I,T))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var L=C;this.expectJSX(".");var Y=this.parseJSXIdentifier();C=this.finalize(v,new m.JSXMemberExpression(L,Y))}return C},p.prototype.parseJSXAttributeName=function(){var v=this.createJSXNode(),C,I=this.parseJSXIdentifier();if(this.matchJSX(":")){var T=I;this.expectJSX(":");var L=this.parseJSXIdentifier();C=this.finalize(v,new m.JSXNamespacedName(T,L))}else C=I;return C},p.prototype.parseJSXStringLiteralAttribute=function(){var v=this.createJSXNode(),C=this.nextJSXToken();C.type!==8&&this.throwUnexpectedToken(C);var I=this.getTokenRaw(C);return this.finalize(v,new D.Literal(C.value,I))},p.prototype.parseJSXExpressionAttribute=function(){var v=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var C=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(v,new m.JSXExpressionContainer(C))},p.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},p.prototype.parseJSXNameValueAttribute=function(){var v=this.createJSXNode(),C=this.parseJSXAttributeName(),I=null;return this.matchJSX("=")&&(this.expectJSX("="),I=this.parseJSXAttributeValue()),this.finalize(v,new m.JSXAttribute(C,I))},p.prototype.parseJSXSpreadAttribute=function(){var v=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var C=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(v,new m.JSXSpreadAttribute(C))},p.prototype.parseJSXAttributes=function(){for(var v=[];!this.matchJSX("/")&&!this.matchJSX(">");){var C=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();v.push(C)}return v},p.prototype.parseJSXOpeningElement=function(){var v=this.createJSXNode();this.expectJSX("<");var C=this.parseJSXElementName(),I=this.parseJSXAttributes(),T=this.matchJSX("/");return T&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(v,new m.JSXOpeningElement(C,T,I))},p.prototype.parseJSXBoundaryElement=function(){var v=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var C=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(v,new m.JSXClosingElement(C))}var I=this.parseJSXElementName(),T=this.parseJSXAttributes(),L=this.matchJSX("/");return L&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(v,new m.JSXOpeningElement(I,L,T))},p.prototype.parseJSXEmptyExpression=function(){var v=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(v,new m.JSXEmptyExpression)},p.prototype.parseJSXExpressionContainer=function(){var v=this.createJSXNode();this.expectJSX("{");var C;return this.matchJSX("}")?(C=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),C=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(v,new m.JSXExpressionContainer(C))},p.prototype.parseJSXChildren=function(){for(var v=[];!this.scanner.eof();){var C=this.createJSXChildNode(),I=this.nextJSXText();if(I.start<I.end){var T=this.getTokenRaw(I),L=this.finalize(C,new m.JSXText(I.value,T));v.push(L)}if(this.scanner.source[this.scanner.index]==="{"){var Y=this.parseJSXExpressionContainer();v.push(Y)}else break}return v},p.prototype.parseComplexJSXElement=function(v){for(var C=[];!this.scanner.eof();){v.children=v.children.concat(this.parseJSXChildren());var I=this.createJSXChildNode(),T=this.parseJSXBoundaryElement();if(T.type===i.JSXSyntax.JSXOpeningElement){var L=T;if(L.selfClosing){var Y=this.finalize(I,new m.JSXElement(L,[],null));v.children.push(Y)}else C.push(v),v={node:I,opening:L,closing:null,children:[]}}if(T.type===i.JSXSyntax.JSXClosingElement){v.closing=T;var j=w(v.opening.name),z=w(v.closing.name);if(j!==z&&this.tolerateError("Expected corresponding JSX closing tag for %0",j),C.length>0){var Y=this.finalize(v.node,new m.JSXElement(v.opening,v.children,v.closing));v=C[C.length-1],v.children.push(Y),C.pop()}else break}}return v},p.prototype.parseJSXElement=function(){var v=this.createJSXNode(),C=this.parseJSXOpeningElement(),I=[],T=null;if(!C.selfClosing){var L=this.parseComplexJSXElement({node:v,opening:C,closing:T,children:I});I=L.children,T=L.closing}return this.finalize(v,new m.JSXElement(C,I,T))},p.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var v=this.parseJSXElement();return this.finishJSX(),v},p.prototype.isStartOfExpression=function(){return c.prototype.isStartOfExpression.call(this)||this.match("<")},p}(A.Parser);o.JSXParser=y},function(n,o){Object.defineProperty(o,"__esModule",{value:!0});var h={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};o.Character={fromCodePoint:function(l){return l<65536?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10))+String.fromCharCode(56320+(l-65536&1023))},isWhiteSpace:function(l){return l===32||l===9||l===11||l===12||l===160||l>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(l)>=0},isLineTerminator:function(l){return l===10||l===13||l===8232||l===8233},isIdentifierStart:function(l){return l===36||l===95||l>=65&&l<=90||l>=97&&l<=122||l===92||l>=128&&h.NonAsciiIdentifierStart.test(o.Character.fromCodePoint(l))},isIdentifierPart:function(l){return l===36||l===95||l>=65&&l<=90||l>=97&&l<=122||l>=48&&l<=57||l===92||l>=128&&h.NonAsciiIdentifierPart.test(o.Character.fromCodePoint(l))},isDecimalDigit:function(l){return l>=48&&l<=57},isHexDigit:function(l){return l>=48&&l<=57||l>=65&&l<=70||l>=97&&l<=102},isOctalDigit:function(l){return l>=48&&l<=55}}},function(n,o,h){Object.defineProperty(o,"__esModule",{value:!0});var l=h(6),f=function(){function v(C){this.type=l.JSXSyntax.JSXClosingElement,this.name=C}return v}();o.JSXClosingElement=f;var m=function(){function v(C,I,T){this.type=l.JSXSyntax.JSXElement,this.openingElement=C,this.children=I,this.closingElement=T}return v}();o.JSXElement=m;var i=function(){function v(){this.type=l.JSXSyntax.JSXEmptyExpression}return v}();o.JSXEmptyExpression=i;var D=function(){function v(C){this.type=l.JSXSyntax.JSXExpressionContainer,this.expression=C}return v}();o.JSXExpressionContainer=D;var A=function(){function v(C){this.type=l.JSXSyntax.JSXIdentifier,this.name=C}return v}();o.JSXIdentifier=A;var S=function(){function v(C,I){this.type=l.JSXSyntax.JSXMemberExpression,this.object=C,this.property=I}return v}();o.JSXMemberExpression=S;var x=function(){function v(C,I){this.type=l.JSXSyntax.JSXAttribute,this.name=C,this.value=I}return v}();o.JSXAttribute=x;var w=function(){function v(C,I){this.type=l.JSXSyntax.JSXNamespacedName,this.namespace=C,this.name=I}return v}();o.JSXNamespacedName=w;var y=function(){function v(C,I,T){this.type=l.JSXSyntax.JSXOpeningElement,this.name=C,this.selfClosing=I,this.attributes=T}return v}();o.JSXOpeningElement=y;var c=function(){function v(C){this.type=l.JSXSyntax.JSXSpreadAttribute,this.argument=C}return v}();o.JSXSpreadAttribute=c;var p=function(){function v(C,I){this.type=l.JSXSyntax.JSXText,this.value=C,this.raw=I}return v}();o.JSXText=p},function(n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(n,o,h){Object.defineProperty(o,"__esModule",{value:!0});var l=h(2),f=function(){function O(R){this.type=l.Syntax.ArrayExpression,this.elements=R}return O}();o.ArrayExpression=f;var m=function(){function O(R){this.type=l.Syntax.ArrayPattern,this.elements=R}return O}();o.ArrayPattern=m;var i=function(){function O(R,W,tt){this.type=l.Syntax.ArrowFunctionExpression,this.id=null,this.params=R,this.body=W,this.generator=!1,this.expression=tt,this.async=!1}return O}();o.ArrowFunctionExpression=i;var D=function(){function O(R,W,tt){this.type=l.Syntax.AssignmentExpression,this.operator=R,this.left=W,this.right=tt}return O}();o.AssignmentExpression=D;var A=function(){function O(R,W){this.type=l.Syntax.AssignmentPattern,this.left=R,this.right=W}return O}();o.AssignmentPattern=A;var S=function(){function O(R,W,tt){this.type=l.Syntax.ArrowFunctionExpression,this.id=null,this.params=R,this.body=W,this.generator=!1,this.expression=tt,this.async=!0}return O}();o.AsyncArrowFunctionExpression=S;var x=function(){function O(R,W,tt){this.type=l.Syntax.FunctionDeclaration,this.id=R,this.params=W,this.body=tt,this.generator=!1,this.expression=!1,this.async=!0}return O}();o.AsyncFunctionDeclaration=x;var w=function(){function O(R,W,tt){this.type=l.Syntax.FunctionExpression,this.id=R,this.params=W,this.body=tt,this.generator=!1,this.expression=!1,this.async=!0}return O}();o.AsyncFunctionExpression=w;var y=function(){function O(R){this.type=l.Syntax.AwaitExpression,this.argument=R}return O}();o.AwaitExpression=y;var c=function(){function O(R,W,tt){var Ct=R==="||"||R==="&&";this.type=Ct?l.Syntax.LogicalExpression:l.Syntax.BinaryExpression,this.operator=R,this.left=W,this.right=tt}return O}();o.BinaryExpression=c;var p=function(){function O(R){this.type=l.Syntax.BlockStatement,this.body=R}return O}();o.BlockStatement=p;var v=function(){function O(R){this.type=l.Syntax.BreakStatement,this.label=R}return O}();o.BreakStatement=v;var C=function(){function O(R,W){this.type=l.Syntax.CallExpression,this.callee=R,this.arguments=W}return O}();o.CallExpression=C;var I=function(){function O(R,W){this.type=l.Syntax.CatchClause,this.param=R,this.body=W}return O}();o.CatchClause=I;var T=function(){function O(R){this.type=l.Syntax.ClassBody,this.body=R}return O}();o.ClassBody=T;var L=function(){function O(R,W,tt){this.type=l.Syntax.ClassDeclaration,this.id=R,this.superClass=W,this.body=tt}return O}();o.ClassDeclaration=L;var Y=function(){function O(R,W,tt){this.type=l.Syntax.ClassExpression,this.id=R,this.superClass=W,this.body=tt}return O}();o.ClassExpression=Y;var j=function(){function O(R,W){this.type=l.Syntax.MemberExpression,this.computed=!0,this.object=R,this.property=W}return O}();o.ComputedMemberExpression=j;var z=function(){function O(R,W,tt){this.type=l.Syntax.ConditionalExpression,this.test=R,this.consequent=W,this.alternate=tt}return O}();o.ConditionalExpression=z;var q=function(){function O(R){this.type=l.Syntax.ContinueStatement,this.label=R}return O}();o.ContinueStatement=q;var Z=function(){function O(){this.type=l.Syntax.DebuggerStatement}return O}();o.DebuggerStatement=Z;var k=function(){function O(R,W){this.type=l.Syntax.ExpressionStatement,this.expression=R,this.directive=W}return O}();o.Directive=k;var P=function(){function O(R,W){this.type=l.Syntax.DoWhileStatement,this.body=R,this.test=W}return O}();o.DoWhileStatement=P;var g=function(){function O(){this.type=l.Syntax.EmptyStatement}return O}();o.EmptyStatement=g;var B=function(){function O(R){this.type=l.Syntax.ExportAllDeclaration,this.source=R}return O}();o.ExportAllDeclaration=B;var M=function(){function O(R){this.type=l.Syntax.ExportDefaultDeclaration,this.declaration=R}return O}();o.ExportDefaultDeclaration=M;var N=function(){function O(R,W,tt){this.type=l.Syntax.ExportNamedDeclaration,this.declaration=R,this.specifiers=W,this.source=tt}return O}();o.ExportNamedDeclaration=N;var U=function(){function O(R,W){this.type=l.Syntax.ExportSpecifier,this.exported=W,this.local=R}return O}();o.ExportSpecifier=U;var H=function(){function O(R){this.type=l.Syntax.ExpressionStatement,this.expression=R}return O}();o.ExpressionStatement=H;var G=function(){function O(R,W,tt){this.type=l.Syntax.ForInStatement,this.left=R,this.right=W,this.body=tt,this.each=!1}return O}();o.ForInStatement=G;var K=function(){function O(R,W,tt){this.type=l.Syntax.ForOfStatement,this.left=R,this.right=W,this.body=tt}return O}();o.ForOfStatement=K;var ot=function(){function O(R,W,tt,Ct){this.type=l.Syntax.ForStatement,this.init=R,this.test=W,this.update=tt,this.body=Ct}return O}();o.ForStatement=ot;var ut=function(){function O(R,W,tt,Ct){this.type=l.Syntax.FunctionDeclaration,this.id=R,this.params=W,this.body=tt,this.generator=Ct,this.expression=!1,this.async=!1}return O}();o.FunctionDeclaration=ut;var pt=function(){function O(R,W,tt,Ct){this.type=l.Syntax.FunctionExpression,this.id=R,this.params=W,this.body=tt,this.generator=Ct,this.expression=!1,this.async=!1}return O}();o.FunctionExpression=pt;var ft=function(){function O(R){this.type=l.Syntax.Identifier,this.name=R}return O}();o.Identifier=ft;var ht=function(){function O(R,W,tt){this.type=l.Syntax.IfStatement,this.test=R,this.consequent=W,this.alternate=tt}return O}();o.IfStatement=ht;var ct=function(){function O(R,W){this.type=l.Syntax.ImportDeclaration,this.specifiers=R,this.source=W}return O}();o.ImportDeclaration=ct;var St=function(){function O(R){this.type=l.Syntax.ImportDefaultSpecifier,this.local=R}return O}();o.ImportDefaultSpecifier=St;var Tt=function(){function O(R){this.type=l.Syntax.ImportNamespaceSpecifier,this.local=R}return O}();o.ImportNamespaceSpecifier=Tt;var yt=function(){function O(R,W){this.type=l.Syntax.ImportSpecifier,this.local=R,this.imported=W}return O}();o.ImportSpecifier=yt;var gt=function(){function O(R,W){this.type=l.Syntax.LabeledStatement,this.label=R,this.body=W}return O}();o.LabeledStatement=gt;var mt=function(){function O(R,W){this.type=l.Syntax.Literal,this.value=R,this.raw=W}return O}();o.Literal=mt;var Ft=function(){function O(R,W){this.type=l.Syntax.MetaProperty,this.meta=R,this.property=W}return O}();o.MetaProperty=Ft;var It=function(){function O(R,W,tt,Ct,Pe){this.type=l.Syntax.MethodDefinition,this.key=R,this.computed=W,this.value=tt,this.kind=Ct,this.static=Pe}return O}();o.MethodDefinition=It;var bt=function(){function O(R){this.type=l.Syntax.Program,this.body=R,this.sourceType="module"}return O}();o.Module=bt;var Et=function(){function O(R,W){this.type=l.Syntax.NewExpression,this.callee=R,this.arguments=W}return O}();o.NewExpression=Et;var At=function(){function O(R){this.type=l.Syntax.ObjectExpression,this.properties=R}return O}();o.ObjectExpression=At;var xt=function(){function O(R){this.type=l.Syntax.ObjectPattern,this.properties=R}return O}();o.ObjectPattern=xt;var Ot=function(){function O(R,W,tt,Ct,Pe,fi){this.type=l.Syntax.Property,this.key=W,this.computed=tt,this.value=Ct,this.kind=R,this.method=Pe,this.shorthand=fi}return O}();o.Property=Ot;var ie=function(){function O(R,W,tt,Ct){this.type=l.Syntax.Literal,this.value=R,this.raw=W,this.regex={pattern:tt,flags:Ct}}return O}();o.RegexLiteral=ie;var Gt=function(){function O(R){this.type=l.Syntax.RestElement,this.argument=R}return O}();o.RestElement=Gt;var Zt=function(){function O(R){this.type=l.Syntax.ReturnStatement,this.argument=R}return O}();o.ReturnStatement=Zt;var Ce=function(){function O(R){this.type=l.Syntax.Program,this.body=R,this.sourceType="script"}return O}();o.Script=Ce;var De=function(){function O(R){this.type=l.Syntax.SequenceExpression,this.expressions=R}return O}();o.SequenceExpression=De;var Kt=function(){function O(R){this.type=l.Syntax.SpreadElement,this.argument=R}return O}();o.SpreadElement=Kt;var Ee=function(){function O(R,W){this.type=l.Syntax.MemberExpression,this.computed=!1,this.object=R,this.property=W}return O}();o.StaticMemberExpression=Ee;var Ze=function(){function O(){this.type=l.Syntax.Super}return O}();o.Super=Ze;var Ke=function(){function O(R,W){this.type=l.Syntax.SwitchCase,this.test=R,this.consequent=W}return O}();o.SwitchCase=Ke;var Qe=function(){function O(R,W){this.type=l.Syntax.SwitchStatement,this.discriminant=R,this.cases=W}return O}();o.SwitchStatement=Qe;var ti=function(){function O(R,W){this.type=l.Syntax.TaggedTemplateExpression,this.tag=R,this.quasi=W}return O}();o.TaggedTemplateExpression=ti;var ei=function(){function O(R,W){this.type=l.Syntax.TemplateElement,this.value=R,this.tail=W}return O}();o.TemplateElement=ei;var ii=function(){function O(R,W){this.type=l.Syntax.TemplateLiteral,this.quasis=R,this.expressions=W}return O}();o.TemplateLiteral=ii;var ri=function(){function O(){this.type=l.Syntax.ThisExpression}return O}();o.ThisExpression=ri;var ni=function(){function O(R){this.type=l.Syntax.ThrowStatement,this.argument=R}return O}();o.ThrowStatement=ni;var si=function(){function O(R,W,tt){this.type=l.Syntax.TryStatement,this.block=R,this.handler=W,this.finalizer=tt}return O}();o.TryStatement=si;var oi=function(){function O(R,W){this.type=l.Syntax.UnaryExpression,this.operator=R,this.argument=W,this.prefix=!0}return O}();o.UnaryExpression=oi;var ai=function(){function O(R,W,tt){this.type=l.Syntax.UpdateExpression,this.operator=R,this.argument=W,this.prefix=tt}return O}();o.UpdateExpression=ai;var li=function(){function O(R,W){this.type=l.Syntax.VariableDeclaration,this.declarations=R,this.kind=W}return O}();o.VariableDeclaration=li;var ui=function(){function O(R,W){this.type=l.Syntax.VariableDeclarator,this.id=R,this.init=W}return O}();o.VariableDeclarator=ui;var hi=function(){function O(R,W){this.type=l.Syntax.WhileStatement,this.test=R,this.body=W}return O}();o.WhileStatement=hi;var ci=function(){function O(R,W){this.type=l.Syntax.WithStatement,this.object=R,this.body=W}return O}();o.WithStatement=ci;var pi=function(){function O(R,W){this.type=l.Syntax.YieldExpression,this.argument=R,this.delegate=W}return O}();o.YieldExpression=pi},function(n,o,h){Object.defineProperty(o,"__esModule",{value:!0});var l=h(9),f=h(10),m=h(11),i=h(7),D=h(12),A=h(2),S=h(13),x="ArrowParameterPlaceHolder",w=function(){function y(c,p,v){p===void 0&&(p={}),this.config={range:typeof p.range=="boolean"&&p.range,loc:typeof p.loc=="boolean"&&p.loc,source:null,tokens:typeof p.tokens=="boolean"&&p.tokens,comment:typeof p.comment=="boolean"&&p.comment,tolerant:typeof p.tolerant=="boolean"&&p.tolerant},this.config.loc&&p.source&&p.source!==null&&(this.config.source=String(p.source)),this.delegate=v,this.errorHandler=new f.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new D.Scanner(c,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return y.prototype.throwError=function(c){for(var p=[],v=1;v<arguments.length;v++)p[v-1]=arguments[v];var C=Array.prototype.slice.call(arguments,1),I=c.replace(/%(\d)/g,function(j,z){return l.assert(z<C.length,"Message reference must be in range"),C[z]}),T=this.lastMarker.index,L=this.lastMarker.line,Y=this.lastMarker.column+1;throw this.errorHandler.createError(T,L,Y,I)},y.prototype.tolerateError=function(c){for(var p=[],v=1;v<arguments.length;v++)p[v-1]=arguments[v];var C=Array.prototype.slice.call(arguments,1),I=c.replace(/%(\d)/g,function(j,z){return l.assert(z<C.length,"Message reference must be in range"),C[z]}),T=this.lastMarker.index,L=this.scanner.lineNumber,Y=this.lastMarker.column+1;this.errorHandler.tolerateError(T,L,Y,I)},y.prototype.unexpectedTokenError=function(c,p){var v=p||m.Messages.UnexpectedToken,C;if(c?(p||(v=c.type===2?m.Messages.UnexpectedEOS:c.type===3?m.Messages.UnexpectedIdentifier:c.type===6?m.Messages.UnexpectedNumber:c.type===8?m.Messages.UnexpectedString:c.type===10?m.Messages.UnexpectedTemplate:m.Messages.UnexpectedToken,c.type===4&&(this.scanner.isFutureReservedWord(c.value)?v=m.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(c.value)&&(v=m.Messages.StrictReservedWord))),C=c.value):C="ILLEGAL",v=v.replace("%0",C),c&&typeof c.lineNumber=="number"){var I=c.start,T=c.lineNumber,L=this.lastMarker.index-this.lastMarker.column,Y=c.start-L+1;return this.errorHandler.createError(I,T,Y,v)}else{var I=this.lastMarker.index,T=this.lastMarker.line,Y=this.lastMarker.column+1;return this.errorHandler.createError(I,T,Y,v)}},y.prototype.throwUnexpectedToken=function(c,p){throw this.unexpectedTokenError(c,p)},y.prototype.tolerateUnexpectedToken=function(c,p){this.errorHandler.tolerate(this.unexpectedTokenError(c,p))},y.prototype.collectComments=function(){if(!this.config.comment)this.scanner.scanComments();else{var c=this.scanner.scanComments();if(c.length>0&&this.delegate)for(var p=0;p<c.length;++p){var v=c[p],C=void 0;C={type:v.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(v.slice[0],v.slice[1])},this.config.range&&(C.range=v.range),this.config.loc&&(C.loc=v.loc);var I={start:{line:v.loc.start.line,column:v.loc.start.column,offset:v.range[0]},end:{line:v.loc.end.line,column:v.loc.end.column,offset:v.range[1]}};this.delegate(C,I)}}},y.prototype.getTokenRaw=function(c){return this.scanner.source.slice(c.start,c.end)},y.prototype.convertToken=function(c){var p={type:S.TokenName[c.type],value:this.getTokenRaw(c)};if(this.config.range&&(p.range=[c.start,c.end]),this.config.loc&&(p.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),c.type===9){var v=c.pattern,C=c.flags;p.regex={pattern:v,flags:C}}return p},y.prototype.nextToken=function(){var c=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var p=this.scanner.lex();return this.hasLineTerminator=c.lineNumber!==p.lineNumber,p&&this.context.strict&&p.type===3&&this.scanner.isStrictModeReservedWord(p.value)&&(p.type=4),this.lookahead=p,this.config.tokens&&p.type!==2&&this.tokens.push(this.convertToken(p)),c},y.prototype.nextRegexToken=function(){this.collectComments();var c=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(c))),this.lookahead=c,this.nextToken(),c},y.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},y.prototype.startNode=function(c,p){p===void 0&&(p=0);var v=c.start-c.lineStart,C=c.lineNumber;return v<0&&(v+=p,C--),{index:c.start,line:C,column:v}},y.prototype.finalize=function(c,p){if(this.config.range&&(p.range=[c.index,this.lastMarker.index]),this.config.loc&&(p.loc={start:{line:c.line,column:c.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(p.loc.source=this.config.source)),this.delegate){var v={start:{line:c.line,column:c.column,offset:c.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(p,v)}return p},y.prototype.expect=function(c){var p=this.nextToken();(p.type!==7||p.value!==c)&&this.throwUnexpectedToken(p)},y.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var c=this.lookahead;c.type===7&&c.value===","?this.nextToken():c.type===7&&c.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(c)):this.tolerateUnexpectedToken(c,m.Messages.UnexpectedToken)}else this.expect(",")},y.prototype.expectKeyword=function(c){var p=this.nextToken();(p.type!==4||p.value!==c)&&this.throwUnexpectedToken(p)},y.prototype.match=function(c){return this.lookahead.type===7&&this.lookahead.value===c},y.prototype.matchKeyword=function(c){return this.lookahead.type===4&&this.lookahead.value===c},y.prototype.matchContextualKeyword=function(c){return this.lookahead.type===3&&this.lookahead.value===c},y.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var c=this.lookahead.value;return c==="="||c==="*="||c==="**="||c==="/="||c==="%="||c==="+="||c==="-="||c==="<<="||c===">>="||c===">>>="||c==="&="||c==="^="||c==="|="},y.prototype.isolateCoverGrammar=function(c){var p=this.context.isBindingElement,v=this.context.isAssignmentTarget,C=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var I=c.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=p,this.context.isAssignmentTarget=v,this.context.firstCoverInitializedNameError=C,I},y.prototype.inheritCoverGrammar=function(c){var p=this.context.isBindingElement,v=this.context.isAssignmentTarget,C=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var I=c.call(this);return this.context.isBindingElement=this.context.isBindingElement&&p,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&v,this.context.firstCoverInitializedNameError=C||this.context.firstCoverInitializedNameError,I},y.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type!==2&&!this.match("}")&&this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},y.prototype.parsePrimaryExpression=function(){var c=this.createNode(),p,v,C;switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),p=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(c,new i.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,m.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,v=this.nextToken(),C=this.getTokenRaw(v),p=this.finalize(c,new i.Literal(v.value,C));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,v=this.nextToken(),C=this.getTokenRaw(v),p=this.finalize(c,new i.Literal(v.value==="true",C));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,v=this.nextToken(),C=this.getTokenRaw(v),p=this.finalize(c,new i.Literal(null,C));break;case 10:p=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,p=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":p=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":p=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,v=this.nextRegexToken(),C=this.getTokenRaw(v),p=this.finalize(c,new i.RegexLiteral(v.regex,C,v.pattern,v.flags));break;default:p=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?p=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?p=this.finalize(c,new i.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?p=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),p=this.finalize(c,new i.ThisExpression)):this.matchKeyword("class")?p=this.parseClassExpression():p=this.throwUnexpectedToken(this.nextToken()));break;default:p=this.throwUnexpectedToken(this.nextToken())}return p},y.prototype.parseSpreadElement=function(){var c=this.createNode();this.expect("...");var p=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(c,new i.SpreadElement(p))},y.prototype.parseArrayInitializer=function(){var c=this.createNode(),p=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),p.push(null);else if(this.match("...")){var v=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),p.push(v)}else p.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(c,new i.ArrayExpression(p))},y.prototype.parsePropertyMethod=function(c){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var p=this.context.strict,v=this.context.allowStrictDirective;this.context.allowStrictDirective=c.simple;var C=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&c.firstRestricted&&this.tolerateUnexpectedToken(c.firstRestricted,c.message),this.context.strict&&c.stricted&&this.tolerateUnexpectedToken(c.stricted,c.message),this.context.strict=p,this.context.allowStrictDirective=v,C},y.prototype.parsePropertyMethodFunction=function(){var c=!1,p=this.createNode(),v=this.context.allowYield;this.context.allowYield=!0;var C=this.parseFormalParameters(),I=this.parsePropertyMethod(C);return this.context.allowYield=v,this.finalize(p,new i.FunctionExpression(null,C.params,I,c))},y.prototype.parsePropertyMethodAsyncFunction=function(){var c=this.createNode(),p=this.context.allowYield,v=this.context.await;this.context.allowYield=!1,this.context.await=!0;var C=this.parseFormalParameters(),I=this.parsePropertyMethod(C);return this.context.allowYield=p,this.context.await=v,this.finalize(c,new i.AsyncFunctionExpression(null,C.params,I))},y.prototype.parseObjectPropertyKey=function(){var c=this.createNode(),p=this.nextToken(),v;switch(p.type){case 8:case 6:this.context.strict&&p.octal&&this.tolerateUnexpectedToken(p,m.Messages.StrictOctalLiteral);var C=this.getTokenRaw(p);v=this.finalize(c,new i.Literal(p.value,C));break;case 3:case 1:case 5:case 4:v=this.finalize(c,new i.Identifier(p.value));break;case 7:p.value==="["?(v=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):v=this.throwUnexpectedToken(p);break;default:v=this.throwUnexpectedToken(p)}return v},y.prototype.isPropertyKey=function(c,p){return c.type===A.Syntax.Identifier&&c.name===p||c.type===A.Syntax.Literal&&c.value===p},y.prototype.parseObjectProperty=function(c){var p=this.createNode(),v=this.lookahead,C,I=null,T=null,L=!1,Y=!1,j=!1,z=!1;if(v.type===3){var q=v.value;this.nextToken(),L=this.match("["),z=!this.hasLineTerminator&&q==="async"&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","),I=z?this.parseObjectPropertyKey():this.finalize(p,new i.Identifier(q))}else this.match("*")?this.nextToken():(L=this.match("["),I=this.parseObjectPropertyKey());var Z=this.qualifiedPropertyName(this.lookahead);if(v.type===3&&!z&&v.value==="get"&&Z)C="get",L=this.match("["),I=this.parseObjectPropertyKey(),this.context.allowYield=!1,T=this.parseGetterMethod();else if(v.type===3&&!z&&v.value==="set"&&Z)C="set",L=this.match("["),I=this.parseObjectPropertyKey(),T=this.parseSetterMethod();else if(v.type===7&&v.value==="*"&&Z)C="init",L=this.match("["),I=this.parseObjectPropertyKey(),T=this.parseGeneratorMethod(),Y=!0;else if(I||this.throwUnexpectedToken(this.lookahead),C="init",this.match(":")&&!z)!L&&this.isPropertyKey(I,"__proto__")&&(c.value&&this.tolerateError(m.Messages.DuplicateProtoProperty),c.value=!0),this.nextToken(),T=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))T=z?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),Y=!0;else if(v.type===3){var q=this.finalize(p,new i.Identifier(v.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),j=!0;var k=this.isolateCoverGrammar(this.parseAssignmentExpression);T=this.finalize(p,new i.AssignmentPattern(q,k))}else j=!0,T=q}else this.throwUnexpectedToken(this.nextToken());return this.finalize(p,new i.Property(C,I,L,T,Y,j))},y.prototype.parseObjectInitializer=function(){var c=this.createNode();this.expect("{");for(var p=[],v={value:!1};!this.match("}");)p.push(this.parseObjectProperty(v)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(c,new i.ObjectExpression(p))},y.prototype.parseTemplateHead=function(){l.assert(this.lookahead.head,"Template literal must start with a template head");var c=this.createNode(),p=this.nextToken(),v=p.value,C=p.cooked;return this.finalize(c,new i.TemplateElement({raw:v,cooked:C},p.tail))},y.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var c=this.createNode(),p=this.nextToken(),v=p.value,C=p.cooked;return this.finalize(c,new i.TemplateElement({raw:v,cooked:C},p.tail))},y.prototype.parseTemplateLiteral=function(){var c=this.createNode(),p=[],v=[],C=this.parseTemplateHead();for(v.push(C);!C.tail;)p.push(this.parseExpression()),C=this.parseTemplateElement(),v.push(C);return this.finalize(c,new i.TemplateLiteral(v,p))},y.prototype.reinterpretExpressionAsPattern=function(c){switch(c.type){case A.Syntax.Identifier:case A.Syntax.MemberExpression:case A.Syntax.RestElement:case A.Syntax.AssignmentPattern:break;case A.Syntax.SpreadElement:c.type=A.Syntax.RestElement,this.reinterpretExpressionAsPattern(c.argument);break;case A.Syntax.ArrayExpression:c.type=A.Syntax.ArrayPattern;for(var p=0;p<c.elements.length;p++)c.elements[p]!==null&&this.reinterpretExpressionAsPattern(c.elements[p]);break;case A.Syntax.ObjectExpression:c.type=A.Syntax.ObjectPattern;for(var p=0;p<c.properties.length;p++)this.reinterpretExpressionAsPattern(c.properties[p].value);break;case A.Syntax.AssignmentExpression:c.type=A.Syntax.AssignmentPattern,delete c.operator,this.reinterpretExpressionAsPattern(c.left);break}},y.prototype.parseGroupExpression=function(){var c;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),c={type:x,params:[],async:!1};else{var p=this.lookahead,v=[];if(this.match("..."))c=this.parseRestElement(v),this.expect(")"),this.match("=>")||this.expect("=>"),c={type:x,params:[c],async:!1};else{var C=!1;if(this.context.isBindingElement=!0,c=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var I=[];for(this.context.isAssignmentTarget=!1,I.push(c);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var T=0;T<I.length;T++)this.reinterpretExpressionAsPattern(I[T]);C=!0,c={type:x,params:I,async:!1}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),I.push(this.parseRestElement(v)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(var T=0;T<I.length;T++)this.reinterpretExpressionAsPattern(I[T]);C=!0,c={type:x,params:I,async:!1}}else I.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(C)break}C||(c=this.finalize(this.startNode(p),new i.SequenceExpression(I)))}if(!C){if(this.expect(")"),this.match("=>")&&(c.type===A.Syntax.Identifier&&c.name==="yield"&&(C=!0,c={type:x,params:[c],async:!1}),!C)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),c.type===A.Syntax.SequenceExpression)for(var T=0;T<c.expressions.length;T++)this.reinterpretExpressionAsPattern(c.expressions[T]);else this.reinterpretExpressionAsPattern(c);var L=c.type===A.Syntax.SequenceExpression?c.expressions:[c];c={type:x,params:L,async:!1}}this.context.isBindingElement=!1}}}return c},y.prototype.parseArguments=function(){this.expect("(");var c=[];if(!this.match(")"))for(;;){var p=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(c.push(p),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),c},y.prototype.isIdentifierName=function(c){return c.type===3||c.type===4||c.type===1||c.type===5},y.prototype.parseIdentifierName=function(){var c=this.createNode(),p=this.nextToken();return this.isIdentifierName(p)||this.throwUnexpectedToken(p),this.finalize(c,new i.Identifier(p.value))},y.prototype.parseNewExpression=function(){var c=this.createNode(),p=this.parseIdentifierName();l.assert(p.name==="new","New expression must start with `new`");var v;if(this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var C=this.parseIdentifierName();v=new i.MetaProperty(p,C)}else this.throwUnexpectedToken(this.lookahead);else{var I=this.isolateCoverGrammar(this.parseLeftHandSideExpression),T=this.match("(")?this.parseArguments():[];v=new i.NewExpression(I,T),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(c,v)},y.prototype.parseAsyncArgument=function(){var c=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,c},y.prototype.parseAsyncArguments=function(){this.expect("(");var c=[];if(!this.match(")"))for(;;){var p=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(c.push(p),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),c},y.prototype.parseLeftHandSideExpressionAllowCall=function(){var c=this.lookahead,p=this.matchContextualKeyword("async"),v=this.context.allowIn;this.context.allowIn=!0;var C;for(this.matchKeyword("super")&&this.context.inFunctionBody?(C=this.createNode(),this.nextToken(),C=this.finalize(C,new i.Super),!this.match("(")&&!this.match(".")&&!this.match("[")&&this.throwUnexpectedToken(this.lookahead)):C=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var I=this.parseIdentifierName();C=this.finalize(this.startNode(c),new i.StaticMemberExpression(C,I))}else if(this.match("(")){var T=p&&c.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var L=T?this.parseAsyncArguments():this.parseArguments();if(C=this.finalize(this.startNode(c),new i.CallExpression(C,L)),T&&this.match("=>")){for(var Y=0;Y<L.length;++Y)this.reinterpretExpressionAsPattern(L[Y]);C={type:x,params:L,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var I=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),C=this.finalize(this.startNode(c),new i.ComputedMemberExpression(C,I))}else if(this.lookahead.type===10&&this.lookahead.head){var j=this.parseTemplateLiteral();C=this.finalize(this.startNode(c),new i.TaggedTemplateExpression(C,j))}else break;return this.context.allowIn=v,C},y.prototype.parseSuper=function(){var c=this.createNode();return this.expectKeyword("super"),!this.match("[")&&!this.match(".")&&this.throwUnexpectedToken(this.lookahead),this.finalize(c,new i.Super)},y.prototype.parseLeftHandSideExpression=function(){l.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var c=this.startNode(this.lookahead),p=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var v=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),p=this.finalize(c,new i.ComputedMemberExpression(p,v))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var v=this.parseIdentifierName();p=this.finalize(c,new i.StaticMemberExpression(p,v))}else if(this.lookahead.type===10&&this.lookahead.head){var C=this.parseTemplateLiteral();p=this.finalize(c,new i.TaggedTemplateExpression(p,C))}else break;return p},y.prototype.parseUpdateExpression=function(){var c,p=this.lookahead;if(this.match("++")||this.match("--")){var v=this.startNode(p),C=this.nextToken();c=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&c.type===A.Syntax.Identifier&&this.scanner.isRestrictedWord(c.name)&&this.tolerateError(m.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(m.Messages.InvalidLHSInAssignment);var I=!0;c=this.finalize(v,new i.UpdateExpression(C.value,c,I)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(c=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&c.type===A.Syntax.Identifier&&this.scanner.isRestrictedWord(c.name)&&this.tolerateError(m.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(m.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var T=this.nextToken().value,I=!1;c=this.finalize(this.startNode(p),new i.UpdateExpression(T,c,I))}return c},y.prototype.parseAwaitExpression=function(){var c=this.createNode();this.nextToken();var p=this.parseUnaryExpression();return this.finalize(c,new i.AwaitExpression(p))},y.prototype.parseUnaryExpression=function(){var c;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var p=this.startNode(this.lookahead),v=this.nextToken();c=this.inheritCoverGrammar(this.parseUnaryExpression),c=this.finalize(p,new i.UnaryExpression(v.value,c)),this.context.strict&&c.operator==="delete"&&c.argument.type===A.Syntax.Identifier&&this.tolerateError(m.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else this.context.await&&this.matchContextualKeyword("await")?c=this.parseAwaitExpression():c=this.parseUpdateExpression();return c},y.prototype.parseExponentiationExpression=function(){var c=this.lookahead,p=this.inheritCoverGrammar(this.parseUnaryExpression);if(p.type!==A.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var v=p,C=this.isolateCoverGrammar(this.parseExponentiationExpression);p=this.finalize(this.startNode(c),new i.BinaryExpression("**",v,C))}return p},y.prototype.binaryPrecedence=function(c){var p=c.value,v;return c.type===7?v=this.operatorPrecedence[p]||0:c.type===4?v=p==="instanceof"||this.context.allowIn&&p==="in"?7:0:v=0,v},y.prototype.parseBinaryExpression=function(){var c=this.lookahead,p=this.inheritCoverGrammar(this.parseExponentiationExpression),v=this.lookahead,C=this.binaryPrecedence(v);if(C>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var I=[c,this.lookahead],T=p,L=this.isolateCoverGrammar(this.parseExponentiationExpression),Y=[T,v.value,L],j=[C];C=this.binaryPrecedence(this.lookahead),!(C<=0);){for(;Y.length>2&&C<=j[j.length-1];){L=Y.pop();var z=Y.pop();j.pop(),T=Y.pop(),I.pop();var q=this.startNode(I[I.length-1]);Y.push(this.finalize(q,new i.BinaryExpression(z,T,L)))}Y.push(this.nextToken().value),j.push(C),I.push(this.lookahead),Y.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var Z=Y.length-1;p=Y[Z];for(var k=I.pop();Z>1;){var P=I.pop(),g=k&&k.lineStart,q=this.startNode(P,g),z=Y[Z-1];p=this.finalize(q,new i.BinaryExpression(z,Y[Z-2],p)),Z-=2,k=P}}return p},y.prototype.parseConditionalExpression=function(){var c=this.lookahead,p=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var v=this.context.allowIn;this.context.allowIn=!0;var C=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=v,this.expect(":");var I=this.isolateCoverGrammar(this.parseAssignmentExpression);p=this.finalize(this.startNode(c),new i.ConditionalExpression(p,C,I)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return p},y.prototype.checkPatternParam=function(c,p){switch(p.type){case A.Syntax.Identifier:this.validateParam(c,p,p.name);break;case A.Syntax.RestElement:this.checkPatternParam(c,p.argument);break;case A.Syntax.AssignmentPattern:this.checkPatternParam(c,p.left);break;case A.Syntax.ArrayPattern:for(var v=0;v<p.elements.length;v++)p.elements[v]!==null&&this.checkPatternParam(c,p.elements[v]);break;case A.Syntax.ObjectPattern:for(var v=0;v<p.properties.length;v++)this.checkPatternParam(c,p.properties[v].value);break}c.simple=c.simple&&p instanceof i.Identifier},y.prototype.reinterpretAsCoverFormalsList=function(c){var p=[c],v,C=!1;switch(c.type){case A.Syntax.Identifier:break;case x:p=c.params,C=c.async;break;default:return null}v={simple:!0,paramSet:{}};for(var I=0;I<p.length;++I){var T=p[I];T.type===A.Syntax.AssignmentPattern?T.right.type===A.Syntax.YieldExpression&&(T.right.argument&&this.throwUnexpectedToken(this.lookahead),T.right.type=A.Syntax.Identifier,T.right.name="yield",delete T.right.argument,delete T.right.delegate):C&&T.type===A.Syntax.Identifier&&T.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(v,T),p[I]=T}if(this.context.strict||!this.context.allowYield)for(var I=0;I<p.length;++I){var T=p[I];T.type===A.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(v.message===m.Messages.StrictParamDupe){var L=this.context.strict?v.stricted:v.firstRestricted;this.throwUnexpectedToken(L,v.message)}return{simple:v.simple,params:p,stricted:v.stricted,firstRestricted:v.firstRestricted,message:v.message}},y.prototype.parseAssignmentExpression=function(){var c;if(!this.context.allowYield&&this.matchKeyword("yield"))c=this.parseYieldExpression();else{var p=this.lookahead,v=p;if(c=this.parseConditionalExpression(),v.type===3&&v.lineNumber===this.lookahead.lineNumber&&v.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var C=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(C),c={type:x,params:[C],async:!0}}if(c.type===x||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var I=c.async,T=this.reinterpretAsCoverFormalsList(c);if(T){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var L=this.context.strict,Y=this.context.allowStrictDirective;this.context.allowStrictDirective=T.simple;var j=this.context.allowYield,z=this.context.await;this.context.allowYield=!0,this.context.await=I;var q=this.startNode(p);this.expect("=>");var Z=void 0;if(this.match("{")){var k=this.context.allowIn;this.context.allowIn=!0,Z=this.parseFunctionSourceElements(),this.context.allowIn=k}else Z=this.isolateCoverGrammar(this.parseAssignmentExpression);var P=Z.type!==A.Syntax.BlockStatement;this.context.strict&&T.firstRestricted&&this.throwUnexpectedToken(T.firstRestricted,T.message),this.context.strict&&T.stricted&&this.tolerateUnexpectedToken(T.stricted,T.message),c=I?this.finalize(q,new i.AsyncArrowFunctionExpression(T.params,Z,P)):this.finalize(q,new i.ArrowFunctionExpression(T.params,Z,P)),this.context.strict=L,this.context.allowStrictDirective=Y,this.context.allowYield=j,this.context.await=z}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(m.Messages.InvalidLHSInAssignment),this.context.strict&&c.type===A.Syntax.Identifier){var g=c;this.scanner.isRestrictedWord(g.name)&&this.tolerateUnexpectedToken(v,m.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(g.name)&&this.tolerateUnexpectedToken(v,m.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(c):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),v=this.nextToken();var B=v.value,M=this.isolateCoverGrammar(this.parseAssignmentExpression);c=this.finalize(this.startNode(p),new i.AssignmentExpression(B,c,M)),this.context.firstCoverInitializedNameError=null}}return c},y.prototype.parseExpression=function(){var c=this.lookahead,p=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var v=[];for(v.push(p);this.lookahead.type!==2&&this.match(",");)this.nextToken(),v.push(this.isolateCoverGrammar(this.parseAssignmentExpression));p=this.finalize(this.startNode(c),new i.SequenceExpression(v))}return p},y.prototype.parseStatementListItem=function(){var c;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,m.Messages.IllegalExportDeclaration),c=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,m.Messages.IllegalImportDeclaration),c=this.parseImportDeclaration();break;case"const":c=this.parseLexicalDeclaration({inFor:!1});break;case"function":c=this.parseFunctionDeclaration();break;case"class":c=this.parseClassDeclaration();break;case"let":c=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:c=this.parseStatement();break}else c=this.parseStatement();return c},y.prototype.parseBlock=function(){var c=this.createNode();this.expect("{");for(var p=[];!this.match("}");)p.push(this.parseStatementListItem());return this.expect("}"),this.finalize(c,new i.BlockStatement(p))},y.prototype.parseLexicalBinding=function(c,p){var v=this.createNode(),C=[],I=this.parsePattern(C,c);this.context.strict&&I.type===A.Syntax.Identifier&&this.scanner.isRestrictedWord(I.name)&&this.tolerateError(m.Messages.StrictVarName);var T=null;return c==="const"?!this.matchKeyword("in")&&!this.matchContextualKeyword("of")&&(this.match("=")?(this.nextToken(),T=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(m.Messages.DeclarationMissingInitializer,"const")):(!p.inFor&&I.type!==A.Syntax.Identifier||this.match("="))&&(this.expect("="),T=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(v,new i.VariableDeclarator(I,T))},y.prototype.parseBindingList=function(c,p){for(var v=[this.parseLexicalBinding(c,p)];this.match(",");)this.nextToken(),v.push(this.parseLexicalBinding(c,p));return v},y.prototype.isLexicalDeclaration=function(){var c=this.scanner.saveState();this.scanner.scanComments();var p=this.scanner.lex();return this.scanner.restoreState(c),p.type===3||p.type===7&&p.value==="["||p.type===7&&p.value==="{"||p.type===4&&p.value==="let"||p.type===4&&p.value==="yield"},y.prototype.parseLexicalDeclaration=function(c){var p=this.createNode(),v=this.nextToken().value;l.assert(v==="let"||v==="const","Lexical declaration must be either let or const");var C=this.parseBindingList(v,c);return this.consumeSemicolon(),this.finalize(p,new i.VariableDeclaration(C,v))},y.prototype.parseBindingRestElement=function(c,p){var v=this.createNode();this.expect("...");var C=this.parsePattern(c,p);return this.finalize(v,new i.RestElement(C))},y.prototype.parseArrayPattern=function(c,p){var v=this.createNode();this.expect("[");for(var C=[];!this.match("]");)if(this.match(","))this.nextToken(),C.push(null);else{if(this.match("...")){C.push(this.parseBindingRestElement(c,p));break}else C.push(this.parsePatternWithDefault(c,p));this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(v,new i.ArrayPattern(C))},y.prototype.parsePropertyPattern=function(c,p){var v=this.createNode(),C=!1,I=!1,T=!1,L,Y;if(this.lookahead.type===3){var j=this.lookahead;L=this.parseVariableIdentifier();var z=this.finalize(v,new i.Identifier(j.value));if(this.match("=")){c.push(j),I=!0,this.nextToken();var q=this.parseAssignmentExpression();Y=this.finalize(this.startNode(j),new i.AssignmentPattern(z,q))}else this.match(":")?(this.expect(":"),Y=this.parsePatternWithDefault(c,p)):(c.push(j),I=!0,Y=z)}else C=this.match("["),L=this.parseObjectPropertyKey(),this.expect(":"),Y=this.parsePatternWithDefault(c,p);return this.finalize(v,new i.Property("init",L,C,Y,T,I))},y.prototype.parseObjectPattern=function(c,p){var v=this.createNode(),C=[];for(this.expect("{");!this.match("}");)C.push(this.parsePropertyPattern(c,p)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(v,new i.ObjectPattern(C))},y.prototype.parsePattern=function(c,p){var v;return this.match("[")?v=this.parseArrayPattern(c,p):this.match("{")?v=this.parseObjectPattern(c,p):(this.matchKeyword("let")&&(p==="const"||p==="let")&&this.tolerateUnexpectedToken(this.lookahead,m.Messages.LetInLexicalBinding),c.push(this.lookahead),v=this.parseVariableIdentifier(p)),v},y.prototype.parsePatternWithDefault=function(c,p){var v=this.lookahead,C=this.parsePattern(c,p);if(this.match("=")){this.nextToken();var I=this.context.allowYield;this.context.allowYield=!0;var T=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=I,C=this.finalize(this.startNode(v),new i.AssignmentPattern(C,T))}return C},y.prototype.parseVariableIdentifier=function(c){var p=this.createNode(),v=this.nextToken();return v.type===4&&v.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(v,m.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(v):v.type!==3?this.context.strict&&v.type===4&&this.scanner.isStrictModeReservedWord(v.value)?this.tolerateUnexpectedToken(v,m.Messages.StrictReservedWord):(this.context.strict||v.value!=="let"||c!=="var")&&this.throwUnexpectedToken(v):(this.context.isModule||this.context.await)&&v.type===3&&v.value==="await"&&this.tolerateUnexpectedToken(v),this.finalize(p,new i.Identifier(v.value))},y.prototype.parseVariableDeclaration=function(c){var p=this.createNode(),v=[],C=this.parsePattern(v,"var");this.context.strict&&C.type===A.Syntax.Identifier&&this.scanner.isRestrictedWord(C.name)&&this.tolerateError(m.Messages.StrictVarName);var I=null;return this.match("=")?(this.nextToken(),I=this.isolateCoverGrammar(this.parseAssignmentExpression)):C.type!==A.Syntax.Identifier&&!c.inFor&&this.expect("="),this.finalize(p,new i.VariableDeclarator(C,I))},y.prototype.parseVariableDeclarationList=function(c){var p={inFor:c.inFor},v=[];for(v.push(this.parseVariableDeclaration(p));this.match(",");)this.nextToken(),v.push(this.parseVariableDeclaration(p));return v},y.prototype.parseVariableStatement=function(){var c=this.createNode();this.expectKeyword("var");var p=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(c,new i.VariableDeclaration(p,"var"))},y.prototype.parseEmptyStatement=function(){var c=this.createNode();return this.expect(";"),this.finalize(c,new i.EmptyStatement)},y.prototype.parseExpressionStatement=function(){var c=this.createNode(),p=this.parseExpression();return this.consumeSemicolon(),this.finalize(c,new i.ExpressionStatement(p))},y.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(m.Messages.StrictFunction),this.parseStatement()},y.prototype.parseIfStatement=function(){var c=this.createNode(),p,v=null;this.expectKeyword("if"),this.expect("(");var C=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),p=this.finalize(this.createNode(),new i.EmptyStatement)):(this.expect(")"),p=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),v=this.parseIfClause())),this.finalize(c,new i.IfStatement(C,p,v))},y.prototype.parseDoWhileStatement=function(){var c=this.createNode();this.expectKeyword("do");var p=this.context.inIteration;this.context.inIteration=!0;var v=this.parseStatement();this.context.inIteration=p,this.expectKeyword("while"),this.expect("(");var C=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(c,new i.DoWhileStatement(v,C))},y.prototype.parseWhileStatement=function(){var c=this.createNode(),p;this.expectKeyword("while"),this.expect("(");var v=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),p=this.finalize(this.createNode(),new i.EmptyStatement);else{this.expect(")");var C=this.context.inIteration;this.context.inIteration=!0,p=this.parseStatement(),this.context.inIteration=C}return this.finalize(c,new i.WhileStatement(v,p))},y.prototype.parseForStatement=function(){var c=null,p=null,v=null,C=!0,I,T,L=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){c=this.createNode(),this.nextToken();var Y=this.context.allowIn;this.context.allowIn=!1;var j=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=Y,j.length===1&&this.matchKeyword("in")){var z=j[0];z.init&&(z.id.type===A.Syntax.ArrayPattern||z.id.type===A.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(m.Messages.ForInOfLoopInitializer,"for-in"),c=this.finalize(c,new i.VariableDeclaration(j,"var")),this.nextToken(),I=c,T=this.parseExpression(),c=null}else j.length===1&&j[0].init===null&&this.matchContextualKeyword("of")?(c=this.finalize(c,new i.VariableDeclaration(j,"var")),this.nextToken(),I=c,T=this.parseAssignmentExpression(),c=null,C=!1):(c=this.finalize(c,new i.VariableDeclaration(j,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){c=this.createNode();var q=this.nextToken().value;if(!this.context.strict&&this.lookahead.value==="in")c=this.finalize(c,new i.Identifier(q)),this.nextToken(),I=c,T=this.parseExpression(),c=null;else{var Y=this.context.allowIn;this.context.allowIn=!1;var j=this.parseBindingList(q,{inFor:!0});this.context.allowIn=Y,j.length===1&&j[0].init===null&&this.matchKeyword("in")?(c=this.finalize(c,new i.VariableDeclaration(j,q)),this.nextToken(),I=c,T=this.parseExpression(),c=null):j.length===1&&j[0].init===null&&this.matchContextualKeyword("of")?(c=this.finalize(c,new i.VariableDeclaration(j,q)),this.nextToken(),I=c,T=this.parseAssignmentExpression(),c=null,C=!1):(this.consumeSemicolon(),c=this.finalize(c,new i.VariableDeclaration(j,q)))}}else{var Z=this.lookahead,Y=this.context.allowIn;if(this.context.allowIn=!1,c=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=Y,this.matchKeyword("in"))(!this.context.isAssignmentTarget||c.type===A.Syntax.AssignmentExpression)&&this.tolerateError(m.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(c),I=c,T=this.parseExpression(),c=null;else if(this.matchContextualKeyword("of"))(!this.context.isAssignmentTarget||c.type===A.Syntax.AssignmentExpression)&&this.tolerateError(m.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(c),I=c,T=this.parseAssignmentExpression(),c=null,C=!1;else{if(this.match(",")){for(var k=[c];this.match(",");)this.nextToken(),k.push(this.isolateCoverGrammar(this.parseAssignmentExpression));c=this.finalize(this.startNode(Z),new i.SequenceExpression(k))}this.expect(";")}}typeof I=="undefined"&&(this.match(";")||(p=this.parseExpression()),this.expect(";"),this.match(")")||(v=this.parseExpression()));var P;if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),P=this.finalize(this.createNode(),new i.EmptyStatement);else{this.expect(")");var g=this.context.inIteration;this.context.inIteration=!0,P=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=g}return typeof I=="undefined"?this.finalize(L,new i.ForStatement(c,p,v,P)):C?this.finalize(L,new i.ForInStatement(I,T,P)):this.finalize(L,new i.ForOfStatement(I,T,P))},y.prototype.parseContinueStatement=function(){var c=this.createNode();this.expectKeyword("continue");var p=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var v=this.parseVariableIdentifier();p=v;var C="$"+v.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,C)||this.throwError(m.Messages.UnknownLabel,v.name)}return this.consumeSemicolon(),p===null&&!this.context.inIteration&&this.throwError(m.Messages.IllegalContinue),this.finalize(c,new i.ContinueStatement(p))},y.prototype.parseBreakStatement=function(){var c=this.createNode();this.expectKeyword("break");var p=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var v=this.parseVariableIdentifier(),C="$"+v.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,C)||this.throwError(m.Messages.UnknownLabel,v.name),p=v}return this.consumeSemicolon(),p===null&&!this.context.inIteration&&!this.context.inSwitch&&this.throwError(m.Messages.IllegalBreak),this.finalize(c,new i.BreakStatement(p))},y.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(m.Messages.IllegalReturn);var c=this.createNode();this.expectKeyword("return");var p=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&this.lookahead.type!==2||this.lookahead.type===8||this.lookahead.type===10,v=p?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(c,new i.ReturnStatement(v))},y.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(m.Messages.StrictModeWith);var c=this.createNode(),p;this.expectKeyword("with"),this.expect("(");var v=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),p=this.finalize(this.createNode(),new i.EmptyStatement)):(this.expect(")"),p=this.parseStatement()),this.finalize(c,new i.WithStatement(v,p))},y.prototype.parseSwitchCase=function(){var c=this.createNode(),p;this.matchKeyword("default")?(this.nextToken(),p=null):(this.expectKeyword("case"),p=this.parseExpression()),this.expect(":");for(var v=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)v.push(this.parseStatementListItem());return this.finalize(c,new i.SwitchCase(p,v))},y.prototype.parseSwitchStatement=function(){var c=this.createNode();this.expectKeyword("switch"),this.expect("(");var p=this.parseExpression();this.expect(")");var v=this.context.inSwitch;this.context.inSwitch=!0;var C=[],I=!1;for(this.expect("{");!this.match("}");){var T=this.parseSwitchCase();T.test===null&&(I&&this.throwError(m.Messages.MultipleDefaultsInSwitch),I=!0),C.push(T)}return this.expect("}"),this.context.inSwitch=v,this.finalize(c,new i.SwitchStatement(p,C))},y.prototype.parseLabelledStatement=function(){var c=this.createNode(),p=this.parseExpression(),v;if(p.type===A.Syntax.Identifier&&this.match(":")){this.nextToken();var C=p,I="$"+C.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,I)&&this.throwError(m.Messages.Redeclaration,"Label",C.name),this.context.labelSet[I]=!0;var T=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),T=this.parseClassDeclaration();else if(this.matchKeyword("function")){var L=this.lookahead,Y=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(L,m.Messages.StrictFunction):Y.generator&&this.tolerateUnexpectedToken(L,m.Messages.GeneratorInLegacyContext),T=Y}else T=this.parseStatement();delete this.context.labelSet[I],v=new i.LabeledStatement(C,T)}else this.consumeSemicolon(),v=new i.ExpressionStatement(p);return this.finalize(c,v)},y.prototype.parseThrowStatement=function(){var c=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(m.Messages.NewlineAfterThrow);var p=this.parseExpression();return this.consumeSemicolon(),this.finalize(c,new i.ThrowStatement(p))},y.prototype.parseCatchClause=function(){var c=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var p=[],v=this.parsePattern(p),C={},I=0;I<p.length;I++){var T="$"+p[I].value;Object.prototype.hasOwnProperty.call(C,T)&&this.tolerateError(m.Messages.DuplicateBinding,p[I].value),C[T]=!0}this.context.strict&&v.type===A.Syntax.Identifier&&this.scanner.isRestrictedWord(v.name)&&this.tolerateError(m.Messages.StrictCatchVariable),this.expect(")");var L=this.parseBlock();return this.finalize(c,new i.CatchClause(v,L))},y.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},y.prototype.parseTryStatement=function(){var c=this.createNode();this.expectKeyword("try");var p=this.parseBlock(),v=this.matchKeyword("catch")?this.parseCatchClause():null,C=this.matchKeyword("finally")?this.parseFinallyClause():null;return!v&&!C&&this.throwError(m.Messages.NoCatchOrFinally),this.finalize(c,new i.TryStatement(p,v,C))},y.prototype.parseDebuggerStatement=function(){var c=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(c,new i.DebuggerStatement)},y.prototype.parseStatement=function(){var c;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:c=this.parseExpressionStatement();break;case 7:var p=this.lookahead.value;p==="{"?c=this.parseBlock():p==="("?c=this.parseExpressionStatement():p===";"?c=this.parseEmptyStatement():c=this.parseExpressionStatement();break;case 3:c=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":c=this.parseBreakStatement();break;case"continue":c=this.parseContinueStatement();break;case"debugger":c=this.parseDebuggerStatement();break;case"do":c=this.parseDoWhileStatement();break;case"for":c=this.parseForStatement();break;case"function":c=this.parseFunctionDeclaration();break;case"if":c=this.parseIfStatement();break;case"return":c=this.parseReturnStatement();break;case"switch":c=this.parseSwitchStatement();break;case"throw":c=this.parseThrowStatement();break;case"try":c=this.parseTryStatement();break;case"var":c=this.parseVariableStatement();break;case"while":c=this.parseWhileStatement();break;case"with":c=this.parseWithStatement();break;default:c=this.parseExpressionStatement();break}break;default:c=this.throwUnexpectedToken(this.lookahead)}return c},y.prototype.parseFunctionSourceElements=function(){var c=this.createNode();this.expect("{");var p=this.parseDirectivePrologues(),v=this.context.labelSet,C=this.context.inIteration,I=this.context.inSwitch,T=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)p.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=v,this.context.inIteration=C,this.context.inSwitch=I,this.context.inFunctionBody=T,this.finalize(c,new i.BlockStatement(p))},y.prototype.validateParam=function(c,p,v){var C="$"+v;this.context.strict?(this.scanner.isRestrictedWord(v)&&(c.stricted=p,c.message=m.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(c.paramSet,C)&&(c.stricted=p,c.message=m.Messages.StrictParamDupe)):c.firstRestricted||(this.scanner.isRestrictedWord(v)?(c.firstRestricted=p,c.message=m.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(v)?(c.firstRestricted=p,c.message=m.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(c.paramSet,C)&&(c.stricted=p,c.message=m.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(c.paramSet,C,{value:!0,enumerable:!0,writable:!0,configurable:!0}):c.paramSet[C]=!0},y.prototype.parseRestElement=function(c){var p=this.createNode();this.expect("...");var v=this.parsePattern(c);return this.match("=")&&this.throwError(m.Messages.DefaultRestParameter),this.match(")")||this.throwError(m.Messages.ParameterAfterRestParameter),this.finalize(p,new i.RestElement(v))},y.prototype.parseFormalParameter=function(c){for(var p=[],v=this.match("...")?this.parseRestElement(p):this.parsePatternWithDefault(p),C=0;C<p.length;C++)this.validateParam(c,p[C],p[C].value);c.simple=c.simple&&v instanceof i.Identifier,c.params.push(v)},y.prototype.parseFormalParameters=function(c){var p;if(p={simple:!0,params:[],firstRestricted:c},this.expect("("),!this.match(")"))for(p.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(p),!(this.match(")")||(this.expect(","),this.match(")")))););return this.expect(")"),{simple:p.simple,params:p.params,stricted:p.stricted,firstRestricted:p.firstRestricted,message:p.message}},y.prototype.matchAsyncFunction=function(){var c=this.matchContextualKeyword("async");if(c){var p=this.scanner.saveState();this.scanner.scanComments();var v=this.scanner.lex();this.scanner.restoreState(p),c=p.lineNumber===v.lineNumber&&v.type===4&&v.value==="function"}return c},y.prototype.parseFunctionDeclaration=function(c){var p=this.createNode(),v=this.matchContextualKeyword("async");v&&this.nextToken(),this.expectKeyword("function");var C=v?!1:this.match("*");C&&this.nextToken();var I,T=null,L=null;if(!c||!this.match("(")){var Y=this.lookahead;T=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(Y.value)&&this.tolerateUnexpectedToken(Y,m.Messages.StrictFunctionName):this.scanner.isRestrictedWord(Y.value)?(L=Y,I=m.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(Y.value)&&(L=Y,I=m.Messages.StrictReservedWord)}var j=this.context.await,z=this.context.allowYield;this.context.await=v,this.context.allowYield=!C;var q=this.parseFormalParameters(L),Z=q.params,k=q.stricted;L=q.firstRestricted,q.message&&(I=q.message);var P=this.context.strict,g=this.context.allowStrictDirective;this.context.allowStrictDirective=q.simple;var B=this.parseFunctionSourceElements();return this.context.strict&&L&&this.throwUnexpectedToken(L,I),this.context.strict&&k&&this.tolerateUnexpectedToken(k,I),this.context.strict=P,this.context.allowStrictDirective=g,this.context.await=j,this.context.allowYield=z,v?this.finalize(p,new i.AsyncFunctionDeclaration(T,Z,B)):this.finalize(p,new i.FunctionDeclaration(T,Z,B,C))},y.prototype.parseFunctionExpression=function(){var c=this.createNode(),p=this.matchContextualKeyword("async");p&&this.nextToken(),this.expectKeyword("function");var v=p?!1:this.match("*");v&&this.nextToken();var C,I=null,T,L=this.context.await,Y=this.context.allowYield;if(this.context.await=p,this.context.allowYield=!v,!this.match("(")){var j=this.lookahead;I=!this.context.strict&&!v&&this.matchKeyword("yield")?this.parseIdentifierName():this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(j.value)&&this.tolerateUnexpectedToken(j,m.Messages.StrictFunctionName):this.scanner.isRestrictedWord(j.value)?(T=j,C=m.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(j.value)&&(T=j,C=m.Messages.StrictReservedWord)}var z=this.parseFormalParameters(T),q=z.params,Z=z.stricted;T=z.firstRestricted,z.message&&(C=z.message);var k=this.context.strict,P=this.context.allowStrictDirective;this.context.allowStrictDirective=z.simple;var g=this.parseFunctionSourceElements();return this.context.strict&&T&&this.throwUnexpectedToken(T,C),this.context.strict&&Z&&this.tolerateUnexpectedToken(Z,C),this.context.strict=k,this.context.allowStrictDirective=P,this.context.await=L,this.context.allowYield=Y,p?this.finalize(c,new i.AsyncFunctionExpression(I,q,g)):this.finalize(c,new i.FunctionExpression(I,q,g,v))},y.prototype.parseDirective=function(){var c=this.lookahead,p=this.createNode(),v=this.parseExpression(),C=v.type===A.Syntax.Literal?this.getTokenRaw(c).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(p,C?new i.Directive(v,C):new i.ExpressionStatement(v))},y.prototype.parseDirectivePrologues=function(){for(var c=null,p=[];;){var v=this.lookahead;if(v.type!==8)break;var C=this.parseDirective();p.push(C);var I=C.directive;if(typeof I!="string")break;I==="use strict"?(this.context.strict=!0,c&&this.tolerateUnexpectedToken(c,m.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(v,m.Messages.IllegalLanguageModeDirective)):!c&&v.octal&&(c=v)}return p},y.prototype.qualifiedPropertyName=function(c){switch(c.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return c.value==="["}return!1},y.prototype.parseGetterMethod=function(){var c=this.createNode(),p=!1,v=this.context.allowYield;this.context.allowYield=!p;var C=this.parseFormalParameters();C.params.length>0&&this.tolerateError(m.Messages.BadGetterArity);var I=this.parsePropertyMethod(C);return this.context.allowYield=v,this.finalize(c,new i.FunctionExpression(null,C.params,I,p))},y.prototype.parseSetterMethod=function(){var c=this.createNode(),p=!1,v=this.context.allowYield;this.context.allowYield=!p;var C=this.parseFormalParameters();C.params.length!==1?this.tolerateError(m.Messages.BadSetterArity):C.params[0]instanceof i.RestElement&&this.tolerateError(m.Messages.BadSetterRestParameter);var I=this.parsePropertyMethod(C);return this.context.allowYield=v,this.finalize(c,new i.FunctionExpression(null,C.params,I,p))},y.prototype.parseGeneratorMethod=function(){var c=this.createNode(),p=!0,v=this.context.allowYield;this.context.allowYield=!0;var C=this.parseFormalParameters();this.context.allowYield=!1;var I=this.parsePropertyMethod(C);return this.context.allowYield=v,this.finalize(c,new i.FunctionExpression(null,C.params,I,p))},y.prototype.isStartOfExpression=function(){var c=!0,p=this.lookahead.value;switch(this.lookahead.type){case 7:c=p==="["||p==="("||p==="{"||p==="+"||p==="-"||p==="!"||p==="~"||p==="++"||p==="--"||p==="/"||p==="/=";break;case 4:c=p==="class"||p==="delete"||p==="function"||p==="let"||p==="new"||p==="super"||p==="this"||p==="typeof"||p==="void"||p==="yield";break}return c},y.prototype.parseYieldExpression=function(){var c=this.createNode();this.expectKeyword("yield");var p=null,v=!1;if(!this.hasLineTerminator){var C=this.context.allowYield;this.context.allowYield=!1,v=this.match("*"),v?(this.nextToken(),p=this.parseAssignmentExpression()):this.isStartOfExpression()&&(p=this.parseAssignmentExpression()),this.context.allowYield=C}return this.finalize(c,new i.YieldExpression(p,v))},y.prototype.parseClassElement=function(c){var p=this.lookahead,v=this.createNode(),C="",I=null,T=null,L=!1,Y=!1,j=!1,z=!1;if(this.match("*"))this.nextToken();else{L=this.match("["),I=this.parseObjectPropertyKey();var q=I;if(q.name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(p=this.lookahead,j=!0,L=this.match("["),this.match("*")?this.nextToken():I=this.parseObjectPropertyKey()),p.type===3&&!this.hasLineTerminator&&p.value==="async"){var Z=this.lookahead.value;Z!==":"&&Z!=="("&&Z!=="*"&&(z=!0,p=this.lookahead,I=this.parseObjectPropertyKey(),p.type===3&&p.value==="constructor"&&this.tolerateUnexpectedToken(p,m.Messages.ConstructorIsAsync))}}var k=this.qualifiedPropertyName(this.lookahead);return p.type===3?p.value==="get"&&k?(C="get",L=this.match("["),I=this.parseObjectPropertyKey(),this.context.allowYield=!1,T=this.parseGetterMethod()):p.value==="set"&&k&&(C="set",L=this.match("["),I=this.parseObjectPropertyKey(),T=this.parseSetterMethod()):p.type===7&&p.value==="*"&&k&&(C="init",L=this.match("["),I=this.parseObjectPropertyKey(),T=this.parseGeneratorMethod(),Y=!0),!C&&I&&this.match("(")&&(C="init",T=z?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),Y=!0),C||this.throwUnexpectedToken(this.lookahead),C==="init"&&(C="method"),L||(j&&this.isPropertyKey(I,"prototype")&&this.throwUnexpectedToken(p,m.Messages.StaticPrototype),!j&&this.isPropertyKey(I,"constructor")&&((C!=="method"||!Y||T&&T.generator)&&this.throwUnexpectedToken(p,m.Messages.ConstructorSpecialMethod),c.value?this.throwUnexpectedToken(p,m.Messages.DuplicateConstructor):c.value=!0,C="constructor")),this.finalize(v,new i.MethodDefinition(I,L,T,C,j))},y.prototype.parseClassElementList=function(){var c=[],p={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():c.push(this.parseClassElement(p));return this.expect("}"),c},y.prototype.parseClassBody=function(){var c=this.createNode(),p=this.parseClassElementList();return this.finalize(c,new i.ClassBody(p))},y.prototype.parseClassDeclaration=function(c){var p=this.createNode(),v=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var C=c&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),I=null;this.matchKeyword("extends")&&(this.nextToken(),I=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var T=this.parseClassBody();return this.context.strict=v,this.finalize(p,new i.ClassDeclaration(C,I,T))},y.prototype.parseClassExpression=function(){var c=this.createNode(),p=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var v=this.lookahead.type===3?this.parseVariableIdentifier():null,C=null;this.matchKeyword("extends")&&(this.nextToken(),C=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var I=this.parseClassBody();return this.context.strict=p,this.finalize(c,new i.ClassExpression(v,C,I))},y.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var c=this.createNode(),p=this.parseDirectivePrologues();this.lookahead.type!==2;)p.push(this.parseStatementListItem());return this.finalize(c,new i.Module(p))},y.prototype.parseScript=function(){for(var c=this.createNode(),p=this.parseDirectivePrologues();this.lookahead.type!==2;)p.push(this.parseStatementListItem());return this.finalize(c,new i.Script(p))},y.prototype.parseModuleSpecifier=function(){var c=this.createNode();this.lookahead.type!==8&&this.throwError(m.Messages.InvalidModuleSpecifier);var p=this.nextToken(),v=this.getTokenRaw(p);return this.finalize(c,new i.Literal(p.value,v))},y.prototype.parseImportSpecifier=function(){var c=this.createNode(),p,v;return this.lookahead.type===3?(p=this.parseVariableIdentifier(),v=p,this.matchContextualKeyword("as")&&(this.nextToken(),v=this.parseVariableIdentifier())):(p=this.parseIdentifierName(),v=p,this.matchContextualKeyword("as")?(this.nextToken(),v=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(c,new i.ImportSpecifier(v,p))},y.prototype.parseNamedImports=function(){this.expect("{");for(var c=[];!this.match("}");)c.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),c},y.prototype.parseImportDefaultSpecifier=function(){var c=this.createNode(),p=this.parseIdentifierName();return this.finalize(c,new i.ImportDefaultSpecifier(p))},y.prototype.parseImportNamespaceSpecifier=function(){var c=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(m.Messages.NoAsAfterImportNamespace),this.nextToken();var p=this.parseIdentifierName();return this.finalize(c,new i.ImportNamespaceSpecifier(p))},y.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(m.Messages.IllegalImportDeclaration);var c=this.createNode();this.expectKeyword("import");var p,v=[];if(this.lookahead.type===8)p=this.parseModuleSpecifier();else{if(this.match("{")?v=v.concat(this.parseNamedImports()):this.match("*")?v.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(v.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?v.push(this.parseImportNamespaceSpecifier()):this.match("{")?v=v.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var C=this.lookahead.value?m.Messages.UnexpectedToken:m.Messages.MissingFromClause;this.throwError(C,this.lookahead.value)}this.nextToken(),p=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(c,new i.ImportDeclaration(v,p))},y.prototype.parseExportSpecifier=function(){var c=this.createNode(),p=this.parseIdentifierName(),v=p;return this.matchContextualKeyword("as")&&(this.nextToken(),v=this.parseIdentifierName()),this.finalize(c,new i.ExportSpecifier(p,v))},y.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(m.Messages.IllegalExportDeclaration);var c=this.createNode();this.expectKeyword("export");var p;if(this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var v=this.parseFunctionDeclaration(!0);p=this.finalize(c,new i.ExportDefaultDeclaration(v))}else if(this.matchKeyword("class")){var v=this.parseClassDeclaration(!0);p=this.finalize(c,new i.ExportDefaultDeclaration(v))}else if(this.matchContextualKeyword("async")){var v=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression();p=this.finalize(c,new i.ExportDefaultDeclaration(v))}else{this.matchContextualKeyword("from")&&this.throwError(m.Messages.UnexpectedToken,this.lookahead.value);var v=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),p=this.finalize(c,new i.ExportDefaultDeclaration(v))}else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var C=this.lookahead.value?m.Messages.UnexpectedToken:m.Messages.MissingFromClause;this.throwError(C,this.lookahead.value)}this.nextToken();var I=this.parseModuleSpecifier();this.consumeSemicolon(),p=this.finalize(c,new i.ExportAllDeclaration(I))}else if(this.lookahead.type===4){var v=void 0;switch(this.lookahead.value){case"let":case"const":v=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":v=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}p=this.finalize(c,new i.ExportNamedDeclaration(v,[],null))}else if(this.matchAsyncFunction()){var v=this.parseFunctionDeclaration();p=this.finalize(c,new i.ExportNamedDeclaration(v,[],null))}else{var T=[],L=null,Y=!1;for(this.expect("{");!this.match("}");)Y=Y||this.matchKeyword("default"),T.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");if(this.expect("}"),this.matchContextualKeyword("from"))this.nextToken(),L=this.parseModuleSpecifier(),this.consumeSemicolon();else if(Y){var C=this.lookahead.value?m.Messages.UnexpectedToken:m.Messages.MissingFromClause;this.throwError(C,this.lookahead.value)}else this.consumeSemicolon();p=this.finalize(c,new i.ExportNamedDeclaration(null,T,L))}return p},y}();o.Parser=w},function(n,o){Object.defineProperty(o,"__esModule",{value:!0});function h(l,f){if(!l)throw new Error("ASSERT: "+f)}o.assert=h},function(n,o){Object.defineProperty(o,"__esModule",{value:!0});var h=function(){function l(){this.errors=[],this.tolerant=!1}return l.prototype.recordError=function(f){this.errors.push(f)},l.prototype.tolerate=function(f){if(this.tolerant)this.recordError(f);else throw f},l.prototype.constructError=function(f,m){var i=new Error(f);try{throw i}catch(D){Object.create&&Object.defineProperty&&(i=Object.create(D),Object.defineProperty(i,"column",{value:m}))}return i},l.prototype.createError=function(f,m,i,D){var A="Line "+m+": "+D,S=this.constructError(A,i);return S.index=f,S.lineNumber=m,S.description=D,S},l.prototype.throwError=function(f,m,i,D){throw this.createError(f,m,i,D)},l.prototype.tolerateError=function(f,m,i,D){var A=this.createError(f,m,i,D);if(this.tolerant)this.recordError(A);else throw A},l}();o.ErrorHandler=h},function(n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(n,o,h){Object.defineProperty(o,"__esModule",{value:!0});var l=h(9),f=h(4),m=h(11);function i(S){return"0123456789abcdef".indexOf(S.toLowerCase())}function D(S){return"01234567".indexOf(S)}var A=function(){function S(x,w){this.source=x,this.errorHandler=w,this.trackComment=!1,this.isModule=!1,this.length=x.length,this.index=0,this.lineNumber=x.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return S.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},S.prototype.restoreState=function(x){this.index=x.index,this.lineNumber=x.lineNumber,this.lineStart=x.lineStart},S.prototype.eof=function(){return this.index>=this.length},S.prototype.throwUnexpectedToken=function(x){return x===void 0&&(x=m.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,x)},S.prototype.tolerateUnexpectedToken=function(x){x===void 0&&(x=m.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,x)},S.prototype.skipSingleLineComment=function(x){var w=[],y,c;for(this.trackComment&&(w=[],y=this.index-x,c={start:{line:this.lineNumber,column:this.index-this.lineStart-x},end:{}});!this.eof();){var p=this.source.charCodeAt(this.index);if(++this.index,f.Character.isLineTerminator(p)){if(this.trackComment){c.end={line:this.lineNumber,column:this.index-this.lineStart-1};var v={multiLine:!1,slice:[y+x,this.index-1],range:[y,this.index-1],loc:c};w.push(v)}return p===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,w}}if(this.trackComment){c.end={line:this.lineNumber,column:this.index-this.lineStart};var v={multiLine:!1,slice:[y+x,this.index],range:[y,this.index],loc:c};w.push(v)}return w},S.prototype.skipMultiLineComment=function(){var x=[],w,y;for(this.trackComment&&(x=[],w=this.index-2,y={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var c=this.source.charCodeAt(this.index);if(f.Character.isLineTerminator(c))c===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(c===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){y.end={line:this.lineNumber,column:this.index-this.lineStart};var p={multiLine:!0,slice:[w+2,this.index-2],range:[w,this.index],loc:y};x.push(p)}return x}++this.index}else++this.index}if(this.trackComment){y.end={line:this.lineNumber,column:this.index-this.lineStart};var p={multiLine:!0,slice:[w+2,this.index],range:[w,this.index],loc:y};x.push(p)}return this.tolerateUnexpectedToken(),x},S.prototype.scanComments=function(){var x;this.trackComment&&(x=[]);for(var w=this.index===0;!this.eof();){var y=this.source.charCodeAt(this.index);if(f.Character.isWhiteSpace(y))++this.index;else if(f.Character.isLineTerminator(y))++this.index,y===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,w=!0;else if(y===47)if(y=this.source.charCodeAt(this.index+1),y===47){this.index+=2;var c=this.skipSingleLineComment(2);this.trackComment&&(x=x.concat(c)),w=!0}else if(y===42){this.index+=2;var c=this.skipMultiLineComment();this.trackComment&&(x=x.concat(c))}else break;else if(w&&y===45)if(this.source.charCodeAt(this.index+1)===45&&this.source.charCodeAt(this.index+2)===62){this.index+=3;var c=this.skipSingleLineComment(3);this.trackComment&&(x=x.concat(c))}else break;else if(y===60&&!this.isModule)if(this.source.slice(this.index+1,this.index+4)==="!--"){this.index+=4;var c=this.skipSingleLineComment(4);this.trackComment&&(x=x.concat(c))}else break;else break}return x},S.prototype.isFutureReservedWord=function(x){switch(x){case"enum":case"export":case"import":case"super":return!0;default:return!1}},S.prototype.isStrictModeReservedWord=function(x){switch(x){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},S.prototype.isRestrictedWord=function(x){return x==="eval"||x==="arguments"},S.prototype.isKeyword=function(x){switch(x.length){case 2:return x==="if"||x==="in"||x==="do";case 3:return x==="var"||x==="for"||x==="new"||x==="try"||x==="let";case 4:return x==="this"||x==="else"||x==="case"||x==="void"||x==="with"||x==="enum";case 5:return x==="while"||x==="break"||x==="catch"||x==="throw"||x==="const"||x==="yield"||x==="class"||x==="super";case 6:return x==="return"||x==="typeof"||x==="delete"||x==="switch"||x==="export"||x==="import";case 7:return x==="default"||x==="finally"||x==="extends";case 8:return x==="function"||x==="continue"||x==="debugger";case 10:return x==="instanceof";default:return!1}},S.prototype.codePointAt=function(x){var w=this.source.charCodeAt(x);if(w>=55296&&w<=56319){var y=this.source.charCodeAt(x+1);if(y>=56320&&y<=57343){var c=w;w=(c-55296)*1024+y-56320+65536}}return w},S.prototype.scanHexEscape=function(x){for(var w=x==="u"?4:2,y=0,c=0;c<w;++c)if(!this.eof()&&f.Character.isHexDigit(this.source.charCodeAt(this.index)))y=y*16+i(this.source[this.index++]);else return null;return String.fromCharCode(y)},S.prototype.scanUnicodeCodePointEscape=function(){var x=this.source[this.index],w=0;for(x==="}"&&this.throwUnexpectedToken();!this.eof()&&(x=this.source[this.index++],!!f.Character.isHexDigit(x.charCodeAt(0)));)w=w*16+i(x);return(w>1114111||x!=="}")&&this.throwUnexpectedToken(),f.Character.fromCodePoint(w)},S.prototype.getIdentifier=function(){for(var x=this.index++;!this.eof();){var w=this.source.charCodeAt(this.index);if(w===92)return this.index=x,this.getComplexIdentifier();if(w>=55296&&w<57343)return this.index=x,this.getComplexIdentifier();if(f.Character.isIdentifierPart(w))++this.index;else break}return this.source.slice(x,this.index)},S.prototype.getComplexIdentifier=function(){var x=this.codePointAt(this.index),w=f.Character.fromCodePoint(x);this.index+=w.length;var y;for(x===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,y=this.scanUnicodeCodePointEscape()):(y=this.scanHexEscape("u"),(y===null||y==="\\"||!f.Character.isIdentifierStart(y.charCodeAt(0)))&&this.throwUnexpectedToken()),w=y);!this.eof()&&(x=this.codePointAt(this.index),!!f.Character.isIdentifierPart(x));)y=f.Character.fromCodePoint(x),w+=y,this.index+=y.length,x===92&&(w=w.substr(0,w.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,y=this.scanUnicodeCodePointEscape()):(y=this.scanHexEscape("u"),(y===null||y==="\\"||!f.Character.isIdentifierPart(y.charCodeAt(0)))&&this.throwUnexpectedToken()),w+=y);return w},S.prototype.octalToDecimal=function(x){var w=x!=="0",y=D(x);return!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(w=!0,y=y*8+D(this.source[this.index++]),"0123".indexOf(x)>=0&&!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(y=y*8+D(this.source[this.index++]))),{code:y,octal:w}},S.prototype.scanIdentifier=function(){var x,w=this.index,y=this.source.charCodeAt(w)===92?this.getComplexIdentifier():this.getIdentifier();if(y.length===1?x=3:this.isKeyword(y)?x=4:y==="null"?x=5:y==="true"||y==="false"?x=1:x=3,x!==3&&w+y.length!==this.index){var c=this.index;this.index=w,this.tolerateUnexpectedToken(m.Messages.InvalidEscapedReservedWord),this.index=c}return{type:x,value:y,lineNumber:this.lineNumber,lineStart:this.lineStart,start:w,end:this.index}},S.prototype.scanPunctuator=function(){var x=this.index,w=this.source[this.index];switch(w){case"(":case"{":w==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,w="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:w=this.source.substr(this.index,4),w===">>>="?this.index+=4:(w=w.substr(0,3),w==="==="||w==="!=="||w===">>>"||w==="<<="||w===">>="||w==="**="?this.index+=3:(w=w.substr(0,2),w==="&&"||w==="||"||w==="=="||w==="!="||w==="+="||w==="-="||w==="*="||w==="/="||w==="++"||w==="--"||w==="<<"||w===">>"||w==="&="||w==="|="||w==="^="||w==="%="||w==="<="||w===">="||w==="=>"||w==="**"?this.index+=2:(w=this.source[this.index],"<>=!+-*%&|^/".indexOf(w)>=0&&++this.index)))}return this.index===x&&this.throwUnexpectedToken(),{type:7,value:w,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},S.prototype.scanHexLiteral=function(x){for(var w="";!this.eof()&&f.Character.isHexDigit(this.source.charCodeAt(this.index));)w+=this.source[this.index++];return w.length===0&&this.throwUnexpectedToken(),f.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+w,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},S.prototype.scanBinaryLiteral=function(x){for(var w="",y;!this.eof()&&(y=this.source[this.index],!(y!=="0"&&y!=="1"));)w+=this.source[this.index++];return w.length===0&&this.throwUnexpectedToken(),this.eof()||(y=this.source.charCodeAt(this.index),(f.Character.isIdentifierStart(y)||f.Character.isDecimalDigit(y))&&this.throwUnexpectedToken()),{type:6,value:parseInt(w,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},S.prototype.scanOctalLiteral=function(x,w){var y="",c=!1;for(f.Character.isOctalDigit(x.charCodeAt(0))?(c=!0,y="0"+this.source[this.index++]):++this.index;!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index));)y+=this.source[this.index++];return!c&&y.length===0&&this.throwUnexpectedToken(),(f.Character.isIdentifierStart(this.source.charCodeAt(this.index))||f.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(y,8),octal:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:w,end:this.index}},S.prototype.isImplicitOctalLiteral=function(){for(var x=this.index+1;x<this.length;++x){var w=this.source[x];if(w==="8"||w==="9")return!1;if(!f.Character.isOctalDigit(w.charCodeAt(0)))return!0}return!0},S.prototype.scanNumericLiteral=function(){var x=this.index,w=this.source[x];l.assert(f.Character.isDecimalDigit(w.charCodeAt(0))||w===".","Numeric literal must start with a decimal digit or a decimal point");var y="";if(w!=="."){if(y=this.source[this.index++],w=this.source[this.index],y==="0"){if(w==="x"||w==="X")return++this.index,this.scanHexLiteral(x);if(w==="b"||w==="B")return++this.index,this.scanBinaryLiteral(x);if(w==="o"||w==="O")return this.scanOctalLiteral(w,x);if(w&&f.Character.isOctalDigit(w.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(w,x)}for(;f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)y+=this.source[this.index++];w=this.source[this.index]}if(w==="."){for(y+=this.source[this.index++];f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)y+=this.source[this.index++];w=this.source[this.index]}if(w==="e"||w==="E")if(y+=this.source[this.index++],w=this.source[this.index],(w==="+"||w==="-")&&(y+=this.source[this.index++]),f.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)y+=this.source[this.index++];else this.throwUnexpectedToken();return f.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(y),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},S.prototype.scanStringLiteral=function(){var x=this.index,w=this.source[x];l.assert(w==="'"||w==='"',"String literal must starts with a quote"),++this.index;for(var y=!1,c="";!this.eof();){var p=this.source[this.index++];if(p===w){w="";break}else if(p==="\\")if(p=this.source[this.index++],!p||!f.Character.isLineTerminator(p.charCodeAt(0)))switch(p){case"u":if(this.source[this.index]==="{")++this.index,c+=this.scanUnicodeCodePointEscape();else{var v=this.scanHexEscape(p);v===null&&this.throwUnexpectedToken(),c+=v}break;case"x":var C=this.scanHexEscape(p);C===null&&this.throwUnexpectedToken(m.Messages.InvalidHexEscapeSequence),c+=C;break;case"n":c+=`
`;break;case"r":c+="\r";break;case"t":c+="	";break;case"b":c+="\b";break;case"f":c+="\f";break;case"v":c+="\v";break;case"8":case"9":c+=p,this.tolerateUnexpectedToken();break;default:if(p&&f.Character.isOctalDigit(p.charCodeAt(0))){var I=this.octalToDecimal(p);y=I.octal||y,c+=String.fromCharCode(I.code)}else c+=p;break}else++this.lineNumber,p==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else{if(f.Character.isLineTerminator(p.charCodeAt(0)))break;c+=p}}return w!==""&&(this.index=x,this.throwUnexpectedToken()),{type:8,value:c,octal:y,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},S.prototype.scanTemplate=function(){var x="",w=!1,y=this.index,c=this.source[y]==="`",p=!1,v=2;for(++this.index;!this.eof();){var C=this.source[this.index++];if(C==="`"){v=1,p=!0,w=!0;break}else if(C==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,w=!0;break}x+=C}else if(C==="\\")if(C=this.source[this.index++],f.Character.isLineTerminator(C.charCodeAt(0)))++this.lineNumber,C==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(C){case"n":x+=`
`;break;case"r":x+="\r";break;case"t":x+="	";break;case"u":if(this.source[this.index]==="{")++this.index,x+=this.scanUnicodeCodePointEscape();else{var I=this.index,T=this.scanHexEscape(C);T!==null?x+=T:(this.index=I,x+=C)}break;case"x":var L=this.scanHexEscape(C);L===null&&this.throwUnexpectedToken(m.Messages.InvalidHexEscapeSequence),x+=L;break;case"b":x+="\b";break;case"f":x+="\f";break;case"v":x+="\v";break;default:C==="0"?(f.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(m.Messages.TemplateOctalLiteral),x+="\0"):f.Character.isOctalDigit(C.charCodeAt(0))?this.throwUnexpectedToken(m.Messages.TemplateOctalLiteral):x+=C;break}else f.Character.isLineTerminator(C.charCodeAt(0))?(++this.lineNumber,C==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,x+=`
`):x+=C}return w||this.throwUnexpectedToken(),c||this.curlyStack.pop(),{type:10,value:this.source.slice(y+1,this.index-v),cooked:x,head:c,tail:p,lineNumber:this.lineNumber,lineStart:this.lineStart,start:y,end:this.index}},S.prototype.testRegExp=function(x,w){var y="￿",c=x,p=this;w.indexOf("u")>=0&&(c=c.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(v,C,I){var T=parseInt(C||I,16);return T>1114111&&p.throwUnexpectedToken(m.Messages.InvalidRegExp),T<=65535?String.fromCharCode(T):y}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,y));try{RegExp(c)}catch(v){this.throwUnexpectedToken(m.Messages.InvalidRegExp)}try{return new RegExp(x,w)}catch(v){return null}},S.prototype.scanRegExpBody=function(){var x=this.source[this.index];l.assert(x==="/","Regular expression literal must start with a slash");for(var w=this.source[this.index++],y=!1,c=!1;!this.eof();)if(x=this.source[this.index++],w+=x,x==="\\")x=this.source[this.index++],f.Character.isLineTerminator(x.charCodeAt(0))&&this.throwUnexpectedToken(m.Messages.UnterminatedRegExp),w+=x;else if(f.Character.isLineTerminator(x.charCodeAt(0)))this.throwUnexpectedToken(m.Messages.UnterminatedRegExp);else if(y)x==="]"&&(y=!1);else if(x==="/"){c=!0;break}else x==="["&&(y=!0);return c||this.throwUnexpectedToken(m.Messages.UnterminatedRegExp),w.substr(1,w.length-2)},S.prototype.scanRegExpFlags=function(){for(var x="",w="";!this.eof();){var y=this.source[this.index];if(!f.Character.isIdentifierPart(y.charCodeAt(0)))break;if(++this.index,y==="\\"&&!this.eof())if(y=this.source[this.index],y==="u"){++this.index;var c=this.index,p=this.scanHexEscape("u");if(p!==null)for(w+=p,x+="\\u";c<this.index;++c)x+=this.source[c];else this.index=c,w+="u",x+="\\u";this.tolerateUnexpectedToken()}else x+="\\",this.tolerateUnexpectedToken();else w+=y,x+=y}return w},S.prototype.scanRegExp=function(){var x=this.index,w=this.scanRegExpBody(),y=this.scanRegExpFlags(),c=this.testRegExp(w,y);return{type:9,value:"",pattern:w,flags:y,regex:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},S.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var x=this.source.charCodeAt(this.index);return f.Character.isIdentifierStart(x)?this.scanIdentifier():x===40||x===41||x===59?this.scanPunctuator():x===39||x===34?this.scanStringLiteral():x===46?f.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():f.Character.isDecimalDigit(x)?this.scanNumericLiteral():x===96||x===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():x>=55296&&x<57343&&f.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},S}();o.Scanner=A},function(n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TokenName={},o.TokenName[1]="Boolean",o.TokenName[2]="<end>",o.TokenName[3]="Identifier",o.TokenName[4]="Keyword",o.TokenName[5]="Null",o.TokenName[6]="Numeric",o.TokenName[7]="Punctuator",o.TokenName[8]="String",o.TokenName[9]="RegularExpression",o.TokenName[10]="Template"},function(n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",lang:"⟨",rang:"⟩"}},function(n,o,h){Object.defineProperty(o,"__esModule",{value:!0});var l=h(10),f=h(12),m=h(13),i=function(){function A(){this.values=[],this.curly=this.paren=-1}return A.prototype.beforeFunctionExpression=function(S){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(S)>=0},A.prototype.isRegexStart=function(){var S=this.values[this.values.length-1],x=S!==null;switch(S){case"this":case"]":x=!1;break;case")":var w=this.values[this.paren-1];x=w==="if"||w==="while"||w==="for"||w==="with";break;case"}":if(x=!1,this.values[this.curly-3]==="function"){var y=this.values[this.curly-4];x=y?!this.beforeFunctionExpression(y):!1}else if(this.values[this.curly-4]==="function"){var y=this.values[this.curly-5];x=y?!this.beforeFunctionExpression(y):!0}break}return x},A.prototype.push=function(S){S.type===7||S.type===4?(S.value==="{"?this.curly=this.values.length:S.value==="("&&(this.paren=this.values.length),this.values.push(S.value)):this.values.push(null)},A}(),D=function(){function A(S,x){this.errorHandler=new l.ErrorHandler,this.errorHandler.tolerant=x?typeof x.tolerant=="boolean"&&x.tolerant:!1,this.scanner=new f.Scanner(S,this.errorHandler),this.scanner.trackComment=x?typeof x.comment=="boolean"&&x.comment:!1,this.trackRange=x?typeof x.range=="boolean"&&x.range:!1,this.trackLoc=x?typeof x.loc=="boolean"&&x.loc:!1,this.buffer=[],this.reader=new i}return A.prototype.errors=function(){return this.errorHandler.errors},A.prototype.getNextToken=function(){if(this.buffer.length===0){var S=this.scanner.scanComments();if(this.scanner.trackComment)for(var x=0;x<S.length;++x){var w=S[x],y=this.scanner.source.slice(w.slice[0],w.slice[1]),c={type:w.multiLine?"BlockComment":"LineComment",value:y};this.trackRange&&(c.range=w.range),this.trackLoc&&(c.loc=w.loc),this.buffer.push(c)}if(!this.scanner.eof()){var p=void 0;this.trackLoc&&(p={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var v=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart(),C=v?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(C);var I={type:m.TokenName[C.type],value:this.scanner.source.slice(C.start,C.end)};if(this.trackRange&&(I.range=[C.start,C.end]),this.trackLoc&&(p.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},I.loc=p),C.type===9){var T=C.pattern,L=C.flags;I.regex={pattern:T,flags:L}}this.buffer.push(I)}}return this.buffer.shift()},A}();o.Tokenizer=D}])})}),ru=es(iu),ge=ru;function nu(s){let e=f=>f.includes("return kicadToObj("),o=s.codemirror.view.state.doc.toString().split(`
`),h=0,l=0;for(;;){let f=o[h];if(!f||(l+=f.length,h>o.length)||o[h]==="`)})()"&&!e(o[h+1]))break;h++}s.codemirror.foldRange(0,l+h)}function ar(s,e){var n=[s],o,h,l,f,m,i,D;for(o=0;o<n.length;o+=1)if(m=n[o],typeof m!="number"){e(m);for(l in m)if(l!=="parent")if(i=m[l],i instanceof Array)for(h=0,f=i.length;h<f;h+=1)D=i[h],D instanceof Object&&(D.parent=m),n.push(D);else i!=null&&typeof i.type=="string"&&(i.parent=m,n.push(i))}}function is(s,e){let n=document.querySelector("svg"),o=!1,h,l=0,f=0,m;e("mousedown",".translate-handle-trigger",i=>{o=!0,s.transforming=!0,l=0,f=0,h=n.panZoomParams.svgPoint({x:i.offsetX,y:i.offsetY}),m=i.target.dataset.index;let A=s.codemirror.view.state.doc.toString(),S=ge.parseScript(A,{range:!0,comment:!0}),x=[];ar(S,C=>{var I,T,L;((I=C==null?void 0:C.callee)==null?void 0:I.type)==="MemberExpression"&&((L=(T=C==null?void 0:C.callee)==null?void 0:T.property)==null?void 0:L.name)==="add"&&x.push(C.arguments[1])});let w=x.sort((C,I)=>C.range[0]-I.range[0]),y=C=>C.includes(".")?C.split(".")[1].length:C.length,c=(C,I)=>Math.round(C/I)*I,p=(C,I)=>Math.round(C*10**I)/10**I,v=C=>/[0-9]/i.test(C)||C===".";s.transformUpdate=(C,I)=>{let T=[];w[m].properties.forEach(L=>{if(L.key.name!=="translate")return;let[Y,j]=L.value.elements,z=!1,q=!1,Z=!1,k=function(g,B){if(!Z&&g.type==="Literal"&&typeof g.value=="number"){let M=g.range[0];if(g.parent.operator==="/")return;g.parent.operator==="-"&&(q=!0),g.parent.type==="BinaryExpression"&&(g.parent.operator==="+"||g.parent.operator==="-")&&g.parent.right==g&&(z=!0,M=g.parent.left.range[1]),g.parent.type==="UnaryExpression"&&g.parent.operator==="-"&&(M=g.parent.range[0]),g.ogValue||(g.ogValue=g.value),g.ogRaw||(g.ogRaw=g.raw);let N;q?N=-g.ogValue+B:N=g.ogValue+B;let U=s.gridSize===0?p(N,y(g.ogRaw)):p(c(N,s.gridSize),8),H=U<0,G;H?G=`-${Math.abs(U)}`:z?G=`+${U}`:G=`${U}`,T.push({from:M,to:g.range[1],insert:G}),Z=!0}};ar(Y,g=>k(g,C)),z=!1,q=!1,Z=!1,ar(j,g=>k(g,I));let P=s.codemirror.view.state.doc.toString();s.codemirror.view.dispatch({changes:{from:0,to:P.length,insert:A}}),s.codemirror.view.dispatch({changes:T})}),nu(s)}}),e("mousemove","",i=>{if(!o)return;let A=n.panZoomParams.svgPoint({x:i.offsetX,y:i.offsetY}),S=A.x-h.x,x=A.y-h.y;rt("TRANSLATE",{x:S,y:x,index:m}),l=S,f=x}),e("mouseup","",i=>{o=!1,s.transforming=!1}),e("mouseleave","",i=>{o=!1,s.transforming=!1})}function rs(s,e){let n=!1;e("mousedown","#vertical-bar",o=>{n=!0}),e("mousemove","",o=>{if(!n)return;let h=o.clientX/window.innerWidth*100;if(h===0)return;let l=1,f=99;h<l&&(h=l),h>f&&(h=f),document.documentElement.style.setProperty("--vertical-bar",`${h}%`),pauseEvent(o)}),e("mouseup","",o=>{n=!1,rt("RENDER")})}function ns(s,e){let n=!1,o=1,h=0,l=0,f={x:0,y:0};function m(S){S.style.transformOrigin=`${0}px ${0}px`,S.style.transform="translate("+h+"px, "+l+"px) scale("+o+")",s.gridSize>0&&rt("RENDER")}function i({x:S,y:x}){let w=(S-h)/o,y=(x-l)/o;return{x:w,y}}e("mousedown","",S=>{S.shiftKey||(n=!0,f={x:S.offsetX-h,y:S.offsetY-l},S.detail===2&&console.log(S.offsetX,S.offsetY,i({x:S.offsetX,y:S.offsetY})))}),e("mousemove","",S=>{if(!n||s.transforming)return;h=S.offsetX-f.x,l=S.offsetY-f.y;let x=document.querySelectorAll(".transform-group");for(let w of x)m(w)}),e("mouseup","",S=>{n=!1}),e("wheel","",S=>{let x=(S.offsetX-h)/o,w=(S.offsetY-l)/o;Math.sign(S.deltaY)<0?o*=1.03:o/=1.03,h=S.offsetX-x*o,l=S.offsetY-w*o;let y=document.querySelectorAll(".transform-group");for(let c of y)m(c);S.preventDefault()});function D(S){let w=document.querySelector("svg").getBoundingClientRect(),y=S.x[1]-S.x[0],c=S.y[1]-S.y[0],p=w.width/y,v=w.height/c,C=Math.min(p,v)*.9;o=C;let I={x:(S.x[0]+S.x[1])/2*C-w.width/2,y:(S.y[0]+S.y[1])/2*C-w.height/2};h=-I.x,l=-I.y;let T=document.querySelectorAll(".transform-group");for(let L of T)m(L)}function A(){let S=document.querySelector("svg");if(S===null)return null;let{left:x,right:w,bottom:y,top:c,width:p,height:v}=S.getBoundingClientRect(),C=i({x:p,y:v}),I=i({x:0,y:v}),T=i({x:p,y:0}),L=i({x:0,y:0});return{rt:C,lt:I,rb:T,lb:L}}return{scale:()=>o,x:()=>h,y:()=>l,corners:A,svgPoint:i,setScaleXY:D}}var ss=0;function su(s){var e=new FileReader;e.readAsText(s),e.onloadend=n=>{let o=e.result;rt("UPLOAD_COMP",{text:o,name:`component${ss}`}),ss++}}function ou(s){var e=new FileReader;e.readAsText(s),e.onloadend=n=>{let o=e.result;rt("UPLOAD_JS",{text:o})}}function au(s,e=[]){let n=s[0],o=n.name.split("."),h=o[0],l=o[o.length-1];if(l==="kicad_mod")su(n);else if(l==="js")ou(n);else throw Error("Unknown extension:",l)}function os(s,e){e("drop","",function(n){let h=n.dataTransfer.files;au(h),pauseEvent(n)}),e("dragover","",function(n){pauseEvent(n)})}function as(s,e){let n=null,o=null,h=document.querySelector("svg");e("mousedown","",f=>{!f.shiftKey||(n=h.panZoomParams.svgPoint({x:f.offsetX,y:f.offsetY}))}),e("mousemove","",f=>{document.body.classList.add("no-select"),!!f.shiftKey&&n!==null&&(o=h.panZoomParams.svgPoint({x:f.offsetX,y:f.offsetY}),s.selectBox.start=n,s.selectBox.end=o,rt("RENDER"))});function l(f,m){let{start:i,end:D}=m;return f.x>i.x&&f.x<D.x&&f.y>i.y&&f.y<D.y||f.x>i.x&&f.x<D.x&&f.y<i.y&&f.y>D.y||f.x<i.x&&f.x>D.x&&f.y>i.y&&f.y<D.y||f.x<i.x&&f.x>D.x&&f.y<i.y&&f.y>D.y}e("mouseup","",f=>{!f.shiftKey||(document.body.classList.remove("no-select"),n=null,o=null,s.selectBox.start=n,s.selectBox.end=o,rt("RENDER"))})}var ls=s=>/[0-9]/i.test(s)||s===".";function us(s,e){let n=!1,o,h,l,f,m,i,D=null,A=!1,S=!1;e("mousedown",".ͼb",x=>{let y=document.querySelector("code-mirror").view.state,c=y.doc,p=y.selection.main.head,v=c.lineAt(p),{from:C,to:I,text:T}=c.lineAt(p),L=p,Y=p;for(;L>C&&ls(T[L-C-1],!0);)L--;for(;Y<I&&ls(T[Y-C]);)Y++;let j;if(L>C){let z=L;for(;z>C;)if(z--,j=T[z-C],j!==" ")if(j==="+")D=z;else if(j==="-")D=z,S=!0;else{if(["(","[",",","/","*",";","{","=",":"].includes(j))break;A=!0;break}}console.log(A,S,D),i=T.slice(L-C,Y-C),o=Number(i),S&&(o=-o),n=!0,h=L,l=Y,m=i.includes("."),f=i.includes(".")?i.split(".")[1].length:1}),e("mousemove","",x=>{if(!n)return;let w=document.querySelector("code-mirror"),y,c=i.length,p=0>x.movementX?1:-1;if(m){let C=Math.round(o*10**f)+x.movementX;C=Math.round(C)/10**f,o=C,y=`${Math.abs(o).toFixed(f)}`}else o+=x.movementX,y=`${Math.abs(o)}`;A?(D==null&&(y=(o<0?"-":"+")+y),w.view.dispatch({changes:{from:h,to:h+c,insert:y}}),D!=null&&w.view.dispatch({changes:{from:D,to:D+1,insert:o<0?"-":"+"}})):D!=null?o<0?(w.view.dispatch({changes:{from:h,to:h+c,insert:y}}),w.view.dispatch({changes:{from:D,to:D+1,insert:"-"}})):(w.view.dispatch({changes:{from:D,to:h+c,insert:y}}),h=D,D=null):(o<0&&(y="-"+y),w.view.dispatch({changes:{from:h,to:h+c,insert:y}})),i=y,rt("RUN",{dragging:!0}),pauseEvent(x)}),e("mouseup","",x=>{n=!1,D=null,A=!1,S=!1})}function Ve(s,e){let n=new RegExp(`\\/\\*\\s*--\\s*${s}\\s*--\\s*\\*\\/`,"g"),h=e.matchAll(n).next();return h.value!==void 0?h.value.index+h.value[0].length+1:null}function hs(s,e){let n=document.querySelector("svg"),o=!1,h,l,f;e("mousedown",".footprint-svg, .path-footprint",m=>{o=!0,h=m.target.dataset.index,l=s.codemirror.view.state.doc.toString(),f=ge.parseScript(l,{range:!0,comment:!0})}),e("mousemove","",m=>{if(!o)return;let D=n.panZoomParams.svgPoint({x:m.offsetX,y:m.offsetY});var A=event.path||event.composedPath&&event.composedPath();if(!A)return;let S=A.some(c=>c.matches&&c.matches("#viewer")),x=document.querySelector("#viewer").getBoundingClientRect(),w=m.clientX-x.left,y=m.clientY-x.top;s.previewFootprint=[s.footprints[h],[w,y]],rt("RENDER")}),e("mouseup","",m=>{if(s.previewFootprint!==null){let i=document.querySelector("#viewer").getBoundingClientRect(),D=m.clientX-i.left,A=i.bottom-m.clientY,x=n.panZoomParams.svgPoint({x:D,y:A}),w=s.codemirror.view.state.doc.toString(),y=Ve("ADD_COMPONENTS",w);if(y!==null){let p=`board.add(${s.previewFootprint[0][0]}, { translate: [${x.x}, ${x.y}] })
`;s.codemirror.view.dispatch({changes:{from:y,insert:p}}),rt("RUN")}}s.previewFootprint=null,o=!1}),e("mouseleave","",m=>{s.previewFootprint=null,o=!1})}function lu(s){return s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault(),s.cancelBubble=!0,s.returnValue=!1,!1}window.pauseEvent=lu;var cs=s=>s.composedPath()[0],uu=(s,e)=>cs(s).matches(e),ps=s=>(e,n,o)=>{s.addEventListener(e,h=>{h.trigger=cs(h),(n===""||uu(h,n))&&o(h)})};function fs(s){let e=document.querySelector("svg"),n=ps(e);e.panZoomParams=ns(s,n),s.panZoomParams=e.panZoomParams,as(s,n),is(s,n);let o=document.querySelector("body"),h=ps(o);hs(s,h),os(s,h),us(s,h),rs(s,h),h("keydown","",l=>{let f=event.code;f==="Enter"&&event.shiftKey?(event.preventDefault(),rt("RUN")):f==="KeyT"&&event.shiftKey}),window.addEventListener("unload",()=>{let l=s.codemirror.view.state.doc.toString();window.localStorage.setItem("svg-pcb",l)})}var ds=(s,e)=>({F:{pos:[0,0],shape:new st().circle(e).getPathData(),layers:["F.Cu"],index:1},B:{pos:[0,0],shape:new st().circle(e).getPathData(),layers:["B.Cu"],index:2},drill:{pos:[0,0],shape:new st().circle(s).getPathData(),layers:["drill"]}}),hu=([s,e],[n,o])=>[s+n,e+o];var cu=([s,e],n)=>[s*Math.cos(n)-e*Math.sin(n),e*Math.cos(n)+s*Math.sin(n)],ms=class{constructor({pads:e,layers:n}){this.pads=e,this.layers=n}pad(e){return this.pads[e]}padX(e){return this.pads[e][0]}padY(e){return this.pads[e][1]}get pos(){return this.pads.center}get posX(){return this.pads.center[0]}get posY(){return this.pads.center[1]}};function vs(s,e={}){let n=e.translate||[0,0],o=e.rotate||0,h=e.padLabelSize||.02,[l,f]=n,m=o*Math.PI/180,i={},D=[],A={};for(let S in s){let{pos:x,shape:w,layers:y,origin:c}=s[S];w=typeof w=="string"?new st().pathD(w):w.copy();let p=[x[0],x[1]];c!=null&&(p[0]=c[0],p[1]=c[1]),w.translate(p).translate(n).rotate(o,n);let v=hu(cu(x,m),n);i[S]=v,S.includes("drill")||D.push({value:S,translate:v,rotate:o,size:h}),y.forEach(C=>{C in A?A[C].push(w):A[C]=[w]})}return i.center=n,A.padLabels=D,new ms({pads:i,layers:A})}var Le=(s,e)=>lr(s,e)<1e-6,lr=([s,e],[n,o])=>Math.sqrt((n-s)**2+(o-e)**2),pu=(s,e)=>Math.sqrt((e[0]-s[0])**2+(e[1]-s[1])**2),Ge=(s,e)=>{let n=pu(s,e);return[(e[0]-s[0])/n,(e[1]-s[1])/n]},fu=s=>{let e=Math.sqrt(s[0]**2+s[1]**2);return[s[0]/e,s[1]/e]},du=(s,e,n,o)=>{let h=Math.sin(o*(1-s))/Math.sin(o),l=Math.sin(o*s)/Math.sin(o);return[e[0]*h+n[0]*l,e[1]*h+n[1]*l]};function ys(s){if(typeof s[0]!="string")return s;if(s[0]==="chamfer"){let[e,n,o]=s;return o}else if(s[0]==="fillet"){let[e,n,o]=s;return o}else{if(s[0]==="handles")throw"Can't begin wire with handles.";return null}}function mu(s){let e=[],n=0,o=!1;return s.forEach(h=>{h[0]==="handles"&&o===!0?e.at(-1).push(...h.slice(1)):(e.push(h),o=!1),h[0]==="handles"&&(o=!0)}),e}function xs(s,e){s=mu(s);let n=ys(s[0]),o=[n];for(let l=1;l<s.length;l++){let f=s[l],m=null,i=l+1,D=s[i];for(;D&&D[0]!=="handles"&&(m=ys(D),m===null);)i++,D=s[i];if(typeof f[0]!="string"){if(Le(f,n))continue;o.push(f),n=f}else if(f[0]==="chamfer"){let[A,S,x]=f;if(n&&m){if(Le(x,n)||Le(x,m))continue;let[w,y]=Array.isArray(S)?S:[S,S],c=Ge(x,n),p=[x[0]+c[0]*w,x[1]+c[1]*w],v=Ge(x,m),C=[x[0]+v[0]*y,x[1]+v[1]*y];o.push(p),o.push(C)}else throw"Chamfering requires previous and next points.";n=o.at(-1)}else if(f[0]==="fillet"){let[A,S,x]=f;if(S<0&&(S=1e-8),n&&m){if(Le(x,n)||Le(x,m))continue;let w=Ge(x,n),y=Ge(x,m),c=Math.acos(w[0]*y[0]+w[1]*y[1]),p=S/Math.tan(c/2),v=lr(n,x),C=lr(m,x);p=Math.min(v,C,p),S=Math.min(p*Math.tan(c/2),S);let I=[x[0]+w[0]*p,x[1]+w[1]*p],T=[x[0]+y[0]*p,x[1]+y[1]*p],L=[],Y=fu([w[0]+y[0],w[1]+y[1]]),j=Math.sqrt(p**2+S**2),z=[x[0]+Y[0]*j,x[1]+Y[1]*j],q=Math.atan2(I[0]-z[0],I[1]-z[1]),Z=Math.PI-c,k=[I[0]-z[0],I[1]-z[1]],P=[T[0]-z[0],T[1]-z[1]];for(let g=1/20;g<1;g+=1/20){let[B,M]=du(g,k,P,Z),N=[z[0]+B,z[1]+M];L.push(N)}o.push(...L)}else throw"Filleting requires previous and next points.";n=o.at(-1)}else if(f[0]==="handles"){let[A,...S]=f;if(n&&m){let x=vu([n,...S,m]);x=x.slice(1,-1),x.length>0&&o.push(...x)}else throw"Beziers requires previous and next points.";n=o.at(-1)}}let h=new st;return o.forEach((l,f)=>h.goTo(l,f!==0)),h.offset(e/2),h}var gs=(s,e,n)=>[(1-s)*e[0]+s*n[0],(1-s)*e[1]+s*n[1]],Cs=(s,e,n,...o)=>o.length>0?[gs(s,e,n),...Cs(s,n,...o)]:[gs(s,e,n)],Ds=(s,e)=>e.length>1?Ds(s,Cs(s,...e)):e[0];function vu(s){let e=[];for(let n=0;n<=1;n+=1/64){let o=Ds(n,s);e.push(o)}return e}var ur=class{constructor(){this.layers={},this.components=[]}add(e,n={}){let o=n.name||"",h={translate:n.translate||[0,0],rotate:n.rotate||0,padLabelSize:n.padLabelSize||.03,componentLabelSize:n.componentLabelSize||.04},l=vs(e,h);for(let f in l.layers)l.layers[f].forEach(m=>{this.addShape(f,m)});return o!==""&&!o.includes("drill")&&this.addShape("componentLabels",{value:o,translate:h.translate,rotate:0,size:h.componentLabelSize}),this.components.push(l),l}addShape(e,n){return e in this.layers?this.layers[e].push(n):this.layers[e]=[n],this.layers[e]}getLayer(e,n=!0){if(!(e in this.layers))return[];let o=new st,h=[];return this.layers[e].forEach(l=>{l instanceof st?o.group(l):h.push(l)}),[n?o.flatten().getPathData():o.getPathData(),...h]}wire(e,n,o="F.Cu"){this.addShape(o,xs(e,n))}};function Dt(s){this._line=this._col=this._pos=0,this._stream=s}Dt.not_whitespace_or_end=/^(\S|$)/;Dt.space_quote_paren_escaped_or_end=/^(\s|\\|"|'|`|,|\(|\)|$)/;Dt.string_or_escaped_or_end=/^(\\|"|$)/;Dt.string_delimiters=/["]/;Dt.quotes=/['`,]/;Dt.quotes_map={"'":"quote","`":"quasiquote",",":"unquote"};Dt.prototype={peek:xu,consume:gu,until:Cu,error:yu,string:Du,atom:Eu,quoted:Pu,expr:wu,list:Su};function Es(s){var e=new Dt(s),n=e.expr();return n instanceof Error?n:e.peek()!=""?e.error("Superfluous characters after expression: `"+e.peek()+"`"):n}function yu(s){var e=new Error("Syntax error: "+s);return e.line=this._line+1,e.col=this._col+1,e}function xu(){return this._stream.length==this._pos?"":this._stream[this._pos]}function gu(){if(this._stream.length==this._pos)return"";var s=this._stream[this._pos];return this._pos+=1,s=="\r"?(this.peek()==`
`&&(this._pos+=1,s+=`
`),this._line++,this._col=0):s==`
`?(this._line++,this._col=0):this._col++,s}function Cu(s){for(var e="";!s.test(this.peek());)e+=this.consume();return e}function Du(){for(var s=this.consume(),e="";;){e+=this.until(Dt.string_or_escaped_or_end);var n=this.peek();if(n=="")return this.error("Unterminated string literal");if(n==s){this.consume();break}if(n=="\\"){this.consume(),n=this.peek(),n=="r"?(this.consume(),e+="\r"):n=="t"?(this.consume(),e+="	"):n=="n"?(this.consume(),e+=`
`):n=="f"?(this.consume(),e+="\f"):n=="b"?(this.consume(),e+="\b"):e+=this.consume();continue}e+=this.consume()}return new String(e)}function Eu(){if(Dt.string_delimiters.test(this.peek()))return this.string();for(var s="";;){s+=this.until(Dt.space_quote_paren_escaped_or_end);var e=this.peek();if(e=="\\"){this.consume(),s+=this.consume();continue}break}return s}function Pu(){var s=this.consume(),e=Dt.quotes_map[s];e=="unquote"&&this.peek()=="@"&&(this.consume(),e="unquote-splicing",s=",@"),this.until(Dt.not_whitespace_or_end);var n=this.expr();return n instanceof Error?n:n===""?this.error("Unexpected `"+this.peek()+"` after `"+s+"`"):[e,n]}function wu(){if(this.until(Dt.not_whitespace_or_end),Dt.quotes.test(this.peek()))return this.quoted();var s=this.peek()=="("?this.list():this.atom();return this.until(Dt.not_whitespace_or_end),s}function Su(){if(this.peek()!="(")return this.error("Expected `(` - saw `"+this.peek()+"` instead.");this.consume();var s=[],e=this.expr();if(e instanceof Error)return e;if(e!=="")for(s.push(e);(e=this.expr())!=="";){if(e instanceof Error)return e;s.push(e)}return this.peek()!=")"?this.error("Expected `)` - saw: `"+this.peek()+"`"):(this.consume(),s)}var Au=s=>s.reduce((e,n)=>{let o=n.split(".");return o.length===0?e:o[0]!=="*"?[...e,n]:[...e,`F.${o[1]}`,`B.${o[1]}`]},[]);function Ps(s){let e=Es(s),n=1/25.4,o={};for(let l of e){let f=l[0]==="pad",m=l[2]==="smd",i=l[2]==="thru_hole",D=l[3];if(f&&(m||i)){let A=l[1],S=l[4].slice(1).map(p=>Number(p)*n);S[1]=-S[1];let x=l[l.length-1];x=x?x.slice(1):[],x=Au(x);let w=l[5].slice(1).map(p=>Number(p)*n),y=D==="rect"?new st().rectangle(...w):new st().circle(w[0]);if(o[A]===void 0?o[A]=[{pos:S,shape:y,layers:x}]:o[A].push({pos:S,shape:y,layers:x}),l[l.length-2]?l[l.length-2][0]==="drill":!1){let p=Number(l[l.length-2][1])/25.4,v={pos:S,shape:new st().circle(p),layers:["drill"]};o[`${A}_drill`]===void 0?o[`${A}_drill`]=[v]:o[`${A}_drill`].push(v)}}}return Object.entries(o).reduce((l,f)=>{let[m,i]=f;return i.length===1?l[m]=i[0]:i.forEach((D,A)=>{l[`${m}_${A+1}`]=D}),l},{})}var _u=qe(function(s,e){(function(n,o){o(e)})(typeof globalThis=="undefined"?typeof self=="undefined"?He:self:globalThis,function(n){var o=String.prototype;function h(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}function l(k,P){for(var g,B=0;B<P.length;B++)g=P[B],g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(k,g.key,g)}function f(k,P,g){return P&&l(k.prototype,P),g&&l(k,g),k}function m(k,P){var g=k.generator;if(k.write("("),P!=null&&0<P.length){g[P[0].type](P[0],k);for(var B,M=P.length,N=1;N<M;N++)B=P[N],k.write(", "),g[B.type](B,k)}k.write(")")}function i(k,P,g,B){var M=k.expressionsPrecedence[P.type];if(M===17)return!0;var N=k.expressionsPrecedence[g.type];return M===N?(M===13||M===14)&&(P.operator==="**"&&g.operator==="**"?!B:B?c[P.operator]<=c[g.operator]:c[P.operator]<c[g.operator]):!B&&M===15&&N===14&&g.operator==="**"||M<N}function D(k,P,g,B){var M=k.generator;i(k,P,g,B)?(k.write("("),M[P.type](P,k),k.write(")")):M[P.type](P,k)}function A(k,P,g,B){var M=P.split(`
`),N=M.length-1;if(k.write(M[0].trim()),0<N){k.write(B);for(var U=1;U<N;U++)k.write(g+M[U].trim()+B);k.write(g+M[N].trim())}}function S(k,P,g,B){for(var M,N=P.length,U=0;U<N;U++)M=P[U],k.write(g),M.type[0]==="L"?k.write("// "+M.value.trim()+`
`,M):(k.write("/*"),A(k,M.value,g,B),k.write("*/"+B))}function x(k){for(var P=k;P!=null;){var g=P,B=g.type;if(B[0]==="C"&&B[1]==="a")return!0;if(B[0]==="M"&&B[1]==="e"&&B[2]==="m")P=P.object;else return!1}}function w(k,P){var g=k.generator,B=P.declarations;k.write(P.kind+" ");var M=B.length;if(0<M){g.VariableDeclarator(B[0],k);for(var N=1;N<M;N++)k.write(", "),g.VariableDeclarator(B[N],k)}}Object.defineProperty(n,"__esModule",{value:!0}),n.generate=function(k,P){var g=new Z(P);return g.generator[k.type](k,g),g.output},n.baseGenerator=n.GENERATOR=n.EXPRESSIONS_PRECEDENCE=n.NEEDS_PARENTHESES=void 0;var y=JSON.stringify;if(!o.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!o.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");var c={"||":3,"&&":4,"|":5,"??":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},p=17;n.NEEDS_PARENTHESES=p;var v={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:p,ClassExpression:p,FunctionExpression:p,ObjectExpression:p,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};n.EXPRESSIONS_PRECEDENCE=v;var C,I,T,L,Y,j,z={Program:function(P,g){var B=g.indent.repeat(g.indentLevel),M=g.lineEnd,N=g.writeComments;N&&P.comments!=null&&S(g,P.comments,B,M);for(var U,H=P.body,G=H.length,K=0;K<G;K++)U=H[K],N&&U.comments!=null&&S(g,U.comments,B,M),g.write(B),this[U.type](U,g),g.write(M);N&&P.trailingComments!=null&&S(g,P.trailingComments,B,M)},BlockStatement:j=function(k,P){var g=P.indent.repeat(P.indentLevel++),B=P.lineEnd,M=P.writeComments,N=g+P.indent;P.write("{");var U=k.body;if(U!=null&&0<U.length){P.write(B),M&&k.comments!=null&&S(P,k.comments,N,B);for(var H,G=U.length,K=0;K<G;K++)H=U[K],M&&H.comments!=null&&S(P,H.comments,N,B),P.write(N),this[H.type](H,P),P.write(B);P.write(g)}else M&&k.comments!=null&&(P.write(B),S(P,k.comments,N,B),P.write(g));M&&k.trailingComments!=null&&S(P,k.trailingComments,N,B),P.write("}"),P.indentLevel--},ClassBody:j,StaticBlock:function(P,g){g.write("static "),this.BlockStatement(P,g)},EmptyStatement:function(P,g){g.write(";")},ExpressionStatement:function(P,g){var B=g.expressionsPrecedence[P.expression.type];B===p||B===3&&P.expression.left.type[0]==="O"?(g.write("("),this[P.expression.type](P.expression,g),g.write(")")):this[P.expression.type](P.expression,g),g.write(";")},IfStatement:function(P,g){g.write("if ("),this[P.test.type](P.test,g),g.write(") "),this[P.consequent.type](P.consequent,g),P.alternate!=null&&(g.write(" else "),this[P.alternate.type](P.alternate,g))},LabeledStatement:function(P,g){this[P.label.type](P.label,g),g.write(": "),this[P.body.type](P.body,g)},BreakStatement:function(P,g){g.write("break"),P.label!=null&&(g.write(" "),this[P.label.type](P.label,g)),g.write(";")},ContinueStatement:function(P,g){g.write("continue"),P.label!=null&&(g.write(" "),this[P.label.type](P.label,g)),g.write(";")},WithStatement:function(P,g){g.write("with ("),this[P.object.type](P.object,g),g.write(") "),this[P.body.type](P.body,g)},SwitchStatement:function(P,g){var B=g.indent.repeat(g.indentLevel++),M=g.lineEnd,N=g.writeComments;g.indentLevel++;var U=B+g.indent,H=U+g.indent;g.write("switch ("),this[P.discriminant.type](P.discriminant,g),g.write(") {"+M);for(var G,K=P.cases,ot=K.length,ut=0;ut<ot;ut++){G=K[ut],N&&G.comments!=null&&S(g,G.comments,U,M),G.test?(g.write(U+"case "),this[G.test.type](G.test,g),g.write(":"+M)):g.write(U+"default:"+M);for(var pt,ft=G.consequent,ht=ft.length,ct=0;ct<ht;ct++)pt=ft[ct],N&&pt.comments!=null&&S(g,pt.comments,H,M),g.write(H),this[pt.type](pt,g),g.write(M)}g.indentLevel-=2,g.write(B+"}")},ReturnStatement:function(P,g){g.write("return"),P.argument&&(g.write(" "),this[P.argument.type](P.argument,g)),g.write(";")},ThrowStatement:function(P,g){g.write("throw "),this[P.argument.type](P.argument,g),g.write(";")},TryStatement:function(P,g){if(g.write("try "),this[P.block.type](P.block,g),P.handler){var B=P.handler;B.param==null?g.write(" catch "):(g.write(" catch ("),this[B.param.type](B.param,g),g.write(") ")),this[B.body.type](B.body,g)}P.finalizer&&(g.write(" finally "),this[P.finalizer.type](P.finalizer,g))},WhileStatement:function(P,g){g.write("while ("),this[P.test.type](P.test,g),g.write(") "),this[P.body.type](P.body,g)},DoWhileStatement:function(P,g){g.write("do "),this[P.body.type](P.body,g),g.write(" while ("),this[P.test.type](P.test,g),g.write(");")},ForStatement:function(P,g){if(g.write("for ("),P.init!=null){var B=P.init;B.type[0]==="V"?w(g,B):this[B.type](B,g)}g.write("; "),P.test&&this[P.test.type](P.test,g),g.write("; "),P.update&&this[P.update.type](P.update,g),g.write(") "),this[P.body.type](P.body,g)},ForInStatement:C=function(k,P){P.write("for ".concat(k.await?"await ":"","("));var g=k.left;g.type[0]==="V"?w(P,g):this[g.type](g,P),P.write(k.type[3]==="I"?" in ":" of "),this[k.right.type](k.right,P),P.write(") "),this[k.body.type](k.body,P)},ForOfStatement:C,DebuggerStatement:function(P,g){g.write("debugger;",P)},FunctionDeclaration:I=function(k,P){P.write((k.async?"async ":"")+(k.generator?"function* ":"function ")+(k.id?k.id.name:""),k),m(P,k.params),P.write(" "),this[k.body.type](k.body,P)},FunctionExpression:I,VariableDeclaration:function(P,g){w(g,P),g.write(";")},VariableDeclarator:function(P,g){this[P.id.type](P.id,g),P.init!=null&&(g.write(" = "),this[P.init.type](P.init,g))},ClassDeclaration:function(P,g){if(g.write("class "+(P.id?"".concat(P.id.name," "):""),P),P.superClass){g.write("extends ");var B=P.superClass,M=B.type,N=g.expressionsPrecedence[M];(M[0]!=="C"||M[1]!=="l"||M[5]!=="E")&&(N===p||N<g.expressionsPrecedence.ClassExpression)?(g.write("("),this[P.superClass.type](B,g),g.write(")")):this[B.type](B,g),g.write(" ")}this.ClassBody(P.body,g)},ImportDeclaration:function(P,g){g.write("import ");var B=P.specifiers,M=B.length,N=0;if(0<M){for(;N<M;){0<N&&g.write(", ");var U=B[N],H=U.type[6];if(H==="D")g.write(U.local.name,U),N++;else if(H==="N")g.write("* as "+U.local.name,U),N++;else break}if(N<M){for(g.write("{");;){var G=B[N],K=G.imported.name;if(g.write(K,G),K!==G.local.name&&g.write(" as "+G.local.name),++N<M)g.write(", ");else break}g.write("}")}g.write(" from ")}this.Literal(P.source,g),g.write(";")},ImportExpression:function(P,g){g.write("import("),this[P.source.type](P.source,g),g.write(")")},ExportDefaultDeclaration:function(P,g){g.write("export default "),this[P.declaration.type](P.declaration,g),g.expressionsPrecedence[P.declaration.type]!=null&&P.declaration.type[0]!=="F"&&g.write(";")},ExportNamedDeclaration:function(P,g){if(g.write("export "),P.declaration)this[P.declaration.type](P.declaration,g);else{g.write("{");var B=P.specifiers,M=B.length;if(0<M)for(var N=0;;){var U=B[N],H=U.local.name;if(g.write(H,U),H!==U.exported.name&&g.write(" as "+U.exported.name),++N<M)g.write(", ");else break}g.write("}"),P.source&&(g.write(" from "),this.Literal(P.source,g)),g.write(";")}},ExportAllDeclaration:function(P,g){P.exported==null?g.write("export * from "):g.write("export * as "+P.exported.name+" from "),this.Literal(P.source,g),g.write(";")},MethodDefinition:function(P,g){P.static&&g.write("static ");var B=P.kind[0];(B==="g"||B==="s")&&g.write(P.kind+" "),P.value.async&&g.write("async "),P.value.generator&&g.write("*"),P.computed?(g.write("["),this[P.key.type](P.key,g),g.write("]")):this[P.key.type](P.key,g),m(g,P.value.params),g.write(" "),this[P.value.body.type](P.value.body,g)},ClassExpression:function(P,g){this.ClassDeclaration(P,g)},ArrowFunctionExpression:function(P,g){g.write(P.async?"async ":"",P);var B=P.params;B!=null&&(B.length===1&&B[0].type[0]==="I"?g.write(B[0].name,B[0]):m(g,P.params)),g.write(" => "),P.body.type[0]==="O"?(g.write("("),this.ObjectExpression(P.body,g),g.write(")")):this[P.body.type](P.body,g)},ThisExpression:function(P,g){g.write("this",P)},Super:function(P,g){g.write("super",P)},RestElement:T=function(k,P){P.write("..."),this[k.argument.type](k.argument,P)},SpreadElement:T,YieldExpression:function(P,g){g.write(P.delegate?"yield*":"yield"),P.argument&&(g.write(" "),this[P.argument.type](P.argument,g))},AwaitExpression:function(P,g){g.write("await ",P),D(g,P.argument,P)},TemplateLiteral:function(P,g){var B=P.quasis,M=P.expressions;g.write("`");for(var N=M.length,U=0;U<N;U++){var H=M[U],G=B[U];g.write(G.value.raw,G),g.write("${"),this[H.type](H,g),g.write("}")}var K=B[B.length-1];g.write(K.value.raw,K),g.write("`")},TemplateElement:function(P,g){g.write(P.value.raw,P)},TaggedTemplateExpression:function(P,g){D(g,P.tag,P),this[P.quasi.type](P.quasi,g)},ArrayExpression:Y=function(k,P){if(P.write("["),0<k.elements.length)for(var g,B=k.elements,M=B.length,N=0;;)if(g=B[N],g!=null&&this[g.type](g,P),++N<M)P.write(", ");else{g==null&&P.write(", ");break}P.write("]")},ArrayPattern:Y,ObjectExpression:function(P,g){var B=g.indent.repeat(g.indentLevel++),M=g.lineEnd,N=g.writeComments,U=B+g.indent;if(g.write("{"),0<P.properties.length){g.write(M),N&&P.comments!=null&&S(g,P.comments,U,M);for(var H,G=P.properties,K=G.length,ot=0;H=G[ot],N&&H.comments!=null&&S(g,H.comments,U,M),g.write(U),this[H.type](H,g),++ot<K;)g.write(","+M);g.write(M),N&&P.trailingComments!=null&&S(g,P.trailingComments,U,M),g.write(B+"}")}else N?P.comments==null?P.trailingComments==null?g.write("}"):(g.write(M),S(g,P.trailingComments,U,M),g.write(B+"}")):(g.write(M),S(g,P.comments,U,M),P.trailingComments!=null&&S(g,P.trailingComments,U,M),g.write(B+"}")):g.write("}");g.indentLevel--},Property:function(P,g){P.method||P.kind[0]!=="i"?this.MethodDefinition(P,g):(!P.shorthand&&(P.computed?(g.write("["),this[P.key.type](P.key,g),g.write("]")):this[P.key.type](P.key,g),g.write(": ")),this[P.value.type](P.value,g))},PropertyDefinition:function(P,g){P.static&&g.write("static "),this[P.key.type](P.key,g),g.write(" = "),this[P.value.type](P.value,g)},ObjectPattern:function(P,g){if(g.write("{"),0<P.properties.length)for(var B=P.properties,M=B.length,N=0;this[B[N].type](B[N],g),++N<M;)g.write(", ");g.write("}")},SequenceExpression:function(P,g){m(g,P.expressions)},UnaryExpression:function(P,g){if(P.prefix){var B=P.operator,M=P.argument,N=P.argument.type;g.write(B);var U=i(g,M,P);!U&&(1<B.length||N[0]==="U"&&(N[1]==="n"||N[1]==="p")&&M.prefix&&M.operator[0]===B&&(B==="+"||B==="-"))&&g.write(" "),U?(g.write(1<B.length?" (":"("),this[N](M,g),g.write(")")):this[N](M,g)}else this[P.argument.type](P.argument,g),g.write(P.operator)},UpdateExpression:function(P,g){P.prefix?(g.write(P.operator),this[P.argument.type](P.argument,g)):(this[P.argument.type](P.argument,g),g.write(P.operator))},AssignmentExpression:function(P,g){this[P.left.type](P.left,g),g.write(" "+P.operator+" "),this[P.right.type](P.right,g)},AssignmentPattern:function(P,g){this[P.left.type](P.left,g),g.write(" = "),this[P.right.type](P.right,g)},BinaryExpression:L=function(k,P){var g=k.operator==="in";g&&P.write("("),D(P,k.left,k,!1),P.write(" "+k.operator+" "),D(P,k.right,k,!0),g&&P.write(")")},LogicalExpression:L,ConditionalExpression:function(P,g){var B=P.test,M=g.expressionsPrecedence[B.type];M===p||M<=g.expressionsPrecedence.ConditionalExpression?(g.write("("),this[B.type](B,g),g.write(")")):this[B.type](B,g),g.write(" ? "),this[P.consequent.type](P.consequent,g),g.write(" : "),this[P.alternate.type](P.alternate,g)},NewExpression:function(P,g){g.write("new ");var B=g.expressionsPrecedence[P.callee.type];B===p||B<g.expressionsPrecedence.CallExpression||x(P.callee)?(g.write("("),this[P.callee.type](P.callee,g),g.write(")")):this[P.callee.type](P.callee,g),m(g,P.arguments)},CallExpression:function(P,g){var B=g.expressionsPrecedence[P.callee.type];B===p||B<g.expressionsPrecedence.CallExpression?(g.write("("),this[P.callee.type](P.callee,g),g.write(")")):this[P.callee.type](P.callee,g),P.optional&&g.write("?."),m(g,P.arguments)},ChainExpression:function(P,g){this[P.expression.type](P.expression,g)},MemberExpression:function(P,g){var B=g.expressionsPrecedence[P.object.type];B===p||B<g.expressionsPrecedence.MemberExpression?(g.write("("),this[P.object.type](P.object,g),g.write(")")):this[P.object.type](P.object,g),P.computed?(P.optional&&g.write("?."),g.write("["),this[P.property.type](P.property,g),g.write("]")):(P.optional?g.write("?."):g.write("."),this[P.property.type](P.property,g))},MetaProperty:function(P,g){g.write(P.meta.name+"."+P.property.name,P)},Identifier:function(P,g){g.write(P.name,P)},PrivateIdentifier:function(P,g){g.write("#".concat(P.name),P)},Literal:function(P,g){P.raw==null?P.regex==null?P.bigint==null?g.write(y(P.value),P):g.write(P.bigint+"n",P):this.RegExpLiteral(P,g):g.write(P.raw,P)},RegExpLiteral:function(P,g){var B=P.regex;g.write("/".concat(B.pattern,"/").concat(B.flags),P)}};n.GENERATOR=z;var q={};n.baseGenerator=z;var Z=function(){function k(P){h(this,k);var g=P==null?q:P;this.output="",g.output==null?this.output="":(this.output=g.output,this.write=this.writeToStream),this.generator=g.generator==null?z:g.generator,this.expressionsPrecedence=g.expressionsPrecedence==null?v:g.expressionsPrecedence,this.indent=g.indent==null?"  ":g.indent,this.lineEnd=g.lineEnd==null?`
`:g.lineEnd,this.indentLevel=g.startingIndentLevel==null?0:g.startingIndentLevel,this.writeComments=!!g.comments&&g.comments,g.sourceMap!=null&&(this.write=g.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=g.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:g.sourceMap.file||g.sourceMap._file})}return f(k,[{key:"write",value:function(g){this.output+=g}},{key:"writeToStream",value:function(g){this.output.write(g)}},{key:"writeAndMap",value:function(g,B){this.output+=g,this.map(g,B)}},{key:"writeToStreamAndMap",value:function(g,B){this.output.write(g),this.map(g,B)}},{key:"map",value:function(g,B){if(B!=null){var M=B.type;if(M[0]==="L"&&M[2]==="n")return this.column=0,void this.line++;if(B.loc!=null){var N=this.mapping;N.original=B.loc.start,N.name=B.name,this.sourceMap.addMapping(N)}if(M[0]==="T"&&M[8]==="E"||M[0]==="L"&&M[1]==="i"&&typeof B.value=="string"){for(var U=g.length,H=this.column,G=this.line,K=0;K<U;K++)g[K]===`
`?(H=0,G++):H++;return this.column=H,void(this.line=G)}}var ot=g.length,ut=this.lineEnd;0<ot&&(0<this.lineEndSize&&(ut.length===1?g[ot-1]===ut:g.endsWith(ut))?(this.line+=this.lineEndSize,this.column=0):this.column+=ot)}},{key:"toString",value:function(){return this.output}}]),k}()})}),ws=_u.generate;function Iu(s){let e=new st;for(let f in s){let m=s[f];if(!m.layers.includes("F.Cu"))continue;let i=[m.pos[0],m.pos[1]];m.origin!=null&&(i[0]=m.origin[0],i[1]=m.origin[1]),e.group(new st().pathD(m.shape).translate(i))}let n=e.width,o=e.height,h=e.cc,l=Math.max(n,o);return e.translate(e.cc,[-25,-25]).scale([40/l,-40/l],e.cc).flatten()}function Ss(s){let e=ge.parseScript(s,{range:!0,comment:!0}),n=[],o=h=>{let l=!1;return h.type!=="ObjectExpression"?!1:(h.properties.forEach(f=>{if(f.value.type!=="ObjectExpression")return;let m=f.value.properties.map(i=>i.key.value);l=l||["shape","pos","layers"].every(i=>m.includes(i))}),l)};return e.body.forEach(h=>{h.type==="VariableDeclaration"&&h.declarations.forEach(l=>{if(l.type==="VariableDeclarator"&&o(l.init)){let f=ws(l.init);try{let m=JSON.parse(f);n.push([l.id.name,m])}catch(m){}}})}),n.map(h=>[...h,Iu(h[1])])}var Ut={codemirror:void 0,storedPCB:void 0,transforming:!1,transformUpdate:()=>{},selectBox:{},footprints:[],shapes:[],limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4,grid:!0,gridSize:.05,viewHandles:!0,panZoomParams:void 0,previewFootprint:null},As=class extends ur{constructor(){super();Ut.storedPCB=this}},hr={pcb:null,layerColors:{"F.Cu":"#ff8c00cc"},limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4};function Tu({pcb:s,layerColors:e,limits:n,mm_per_unit:o}){s===void 0&&console.log("renderPCB must include pcb param"),e===void 0&&(e=hr.layerColors),n===void 0&&(n=hr.limits),o===void 0&&(o=hr.mm_per_unit);let h=[];for(let l in e)h.push({data:s.getLayer(l),color:e[l],groupId:l});Ut.shapes=h,Ut.limits=n,Ut.mm_per_unit=o,rt("RENDER")}var cr={shapes:[],limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4};function Fu({shapes:s,limits:e,mm_per_unit:n}){s===void 0&&(s=cr.shapes),e===void 0&&(e=cr.limits),n===void 0&&(n=cr.mm_per_unit),Ut.shapes=s,Ut.limits=e,Ut.mm_per_unit=n,rt("RENDER")}var _s={kicadToObj:Ps,PCB:As,via:ds,Turtle:st,renderPCB:Tu,renderShapes:Fu,document:null,window:null,localStorage:null,Function:null,eval:null};async function bu(s,e){let o=await(await fetch(s,{mode:"cors"})).text();e.codemirror.view.dispatch({changes:{from:0,insert:o}});let h=D=>D.includes("return kicadToObj("),f=e.codemirror.view.state.doc.toString().split(`
`),m=0,i=0;for(;;){let D=f[m];if(!D||(i+=D.length,m>f.length)||f[m]==="`)})()"&&!h(f[m+1]))break;m++}e.codemirror.foldRange(0,i+m),rt("RUN"),document.querySelector(".center-button").click()}var Bu={INIT(s,e){rt("RENDER"),e.codemirror=document.querySelector("#code-editor"),fs(e);let n=new URL(window.location.href),o=window.location.search,h=new URLSearchParams(o).get("code"),l=new URLSearchParams(o).get("file"),f=new URLSearchParams(o).get("handles")==="false",m=new URLSearchParams(o).get("grid")==="false";if(f&&(e.viewHandles=!1),m&&(e.grid=!1),!h)if(l){let i=l;l.startsWith("http")||(i=`examples/${l}`),bu(i,e)}else{let i=window.localStorage.getItem("svg-pcb");e.codemirror.view.dispatch({changes:{from:0,insert:i!=null?i:""}}),rt("RUN"),document.querySelector(".center-button").click()}rt("RENDER")},RUN({dragging:s=!1}={},e){let n=e.codemirror.view.state.doc.toString();if(!s){let l=[];try{l=Ss(n)}catch(f){}e.footprints=l}[].forEach(l=>{if(n.includes(l))throw`"${l}" is not permitted due to security concerns.`}),new Function(...Object.keys(_s),n)(...Object.values(_s))},UPLOAD_COMP({text:s,name:e},n){s=s.replaceAll("$",""),s=`const ${e} = (() => { return kicadToObj(
\`${s}\`)})()
`,n.codemirror.view.dispatch({changes:{from:0,insert:s}}),n.codemirror.foldRange(0,s.length),rt("RENDER")},UPLOAD_JS({text:s},e){let n=e.codemirror.view.state.doc.toString().length;e.codemirror.view.dispatch({changes:{from:0,to:n,insert:s}}),rt("RUN"),document.querySelector(".center-button").click()},ADD_IMPORT({text:s,name:e},n){var f;if(n.footprints.map(m=>m[0]).includes(e))return;let h=n.codemirror.view.state.doc.toString(),l=(f=Ve("DECLARE_COMPONENTS",h))!=null?f:0;s=`const ${e} = ${s}
`,n.codemirror.view.dispatch({changes:{from:l,insert:s}}),rt("RUN")},TRANSLATE({x:s,y:e,index:n},o){o.transformUpdate(s,e),rt("RUN",{dragging:!0})},RENDER(){wr(ts(Ut),document.getElementById("root"))}};function rt(s,e={}){let n=Bu[s];if(n)return n(e,Ut);console.log("Action not recongnized:",s)}window.addEventListener("load",()=>{rt("INIT")});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
//# sourceMappingURL=main.js.map
