{
  "version": 3,
  "sources": ["../../build/js/view.js", "../../build/js/neil-components-names.js", "../../build/js/events/download.js", "../../build/js/dispatch.js", "../../build/js/events/addTranslateHandle.js", "../../build/js/events/addVerticalBarDrag.js", "../../build/js/events/addImgPanZoom.js", "../../build/js/events/addDropUpload.js", "../../build/js/events/addSelectBox.js", "../../build/js/events/addNumberDragging.js", "../../build/js/events.js", "../../build/js/Turtle.js", "../../build/js/pcb_helpers.js", "../../build/js/pcb.js", "../../build/js/s-expression-parser.js", "../../build/js/ki_cad_parser.js", "../../build/js/main.js"],
  "sourcesContent": ["import { html, svg } from \"https://cdn.skypack.dev/lit-html\";\nimport \"https://leomcelroy.com/widgets/code-mirror.js\";\nimport { files } from \"./neil-components-names.js\";\nimport { downloadSVG, downloadText } from \"./events/download.js\"\n\nconst drawImportItems = (files) => files.map(x => x.slice(10)).map( x => html`\n\t<div class=\"import-item\" @mousedown=${async (e) => {\n\t\tconst res = await fetch(`neil-components/${x}`);\n\t\tconst text = await res.text();\n\t\tdispatch(\"ADD_IMPORT\", { text, name: e.target.innerText.split(\"/\")[1].split(\".\")[0] });\n\t}}>${x}</div>\n`)\n\nexport function view(state) {\n\treturn html`\n\t\t<div class=\"top-menu\">\n\t\t\t<div class=\"left\">\n\t\t\t\t<button\n\t\t\t\t\t@click=${() => dispatch(\"RUN\", { save: true })}>\n\t\t\t\t\trun (shift + enter)\n\t\t\t\t</button>\n\t\t\t\t<div class=\"seperator\"></div>\n\t\t\t\t<div class=\"dropdown-container\">\n\t\t\t\t \timport\n\t\t\t\t \t<div class=\"dropdown-content\">\n\t\t\t\t \t\t${drawImportItems(files)}\n\t\t\t\t \t</div>\n\t\t\t\t </div>\n\t\t\t\t <div class=\"seperator\"></div>\n\t\t\t\t <div class=\"dropdown-container\">\n\t\t\t\t\tdownload\n\t\t\t\t\t<div class=\"dropdown-content dropdown-content\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=${() => downloadSVG(state)}>\n\t\t\t\t\t\t\tsvg\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=${() => downloadText(\"anon.js\", state.codemirror.view.state.doc.toString())}>\n\t\t\t\t\t\t\tjs\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"seperator\"></div>\n\t\t\t\t<div class=\"dropdown-container\">\n\t\t\t\t\tdrawing\n\t\t\t\t\t<div class=\"dropdown-content dropdown-content\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"center-button\"\n\t\t\t\t\t\t\t@click=${() => {\n    \t\t\t\t\t\t\tstate.panZoomParams.setScaleXY(state.limits);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\tcenter\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>handles</span>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked=${state.viewHandles}\n\t\t\t\t\t\t\t\t@change=${(e) => {\n\t\t\t\t\t\t\t\t\tstate.viewHandles = e.target.checked;\n\t\t\t\t\t\t\t\t\tdispatch(\"RENDER\");\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclass=\"handles-checkbox\">\n\t\t\t\t\t\t\t</input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>grid size:</span>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tstep=\"0.005\"\n\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\tvalue=${state.gridSize}\n\t\t\t\t\t\t\t\t@change=${e => {\n\t\t\t\t\t\t\t\t\tstate.gridSize = Number(e.target.value);\n\t\t\t\t\t\t\t\t\tdispatch(\"RENDER\");\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t</input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<code-mirror id=\"code-editor\"></code-mirror>\n\t\t${svgViewer(state)}\n\t\t<div id=\"vertical-bar\"></div>\n\t`\n}\n\n// neil-components/connectors/ESC.json\n\nconst mapColors = arr => arr.length === 4\n\t? `rgba(${arr.map((n,i) => i < 3 ? Math.round(n*255) : n).join(\",\")})`\n\t: arr.length === 3 ? `hsl(${arr[0]}, ${arr[1]}%, ${arr[2]}%)`\n\t: \"rgba(255, 255, 255, 1)\"\n\nconst drawPath = (d, color) => svg`\n\t<path\n\t\td=\"${d}\"\n\t\tfill-rule=\"nonzero\"\n\t\tfill=\"${typeof color === \"string\" ? color : mapColors(color)}\"/>\n`\n\nconst ptsToD = pts => pts.reduce((acc, cur, i) => `${acc} ${i === 0 ? \"M\" : \"L\"} ${cur.join(\",\")}`, \"\");\n\n\nconst drawGrid = (corners, gridSize) => {\n\n\tconst middX = [\n\t\t[corners.lt.x, (corners.lt.y + corners.lb.y)/2],\n\t\t[corners.rt.x, (corners.rt.y + corners.rb.y)/2],\n\t]\n\n\tconst middY = [\n\t\t[(corners.lt.x + corners.rt.x)/2, corners.lt.y],\n\t\t[(corners.lb.x + corners.rb.x)/2, corners.lb.y],\n\t]\n\n\tconst originX = [\n\t\t[corners.lt.x, 0],\n\t\t[corners.rt.x, 0],\n\t]\n\n\tconst originY = [\n\t\t[0, corners.lt.y],\n\t\t[0, corners.lb.y],\n\t]\n\n\tconst xLimits = [corners.lt.x, corners.rt.x];\n\tconst xRange = Math.abs(xLimits[1] - xLimits[0]);\n\tconst yLimits = [corners.lb.y, corners.lt.y];\n\tconst yRange = Math.abs(yLimits[1] - yLimits[0]);\n\n\tfunction getBaseLog(x, y) {\n\t  return Math.log(y) / Math.log(x);\n\t}\n\n\tconst order = Math.round(getBaseLog(5, Math.max(xRange, yRange)));\n\t// const stepSize = (5**(order-1))/5;\n\tconst stepSize = gridSize;\n\n\tconst getMarkVals = (limits, stepSize) => {\n\t\tlet marks = [];\n\t\tlet current = stepSize*Math.ceil(limits[0]/stepSize) - stepSize;\n\t\twhile (current < limits[1] + stepSize) {\n\t\t\tcurrent = current + stepSize;\n\t\t\tmarks.push(current);\n\t\t}\n\n\t\treturn marks\n\t}\n\n\tconst valToLineH = val => [\n\t\t[corners.lt.x, val],\n\t\t[corners.rt.x, val]\n\t];\n\n\tconst valToLineV = val => [\n\t\t[val, corners.lt.y],\n\t\t[val, corners.lb.y],\n\t];\n\n\tconst lineToMark = width => line => svg`<path stroke=\"black\" vector-effect=\"non-scaling-stroke\" stroke-width=\"${width}\" d=\"${ptsToD(line)}\"/>`\n\n\tconst hMarks = getMarkVals(yLimits, stepSize).map(valToLineH).map(lineToMark(0.2))\n\tconst vMarks = getMarkVals(xLimits, stepSize).map(valToLineV).map(lineToMark(0.2))\n\n\t// console.log(getMarkVals(yLimits, stepSize));\n\n\treturn svg`\n\t\t<g class=\"grid no-download\">\n\t\t\t${lineToMark(.6)(originX)}\n\t\t\t${lineToMark(.6)(originY)}\n\t\t\t${hMarks}\n\t\t\t${vMarks}\n\t\t</g>\n\t`\n}\n\nconst svgViewer = (state) => {\n\tconst shapes = state.shapes.map(p => Array.isArray(p.d)\n\t\t? p.d.map(d => drawPath(d, p.color))\n\t\t: drawPath(p.d, p.color)\n\t).flat();\n\n\tconst corners = state.panZoomParams?.corners();\n\n\n\treturn svg`\n\t\t<svg id=\"viewer\" style=\"transform: scale(1, -1);\">\n\t\t\t<g class=\"transform-group\">\n\t\t\t      ${ state.selectBox.start && state.selectBox.end ? svg`\n\t\t\t      \t<path\n\t\t\t\t        class=\"selectBox\"\n\t\t\t\t        d=\"\n\t\t\t\t          M ${state.selectBox.start.x} ${state.selectBox.start.y}\n\t\t\t\t          L ${state.selectBox.end.x} ${state.selectBox.start.y}\n\t\t\t\t          L ${state.selectBox.end.x} ${state.selectBox.end.y}\n\t\t\t\t          L ${state.selectBox.start.x} ${state.selectBox.end.y}\n\t\t\t\t        \"\n\t\t\t      \t/>` : \"\"\n\t\t\t      }\n\t\t\t\t${shapes}\n\t\t\t\t${state.panZoomParams && state.gridSize > 0 ? drawGrid(state.panZoomParams.corners(), state.gridSize) : \"\"}\n\t\t\t\t<rect\n\t\t\t\t\tclass=\"limits no-download\"\n\t\t\t\t\twidth=\"${state.limits.x[1] - state.limits.x[0]}\"\n\t\t\t\t\theight=\"${state.limits.y[1] - state.limits.y[0]}\"\n\t\t\t\t\tstroke=\"black\" fill=\"transparent\" stroke-width=\"1\"\n\t\t\t\t\tvector-effect=\"non-scaling-stroke\"\n\t\t\t\t\ttransform=\"translate(${state.limits.x[0]}, ${state.limits.y[0]})\"/>\n\t\t\t\t${state.storedPCB && state.viewHandles ? drawHandles(state.storedPCB) : \"\"}\n\t\t\t</g>\n\n\t\t</svg>\n\t`\n}\n\n// <circle class=\"no-download\" cx=\"0\" cy=\"0\" r=\"0.1\" vector-effect=\"non-scaling-stroke\"/>\n\nconst drawHandles = (pcb) => pcb.components.map((comp, i) => svg`\n\t<circle\n\t\tclass=\"no-download translate-handle\"\n\t\tcx=\"${comp.posX}\"\n\t\tcy=\"${comp.posY}\"\n\t\tdata-index=${i}\n\t\tr=\"0.015\"\n\t\t/>\n`)\n", "export const files = [\"./library/connectors/ESP8266_12E.json\",\"./library/connectors/header_FTDI.json\",\"./library/connectors/power_65mm.json\",\"./library/connectors/ESP32_CAM.json\",\"./library/connectors/USB_A_plug.json\",\"./library/connectors/header_i0.json\",\"./library/connectors/header_serial_reverse.json\",\"./library/connectors/header_4.json\",\"./library/connectors/header_signal.json\",\"./library/connectors/MTA_i0.json\",\"./library/connectors/HM11.json\",\"./library/connectors/header_MFRC522.json\",\"./library/connectors/header_serial_reverse_5V.json\",\"./library/connectors/USB_mini_B.json\",\"./library/connectors/ESC.json\",\"./library/connectors/MTA_PS2.json\",\"./library/connectors/header_APA.json\",\"./library/connectors/MTA_ICP.json\",\"./library/connectors/stereo_2_5mm.json\",\"./library/connectors/header_VL53L1X_3415.json\",\"./library/connectors/Molex_serial.json\",\"./library/connectors/header_SWD_4_1.json\",\"./library/connectors/ESP_01.json\",\"./library/connectors/HCSR04.json\",\"./library/connectors/header_SWD_4_05.json\",\"./library/connectors/ESP32_WROOM.json\",\"./library/connectors/header_serial.json\",\"./library/connectors/header_PDI.json\",\"./library/connectors/I2C4x1v.json\",\"./library/connectors/header_power.json\",\"./library/connectors/MTA_serial.json\",\"./library/connectors/header_LSM6DS33_2736.json\",\"./library/connectors/MTA_2.json\",\"./library/connectors/MTA_3.json\",\"./library/connectors/header_LCD.json\",\"./library/connectors/screw_terminal_2.json\",\"./library/connectors/HCSR501.json\",\"./library/connectors/screw_terminal_i0.json\",\"./library/connectors/header_unipolar_stepper.json\",\"./library/connectors/screw_terminal_power.json\",\"./library/connectors/header_nRF24L01.json\",\"./library/connectors/header_serial_reverse_3V3.json\",\"./library/connectors/MTA_power.json\",\"./library/connectors/MTA_4.json\",\"./library/connectors/RCWL0516.json\",\"./library/connectors/ESP_WROOM_02D.json\",\"./library/connectors/RN4871.json\",\"./library/connectors/header_I2C.json\",\"./library/connectors/header_SWD.json\",\"./library/connectors/header_servo.json\",\"./library/connectors/microSD.json\",\"./library/connectors/header_4H.json\",\"./library/connectors/header_UPDI.json\",\"./library/connectors/I2C4x1i.json\",\"./library/connectors/I2C4x1h.json\",\"./library/connectors/header_ISP.json\",\"./library/connectors/header_NEO_6M.json\",\"./library/connectors/MTA_5.json\",\"./library/connectors/header_6.json\",\"./library/connectors/header_UPDI_reverse.json\",\"./library/connectors/header_bus.json\",\"./library/connectors/TFT8x1v.json\",\"./library/connectors/header_2H.json\",\"./library/connectors/header_ATP.json\",\"./library/switches/button_6mm.json\",\"./library/switches/slide_switch.json\",\"./library/diodes_transistors_regulators_sensors/D_1206.json\",\"./library/diodes_transistors_regulators_sensors/mic_SPM1437.json\",\"./library/diodes_transistors_regulators_sensors/LED_1206.json\",\"./library/diodes_transistors_regulators_sensors/NMOSFET_TO252AA.json\",\"./library/diodes_transistors_regulators_sensors/regulator_SOT223.json\",\"./library/diodes_transistors_regulators_sensors/regulator_SOT23.json\",\"./library/diodes_transistors_regulators_sensors/VL53L1X.json\",\"./library/diodes_transistors_regulators_sensors/H_bridge_SM8.json\",\"./library/diodes_transistors_regulators_sensors/SPG08P4HM4H.json\",\"./library/diodes_transistors_regulators_sensors/Hall_SOT23.json\",\"./library/diodes_transistors_regulators_sensors/VEML6040.json\",\"./library/diodes_transistors_regulators_sensors/phototransistor_1206.json\",\"./library/diodes_transistors_regulators_sensors/LED_RGB.json\",\"./library/diodes_transistors_regulators_sensors/accel_MXD6235M.json\",\"./library/diodes_transistors_regulators_sensors/ADXL343.json\",\"./library/diodes_transistors_regulators_sensors/mic_SPU0414HR5H.json\",\"./library/diodes_transistors_regulators_sensors/D_SOD_123.json\",\"./library/diodes_transistors_regulators_sensors/LED_3014_1100.json\",\"./library/diodes_transistors_regulators_sensors/A4953_SOICN.json\",\"./library/diodes_transistors_regulators_sensors/NMOSFET_SOT23.json\",\"./library/diodes_transistors_regulators_sensors/phototransistor_PLCC2.json\",\"./library/diodes_transistors_regulators_sensors/PMOSFET_SOT23.json\",\"./library/diodes_transistors_regulators_sensors/DRV8428_HTSSOP.json\",\"./library/diodes_transistors_regulators_sensors/CMM4030D261I2STR.json\",\"./library/crystals_and_resonators/XTAL_CSM_7.json\",\"./library/crystals_and_resonators/XTAL_NX5032GA.json\",\"./library/crystals_and_resonators/XTAL_EFOBM.json\",\"./library/discretes/R_0402.json\",\"./library/discretes/ST4EB.json\",\"./library/discretes/C_1206.json\",\"./library/discretes/R_1206.json\",\"./library/discretes/choke.json\",\"./library/discretes/L_1210.json\",\"./library/discretes/C_FND.json\",\"./library/ICs/CBA.json\",\"./library/ICs/SAMD21E.json\",\"./library/ICs/AVRDB28.json\",\"./library/ICs/FT230XS.json\",\"./library/ICs/ATtiny1614.json\",\"./library/ICs/fab.json\",\"./library/ICs/ATtiny44_SOICN.json\",\"./library/ICs/ATxmegaE5_TQFP.json\",\"./library/ICs/op_amp_SOICN.json\",\"./library/ICs/ATtiny45_SOIC.json\",\"./library/ICs/ATmega88_TQFP.json\",\"./library/ICs/SAMD11D.json\",\"./library/ICs/TRC102.json\",\"./library/ICs/ATtiny412.json\",\"./library/ICs/ATmega644_TQFP.json\",\"./library/ICs/op_amp_SOT23_5.json\",\"./library/ICs/SAMD11C.json\",\"./library/ICs/ATtiny3216.json\"]", "export function downloadSVG(state) {\n\n    const serializer = new XMLSerializer();\n    const svg = document.querySelector(\"svg\").cloneNode(true);\n    const toRemove = svg.querySelectorAll(\".no-download\");\n    for (const item of toRemove) {\n      item.remove();\n    }\n\n    const tg = svg.querySelector(\".transform-group\");\n    tg.style.transformOrigin = \"\";\n    tg.style.transform = \"\";\n    // tg.style.transformOrigin = `${0}px ${0}px`;\n    // tg.style.transform = \"translate(\" + 0 + \"px, \" + 0 + \"px) scale(\" + 1 + \")\";\n\n    const width = (state.limits.x[1] - state.limits.x[0]);\n    const height = (state.limits.y[1] - state.limits.y[0]);\n    svg.setAttribute(\"width\", `${width*state.mm_per_unit}mm`);\n    svg.setAttribute(\"height\", `${height*state.mm_per_unit}mm`);\n    svg.setAttribute(\"viewBox\", `${state.limits.x[0]} ${state.limits.y[0]} ${width} ${height}`);\n    svg.setAttributeNS(\n      \"http://www.w3.org/2000/xmlns/\",\n      \"xmlns:xlink\",\n      \"http://www.w3.org/1999/xlink\"\n    );\n\n    const source = serializer.serializeToString(svg);\n    const svgUrl = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(source);\n\n    // make download link\n    const downloadLink = document.createElement(\"a\");\n    downloadLink.href = svgUrl;\n    downloadLink.download = `download.svg`;\n    document.body.appendChild(downloadLink);\n    downloadLink.click();\n\n    // clean up\n    document.body.removeChild(downloadLink);\n  }\n\nexport function downloadText(filename, text) {\n  const blob = new Blob([text], { type: \"text/plain\" });\n\n  var link = document.createElement(\"a\"); // Or maybe get it from the current document\n  link.href = URL.createObjectURL(blob);\n  link.download = `${filename}`;\n  link.click();\n  URL.revokeObjectURL(link);\n}", "import { view } from \"./view.js\";\nimport { render } from \"https://cdn.skypack.dev/lit-html\";\n\nimport { addEvents } from \"./events.js\";\n\nimport { PCB as real_PCB } from \"./pcb.js\";\nimport { kicadToObj } from \"./ki_cad_parser.js\"\nimport { Turtle } from \"./Turtle.js\";\n\n\nconst STATE = {\n\tcodemirror: undefined,\n\tstoredPCB: undefined,\n\ttransforming: false,\n\ttransformUpdate: () => {},\n\tselectBox: {},\n\tshapes: [],\n\tlimits: {\n\t\tx: [0, 1],\n\t\ty: [0, 1]\n\t},\n\tmm_per_unit: 25.4,\n\tgridSize: 0.05,\n\tviewHandles: true,\n\tpanZoomParams: undefined,\n}\n\nclass PCB extends real_PCB {\n\tconstructor() {\n\t\tsuper();\n\t\tSTATE.storedPCB = this;\n\t}\n}\n\nconst included = {\n\tkicadToObj,\n\tPCB,\n\tTurtle\n}\n\nasync function urlToCode(file_url, state) {\n\tconst file = await fetch(file_url,  {mode: 'cors'});\n\tconst txt = await file.text();      \n\n    state.codemirror.view.dispatch({\n\t  changes: {from: 0, insert: txt}\n\t});\n\n    // fold imports\n\tconst anotherComp = l => l.includes(\"return kicadToObj(\");\n\n\tconst doc = state.codemirror.view.state.doc;\n\tconst lines = doc.toString().split(\"\\n\");\n\tlet i = 0;\n\tlet count = 0;\n\twhile (true) {\n\t\tconst line = lines[i];\n\t\tif (!line) break;\n\t\tcount += line.length;\n\t\tif (i > lines.length) break;\n\t\tif (lines[i] === \"`)})()\" && !anotherComp(lines[i+1])) break;\n\t\ti++;\n\t};\n\n\tstate.codemirror.foldRange(0, count+i);\n\n    dispatch(\"RUN\");\n    document.querySelector(\".center-button\").click();\n}\n\nconst ACTIONS = {\n\tINIT(args, state) {\n\t\tdispatch(\"RENDER\");\n\t\tstate.codemirror = document.querySelector(\"#code-editor\");\n\t\taddEvents(state);\n\n\t\tconst url = new URL(window.location.href);\n\n\t    const search = window.location.search;\n\t    const code = new URLSearchParams(search).get(\"code\");\n\t    const file = new URLSearchParams(search).get(\"file\");\n\n\t    if (code) {\n\n\t    } else if (file) {\n          let file_url = file;\n          if (!file.startsWith(\"http\")) file_url = `examples/${file}`;\n\n          urlToCode(file_url, state);\n\t    } else {\n\t    \tconst saved = window.localStorage.getItem(\"svg-pcb\")\n\t\t    state.codemirror.view.dispatch({\n\t\t\t  changes: {from: 0, insert: saved ?? \"\"}\n\t\t\t});\n\n\t\t\tdispatch(\"RUN\");\n\t\t\tdocument.querySelector(\".center-button\").click();\n\t    }\n\t},\n\tRUN({ save = false }, state) {\n\t\tconst string = state.codemirror.view.state.doc.toString();\n\t\t// const result = JSON.parse(string); // if json\n\n\t\tconst f = new Function(...Object.keys(included), string)\n\t\tconst result = f(...Object.values(included));\n\n\t\tlet { shapes, limits, mm_per_unit } = typeof result === \"string\" ? JSON.parse(result) : result;\n\n\t\tstate.shapes = shapes;\n\t\tstate.limits = limits;\n\t\tstate.mm_per_unit = mm_per_unit;\n\n\t\tif (save) {\n\t\t\twindow.localStorage.setItem(\"svg-pcb\", string)\n\t\t}\n\t\t\n\t\tdispatch(\"RENDER\");\n\t},\n\tUPLOAD_COMP({ text, name }, state) {\n\t\ttext = text.replaceAll(\"$\", \"\");\n\t\ttext = `const ${name} = (() => { return kicadToObj(\\n\\`${text}\\`)})()\\n`\n\t\tstate.codemirror.view.dispatch({\n\t\t  changes: {from: 0, insert: text}\n\t\t});\n\n\t\tstate.codemirror.foldRange(0, text.length);\n\t\tdispatch(\"RENDER\");\n\t},\n\tUPLOAD_JS({ text }, state) {\n\t\tconst end = state.codemirror.view.state.doc.toString().length;\n\t\tstate.codemirror.view.dispatch({\n\t\t  changes: {from: 0, to: end, insert: text}\n\t\t});\n\n\t\tdispatch(\"RUN\");\n\t\tdocument.querySelector(\".center-button\").click()\n\t},\n\tADD_IMPORT({ text, name }, state) {\n\t\ttext = `const ${name} = ${text}\\n`\n\t\tstate.codemirror.view.dispatch({\n\t\t  changes: {from: 0, insert: text}\n\t\t});\n\n\t\tdispatch(\"RENDER\");\n\t},\n\tTRANSLATE({ x, y, index }, state) {\n\t\tstate.transformUpdate(x, y);\n\t\tdispatch(\"RUN\");\n\t},\n\tRENDER() {\n\t\trender(view(STATE), document.getElementById(\"root\"));\n\t}\n}\n\nexport function dispatch(action, args = {}) {\n\tconst trigger = ACTIONS[action];\n\tif (trigger) trigger(args, STATE);\n\telse console.log(\"Action not recongnized:\", action);\n}\n", "import esprima from 'https://cdn.skypack.dev/esprima';\nimport { generate } from 'https://cdn.skypack.dev/astring';\nimport { walk } from \"https://cdn.skypack.dev/esprima-walk\";\n\nfunction foldImports(state) {\n  const anotherComp = l => l.includes(\"return kicadToObj(\");\n\n  const doc = state.codemirror.view.state.doc;\n  const lines = doc.toString().split(\"\\n\");\n  let i = 0;\n  let count = 0;\n  while (true) {\n    const line = lines[i];\n    if (!line) break;\n    count += line.length;\n    if (i > lines.length) break;\n    if (lines[i] === \"`)})()\" && !anotherComp(lines[i+1])) break;\n    i++;\n  };\n\n  state.codemirror.foldRange(0, count+i);\n}\n\nexport function addTranslateHandle(state, svgListener) {\n  const svg = document.querySelector(\"svg\");\n\n  let clicked = false;\n  let clickedPoint;\n  let lastX = 0;\n  let lastY = 0;\n  let index;\n\n  svgListener(\"mousedown\", \".translate-handle\", e => {\n    clicked = true;\n    state.transforming = true;\n    lastX = 0;\n    lastY = 0;\n\n    const svgPoint = svg.panZoomParams.svgPoint;\n    clickedPoint = svgPoint({x: e.offsetX, y: e.offsetY})\n\n    index = e.target.dataset.index;\n\n    const string = state.codemirror.view.state.doc.toString();\n    const stringToParse = `()=>{${string}}`; // remember to subtract 5 from indices\n    const esprimaAST = esprima.parseScript(stringToParse, { range: true, comment: true });\n    console.log(esprimaAST);\n    const mainBody = esprimaAST.body[0].expression.body.body;\n\n    console.log(mainBody);\n    let adds = [];\n    walk(esprimaAST, node => {\n      try {\n          if (node.callee.type === \"MemberExpression\" && node.callee.property.name === \"add\") adds.push(node.arguments[1]);\n      } catch (err) { }\n    })\n    // sort by first range\n    const sortedAdds = adds.sort((a, b) => a.range[0] - b.range[0])\n    const sigFigs = num => num.includes(\".\")\n      ? num.split(\".\")[1].length\n      : num.length;\n\n    const step = (num, stepSize) => Math.round(num/stepSize)*stepSize;\n    const round = (num, sigFigs) => Math.round(num*10**sigFigs)/(10**sigFigs);\n    const isDigit = (ch) => /[0-9]/i.test(ch) || ch === \".\";\n\n    // const comp = state.storedPCB.components[index];\n\n    state.transformUpdate = (x, y) => {\n\n      const changes = [];\n\n      sortedAdds[index].properties.forEach( prop => {\n        if (prop.key.name !== \"translate\") return;\n        // prop.value.elements = [\n        //   {type: 'Literal', value: round(x + comp.posX), raw: `${round(x + comp.posX)}`},\n        //   {type: 'Literal', value: round(y + comp.posY), raw: `${round(y + comp.posY)}`}\n        // ]\n\n        const [ xNode, yNode ] = prop.value.elements;\n\n        let xChanged = false;\n        walk(xNode, n => {\n          if (xChanged) return;\n          if (n.type === \"Literal\" && typeof n.value === \"number\") {\n            if (!n.ogValue) n.ogValue = n.value;\n            if (!n.ogRaw) n.ogRaw = n.raw;\n\n            let newNum = n.ogValue + x;\n\n            changes.push({ \n              from: n.range[0] - 5, \n              to: n.range[1] - 5,\n              // insert: `${round(newNum, sigFigs(n.ogRaw))}`,\n              insert: `${round(step(newNum, state.gridSize), 8)}` \n            });\n\n            xChanged = true;\n          }\n        })\n\n        let yChanged = false;\n        walk(yNode, n => {\n          if (yChanged) return;\n          if (n.type === \"Literal\" && typeof n.value === \"number\") {\n            if (!n.ogValue) n.ogValue = n.value;\n            if (!n.ogRaw) n.ogRaw = n.raw;\n\n            let newNum = n.ogValue + y;\n\n            changes.push({ \n              from: n.range[0] - 5, \n              to: n.range[1] - 5,\n              // insert: `${round(newNum, sigFigs(n.ogRaw))}`,\n              insert: `${round(step(newNum, state.gridSize), 8)}`  \n            });\n            yChanged = true;\n          }\n        })\n\n        const currentString = state.codemirror.view.state.doc.toString();\n\n        state.codemirror.view.dispatch({\n          changes: { from: 0, to: currentString.length, insert: string }\n        });\n\n        state.codemirror.view.dispatch({ changes });\n      })\n\n      foldImports(state);\n\n    }\n\n    // pauseEvent(e);\n  })\n\n  svgListener(\"mousemove\", \"\", e => {\n    if (!clicked) return;\n\n    const svgPoint = svg.panZoomParams.svgPoint;\n    const currentPoint = svgPoint({x: e.offsetX, y: e.offsetY})\n    const x = currentPoint.x - clickedPoint.x;\n    const y = currentPoint.y - clickedPoint.y;\n    // dispatch(\"TRANSLATE\", { x: x - lastX, y: y - lastY, index });\n    dispatch(\"TRANSLATE\", { x, y, index });\n    lastX = x;\n    lastY = y;\n    // pauseEvent(e);\n  })\n\n  svgListener(\"mouseup\", \"\", e => {\n    clicked = false;\n    state.transforming = false;\n  })\n\n  svgListener(\"mouseleave\", \"\", e => {\n    clicked = false;\n    state.transforming = false;\n  })\n}", "export function addVerticalBarDrag(state, listenBody) {\n\tlet moveVerticalBar = false;\n\n\tlistenBody(\"mousedown\", \"#vertical-bar\", e => {\n\t\tmoveVerticalBar = true;\n\t})\n\n\tlistenBody(\"mousemove\", \"\", (e) => {\n\t\tif (!moveVerticalBar) return;\n\n\t\tlet x = e.clientX/window.innerWidth * 100;\n\t\tif (x === 0) return;\n\n\t\tconst minX = 1;\n\t\tconst maxX = 99;\n\n\t\tif (x < minX) x = minX;\n\t\tif (x > maxX) x = maxX;\n\n\t\tdocument.documentElement.style.setProperty(\"--vertical-bar\", `${x}%`);\n\n\t\tpauseEvent(e);\n\t})\n\n\tlistenBody(\"mouseup\", \"\", e => {\n\t\tmoveVerticalBar = false;\n\t})\n}", "export function addImgPanZoom(state, listen) {\n  let mousedown = false;\n\n  let scale = 1;\n  let pointX = 0;\n  let pointY = 0;\n  let start = { x: 0, y: 0 };\n\n  function setTransform(el) {\n    el.style.transformOrigin = `${0}px ${0}px`;\n    el.style.transform = \"translate(\" + pointX + \"px, \" + pointY + \"px) scale(\" + scale + \")\";\n    if (state.gridSize > 0) dispatch(\"RENDER\");\n  }\n\n  function svgPoint({ x, y }) {\n  \t  let newX = (x - pointX) / scale;\n    \tlet newY = (y - pointY) / scale;\n\n    \treturn { x: newX, y: newY };\n  }\n\n  listen(\"mousedown\", \"\", (e) => {\n    if (e.shiftKey) return;\n\n    mousedown = true;\n\n    start = { x: e.offsetX - pointX, y: e.offsetY - pointY };\n\n    if (e.detail === 2) {\n    \tconsole.log(e.offsetX, e.offsetY, svgPoint({x: e.offsetX, y: e.offsetY}));\n    }\n  })\n\n  listen(\"mousemove\", \"\", (e) => {\n    if (!mousedown) return;\n    if (state.transforming) return;\n\n    pointX = (e.offsetX - start.x);\n    pointY = (e.offsetY - start.y);\n\n    const imgs = document.querySelectorAll(\".transform-group\");\n\n    for (const img of imgs) {\n      setTransform(img);\n    }\n\n  })\n\n  listen(\"mouseup\", \"\", (evt) => {\n    mousedown = false;\n  })\n\n  listen(\"wheel\", \"\", (e) => {\n    \n    let xs = (e.offsetX - pointX) / scale;\n    let ys = (e.offsetY - pointY) / scale;\n\n    if (Math.sign(e.deltaY) < 0) scale *= 1.03;\n    else scale /= 1.03;\n\n    pointX = e.offsetX - xs * scale;\n    pointY = e.offsetY - ys * scale;\n\n    const imgs = document.querySelectorAll(\".transform-group\");\n    for (const img of imgs) {\n      setTransform(img);\n    }\n\n    e.preventDefault();\n  })\n\n  function setScaleXY(limits) {\n    console.log(\"set scale x y\")\n    const svg = document.querySelector(\"svg\");\n    const bb = svg.getBoundingClientRect();\n    const xr = limits.x[1] - limits.x[0];\n    const yr = limits.y[1] - limits.y[0];\n    const xScalingFactor = bb.width/xr;\n    const yScalingFactor = bb.height/yr;\n\n    const scalingFactor = Math.min(xScalingFactor, yScalingFactor) * 0.9;\n\n    scale = scalingFactor;\n\n    const center = { \n      x: (limits.x[0] + limits.x[1])/2 * scalingFactor - bb.width/2,\n      y: (limits.y[0] + limits.y[1])/2 * scalingFactor - bb.height/2\n    }\n\n    pointX = -center.x;\n    pointY = -center.y;\n\n    const imgs = document.querySelectorAll(\".transform-group\");\n    for (const img of imgs) {\n      setTransform(img);\n    }\n  }\n\n  function corners() {\n    const svg = document.querySelector(\"svg\"); // what if there were other svgs?\n    if (svg === null) return null;\n    const { left, right, bottom, top, width, height} = svg.getBoundingClientRect();\n    // need rt, lt, rb, lb\n    const rt = svgPoint({ x: width, y: height });\n    // rt.y = -rt.y\n    const lt = svgPoint({ x: 0, y: height });\n    // lt.y = -lt.y\n    const rb = svgPoint({ x: width, y: 0 });\n    // rb.y = -rb.y\n    const lb = svgPoint({ x: 0, y: 0 });\n    // lb.y = -lb.y\n\n    return { rt, lt, rb, lb }\n  }\n\n  return { \n  \tscale: () => scale,\n  \tx: () => pointX,\n  \ty: () => pointY,\n    corners,\n    svgPoint,\n    setScaleXY\n  }\n}", "let count = 0;\nfunction readFileUploadComp(file) {\n  var reader = new FileReader();\n  reader.readAsText(file);\n\n  reader.onloadend = event => {\n    let text = reader.result;\n    dispatch(\"UPLOAD_COMP\", {text, name: `component${count}`});\n    count++;\n  };\n}\n\nfunction readFileJS(file) {\n  var reader = new FileReader();\n  reader.readAsText(file);\n\n  reader.onloadend = event => {\n    let text = reader.result;\n    dispatch(\"UPLOAD_JS\", { text });\n  };\n}\n\nfunction upload(files, extensions = []) {\n  let file = files[0];\n  let fileName = file.name.split(\".\");\n  let name = fileName[0];\n  const extension = fileName[fileName.length - 1];\n\n  // if (extensions.length > 0 && !extensions.includes(extension)) throw \"Extension not recongized: \" + fileName;\n  \n  // TODO: if js then drop and run\n  // TODO: if kicad mod readFile as is\n  if (extension === \"kicad_mod\") {\n    readFileUploadComp(file);\n  } else if (extension === \"js\") {\n    readFileJS(file);\n  } else {\n    throw Error(\"Unknown extension:\", extension);\n  }\n\n};\n\nexport function addDropUpload(state, bodyListener) {\n  bodyListener(\"drop\", \"\", function(evt) {    \n    let dt = evt.dataTransfer;\n    let files = dt.files;\n\n    upload(files);\n\n    pauseEvent(evt);\n  });\n\n  bodyListener(\"dragover\", \"\", function(evt) {    \n    pauseEvent(evt);\n  });\n}", "export function addSelectBox(state, svgListener) {\n  let start = null;\n  let end = null;\n  const svg = document.querySelector(\"svg\");\n\n  svgListener(\"mousedown\", \"\", e => {\n    if (!e.shiftKey) return;\n\n    start = svg.panZoomParams.svgPoint({x: e.offsetX, y: e.offsetY});\n  })\n\n  svgListener(\"mousemove\", \"\", e => {\n  \tdocument.body.classList.add(\"no-select\");\n    if (!e.shiftKey) return;\n    if (start === null) return;\n\n    end = svg.panZoomParams.svgPoint({x: e.offsetX, y: e.offsetY});\n\n    state.selectBox.start = start;\n    state.selectBox.end = end;\n    dispatch(\"RENDER\");\n  })\n\n  function contains (p, selectBox) {\n    // console.log(p, selectBox);\n    let { start, end } = selectBox;\n    return (\n      (p.x > start.x && p.x < end.x && p.y > start.y && p.y < end.y) ||\n      (p.x > start.x && p.x < end.x && p.y < start.y && p.y > end.y) ||\n      (p.x < start.x && p.x > end.x && p.y > start.y && p.y < end.y) ||\n      (p.x < start.x && p.x > end.x && p.y < start.y && p.y > end.y)\n    );\n  };\n\n  svgListener(\"mouseup\", \"\", e => {\n    if (!e.shiftKey) return;\n  \tdocument.body.classList.remove(\"no-select\");\n    if (start && end) {\n      // select\n    }\n    \n    start = null;\n    end = null;\n    state.selectBox.start = start;\n    state.selectBox.end = end;\n    dispatch(\"RENDER\");\n  })\n}", "const isDigit = (ch, left = false) => /[0-9]/i.test(ch) || ch === \".\" || (left && ch === \"-\");\n\nexport function addNumberDragging(state, bodyListener) {\n  let dragged = false;\n  let num, pos_start, pos_end, sigFigs, usePrecision, selectedText;\n\n  bodyListener(\"mousedown\", \".Í¼b\", e => {\n    const cm = document.querySelector(\"code-mirror\");\n\n    const s = cm.view.state;\n    const doc = s.doc;\n    const pos = s.selection.main.head;\n    const at = doc.lineAt(pos);\n\n    let { from, to, text} = doc.lineAt(pos)\n    let start = pos, end = pos;\n    // console.log(\"start\", start, text[start - from - 1], \"end\", end, text[end - from]);\n    while (start > from && isDigit(text[start - from - 1], true)) start--\n    while (end < to && isDigit(text[end - from])) end++\n\n\n    selectedText = text.slice(start-from, end-from);\n\n    num = Number(selectedText);\n    dragged = true;\n    pos_start = start;\n    pos_end = end;\n    usePrecision = selectedText.includes(\".\");\n    sigFigs = selectedText.includes(\".\") ? selectedText.split(\".\")[1].length : 1;\n  })\n\n  bodyListener(\"mousemove\", \"\", e => {\n    if (!dragged) return;\n    const cm = document.querySelector(\"code-mirror\");\n\n\t\tconst sign = 0 > e.movementX ? 1 : -1;\n\t\t// console.log(sign, e.movementX);\n\t\tconst oldValue = `${num}`;\n\t\tif (usePrecision) {\n\t\t\tlet rounded = Math.round(num*10**sigFigs);\n\t\t\tlet newNum = rounded + e.movementX;\n\t\t\tnewNum = Math.round(newNum)/(10**sigFigs);\n\n\t\t\tnum = newNum;    \n\t\t} else {\n\t\t\tnum += e.movementX;\n\t\t}\n\n\t\tconst newValue = `${num}`;\n\t\tcm.view.dispatch({\n\t\t\tchanges: {from: pos_start, to: pos_start + selectedText.length, insert: newValue}\n\t\t});\n\n\t\tselectedText = newValue;\n\n\t\tdispatch(\"RUN\");\n\t\tpauseEvent(e);\n  })\n\n  bodyListener(\"mouseup\", \"\", e => {\n    dragged = false;\n  })\n}", "import { addTranslateHandle } from \"./events/addTranslateHandle.js\";\nimport { addVerticalBarDrag } from \"./events/addVerticalBarDrag.js\";\nimport { addImgPanZoom } from \"./events/addImgPanZoom.js\";\nimport { addDropUpload } from \"./events/addDropUpload.js\";\nimport { addSelectBox } from \"./events/addSelectBox.js\";\nimport { addNumberDragging } from \"./events/addNumberDragging.js\";\n// import { download } from \"./events/download.js\"\n\nfunction pauseEvent(e) {\n    if(e.stopPropagation) e.stopPropagation();\n    if(e.preventDefault) e.preventDefault();\n    e.cancelBubble=true;\n    e.returnValue=false;\n    return false;\n}\n\nwindow.pauseEvent = pauseEvent;\n\nconst trigger = e => e.composedPath()[0];\nconst matchesTrigger = (e, selectorString) => trigger(e).matches(selectorString);\n// create on listener\nconst createListener = (target) => (eventName, selectorString, event) => { // focus doesn't work with this, focus doesn't bubble, need focusin\n\ttarget.addEventListener(eventName, (e) => {\n\t\te.trigger = trigger(e); // Do I need this? e.target seems to work in many (all?) cases\n\t\tif (selectorString === \"\" || matchesTrigger(e, selectorString)) event(e);\n\t})\n}\n\nexport function addEvents(state) {\n\tconst svg = document.querySelector(\"svg\");\n\tconst listenSVG = createListener(svg);\n  \n\tsvg.panZoomParams = addImgPanZoom(state, listenSVG);\n  state.panZoomParams = svg.panZoomParams;\n\n\taddSelectBox(state, listenSVG);\n  addTranslateHandle(state, listenSVG);\n\n\tconst body = document.querySelector(\"body\");\n\tconst listenBody = createListener(body);\n\taddDropUpload(state, listenBody);\n\taddNumberDragging(state, listenBody);\n\taddVerticalBarDrag(state, listenBody);\n\n\tlistenBody(\"keydown\", \"\", (e) => {\n\t\tlet code = event.code;\n\t\tif (code === \"Enter\" && event.shiftKey) {\n\t\t  event.preventDefault();\n\t\t  dispatch(\"RUN\", { save: true });\n\t\t} else if (code === \"KeyT\" && event.shiftKey) { // test something\n      \n    }\n\t})\n\n  // listenBody(\"mousedown\", \".download-button\", () => download(state));\n\n  // listenBody(\"click\", \".center-button\", () => {\n  //   const svg = document.querySelector(\"svg\");\n  //   svg.panZoomParams.setScaleXY(state.limits);\n  // })\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n", "import { Turtle } from \"https://leomcelroy.com/gram-js/exports.js\";\n\nfunction circle(radius) {\n  return new Turtle()\n    .arc(360, radius)\n    .originate()\n}\n\nfunction rectangle(width, height) { \n\treturn new Turtle() \n\t  .forward(width)\n\t  .right(90)\n\t  .forward(height)\n\t  .right(90)\n\t  .repeat(1)\n\t  .originate()\n}\n\nTurtle.prototype.circle = circle;\nTurtle.prototype.rectangle = rectangle;\n\nexport { Turtle }", "import { Turtle } from \"./Turtle.js\";\n\nconst length = ([x1, y1], [x2, y2]) => Math.sqrt((x2-x1)**2 + (y2-y1)**2);\nconst overlap = (p1, p2) => length(p1, p2) < 0.000001;\n\nconst wire = (pts, thickness) => {\n  let lastPt = pts[0];\n  let result = new Turtle();\n  result.booleanScale = 2000;\n  result.goto(lastPt, false);\n  for (const pt of pts.slice(1)) {\n    if (overlap(pt, lastPt)) continue;\n    result.goto(pt);\n    lastPt = pt;\n  }\n\n  return result.offset(thickness);\n}\n\nconst vector_add = ([x, y], [dx, dy]) => [x + dx, y + dy];\nconst dot = ([x0, y0], [x1, y1]) => x0*x1 + y0*y1;\nconst vector_rotate = ([x, y], angle) => [\n  x*Math.cos(angle) - y * Math.sin(angle),\n  y*Math.cos(angle) + x * Math.sin(angle)\n]\n\n\nclass Component {\n  constructor({ pads, layers }) {\n    this.pads = pads;\n    this.layers = layers;\n  }\n\n  pad(name) {\n    return this.pads[name];\n  }\n\n  padX(name) {\n    return this.pads[name][0];\n  }\n\n  padY(name) {\n    return this.pads[name][1];\n  }\n\n  get pos() {\n    return this.pads[\"center\"]; // should store this somewhere else\n  }\n\n  get posX() {\n    return this.pads[\"center\"][0]; // should store this somewhere else\n  }\n\n  get posY() {\n    return this.pads[\"center\"][1]; // should store this somewhere else\n  }\n}\n\n// let SWD_4_05 = {\n//   \"RST\": {\n//     \"pos\": [-0.072, -0.025],\n//     \"shape\": \"M 0 0 L 90 90\",\n//     \"layers\": [\"F.Cu\"]\n//   },\n//   \"GND\": {\n//     \"pos\": [0.072, -0.025],\n//     \"shape\": \"M 0 0 L 90 90\",\n//     \"layers\": [\"F.Cu\"]\n//   }\n// }\n\nfunction makeComponent(comp, options = {}) {\n  let translate = options.translate || [0, 0];\n  let rotate = options.rotate || 0;\n  let padLabelSize = options.padLabelSize || 0.0002;\n  let componentLabelSize = options.componentLabelSize || 0.0003;\n  // add flip\n\n  const [xOff, yOff] = translate;\n  const rad = (rotate * Math.PI) / 180;\n\n  const pads = {}; // name: pos\n  const padsLabels = [];\n  let results = {};\n\n  for (const pad in comp) {\n    let { pos, shape, layers } = comp[pad];\n\n    shape = typeof shape === \"string\" ? new Turtle().bezier(shape) : shape.copy();\n\n    let pad_pos = vector_add(vector_rotate(pos, rad), translate);\n    pads[pad] = pad_pos;\n\n    shape.translate(pad_pos).rotate(rotate, pad_pos);\n\n    if (!pad.includes(\"_drill\")) {\n      let text = new Turtle()\n        .text(pad)\n        .scale(padLabelSize)\n        .originate()\n        .translate(pad_pos);\n      padsLabels.push( text );\n    }\n\n    layers.forEach(l => {\n      if (l in results) results[l] = results[l].group(shape);\n      else results[l] = shape;\n    })\n  }\n\n  pads[\"center\"] = translate;\n\n  results.padLabels = padsLabels.reduce( (acc, cur) => acc.group(cur), new Turtle());\n\n  return new Component({\n    pads,\n    layers: results\n  })\n}\n\nexport {\n  wire,\n  makeComponent,\n}\n", "import { makeComponent, wire } from \"./pcb_helpers.js\";\nimport { Turtle } from \"./Turtle.js\";\n\nexport class PCB {\n  constructor() {\n    this.layers = {}; // maybe should just store shapes, get layer contents on demand\n    this.components = [];\n  }\n\n  add(footprint, ops = {}) {\n    // ops = { translate, rotate, padLabelSize, componentLabelSize, value? }\n    const name = ops.name || \"\";\n    const transform = {\n      translate: ops.translate || [0, 0],\n      rotate: ops.rotate || 0,\n      padLabelSize: ops.padLabelSize || 0.0003,\n      componentLabelSize: ops.componentLabelSize || 0.0004,\n    };\n\n    const newComp = makeComponent(footprint, transform);\n\n    for ( const layer in newComp.layers) {\n      this.addShape(layer, newComp.layers[layer]);\n    }\n\n    if (name !== \"\" && !name.includes(\"_drill\")) {\n      let componentLabels = new Turtle()\n        .text(name)\n        .scale(transform.componentLabelSize)\n        .originate()\n        .translate(transform.translate);\n\n      // let componentLabels = [\"text\", name];\n\n      this.addShape(\"componentLabels\", componentLabels);\n    }\n\n    this.components.push(newComp);\n\n    return newComp;\n  }\n\n  via(pos, rv, rp, name) {\n    let VIA = {\n      \"1\": {\n        \"pos\": [0, 0],\n        \"shape\": new Turtle().circle(rp).getPathData(),\n        \"layers\": [\"F.Cu\"],\n        \"index\": 1\n      },\n      \"2\": {\n        \"pos\": [0, 0],\n        \"shape\": new Turtle().circle(rp).getPathData(),\n        \"layers\": [\"B.Cu\"],\n        \"index\": 2\n      },\n      \"drill\": {\n        \"pos\": [0, 0],\n        \"shape\": new Turtle().circle(rv).getPathData(),\n        \"layers\": [\"drill\"]\n      },\n    }\n\n    return this.add(VIA, {translate: pos, name: name});\n  }\n\n  addShape(layer, shape) {\n    if (!(shape instanceof Turtle)) return console.error(\"Shape isn't Turtle.\");\n\n    if (layer in this.layers) {\n      this.layers[layer] = this.layers[layer].group(shape);\n    } else {\n      this.layers[layer] = shape;\n    }\n\n    return this.layers[layer];\n  }\n\n  subtractShape(layer, shape) {\n    if (!(shape instanceof Turtle)) return console.error(\"Shape isn't Turtle.\");\n\n    if (layer in this.layers) {\n      this.layers[layer] = this.layers[layer].difference(shape);\n    } else {\n      this.layers[layer] = new Turtle();\n    }\n\n    return this.layers[layer];\n  }\n\n  getLayer(layer, flatten = false) {\n    const paths = layer.includes(\"Labels\");\n    // flatten = false; // !layer.includes(\"Labels\");\n    flatten = !layer.includes(\"Labels\");\n\n    return this.layers[layer]\n      ? flatten\n        ? this.layers[layer].flatten().getPathData(paths)\n        : this.layers[layer].getPathData(paths)\n      : \"\";\n  }\n\n  wire(pts, thickness, layer = \"F.Cu\") {\n    this.addShape(layer, wire(pts, thickness));\n  }\n\n}\n", "// https://github.com/fwg/s-expression\n\nfunction SParser(stream) {\n    this._line = this._col = this._pos = 0;\n    this._stream = stream;\n}\n\nSParser.not_whitespace_or_end = /^(\\S|$)/;\nSParser.space_quote_paren_escaped_or_end = /^(\\s|\\\\|\"|'|`|,|\\(|\\)|$)/;\nSParser.string_or_escaped_or_end = /^(\\\\|\"|$)/;\nSParser.string_delimiters = /[\"]/;\nSParser.quotes = /['`,]/;\nSParser.quotes_map = {\n    '\\'': 'quote',\n    '`':  'quasiquote',\n    ',':  'unquote'\n};\n\nSParser.prototype = {\n    peek: peek,\n    consume: consume,\n    until: until,\n    error: error,\n    string: string,\n    atom: atom,\n    quoted: quoted,\n    expr: expr,\n    list: list\n};\n\nexport function sParse(stream) {\n    var parser = new SParser(stream);\n    var expression = parser.expr();\n\n    if (expression instanceof Error) {\n        return expression;\n    }\n\n    // if anything is left to parse, it's a syntax error\n    if (parser.peek() != '') {\n        return parser.error('Superfluous characters after expression: `' + parser.peek() + '`');\n    }\n\n    return expression;\n};\n\nfunction error(msg) {\n    var e = new Error('Syntax error: ' + msg);\n    e.line = this._line + 1;\n    e.col  = this._col + 1;\n    return e;\n}\n\nfunction peek() {\n    if (this._stream.length == this._pos) return '';\n    return this._stream[this._pos];\n}\n\nfunction consume() {\n    if (this._stream.length == this._pos) return '';\n\n    var c = this._stream[this._pos];\n    this._pos += 1;\n\n    if (c == '\\r') {\n        if (this.peek() == '\\n') {\n            this._pos += 1;\n            c += '\\n';\n        }\n        this._line++;\n        this._col = 0;\n    } else if (c == '\\n') {\n        this._line++;\n        this._col = 0;\n    } else {\n        this._col++;\n    }\n\n    return c;\n}\n\nfunction until(regex) {\n    var s = '';\n\n    while (!regex.test(this.peek())) {\n        s += this.consume();\n    }\n\n    return s;\n}\n\nfunction string() {\n    // consume \"\n    var delimiter = this.consume();\n\n    var str = '';\n\n    while (true) {\n        str += this.until(SParser.string_or_escaped_or_end);\n        var next = this.peek();\n\n        if (next == '') {\n            return this.error('Unterminated string literal');\n        }\n\n        if (next == delimiter) {\n            this.consume();\n            break;\n        }\n\n        if (next == '\\\\') {\n            this.consume();\n            next = this.peek();\n\n            if (next == 'r') {\n                this.consume();\n                str += '\\r';\n            } else if (next == 't') {\n                this.consume();\n                str += '\\t';\n            } else if (next == 'n') {\n                this.consume();\n                str += '\\n';\n            } else if (next == 'f') {\n                this.consume();\n                str += '\\f';\n            } else if (next == 'b') {\n                this.consume();\n                str += '\\b';\n            } else {\n                str += this.consume();\n            }\n\n            continue;\n        }\n\n        str += this.consume();\n    }\n\n    // wrap in object to make strings distinct from symbols\n    return new String(str);\n}\n\nfunction atom() {\n    if (SParser.string_delimiters.test(this.peek())) {\n        return this.string();\n    }\n\n    var atom = '';\n\n    while (true) {\n        atom += this.until(SParser.space_quote_paren_escaped_or_end);\n        var next = this.peek();\n\n        if (next == '\\\\') {\n            this.consume();\n            atom += this.consume();\n            continue;\n        }\n\n        break;\n    }\n\n    return atom;\n}\n\nfunction quoted() {\n    var q = this.consume();\n    var quote = SParser.quotes_map[q];\n\n    if (quote == \"unquote\" && this.peek() == \"@\") {\n        this.consume();\n        quote = \"unquote-splicing\";\n        q = ',@';\n    }\n\n    // ignore whitespace\n    this.until(SParser.not_whitespace_or_end);\n    var quotedExpr = this.expr();\n\n    if (quotedExpr instanceof Error) {\n        return quotedExpr;\n    }\n\n    // nothing came after '\n    if (quotedExpr === '') {\n        return this.error('Unexpected `' + this.peek() + '` after `' + q + '`');\n    }\n\n    return [quote, quotedExpr];\n}\n\nfunction expr() {\n    // ignore whitespace\n    this.until(SParser.not_whitespace_or_end);\n\n    if (SParser.quotes.test(this.peek())) {\n        return this.quoted();\n    }\n\n    var expr = this.peek() == '(' ? this.list() : this.atom();\n\n    // ignore whitespace\n    this.until(SParser.not_whitespace_or_end);\n\n    return expr;\n}\n\nfunction list() {\n    if (this.peek() != '(') {\n        return this.error('Expected `(` - saw `' + this.peek() + '` instead.');\n    }\n\n    this.consume();\n\n    var ls = [];\n    var v = this.expr();\n\n    if (v instanceof Error) {\n        return v;\n    }\n\n    if (v !== '') {\n        ls.push(v);\n\n        while ((v = this.expr()) !== '') {\n            if (v instanceof Error) return v;\n            ls.push(v);\n        }\n    }\n\n    if (this.peek() != ')') {\n        return this.error('Expected `)` - saw: `' + this.peek() + '`');\n    }\n\n    // consume that closing paren\n    this.consume();\n\n    return ls;\n}", "import { sParse } from \"./s-expression-parser.js\";\nimport { Turtle } from \"./Turtle.js\";\n\n// parser should take units\n\nconst convertLayers = (layers) => layers.reduce((acc, cur) => {\n  let l = cur.split(\".\");\n  if (l.length === 0) return acc;\n  else if (l[0] !== \"*\") return [...acc, cur];\n  else return [...acc, `F.${l[1]}`, `B.${l[1]}`];\n}, [])\n\nexport function kicadToObj(data) {\n  let r = sParse(data);\n\n  let scale = 1/25.4;\n  const padsToAdd = {};\n\n  for (const line of r) {\n    const isPad = line[0] === \"pad\";\n    const isSmd = line[2] === \"smd\";\n    const isThru = line[2] === \"thru_hole\";\n    const shape = line[3];\n\n    if (isPad && (isSmd || isThru)) {\n      let name = line[1];\n\n      let at = line[4].slice(1).map(x => Number(x)*scale);\n      at[1] = -at[1]; // negative Y axis\n\n      let layers = line[line.length - 1];\n      layers = layers ? layers.slice(1) : [];\n      layers = convertLayers(layers);\n\n  \n      let size = line[5].slice(1).map(x => Number(x)*scale);\n\n      let shapeTurtle = shape === \"rect\"\n        ? new Turtle().rectangle(...size)\n        : new Turtle().circle(size[0]);\n     \n      if (padsToAdd[name] === undefined) padsToAdd[name] = [{ pos: at, shape: shapeTurtle, layers }];\n      else padsToAdd[name].push({ pos: at, shape: shapeTurtle, layers });\n\n      const drill = line[line.length - 2] ? line[line.length - 2][0] === \"drill\" : false;\n\n      if (drill) {\n        let drillDia = Number(line[line.length - 2][1])/25.4;\n        let l = { \n          pos: at, \n          shape: new Turtle().circle(drillDia),\n          layers: [\"drill\"]\n        }\n\n        if (padsToAdd[`${name}_drill`] === undefined) padsToAdd[`${name}_drill`] = [l];\n        else  padsToAdd[`${name}_drill`].push(l);\n      }\n    }\n  }\n\n  let result = Object.entries(padsToAdd).reduce((acc, cur) => {\n    const [key, value] = cur;\n\n    if (value.length === 1) {\n      acc[key] = value[0];\n    } else {\n      value.forEach((v, i) => {\n        acc[`${key}_${i + 1}`] = v;\n      })\n    }\n\n    return acc;\n  }, {});\n\n  return result;\n}\n\n\n\n\n", "import { dispatch } from \"./dispatch.js\";\n\nwindow.dispatch = dispatch;\n\nwindow.addEventListener(\"load\", () => {\n\tdispatch(\"INIT\");\n});"],
  "mappings": "AAAA,iEACA,sDCDO,GAAM,GAAQ,CAAC,wCAAwC,wCAAwC,uCAAuC,sCAAsC,uCAAuC,sCAAsC,kDAAkD,qCAAqC,0CAA0C,mCAAmC,iCAAiC,2CAA2C,qDAAqD,uCAAuC,gCAAgC,oCAAoC,uCAAuC,oCAAoC,yCAAyC,gDAAgD,yCAAyC,2CAA2C,mCAAmC,mCAAmC,4CAA4C,wCAAwC,0CAA0C,uCAAuC,oCAAoC,yCAAyC,uCAAuC,iDAAiD,kCAAkC,kCAAkC,uCAAuC,6CAA6C,oCAAoC,8CAA8C,oDAAoD,iDAAiD,4CAA4C,sDAAsD,sCAAsC,kCAAkC,qCAAqC,0CAA0C,mCAAmC,uCAAuC,uCAAuC,yCAAyC,oCAAoC,sCAAsC,wCAAwC,oCAAoC,oCAAoC,uCAAuC,0CAA0C,kCAAkC,qCAAqC,gDAAgD,uCAAuC,oCAAoC,sCAAsC,uCAAuC,qCAAqC,uCAAuC,8DAA8D,mEAAmE,gEAAgE,uEAAuE,wEAAwE,uEAAuE,+DAA+D,oEAAoE,mEAAmE,kEAAkE,gEAAgE,4EAA4E,+DAA+D,sEAAsE,+DAA+D,uEAAuE,iEAAiE,qEAAqE,mEAAmE,qEAAqE,6EAA6E,qEAAqE,sEAAsE,wEAAwE,oDAAoD,uDAAuD,oDAAoD,kCAAkC,iCAAiC,kCAAkC,kCAAkC,iCAAiC,kCAAkC,iCAAiC,yBAAyB,6BAA6B,6BAA6B,6BAA6B,gCAAgC,yBAAyB,oCAAoC,oCAAoC,kCAAkC,mCAAmC,mCAAmC,6BAA6B,4BAA4B,+BAA+B,oCAAoC,oCAAoC,6BAA6B,iCCA7lK,WAAqB,EAAO,CAE/B,GAAM,GAAa,GAAI,eACjB,EAAM,SAAS,cAAc,OAAO,UAAU,IAC9C,EAAW,EAAI,iBAAiB,gBACtC,OAAW,KAAQ,GACjB,EAAK,SAGP,GAAM,GAAK,EAAI,cAAc,oBAC7B,EAAG,MAAM,gBAAkB,GAC3B,EAAG,MAAM,UAAY,GAIrB,GAAM,GAAS,EAAM,OAAO,EAAE,GAAK,EAAM,OAAO,EAAE,GAC5C,EAAU,EAAM,OAAO,EAAE,GAAK,EAAM,OAAO,EAAE,GACnD,EAAI,aAAa,QAAS,GAAG,EAAM,EAAM,iBACzC,EAAI,aAAa,SAAU,GAAG,EAAO,EAAM,iBAC3C,EAAI,aAAa,UAAW,GAAG,EAAM,OAAO,EAAE,MAAM,EAAM,OAAO,EAAE,MAAM,KAAS,KAClF,EAAI,eACF,gCACA,cACA,gCAGF,GAAM,GAAS,EAAW,kBAAkB,GACtC,EAAS,oCAAsC,mBAAmB,GAGlE,EAAe,SAAS,cAAc,KAC5C,EAAa,KAAO,EACpB,EAAa,SAAW,eACxB,SAAS,KAAK,YAAY,GAC1B,EAAa,QAGb,SAAS,KAAK,YAAY,GAGvB,WAAsB,EAAU,EAAM,CAC3C,GAAM,GAAO,GAAI,MAAK,CAAC,GAAO,CAAE,KAAM,eAEtC,GAAI,GAAO,SAAS,cAAc,KAClC,EAAK,KAAO,IAAI,gBAAgB,GAChC,EAAK,SAAW,GAAG,IACnB,EAAK,QACL,IAAI,gBAAgB,GF1CtB,GAAM,IAAkB,AAAC,GAAU,EAAM,IAAI,GAAK,EAAE,MAAM,KAAK,IAAK,GAAK;AAAA,uCAClC,KAAO,IAAM,CAElD,GAAM,GAAO,KAAM,AADP,MAAM,OAAM,mBAAmB,MACpB,OACvB,SAAS,aAAc,CAAE,OAAM,KAAM,EAAE,OAAO,UAAU,MAAM,KAAK,GAAG,MAAM,KAAK,SAC7E;AAAA,GAGC,WAAc,EAAO,CAC3B,MAAO;AAAA;AAAA;AAAA;AAAA,cAIM,IAAM,SAAS,MAAO,CAAE,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOnC,GAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAQT,IAAM,EAAY;AAAA;AAAA;AAAA;AAAA,gBAIlB,IAAM,EAAa,UAAW,EAAM,WAAW,KAAK,MAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAW9D,IAAM,CACX,EAAM,cAAc,WAAW,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQ9B,EAAM;AAAA,kBACN,AAAC,GAAM,CAChB,EAAM,YAAc,EAAE,OAAO,QAC7B,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAWF,EAAM;AAAA,kBACJ,GAAK,CACd,EAAM,SAAW,OAAO,EAAE,OAAO,OACjC,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IASd,GAAU;AAAA;AAAA,GAOd,GAAM,IAAY,GAAO,EAAI,SAAW,EACrC,QAAQ,EAAI,IAAI,CAAC,EAAE,IAAM,EAAI,EAAI,KAAK,MAAM,EAAE,KAAO,GAAG,KAAK,QAC7D,EAAI,SAAW,EAAI,OAAO,EAAI,OAAO,EAAI,QAAQ,EAAI,OACrD,yBAEG,EAAW,CAAC,EAAG,IAAU;AAAA;AAAA,OAExB;AAAA;AAAA,UAEG,MAAO,IAAU,SAAW,EAAQ,GAAU;AAAA,EAGlD,GAAS,GAAO,EAAI,OAAO,CAAC,EAAK,EAAK,IAAM,GAAG,KAAO,IAAM,EAAI,IAAM,OAAO,EAAI,KAAK,OAAQ,IAG9F,GAAW,CAAC,EAAS,IAAa,CAEvC,GAAM,GAAQ,CACb,CAAC,EAAQ,GAAG,EAAI,GAAQ,GAAG,EAAI,EAAQ,GAAG,GAAG,GAC7C,CAAC,EAAQ,GAAG,EAAI,GAAQ,GAAG,EAAI,EAAQ,GAAG,GAAG,IAGxC,EAAQ,CACb,CAAE,GAAQ,GAAG,EAAI,EAAQ,GAAG,GAAG,EAAG,EAAQ,GAAG,GAC7C,CAAE,GAAQ,GAAG,EAAI,EAAQ,GAAG,GAAG,EAAG,EAAQ,GAAG,IAGxC,EAAU,CACf,CAAC,EAAQ,GAAG,EAAG,GACf,CAAC,EAAQ,GAAG,EAAG,IAGV,EAAU,CACf,CAAC,EAAG,EAAQ,GAAG,GACf,CAAC,EAAG,EAAQ,GAAG,IAGV,EAAU,CAAC,EAAQ,GAAG,EAAG,EAAQ,GAAG,GACpC,EAAS,KAAK,IAAI,EAAQ,GAAK,EAAQ,IACvC,EAAU,CAAC,EAAQ,GAAG,EAAG,EAAQ,GAAG,GACpC,EAAS,KAAK,IAAI,EAAQ,GAAK,EAAQ,IAE7C,WAAoB,EAAG,EAAG,CACxB,MAAO,MAAK,IAAI,GAAK,KAAK,IAAI,GAGhC,GAAM,GAAQ,KAAK,MAAM,EAAW,EAAG,KAAK,IAAI,EAAQ,KAElD,EAAW,EAEX,EAAc,CAAC,EAAQ,IAAa,CACzC,GAAI,GAAQ,GACR,EAAU,EAAS,KAAK,KAAK,EAAO,GAAG,GAAY,EACvD,KAAO,EAAU,EAAO,GAAK,GAC5B,EAAU,EAAU,EACpB,EAAM,KAAK,GAGZ,MAAO,IAGF,EAAa,GAAO,CACzB,CAAC,EAAQ,GAAG,EAAG,GACf,CAAC,EAAQ,GAAG,EAAG,IAGV,EAAa,GAAO,CACzB,CAAC,EAAK,EAAQ,GAAG,GACjB,CAAC,EAAK,EAAQ,GAAG,IAGZ,EAAa,GAAS,GAAQ,0EAA4E,SAAa,GAAO,QAE9H,EAAS,EAAY,EAAS,GAAU,IAAI,GAAY,IAAI,EAAW,KACvE,EAAS,EAAY,EAAS,GAAU,IAAI,GAAY,IAAI,EAAW,KAI7E,MAAO;AAAA;AAAA,KAEH,EAAW,IAAI;AAAA,KACf,EAAW,IAAI;AAAA,KACf;AAAA,KACA;AAAA;AAAA,IAKC,GAAY,AAAC,GAAU,CAlL7B,MAmLC,GAAM,GAAS,EAAM,OAAO,IAAI,GAAK,MAAM,QAAQ,EAAE,GAClD,EAAE,EAAE,IAAI,GAAK,EAAS,EAAG,EAAE,QAC3B,EAAS,EAAE,EAAG,EAAE,QACjB,OAEI,EAAU,KAAM,gBAAN,cAAqB,UAGrC,MAAO;AAAA;AAAA;AAAA,WAGI,EAAM,UAAU,OAAS,EAAM,UAAU,IAAM;AAAA;AAAA;AAAA;AAAA,kBAIzC,EAAM,UAAU,MAAM,KAAK,EAAM,UAAU,MAAM;AAAA,kBACjD,EAAM,UAAU,IAAI,KAAK,EAAM,UAAU,MAAM;AAAA,kBAC/C,EAAM,UAAU,IAAI,KAAK,EAAM,UAAU,IAAI;AAAA,kBAC7C,EAAM,UAAU,MAAM,KAAK,EAAM,UAAU,IAAI;AAAA;AAAA,cAEjD;AAAA,MAEV;AAAA,MACA,EAAM,eAAiB,EAAM,SAAW,EAAI,GAAS,EAAM,cAAc,UAAW,EAAM,UAAY;AAAA;AAAA;AAAA,cAG9F,EAAM,OAAO,EAAE,GAAK,EAAM,OAAO,EAAE;AAAA,eAClC,EAAM,OAAO,EAAE,GAAK,EAAM,OAAO,EAAE;AAAA;AAAA;AAAA,4BAGtB,EAAM,OAAO,EAAE,OAAO,EAAM,OAAO,EAAE;AAAA,MAC3D,EAAM,WAAa,EAAM,YAAc,GAAY,EAAM,WAAa;AAAA;AAAA;AAAA;AAAA,IAStE,GAAc,AAAC,GAAQ,EAAI,WAAW,IAAI,CAAC,EAAM,IAAM;AAAA;AAAA;AAAA,QAGrD,EAAK;AAAA,QACL,EAAK;AAAA,eACE;AAAA;AAAA;GG/Nf,2DCDA,gDACA,wCACA,4DAEA,YAAqB,EAAO,CAC1B,GAAM,GAAc,GAAK,EAAE,SAAS,sBAG9B,EAAQ,AADF,EAAM,WAAW,KAAK,MAAM,IACtB,WAAW,MAAM;AAAA,GAC/B,EAAI,EACJ,EAAQ,EACZ,OAAa,CACX,GAAM,GAAO,EAAM,GAInB,GAHI,CAAC,GACL,IAAS,EAAK,OACV,EAAI,EAAM,SACV,EAAM,KAAO,UAAY,CAAC,EAAY,EAAM,EAAE,IAAK,MACvD,IAGF,EAAM,WAAW,UAAU,EAAG,EAAM,GAG/B,WAA4B,EAAO,EAAa,CACrD,GAAM,GAAM,SAAS,cAAc,OAE/B,EAAU,GACV,EACA,EAAQ,EACR,EAAQ,EACR,EAEJ,EAAY,YAAa,oBAAqB,GAAK,CACjD,EAAU,GACV,EAAM,aAAe,GACrB,EAAQ,EACR,EAAQ,EAGR,EAAe,AADE,EAAI,cAAc,SACX,CAAC,EAAG,EAAE,QAAS,EAAG,EAAE,UAE5C,EAAQ,EAAE,OAAO,QAAQ,MAEzB,GAAM,GAAS,EAAM,WAAW,KAAK,MAAM,IAAI,WACzC,EAAgB,QAAQ,KACxB,EAAa,GAAQ,YAAY,EAAe,CAAE,MAAO,GAAM,QAAS,KAC9E,QAAQ,IAAI,GACZ,GAAM,GAAW,EAAW,KAAK,GAAG,WAAW,KAAK,KAEpD,QAAQ,IAAI,GACZ,GAAI,GAAO,GACX,EAAK,EAAY,GAAQ,CACvB,GAAI,CACA,AAAI,EAAK,OAAO,OAAS,oBAAsB,EAAK,OAAO,SAAS,OAAS,OAAO,EAAK,KAAK,EAAK,UAAU,UACxG,EAAP,KAGJ,GAAM,GAAa,EAAK,KAAK,CAAC,EAAG,IAAM,EAAE,MAAM,GAAK,EAAE,MAAM,IACtD,EAAU,GAAO,EAAI,SAAS,KAChC,EAAI,MAAM,KAAK,GAAG,OAClB,EAAI,OAEF,EAAO,CAAC,EAAK,IAAa,KAAK,MAAM,EAAI,GAAU,EACnD,EAAQ,CAAC,EAAK,IAAY,KAAK,MAAM,EAAI,IAAI,GAAU,IAAI,EAC3D,EAAU,AAAC,GAAO,SAAS,KAAK,IAAO,IAAO,IAIpD,EAAM,gBAAkB,CAAC,EAAG,IAAM,CAEhC,GAAM,GAAU,GAEhB,EAAW,GAAO,WAAW,QAAS,GAAQ,CAC5C,GAAI,EAAK,IAAI,OAAS,YAAa,OAMnC,GAAM,CAAE,GAAO,IAAU,EAAK,MAAM,SAEhC,EAAW,GACf,EAAK,GAAO,GAAK,CACf,GAAI,IACA,EAAE,OAAS,WAAa,MAAO,GAAE,OAAU,SAAU,CACvD,AAAK,EAAE,SAAS,GAAE,QAAU,EAAE,OACzB,EAAE,OAAO,GAAE,MAAQ,EAAE,KAE1B,GAAI,GAAS,EAAE,QAAU,EAEzB,EAAQ,KAAK,CACX,KAAM,EAAE,MAAM,GAAK,EACnB,GAAI,EAAE,MAAM,GAAK,EAEjB,OAAQ,GAAG,EAAM,EAAK,EAAQ,EAAM,UAAW,OAGjD,EAAW,MAIf,GAAI,GAAW,GACf,EAAK,GAAO,GAAK,CACf,GAAI,IACA,EAAE,OAAS,WAAa,MAAO,GAAE,OAAU,SAAU,CACvD,AAAK,EAAE,SAAS,GAAE,QAAU,EAAE,OACzB,EAAE,OAAO,GAAE,MAAQ,EAAE,KAE1B,GAAI,GAAS,EAAE,QAAU,EAEzB,EAAQ,KAAK,CACX,KAAM,EAAE,MAAM,GAAK,EACnB,GAAI,EAAE,MAAM,GAAK,EAEjB,OAAQ,GAAG,EAAM,EAAK,EAAQ,EAAM,UAAW,OAEjD,EAAW,MAIf,GAAM,IAAgB,EAAM,WAAW,KAAK,MAAM,IAAI,WAEtD,EAAM,WAAW,KAAK,SAAS,CAC7B,QAAS,CAAE,KAAM,EAAG,GAAI,GAAc,OAAQ,OAAQ,KAGxD,EAAM,WAAW,KAAK,SAAS,CAAE,cAGnC,GAAY,MAOhB,EAAY,YAAa,GAAI,GAAK,CAChC,GAAI,CAAC,EAAS,OAGd,GAAM,GAAe,AADJ,EAAI,cAAc,SACL,CAAC,EAAG,EAAE,QAAS,EAAG,EAAE,UAC5C,EAAI,EAAa,EAAI,EAAa,EAClC,EAAI,EAAa,EAAI,EAAa,EAExC,SAAS,YAAa,CAAE,IAAG,IAAG,UAC9B,EAAQ,EACR,EAAQ,IAIV,EAAY,UAAW,GAAI,GAAK,CAC9B,EAAU,GACV,EAAM,aAAe,KAGvB,EAAY,aAAc,GAAI,GAAK,CACjC,EAAU,GACV,EAAM,aAAe,KC7JlB,WAA4B,EAAO,EAAY,CACrD,GAAI,GAAkB,GAEtB,EAAW,YAAa,gBAAiB,GAAK,CAC7C,EAAkB,KAGnB,EAAW,YAAa,GAAI,AAAC,GAAM,CAClC,GAAI,CAAC,EAAiB,OAEtB,GAAI,GAAI,EAAE,QAAQ,OAAO,WAAa,IACtC,GAAI,IAAM,EAAG,OAEb,GAAM,GAAO,EACP,EAAO,GAEb,AAAI,EAAI,GAAM,GAAI,GACd,EAAI,GAAM,GAAI,GAElB,SAAS,gBAAgB,MAAM,YAAY,iBAAkB,GAAG,MAEhE,WAAW,KAGZ,EAAW,UAAW,GAAI,GAAK,CAC9B,EAAkB,KCzBb,WAAuB,EAAO,EAAQ,CAC3C,GAAI,GAAY,GAEZ,EAAQ,EACR,EAAS,EACT,EAAS,EACT,EAAQ,CAAE,EAAG,EAAG,EAAG,GAEvB,WAAsB,EAAI,CACxB,EAAG,MAAM,gBAAkB,GAAG,OAAO,MACrC,EAAG,MAAM,UAAY,aAAe,EAAS,OAAS,EAAS,aAAe,EAAQ,IAClF,EAAM,SAAW,GAAG,SAAS,UAGnC,WAAkB,CAAE,IAAG,KAAK,CACzB,GAAI,GAAQ,GAAI,GAAU,EACtB,EAAQ,GAAI,GAAU,EAE1B,MAAO,CAAE,EAAG,EAAM,EAAG,GAGxB,EAAO,YAAa,GAAI,AAAC,GAAM,CAC7B,AAAI,EAAE,UAEN,GAAY,GAEZ,EAAQ,CAAE,EAAG,EAAE,QAAU,EAAQ,EAAG,EAAE,QAAU,GAE5C,EAAE,SAAW,GAChB,QAAQ,IAAI,EAAE,QAAS,EAAE,QAAS,EAAS,CAAC,EAAG,EAAE,QAAS,EAAG,EAAE,cAIlE,EAAO,YAAa,GAAI,AAAC,GAAM,CAE7B,GADI,CAAC,GACD,EAAM,aAAc,OAExB,EAAU,EAAE,QAAU,EAAM,EAC5B,EAAU,EAAE,QAAU,EAAM,EAE5B,GAAM,GAAO,SAAS,iBAAiB,oBAEvC,OAAW,KAAO,GAChB,EAAa,KAKjB,EAAO,UAAW,GAAI,AAAC,GAAQ,CAC7B,EAAY,KAGd,EAAO,QAAS,GAAI,AAAC,GAAM,CAEzB,GAAI,GAAM,GAAE,QAAU,GAAU,EAC5B,EAAM,GAAE,QAAU,GAAU,EAEhC,AAAI,KAAK,KAAK,EAAE,QAAU,EAAG,GAAS,KACjC,GAAS,KAEd,EAAS,EAAE,QAAU,EAAK,EAC1B,EAAS,EAAE,QAAU,EAAK,EAE1B,GAAM,GAAO,SAAS,iBAAiB,oBACvC,OAAW,KAAO,GAChB,EAAa,GAGf,EAAE,mBAGJ,WAAoB,EAAQ,CAC1B,QAAQ,IAAI,iBAEZ,GAAM,GAAK,AADC,SAAS,cAAc,OACpB,wBACT,EAAK,EAAO,EAAE,GAAK,EAAO,EAAE,GAC5B,EAAK,EAAO,EAAE,GAAK,EAAO,EAAE,GAC5B,EAAiB,EAAG,MAAM,EAC1B,EAAiB,EAAG,OAAO,EAE3B,EAAgB,KAAK,IAAI,EAAgB,GAAkB,GAEjE,EAAQ,EAER,GAAM,GAAS,CACb,EAAI,GAAO,EAAE,GAAK,EAAO,EAAE,IAAI,EAAI,EAAgB,EAAG,MAAM,EAC5D,EAAI,GAAO,EAAE,GAAK,EAAO,EAAE,IAAI,EAAI,EAAgB,EAAG,OAAO,GAG/D,EAAS,CAAC,EAAO,EACjB,EAAS,CAAC,EAAO,EAEjB,GAAM,GAAO,SAAS,iBAAiB,oBACvC,OAAW,KAAO,GAChB,EAAa,GAIjB,YAAmB,CACjB,GAAM,GAAM,SAAS,cAAc,OACnC,GAAI,IAAQ,KAAM,MAAO,MACzB,GAAM,CAAE,OAAM,QAAO,SAAQ,MAAK,QAAO,UAAU,EAAI,wBAEjD,EAAK,EAAS,CAAE,EAAG,EAAO,EAAG,IAE7B,EAAK,EAAS,CAAE,EAAG,EAAG,EAAG,IAEzB,EAAK,EAAS,CAAE,EAAG,EAAO,EAAG,IAE7B,EAAK,EAAS,CAAE,EAAG,EAAG,EAAG,IAG/B,MAAO,CAAE,KAAI,KAAI,KAAI,MAGvB,MAAO,CACN,MAAO,IAAM,EACb,EAAG,IAAM,EACT,EAAG,IAAM,EACR,UACA,WACA,cCzHJ,GAAI,GAAQ,EACZ,YAA4B,EAAM,CAChC,GAAI,GAAS,GAAI,YACjB,EAAO,WAAW,GAElB,EAAO,UAAY,GAAS,CAC1B,GAAI,GAAO,EAAO,OAClB,SAAS,cAAe,CAAC,OAAM,KAAM,YAAY,MACjD,KAIJ,YAAoB,EAAM,CACxB,GAAI,GAAS,GAAI,YACjB,EAAO,WAAW,GAElB,EAAO,UAAY,GAAS,CAC1B,GAAI,GAAO,EAAO,OAClB,SAAS,YAAa,CAAE,UAI5B,YAAgB,EAAO,EAAa,GAAI,CACtC,GAAI,GAAO,EAAM,GACb,EAAW,EAAK,KAAK,MAAM,KAC3B,EAAO,EAAS,GACd,EAAY,EAAS,EAAS,OAAS,GAM7C,GAAI,IAAc,YAChB,GAAmB,WACV,IAAc,KACvB,GAAW,OAEX,MAAM,OAAM,qBAAsB,GAK/B,WAAuB,EAAO,EAAc,CACjD,EAAa,OAAQ,GAAI,SAAS,EAAK,CAErC,GAAI,GAAQ,AADH,EAAI,aACE,MAEf,GAAO,GAEP,WAAW,KAGb,EAAa,WAAY,GAAI,SAAS,EAAK,CACzC,WAAW,KCrDR,WAAsB,EAAO,EAAa,CAC/C,GAAI,GAAQ,KACR,EAAM,KACJ,EAAM,SAAS,cAAc,OAEnC,EAAY,YAAa,GAAI,GAAK,CAChC,AAAI,CAAC,EAAE,UAEP,GAAQ,EAAI,cAAc,SAAS,CAAC,EAAG,EAAE,QAAS,EAAG,EAAE,aAGzD,EAAY,YAAa,GAAI,GAAK,CAEhC,AADD,SAAS,KAAK,UAAU,IAAI,aACvB,EAAC,EAAE,UACH,IAAU,MAEd,GAAM,EAAI,cAAc,SAAS,CAAC,EAAG,EAAE,QAAS,EAAG,EAAE,UAErD,EAAM,UAAU,MAAQ,EACxB,EAAM,UAAU,IAAM,EACtB,SAAS,aAGX,WAAmB,EAAG,EAAW,CAE/B,GAAI,CAAE,QAAO,OAAQ,EACrB,MACG,GAAE,EAAI,EAAM,GAAK,EAAE,EAAI,EAAI,GAAK,EAAE,EAAI,EAAM,GAAK,EAAE,EAAI,EAAI,GAC3D,EAAE,EAAI,EAAM,GAAK,EAAE,EAAI,EAAI,GAAK,EAAE,EAAI,EAAM,GAAK,EAAE,EAAI,EAAI,GAC3D,EAAE,EAAI,EAAM,GAAK,EAAE,EAAI,EAAI,GAAK,EAAE,EAAI,EAAM,GAAK,EAAE,EAAI,EAAI,GAC3D,EAAE,EAAI,EAAM,GAAK,EAAE,EAAI,EAAI,GAAK,EAAE,EAAI,EAAM,GAAK,EAAE,EAAI,EAAI,EAIhE,EAAY,UAAW,GAAI,GAAK,CAC9B,AAAI,CAAC,EAAE,UACR,UAAS,KAAK,UAAU,OAAO,aAK9B,EAAQ,KACR,EAAM,KACN,EAAM,UAAU,MAAQ,EACxB,EAAM,UAAU,IAAM,EACtB,SAAS,aC7Cb,GAAM,GAAU,CAAC,EAAI,EAAO,KAAU,SAAS,KAAK,IAAO,IAAO,KAAQ,GAAQ,IAAO,IAElF,WAA2B,EAAO,EAAc,CACrD,GAAI,GAAU,GACV,EAAK,EAAW,EAAS,EAAS,EAAc,EAEpD,EAAa,YAAa,MAAO,GAAK,CAGpC,GAAM,GAAI,AAFC,SAAS,cAAc,eAErB,KAAK,MACZ,EAAM,EAAE,IACR,EAAM,EAAE,UAAU,KAAK,KACvB,EAAK,EAAI,OAAO,GAElB,CAAE,OAAM,KAAI,QAAQ,EAAI,OAAO,GAC/B,EAAQ,EAAK,EAAM,EAEvB,KAAO,EAAQ,GAAQ,EAAQ,EAAK,EAAQ,EAAO,GAAI,KAAO,IAC9D,KAAO,EAAM,GAAM,EAAQ,EAAK,EAAM,KAAQ,IAG9C,EAAe,EAAK,MAAM,EAAM,EAAM,EAAI,GAE1C,EAAM,OAAO,GACb,EAAU,GACV,EAAY,EACZ,EAAU,EACV,EAAe,EAAa,SAAS,KACrC,EAAU,EAAa,SAAS,KAAO,EAAa,MAAM,KAAK,GAAG,OAAS,IAG7E,EAAa,YAAa,GAAI,GAAK,CACjC,GAAI,CAAC,EAAS,OACd,GAAM,GAAK,SAAS,cAAc,eAE9B,EAAO,EAAI,EAAE,UAAY,EAAI,GAE7B,EAAW,GAAG,IACpB,GAAI,EAAc,CAEjB,GAAI,GAAS,AADC,KAAK,MAAM,EAAI,IAAI,GACV,EAAE,UACzB,EAAS,KAAK,MAAM,GAAS,IAAI,EAEjC,EAAM,MAEN,IAAO,EAAE,UAGV,GAAM,GAAW,GAAG,IACpB,EAAG,KAAK,SAAS,CAChB,QAAS,CAAC,KAAM,EAAW,GAAI,EAAY,EAAa,OAAQ,OAAQ,KAGzE,EAAe,EAEf,SAAS,OACT,WAAW,KAGX,EAAa,UAAW,GAAI,GAAK,CAC/B,EAAU,KCpDd,YAAoB,EAAG,CACnB,MAAG,GAAE,iBAAiB,EAAE,kBACrB,EAAE,gBAAgB,EAAE,iBACvB,EAAE,aAAa,GACf,EAAE,YAAY,GACP,GAGX,OAAO,WAAa,GAEpB,GAAM,GAAU,GAAK,EAAE,eAAe,GAChC,GAAiB,CAAC,EAAG,IAAmB,EAAQ,GAAG,QAAQ,GAE3D,EAAiB,AAAC,GAAW,CAAC,EAAW,EAAgB,IAAU,CACxE,EAAO,iBAAiB,EAAW,AAAC,GAAM,CACzC,EAAE,QAAU,EAAQ,GAChB,KAAmB,IAAM,GAAe,EAAG,KAAiB,EAAM,MAIjE,WAAmB,EAAO,CAChC,GAAM,GAAM,SAAS,cAAc,OAC7B,EAAY,EAAe,GAEjC,EAAI,cAAgB,EAAc,EAAO,GACxC,EAAM,cAAgB,EAAI,cAE3B,EAAa,EAAO,GACnB,EAAmB,EAAO,GAE3B,GAAM,GAAO,SAAS,cAAc,QAC9B,EAAa,EAAe,GAClC,EAAc,EAAO,GACrB,EAAkB,EAAO,GACzB,EAAmB,EAAO,GAE1B,EAAW,UAAW,GAAI,AAAC,GAAM,CAChC,GAAI,GAAO,MAAM,KACjB,AAAI,IAAS,SAAW,MAAM,SAC5B,OAAM,iBACN,SAAS,MAAO,CAAE,KAAM,MACf,IAAS,QAAU,MAAM,WCjDtC,mEAEA,YAAgB,EAAQ,CACtB,MAAO,IAAI,KACR,IAAI,IAAK,GACT,YAGL,YAAmB,EAAO,EAAQ,CACjC,MAAO,IAAI,KACR,QAAQ,GACR,MAAM,IACN,QAAQ,GACR,MAAM,IACN,OAAO,GACP,YAGJ,EAAO,UAAU,OAAS,GAC1B,EAAO,UAAU,UAAY,GCjB7B,GAAM,IAAS,CAAC,CAAC,EAAI,GAAK,CAAC,EAAI,KAAQ,KAAK,KAAM,GAAG,IAAK,EAAK,GAAG,IAAK,GACjE,GAAU,CAAC,EAAI,IAAO,GAAO,EAAI,GAAM,KAEvC,EAAO,CAAC,EAAK,IAAc,CAC/B,GAAI,GAAS,EAAI,GACb,EAAS,GAAI,GACjB,EAAO,aAAe,IACtB,EAAO,KAAK,EAAQ,IACpB,OAAW,KAAM,GAAI,MAAM,GACzB,AAAI,GAAQ,EAAI,IAChB,GAAO,KAAK,GACZ,EAAS,GAGX,MAAO,GAAO,OAAO,IAGjB,GAAa,CAAC,CAAC,EAAG,GAAI,CAAC,EAAI,KAAQ,CAAC,EAAI,EAAI,EAAI,GAEtD,GAAM,IAAgB,CAAC,CAAC,EAAG,GAAI,IAAU,CACvC,EAAE,KAAK,IAAI,GAAS,EAAI,KAAK,IAAI,GACjC,EAAE,KAAK,IAAI,GAAS,EAAI,KAAK,IAAI,IAInC,OAAgB,CACd,YAAY,CAAE,OAAM,UAAU,CAC5B,KAAK,KAAO,EACZ,KAAK,OAAS,EAGhB,IAAI,EAAM,CACR,MAAO,MAAK,KAAK,GAGnB,KAAK,EAAM,CACT,MAAO,MAAK,KAAK,GAAM,GAGzB,KAAK,EAAM,CACT,MAAO,MAAK,KAAK,GAAM,MAGrB,MAAM,CACR,MAAO,MAAK,KAAK,UAGf,OAAO,CACT,MAAO,MAAK,KAAK,OAAU,MAGzB,OAAO,CACT,MAAO,MAAK,KAAK,OAAU,KAiB/B,YAAuB,EAAM,EAAU,GAAI,CACzC,GAAI,GAAY,EAAQ,WAAa,CAAC,EAAG,GACrC,EAAS,EAAQ,QAAU,EAC3B,EAAe,EAAQ,cAAgB,KACvC,EAAqB,EAAQ,oBAAsB,KAGjD,CAAC,EAAM,GAAQ,EACf,EAAO,EAAS,KAAK,GAAM,IAE3B,EAAO,GACP,EAAa,GACf,EAAU,GAEd,OAAW,KAAO,GAAM,CACtB,GAAI,CAAE,MAAK,QAAO,UAAW,EAAK,GAElC,EAAQ,MAAO,IAAU,SAAW,GAAI,KAAS,OAAO,GAAS,EAAM,OAEvE,GAAI,GAAU,GAAW,GAAc,EAAK,GAAM,GAKlD,GAJA,EAAK,GAAO,EAEZ,EAAM,UAAU,GAAS,OAAO,EAAQ,GAEpC,CAAC,EAAI,SAAS,UAAW,CAC3B,GAAI,GAAO,GAAI,KACZ,KAAK,GACL,MAAM,GACN,YACA,UAAU,GACb,EAAW,KAAM,GAGnB,EAAO,QAAQ,GAAK,CAClB,AAAI,IAAK,GAAS,EAAQ,GAAK,EAAQ,GAAG,MAAM,GAC3C,EAAQ,GAAK,IAItB,SAAK,OAAY,EAEjB,EAAQ,UAAY,EAAW,OAAQ,CAAC,EAAK,IAAQ,EAAI,MAAM,GAAM,GAAI,IAElE,GAAI,GAAU,CACnB,OACA,OAAQ,ICjHL,WAAU,CACf,aAAc,CACZ,KAAK,OAAS,GACd,KAAK,WAAa,GAGpB,IAAI,EAAW,EAAM,GAAI,CAEvB,GAAM,GAAO,EAAI,MAAQ,GACnB,EAAY,CAChB,UAAW,EAAI,WAAa,CAAC,EAAG,GAChC,OAAQ,EAAI,QAAU,EACtB,aAAc,EAAI,cAAgB,KAClC,mBAAoB,EAAI,oBAAsB,MAG1C,EAAU,GAAc,EAAW,GAEzC,OAAY,KAAS,GAAQ,OAC3B,KAAK,SAAS,EAAO,EAAQ,OAAO,IAGtC,GAAI,IAAS,IAAM,CAAC,EAAK,SAAS,UAAW,CAC3C,GAAI,GAAkB,GAAI,KACvB,KAAK,GACL,MAAM,EAAU,oBAChB,YACA,UAAU,EAAU,WAIvB,KAAK,SAAS,kBAAmB,GAGnC,YAAK,WAAW,KAAK,GAEd,EAGT,IAAI,EAAK,EAAI,EAAI,EAAM,CACrB,GAAI,GAAM,CACR,IAAK,CACH,IAAO,CAAC,EAAG,GACX,MAAS,GAAI,KAAS,OAAO,GAAI,cACjC,OAAU,CAAC,QACX,MAAS,GAEX,IAAK,CACH,IAAO,CAAC,EAAG,GACX,MAAS,GAAI,KAAS,OAAO,GAAI,cACjC,OAAU,CAAC,QACX,MAAS,GAEX,MAAS,CACP,IAAO,CAAC,EAAG,GACX,MAAS,GAAI,KAAS,OAAO,GAAI,cACjC,OAAU,CAAC,WAIf,MAAO,MAAK,IAAI,EAAK,CAAC,UAAW,EAAK,KAAM,IAG9C,SAAS,EAAO,EAAO,CACrB,MAAM,aAAiB,GAEvB,CAAI,IAAS,MAAK,OAChB,KAAK,OAAO,GAAS,KAAK,OAAO,GAAO,MAAM,GAE9C,KAAK,OAAO,GAAS,EAGhB,KAAK,OAAO,IARoB,QAAQ,MAAM,uBAWvD,cAAc,EAAO,EAAO,CAC1B,MAAM,aAAiB,GAEvB,CAAI,IAAS,MAAK,OAChB,KAAK,OAAO,GAAS,KAAK,OAAO,GAAO,WAAW,GAEnD,KAAK,OAAO,GAAS,GAAI,GAGpB,KAAK,OAAO,IARoB,QAAQ,MAAM,uBAWvD,SAAS,EAAO,EAAU,GAAO,CAC/B,GAAM,GAAQ,EAAM,SAAS,UAE7B,SAAU,CAAC,EAAM,SAAS,UAEnB,KAAK,OAAO,GACf,EACE,KAAK,OAAO,GAAO,UAAU,YAAY,GACzC,KAAK,OAAO,GAAO,YAAY,GACjC,GAGN,KAAK,EAAK,EAAW,EAAQ,OAAQ,CACnC,KAAK,SAAS,EAAO,EAAK,EAAK,MCrGnC,WAAiB,EAAQ,CACrB,KAAK,MAAQ,KAAK,KAAO,KAAK,KAAO,EACrC,KAAK,QAAU,EAGnB,EAAQ,sBAAwB,UAChC,EAAQ,iCAAmC,2BAC3C,EAAQ,yBAA2B,YACnC,EAAQ,kBAAoB,MAC5B,EAAQ,OAAS,QACjB,EAAQ,WAAa,CACjB,IAAM,QACN,IAAM,aACN,IAAM,WAGV,EAAQ,UAAY,CAChB,KAAM,GACN,QAAS,GACT,MAAO,GACP,MAAO,GACP,OAAQ,GACR,KAAM,GACN,OAAQ,GACR,KAAM,GACN,KAAM,IAGH,YAAgB,EAAQ,CAC3B,GAAI,GAAS,GAAI,GAAQ,GACrB,EAAa,EAAO,OAExB,MAAI,aAAsB,OACf,EAIP,EAAO,QAAU,GACV,EAAO,MAAM,6CAA+C,EAAO,OAAS,KAGhF,EAGX,YAAe,EAAK,CAChB,GAAI,GAAI,GAAI,OAAM,iBAAmB,GACrC,SAAE,KAAO,KAAK,MAAQ,EACtB,EAAE,IAAO,KAAK,KAAO,EACd,EAGX,aAAgB,CACZ,MAAI,MAAK,QAAQ,QAAU,KAAK,KAAa,GACtC,KAAK,QAAQ,KAAK,MAG7B,aAAmB,CACf,GAAI,KAAK,QAAQ,QAAU,KAAK,KAAM,MAAO,GAE7C,GAAI,GAAI,KAAK,QAAQ,KAAK,MAC1B,YAAK,MAAQ,EAEb,AAAI,GAAK,KACD,MAAK,QAAU;AAAA,GACf,MAAK,MAAQ,EACb,GAAK;AAAA,GAET,KAAK,QACL,KAAK,KAAO,GACT,AAAI,GAAK;AAAA,EACZ,MAAK,QACL,KAAK,KAAO,GAEZ,KAAK,OAGF,EAGX,YAAe,EAAO,CAGlB,OAFI,GAAI,GAED,CAAC,EAAM,KAAK,KAAK,SACpB,GAAK,KAAK,UAGd,MAAO,GAGX,aAAkB,CAMd,OAJI,GAAY,KAAK,UAEjB,EAAM,KAEG,CACT,GAAO,KAAK,MAAM,EAAQ,0BAC1B,GAAI,GAAO,KAAK,OAEhB,GAAI,GAAQ,GACR,MAAO,MAAK,MAAM,+BAGtB,GAAI,GAAQ,EAAW,CACnB,KAAK,UACL,MAGJ,GAAI,GAAQ,KAAM,CACd,KAAK,UACL,EAAO,KAAK,OAEZ,AAAI,GAAQ,IACR,MAAK,UACL,GAAO,MACJ,AAAI,GAAQ,IACf,MAAK,UACL,GAAO,KACJ,AAAI,GAAQ,IACf,MAAK,UACL,GAAO;AAAA,GACJ,AAAI,GAAQ,IACf,MAAK,UACL,GAAO,MACJ,AAAI,GAAQ,IACf,MAAK,UACL,GAAO,MAEP,GAAO,KAAK,UAGhB,SAGJ,GAAO,KAAK,UAIhB,MAAO,IAAI,QAAO,GAGtB,aAAgB,CACZ,GAAI,EAAQ,kBAAkB,KAAK,KAAK,QACpC,MAAO,MAAK,SAKhB,OAFI,GAAO,KAEE,CACT,GAAQ,KAAK,MAAM,EAAQ,kCAC3B,GAAI,GAAO,KAAK,OAEhB,GAAI,GAAQ,KAAM,CACd,KAAK,UACL,GAAQ,KAAK,UACb,SAGJ,MAGJ,MAAO,GAGX,aAAkB,CACd,GAAI,GAAI,KAAK,UACT,EAAQ,EAAQ,WAAW,GAE/B,AAAI,GAAS,WAAa,KAAK,QAAU,KACrC,MAAK,UACL,EAAQ,mBACR,EAAI,MAIR,KAAK,MAAM,EAAQ,uBACnB,GAAI,GAAa,KAAK,OAEtB,MAAI,aAAsB,OACf,EAIP,IAAe,GACR,KAAK,MAAM,eAAiB,KAAK,OAAS,YAAc,EAAI,KAGhE,CAAC,EAAO,GAGnB,aAAgB,CAIZ,GAFA,KAAK,MAAM,EAAQ,uBAEf,EAAQ,OAAO,KAAK,KAAK,QACzB,MAAO,MAAK,SAGhB,GAAI,GAAO,KAAK,QAAU,IAAM,KAAK,OAAS,KAAK,OAGnD,YAAK,MAAM,EAAQ,uBAEZ,EAGX,aAAgB,CACZ,GAAI,KAAK,QAAU,IACf,MAAO,MAAK,MAAM,uBAAyB,KAAK,OAAS,cAG7D,KAAK,UAEL,GAAI,GAAK,GACL,EAAI,KAAK,OAEb,GAAI,YAAa,OACb,MAAO,GAGX,GAAI,IAAM,GAGN,IAFA,EAAG,KAAK,GAEA,GAAI,KAAK,UAAY,IAAI,CAC7B,GAAI,YAAa,OAAO,MAAO,GAC/B,EAAG,KAAK,GAIhB,MAAI,MAAK,QAAU,IACR,KAAK,MAAM,wBAA0B,KAAK,OAAS,KAI9D,MAAK,UAEE,GCzOX,GAAM,IAAgB,AAAC,GAAW,EAAO,OAAO,CAAC,EAAK,IAAQ,CAC5D,GAAI,GAAI,EAAI,MAAM,KAClB,MAAI,GAAE,SAAW,EAAU,EAClB,EAAE,KAAO,IAAY,CAAC,GAAG,EAAK,GAC3B,CAAC,GAAG,EAAK,KAAK,EAAE,KAAM,KAAK,EAAE,OACxC,IAEI,YAAoB,EAAM,CAC/B,GAAI,GAAI,GAAO,GAEX,EAAQ,EAAE,KACR,EAAY,GAElB,OAAW,KAAQ,GAAG,CACpB,GAAM,GAAQ,EAAK,KAAO,MACpB,EAAQ,EAAK,KAAO,MACpB,EAAS,EAAK,KAAO,YACrB,EAAQ,EAAK,GAEnB,GAAI,GAAU,IAAS,GAAS,CAC9B,GAAI,GAAO,EAAK,GAEZ,EAAK,EAAK,GAAG,MAAM,GAAG,IAAI,GAAK,OAAO,GAAG,GAC7C,EAAG,GAAK,CAAC,EAAG,GAEZ,GAAI,GAAS,EAAK,EAAK,OAAS,GAChC,EAAS,EAAS,EAAO,MAAM,GAAK,GACpC,EAAS,GAAc,GAGvB,GAAI,GAAO,EAAK,GAAG,MAAM,GAAG,IAAI,GAAK,OAAO,GAAG,GAE3C,EAAc,IAAU,OACxB,GAAI,KAAS,UAAU,GAAG,GAC1B,GAAI,KAAS,OAAO,EAAK,IAO7B,GALA,AAAI,EAAU,KAAU,OAAW,EAAU,GAAQ,CAAC,CAAE,IAAK,EAAI,MAAO,EAAa,WAChF,EAAU,GAAM,KAAK,CAAE,IAAK,EAAI,MAAO,EAAa,WAE3C,EAAK,EAAK,OAAS,GAAK,EAAK,EAAK,OAAS,GAAG,KAAO,QAAU,GAElE,CACT,GAAI,GAAW,OAAO,EAAK,EAAK,OAAS,GAAG,IAAI,KAC5C,EAAI,CACN,IAAK,EACL,MAAO,GAAI,KAAS,OAAO,GAC3B,OAAQ,CAAC,UAGX,AAAI,EAAU,GAAG,aAAkB,OAAW,EAAU,GAAG,WAAgB,CAAC,GACtE,EAAU,GAAG,WAAc,KAAK,KAmB5C,MAda,QAAO,QAAQ,GAAW,OAAO,CAAC,EAAK,IAAQ,CAC1D,GAAM,CAAC,EAAK,GAAS,EAErB,MAAI,GAAM,SAAW,EACnB,EAAI,GAAO,EAAM,GAEjB,EAAM,QAAQ,CAAC,EAAG,IAAM,CACtB,EAAI,GAAG,KAAO,EAAI,KAAO,IAItB,GACN,IZ9DL,GAAM,GAAQ,CACb,WAAY,OACZ,UAAW,OACX,aAAc,GACd,gBAAiB,IAAM,GACvB,UAAW,GACX,OAAQ,GACR,OAAQ,CACP,EAAG,CAAC,EAAG,GACP,EAAG,CAAC,EAAG,IAER,YAAa,KACb,SAAU,IACV,YAAa,GACb,cAAe,QAGhB,gBAAkB,EAAS,CAC1B,aAAc,CACb,QACA,EAAM,UAAY,OAId,GAAW,CAChB,cACA,OACA,UAGD,kBAAyB,EAAU,EAAO,CAEzC,GAAM,GAAM,KAAM,AADL,MAAM,OAAM,EAAW,CAAC,KAAM,UACpB,OAEpB,EAAM,WAAW,KAAK,SAAS,CAChC,QAAS,CAAC,KAAM,EAAG,OAAQ,KAI7B,GAAM,GAAc,GAAK,EAAE,SAAS,sBAG9B,EAAQ,AADF,EAAM,WAAW,KAAK,MAAM,IACtB,WAAW,MAAM;AAAA,GAC/B,EAAI,EACJ,EAAQ,EACZ,OAAa,CACZ,GAAM,GAAO,EAAM,GAInB,GAHI,CAAC,GACL,IAAS,EAAK,OACV,EAAI,EAAM,SACV,EAAM,KAAO,UAAY,CAAC,EAAY,EAAM,EAAE,IAAK,MACvD,IAGD,EAAM,WAAW,UAAU,EAAG,EAAM,GAEjC,EAAS,OACT,SAAS,cAAc,kBAAkB,QAG7C,GAAM,IAAU,CACf,KAAK,EAAM,EAAO,CACjB,EAAS,UACT,EAAM,WAAa,SAAS,cAAc,gBAC1C,EAAU,GAEV,GAAM,GAAM,GAAI,KAAI,OAAO,SAAS,MAE3B,EAAS,OAAO,SAAS,OACzB,EAAO,GAAI,iBAAgB,GAAQ,IAAI,QACvC,EAAO,GAAI,iBAAgB,GAAQ,IAAI,QAE7C,GAAI,GAEG,GAAI,EAAM,CACZ,GAAI,GAAW,EACf,AAAK,EAAK,WAAW,SAAS,GAAW,YAAY,KAErD,GAAU,EAAU,OAClB,CACN,GAAM,GAAQ,OAAO,aAAa,QAAQ,WAC1C,EAAM,WAAW,KAAK,SAAS,CAChC,QAAS,CAAC,KAAM,EAAG,OAAQ,UAAS,MAGtC,EAAS,OACT,SAAS,cAAc,kBAAkB,UAG3C,IAAI,CAAE,OAAO,IAAS,EAAO,CAC5B,GAAM,GAAS,EAAM,WAAW,KAAK,MAAM,IAAI,WAIzC,EAAS,AADL,GAAI,UAAS,GAAG,OAAO,KAAK,IAAW,GAChC,GAAG,OAAO,OAAO,KAE9B,CAAE,SAAQ,SAAQ,eAAgB,MAAO,IAAW,SAAW,KAAK,MAAM,GAAU,EAExF,EAAM,OAAS,EACf,EAAM,OAAS,EACf,EAAM,YAAc,EAEhB,GACH,OAAO,aAAa,QAAQ,UAAW,GAGxC,EAAS,WAEV,YAAY,CAAE,OAAM,QAAQ,EAAO,CAClC,EAAO,EAAK,WAAW,IAAK,IAC5B,EAAO,SAAS;AAAA,IAAyC;AAAA,EACzD,EAAM,WAAW,KAAK,SAAS,CAC7B,QAAS,CAAC,KAAM,EAAG,OAAQ,KAG7B,EAAM,WAAW,UAAU,EAAG,EAAK,QACnC,EAAS,WAEV,UAAU,CAAE,QAAQ,EAAO,CAC1B,GAAM,GAAM,EAAM,WAAW,KAAK,MAAM,IAAI,WAAW,OACvD,EAAM,WAAW,KAAK,SAAS,CAC7B,QAAS,CAAC,KAAM,EAAG,GAAI,EAAK,OAAQ,KAGtC,EAAS,OACT,SAAS,cAAc,kBAAkB,SAE1C,WAAW,CAAE,OAAM,QAAQ,EAAO,CACjC,EAAO,SAAS,OAAU;AAAA,EAC1B,EAAM,WAAW,KAAK,SAAS,CAC7B,QAAS,CAAC,KAAM,EAAG,OAAQ,KAG7B,EAAS,WAEV,UAAU,CAAE,IAAG,IAAG,SAAS,EAAO,CACjC,EAAM,gBAAgB,EAAG,GACzB,EAAS,QAEV,QAAS,CACR,GAAO,EAAK,GAAQ,SAAS,eAAe,WAIvC,WAAkB,EAAQ,EAAO,GAAI,CAC3C,GAAM,GAAU,GAAQ,GACxB,AAAI,EAAS,EAAQ,EAAM,GACtB,QAAQ,IAAI,0BAA2B,Ga3J7C,OAAO,SAAW,EAElB,OAAO,iBAAiB,OAAQ,IAAM,CACrC,EAAS",
  "names": []
}
