var IO=Object.defineProperty;var FO=(i,e,t)=>e in i?IO(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Xa=(i,e,t)=>(FO(i,typeof e!="symbol"?e+"":e,t),t),ah=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var lt=(i,e,t)=>(ah(i,e,"read from private field"),t?t.call(i):e.get(i)),qt=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Dt=(i,e,t,n)=>(ah(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),lh=(i,e,t,n)=>({set _(r){Dt(i,e,r,t)},get _(){return lt(i,e,n)}}),oi=(i,e,t)=>(ah(i,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();const Cs=25.4,QO="SvgPcb";var Gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wa(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var em={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(i,e){(function(t){i.exports=t()})(function(){return function t(n,r,o){function s(h,c){if(!r[h]){if(!n[h]){var p=typeof Wa=="function"&&Wa;if(!c&&p)return p(h,!0);if(a)return a(h,!0);var d=new Error("Cannot find module '"+h+"'");throw d.code="MODULE_NOT_FOUND",d}var v=r[h]={exports:{}};n[h][0].call(v.exports,function(D){var m=n[h][1][D];return s(m||D)},v,v.exports,t,n,r,o)}return r[h].exports}for(var a=typeof Wa=="function"&&Wa,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(t,n,r){var o=t("./utils"),s=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(l){for(var h,c,p,d,v,D,m,y=[],x=0,w=l.length,_=w,I=o.getTypeOf(l)!=="string";x<l.length;)_=w-x,p=I?(h=l[x++],c=x<w?l[x++]:0,x<w?l[x++]:0):(h=l.charCodeAt(x++),c=x<w?l.charCodeAt(x++):0,x<w?l.charCodeAt(x++):0),d=h>>2,v=(3&h)<<4|c>>4,D=1<_?(15&c)<<2|p>>6:64,m=2<_?63&p:64,y.push(a.charAt(d)+a.charAt(v)+a.charAt(D)+a.charAt(m));return y.join("")},r.decode=function(l){var h,c,p,d,v,D,m=0,y=0,x="data:";if(l.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var w,_=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&_--,l.charAt(l.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=s.uint8array?new Uint8Array(0|_):new Array(0|_);m<l.length;)h=a.indexOf(l.charAt(m++))<<2|(d=a.indexOf(l.charAt(m++)))>>4,c=(15&d)<<4|(v=a.indexOf(l.charAt(m++)))>>2,p=(3&v)<<6|(D=a.indexOf(l.charAt(m++))),w[y++]=h,v!==64&&(w[y++]=c),D!==64&&(w[y++]=p);return w}},{"./support":30,"./utils":32}],2:[function(t,n,r){var o=t("./external"),s=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function h(c,p,d,v,D){this.compressedSize=c,this.uncompressedSize=p,this.crc32=d,this.compression=v,this.compressedContent=D}h.prototype={getContentWorker:function(){var c=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),p=this;return c.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(c,p,d){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(p.compressWorker(d)).pipe(new l("compressedSize")).withStreamInfo("compression",p)},n.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,r){var o=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,r){var o=t("./utils"),s=function(){for(var a,l=[],h=0;h<256;h++){a=h;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[h]=a}return l}();n.exports=function(a,l){return a!==void 0&&a.length?o.getTypeOf(a)!=="string"?function(h,c,p,d){var v=s,D=d+p;h^=-1;for(var m=d;m<D;m++)h=h>>>8^v[255&(h^c[m])];return-1^h}(0|l,a,a.length,0):function(h,c,p,d){var v=s,D=d+p;h^=-1;for(var m=d;m<D;m++)h=h>>>8^v[255&(h^c.charCodeAt(m))];return-1^h}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(t,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,n,r){var o=null;o=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:o}},{lie:37}],7:[function(t,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),a=t("./utils"),l=t("./stream/GenericWorker"),h=o?"uint8array":"array";function c(p,d){l.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=d,this.meta={}}r.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(h,p.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(d){p.push({data:d,meta:p.meta})}},r.compressWorker=function(p){return new c("Deflate",p)},r.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,r){function o(v,D){var m,y="";for(m=0;m<D;m++)y+=String.fromCharCode(255&v),v>>>=8;return y}function s(v,D,m,y,x,w){var _,I,N=v.file,Y=v.compression,j=w!==h.utf8encode,ae=a.transformTo("string",w(N.name)),K=a.transformTo("string",h.utf8encode(N.name)),oe=N.comment,fe=a.transformTo("string",w(oe)),U=a.transformTo("string",h.utf8encode(oe)),H=K.length!==N.name.length,B=U.length!==oe.length,re="",Qe="",De="",Xe=N.dir,ge=N.date,$e={crc32:0,compressedSize:0,uncompressedSize:0};D&&!m||($e.crc32=v.crc32,$e.compressedSize=v.compressedSize,$e.uncompressedSize=v.uncompressedSize);var ue=0;D&&(ue|=8),j||!H&&!B||(ue|=2048);var he=0,je=0;Xe&&(he|=16),x==="UNIX"?(je=798,he|=function(Ae,Me){var vt=Ae;return Ae||(vt=Me?16893:33204),(65535&vt)<<16}(N.unixPermissions,Xe)):(je=20,he|=function(Ae){return 63&(Ae||0)}(N.dosPermissions)),_=ge.getUTCHours(),_<<=6,_|=ge.getUTCMinutes(),_<<=5,_|=ge.getUTCSeconds()/2,I=ge.getUTCFullYear()-1980,I<<=4,I|=ge.getUTCMonth()+1,I<<=5,I|=ge.getUTCDate(),H&&(Qe=o(1,1)+o(c(ae),4)+K,re+="up"+o(Qe.length,2)+Qe),B&&(De=o(1,1)+o(c(fe),4)+U,re+="uc"+o(De.length,2)+De);var We="";return We+=`
\0`,We+=o(ue,2),We+=Y.magic,We+=o(_,2),We+=o(I,2),We+=o($e.crc32,4),We+=o($e.compressedSize,4),We+=o($e.uncompressedSize,4),We+=o(ae.length,2),We+=o(re.length,2),{fileRecord:p.LOCAL_FILE_HEADER+We+ae+re,dirRecord:p.CENTRAL_FILE_HEADER+o(je,2)+We+o(fe.length,2)+"\0\0\0\0"+o(he,4)+o(y,4)+ae+re+fe}}var a=t("../utils"),l=t("../stream/GenericWorker"),h=t("../utf8"),c=t("../crc32"),p=t("../signature");function d(v,D,m,y){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=D,this.zipPlatform=m,this.encodeFileName=y,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(d,l),d.prototype.push=function(v){var D=v.meta.percent||0,m=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,l.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:m?(D+100*(m-y-1))/m:100}}))},d.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var D=this.streamFiles&&!v.file.dir;if(D){var m=s(v,D,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(v){this.accumulate=!1;var D=this.streamFiles&&!v.file.dir,m=s(v,D,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),D)this.push({data:function(y){return p.DATA_DESCRIPTOR+o(y.crc32,4)+o(y.compressedSize,4)+o(y.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var v=this.bytesWritten,D=0;D<this.dirRecords.length;D++)this.push({data:this.dirRecords[D],meta:{percent:100}});var m=this.bytesWritten-v,y=function(x,w,_,I,N){var Y=a.transformTo("string",N(I));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(x,2)+o(x,2)+o(w,4)+o(_,4)+o(Y.length,2)+Y}(this.dirRecords.length,m,v,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(v){this._sources.push(v);var D=this;return v.on("data",function(m){D.processChunk(m)}),v.on("end",function(){D.closedSource(D.previous.streamInfo),D._sources.length?D.prepareNextSource():D.end()}),v.on("error",function(m){D.error(m)}),this},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(v){var D=this._sources;if(!l.prototype.error.call(this,v))return!1;for(var m=0;m<D.length;m++)try{D[m].error(v)}catch{}return!0},d.prototype.lock=function(){l.prototype.lock.call(this);for(var v=this._sources,D=0;D<v.length;D++)v[D].lock()},n.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,r){var o=t("../compressions"),s=t("./ZipFileWorker");r.generateWorker=function(a,l,h){var c=new s(l.streamFiles,h,l.platform,l.encodeFileName),p=0;try{a.forEach(function(d,v){p++;var D=function(w,_){var I=w||_,N=o[I];if(!N)throw new Error(I+" is not a valid compression method !");return N}(v.options.compression,l.compression),m=v.options.compressionOptions||l.compressionOptions||{},y=v.dir,x=v.date;v._compressWorker(D,m).withStreamInfo("file",{name:d,dir:y,date:x,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(c)}),c.entriesCount=p}catch(d){c.error(d)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,r){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}(o.prototype=t("./object")).loadAsync=t("./load"),o.support=t("./support"),o.defaults=t("./defaults"),o.version="3.10.1",o.loadAsync=function(s,a){return new o().loadAsync(s,a)},o.external=t("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,r){var o=t("./utils"),s=t("./external"),a=t("./utf8"),l=t("./zipEntries"),h=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function p(d){return new s.Promise(function(v,D){var m=d.decompressed.getContentWorker().pipe(new h);m.on("error",function(y){D(y)}).on("end",function(){m.streamInfo.crc32!==d.decompressed.crc32?D(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}n.exports=function(d,v){var D=this;return v=o.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(d)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",d,!0,v.optimizedBinaryString,v.base64).then(function(m){var y=new l(v);return y.load(m),y}).then(function(m){var y=[s.Promise.resolve(m)],x=m.files;if(v.checkCRC32)for(var w=0;w<x.length;w++)y.push(p(x[w]));return s.Promise.all(y)}).then(function(m){for(var y=m.shift(),x=y.files,w=0;w<x.length;w++){var _=x[w],I=_.fileNameStr,N=o.resolve(_.fileNameStr);D.file(N,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:v.createFolders}),_.dir||(D.file(N).unsafeOriginalName=I)}return y.zipComment.length&&(D.comment=y.zipComment),D})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,r){var o=t("../utils"),s=t("../stream/GenericWorker");function a(l,h){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(h)}o.inherits(a,s),a.prototype._bindStream=function(l){var h=this;(this._stream=l).pause(),l.on("data",function(c){h.push({data:c,meta:{percent:0}})}).on("error",function(c){h.isPaused?this.generatedError=c:h.error(c)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},a.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,r){var o=t("readable-stream").Readable;function s(a,l,h){o.call(this,l),this._helper=a;var c=this;a.on("data",function(p,d){c.push(p)||c._helper.pause(),h&&h(d)}).on("error",function(p){c.emit("error",p)}).on("end",function(){c.push(null)})}t("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,n,r){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(t,n,r){function o(N,Y,j){var ae,K=a.getTypeOf(Y),oe=a.extend(j||{},c);oe.date=oe.date||new Date,oe.compression!==null&&(oe.compression=oe.compression.toUpperCase()),typeof oe.unixPermissions=="string"&&(oe.unixPermissions=parseInt(oe.unixPermissions,8)),oe.unixPermissions&&16384&oe.unixPermissions&&(oe.dir=!0),oe.dosPermissions&&16&oe.dosPermissions&&(oe.dir=!0),oe.dir&&(N=x(N)),oe.createFolders&&(ae=y(N))&&w.call(this,ae,!0);var fe=K==="string"&&oe.binary===!1&&oe.base64===!1;j&&j.binary!==void 0||(oe.binary=!fe),(Y instanceof p&&Y.uncompressedSize===0||oe.dir||!Y||Y.length===0)&&(oe.base64=!1,oe.binary=!0,Y="",oe.compression="STORE",K="string");var U=null;U=Y instanceof p||Y instanceof l?Y:D.isNode&&D.isStream(Y)?new m(N,Y):a.prepareContent(N,Y,oe.binary,oe.optimizedBinaryString,oe.base64);var H=new d(N,U,oe);this.files[N]=H}var s=t("./utf8"),a=t("./utils"),l=t("./stream/GenericWorker"),h=t("./stream/StreamHelper"),c=t("./defaults"),p=t("./compressedObject"),d=t("./zipObject"),v=t("./generate"),D=t("./nodejsUtils"),m=t("./nodejs/NodejsStreamInputAdapter"),y=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var Y=N.lastIndexOf("/");return 0<Y?N.substring(0,Y):""},x=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},w=function(N,Y){return Y=Y!==void 0?Y:c.createFolders,N=x(N),this.files[N]||o.call(this,N,null,{dir:!0,createFolders:Y}),this.files[N]};function _(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var Y,j,ae;for(Y in this.files)ae=this.files[Y],(j=Y.slice(this.root.length,Y.length))&&Y.slice(0,this.root.length)===this.root&&N(j,ae)},filter:function(N){var Y=[];return this.forEach(function(j,ae){N(j,ae)&&Y.push(ae)}),Y},file:function(N,Y,j){if(arguments.length!==1)return N=this.root+N,o.call(this,N,Y,j),this;if(_(N)){var ae=N;return this.filter(function(oe,fe){return!fe.dir&&ae.test(oe)})}var K=this.files[this.root+N];return K&&!K.dir?K:null},folder:function(N){if(!N)return this;if(_(N))return this.filter(function(K,oe){return oe.dir&&N.test(K)});var Y=this.root+N,j=w.call(this,Y),ae=this.clone();return ae.root=j.name,ae},remove:function(N){N=this.root+N;var Y=this.files[N];if(Y||(N.slice(-1)!=="/"&&(N+="/"),Y=this.files[N]),Y&&!Y.dir)delete this.files[N];else for(var j=this.filter(function(K,oe){return oe.name.slice(0,N.length)===N}),ae=0;ae<j.length;ae++)delete this.files[j[ae].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var Y,j={};try{if((j=a.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");a.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var ae=j.comment||this.comment||"";Y=v.generateWorker(this,j,ae)}catch(K){(Y=new l("error")).error(K)}return new h(Y,j.type||"string",j.mimeType)},generateAsync:function(N,Y){return this.generateInternalStream(N).accumulate(Y)},generateNodeStream:function(N,Y){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(Y)}};n.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,r){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,r){var o=t("./DataReader");function s(a){o.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}t("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data[this.zero+a]},s.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),h=a.charCodeAt(1),c=a.charCodeAt(2),p=a.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===l&&this.data[d+1]===h&&this.data[d+2]===c&&this.data[d+3]===p)return d-this.zero;return-1},s.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),h=a.charCodeAt(1),c=a.charCodeAt(2),p=a.charCodeAt(3),d=this.readData(4);return l===d[0]&&h===d[1]&&c===d[2]&&p===d[3]},s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,n,r){var o=t("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,h=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)h=(h<<8)+this.byteAt(l);return this.index+=a,h},readString:function(a){return o.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=s},{"../utils":32}],19:[function(t,n,r){var o=t("./Uint8ArrayReader");function s(a){o.call(this,a)}t("../utils").inherits(s,o),s.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,r){var o=t("./DataReader");function s(a){o.call(this,a)}t("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},s.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},s.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},s.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,n,r){var o=t("./ArrayReader");function s(a){o.call(this,a)}t("../utils").inherits(s,o),s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,r){var o=t("../utils"),s=t("../support"),a=t("./ArrayReader"),l=t("./StringReader"),h=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");n.exports=function(p){var d=o.getTypeOf(p);return o.checkSupport(d),d!=="string"||s.uint8array?d==="nodebuffer"?new h(p):s.uint8array?new c(o.transformTo("uint8array",p)):new a(o.transformTo("array",p)):new l(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,r){var o=t("./GenericWorker"),s=t("../utils");function a(l){o.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(a,o),a.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,r){var o=t("./GenericWorker"),s=t("../crc32");function a(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,o),a.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,r){var o=t("../utils"),s=t("./GenericWorker");function a(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}o.inherits(a,s),a.prototype.processChunk=function(l){if(l){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+l.data.length}s.prototype.processChunk.call(this,l)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,r){var o=t("../utils"),s=t("./GenericWorker");function a(l){s.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){h.dataIsReady=!0,h.data=c,h.max=c&&c.length||0,h.type=o.getTypeOf(c),h.isPaused||h._tickAndRepeat()},function(c){h.error(c)})}o.inherits(a,s),a.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,h);break;case"uint8array":l=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":l=this.data.slice(this.index,h)}return this.index=h,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,r){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(l){a.processChunk(l)}),s.on("end",function(){a.end()}),s.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=o},{}],29:[function(t,n,r){var o=t("../utils"),s=t("./ConvertWorker"),a=t("./GenericWorker"),l=t("../base64"),h=t("../support"),c=t("../external"),p=null;if(h.nodestream)try{p=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(D,m){return new c.Promise(function(y,x){var w=[],_=D._internalType,I=D._outputType,N=D._mimeType;D.on("data",function(Y,j){w.push(Y),m&&m(j)}).on("error",function(Y){w=[],x(Y)}).on("end",function(){try{var Y=function(j,ae,K){switch(j){case"blob":return o.newBlob(o.transformTo("arraybuffer",ae),K);case"base64":return l.encode(ae);default:return o.transformTo(j,ae)}}(I,function(j,ae){var K,oe=0,fe=null,U=0;for(K=0;K<ae.length;K++)U+=ae[K].length;switch(j){case"string":return ae.join("");case"array":return Array.prototype.concat.apply([],ae);case"uint8array":for(fe=new Uint8Array(U),K=0;K<ae.length;K++)fe.set(ae[K],oe),oe+=ae[K].length;return fe;case"nodebuffer":return Buffer.concat(ae);default:throw new Error("concat : unsupported type '"+j+"'")}}(_,w),N);y(Y)}catch(j){x(j)}w=[]}).resume()})}function v(D,m,y){var x=m;switch(m){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=m,this._mimeType=y,o.checkSupport(x),this._worker=D.pipe(new s(x)),D.lock()}catch(w){this._worker=new a("error"),this._worker.error(w)}}v.prototype={accumulate:function(D){return d(this,D)},on:function(D,m){var y=this;return D==="data"?this._worker.on(D,function(x){m.call(y,x.data,x.meta)}):this._worker.on(D,function(){o.delay(m,arguments,y)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(D){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},D)}},n.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var o=new ArrayBuffer(0);try{r.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),r.blob=s.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,r){for(var o=t("./utils"),s=t("./support"),a=t("./nodejsUtils"),l=t("./stream/GenericWorker"),h=new Array(256),c=0;c<256;c++)h[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;h[254]=h[254]=1;function p(){l.call(this,"utf-8 decode"),this.leftOver=null}function d(){l.call(this,"utf-8 encode")}r.utf8encode=function(v){return s.nodebuffer?a.newBufferFrom(v,"utf-8"):function(D){var m,y,x,w,_,I=D.length,N=0;for(w=0;w<I;w++)(64512&(y=D.charCodeAt(w)))==55296&&w+1<I&&(64512&(x=D.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(x-56320),w++),N+=y<128?1:y<2048?2:y<65536?3:4;for(m=s.uint8array?new Uint8Array(N):new Array(N),w=_=0;_<N;w++)(64512&(y=D.charCodeAt(w)))==55296&&w+1<I&&(64512&(x=D.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(x-56320),w++),y<128?m[_++]=y:(y<2048?m[_++]=192|y>>>6:(y<65536?m[_++]=224|y>>>12:(m[_++]=240|y>>>18,m[_++]=128|y>>>12&63),m[_++]=128|y>>>6&63),m[_++]=128|63&y);return m}(v)},r.utf8decode=function(v){return s.nodebuffer?o.transformTo("nodebuffer",v).toString("utf-8"):function(D){var m,y,x,w,_=D.length,I=new Array(2*_);for(m=y=0;m<_;)if((x=D[m++])<128)I[y++]=x;else if(4<(w=h[x]))I[y++]=65533,m+=w-1;else{for(x&=w===2?31:w===3?15:7;1<w&&m<_;)x=x<<6|63&D[m++],w--;1<w?I[y++]=65533:x<65536?I[y++]=x:(x-=65536,I[y++]=55296|x>>10&1023,I[y++]=56320|1023&x)}return I.length!==y&&(I.subarray?I=I.subarray(0,y):I.length=y),o.applyFromCharCode(I)}(v=o.transformTo(s.uint8array?"uint8array":"array",v))},o.inherits(p,l),p.prototype.processChunk=function(v){var D=o.transformTo(s.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var m=D;(D=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),D.set(m,this.leftOver.length)}else D=this.leftOver.concat(D);this.leftOver=null}var y=function(w,_){var I;for((_=_||w.length)>w.length&&(_=w.length),I=_-1;0<=I&&(192&w[I])==128;)I--;return I<0||I===0?_:I+h[w[I]]>_?I:_}(D),x=D;y!==D.length&&(s.uint8array?(x=D.subarray(0,y),this.leftOver=D.subarray(y,D.length)):(x=D.slice(0,y),this.leftOver=D.slice(y,D.length))),this.push({data:r.utf8decode(x),meta:v.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=p,o.inherits(d,l),d.prototype.processChunk=function(v){this.push({data:r.utf8encode(v.data),meta:v.meta})},r.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,r){var o=t("./support"),s=t("./base64"),a=t("./nodejsUtils"),l=t("./external");function h(m){return m}function c(m,y){for(var x=0;x<m.length;++x)y[x]=255&m.charCodeAt(x);return y}t("setimmediate"),r.newBlob=function(m,y){r.checkSupport("blob");try{return new Blob([m],{type:y})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(m),x.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(m,y,x){var w=[],_=0,I=m.length;if(I<=x)return String.fromCharCode.apply(null,m);for(;_<I;)y==="array"||y==="nodebuffer"?w.push(String.fromCharCode.apply(null,m.slice(_,Math.min(_+x,I)))):w.push(String.fromCharCode.apply(null,m.subarray(_,Math.min(_+x,I)))),_+=x;return w.join("")},stringifyByChar:function(m){for(var y="",x=0;x<m.length;x++)y+=String.fromCharCode(m[x]);return y},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function d(m){var y=65536,x=r.getTypeOf(m),w=!0;if(x==="uint8array"?w=p.applyCanBeUsed.uint8array:x==="nodebuffer"&&(w=p.applyCanBeUsed.nodebuffer),w)for(;1<y;)try{return p.stringifyByChunk(m,x,y)}catch{y=Math.floor(y/2)}return p.stringifyByChar(m)}function v(m,y){for(var x=0;x<m.length;x++)y[x]=m[x];return y}r.applyFromCharCode=d;var D={};D.string={string:h,array:function(m){return c(m,new Array(m.length))},arraybuffer:function(m){return D.string.uint8array(m).buffer},uint8array:function(m){return c(m,new Uint8Array(m.length))},nodebuffer:function(m){return c(m,a.allocBuffer(m.length))}},D.array={string:d,array:h,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(m)}},D.arraybuffer={string:function(m){return d(new Uint8Array(m))},array:function(m){return v(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:h,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(new Uint8Array(m))}},D.uint8array={string:d,array:function(m){return v(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:h,nodebuffer:function(m){return a.newBufferFrom(m)}},D.nodebuffer={string:d,array:function(m){return v(m,new Array(m.length))},arraybuffer:function(m){return D.nodebuffer.uint8array(m).buffer},uint8array:function(m){return v(m,new Uint8Array(m.length))},nodebuffer:h},r.transformTo=function(m,y){if(y=y||"",!m)return y;r.checkSupport(m);var x=r.getTypeOf(y);return D[x][m](y)},r.resolve=function(m){for(var y=m.split("/"),x=[],w=0;w<y.length;w++){var _=y[w];_==="."||_===""&&w!==0&&w!==y.length-1||(_===".."?x.pop():x.push(_))}return x.join("/")},r.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":o.nodebuffer&&a.isBuffer(m)?"nodebuffer":o.uint8array&&m instanceof Uint8Array?"uint8array":o.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(m){if(!o[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(m){var y,x,w="";for(x=0;x<(m||"").length;x++)w+="\\x"+((y=m.charCodeAt(x))<16?"0":"")+y.toString(16).toUpperCase();return w},r.delay=function(m,y,x){setImmediate(function(){m.apply(x||null,y||[])})},r.inherits=function(m,y){function x(){}x.prototype=y.prototype,m.prototype=new x},r.extend=function(){var m,y,x={};for(m=0;m<arguments.length;m++)for(y in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],y)&&x[y]===void 0&&(x[y]=arguments[m][y]);return x},r.prepareContent=function(m,y,x,w,_){return l.Promise.resolve(y).then(function(I){return o.blob&&(I instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(I))!==-1)&&typeof FileReader<"u"?new l.Promise(function(N,Y){var j=new FileReader;j.onload=function(ae){N(ae.target.result)},j.onerror=function(ae){Y(ae.target.error)},j.readAsArrayBuffer(I)}):I}).then(function(I){var N=r.getTypeOf(I);return N?(N==="arraybuffer"?I=r.transformTo("uint8array",I):N==="string"&&(_?I=s.decode(I):x&&w!==!0&&(I=function(Y){return c(Y,o.uint8array?new Uint8Array(Y.length):new Array(Y.length))}(I))),I):l.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,r){var o=t("./reader/readerFor"),s=t("./utils"),a=t("./signature"),l=t("./zipEntry"),h=t("./support");function c(p){this.files=[],this.loadOptions=p}c.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(d)+", expected "+s.pretty(p)+")")}},isSignature:function(p,d){var v=this.reader.index;this.reader.setIndex(p);var D=this.reader.readString(4)===d;return this.reader.setIndex(v),D},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),d=h.uint8array?"uint8array":"array",v=s.transformTo(d,p);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,d,v,D=this.zip64EndOfCentralSize-44;0<D;)p=this.reader.readInt(2),d=this.reader.readInt(4),v=this.reader.readData(d),this.zip64ExtensibleData[p]={id:p,length:d,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,d;for(p=0;p<this.files.length;p++)d=this.files[p],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(p=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var d=p;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var D=d-v;if(0<D)this.isSignature(d,a.CENTRAL_FILE_HEADER)||(this.reader.zero=D);else if(D<0)throw new Error("Corrupted zip: missing "+Math.abs(D)+" bytes.")},prepareReader:function(p){this.reader=o(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,r){var o=t("./reader/readerFor"),s=t("./utils"),a=t("./compressedObject"),l=t("./crc32"),h=t("./utf8"),c=t("./compressions"),p=t("./support");function d(v,D){this.options=v,this.loadOptions=D}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var D,m;if(v.skip(22),this.fileNameLength=v.readInt(2),m=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((D=function(y){for(var x in c)if(Object.prototype.hasOwnProperty.call(c,x)&&c[x].magic===y)return c[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,D,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var D=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(D),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var D,m,y,x=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<x;)D=v.readInt(2),m=v.readInt(2),y=v.readData(m),this.extraFields[D]={id:D,length:m,value:y};v.setIndex(x)},handleUTF8:function(){var v=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var D=this.findExtraFieldUnicodePath();if(D!==null)this.fileNameStr=D;else{var m=s.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var x=s.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var D=o(v.value);return D.readInt(1)!==1||l(this.fileName)!==D.readInt(4)?null:h.utf8decode(D.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var D=o(v.value);return D.readInt(1)!==1||l(this.fileComment)!==D.readInt(4)?null:h.utf8decode(D.readData(v.length-5))}return null}},n.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,r){function o(D,m,y){this.name=D,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=m,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var s=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),l=t("./utf8"),h=t("./compressedObject"),c=t("./stream/GenericWorker");o.prototype={internalStream:function(D){var m=null,y="string";try{if(!D)throw new Error("No output type specified.");var x=(y=D.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),m=this._decompressWorker();var w=!this._dataBinary;w&&!x&&(m=m.pipe(new l.Utf8EncodeWorker)),!w&&x&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(_){(m=new c("error")).error(_)}return new s(m,y,"")},async:function(D,m){return this.internalStream(D).accumulate(m)},nodeStream:function(D,m){return this.internalStream(D||"nodebuffer").toNodejsStream(m)},_compressWorker:function(D,m){if(this._data instanceof h&&this._data.compression.magic===D.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new l.Utf8EncodeWorker)),h.createWorkerFrom(y,D,m)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<p.length;v++)o.prototype[p[v]]=d;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,r){(function(o){var s,a,l=o.MutationObserver||o.WebKitMutationObserver;if(l){var h=0,c=new l(D),p=o.document.createTextNode("");c.observe(p,{characterData:!0}),s=function(){p.data=h=++h%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var m=o.document.createElement("script");m.onreadystatechange=function(){D(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},o.document.documentElement.appendChild(m)}:function(){setTimeout(D,0)};else{var d=new o.MessageChannel;d.port1.onmessage=D,s=function(){d.port2.postMessage(0)}}var v=[];function D(){var m,y;a=!0;for(var x=v.length;x;){for(y=v,v=[],m=-1;++m<x;)y[m]();x=v.length}a=!1}n.exports=function(m){v.push(m)!==1||a||s()}}).call(this,typeof Gn<"u"?Gn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,r){var o=t("immediate");function s(){}var a={},l=["REJECTED"],h=["FULFILLED"],c=["PENDING"];function p(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,x!==s&&m(this,x)}function d(x,w,_){this.promise=x,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function v(x,w,_){o(function(){var I;try{I=w(_)}catch(N){return a.reject(x,N)}I===x?a.reject(x,new TypeError("Cannot resolve promise with itself")):a.resolve(x,I)})}function D(x){var w=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof w=="function")return function(){w.apply(x,arguments)}}function m(x,w){var _=!1;function I(j){_||(_=!0,a.reject(x,j))}function N(j){_||(_=!0,a.resolve(x,j))}var Y=y(function(){w(N,I)});Y.status==="error"&&I(Y.value)}function y(x,w){var _={};try{_.value=x(w),_.status="success"}catch(I){_.status="error",_.value=I}return _}(n.exports=p).prototype.finally=function(x){if(typeof x!="function")return this;var w=this.constructor;return this.then(function(_){return w.resolve(x()).then(function(){return _})},function(_){return w.resolve(x()).then(function(){throw _})})},p.prototype.catch=function(x){return this.then(null,x)},p.prototype.then=function(x,w){if(typeof x!="function"&&this.state===h||typeof w!="function"&&this.state===l)return this;var _=new this.constructor(s);return this.state!==c?v(_,this.state===h?x:w,this.outcome):this.queue.push(new d(_,x,w)),_},d.prototype.callFulfilled=function(x){a.resolve(this.promise,x)},d.prototype.otherCallFulfilled=function(x){v(this.promise,this.onFulfilled,x)},d.prototype.callRejected=function(x){a.reject(this.promise,x)},d.prototype.otherCallRejected=function(x){v(this.promise,this.onRejected,x)},a.resolve=function(x,w){var _=y(D,w);if(_.status==="error")return a.reject(x,_.value);var I=_.value;if(I)m(x,I);else{x.state=h,x.outcome=w;for(var N=-1,Y=x.queue.length;++N<Y;)x.queue[N].callFulfilled(w)}return x},a.reject=function(x,w){x.state=l,x.outcome=w;for(var _=-1,I=x.queue.length;++_<I;)x.queue[_].callRejected(w);return x},p.resolve=function(x){return x instanceof this?x:a.resolve(new this(s),x)},p.reject=function(x){var w=new this(s);return a.reject(w,x)},p.all=function(x){var w=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=x.length,I=!1;if(!_)return this.resolve([]);for(var N=new Array(_),Y=0,j=-1,ae=new this(s);++j<_;)K(x[j],j);return ae;function K(oe,fe){w.resolve(oe).then(function(U){N[fe]=U,++Y!==_||I||(I=!0,a.resolve(ae,N))},function(U){I||(I=!0,a.reject(ae,U))})}},p.race=function(x){var w=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=x.length,I=!1;if(!_)return this.resolve([]);for(var N=-1,Y=new this(s);++N<_;)j=x[N],w.resolve(j).then(function(ae){I||(I=!0,a.resolve(Y,ae))},function(ae){I||(I=!0,a.reject(Y,ae))});var j;return Y}},{immediate:36}],38:[function(t,n,r){var o={};(0,t("./lib/utils/common").assign)(o,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,r){var o=t("./zlib/deflate"),s=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/messages"),h=t("./zlib/zstream"),c=Object.prototype.toString,p=0,d=-1,v=0,D=8;function m(x){if(!(this instanceof m))return new m(x);this.options=s.assign({level:d,method:D,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},x||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var _=o.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(_!==p)throw new Error(l[_]);if(w.header&&o.deflateSetHeader(this.strm,w.header),w.dictionary){var I;if(I=typeof w.dictionary=="string"?a.string2buf(w.dictionary):c.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(_=o.deflateSetDictionary(this.strm,I))!==p)throw new Error(l[_]);this._dict_set=!0}}function y(x,w){var _=new m(w);if(_.push(x,!0),_.err)throw _.msg||l[_.err];return _.result}m.prototype.push=function(x,w){var _,I,N=this.strm,Y=this.options.chunkSize;if(this.ended)return!1;I=w===~~w?w:w===!0?4:0,typeof x=="string"?N.input=a.string2buf(x):c.call(x)==="[object ArrayBuffer]"?N.input=new Uint8Array(x):N.input=x,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new s.Buf8(Y),N.next_out=0,N.avail_out=Y),(_=o.deflate(N,I))!==1&&_!==p)return this.onEnd(_),!(this.ended=!0);N.avail_out!==0&&(N.avail_in!==0||I!==4&&I!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(N.output,N.next_out))):this.onData(s.shrinkBuf(N.output,N.next_out)))}while((0<N.avail_in||N.avail_out===0)&&_!==1);return I===4?(_=o.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===p):I!==2||(this.onEnd(p),!(N.avail_out=0))},m.prototype.onData=function(x){this.chunks.push(x)},m.prototype.onEnd=function(x){x===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},r.Deflate=m,r.deflate=y,r.deflateRaw=function(x,w){return(w=w||{}).raw=!0,y(x,w)},r.gzip=function(x,w){return(w=w||{}).gzip=!0,y(x,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,r){var o=t("./zlib/inflate"),s=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/constants"),h=t("./zlib/messages"),c=t("./zlib/zstream"),p=t("./zlib/gzheader"),d=Object.prototype.toString;function v(m){if(!(this instanceof v))return new v(m);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},m||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||m&&m.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var x=o.inflateInit2(this.strm,y.windowBits);if(x!==l.Z_OK)throw new Error(h[x]);this.header=new p,o.inflateGetHeader(this.strm,this.header)}function D(m,y){var x=new v(y);if(x.push(m,!0),x.err)throw x.msg||h[x.err];return x.result}v.prototype.push=function(m,y){var x,w,_,I,N,Y,j=this.strm,ae=this.options.chunkSize,K=this.options.dictionary,oe=!1;if(this.ended)return!1;w=y===~~y?y:y===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof m=="string"?j.input=a.binstring2buf(m):d.call(m)==="[object ArrayBuffer]"?j.input=new Uint8Array(m):j.input=m,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new s.Buf8(ae),j.next_out=0,j.avail_out=ae),(x=o.inflate(j,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&K&&(Y=typeof K=="string"?a.string2buf(K):d.call(K)==="[object ArrayBuffer]"?new Uint8Array(K):K,x=o.inflateSetDictionary(this.strm,Y)),x===l.Z_BUF_ERROR&&oe===!0&&(x=l.Z_OK,oe=!1),x!==l.Z_STREAM_END&&x!==l.Z_OK)return this.onEnd(x),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&x!==l.Z_STREAM_END&&(j.avail_in!==0||w!==l.Z_FINISH&&w!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(j.output,j.next_out),I=j.next_out-_,N=a.buf2string(j.output,_),j.next_out=I,j.avail_out=ae-I,I&&s.arraySet(j.output,j.output,_,I,0),this.onData(N)):this.onData(s.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(oe=!0)}while((0<j.avail_in||j.avail_out===0)&&x!==l.Z_STREAM_END);return x===l.Z_STREAM_END&&(w=l.Z_FINISH),w===l.Z_FINISH?(x=o.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===l.Z_OK):w!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(j.avail_out=0))},v.prototype.onData=function(m){this.chunks.push(m)},v.prototype.onEnd=function(m){m===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},r.Inflate=v,r.inflate=D,r.inflateRaw=function(m,y){return(y=y||{}).raw=!0,D(m,y)},r.ungzip=D},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(l){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var c=h.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])}}return l},r.shrinkBuf=function(l,h){return l.length===h?l:l.subarray?l.subarray(0,h):(l.length=h,l)};var s={arraySet:function(l,h,c,p,d){if(h.subarray&&l.subarray)l.set(h.subarray(c,c+p),d);else for(var v=0;v<p;v++)l[d+v]=h[c+v]},flattenChunks:function(l){var h,c,p,d,v,D;for(h=p=0,c=l.length;h<c;h++)p+=l[h].length;for(D=new Uint8Array(p),h=d=0,c=l.length;h<c;h++)v=l[h],D.set(v,d),d+=v.length;return D}},a={arraySet:function(l,h,c,p,d){for(var v=0;v<p;v++)l[d+v]=h[c+v]},flattenChunks:function(l){return[].concat.apply([],l)}};r.setTyped=function(l){l?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,s)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(o)},{}],42:[function(t,n,r){var o=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new o.Buf8(256),h=0;h<256;h++)l[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function c(p,d){if(d<65537&&(p.subarray&&a||!p.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(p,d));for(var v="",D=0;D<d;D++)v+=String.fromCharCode(p[D]);return v}l[254]=l[254]=1,r.string2buf=function(p){var d,v,D,m,y,x=p.length,w=0;for(m=0;m<x;m++)(64512&(v=p.charCodeAt(m)))==55296&&m+1<x&&(64512&(D=p.charCodeAt(m+1)))==56320&&(v=65536+(v-55296<<10)+(D-56320),m++),w+=v<128?1:v<2048?2:v<65536?3:4;for(d=new o.Buf8(w),m=y=0;y<w;m++)(64512&(v=p.charCodeAt(m)))==55296&&m+1<x&&(64512&(D=p.charCodeAt(m+1)))==56320&&(v=65536+(v-55296<<10)+(D-56320),m++),v<128?d[y++]=v:(v<2048?d[y++]=192|v>>>6:(v<65536?d[y++]=224|v>>>12:(d[y++]=240|v>>>18,d[y++]=128|v>>>12&63),d[y++]=128|v>>>6&63),d[y++]=128|63&v);return d},r.buf2binstring=function(p){return c(p,p.length)},r.binstring2buf=function(p){for(var d=new o.Buf8(p.length),v=0,D=d.length;v<D;v++)d[v]=p.charCodeAt(v);return d},r.buf2string=function(p,d){var v,D,m,y,x=d||p.length,w=new Array(2*x);for(v=D=0;v<x;)if((m=p[v++])<128)w[D++]=m;else if(4<(y=l[m]))w[D++]=65533,v+=y-1;else{for(m&=y===2?31:y===3?15:7;1<y&&v<x;)m=m<<6|63&p[v++],y--;1<y?w[D++]=65533:m<65536?w[D++]=m:(m-=65536,w[D++]=55296|m>>10&1023,w[D++]=56320|1023&m)}return c(w,D)},r.utf8border=function(p,d){var v;for((d=d||p.length)>p.length&&(d=p.length),v=d-1;0<=v&&(192&p[v])==128;)v--;return v<0||v===0?d:v+l[p[v]]>d?v:d}},{"./common":41}],43:[function(t,n,r){n.exports=function(o,s,a,l){for(var h=65535&o|0,c=o>>>16&65535|0,p=0;a!==0;){for(a-=p=2e3<a?2e3:a;c=c+(h=h+s[l++]|0)|0,--p;);h%=65521,c%=65521}return h|c<<16|0}},{}],44:[function(t,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,r){var o=function(){for(var s,a=[],l=0;l<256;l++){s=l;for(var h=0;h<8;h++)s=1&s?3988292384^s>>>1:s>>>1;a[l]=s}return a}();n.exports=function(s,a,l,h){var c=o,p=h+l;s^=-1;for(var d=h;d<p;d++)s=s>>>8^c[255&(s^a[d])];return-1^s}},{}],46:[function(t,n,r){var o,s=t("../utils/common"),a=t("./trees"),l=t("./adler32"),h=t("./crc32"),c=t("./messages"),p=0,d=4,v=0,D=-2,m=-1,y=4,x=2,w=8,_=9,I=286,N=30,Y=19,j=2*I+1,ae=15,K=3,oe=258,fe=oe+K+1,U=42,H=113,B=1,re=2,Qe=3,De=4;function Xe($,Pe){return $.msg=c[Pe],Pe}function ge($){return($<<1)-(4<$?9:0)}function $e($){for(var Pe=$.length;0<=--Pe;)$[Pe]=0}function ue($){var Pe=$.state,Oe=Pe.pending;Oe>$.avail_out&&(Oe=$.avail_out),Oe!==0&&(s.arraySet($.output,Pe.pending_buf,Pe.pending_out,Oe,$.next_out),$.next_out+=Oe,Pe.pending_out+=Oe,$.total_out+=Oe,$.avail_out-=Oe,Pe.pending-=Oe,Pe.pending===0&&(Pe.pending_out=0))}function he($,Pe){a._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,Pe),$.block_start=$.strstart,ue($.strm)}function je($,Pe){$.pending_buf[$.pending++]=Pe}function We($,Pe){$.pending_buf[$.pending++]=Pe>>>8&255,$.pending_buf[$.pending++]=255&Pe}function Ae($,Pe){var Oe,J,G=$.max_chain_length,ce=$.strstart,Ie=$.prev_length,Be=$.nice_match,me=$.strstart>$.w_size-fe?$.strstart-($.w_size-fe):0,Ze=$.window,Ke=$.w_mask,Ne=$.prev,at=$.strstart+oe,mt=Ze[ce+Ie-1],Pt=Ze[ce+Ie];$.prev_length>=$.good_match&&(G>>=2),Be>$.lookahead&&(Be=$.lookahead);do if(Ze[(Oe=Pe)+Ie]===Pt&&Ze[Oe+Ie-1]===mt&&Ze[Oe]===Ze[ce]&&Ze[++Oe]===Ze[ce+1]){ce+=2,Oe++;do;while(Ze[++ce]===Ze[++Oe]&&Ze[++ce]===Ze[++Oe]&&Ze[++ce]===Ze[++Oe]&&Ze[++ce]===Ze[++Oe]&&Ze[++ce]===Ze[++Oe]&&Ze[++ce]===Ze[++Oe]&&Ze[++ce]===Ze[++Oe]&&Ze[++ce]===Ze[++Oe]&&ce<at);if(J=oe-(at-ce),ce=at-oe,Ie<J){if($.match_start=Pe,Be<=(Ie=J))break;mt=Ze[ce+Ie-1],Pt=Ze[ce+Ie]}}while((Pe=Ne[Pe&Ke])>me&&--G!=0);return Ie<=$.lookahead?Ie:$.lookahead}function Me($){var Pe,Oe,J,G,ce,Ie,Be,me,Ze,Ke,Ne=$.w_size;do{if(G=$.window_size-$.lookahead-$.strstart,$.strstart>=Ne+(Ne-fe)){for(s.arraySet($.window,$.window,Ne,Ne,0),$.match_start-=Ne,$.strstart-=Ne,$.block_start-=Ne,Pe=Oe=$.hash_size;J=$.head[--Pe],$.head[Pe]=Ne<=J?J-Ne:0,--Oe;);for(Pe=Oe=Ne;J=$.prev[--Pe],$.prev[Pe]=Ne<=J?J-Ne:0,--Oe;);G+=Ne}if($.strm.avail_in===0)break;if(Ie=$.strm,Be=$.window,me=$.strstart+$.lookahead,Ze=G,Ke=void 0,Ke=Ie.avail_in,Ze<Ke&&(Ke=Ze),Oe=Ke===0?0:(Ie.avail_in-=Ke,s.arraySet(Be,Ie.input,Ie.next_in,Ke,me),Ie.state.wrap===1?Ie.adler=l(Ie.adler,Be,Ke,me):Ie.state.wrap===2&&(Ie.adler=h(Ie.adler,Be,Ke,me)),Ie.next_in+=Ke,Ie.total_in+=Ke,Ke),$.lookahead+=Oe,$.lookahead+$.insert>=K)for(ce=$.strstart-$.insert,$.ins_h=$.window[ce],$.ins_h=($.ins_h<<$.hash_shift^$.window[ce+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[ce+K-1])&$.hash_mask,$.prev[ce&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=ce,ce++,$.insert--,!($.lookahead+$.insert<K)););}while($.lookahead<fe&&$.strm.avail_in!==0)}function vt($,Pe){for(var Oe,J;;){if($.lookahead<fe){if(Me($),$.lookahead<fe&&Pe===p)return B;if($.lookahead===0)break}if(Oe=0,$.lookahead>=K&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+K-1])&$.hash_mask,Oe=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),Oe!==0&&$.strstart-Oe<=$.w_size-fe&&($.match_length=Ae($,Oe)),$.match_length>=K)if(J=a._tr_tally($,$.strstart-$.match_start,$.match_length-K),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=K){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+K-1])&$.hash_mask,Oe=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else J=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(J&&(he($,!1),$.strm.avail_out===0))return B}return $.insert=$.strstart<K-1?$.strstart:K-1,Pe===d?(he($,!0),$.strm.avail_out===0?Qe:De):$.last_lit&&(he($,!1),$.strm.avail_out===0)?B:re}function et($,Pe){for(var Oe,J,G;;){if($.lookahead<fe){if(Me($),$.lookahead<fe&&Pe===p)return B;if($.lookahead===0)break}if(Oe=0,$.lookahead>=K&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+K-1])&$.hash_mask,Oe=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=K-1,Oe!==0&&$.prev_length<$.max_lazy_match&&$.strstart-Oe<=$.w_size-fe&&($.match_length=Ae($,Oe),$.match_length<=5&&($.strategy===1||$.match_length===K&&4096<$.strstart-$.match_start)&&($.match_length=K-1)),$.prev_length>=K&&$.match_length<=$.prev_length){for(G=$.strstart+$.lookahead-K,J=a._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-K),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=G&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+K-1])&$.hash_mask,Oe=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=K-1,$.strstart++,J&&(he($,!1),$.strm.avail_out===0))return B}else if($.match_available){if((J=a._tr_tally($,0,$.window[$.strstart-1]))&&he($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return B}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(J=a._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<K-1?$.strstart:K-1,Pe===d?(he($,!0),$.strm.avail_out===0?Qe:De):$.last_lit&&(he($,!1),$.strm.avail_out===0)?B:re}function tt($,Pe,Oe,J,G){this.good_length=$,this.max_lazy=Pe,this.nice_length=Oe,this.max_chain=J,this.func=G}function Ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*j),this.dyn_dtree=new s.Buf16(2*(2*N+1)),this.bl_tree=new s.Buf16(2*(2*Y+1)),$e(this.dyn_ltree),$e(this.dyn_dtree),$e(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(ae+1),this.heap=new s.Buf16(2*I+1),$e(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*I+1),$e(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function it($){var Pe;return $&&$.state?($.total_in=$.total_out=0,$.data_type=x,(Pe=$.state).pending=0,Pe.pending_out=0,Pe.wrap<0&&(Pe.wrap=-Pe.wrap),Pe.status=Pe.wrap?U:H,$.adler=Pe.wrap===2?0:1,Pe.last_flush=p,a._tr_init(Pe),v):Xe($,D)}function Nt($){var Pe=it($);return Pe===v&&function(Oe){Oe.window_size=2*Oe.w_size,$e(Oe.head),Oe.max_lazy_match=o[Oe.level].max_lazy,Oe.good_match=o[Oe.level].good_length,Oe.nice_match=o[Oe.level].nice_length,Oe.max_chain_length=o[Oe.level].max_chain,Oe.strstart=0,Oe.block_start=0,Oe.lookahead=0,Oe.insert=0,Oe.match_length=Oe.prev_length=K-1,Oe.match_available=0,Oe.ins_h=0}($.state),Pe}function yt($,Pe,Oe,J,G,ce){if(!$)return D;var Ie=1;if(Pe===m&&(Pe=6),J<0?(Ie=0,J=-J):15<J&&(Ie=2,J-=16),G<1||_<G||Oe!==w||J<8||15<J||Pe<0||9<Pe||ce<0||y<ce)return Xe($,D);J===8&&(J=9);var Be=new Ot;return($.state=Be).strm=$,Be.wrap=Ie,Be.gzhead=null,Be.w_bits=J,Be.w_size=1<<Be.w_bits,Be.w_mask=Be.w_size-1,Be.hash_bits=G+7,Be.hash_size=1<<Be.hash_bits,Be.hash_mask=Be.hash_size-1,Be.hash_shift=~~((Be.hash_bits+K-1)/K),Be.window=new s.Buf8(2*Be.w_size),Be.head=new s.Buf16(Be.hash_size),Be.prev=new s.Buf16(Be.w_size),Be.lit_bufsize=1<<G+6,Be.pending_buf_size=4*Be.lit_bufsize,Be.pending_buf=new s.Buf8(Be.pending_buf_size),Be.d_buf=1*Be.lit_bufsize,Be.l_buf=3*Be.lit_bufsize,Be.level=Pe,Be.strategy=ce,Be.method=Oe,Nt($)}o=[new tt(0,0,0,0,function($,Pe){var Oe=65535;for(Oe>$.pending_buf_size-5&&(Oe=$.pending_buf_size-5);;){if($.lookahead<=1){if(Me($),$.lookahead===0&&Pe===p)return B;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var J=$.block_start+Oe;if(($.strstart===0||$.strstart>=J)&&($.lookahead=$.strstart-J,$.strstart=J,he($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-fe&&(he($,!1),$.strm.avail_out===0))return B}return $.insert=0,Pe===d?(he($,!0),$.strm.avail_out===0?Qe:De):($.strstart>$.block_start&&(he($,!1),$.strm.avail_out),B)}),new tt(4,4,8,4,vt),new tt(4,5,16,8,vt),new tt(4,6,32,32,vt),new tt(4,4,16,16,et),new tt(8,16,32,32,et),new tt(8,16,128,128,et),new tt(8,32,128,256,et),new tt(32,128,258,1024,et),new tt(32,258,258,4096,et)],r.deflateInit=function($,Pe){return yt($,Pe,w,15,8,0)},r.deflateInit2=yt,r.deflateReset=Nt,r.deflateResetKeep=it,r.deflateSetHeader=function($,Pe){return $&&$.state?$.state.wrap!==2?D:($.state.gzhead=Pe,v):D},r.deflate=function($,Pe){var Oe,J,G,ce;if(!$||!$.state||5<Pe||Pe<0)return $?Xe($,D):D;if(J=$.state,!$.output||!$.input&&$.avail_in!==0||J.status===666&&Pe!==d)return Xe($,$.avail_out===0?-5:D);if(J.strm=$,Oe=J.last_flush,J.last_flush=Pe,J.status===U)if(J.wrap===2)$.adler=0,je(J,31),je(J,139),je(J,8),J.gzhead?(je(J,(J.gzhead.text?1:0)+(J.gzhead.hcrc?2:0)+(J.gzhead.extra?4:0)+(J.gzhead.name?8:0)+(J.gzhead.comment?16:0)),je(J,255&J.gzhead.time),je(J,J.gzhead.time>>8&255),je(J,J.gzhead.time>>16&255),je(J,J.gzhead.time>>24&255),je(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),je(J,255&J.gzhead.os),J.gzhead.extra&&J.gzhead.extra.length&&(je(J,255&J.gzhead.extra.length),je(J,J.gzhead.extra.length>>8&255)),J.gzhead.hcrc&&($.adler=h($.adler,J.pending_buf,J.pending,0)),J.gzindex=0,J.status=69):(je(J,0),je(J,0),je(J,0),je(J,0),je(J,0),je(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),je(J,3),J.status=H);else{var Ie=w+(J.w_bits-8<<4)<<8;Ie|=(2<=J.strategy||J.level<2?0:J.level<6?1:J.level===6?2:3)<<6,J.strstart!==0&&(Ie|=32),Ie+=31-Ie%31,J.status=H,We(J,Ie),J.strstart!==0&&(We(J,$.adler>>>16),We(J,65535&$.adler)),$.adler=1}if(J.status===69)if(J.gzhead.extra){for(G=J.pending;J.gzindex<(65535&J.gzhead.extra.length)&&(J.pending!==J.pending_buf_size||(J.gzhead.hcrc&&J.pending>G&&($.adler=h($.adler,J.pending_buf,J.pending-G,G)),ue($),G=J.pending,J.pending!==J.pending_buf_size));)je(J,255&J.gzhead.extra[J.gzindex]),J.gzindex++;J.gzhead.hcrc&&J.pending>G&&($.adler=h($.adler,J.pending_buf,J.pending-G,G)),J.gzindex===J.gzhead.extra.length&&(J.gzindex=0,J.status=73)}else J.status=73;if(J.status===73)if(J.gzhead.name){G=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>G&&($.adler=h($.adler,J.pending_buf,J.pending-G,G)),ue($),G=J.pending,J.pending===J.pending_buf_size)){ce=1;break}ce=J.gzindex<J.gzhead.name.length?255&J.gzhead.name.charCodeAt(J.gzindex++):0,je(J,ce)}while(ce!==0);J.gzhead.hcrc&&J.pending>G&&($.adler=h($.adler,J.pending_buf,J.pending-G,G)),ce===0&&(J.gzindex=0,J.status=91)}else J.status=91;if(J.status===91)if(J.gzhead.comment){G=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>G&&($.adler=h($.adler,J.pending_buf,J.pending-G,G)),ue($),G=J.pending,J.pending===J.pending_buf_size)){ce=1;break}ce=J.gzindex<J.gzhead.comment.length?255&J.gzhead.comment.charCodeAt(J.gzindex++):0,je(J,ce)}while(ce!==0);J.gzhead.hcrc&&J.pending>G&&($.adler=h($.adler,J.pending_buf,J.pending-G,G)),ce===0&&(J.status=103)}else J.status=103;if(J.status===103&&(J.gzhead.hcrc?(J.pending+2>J.pending_buf_size&&ue($),J.pending+2<=J.pending_buf_size&&(je(J,255&$.adler),je(J,$.adler>>8&255),$.adler=0,J.status=H)):J.status=H),J.pending!==0){if(ue($),$.avail_out===0)return J.last_flush=-1,v}else if($.avail_in===0&&ge(Pe)<=ge(Oe)&&Pe!==d)return Xe($,-5);if(J.status===666&&$.avail_in!==0)return Xe($,-5);if($.avail_in!==0||J.lookahead!==0||Pe!==p&&J.status!==666){var Be=J.strategy===2?function(me,Ze){for(var Ke;;){if(me.lookahead===0&&(Me(me),me.lookahead===0)){if(Ze===p)return B;break}if(me.match_length=0,Ke=a._tr_tally(me,0,me.window[me.strstart]),me.lookahead--,me.strstart++,Ke&&(he(me,!1),me.strm.avail_out===0))return B}return me.insert=0,Ze===d?(he(me,!0),me.strm.avail_out===0?Qe:De):me.last_lit&&(he(me,!1),me.strm.avail_out===0)?B:re}(J,Pe):J.strategy===3?function(me,Ze){for(var Ke,Ne,at,mt,Pt=me.window;;){if(me.lookahead<=oe){if(Me(me),me.lookahead<=oe&&Ze===p)return B;if(me.lookahead===0)break}if(me.match_length=0,me.lookahead>=K&&0<me.strstart&&(Ne=Pt[at=me.strstart-1])===Pt[++at]&&Ne===Pt[++at]&&Ne===Pt[++at]){mt=me.strstart+oe;do;while(Ne===Pt[++at]&&Ne===Pt[++at]&&Ne===Pt[++at]&&Ne===Pt[++at]&&Ne===Pt[++at]&&Ne===Pt[++at]&&Ne===Pt[++at]&&Ne===Pt[++at]&&at<mt);me.match_length=oe-(mt-at),me.match_length>me.lookahead&&(me.match_length=me.lookahead)}if(me.match_length>=K?(Ke=a._tr_tally(me,1,me.match_length-K),me.lookahead-=me.match_length,me.strstart+=me.match_length,me.match_length=0):(Ke=a._tr_tally(me,0,me.window[me.strstart]),me.lookahead--,me.strstart++),Ke&&(he(me,!1),me.strm.avail_out===0))return B}return me.insert=0,Ze===d?(he(me,!0),me.strm.avail_out===0?Qe:De):me.last_lit&&(he(me,!1),me.strm.avail_out===0)?B:re}(J,Pe):o[J.level].func(J,Pe);if(Be!==Qe&&Be!==De||(J.status=666),Be===B||Be===Qe)return $.avail_out===0&&(J.last_flush=-1),v;if(Be===re&&(Pe===1?a._tr_align(J):Pe!==5&&(a._tr_stored_block(J,0,0,!1),Pe===3&&($e(J.head),J.lookahead===0&&(J.strstart=0,J.block_start=0,J.insert=0))),ue($),$.avail_out===0))return J.last_flush=-1,v}return Pe!==d?v:J.wrap<=0?1:(J.wrap===2?(je(J,255&$.adler),je(J,$.adler>>8&255),je(J,$.adler>>16&255),je(J,$.adler>>24&255),je(J,255&$.total_in),je(J,$.total_in>>8&255),je(J,$.total_in>>16&255),je(J,$.total_in>>24&255)):(We(J,$.adler>>>16),We(J,65535&$.adler)),ue($),0<J.wrap&&(J.wrap=-J.wrap),J.pending!==0?v:1)},r.deflateEnd=function($){var Pe;return $&&$.state?(Pe=$.state.status)!==U&&Pe!==69&&Pe!==73&&Pe!==91&&Pe!==103&&Pe!==H&&Pe!==666?Xe($,D):($.state=null,Pe===H?Xe($,-3):v):D},r.deflateSetDictionary=function($,Pe){var Oe,J,G,ce,Ie,Be,me,Ze,Ke=Pe.length;if(!$||!$.state||(ce=(Oe=$.state).wrap)===2||ce===1&&Oe.status!==U||Oe.lookahead)return D;for(ce===1&&($.adler=l($.adler,Pe,Ke,0)),Oe.wrap=0,Ke>=Oe.w_size&&(ce===0&&($e(Oe.head),Oe.strstart=0,Oe.block_start=0,Oe.insert=0),Ze=new s.Buf8(Oe.w_size),s.arraySet(Ze,Pe,Ke-Oe.w_size,Oe.w_size,0),Pe=Ze,Ke=Oe.w_size),Ie=$.avail_in,Be=$.next_in,me=$.input,$.avail_in=Ke,$.next_in=0,$.input=Pe,Me(Oe);Oe.lookahead>=K;){for(J=Oe.strstart,G=Oe.lookahead-(K-1);Oe.ins_h=(Oe.ins_h<<Oe.hash_shift^Oe.window[J+K-1])&Oe.hash_mask,Oe.prev[J&Oe.w_mask]=Oe.head[Oe.ins_h],Oe.head[Oe.ins_h]=J,J++,--G;);Oe.strstart=J,Oe.lookahead=K-1,Me(Oe)}return Oe.strstart+=Oe.lookahead,Oe.block_start=Oe.strstart,Oe.insert=Oe.lookahead,Oe.lookahead=0,Oe.match_length=Oe.prev_length=K-1,Oe.match_available=0,$.next_in=Be,$.input=me,$.avail_in=Ie,Oe.wrap=ce,v},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,r){n.exports=function(o,s){var a,l,h,c,p,d,v,D,m,y,x,w,_,I,N,Y,j,ae,K,oe,fe,U,H,B,re;a=o.state,l=o.next_in,B=o.input,h=l+(o.avail_in-5),c=o.next_out,re=o.output,p=c-(s-o.avail_out),d=c+(o.avail_out-257),v=a.dmax,D=a.wsize,m=a.whave,y=a.wnext,x=a.window,w=a.hold,_=a.bits,I=a.lencode,N=a.distcode,Y=(1<<a.lenbits)-1,j=(1<<a.distbits)-1;e:do{_<15&&(w+=B[l++]<<_,_+=8,w+=B[l++]<<_,_+=8),ae=I[w&Y];t:for(;;){if(w>>>=K=ae>>>24,_-=K,(K=ae>>>16&255)===0)re[c++]=65535&ae;else{if(!(16&K)){if(!(64&K)){ae=I[(65535&ae)+(w&(1<<K)-1)];continue t}if(32&K){a.mode=12;break e}o.msg="invalid literal/length code",a.mode=30;break e}oe=65535&ae,(K&=15)&&(_<K&&(w+=B[l++]<<_,_+=8),oe+=w&(1<<K)-1,w>>>=K,_-=K),_<15&&(w+=B[l++]<<_,_+=8,w+=B[l++]<<_,_+=8),ae=N[w&j];i:for(;;){if(w>>>=K=ae>>>24,_-=K,!(16&(K=ae>>>16&255))){if(!(64&K)){ae=N[(65535&ae)+(w&(1<<K)-1)];continue i}o.msg="invalid distance code",a.mode=30;break e}if(fe=65535&ae,_<(K&=15)&&(w+=B[l++]<<_,(_+=8)<K&&(w+=B[l++]<<_,_+=8)),v<(fe+=w&(1<<K)-1)){o.msg="invalid distance too far back",a.mode=30;break e}if(w>>>=K,_-=K,(K=c-p)<fe){if(m<(K=fe-K)&&a.sane){o.msg="invalid distance too far back",a.mode=30;break e}if(H=x,(U=0)===y){if(U+=D-K,K<oe){for(oe-=K;re[c++]=x[U++],--K;);U=c-fe,H=re}}else if(y<K){if(U+=D+y-K,(K-=y)<oe){for(oe-=K;re[c++]=x[U++],--K;);if(U=0,y<oe){for(oe-=K=y;re[c++]=x[U++],--K;);U=c-fe,H=re}}}else if(U+=y-K,K<oe){for(oe-=K;re[c++]=x[U++],--K;);U=c-fe,H=re}for(;2<oe;)re[c++]=H[U++],re[c++]=H[U++],re[c++]=H[U++],oe-=3;oe&&(re[c++]=H[U++],1<oe&&(re[c++]=H[U++]))}else{for(U=c-fe;re[c++]=re[U++],re[c++]=re[U++],re[c++]=re[U++],2<(oe-=3););oe&&(re[c++]=re[U++],1<oe&&(re[c++]=re[U++]))}break}}break}}while(l<h&&c<d);l-=oe=_>>3,w&=(1<<(_-=oe<<3))-1,o.next_in=l,o.next_out=c,o.avail_in=l<h?h-l+5:5-(l-h),o.avail_out=c<d?d-c+257:257-(c-d),a.hold=w,a.bits=_}},{}],49:[function(t,n,r){var o=t("../utils/common"),s=t("./adler32"),a=t("./crc32"),l=t("./inffast"),h=t("./inftrees"),c=1,p=2,d=0,v=-2,D=1,m=852,y=592;function x(U){return(U>>>24&255)+(U>>>8&65280)+((65280&U)<<8)+((255&U)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(U){var H;return U&&U.state?(H=U.state,U.total_in=U.total_out=H.total=0,U.msg="",H.wrap&&(U.adler=1&H.wrap),H.mode=D,H.last=0,H.havedict=0,H.dmax=32768,H.head=null,H.hold=0,H.bits=0,H.lencode=H.lendyn=new o.Buf32(m),H.distcode=H.distdyn=new o.Buf32(y),H.sane=1,H.back=-1,d):v}function I(U){var H;return U&&U.state?((H=U.state).wsize=0,H.whave=0,H.wnext=0,_(U)):v}function N(U,H){var B,re;return U&&U.state?(re=U.state,H<0?(B=0,H=-H):(B=1+(H>>4),H<48&&(H&=15)),H&&(H<8||15<H)?v:(re.window!==null&&re.wbits!==H&&(re.window=null),re.wrap=B,re.wbits=H,I(U))):v}function Y(U,H){var B,re;return U?(re=new w,(U.state=re).window=null,(B=N(U,H))!==d&&(U.state=null),B):v}var j,ae,K=!0;function oe(U){if(K){var H;for(j=new o.Buf32(512),ae=new o.Buf32(32),H=0;H<144;)U.lens[H++]=8;for(;H<256;)U.lens[H++]=9;for(;H<280;)U.lens[H++]=7;for(;H<288;)U.lens[H++]=8;for(h(c,U.lens,0,288,j,0,U.work,{bits:9}),H=0;H<32;)U.lens[H++]=5;h(p,U.lens,0,32,ae,0,U.work,{bits:5}),K=!1}U.lencode=j,U.lenbits=9,U.distcode=ae,U.distbits=5}function fe(U,H,B,re){var Qe,De=U.state;return De.window===null&&(De.wsize=1<<De.wbits,De.wnext=0,De.whave=0,De.window=new o.Buf8(De.wsize)),re>=De.wsize?(o.arraySet(De.window,H,B-De.wsize,De.wsize,0),De.wnext=0,De.whave=De.wsize):(re<(Qe=De.wsize-De.wnext)&&(Qe=re),o.arraySet(De.window,H,B-re,Qe,De.wnext),(re-=Qe)?(o.arraySet(De.window,H,B-re,re,0),De.wnext=re,De.whave=De.wsize):(De.wnext+=Qe,De.wnext===De.wsize&&(De.wnext=0),De.whave<De.wsize&&(De.whave+=Qe))),0}r.inflateReset=I,r.inflateReset2=N,r.inflateResetKeep=_,r.inflateInit=function(U){return Y(U,15)},r.inflateInit2=Y,r.inflate=function(U,H){var B,re,Qe,De,Xe,ge,$e,ue,he,je,We,Ae,Me,vt,et,tt,Ot,it,Nt,yt,$,Pe,Oe,J,G=0,ce=new o.Buf8(4),Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!U||!U.state||!U.output||!U.input&&U.avail_in!==0)return v;(B=U.state).mode===12&&(B.mode=13),Xe=U.next_out,Qe=U.output,$e=U.avail_out,De=U.next_in,re=U.input,ge=U.avail_in,ue=B.hold,he=B.bits,je=ge,We=$e,Pe=d;e:for(;;)switch(B.mode){case D:if(B.wrap===0){B.mode=13;break}for(;he<16;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}if(2&B.wrap&&ue===35615){ce[B.check=0]=255&ue,ce[1]=ue>>>8&255,B.check=a(B.check,ce,2,0),he=ue=0,B.mode=2;break}if(B.flags=0,B.head&&(B.head.done=!1),!(1&B.wrap)||(((255&ue)<<8)+(ue>>8))%31){U.msg="incorrect header check",B.mode=30;break}if((15&ue)!=8){U.msg="unknown compression method",B.mode=30;break}if(he-=4,$=8+(15&(ue>>>=4)),B.wbits===0)B.wbits=$;else if($>B.wbits){U.msg="invalid window size",B.mode=30;break}B.dmax=1<<$,U.adler=B.check=1,B.mode=512&ue?10:12,he=ue=0;break;case 2:for(;he<16;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}if(B.flags=ue,(255&B.flags)!=8){U.msg="unknown compression method",B.mode=30;break}if(57344&B.flags){U.msg="unknown header flags set",B.mode=30;break}B.head&&(B.head.text=ue>>8&1),512&B.flags&&(ce[0]=255&ue,ce[1]=ue>>>8&255,B.check=a(B.check,ce,2,0)),he=ue=0,B.mode=3;case 3:for(;he<32;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}B.head&&(B.head.time=ue),512&B.flags&&(ce[0]=255&ue,ce[1]=ue>>>8&255,ce[2]=ue>>>16&255,ce[3]=ue>>>24&255,B.check=a(B.check,ce,4,0)),he=ue=0,B.mode=4;case 4:for(;he<16;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}B.head&&(B.head.xflags=255&ue,B.head.os=ue>>8),512&B.flags&&(ce[0]=255&ue,ce[1]=ue>>>8&255,B.check=a(B.check,ce,2,0)),he=ue=0,B.mode=5;case 5:if(1024&B.flags){for(;he<16;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}B.length=ue,B.head&&(B.head.extra_len=ue),512&B.flags&&(ce[0]=255&ue,ce[1]=ue>>>8&255,B.check=a(B.check,ce,2,0)),he=ue=0}else B.head&&(B.head.extra=null);B.mode=6;case 6:if(1024&B.flags&&(ge<(Ae=B.length)&&(Ae=ge),Ae&&(B.head&&($=B.head.extra_len-B.length,B.head.extra||(B.head.extra=new Array(B.head.extra_len)),o.arraySet(B.head.extra,re,De,Ae,$)),512&B.flags&&(B.check=a(B.check,re,Ae,De)),ge-=Ae,De+=Ae,B.length-=Ae),B.length))break e;B.length=0,B.mode=7;case 7:if(2048&B.flags){if(ge===0)break e;for(Ae=0;$=re[De+Ae++],B.head&&$&&B.length<65536&&(B.head.name+=String.fromCharCode($)),$&&Ae<ge;);if(512&B.flags&&(B.check=a(B.check,re,Ae,De)),ge-=Ae,De+=Ae,$)break e}else B.head&&(B.head.name=null);B.length=0,B.mode=8;case 8:if(4096&B.flags){if(ge===0)break e;for(Ae=0;$=re[De+Ae++],B.head&&$&&B.length<65536&&(B.head.comment+=String.fromCharCode($)),$&&Ae<ge;);if(512&B.flags&&(B.check=a(B.check,re,Ae,De)),ge-=Ae,De+=Ae,$)break e}else B.head&&(B.head.comment=null);B.mode=9;case 9:if(512&B.flags){for(;he<16;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}if(ue!==(65535&B.check)){U.msg="header crc mismatch",B.mode=30;break}he=ue=0}B.head&&(B.head.hcrc=B.flags>>9&1,B.head.done=!0),U.adler=B.check=0,B.mode=12;break;case 10:for(;he<32;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}U.adler=B.check=x(ue),he=ue=0,B.mode=11;case 11:if(B.havedict===0)return U.next_out=Xe,U.avail_out=$e,U.next_in=De,U.avail_in=ge,B.hold=ue,B.bits=he,2;U.adler=B.check=1,B.mode=12;case 12:if(H===5||H===6)break e;case 13:if(B.last){ue>>>=7&he,he-=7&he,B.mode=27;break}for(;he<3;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}switch(B.last=1&ue,he-=1,3&(ue>>>=1)){case 0:B.mode=14;break;case 1:if(oe(B),B.mode=20,H!==6)break;ue>>>=2,he-=2;break e;case 2:B.mode=17;break;case 3:U.msg="invalid block type",B.mode=30}ue>>>=2,he-=2;break;case 14:for(ue>>>=7&he,he-=7&he;he<32;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}if((65535&ue)!=(ue>>>16^65535)){U.msg="invalid stored block lengths",B.mode=30;break}if(B.length=65535&ue,he=ue=0,B.mode=15,H===6)break e;case 15:B.mode=16;case 16:if(Ae=B.length){if(ge<Ae&&(Ae=ge),$e<Ae&&(Ae=$e),Ae===0)break e;o.arraySet(Qe,re,De,Ae,Xe),ge-=Ae,De+=Ae,$e-=Ae,Xe+=Ae,B.length-=Ae;break}B.mode=12;break;case 17:for(;he<14;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}if(B.nlen=257+(31&ue),ue>>>=5,he-=5,B.ndist=1+(31&ue),ue>>>=5,he-=5,B.ncode=4+(15&ue),ue>>>=4,he-=4,286<B.nlen||30<B.ndist){U.msg="too many length or distance symbols",B.mode=30;break}B.have=0,B.mode=18;case 18:for(;B.have<B.ncode;){for(;he<3;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}B.lens[Ie[B.have++]]=7&ue,ue>>>=3,he-=3}for(;B.have<19;)B.lens[Ie[B.have++]]=0;if(B.lencode=B.lendyn,B.lenbits=7,Oe={bits:B.lenbits},Pe=h(0,B.lens,0,19,B.lencode,0,B.work,Oe),B.lenbits=Oe.bits,Pe){U.msg="invalid code lengths set",B.mode=30;break}B.have=0,B.mode=19;case 19:for(;B.have<B.nlen+B.ndist;){for(;tt=(G=B.lencode[ue&(1<<B.lenbits)-1])>>>16&255,Ot=65535&G,!((et=G>>>24)<=he);){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}if(Ot<16)ue>>>=et,he-=et,B.lens[B.have++]=Ot;else{if(Ot===16){for(J=et+2;he<J;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}if(ue>>>=et,he-=et,B.have===0){U.msg="invalid bit length repeat",B.mode=30;break}$=B.lens[B.have-1],Ae=3+(3&ue),ue>>>=2,he-=2}else if(Ot===17){for(J=et+3;he<J;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}he-=et,$=0,Ae=3+(7&(ue>>>=et)),ue>>>=3,he-=3}else{for(J=et+7;he<J;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}he-=et,$=0,Ae=11+(127&(ue>>>=et)),ue>>>=7,he-=7}if(B.have+Ae>B.nlen+B.ndist){U.msg="invalid bit length repeat",B.mode=30;break}for(;Ae--;)B.lens[B.have++]=$}}if(B.mode===30)break;if(B.lens[256]===0){U.msg="invalid code -- missing end-of-block",B.mode=30;break}if(B.lenbits=9,Oe={bits:B.lenbits},Pe=h(c,B.lens,0,B.nlen,B.lencode,0,B.work,Oe),B.lenbits=Oe.bits,Pe){U.msg="invalid literal/lengths set",B.mode=30;break}if(B.distbits=6,B.distcode=B.distdyn,Oe={bits:B.distbits},Pe=h(p,B.lens,B.nlen,B.ndist,B.distcode,0,B.work,Oe),B.distbits=Oe.bits,Pe){U.msg="invalid distances set",B.mode=30;break}if(B.mode=20,H===6)break e;case 20:B.mode=21;case 21:if(6<=ge&&258<=$e){U.next_out=Xe,U.avail_out=$e,U.next_in=De,U.avail_in=ge,B.hold=ue,B.bits=he,l(U,We),Xe=U.next_out,Qe=U.output,$e=U.avail_out,De=U.next_in,re=U.input,ge=U.avail_in,ue=B.hold,he=B.bits,B.mode===12&&(B.back=-1);break}for(B.back=0;tt=(G=B.lencode[ue&(1<<B.lenbits)-1])>>>16&255,Ot=65535&G,!((et=G>>>24)<=he);){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}if(tt&&!(240&tt)){for(it=et,Nt=tt,yt=Ot;tt=(G=B.lencode[yt+((ue&(1<<it+Nt)-1)>>it)])>>>16&255,Ot=65535&G,!(it+(et=G>>>24)<=he);){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}ue>>>=it,he-=it,B.back+=it}if(ue>>>=et,he-=et,B.back+=et,B.length=Ot,tt===0){B.mode=26;break}if(32&tt){B.back=-1,B.mode=12;break}if(64&tt){U.msg="invalid literal/length code",B.mode=30;break}B.extra=15&tt,B.mode=22;case 22:if(B.extra){for(J=B.extra;he<J;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}B.length+=ue&(1<<B.extra)-1,ue>>>=B.extra,he-=B.extra,B.back+=B.extra}B.was=B.length,B.mode=23;case 23:for(;tt=(G=B.distcode[ue&(1<<B.distbits)-1])>>>16&255,Ot=65535&G,!((et=G>>>24)<=he);){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}if(!(240&tt)){for(it=et,Nt=tt,yt=Ot;tt=(G=B.distcode[yt+((ue&(1<<it+Nt)-1)>>it)])>>>16&255,Ot=65535&G,!(it+(et=G>>>24)<=he);){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}ue>>>=it,he-=it,B.back+=it}if(ue>>>=et,he-=et,B.back+=et,64&tt){U.msg="invalid distance code",B.mode=30;break}B.offset=Ot,B.extra=15&tt,B.mode=24;case 24:if(B.extra){for(J=B.extra;he<J;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}B.offset+=ue&(1<<B.extra)-1,ue>>>=B.extra,he-=B.extra,B.back+=B.extra}if(B.offset>B.dmax){U.msg="invalid distance too far back",B.mode=30;break}B.mode=25;case 25:if($e===0)break e;if(Ae=We-$e,B.offset>Ae){if((Ae=B.offset-Ae)>B.whave&&B.sane){U.msg="invalid distance too far back",B.mode=30;break}Me=Ae>B.wnext?(Ae-=B.wnext,B.wsize-Ae):B.wnext-Ae,Ae>B.length&&(Ae=B.length),vt=B.window}else vt=Qe,Me=Xe-B.offset,Ae=B.length;for($e<Ae&&(Ae=$e),$e-=Ae,B.length-=Ae;Qe[Xe++]=vt[Me++],--Ae;);B.length===0&&(B.mode=21);break;case 26:if($e===0)break e;Qe[Xe++]=B.length,$e--,B.mode=21;break;case 27:if(B.wrap){for(;he<32;){if(ge===0)break e;ge--,ue|=re[De++]<<he,he+=8}if(We-=$e,U.total_out+=We,B.total+=We,We&&(U.adler=B.check=B.flags?a(B.check,Qe,We,Xe-We):s(B.check,Qe,We,Xe-We)),We=$e,(B.flags?ue:x(ue))!==B.check){U.msg="incorrect data check",B.mode=30;break}he=ue=0}B.mode=28;case 28:if(B.wrap&&B.flags){for(;he<32;){if(ge===0)break e;ge--,ue+=re[De++]<<he,he+=8}if(ue!==(4294967295&B.total)){U.msg="incorrect length check",B.mode=30;break}he=ue=0}B.mode=29;case 29:Pe=1;break e;case 30:Pe=-3;break e;case 31:return-4;case 32:default:return v}return U.next_out=Xe,U.avail_out=$e,U.next_in=De,U.avail_in=ge,B.hold=ue,B.bits=he,(B.wsize||We!==U.avail_out&&B.mode<30&&(B.mode<27||H!==4))&&fe(U,U.output,U.next_out,We-U.avail_out)?(B.mode=31,-4):(je-=U.avail_in,We-=U.avail_out,U.total_in+=je,U.total_out+=We,B.total+=We,B.wrap&&We&&(U.adler=B.check=B.flags?a(B.check,Qe,We,U.next_out-We):s(B.check,Qe,We,U.next_out-We)),U.data_type=B.bits+(B.last?64:0)+(B.mode===12?128:0)+(B.mode===20||B.mode===15?256:0),(je==0&&We===0||H===4)&&Pe===d&&(Pe=-5),Pe)},r.inflateEnd=function(U){if(!U||!U.state)return v;var H=U.state;return H.window&&(H.window=null),U.state=null,d},r.inflateGetHeader=function(U,H){var B;return U&&U.state&&2&(B=U.state).wrap?((B.head=H).done=!1,d):v},r.inflateSetDictionary=function(U,H){var B,re=H.length;return U&&U.state?(B=U.state).wrap!==0&&B.mode!==11?v:B.mode===11&&s(1,H,re,0)!==B.check?-3:fe(U,H,re,re)?(B.mode=31,-4):(B.havedict=1,d):v},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,r){var o=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(c,p,d,v,D,m,y,x){var w,_,I,N,Y,j,ae,K,oe,fe=x.bits,U=0,H=0,B=0,re=0,Qe=0,De=0,Xe=0,ge=0,$e=0,ue=0,he=null,je=0,We=new o.Buf16(16),Ae=new o.Buf16(16),Me=null,vt=0;for(U=0;U<=15;U++)We[U]=0;for(H=0;H<v;H++)We[p[d+H]]++;for(Qe=fe,re=15;1<=re&&We[re]===0;re--);if(re<Qe&&(Qe=re),re===0)return D[m++]=20971520,D[m++]=20971520,x.bits=1,0;for(B=1;B<re&&We[B]===0;B++);for(Qe<B&&(Qe=B),U=ge=1;U<=15;U++)if(ge<<=1,(ge-=We[U])<0)return-1;if(0<ge&&(c===0||re!==1))return-1;for(Ae[1]=0,U=1;U<15;U++)Ae[U+1]=Ae[U]+We[U];for(H=0;H<v;H++)p[d+H]!==0&&(y[Ae[p[d+H]]++]=H);if(j=c===0?(he=Me=y,19):c===1?(he=s,je-=257,Me=a,vt-=257,256):(he=l,Me=h,-1),U=B,Y=m,Xe=H=ue=0,I=-1,N=($e=1<<(De=Qe))-1,c===1&&852<$e||c===2&&592<$e)return 1;for(;;){for(ae=U-Xe,oe=y[H]<j?(K=0,y[H]):y[H]>j?(K=Me[vt+y[H]],he[je+y[H]]):(K=96,0),w=1<<U-Xe,B=_=1<<De;D[Y+(ue>>Xe)+(_-=w)]=ae<<24|K<<16|oe|0,_!==0;);for(w=1<<U-1;ue&w;)w>>=1;if(w!==0?(ue&=w-1,ue+=w):ue=0,H++,--We[U]==0){if(U===re)break;U=p[d+y[H]]}if(Qe<U&&(ue&N)!==I){for(Xe===0&&(Xe=Qe),Y+=B,ge=1<<(De=U-Xe);De+Xe<re&&!((ge-=We[De+Xe])<=0);)De++,ge<<=1;if($e+=1<<De,c===1&&852<$e||c===2&&592<$e)return 1;D[I=ue&N]=Qe<<24|De<<16|Y-m|0}}return ue!==0&&(D[Y+ue]=U-Xe<<24|64<<16|0),x.bits=Qe,0}},{"../utils/common":41}],51:[function(t,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,r){var o=t("../utils/common"),s=0,a=1;function l(G){for(var ce=G.length;0<=--ce;)G[ce]=0}var h=0,c=29,p=256,d=p+1+c,v=30,D=19,m=2*d+1,y=15,x=16,w=7,_=256,I=16,N=17,Y=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ae=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fe=new Array(2*(d+2));l(fe);var U=new Array(2*v);l(U);var H=new Array(512);l(H);var B=new Array(256);l(B);var re=new Array(c);l(re);var Qe,De,Xe,ge=new Array(v);function $e(G,ce,Ie,Be,me){this.static_tree=G,this.extra_bits=ce,this.extra_base=Ie,this.elems=Be,this.max_length=me,this.has_stree=G&&G.length}function ue(G,ce){this.dyn_tree=G,this.max_code=0,this.stat_desc=ce}function he(G){return G<256?H[G]:H[256+(G>>>7)]}function je(G,ce){G.pending_buf[G.pending++]=255&ce,G.pending_buf[G.pending++]=ce>>>8&255}function We(G,ce,Ie){G.bi_valid>x-Ie?(G.bi_buf|=ce<<G.bi_valid&65535,je(G,G.bi_buf),G.bi_buf=ce>>x-G.bi_valid,G.bi_valid+=Ie-x):(G.bi_buf|=ce<<G.bi_valid&65535,G.bi_valid+=Ie)}function Ae(G,ce,Ie){We(G,Ie[2*ce],Ie[2*ce+1])}function Me(G,ce){for(var Ie=0;Ie|=1&G,G>>>=1,Ie<<=1,0<--ce;);return Ie>>>1}function vt(G,ce,Ie){var Be,me,Ze=new Array(y+1),Ke=0;for(Be=1;Be<=y;Be++)Ze[Be]=Ke=Ke+Ie[Be-1]<<1;for(me=0;me<=ce;me++){var Ne=G[2*me+1];Ne!==0&&(G[2*me]=Me(Ze[Ne]++,Ne))}}function et(G){var ce;for(ce=0;ce<d;ce++)G.dyn_ltree[2*ce]=0;for(ce=0;ce<v;ce++)G.dyn_dtree[2*ce]=0;for(ce=0;ce<D;ce++)G.bl_tree[2*ce]=0;G.dyn_ltree[2*_]=1,G.opt_len=G.static_len=0,G.last_lit=G.matches=0}function tt(G){8<G.bi_valid?je(G,G.bi_buf):0<G.bi_valid&&(G.pending_buf[G.pending++]=G.bi_buf),G.bi_buf=0,G.bi_valid=0}function Ot(G,ce,Ie,Be){var me=2*ce,Ze=2*Ie;return G[me]<G[Ze]||G[me]===G[Ze]&&Be[ce]<=Be[Ie]}function it(G,ce,Ie){for(var Be=G.heap[Ie],me=Ie<<1;me<=G.heap_len&&(me<G.heap_len&&Ot(ce,G.heap[me+1],G.heap[me],G.depth)&&me++,!Ot(ce,Be,G.heap[me],G.depth));)G.heap[Ie]=G.heap[me],Ie=me,me<<=1;G.heap[Ie]=Be}function Nt(G,ce,Ie){var Be,me,Ze,Ke,Ne=0;if(G.last_lit!==0)for(;Be=G.pending_buf[G.d_buf+2*Ne]<<8|G.pending_buf[G.d_buf+2*Ne+1],me=G.pending_buf[G.l_buf+Ne],Ne++,Be===0?Ae(G,me,ce):(Ae(G,(Ze=B[me])+p+1,ce),(Ke=j[Ze])!==0&&We(G,me-=re[Ze],Ke),Ae(G,Ze=he(--Be),Ie),(Ke=ae[Ze])!==0&&We(G,Be-=ge[Ze],Ke)),Ne<G.last_lit;);Ae(G,_,ce)}function yt(G,ce){var Ie,Be,me,Ze=ce.dyn_tree,Ke=ce.stat_desc.static_tree,Ne=ce.stat_desc.has_stree,at=ce.stat_desc.elems,mt=-1;for(G.heap_len=0,G.heap_max=m,Ie=0;Ie<at;Ie++)Ze[2*Ie]!==0?(G.heap[++G.heap_len]=mt=Ie,G.depth[Ie]=0):Ze[2*Ie+1]=0;for(;G.heap_len<2;)Ze[2*(me=G.heap[++G.heap_len]=mt<2?++mt:0)]=1,G.depth[me]=0,G.opt_len--,Ne&&(G.static_len-=Ke[2*me+1]);for(ce.max_code=mt,Ie=G.heap_len>>1;1<=Ie;Ie--)it(G,Ze,Ie);for(me=at;Ie=G.heap[1],G.heap[1]=G.heap[G.heap_len--],it(G,Ze,1),Be=G.heap[1],G.heap[--G.heap_max]=Ie,G.heap[--G.heap_max]=Be,Ze[2*me]=Ze[2*Ie]+Ze[2*Be],G.depth[me]=(G.depth[Ie]>=G.depth[Be]?G.depth[Ie]:G.depth[Be])+1,Ze[2*Ie+1]=Ze[2*Be+1]=me,G.heap[1]=me++,it(G,Ze,1),2<=G.heap_len;);G.heap[--G.heap_max]=G.heap[1],function(Pt,li){var ji,pi,kt,At,Qt,ei,Vt=li.dyn_tree,Ln=li.max_code,Wt=li.stat_desc.static_tree,gn=li.stat_desc.has_stree,ln=li.stat_desc.extra_bits,kn=li.stat_desc.extra_base,ye=li.stat_desc.max_length,be=0;for(At=0;At<=y;At++)Pt.bl_count[At]=0;for(Vt[2*Pt.heap[Pt.heap_max]+1]=0,ji=Pt.heap_max+1;ji<m;ji++)ye<(At=Vt[2*Vt[2*(pi=Pt.heap[ji])+1]+1]+1)&&(At=ye,be++),Vt[2*pi+1]=At,Ln<pi||(Pt.bl_count[At]++,Qt=0,kn<=pi&&(Qt=ln[pi-kn]),ei=Vt[2*pi],Pt.opt_len+=ei*(At+Qt),gn&&(Pt.static_len+=ei*(Wt[2*pi+1]+Qt)));if(be!==0){do{for(At=ye-1;Pt.bl_count[At]===0;)At--;Pt.bl_count[At]--,Pt.bl_count[At+1]+=2,Pt.bl_count[ye]--,be-=2}while(0<be);for(At=ye;At!==0;At--)for(pi=Pt.bl_count[At];pi!==0;)Ln<(kt=Pt.heap[--ji])||(Vt[2*kt+1]!==At&&(Pt.opt_len+=(At-Vt[2*kt+1])*Vt[2*kt],Vt[2*kt+1]=At),pi--)}}(G,ce),vt(Ze,mt,G.bl_count)}function $(G,ce,Ie){var Be,me,Ze=-1,Ke=ce[1],Ne=0,at=7,mt=4;for(Ke===0&&(at=138,mt=3),ce[2*(Ie+1)+1]=65535,Be=0;Be<=Ie;Be++)me=Ke,Ke=ce[2*(Be+1)+1],++Ne<at&&me===Ke||(Ne<mt?G.bl_tree[2*me]+=Ne:me!==0?(me!==Ze&&G.bl_tree[2*me]++,G.bl_tree[2*I]++):Ne<=10?G.bl_tree[2*N]++:G.bl_tree[2*Y]++,Ze=me,mt=(Ne=0)===Ke?(at=138,3):me===Ke?(at=6,3):(at=7,4))}function Pe(G,ce,Ie){var Be,me,Ze=-1,Ke=ce[1],Ne=0,at=7,mt=4;for(Ke===0&&(at=138,mt=3),Be=0;Be<=Ie;Be++)if(me=Ke,Ke=ce[2*(Be+1)+1],!(++Ne<at&&me===Ke)){if(Ne<mt)for(;Ae(G,me,G.bl_tree),--Ne!=0;);else me!==0?(me!==Ze&&(Ae(G,me,G.bl_tree),Ne--),Ae(G,I,G.bl_tree),We(G,Ne-3,2)):Ne<=10?(Ae(G,N,G.bl_tree),We(G,Ne-3,3)):(Ae(G,Y,G.bl_tree),We(G,Ne-11,7));Ze=me,mt=(Ne=0)===Ke?(at=138,3):me===Ke?(at=6,3):(at=7,4)}}l(ge);var Oe=!1;function J(G,ce,Ie,Be){We(G,(h<<1)+(Be?1:0),3),function(me,Ze,Ke,Ne){tt(me),Ne&&(je(me,Ke),je(me,~Ke)),o.arraySet(me.pending_buf,me.window,Ze,Ke,me.pending),me.pending+=Ke}(G,ce,Ie,!0)}r._tr_init=function(G){Oe||(function(){var ce,Ie,Be,me,Ze,Ke=new Array(y+1);for(me=Be=0;me<c-1;me++)for(re[me]=Be,ce=0;ce<1<<j[me];ce++)B[Be++]=me;for(B[Be-1]=me,me=Ze=0;me<16;me++)for(ge[me]=Ze,ce=0;ce<1<<ae[me];ce++)H[Ze++]=me;for(Ze>>=7;me<v;me++)for(ge[me]=Ze<<7,ce=0;ce<1<<ae[me]-7;ce++)H[256+Ze++]=me;for(Ie=0;Ie<=y;Ie++)Ke[Ie]=0;for(ce=0;ce<=143;)fe[2*ce+1]=8,ce++,Ke[8]++;for(;ce<=255;)fe[2*ce+1]=9,ce++,Ke[9]++;for(;ce<=279;)fe[2*ce+1]=7,ce++,Ke[7]++;for(;ce<=287;)fe[2*ce+1]=8,ce++,Ke[8]++;for(vt(fe,d+1,Ke),ce=0;ce<v;ce++)U[2*ce+1]=5,U[2*ce]=Me(ce,5);Qe=new $e(fe,j,p+1,d,y),De=new $e(U,ae,0,v,y),Xe=new $e(new Array(0),K,0,D,w)}(),Oe=!0),G.l_desc=new ue(G.dyn_ltree,Qe),G.d_desc=new ue(G.dyn_dtree,De),G.bl_desc=new ue(G.bl_tree,Xe),G.bi_buf=0,G.bi_valid=0,et(G)},r._tr_stored_block=J,r._tr_flush_block=function(G,ce,Ie,Be){var me,Ze,Ke=0;0<G.level?(G.strm.data_type===2&&(G.strm.data_type=function(Ne){var at,mt=4093624447;for(at=0;at<=31;at++,mt>>>=1)if(1&mt&&Ne.dyn_ltree[2*at]!==0)return s;if(Ne.dyn_ltree[18]!==0||Ne.dyn_ltree[20]!==0||Ne.dyn_ltree[26]!==0)return a;for(at=32;at<p;at++)if(Ne.dyn_ltree[2*at]!==0)return a;return s}(G)),yt(G,G.l_desc),yt(G,G.d_desc),Ke=function(Ne){var at;for($(Ne,Ne.dyn_ltree,Ne.l_desc.max_code),$(Ne,Ne.dyn_dtree,Ne.d_desc.max_code),yt(Ne,Ne.bl_desc),at=D-1;3<=at&&Ne.bl_tree[2*oe[at]+1]===0;at--);return Ne.opt_len+=3*(at+1)+5+5+4,at}(G),me=G.opt_len+3+7>>>3,(Ze=G.static_len+3+7>>>3)<=me&&(me=Ze)):me=Ze=Ie+5,Ie+4<=me&&ce!==-1?J(G,ce,Ie,Be):G.strategy===4||Ze===me?(We(G,2+(Be?1:0),3),Nt(G,fe,U)):(We(G,4+(Be?1:0),3),function(Ne,at,mt,Pt){var li;for(We(Ne,at-257,5),We(Ne,mt-1,5),We(Ne,Pt-4,4),li=0;li<Pt;li++)We(Ne,Ne.bl_tree[2*oe[li]+1],3);Pe(Ne,Ne.dyn_ltree,at-1),Pe(Ne,Ne.dyn_dtree,mt-1)}(G,G.l_desc.max_code+1,G.d_desc.max_code+1,Ke+1),Nt(G,G.dyn_ltree,G.dyn_dtree)),et(G),Be&&tt(G)},r._tr_tally=function(G,ce,Ie){return G.pending_buf[G.d_buf+2*G.last_lit]=ce>>>8&255,G.pending_buf[G.d_buf+2*G.last_lit+1]=255&ce,G.pending_buf[G.l_buf+G.last_lit]=255&Ie,G.last_lit++,ce===0?G.dyn_ltree[2*Ie]++:(G.matches++,ce--,G.dyn_ltree[2*(B[Ie]+p+1)]++,G.dyn_dtree[2*he(ce)]++),G.last_lit===G.lit_bufsize-1},r._tr_align=function(G){We(G,2,3),Ae(G,_,fe),function(ce){ce.bi_valid===16?(je(ce,ce.bi_buf),ce.bi_buf=0,ce.bi_valid=0):8<=ce.bi_valid&&(ce.pending_buf[ce.pending++]=255&ce.bi_buf,ce.bi_buf>>=8,ce.bi_valid-=8)}(G)}},{"../utils/common":41}],53:[function(t,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,r){(function(o){(function(s,a){if(!s.setImmediate){var l,h,c,p,d=1,v={},D=!1,m=s.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(s);y=y&&y.setTimeout?y:s,l={}.toString.call(s.process)==="[object process]"?function(I){process.nextTick(function(){w(I)})}:function(){if(s.postMessage&&!s.importScripts){var I=!0,N=s.onmessage;return s.onmessage=function(){I=!1},s.postMessage("","*"),s.onmessage=N,I}}()?(p="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",_,!1):s.attachEvent("onmessage",_),function(I){s.postMessage(p+I,"*")}):s.MessageChannel?((c=new MessageChannel).port1.onmessage=function(I){w(I.data)},function(I){c.port2.postMessage(I)}):m&&"onreadystatechange"in m.createElement("script")?(h=m.documentElement,function(I){var N=m.createElement("script");N.onreadystatechange=function(){w(I),N.onreadystatechange=null,h.removeChild(N),N=null},h.appendChild(N)}):function(I){setTimeout(w,0,I)},y.setImmediate=function(I){typeof I!="function"&&(I=new Function(""+I));for(var N=new Array(arguments.length-1),Y=0;Y<N.length;Y++)N[Y]=arguments[Y+1];var j={callback:I,args:N};return v[d]=j,l(d),d++},y.clearImmediate=x}function x(I){delete v[I]}function w(I){if(D)setTimeout(w,0,I);else{var N=v[I];if(N){D=!0;try{(function(Y){var j=Y.callback,ae=Y.args;switch(ae.length){case 0:j();break;case 1:j(ae[0]);break;case 2:j(ae[0],ae[1]);break;case 3:j(ae[0],ae[1],ae[2]);break;default:j.apply(a,ae)}})(N)}finally{x(I),D=!1}}}}function _(I){I.source===s&&typeof I.data=="string"&&I.data.indexOf(p)===0&&w(+I.data.slice(p.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof Gn<"u"?Gn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(em);const tm=em.exports;var Zc={exports:{}};(function(i,e){(function(t,n){n()})(Gn,function(){function t(h,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function n(h,c,p){var d=new XMLHttpRequest;d.open("GET",h),d.responseType="blob",d.onload=function(){l(d.response,c,p)},d.onerror=function(){console.error("could not download file")},d.send()}function r(h){var c=new XMLHttpRequest;c.open("HEAD",h,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function o(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(c)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Gn=="object"&&Gn.global===Gn?Gn:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(h,c,p){var d=s.URL||s.webkitURL,v=document.createElement("a");c=c||h.name||"download",v.download=c,v.rel="noopener",typeof h=="string"?(v.href=h,v.origin===location.origin?o(v):r(v.href)?n(h,c,p):o(v,v.target="_blank")):(v.href=d.createObjectURL(h),setTimeout(function(){d.revokeObjectURL(v.href)},4e4),setTimeout(function(){o(v)},0))}:"msSaveOrOpenBlob"in navigator?function(h,c,p){if(c=c||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,p),c);else if(r(h))n(h,c,p);else{var d=document.createElement("a");d.href=h,d.target="_blank",setTimeout(function(){o(d)})}}:function(h,c,p,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof h=="string")return n(h,c,p);var v=h.type==="application/octet-stream",D=/constructor/i.test(s.HTMLElement)||s.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||v&&D||a)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var _=y.result;_=m?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=_:location=_,d=null},y.readAsDataURL(h)}else{var x=s.URL||s.webkitURL,w=x.createObjectURL(h);d?d.location=w:location.href=w,d=null,setTimeout(function(){x.revokeObjectURL(w)},4e4)}});s.saveAs=l.saveAs=l,i.exports=l})})(Zc);var P={};P.version="6.4.2.2";P.use_lines=!0;P.use_xyz=!1;var im=!1;typeof module<"u"&&module.exports?(module.exports=P,im=!0):typeof document<"u"?window.ClipperLib=P:self.ClipperLib=P;if(im)var Qi="chrome";else var Qi=navigator.userAgent.toString().toLowerCase();Qi.indexOf("chrome")!=-1&&Qi.indexOf("chromium")==-1;Qi.indexOf("chromium")!=-1;Qi.indexOf("safari")!=-1&&Qi.indexOf("chrome")==-1&&Qi.indexOf("chromium")==-1;Qi.indexOf("firefox")!=-1;Qi.indexOf("firefox/17")!=-1;Qi.indexOf("firefox/15")!=-1;Qi.indexOf("firefox/3")!=-1;Qi.indexOf("opera")!=-1;Qi.indexOf("msie 10")!=-1;Qi.indexOf("msie 9")!=-1;Qi.indexOf("msie 8")!=-1;Qi.indexOf("msie 7")!=-1;Qi.indexOf("msie ")!=-1;var nm=function(i,e){var t;if(typeof Object.getOwnPropertyNames>"u"){for(t in e.prototype)(typeof i.prototype[t]>"u"||i.prototype[t]===Object.prototype[t])&&(i.prototype[t]=e.prototype[t]);for(t in e)typeof i[t]>"u"&&(i[t]=e[t]);i.$baseCtor=e}else{for(var n=Object.getOwnPropertyNames(e.prototype),r=0;r<n.length;r++)typeof Object.getOwnPropertyDescriptor(i.prototype,n[r])>"u"&&Object.defineProperty(i.prototype,n[r],Object.getOwnPropertyDescriptor(e.prototype,n[r]));for(t in e)typeof i[t]>"u"&&(i[t]=e[t]);i.$baseCtor=e}};P.Path=function(){return[]};P.Path.prototype.push=Array.prototype.push;P.Paths=function(){return[]};P.Paths.prototype.push=Array.prototype.push;P.PolyNode=function(){this.m_Parent=null,this.m_polygon=new P.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1};P.PolyNode.prototype.IsHoleNode=function(){for(var i=!0,e=this.m_Parent;e!==null;)i=!i,e=e.m_Parent;return i};P.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length};P.PolyNode.prototype.Contour=function(){return this.m_polygon};P.PolyNode.prototype.AddChild=function(i){var e=this.m_Childs.length;this.m_Childs.push(i),i.m_Parent=this,i.m_Index=e};P.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()};P.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]};P.PolyNode.prototype.Childs=function(){return this.m_Childs};P.PolyNode.prototype.Parent=function(){return this.m_Parent};P.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()};P.PolyTree=function(){this.m_AllPolys=[],P.PolyNode.call(this)};P.PolyTree.prototype.Clear=function(){for(var i=0,e=this.m_AllPolys.length;i<e;i++)this.m_AllPolys[i]=null;this.m_AllPolys.length=0,this.m_Childs.length=0};P.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null};P.PolyTree.prototype.Total=function(){var i=this.m_AllPolys.length;return i>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&i--,i};nm(P.PolyTree,P.PolyNode);P.Clear=function(i){i.length=0};P.PI=3.141592653589793;P.PI2=2*3.141592653589793;P.FPoint=function(){var i=arguments,e=i.length;if(this.X=0,this.Y=0,P.use_xyz)if(this.Z=0,e===3)this.X=i[0],this.Y=i[1],this.Z=i[2];else if(e===2)this.X=i[0],this.Y=i[1],this.Z=0;else if(e===1)if(i[0]instanceof P.FPoint){var t=i[0];this.X=t.X,this.Y=t.Y,this.Z=0}else{var n=i[0];typeof n.Z>"u"&&(n.Z=0),this.X=n.X,this.Y=n.Y,this.Z=n.Z}else this.X=0,this.Y=0,this.Z=0;else if(e===2)this.X=i[0],this.Y=i[1];else if(e===1)if(i[0]instanceof P.FPoint){var t=i[0];this.X=t.X,this.Y=t.Y}else{var n=i[0];this.X=n.X,this.Y=n.Y}else this.X=0,this.Y=0};P.FPoint.op_Equality=function(i,e){return i.X===e.X&&i.Y===e.Y};P.FPoint.op_Inequality=function(i,e){return i.X!==e.X||i.Y!==e.Y};P.FPoint0=function(){this.X=0,this.Y=0,P.use_xyz&&(this.Z=0)};P.FPoint0.prototype=P.FPoint.prototype;P.FPoint1=function(i){this.X=i.X,this.Y=i.Y,P.use_xyz&&(typeof i.Z>"u"?this.Z=0:this.Z=i.Z)};P.FPoint1.prototype=P.FPoint.prototype;P.FPoint1dp=function(i){this.X=i.X,this.Y=i.Y,P.use_xyz&&(this.Z=0)};P.FPoint1dp.prototype=P.FPoint.prototype;P.FPoint2=function(i,e,t){this.X=i,this.Y=e,P.use_xyz&&(typeof t>"u"?this.Z=0:this.Z=t)};P.FPoint2.prototype=P.FPoint.prototype;P.FRect=function(){var i=arguments,e=i.length;if(e===4)this.left=i[0],this.top=i[1],this.right=i[2],this.bottom=i[3];else if(e===1){var t=i[0];this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0};P.FRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0};P.FRect0.prototype=P.FRect.prototype;P.FRect1=function(i){this.left=i.left,this.top=i.top,this.right=i.right,this.bottom=i.bottom};P.FRect1.prototype=P.FRect.prototype;P.FRect4=function(i,e,t,n){this.left=i,this.top=e,this.right=t,this.bottom=n};P.FRect4.prototype=P.FRect.prototype;P.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3};P.PolyType={ptSubject:0,ptClip:1};P.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3};P.JoinType={jtSquare:0,jtRound:1,jtMiter:2};P.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4};P.EdgeSide={esLeft:0,esRight:1};P.Direction={dRightToLeft:0,dLeftToRight:1};P.TEdge=function(){this.Bot=new P.FPoint0,this.Curr=new P.FPoint0,this.Top=new P.FPoint0,this.Delta=new P.FPoint0,this.Dx=0,this.PolyTyp=P.PolyType.ptSubject,this.Side=P.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null};P.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new P.FPoint0};P.MyIntersectNodeSort=function(){};P.MyIntersectNodeSort.Compare=function(i,e){var t=e.Pt.Y-i.Pt.Y;return t>0?1:t<0?-1:0};P.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null};P.Scanbeam=function(){this.Y=0,this.Next=null};P.Maxima=function(){this.X=0,this.Next=null,this.Prev=null};P.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null};P.OutPt=function(){this.Idx=0,this.Pt=new P.FPoint0,this.Next=null,this.Prev=null};P.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new P.FPoint0};P.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null};P.ClipperBase.horizontal=-34e37;P.ClipperBase.Skip=-2;P.ClipperBase.Unassigned=-1;P.ClipperBase.tolerance=1e-20;P.ClipperBase.maxValue=Math.sqrt(Number.MAX_VALUE);P.ClipperBase.minValue=Math.sqrt(Number.MIN_VALUE);P.ClipperBase.near_zero=function(i){return i>-P.ClipperBase.tolerance&&i<P.ClipperBase.tolerance};P.ClipperBase.IsHorizontal=function(i){return i.Delta.Y===0};P.ClipperBase.prototype.PointIsVertex=function(i,e){var t=e;do{if(P.FPoint.op_Equality(t.Pt,i))return!0;t=t.Next}while(t!==e);return!1};P.ClipperBase.prototype.PointOnLineSegment=function(i,e,t){return i.X===e.X&&i.Y===e.Y||i.X===t.X&&i.Y===t.Y||i.X>e.X==i.X<t.X&&i.Y>e.Y==i.Y<t.Y&&(i.X-e.X)*(t.Y-e.Y)===(t.X-e.X)*(i.Y-e.Y)};P.ClipperBase.prototype.PointOnPolygon=function(i,e){for(var t=e;;){if(this.PointOnLineSegment(i,t.Pt,t.Next.Pt))return!0;if(t=t.Next,t===e)break}return!1};P.ClipperBase.prototype.SlopesEqual=P.ClipperBase.SlopesEqual=function(){var i=arguments,e=i.length,t,n,r,o,s,a;return e===2?(t=i[0],n=i[1],t.Delta.Y*n.Delta.X===t.Delta.X*n.Delta.Y):e===3?(r=i[0],o=i[1],s=i[2],(r.Y-o.Y)*(o.X-s.X)-(r.X-o.X)*(o.Y-s.Y)===0):(r=i[0],o=i[1],s=i[2],a=i[3],(r.Y-o.Y)*(s.X-a.X)-(r.X-o.X)*(s.Y-a.Y)===0)};P.ClipperBase.SlopesEqual3=function(i,e){return i.Delta.Y*e.Delta.X===i.Delta.X*e.Delta.Y};P.ClipperBase.SlopesEqual4=function(i,e,t){return(i.Y-e.Y)*(e.X-t.X)-(i.X-e.X)*(e.Y-t.Y)===0};P.ClipperBase.SlopesEqual5=function(i,e,t,n){return(i.Y-e.Y)*(t.X-n.X)-(i.X-e.X)*(t.Y-n.Y)===0};P.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var i=0,e=this.m_edges.length;i<e;++i){for(var t=0,n=this.m_edges[i].length;t<n;++t)this.m_edges[i][t]=null;P.Clear(this.m_edges[i])}P.Clear(this.m_edges),this.m_HasOpenPaths=!1};P.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var i=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=i}this.m_CurrentLM=null};P.ClipperBase.prototype.RangeTest=function(i){(i.X>P.ClipperBase.maxValue||i.X<-P.ClipperBase.maxValue||i.Y>P.ClipperBase.maxValue||i.Y<-P.ClipperBase.maxValue||i.X>0&&i.X<P.ClipperBase.minValue||i.Y>0&&i.Y<P.ClipperBase.minValue||i.X<0&&i.X>-P.ClipperBase.minValue||i.Y<0&&i.Y>-P.ClipperBase.minValue)&&P.Error("Coordinate outside allowed range in RangeTest().")};P.ClipperBase.prototype.InitEdge=function(i,e,t,n){i.Next=e,i.Prev=t,i.Curr.X=n.X,i.Curr.Y=n.Y,P.use_xyz&&(i.Curr.Z=n.Z),i.OutIdx=-1};P.ClipperBase.prototype.InitEdge2=function(i,e){i.Curr.Y>=i.Next.Curr.Y?(i.Bot.X=i.Curr.X,i.Bot.Y=i.Curr.Y,P.use_xyz&&(i.Bot.Z=i.Curr.Z),i.Top.X=i.Next.Curr.X,i.Top.Y=i.Next.Curr.Y,P.use_xyz&&(i.Top.Z=i.Next.Curr.Z)):(i.Top.X=i.Curr.X,i.Top.Y=i.Curr.Y,P.use_xyz&&(i.Top.Z=i.Curr.Z),i.Bot.X=i.Next.Curr.X,i.Bot.Y=i.Next.Curr.Y,P.use_xyz&&(i.Bot.Z=i.Next.Curr.Z)),this.SetDx(i),i.PolyTyp=e};P.ClipperBase.prototype.FindNextLocMin=function(i){for(var e;;){for(;P.FPoint.op_Inequality(i.Bot,i.Prev.Bot)||P.FPoint.op_Equality(i.Curr,i.Top);)i=i.Next;if(i.Dx!==P.ClipperBase.horizontal&&i.Prev.Dx!==P.ClipperBase.horizontal)break;for(;i.Prev.Dx===P.ClipperBase.horizontal;)i=i.Prev;for(e=i;i.Dx===P.ClipperBase.horizontal;)i=i.Next;if(i.Top.Y!==i.Prev.Bot.Y){e.Prev.Bot.X<i.Bot.X&&(i=e);break}}return i};P.ClipperBase.prototype.ProcessBound=function(i,e){var t,n=i,r;if(n.OutIdx===P.ClipperBase.Skip){if(i=n,e){for(;i.Top.Y===i.Next.Bot.Y;)i=i.Next;for(;i!==n&&i.Dx===P.ClipperBase.horizontal;)i=i.Prev}else{for(;i.Top.Y===i.Prev.Bot.Y;)i=i.Prev;for(;i!==n&&i.Dx===P.ClipperBase.horizontal;)i=i.Next}if(i===n)e?n=i.Next:n=i.Prev;else{e?i=n.Next:i=n.Prev;var o=new P.LocalMinima;o.Next=null,o.Y=i.Bot.Y,o.LeftBound=null,o.RightBound=i,i.WindDelta=0,n=this.ProcessBound(i,e),this.InsertLocalMinima(o)}return n}if(i.Dx===P.ClipperBase.horizontal&&(e?t=i.Prev:t=i.Next,t.Dx===P.ClipperBase.horizontal?t.Bot.X!==i.Bot.X&&t.Top.X!==i.Bot.X&&this.ReverseHorizontal(i):t.Bot.X!==i.Bot.X&&this.ReverseHorizontal(i)),t=i,e){for(;n.Top.Y===n.Next.Bot.Y&&n.Next.OutIdx!==P.ClipperBase.Skip;)n=n.Next;if(n.Dx===P.ClipperBase.horizontal&&n.Next.OutIdx!==P.ClipperBase.Skip){for(r=n;r.Prev.Dx===P.ClipperBase.horizontal;)r=r.Prev;r.Prev.Top.X>n.Next.Top.X&&(n=r.Prev)}for(;i!==n;)i.NextInLML=i.Next,i.Dx===P.ClipperBase.horizontal&&i!==t&&i.Bot.X!==i.Prev.Top.X&&this.ReverseHorizontal(i),i=i.Next;i.Dx===P.ClipperBase.horizontal&&i!==t&&i.Bot.X!==i.Prev.Top.X&&this.ReverseHorizontal(i),n=n.Next}else{for(;n.Top.Y===n.Prev.Bot.Y&&n.Prev.OutIdx!==P.ClipperBase.Skip;)n=n.Prev;if(n.Dx===P.ClipperBase.horizontal&&n.Prev.OutIdx!==P.ClipperBase.Skip){for(r=n;r.Next.Dx===P.ClipperBase.horizontal;)r=r.Next;(r.Next.Top.X===n.Prev.Top.X||r.Next.Top.X>n.Prev.Top.X)&&(n=r.Next)}for(;i!==n;)i.NextInLML=i.Prev,i.Dx===P.ClipperBase.horizontal&&i!==t&&i.Bot.X!==i.Next.Top.X&&this.ReverseHorizontal(i),i=i.Prev;i.Dx===P.ClipperBase.horizontal&&i!==t&&i.Bot.X!==i.Next.Top.X&&this.ReverseHorizontal(i),n=n.Prev}return n};P.ClipperBase.prototype.AddPath=function(i,e,t){P.use_lines?!t&&e===P.PolyType.ptClip&&P.Error("AddPath: Open paths must be subject."):t||P.Error("AddPath: Open paths have been disabled.");var n=i.length-1;if(t)for(;n>0&&P.FPoint.op_Equality(i[n],i[0]);)--n;for(;n>0&&P.FPoint.op_Equality(i[n],i[n-1]);)--n;if(t&&n<2||!t&&n<1)return!1;for(var r=new Array,o=0;o<=n;o++)r.push(new P.TEdge);var s=!0;r[1].Curr.X=i[1].X,r[1].Curr.Y=i[1].Y,P.use_xyz&&(r[1].Curr.Z=i[1].Z),this.RangeTest(i[0]),this.RangeTest(i[n]),this.InitEdge(r[0],r[1],r[n],i[0]),this.InitEdge(r[n],r[0],r[n-1],i[n]);for(var o=n-1;o>=1;--o)this.RangeTest(i[o]),this.InitEdge(r[o],r[o+1],r[o-1],i[o]);for(var a=r[0],l=a,h=a;;){if(l.Curr===l.Next.Curr&&(t||l.Next!==a)){if(l===l.Next)break;l===a&&(a=l.Next),l=this.RemoveEdge(l),h=l;continue}if(l.Prev===l.Next)break;if(t&&P.ClipperBase.SlopesEqual4(l.Prev.Curr,l.Curr,l.Next.Curr)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(l.Prev.Curr,l.Curr,l.Next.Curr))){l===a&&(a=l.Next),l=this.RemoveEdge(l),l=l.Prev,h=l;continue}if(l=l.Next,l===h||!t&&l.Next===a)break}if(!t&&l===l.Next||t&&l.Prev===l.Next)return!1;t||(this.m_HasOpenPaths=!0,a.Prev.OutIdx=P.ClipperBase.Skip),l=a;do this.InitEdge2(l,e),l=l.Next,s&&l.Curr.Y!==a.Curr.Y&&(s=!1);while(l!==a);if(s){if(t)return!1;l.Prev.OutIdx=P.ClipperBase.Skip;var c=new P.LocalMinima;for(c.Next=null,c.Y=l.Bot.Y,c.LeftBound=null,c.RightBound=l,c.RightBound.Side=P.EdgeSide.esRight,c.RightBound.WindDelta=0;l.Bot.X!==l.Prev.Top.X&&this.ReverseHorizontal(l),l.Next.OutIdx!==P.ClipperBase.Skip;)l.NextInLML=l.Next,l=l.Next;return this.InsertLocalMinima(c),this.m_edges.push(r),!0}this.m_edges.push(r);var p,d=null;for(P.FPoint.op_Equality(l.Prev.Bot,l.Prev.Top)&&(l=l.Next);l=this.FindNextLocMin(l),l!==d;){d===null&&(d=l);var c=new P.LocalMinima;c.Next=null,c.Y=l.Bot.Y,l.Dx<l.Prev.Dx?(c.LeftBound=l.Prev,c.RightBound=l,p=!1):(c.LeftBound=l,c.RightBound=l.Prev,p=!0),c.LeftBound.Side=P.EdgeSide.esLeft,c.RightBound.Side=P.EdgeSide.esRight,t?c.LeftBound.Next===c.RightBound?c.LeftBound.WindDelta=-1:c.LeftBound.WindDelta=1:c.LeftBound.WindDelta=0,c.RightBound.WindDelta=-c.LeftBound.WindDelta,l=this.ProcessBound(c.LeftBound,p),l.OutIdx===P.ClipperBase.Skip&&(l=this.ProcessBound(l,p));var v=this.ProcessBound(c.RightBound,!p);v.OutIdx===P.ClipperBase.Skip&&(v=this.ProcessBound(v,!p)),c.LeftBound.OutIdx===P.ClipperBase.Skip?c.LeftBound=null:c.RightBound.OutIdx===P.ClipperBase.Skip&&(c.RightBound=null),this.InsertLocalMinima(c),p||(l=v)}return!0};P.ClipperBase.prototype.AddPaths=function(i,e,t){for(var n=!1,r=0,o=i.length;r<o;++r)this.AddPath(i[r],e,t)&&(n=!0);return n};P.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(i,e,t){return P.FPoint.op_Equality(i,t)||P.FPoint.op_Equality(i,e)||P.FPoint.op_Equality(t,e)?!1:i.X!==t.X?e.X>i.X==e.X<t.X:e.Y>i.Y==e.Y<t.Y};P.ClipperBase.prototype.RemoveEdge=function(i){i.Prev.Next=i.Next,i.Next.Prev=i.Prev;var e=i.Next;return i.Prev=null,e};P.ClipperBase.prototype.SetDx=function(i){i.Delta.X=i.Top.X-i.Bot.X,i.Delta.Y=i.Top.Y-i.Bot.Y,i.Delta.Y===0?i.Dx=P.ClipperBase.horizontal:i.Dx=i.Delta.X/i.Delta.Y};P.ClipperBase.prototype.InsertLocalMinima=function(i){if(this.m_MinimaList===null)this.m_MinimaList=i;else if(i.Y>=this.m_MinimaList.Y)i.Next=this.m_MinimaList,this.m_MinimaList=i;else{for(var e=this.m_MinimaList;e.Next!==null&&i.Y<e.Next.Y;)e=e.Next;i.Next=e.Next,e.Next=i}};P.ClipperBase.prototype.PopLocalMinima=function(i,e){return e.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===i?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1};P.ClipperBase.prototype.ReverseHorizontal=function(i){var e=i.Top.X;i.Top.X=i.Bot.X,i.Bot.X=e,P.use_xyz&&(e=i.Top.Z,i.Top.Z=i.Bot.Z,i.Bot.Z=e)};P.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var i=this.m_MinimaList;i!==null;){this.InsertScanbeam(i.Y);var e=i.LeftBound;e!==null&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,P.use_xyz&&(e.Curr.Z=e.Bot.Z),e.OutIdx=P.ClipperBase.Unassigned),e=i.RightBound,e!==null&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,P.use_xyz&&(e.Curr.Z=e.Bot.Z),e.OutIdx=P.ClipperBase.Unassigned),i=i.Next}this.m_ActiveEdges=null}};P.ClipperBase.prototype.InsertScanbeam=function(i){if(this.m_Scanbeam===null)this.m_Scanbeam=new P.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=i;else if(i>this.m_Scanbeam.Y){var e=new P.Scanbeam;e.Y=i,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(var t=this.m_Scanbeam;t.Next!==null&&i<=t.Next.Y;)t=t.Next;if(i===t.Y)return;var n=new P.Scanbeam;n.Y=i,n.Next=t.Next,t.Next=n}};P.ClipperBase.prototype.PopScanbeam=function(i){return this.m_Scanbeam===null?(i.v=0,!1):(i.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)};P.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null};P.ClipperBase.prototype.CreateOutRec=function(){var i=new P.OutRec;return i.Idx=P.ClipperBase.Unassigned,i.IsHole=!1,i.IsOpen=!1,i.FirstLeft=null,i.Pts=null,i.BottomPt=null,i.PolyNode=null,this.m_PolyOuts.push(i),i.Idx=this.m_PolyOuts.length-1,i};P.ClipperBase.prototype.DisposeOutRec=function(i){var e=this.m_PolyOuts[i];e.Pts=null,e=null,this.m_PolyOuts[i]=null};P.ClipperBase.prototype.UpdateEdgeIntoAEL=function(i){i.NextInLML===null&&P.Error("UpdateEdgeIntoAEL: invalid call");var e=i.PrevInAEL,t=i.NextInAEL;return i.NextInLML.OutIdx=i.OutIdx,e!==null?e.NextInAEL=i.NextInLML:this.m_ActiveEdges=i.NextInLML,t!==null&&(t.PrevInAEL=i.NextInLML),i.NextInLML.Side=i.Side,i.NextInLML.WindDelta=i.WindDelta,i.NextInLML.WindCnt=i.WindCnt,i.NextInLML.WindCnt2=i.WindCnt2,i=i.NextInLML,i.Curr.X=i.Bot.X,i.Curr.Y=i.Bot.Y,i.PrevInAEL=e,i.NextInAEL=t,P.ClipperBase.IsHorizontal(i)||this.InsertScanbeam(i.Top.Y),i};P.ClipperBase.prototype.SwapPositionsInAEL=function(i,e){if(!(i.NextInAEL===i.PrevInAEL||e.NextInAEL===e.PrevInAEL)){if(i.NextInAEL===e){var t=e.NextInAEL;t!==null&&(t.PrevInAEL=i);var n=i.PrevInAEL;n!==null&&(n.NextInAEL=e),e.PrevInAEL=n,e.NextInAEL=i,i.PrevInAEL=e,i.NextInAEL=t}else if(e.NextInAEL===i){var r=i.NextInAEL;r!==null&&(r.PrevInAEL=e);var o=e.PrevInAEL;o!==null&&(o.NextInAEL=i),i.PrevInAEL=o,i.NextInAEL=e,e.PrevInAEL=i,e.NextInAEL=r}else{var s=i.NextInAEL,a=i.PrevInAEL;i.NextInAEL=e.NextInAEL,i.NextInAEL!==null&&(i.NextInAEL.PrevInAEL=i),i.PrevInAEL=e.PrevInAEL,i.PrevInAEL!==null&&(i.PrevInAEL.NextInAEL=i),e.NextInAEL=s,e.NextInAEL!==null&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=a,e.PrevInAEL!==null&&(e.PrevInAEL.NextInAEL=e)}i.PrevInAEL===null?this.m_ActiveEdges=i:e.PrevInAEL===null&&(this.m_ActiveEdges=e)}};P.ClipperBase.prototype.DeleteFromAEL=function(i){var e=i.PrevInAEL,t=i.NextInAEL;e===null&&t===null&&i!==this.m_ActiveEdges||(e!==null?e.NextInAEL=t:this.m_ActiveEdges=t,t!==null&&(t.PrevInAEL=e),i.NextInAEL=null,i.PrevInAEL=null)};P.Clipper=function(i){typeof i>"u"&&(i=0),this.m_PolyOuts=null,this.m_ClipType=P.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=P.PolyFillType.pftEvenOdd,this.m_SubjFillType=P.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,P.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=P.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&i)!==0,this.StrictlySimple=(2&i)!==0,this.PreserveCollinear=(4&i)!==0,P.use_xyz&&(this.ZFillFunction=null)};P.Clipper.ioReverseSolution=1;P.Clipper.ioStrictlySimple=2;P.Clipper.ioPreserveCollinear=4;P.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),P.ClipperBase.prototype.Clear.call(this))};P.Clipper.prototype.InsertMaxima=function(i){var e=new P.Maxima;if(e.X=i,this.m_Maxima===null)this.m_Maxima=e,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(i<this.m_Maxima.X)e.Next=this.m_Maxima,e.Prev=null,this.m_Maxima=e;else{for(var t=this.m_Maxima;t.Next!==null&&i>=t.Next.X;)t=t.Next;if(i===t.X)return;e.Next=t.Next,e.Prev=t,t.Next!==null&&(t.Next.Prev=e),t.Next=e}};P.Clipper.prototype.Execute=function(){var i=arguments,e=i.length,t=i[1]instanceof P.PolyTree;if(e===4&&!t){var n=i[0],r=i[1],o=i[2],s=i[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&P.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,P.Clear(r),this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=n,this.m_UsingPolyTree=!1;try{var a=this.ExecuteInternal();a&&this.BuildResult(r)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return a}else if(e===4&&t){var n=i[0],l=i[1],o=i[2],s=i[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=n,this.m_UsingPolyTree=!0;try{var a=this.ExecuteInternal();a&&this.BuildResult2(l)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return a}else if(e===2&&!t){var n=i[0],r=i[1];return this.Execute(n,r,P.PolyFillType.pftEvenOdd,P.PolyFillType.pftEvenOdd)}else if(e===2&&t){var n=i[0],l=i[1];return this.Execute(n,l,P.PolyFillType.pftEvenOdd,P.PolyFillType.pftEvenOdd)}};P.Clipper.prototype.FixHoleLinkage=function(i){if(!(i.FirstLeft===null||i.IsHole!==i.FirstLeft.IsHole&&i.FirstLeft.Pts!==null)){for(var e=i.FirstLeft;e!==null&&(e.IsHole===i.IsHole||e.Pts===null);)e=e.FirstLeft;i.FirstLeft=e}};P.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var i={},e={};if(!this.PopScanbeam(i))return!1;for(this.InsertLocalMinimaIntoAEL(i.v);this.PopScanbeam(e)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(e.v))return!1;this.ProcessEdgesAtTopOfScanbeam(e.v),i.v=e.v,this.InsertLocalMinimaIntoAEL(i.v)}var t,n,r;for(n=0,r=this.m_PolyOuts.length;n<r;n++)t=this.m_PolyOuts[n],!(t.Pts===null||t.IsOpen)&&(t.IsHole^this.ReverseSolution)==this.Area$1(t)>0&&this.ReversePolyPtLinks(t.Pts);for(this.JoinCommonEdges(),n=0,r=this.m_PolyOuts.length;n<r;n++)t=this.m_PolyOuts[n],t.Pts!==null&&(t.IsOpen?this.FixupOutPolyline(t):this.FixupOutPolygon(t));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}};P.Clipper.prototype.DisposeAllPolyPts=function(){for(var i=0,e=this.m_PolyOuts.length;i<e;++i)this.DisposeOutRec(i);P.Clear(this.m_PolyOuts)};P.Clipper.prototype.AddJoin=function(i,e,t){var n=new P.Join;n.OutPt1=i,n.OutPt2=e,n.OffPt.X=t.X,n.OffPt.Y=t.Y,P.use_xyz&&(n.OffPt.Z=t.Z),this.m_Joins.push(n)};P.Clipper.prototype.AddGhostJoin=function(i,e){var t=new P.Join;t.OutPt1=i,t.OffPt.X=e.X,t.OffPt.Y=e.Y,P.use_xyz&&(t.OffPt.Z=e.Z),this.m_GhostJoins.push(t)};P.Clipper.prototype.SetZ=function(i,e,t){if(this.ZFillFunction!==null){if(i.Z!==0||this.ZFillFunction===null)return;P.FPoint.op_Equality(i,e.Bot)?i.Z=e.Bot.Z:P.FPoint.op_Equality(i,e.Top)?i.Z=e.Top.Z:P.FPoint.op_Equality(i,t.Bot)?i.Z=t.Bot.Z:P.FPoint.op_Equality(i,t.Top)?i.Z=t.Top.Z:this.ZFillFunction(e.Bot,e.Top,t.Bot,t.Top,i)}};P.Clipper.prototype.InsertLocalMinimaIntoAEL=function(i){for(var e={},t,n;this.PopLocalMinima(i,e);){t=e.v.LeftBound,n=e.v.RightBound;var r=null;if(t===null?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(r=this.AddOutPt(n,n.Bot))):n===null?(this.InsertEdgeIntoAEL(t,null),this.SetWindingCount(t),this.IsContributing(t)&&(r=this.AddOutPt(t,t.Bot)),this.InsertScanbeam(t.Top.Y)):(this.InsertEdgeIntoAEL(t,null),this.InsertEdgeIntoAEL(n,t),this.SetWindingCount(t),n.WindCnt=t.WindCnt,n.WindCnt2=t.WindCnt2,this.IsContributing(t)&&(r=this.AddLocalMinPoly(t,n,t.Bot)),this.InsertScanbeam(t.Top.Y)),n!==null&&(P.ClipperBase.IsHorizontal(n)?(n.NextInLML!==null&&this.InsertScanbeam(n.NextInLML.Top.Y),this.AddEdgeToSEL(n)):this.InsertScanbeam(n.Top.Y)),!(t===null||n===null)){if(r!==null&&P.ClipperBase.IsHorizontal(n)&&this.m_GhostJoins.length>0&&n.WindDelta!==0)for(var o=0,s=this.m_GhostJoins.length;o<s;o++){var a=this.m_GhostJoins[o];this.HorzSegmentsOverlap(a.OutPt1.Pt.X,a.OffPt.X,n.Bot.X,n.Top.X)&&this.AddJoin(a.OutPt1,r,a.OffPt)}if(t.OutIdx>=0&&t.PrevInAEL!==null&&t.PrevInAEL.Curr.X===t.Bot.X&&t.PrevInAEL.OutIdx>=0&&P.ClipperBase.SlopesEqual5(t.PrevInAEL.Curr,t.PrevInAEL.Top,t.Curr,t.Top)&&t.WindDelta!==0&&t.PrevInAEL.WindDelta!==0){var l=this.AddOutPt(t.PrevInAEL,t.Bot);this.AddJoin(r,l,t.Top)}if(t.NextInAEL!==n){if(n.OutIdx>=0&&n.PrevInAEL.OutIdx>=0&&P.ClipperBase.SlopesEqual5(n.PrevInAEL.Curr,n.PrevInAEL.Top,n.Curr,n.Top)&&n.WindDelta!==0&&n.PrevInAEL.WindDelta!==0){var l=this.AddOutPt(n.PrevInAEL,n.Bot);this.AddJoin(r,l,n.Top)}var h=t.NextInAEL;if(h!==null)for(;h!==n;)this.IntersectEdges(n,h,t.Curr),h=h.NextInAEL}}}};P.Clipper.prototype.InsertEdgeIntoAEL=function(i,e){if(this.m_ActiveEdges===null)i.PrevInAEL=null,i.NextInAEL=null,this.m_ActiveEdges=i;else if(e===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,i))i.PrevInAEL=null,i.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=i,this.m_ActiveEdges=i;else{for(e===null&&(e=this.m_ActiveEdges);e.NextInAEL!==null&&!this.E2InsertsBeforeE1(e.NextInAEL,i);)e=e.NextInAEL;i.NextInAEL=e.NextInAEL,e.NextInAEL!==null&&(e.NextInAEL.PrevInAEL=i),i.PrevInAEL=e,e.NextInAEL=i}};P.Clipper.prototype.E2InsertsBeforeE1=function(i,e){return e.Curr.X===i.Curr.X?e.Top.Y>i.Top.Y?e.Top.X<P.Clipper.TopX(i,e.Top.Y):i.Top.X>P.Clipper.TopX(e,i.Top.Y):e.Curr.X<i.Curr.X};P.Clipper.prototype.IsEvenOddFillType=function(i){return i.PolyTyp===P.PolyType.ptSubject?this.m_SubjFillType===P.PolyFillType.pftEvenOdd:this.m_ClipFillType===P.PolyFillType.pftEvenOdd};P.Clipper.prototype.IsEvenOddAltFillType=function(i){return i.PolyTyp===P.PolyType.ptSubject?this.m_ClipFillType===P.PolyFillType.pftEvenOdd:this.m_SubjFillType===P.PolyFillType.pftEvenOdd};P.Clipper.prototype.IsContributing=function(i){var e,t;switch(i.PolyTyp===P.PolyType.ptSubject?(e=this.m_SubjFillType,t=this.m_ClipFillType):(e=this.m_ClipFillType,t=this.m_SubjFillType),e){case P.PolyFillType.pftEvenOdd:if(i.WindDelta===0&&i.WindCnt!==1)return!1;break;case P.PolyFillType.pftNonZero:if(Math.abs(i.WindCnt)!==1)return!1;break;case P.PolyFillType.pftPositive:if(i.WindCnt!==1)return!1;break;default:if(i.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case P.ClipType.ctIntersection:switch(t){case P.PolyFillType.pftEvenOdd:case P.PolyFillType.pftNonZero:return i.WindCnt2!==0;case P.PolyFillType.pftPositive:return i.WindCnt2>0;default:return i.WindCnt2<0}case P.ClipType.ctUnion:switch(t){case P.PolyFillType.pftEvenOdd:case P.PolyFillType.pftNonZero:return i.WindCnt2===0;case P.PolyFillType.pftPositive:return i.WindCnt2<=0;default:return i.WindCnt2>=0}case P.ClipType.ctDifference:if(i.PolyTyp===P.PolyType.ptSubject)switch(t){case P.PolyFillType.pftEvenOdd:case P.PolyFillType.pftNonZero:return i.WindCnt2===0;case P.PolyFillType.pftPositive:return i.WindCnt2<=0;default:return i.WindCnt2>=0}else switch(t){case P.PolyFillType.pftEvenOdd:case P.PolyFillType.pftNonZero:return i.WindCnt2!==0;case P.PolyFillType.pftPositive:return i.WindCnt2>0;default:return i.WindCnt2<0}case P.ClipType.ctXor:if(i.WindDelta===0)switch(t){case P.PolyFillType.pftEvenOdd:case P.PolyFillType.pftNonZero:return i.WindCnt2===0;case P.PolyFillType.pftPositive:return i.WindCnt2<=0;default:return i.WindCnt2>=0}else return!0}return!0};P.Clipper.prototype.SetWindingCount=function(i){for(var e=i.PrevInAEL;e!==null&&(e.PolyTyp!==i.PolyTyp||e.WindDelta===0);)e=e.PrevInAEL;if(e===null){var t=i.PolyTyp===P.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;i.WindDelta===0?i.WindCnt=t===P.PolyFillType.pftNegative?-1:1:i.WindCnt=i.WindDelta,i.WindCnt2=0,e=this.m_ActiveEdges}else if(i.WindDelta===0&&this.m_ClipType!==P.ClipType.ctUnion)i.WindCnt=1,i.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(i)){if(i.WindDelta===0){for(var n=!0,r=e.PrevInAEL;r!==null;)r.PolyTyp===e.PolyTyp&&r.WindDelta!==0&&(n=!n),r=r.PrevInAEL;i.WindCnt=n?0:1}else i.WindCnt=i.WindDelta;i.WindCnt2=e.WindCnt2,e=e.NextInAEL}else e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*i.WindDelta<0?i.WindCnt=e.WindCnt:i.WindCnt=e.WindCnt+i.WindDelta:i.WindCnt=i.WindDelta===0?1:i.WindDelta:i.WindDelta===0?i.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*i.WindDelta<0?i.WindCnt=e.WindCnt:i.WindCnt=e.WindCnt+i.WindDelta,i.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(i))for(;e!==i;)e.WindDelta!==0&&(i.WindCnt2=i.WindCnt2===0?1:0),e=e.NextInAEL;else for(;e!==i;)i.WindCnt2+=e.WindDelta,e=e.NextInAEL};P.Clipper.prototype.AddEdgeToSEL=function(i){this.m_SortedEdges===null?(this.m_SortedEdges=i,i.PrevInSEL=null,i.NextInSEL=null):(i.NextInSEL=this.m_SortedEdges,i.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=i,this.m_SortedEdges=i)};P.Clipper.prototype.PopEdgeFromSEL=function(i){if(i.v=this.m_SortedEdges,i.v===null)return!1;var e=i.v;return this.m_SortedEdges=i.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),e.NextInSEL=null,e.PrevInSEL=null,!0};P.Clipper.prototype.CopyAELToSEL=function(){var i=this.m_ActiveEdges;for(this.m_SortedEdges=i;i!==null;)i.PrevInSEL=i.PrevInAEL,i.NextInSEL=i.NextInAEL,i=i.NextInAEL};P.Clipper.prototype.SwapPositionsInSEL=function(i,e){if(!(i.NextInSEL===null&&i.PrevInSEL===null)&&!(e.NextInSEL===null&&e.PrevInSEL===null)){if(i.NextInSEL===e){var t=e.NextInSEL;t!==null&&(t.PrevInSEL=i);var n=i.PrevInSEL;n!==null&&(n.NextInSEL=e),e.PrevInSEL=n,e.NextInSEL=i,i.PrevInSEL=e,i.NextInSEL=t}else if(e.NextInSEL===i){var t=i.NextInSEL;t!==null&&(t.PrevInSEL=e);var n=e.PrevInSEL;n!==null&&(n.NextInSEL=i),i.PrevInSEL=n,i.NextInSEL=e,e.PrevInSEL=i,e.NextInSEL=t}else{var t=i.NextInSEL,n=i.PrevInSEL;i.NextInSEL=e.NextInSEL,i.NextInSEL!==null&&(i.NextInSEL.PrevInSEL=i),i.PrevInSEL=e.PrevInSEL,i.PrevInSEL!==null&&(i.PrevInSEL.NextInSEL=i),e.NextInSEL=t,e.NextInSEL!==null&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=n,e.PrevInSEL!==null&&(e.PrevInSEL.NextInSEL=e)}i.PrevInSEL===null?this.m_SortedEdges=i:e.PrevInSEL===null&&(this.m_SortedEdges=e)}};P.Clipper.prototype.AddLocalMaxPoly=function(i,e,t){this.AddOutPt(i,t),e.WindDelta===0&&this.AddOutPt(e,t),i.OutIdx===e.OutIdx?(i.OutIdx=-1,e.OutIdx=-1):i.OutIdx<e.OutIdx?this.AppendPolygon(i,e):this.AppendPolygon(e,i)};P.Clipper.prototype.AddLocalMinPoly=function(i,e,t){var n,r,o;if(P.ClipperBase.IsHorizontal(e)||i.Dx>e.Dx?(n=this.AddOutPt(i,t),e.OutIdx=i.OutIdx,i.Side=P.EdgeSide.esLeft,e.Side=P.EdgeSide.esRight,r=i,r.PrevInAEL===e?o=e.PrevInAEL:o=r.PrevInAEL):(n=this.AddOutPt(e,t),i.OutIdx=e.OutIdx,i.Side=P.EdgeSide.esRight,e.Side=P.EdgeSide.esLeft,r=e,r.PrevInAEL===i?o=i.PrevInAEL:o=r.PrevInAEL),o!==null&&o.OutIdx>=0&&o.Top.Y<t.Y&&r.Top.Y<t.Y){var s=P.Clipper.TopX(o,t.Y),a=P.Clipper.TopX(r,t.Y);if(s===a&&r.WindDelta!==0&&o.WindDelta!==0&&P.ClipperBase.SlopesEqual5(new P.FPoint2(s,t.Y),o.Top,new P.FPoint2(a,t.Y),r.Top)){var l=this.AddOutPt(o,t);this.AddJoin(n,l,r.Top)}}return n};P.Clipper.prototype.AddOutPt=function(i,e){if(i.OutIdx<0){var t=this.CreateOutRec();t.IsOpen=i.WindDelta===0;var n=new P.OutPt;return t.Pts=n,n.Idx=t.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,P.use_xyz&&(n.Pt.Z=e.Z),n.Next=n,n.Prev=n,t.IsOpen||this.SetHoleState(i,t),i.OutIdx=t.Idx,n}else{var t=this.m_PolyOuts[i.OutIdx],r=t.Pts,o=i.Side===P.EdgeSide.esLeft;if(o&&P.FPoint.op_Equality(e,r.Pt))return r;if(!o&&P.FPoint.op_Equality(e,r.Prev.Pt))return r.Prev;var n=new P.OutPt;return n.Idx=t.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,P.use_xyz&&(n.Pt.Z=e.Z),n.Next=r,n.Prev=r.Prev,n.Prev.Next=n,r.Prev=n,o&&(t.Pts=n),n}};P.Clipper.prototype.GetLastOutPt=function(i){var e=this.m_PolyOuts[i.OutIdx];return i.Side===P.EdgeSide.esLeft?e.Pts:e.Pts.Prev};P.Clipper.prototype.SwapPoints=function(i,e){var t=new P.FPoint1(i.Value);i.Value.X=e.Value.X,i.Value.Y=e.Value.Y,P.use_xyz&&(i.Value.Z=e.Value.Z),e.Value.X=t.X,e.Value.Y=t.Y,P.use_xyz&&(e.Value.Z=t.Z)};P.Clipper.prototype.HorzSegmentsOverlap=function(i,e,t,n){var r;return i>e&&(r=i,i=e,e=r),t>n&&(r=t,t=n,n=r),i<n&&t<e};P.Clipper.prototype.SetHoleState=function(i,e){for(var t=i.PrevInAEL,n=null;t!==null;)t.OutIdx>=0&&t.WindDelta!==0&&(n===null?n=t:n.OutIdx===t.OutIdx&&(n=null)),t=t.PrevInAEL;n===null?(e.FirstLeft=null,e.IsHole=!1):(e.FirstLeft=this.m_PolyOuts[n.OutIdx],e.IsHole=!e.FirstLeft.IsHole)};P.Clipper.prototype.GetDx=function(i,e){return i.Y===e.Y?P.ClipperBase.horizontal:(e.X-i.X)/(e.Y-i.Y)};P.Clipper.prototype.FirstIsBottomPt=function(i,e){for(var t=i.Prev;P.FPoint.op_Equality(t.Pt,i.Pt)&&t!==i;)t=t.Prev;var n=Math.abs(this.GetDx(i.Pt,t.Pt));for(t=i.Next;P.FPoint.op_Equality(t.Pt,i.Pt)&&t!==i;)t=t.Next;var r=Math.abs(this.GetDx(i.Pt,t.Pt));for(t=e.Prev;P.FPoint.op_Equality(t.Pt,e.Pt)&&t!==e;)t=t.Prev;var o=Math.abs(this.GetDx(e.Pt,t.Pt));for(t=e.Next;P.FPoint.op_Equality(t.Pt,e.Pt)&&t!==e;)t=t.Next;var s=Math.abs(this.GetDx(e.Pt,t.Pt));return Math.max(n,r)===Math.max(o,s)&&Math.min(n,r)===Math.min(o,s)?this.Area(i)>0:n>=o&&n>=s||r>=o&&r>=s};P.Clipper.prototype.GetBottomPt=function(i){for(var e=null,t=i.Next;t!==i;)t.Pt.Y>i.Pt.Y?(i=t,e=null):t.Pt.Y===i.Pt.Y&&t.Pt.X<=i.Pt.X&&(t.Pt.X<i.Pt.X?(e=null,i=t):t.Next!==i&&t.Prev!==i&&(e=t)),t=t.Next;if(e!==null)for(;e!==t;)for(this.FirstIsBottomPt(t,e)||(i=e),e=e.Next;P.FPoint.op_Inequality(e.Pt,i.Pt);)e=e.Next;return i};P.Clipper.prototype.GetLowermostRec=function(i,e){i.BottomPt===null&&(i.BottomPt=this.GetBottomPt(i.Pts)),e.BottomPt===null&&(e.BottomPt=this.GetBottomPt(e.Pts));var t=i.BottomPt,n=e.BottomPt;return t.Pt.Y>n.Pt.Y?i:t.Pt.Y<n.Pt.Y?e:t.Pt.X<n.Pt.X?i:t.Pt.X>n.Pt.X||t.Next===t?e:n.Next===n||this.FirstIsBottomPt(t,n)?i:e};P.Clipper.prototype.OutRec1RightOfOutRec2=function(i,e){do if(i=i.FirstLeft,i===e)return!0;while(i!==null);return!1};P.Clipper.prototype.GetOutRec=function(i){for(var e=this.m_PolyOuts[i];e!==this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e};P.Clipper.prototype.AppendPolygon=function(i,e){var t=this.m_PolyOuts[i.OutIdx],n=this.m_PolyOuts[e.OutIdx],r;this.OutRec1RightOfOutRec2(t,n)?r=n:this.OutRec1RightOfOutRec2(n,t)?r=t:r=this.GetLowermostRec(t,n);var o=t.Pts,s=o.Prev,a=n.Pts,l=a.Prev;i.Side===P.EdgeSide.esLeft?e.Side===P.EdgeSide.esLeft?(this.ReversePolyPtLinks(a),a.Next=o,o.Prev=a,s.Next=l,l.Prev=s,t.Pts=l):(l.Next=o,o.Prev=l,a.Prev=s,s.Next=a,t.Pts=a):e.Side===P.EdgeSide.esRight?(this.ReversePolyPtLinks(a),s.Next=l,l.Prev=s,a.Next=o,o.Prev=a):(s.Next=a,a.Prev=s,o.Prev=l,l.Next=o),t.BottomPt=null,r===n&&(n.FirstLeft!==t&&(t.FirstLeft=n.FirstLeft),t.IsHole=n.IsHole),n.Pts=null,n.BottomPt=null,n.FirstLeft=t;var h=i.OutIdx,c=e.OutIdx;i.OutIdx=-1,e.OutIdx=-1;for(var p=this.m_ActiveEdges;p!==null;){if(p.OutIdx===c){p.OutIdx=h,p.Side=i.Side;break}p=p.NextInAEL}n.Idx=t.Idx};P.Clipper.prototype.ReversePolyPtLinks=function(i){if(i!==null){var e,t;e=i;do t=e.Next,e.Next=e.Prev,e.Prev=t,e=t;while(e!==i)}};P.Clipper.SwapSides=function(i,e){var t=i.Side;i.Side=e.Side,e.Side=t};P.Clipper.SwapPolyIndexes=function(i,e){var t=i.OutIdx;i.OutIdx=e.OutIdx,e.OutIdx=t};P.Clipper.prototype.IntersectEdges=function(i,e,t){var n=i.OutIdx>=0,r=e.OutIdx>=0;if(P.use_xyz&&this.SetZ(t,i,e),P.use_lines&&(i.WindDelta===0||e.WindDelta===0)){if(i.WindDelta===0&&e.WindDelta===0)return;i.PolyTyp===e.PolyTyp&&i.WindDelta!==e.WindDelta&&this.m_ClipType===P.ClipType.ctUnion?i.WindDelta===0?r&&(this.AddOutPt(i,t),n&&(i.OutIdx=-1)):n&&(this.AddOutPt(e,t),r&&(e.OutIdx=-1)):i.PolyTyp!==e.PolyTyp&&(i.WindDelta===0&&Math.abs(e.WindCnt)===1&&(this.m_ClipType!==P.ClipType.ctUnion||e.WindCnt2===0)?(this.AddOutPt(i,t),n&&(i.OutIdx=-1)):e.WindDelta===0&&Math.abs(i.WindCnt)===1&&(this.m_ClipType!==P.ClipType.ctUnion||i.WindCnt2===0)&&(this.AddOutPt(e,t),r&&(e.OutIdx=-1)));return}if(i.PolyTyp===e.PolyTyp)if(this.IsEvenOddFillType(i)){var o=i.WindCnt;i.WindCnt=e.WindCnt,e.WindCnt=o}else i.WindCnt+e.WindDelta===0?i.WindCnt=-i.WindCnt:i.WindCnt+=e.WindDelta,e.WindCnt-i.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt-=i.WindDelta;else this.IsEvenOddFillType(e)?i.WindCnt2=i.WindCnt2===0?1:0:i.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(i)?e.WindCnt2=e.WindCnt2===0?1:0:e.WindCnt2-=i.WindDelta;var s,a,l,h;i.PolyTyp===P.PolyType.ptSubject?(s=this.m_SubjFillType,l=this.m_ClipFillType):(s=this.m_ClipFillType,l=this.m_SubjFillType),e.PolyTyp===P.PolyType.ptSubject?(a=this.m_SubjFillType,h=this.m_ClipFillType):(a=this.m_ClipFillType,h=this.m_SubjFillType);var c,p;switch(s){case P.PolyFillType.pftPositive:c=i.WindCnt;break;case P.PolyFillType.pftNegative:c=-i.WindCnt;break;default:c=Math.abs(i.WindCnt);break}switch(a){case P.PolyFillType.pftPositive:p=e.WindCnt;break;case P.PolyFillType.pftNegative:p=-e.WindCnt;break;default:p=Math.abs(e.WindCnt);break}if(n&&r)c!==0&&c!==1||p!==0&&p!==1||i.PolyTyp!==e.PolyTyp&&this.m_ClipType!==P.ClipType.ctXor?this.AddLocalMaxPoly(i,e,t):(this.AddOutPt(i,t),this.AddOutPt(e,t),P.Clipper.SwapSides(i,e),P.Clipper.SwapPolyIndexes(i,e));else if(n)(p===0||p===1)&&(this.AddOutPt(i,t),P.Clipper.SwapSides(i,e),P.Clipper.SwapPolyIndexes(i,e));else if(r)(c===0||c===1)&&(this.AddOutPt(e,t),P.Clipper.SwapSides(i,e),P.Clipper.SwapPolyIndexes(i,e));else if((c===0||c===1)&&(p===0||p===1)){var d,v;switch(l){case P.PolyFillType.pftPositive:d=i.WindCnt2;break;case P.PolyFillType.pftNegative:d=-i.WindCnt2;break;default:d=Math.abs(i.WindCnt2);break}switch(h){case P.PolyFillType.pftPositive:v=e.WindCnt2;break;case P.PolyFillType.pftNegative:v=-e.WindCnt2;break;default:v=Math.abs(e.WindCnt2);break}if(i.PolyTyp!==e.PolyTyp)this.AddLocalMinPoly(i,e,t);else if(c===1&&p===1)switch(this.m_ClipType){case P.ClipType.ctIntersection:d>0&&v>0&&this.AddLocalMinPoly(i,e,t);break;case P.ClipType.ctUnion:d<=0&&v<=0&&this.AddLocalMinPoly(i,e,t);break;case P.ClipType.ctDifference:(i.PolyTyp===P.PolyType.ptClip&&d>0&&v>0||i.PolyTyp===P.PolyType.ptSubject&&d<=0&&v<=0)&&this.AddLocalMinPoly(i,e,t);break;case P.ClipType.ctXor:this.AddLocalMinPoly(i,e,t);break}else P.Clipper.SwapSides(i,e)}};P.Clipper.prototype.DeleteFromSEL=function(i){var e=i.PrevInSEL,t=i.NextInSEL;e===null&&t===null&&i!==this.m_SortedEdges||(e!==null?e.NextInSEL=t:this.m_SortedEdges=t,t!==null&&(t.PrevInSEL=e),i.NextInSEL=null,i.PrevInSEL=null)};P.Clipper.prototype.ProcessHorizontals=function(){for(var i={};this.PopEdgeFromSEL(i);)this.ProcessHorizontal(i.v)};P.Clipper.prototype.GetHorzDirection=function(i,e){i.Bot.X<i.Top.X?(e.Left=i.Bot.X,e.Right=i.Top.X,e.Dir=P.Direction.dLeftToRight):(e.Left=i.Top.X,e.Right=i.Bot.X,e.Dir=P.Direction.dRightToLeft)};P.Clipper.prototype.ProcessHorizontal=function(i){var e={Dir:null,Left:null,Right:null};this.GetHorzDirection(i,e);for(var t=e.Dir,n=e.Left,r=e.Right,o=i.WindDelta===0,s=i,a=null;s.NextInLML!==null&&P.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;s.NextInLML===null&&(a=this.GetMaximaPair(s));var l=this.m_Maxima;if(l!==null)if(t===P.Direction.dLeftToRight){for(;l!==null&&l.X<=i.Bot.X;)l=l.Next;l!==null&&l.X>=s.Top.X&&(l=null)}else{for(;l.Next!==null&&l.Next.X<i.Bot.X;)l=l.Next;l.X<=s.Top.X&&(l=null)}for(var h=null;;){for(var c=i===s,p=this.GetNextInAEL(i,t);p!==null;){if(l!==null)if(t===P.Direction.dLeftToRight)for(;l!==null&&l.X<p.Curr.X;)i.OutIdx>=0&&!o&&this.AddOutPt(i,new P.FPoint2(l.X,i.Bot.Y)),l=l.Next;else for(;l!==null&&l.X>p.Curr.X;)i.OutIdx>=0&&!o&&this.AddOutPt(i,new P.FPoint2(l.X,i.Bot.Y)),l=l.Prev;if(t===P.Direction.dLeftToRight&&p.Curr.X>r||t===P.Direction.dRightToLeft&&p.Curr.X<n||p.Curr.X===i.Top.X&&i.NextInLML!==null&&p.Dx<i.NextInLML.Dx)break;if(i.OutIdx>=0&&!o){P.use_xyz&&(t===P.Direction.dLeftToRight?this.SetZ(p.Curr,i,p):this.SetZ(p.Curr,p,i)),h=this.AddOutPt(i,p.Curr);for(var d=this.m_SortedEdges;d!==null;){if(d.OutIdx>=0&&this.HorzSegmentsOverlap(i.Bot.X,i.Top.X,d.Bot.X,d.Top.X)){var v=this.GetLastOutPt(d);this.AddJoin(v,h,d.Top)}d=d.NextInSEL}this.AddGhostJoin(h,i.Bot)}if(p===a&&c){i.OutIdx>=0&&this.AddLocalMaxPoly(i,a,i.Top),this.DeleteFromAEL(i),this.DeleteFromAEL(a);return}if(t===P.Direction.dLeftToRight){var D=new P.FPoint2(p.Curr.X,i.Curr.Y);this.IntersectEdges(i,p,D)}else{var D=new P.FPoint2(p.Curr.X,i.Curr.Y);this.IntersectEdges(p,i,D)}var m=this.GetNextInAEL(p,t);this.SwapPositionsInAEL(i,p),p=m}if(i.NextInLML===null||!P.ClipperBase.IsHorizontal(i.NextInLML))break;i=this.UpdateEdgeIntoAEL(i),i.OutIdx>=0&&this.AddOutPt(i,i.Bot),e={Dir:t,Left:n,Right:r},this.GetHorzDirection(i,e),t=e.Dir,n=e.Left,r=e.Right}if(i.OutIdx>=0&&h===null){h=this.GetLastOutPt(i);for(var d=this.m_SortedEdges;d!==null;){if(d.OutIdx>=0&&this.HorzSegmentsOverlap(i.Bot.X,i.Top.X,d.Bot.X,d.Top.X)){var v=this.GetLastOutPt(d);this.AddJoin(v,h,d.Top)}d=d.NextInSEL}this.AddGhostJoin(h,i.Top)}if(i.NextInLML!==null)if(i.OutIdx>=0){if(h=this.AddOutPt(i,i.Top),i=this.UpdateEdgeIntoAEL(i),i.WindDelta===0)return;var y=i.PrevInAEL,m=i.NextInAEL;if(y!==null&&y.Curr.X===i.Bot.X&&y.Curr.Y===i.Bot.Y&&y.WindDelta===0&&y.OutIdx>=0&&y.Curr.Y>y.Top.Y&&P.ClipperBase.SlopesEqual3(i,y)){var v=this.AddOutPt(y,i.Bot);this.AddJoin(h,v,i.Top)}else if(m!==null&&m.Curr.X===i.Bot.X&&m.Curr.Y===i.Bot.Y&&m.WindDelta!==0&&m.OutIdx>=0&&m.Curr.Y>m.Top.Y&&P.ClipperBase.SlopesEqual3(i,m)){var v=this.AddOutPt(m,i.Bot);this.AddJoin(h,v,i.Top)}}else i=this.UpdateEdgeIntoAEL(i);else i.OutIdx>=0&&this.AddOutPt(i,i.Top),this.DeleteFromAEL(i)};P.Clipper.prototype.GetNextInAEL=function(i,e){return e===P.Direction.dLeftToRight?i.NextInAEL:i.PrevInAEL};P.Clipper.prototype.IsMinima=function(i){return i!==null&&i.Prev.NextInLML!==i&&i.Next.NextInLML!==i};P.Clipper.prototype.IsMaxima=function(i,e){return i!==null&&i.Top.Y===e&&i.NextInLML===null};P.Clipper.prototype.IsIntermediate=function(i,e){return i.Top.Y===e&&i.NextInLML!==null};P.Clipper.prototype.GetMaximaPair=function(i){return P.FPoint.op_Equality(i.Next.Top,i.Top)&&i.Next.NextInLML===null?i.Next:P.FPoint.op_Equality(i.Prev.Top,i.Top)&&i.Prev.NextInLML===null?i.Prev:null};P.Clipper.prototype.GetMaximaPairEx=function(i){var e=this.GetMaximaPair(i);return e===null||e.OutIdx===P.ClipperBase.Skip||e.NextInAEL===e.PrevInAEL&&!P.ClipperBase.IsHorizontal(e)?null:e};P.Clipper.prototype.ProcessIntersections=function(i){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(i),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,P.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0};P.Clipper.prototype.BuildIntersectList=function(i){if(this.m_ActiveEdges!==null){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;e!==null;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e.Curr.X=P.Clipper.TopX(e,i),e=e.NextInAEL;for(var t=!0;t&&this.m_SortedEdges!==null;){for(t=!1,e=this.m_SortedEdges;e.NextInSEL!==null;){var n=e.NextInSEL,r=new P.FPoint0;if(e.Curr.X>n.Curr.X){this.IntersectPoint(e,n,r),r.Y<i&&(r=new P.FPoint2(P.Clipper.TopX(e,i),i));var o=new P.IntersectNode;o.Edge1=e,o.Edge2=n,o.Pt.X=r.X,o.Pt.Y=r.Y,P.use_xyz&&(o.Pt.Z=r.Z),this.m_IntersectList.push(o),this.SwapPositionsInSEL(e,n),t=!0}else e=n}if(e.PrevInSEL!==null)e.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}};P.Clipper.prototype.EdgesAdjacent=function(i){return i.Edge1.NextInSEL===i.Edge2||i.Edge1.PrevInSEL===i.Edge2};P.Clipper.IntersectNodeSort=function(i,e){return e.Pt.Y-i.Pt.Y};P.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var i=this.m_IntersectList.length,e=0;e<i;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var t=e+1;t<i&&!this.EdgesAdjacent(this.m_IntersectList[t]);)t++;if(t===i)return!1;var n=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[t],this.m_IntersectList[t]=n}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0};P.Clipper.prototype.ProcessIntersectList=function(){for(var i=0,e=this.m_IntersectList.length;i<e;i++){var t=this.m_IntersectList[i];this.IntersectEdges(t.Edge1,t.Edge2,t.Pt),this.SwapPositionsInAEL(t.Edge1,t.Edge2)}this.m_IntersectList.length=0};P.Clipper.TopX=function(i,e){return e===i.Top.Y?i.Top.X:i.Bot.X+i.Dx*(e-i.Bot.Y)};P.Clipper.prototype.IntersectPoint=function(i,e,t){t.X=0,t.Y=0;var n,r;if(i.Dx===e.Dx){t.Y=i.Curr.Y,t.X=P.Clipper.TopX(i,t.Y);return}if(i.Delta.X===0)t.X=i.Bot.X,P.ClipperBase.IsHorizontal(e)?t.Y=e.Bot.Y:(r=e.Bot.Y-e.Bot.X/e.Dx,t.Y=t.X/e.Dx+r);else if(e.Delta.X===0)t.X=e.Bot.X,P.ClipperBase.IsHorizontal(i)?t.Y=i.Bot.Y:(n=i.Bot.Y-i.Bot.X/i.Dx,t.Y=t.X/i.Dx+n);else{n=i.Bot.X-i.Bot.Y*i.Dx,r=e.Bot.X-e.Bot.Y*e.Dx;var o=(r-n)/(i.Dx-e.Dx);t.Y=o,Math.abs(i.Dx)<Math.abs(e.Dx)?t.X=i.Dx*o+n:t.X=e.Dx*o+r}if(t.Y<i.Top.Y||t.Y<e.Top.Y){if(i.Top.Y>e.Top.Y)return t.Y=i.Top.Y,t.X=P.Clipper.TopX(e,i.Top.Y),t.X<i.Top.X;t.Y=e.Top.Y,Math.abs(i.Dx)<Math.abs(e.Dx)?t.X=P.Clipper.TopX(i,t.Y):t.X=P.Clipper.TopX(e,t.Y)}t.Y>i.Curr.Y&&(t.Y=i.Curr.Y,Math.abs(i.Dx)>Math.abs(e.Dx)?t.X=P.Clipper.TopX(e,t.Y):t.X=P.Clipper.TopX(i,t.Y))};P.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(i){for(var e=this.m_ActiveEdges;e!==null;){var t=this.IsMaxima(e,i);if(t){var n=this.GetMaximaPairEx(e);t=n===null||!P.ClipperBase.IsHorizontal(n)}if(t){this.StrictlySimple&&this.InsertMaxima(e.Top.X);var r=e.PrevInAEL;this.DoMaxima(e),r===null?e=this.m_ActiveEdges:e=r.NextInAEL}else{if(this.IsIntermediate(e,i)&&P.ClipperBase.IsHorizontal(e.NextInLML)?(e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=P.Clipper.TopX(e,i),e.Curr.Y=i),P.use_xyz&&(e.Top.Y===i?e.Curr.Z=e.Top.Z:e.Bot.Y===i?e.Curr.Z=e.Bot.Z:e.Curr.Z=0),this.StrictlySimple){var r=e.PrevInAEL;if(e.OutIdx>=0&&e.WindDelta!==0&&r!==null&&r.OutIdx>=0&&r.Curr.X===e.Curr.X&&r.WindDelta!==0){var o=new P.FPoint1(e.Curr);P.use_xyz&&this.SetZ(o,r,e);var s=this.AddOutPt(r,o),a=this.AddOutPt(e,o);this.AddJoin(s,a,o)}}e=e.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,e=this.m_ActiveEdges;e!==null;){if(this.IsIntermediate(e,i)){var s=null;e.OutIdx>=0&&(s=this.AddOutPt(e,e.Top)),e=this.UpdateEdgeIntoAEL(e);var r=e.PrevInAEL,l=e.NextInAEL;if(r!==null&&r.Curr.X===e.Bot.X&&r.Curr.Y===e.Bot.Y&&s!==null&&r.OutIdx>=0&&r.Curr.Y===r.Top.Y&&P.ClipperBase.SlopesEqual5(e.Curr,e.Top,r.Curr,r.Top)&&e.WindDelta!==0&&r.WindDelta!==0){var a=this.AddOutPt(ePrev2,e.Bot);this.AddJoin(s,a,e.Top)}else if(l!==null&&l.Curr.X===e.Bot.X&&l.Curr.Y===e.Bot.Y&&s!==null&&l.OutIdx>=0&&l.Curr.Y===l.Top.Y&&P.ClipperBase.SlopesEqual5(e.Curr,e.Top,l.Curr,l.Top)&&e.WindDelta!==0&&l.WindDelta!==0){var a=this.AddOutPt(l,e.Bot);this.AddJoin(s,a,e.Top)}}e=e.NextInAEL}};P.Clipper.prototype.DoMaxima=function(i){var e=this.GetMaximaPairEx(i);if(e===null){i.OutIdx>=0&&this.AddOutPt(i,i.Top),this.DeleteFromAEL(i);return}for(var t=i.NextInAEL;t!==null&&t!==e;)this.IntersectEdges(i,t,i.Top),this.SwapPositionsInAEL(i,t),t=i.NextInAEL;i.OutIdx===-1&&e.OutIdx===-1?(this.DeleteFromAEL(i),this.DeleteFromAEL(e)):i.OutIdx>=0&&e.OutIdx>=0?(i.OutIdx>=0&&this.AddLocalMaxPoly(i,e,i.Top),this.DeleteFromAEL(i),this.DeleteFromAEL(e)):P.use_lines&&i.WindDelta===0?(i.OutIdx>=0&&(this.AddOutPt(i,i.Top),i.OutIdx=P.ClipperBase.Unassigned),this.DeleteFromAEL(i),e.OutIdx>=0&&(this.AddOutPt(e,i.Top),e.OutIdx=P.ClipperBase.Unassigned),this.DeleteFromAEL(e)):P.Error("DoMaxima error")};P.Clipper.ReversePaths=function(i){for(var e=0,t=i.length;e<t;e++)i[e].reverse()};P.Clipper.Orientation=function(i){return P.Clipper.Area(i)>=0};P.Clipper.prototype.PointCount=function(i){if(i===null)return 0;var e=0,t=i;do e++,t=t.Next;while(t!==i);return e};P.Clipper.prototype.BuildResult=function(i){P.Clear(i);for(var e=0,t=this.m_PolyOuts.length;e<t;e++){var n=this.m_PolyOuts[e];if(n.Pts!==null){var r=n.Pts.Prev,o=this.PointCount(r);if(!(o<2)){for(var s=new Array(o),a=0;a<o;a++)s[a]=r.Pt,r=r.Prev;i.push(s)}}}};P.Clipper.prototype.BuildResult2=function(i){i.Clear();for(var e=0,t=this.m_PolyOuts.length;e<t;e++){var n=this.m_PolyOuts[e],r=this.PointCount(n.Pts);if(!(n.IsOpen&&r<2||!n.IsOpen&&r<3)){this.FixHoleLinkage(n);var o=new P.PolyNode;i.m_AllPolys.push(o),n.PolyNode=o,o.m_polygon.length=r;for(var s=n.Pts.Prev,a=0;a<r;a++)o.m_polygon[a]=s.Pt,s=s.Prev}}for(var e=0,t=this.m_PolyOuts.length;e<t;e++){var n=this.m_PolyOuts[e];n.PolyNode!==null&&(n.IsOpen?(n.PolyNode.IsOpen=!0,i.AddChild(n.PolyNode)):n.FirstLeft!==null&&n.FirstLeft.PolyNode!==null?n.FirstLeft.PolyNode.AddChild(n.PolyNode):i.AddChild(n.PolyNode))}};P.Clipper.prototype.FixupOutPolyline=function(i){for(var e=i.Pts,t=e.Prev;e!==t;)if(e=e.Next,P.FPoint.op_Equality(e.Pt,e.Prev.Pt)){e===t&&(t=e.Prev);var n=e.Prev;n.Next=e.Next,e.Next.Prev=n,e=n}e===e.Prev&&(i.Pts=null)};P.Clipper.prototype.FixupOutPolygon=function(i){var e=null;i.BottomPt=null;for(var t=i.Pts,n=this.PreserveCollinear||this.StrictlySimple;;){if(t.Prev===t||t.Prev===t.Next){i.Pts=null;return}if(P.FPoint.op_Equality(t.Pt,t.Next.Pt)||P.FPoint.op_Equality(t.Pt,t.Prev.Pt)||P.ClipperBase.SlopesEqual4(t.Prev.Pt,t.Pt,t.Next.Pt)&&(!n||!this.Pt2IsBetweenPt1AndPt3(t.Prev.Pt,t.Pt,t.Next.Pt)))e=null,t.Prev.Next=t.Next,t.Next.Prev=t.Prev,t=t.Prev;else{if(t===e)break;e===null&&(e=t),t=t.Next}}i.Pts=t};P.Clipper.prototype.DupOutPt=function(i,e){var t=new P.OutPt;return t.Pt.X=i.Pt.X,t.Pt.Y=i.Pt.Y,P.use_xyz&&(t.Pt.Z=i.Pt.Z),t.Idx=i.Idx,e?(t.Next=i.Next,t.Prev=i,i.Next.Prev=t,i.Next=t):(t.Prev=i.Prev,t.Next=i,i.Prev.Next=t,i.Prev=t),t};P.Clipper.prototype.GetOverlap=function(i,e,t,n,r){return i<e?t<n?(r.Left=Math.max(i,t),r.Right=Math.min(e,n)):(r.Left=Math.max(i,n),r.Right=Math.min(e,t)):t<n?(r.Left=Math.max(e,t),r.Right=Math.min(i,n)):(r.Left=Math.max(e,n),r.Right=Math.min(i,t)),r.Left<r.Right};P.Clipper.prototype.JoinHorz=function(i,e,t,n,r,o){var s=i.Pt.X>e.Pt.X?P.Direction.dRightToLeft:P.Direction.dLeftToRight,a=t.Pt.X>n.Pt.X?P.Direction.dRightToLeft:P.Direction.dLeftToRight;if(s===a)return!1;if(s===P.Direction.dLeftToRight){for(;i.Next.Pt.X<=r.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y===r.Y;)i=i.Next;o&&i.Pt.X!==r.X&&(i=i.Next),e=this.DupOutPt(i,!o),P.FPoint.op_Inequality(e.Pt,r)&&(i=e,i.Pt.X=r.X,i.Pt.Y=r.Y,P.use_xyz&&(i.Pt.Z=r.Z),e=this.DupOutPt(i,!o))}else{for(;i.Next.Pt.X>=r.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y===r.Y;)i=i.Next;!o&&i.Pt.X!==r.X&&(i=i.Next),e=this.DupOutPt(i,o),P.FPoint.op_Inequality(e.Pt,r)&&(i=e,i.Pt.X=r.X,i.Pt.Y=r.Y,P.use_xyz&&(i.Pt.Z=r.Z),e=this.DupOutPt(i,o))}if(a===P.Direction.dLeftToRight){for(;t.Next.Pt.X<=r.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y===r.Y;)t=t.Next;o&&t.Pt.X!==r.X&&(t=t.Next),n=this.DupOutPt(t,!o),P.FPoint.op_Inequality(n.Pt,r)&&(t=n,t.Pt.X=r.X,t.Pt.Y=r.Y,P.use_xyz&&(t.Pt.Z=r.Z),n=this.DupOutPt(t,!o))}else{for(;t.Next.Pt.X>=r.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y===r.Y;)t=t.Next;!o&&t.Pt.X!==r.X&&(t=t.Next),n=this.DupOutPt(t,o),P.FPoint.op_Inequality(n.Pt,r)&&(t=n,t.Pt.X=r.X,t.Pt.Y=r.Y,P.use_xyz&&(t.Pt.Z=r.Z),n=this.DupOutPt(t,o))}return s===P.Direction.dLeftToRight===o?(i.Prev=t,t.Next=i,e.Next=n,n.Prev=e):(i.Next=t,t.Prev=i,e.Prev=n,n.Next=e),!0};P.Clipper.prototype.JoinPoints=function(i,e,t){var n=i.OutPt1,r=new P.OutPt,o=i.OutPt2,s=new P.OutPt,a=i.OutPt1.Pt.Y===i.OffPt.Y;if(a&&P.FPoint.op_Equality(i.OffPt,i.OutPt1.Pt)&&P.FPoint.op_Equality(i.OffPt,i.OutPt2.Pt)){if(e!==t)return!1;for(r=i.OutPt1.Next;r!==n&&P.FPoint.op_Equality(r.Pt,i.OffPt);)r=r.Next;var l=r.Pt.Y>i.OffPt.Y;for(s=i.OutPt2.Next;s!==o&&P.FPoint.op_Equality(s.Pt,i.OffPt);)s=s.Next;var h=s.Pt.Y>i.OffPt.Y;return l===h?!1:l?(r=this.DupOutPt(n,!1),s=this.DupOutPt(o,!0),n.Prev=o,o.Next=n,r.Next=s,s.Prev=r,i.OutPt1=n,i.OutPt2=r,!0):(r=this.DupOutPt(n,!0),s=this.DupOutPt(o,!1),n.Next=o,o.Prev=n,r.Prev=s,s.Next=r,i.OutPt1=n,i.OutPt2=r,!0)}else if(a){for(r=n;n.Prev.Pt.Y===n.Pt.Y&&n.Prev!==r&&n.Prev!==o;)n=n.Prev;for(;r.Next.Pt.Y===r.Pt.Y&&r.Next!==n&&r.Next!==o;)r=r.Next;if(r.Next===n||r.Next===o)return!1;for(s=o;o.Prev.Pt.Y===o.Pt.Y&&o.Prev!==s&&o.Prev!==r;)o=o.Prev;for(;s.Next.Pt.Y===s.Pt.Y&&s.Next!==o&&s.Next!==n;)s=s.Next;if(s.Next===o||s.Next===n)return!1;var c={Left:null,Right:null};if(!this.GetOverlap(n.Pt.X,r.Pt.X,o.Pt.X,s.Pt.X,c))return!1;var p=c.Left,d=c.Right,v=new P.FPoint0,D;return n.Pt.X>=p&&n.Pt.X<=d?(v.X=n.Pt.X,v.Y=n.Pt.Y,P.use_xyz&&(v.Z=n.Pt.Z),D=n.Pt.X>r.Pt.X):o.Pt.X>=p&&o.Pt.X<=d?(v.X=o.Pt.X,v.Y=o.Pt.Y,P.use_xyz&&(v.Z=o.Pt.Z),D=o.Pt.X>s.Pt.X):r.Pt.X>=p&&r.Pt.X<=d?(v.X=r.Pt.X,v.Y=r.Pt.Y,P.use_xyz&&(v.Z=r.Pt.Z),D=r.Pt.X>n.Pt.X):(v.X=s.Pt.X,v.Y=s.Pt.Y,P.use_xyz&&(v.Z=s.Pt.Z),D=s.Pt.X>o.Pt.X),i.OutPt1=n,i.OutPt2=o,this.JoinHorz(n,r,o,s,v,D)}else{for(r=n.Next;P.FPoint.op_Equality(r.Pt,n.Pt)&&r!==n;)r=r.Next;var m=r.Pt.Y>n.Pt.Y||!P.ClipperBase.SlopesEqual4(n.Pt,r.Pt,i.OffPt);if(m){for(r=n.Prev;P.FPoint.op_Equality(r.Pt,n.Pt)&&r!==n;)r=r.Prev;if(r.Pt.Y>n.Pt.Y||!P.ClipperBase.SlopesEqual4(n.Pt,r.Pt,i.OffPt))return!1}for(s=o.Next;P.FPoint.op_Equality(s.Pt,o.Pt)&&s!==o;)s=s.Next;var y=s.Pt.Y>o.Pt.Y||!P.ClipperBase.SlopesEqual4(o.Pt,s.Pt,i.OffPt);if(y){for(s=o.Prev;P.FPoint.op_Equality(s.Pt,o.Pt)&&s!==o;)s=s.Prev;if(s.Pt.Y>o.Pt.Y||!P.ClipperBase.SlopesEqual4(o.Pt,s.Pt,i.OffPt))return!1}return r===n||s===o||r===s||e===t&&m===y?!1:m?(r=this.DupOutPt(n,!1),s=this.DupOutPt(o,!0),n.Prev=o,o.Next=n,r.Next=s,s.Prev=r,i.OutPt1=n,i.OutPt2=r,!0):(r=this.DupOutPt(n,!0),s=this.DupOutPt(o,!1),n.Next=o,o.Prev=n,r.Prev=s,s.Next=r,i.OutPt1=n,i.OutPt2=r,!0)}};P.Clipper.GetBounds=function(i){for(var e=0,t=i.length;e<t&&i[e].length===0;)e++;if(e===t)return new P.FRect(0,0,0,0);var n=new P.FRect;for(n.left=i[e][0].X,n.right=n.left,n.top=i[e][0].Y,n.bottom=n.top;e<t;e++)for(var r=0,o=i[e].length;r<o;r++)i[e][r].X<n.left?n.left=i[e][r].X:i[e][r].X>n.right&&(n.right=i[e][r].X),i[e][r].Y<n.top?n.top=i[e][r].Y:i[e][r].Y>n.bottom&&(n.bottom=i[e][r].Y);return n};P.Clipper.prototype.GetBounds2=function(i){var e=i,t=new P.FRect;for(t.left=i.Pt.X,t.right=i.Pt.X,t.top=i.Pt.Y,t.bottom=i.Pt.Y,i=i.Next;i!==e;)i.Pt.X<t.left&&(t.left=i.Pt.X),i.Pt.X>t.right&&(t.right=i.Pt.X),i.Pt.Y<t.top&&(t.top=i.Pt.Y),i.Pt.Y>t.bottom&&(t.bottom=i.Pt.Y),i=i.Next;return t};P.Clipper.PointInPolygon=function(i,e){var t=0,n=e.length;if(n<3)return 0;for(var r=e[0],o=1;o<=n;++o){var s=o===n?e[0]:e[o];if(s.Y===i.Y&&(s.X===i.X||r.Y===i.Y&&s.X>i.X==r.X<i.X))return-1;if(r.Y<i.Y!=s.Y<i.Y){if(r.X>=i.X)if(s.X>i.X)t=1-t;else{var a=(r.X-i.X)*(s.Y-i.Y)-(s.X-i.X)*(r.Y-i.Y);if(a===0)return-1;a>0==s.Y>r.Y&&(t=1-t)}else if(s.X>i.X){var a=(r.X-i.X)*(s.Y-i.Y)-(s.X-i.X)*(r.Y-i.Y);if(a===0)return-1;a>0==s.Y>r.Y&&(t=1-t)}}r=s}return t};P.Clipper.prototype.PointInPolygon=function(i,e){var t=0,n=e,r=i.X,o=i.Y,s=e.Pt.X,a=e.Pt.Y;do{e=e.Next;var l=e.Pt.X,h=e.Pt.Y;if(h===o&&(l===r||a===o&&l>r==s<r))return-1;if(a<o!=h<o){if(s>=r)if(l>r)t=1-t;else{var c=(s-r)*(h-o)-(l-r)*(a-o);if(c===0)return-1;c>0==h>a&&(t=1-t)}else if(l>r){var c=(s-r)*(h-o)-(l-r)*(a-o);if(c===0)return-1;c>0==h>a&&(t=1-t)}}s=l,a=h}while(n!==e);return t};P.Clipper.prototype.Poly2ContainsPoly1=function(i,e){var t=i;do{var n=this.PointInPolygon(t.Pt,e);if(n>=0)return n>0;t=t.Next}while(t!==i);return!0};P.Clipper.prototype.FixupFirstLefts1=function(i,e){for(var t,n,r=0,o=this.m_PolyOuts.length;r<o;r++)t=this.m_PolyOuts[r],n=P.Clipper.ParseFirstLeft(t.FirstLeft),t.Pts!==null&&n===i&&this.Poly2ContainsPoly1(t.Pts,e.Pts)&&(t.FirstLeft=e)};P.Clipper.prototype.FixupFirstLefts2=function(i,e){for(var t=e.FirstLeft,n,r,o=0,s=this.m_PolyOuts.length;o<s;o++)n=this.m_PolyOuts[o],!(n.Pts===null||n===e||n===i)&&(r=P.Clipper.ParseFirstLeft(n.FirstLeft),!(r!==t&&r!==i&&r!==e)&&(this.Poly2ContainsPoly1(n.Pts,i.Pts)?n.FirstLeft=i:this.Poly2ContainsPoly1(n.Pts,e.Pts)?n.FirstLeft=e:(n.FirstLeft===i||n.FirstLeft===e)&&(n.FirstLeft=t)))};P.Clipper.prototype.FixupFirstLefts3=function(i,e){for(var t,n,r=0,o=this.m_PolyOuts.length;r<o;r++)t=this.m_PolyOuts[r],n=P.Clipper.ParseFirstLeft(t.FirstLeft),t.Pts!==null&&n===i&&(t.FirstLeft=e)};P.Clipper.ParseFirstLeft=function(i){for(;i!==null&&i.Pts===null;)i=i.FirstLeft;return i};P.Clipper.prototype.JoinCommonEdges=function(){for(var i=0,e=this.m_Joins.length;i<e;i++){var t=this.m_Joins[i],n=this.GetOutRec(t.OutPt1.Idx),r=this.GetOutRec(t.OutPt2.Idx);if(!(n.Pts===null||r.Pts===null)&&!(n.IsOpen||r.IsOpen)){var o;n===r?o=n:this.OutRec1RightOfOutRec2(n,r)?o=r:this.OutRec1RightOfOutRec2(r,n)?o=n:o=this.GetLowermostRec(n,r),this.JoinPoints(t,n,r)&&(n===r?(n.Pts=t.OutPt1,n.BottomPt=null,r=this.CreateOutRec(),r.Pts=t.OutPt2,this.UpdateOutPtIdxs(r),this.Poly2ContainsPoly1(r.Pts,n.Pts)?(r.IsHole=!n.IsHole,r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,n),(r.IsHole^this.ReverseSolution)==this.Area$1(r)>0&&this.ReversePolyPtLinks(r.Pts)):this.Poly2ContainsPoly1(n.Pts,r.Pts)?(r.IsHole=n.IsHole,n.IsHole=!r.IsHole,r.FirstLeft=n.FirstLeft,n.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,r),(n.IsHole^this.ReverseSolution)==this.Area$1(n)>0&&this.ReversePolyPtLinks(n.Pts)):(r.IsHole=n.IsHole,r.FirstLeft=n.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(n,r))):(r.Pts=null,r.BottomPt=null,r.Idx=n.Idx,n.IsHole=o.IsHole,o===r&&(n.FirstLeft=r.FirstLeft),r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts3(r,n)))}}};P.Clipper.prototype.UpdateOutPtIdxs=function(i){var e=i.Pts;do e.Idx=i.Idx,e=e.Prev;while(e!==i.Pts)};P.Clipper.prototype.DoSimplePolygons=function(){for(var i=0;i<this.m_PolyOuts.length;){var e=this.m_PolyOuts[i++],t=e.Pts;if(!(t===null||e.IsOpen))do{for(var n=t.Next;n!==e.Pts;){if(P.FPoint.op_Equality(t.Pt,n.Pt)&&n.Next!==t&&n.Prev!==t){var r=t.Prev,o=n.Prev;t.Prev=o,o.Next=t,n.Prev=r,r.Next=n,e.Pts=t;var s=this.CreateOutRec();s.Pts=n,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,e.Pts)?(s.IsHole=!e.IsHole,s.FirstLeft=e,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,e)):this.Poly2ContainsPoly1(e.Pts,s.Pts)?(s.IsHole=e.IsHole,e.IsHole=!s.IsHole,s.FirstLeft=e.FirstLeft,e.FirstLeft=s,this.m_UsingPolyTree&&this.FixupFirstLefts2(e,s)):(s.IsHole=e.IsHole,s.FirstLeft=e.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(e,s)),n=t}n=n.Next}t=t.Next}while(t!==e.Pts)}};P.Clipper.Area=function(i){if(!Array.isArray(i))return 0;var e=i.length;if(e<3)return 0;for(var t=0,n=0,r=e-1;n<e;++n)t+=(i[r].X+i[n].X)*(i[r].Y-i[n].Y),r=n;return-t*.5};P.Clipper.prototype.Area=function(i){var e=i;if(i===null)return 0;var t=0;do t=t+(i.Prev.Pt.X+i.Pt.X)*(i.Prev.Pt.Y-i.Pt.Y),i=i.Next;while(i!==e);return t*.5};P.Clipper.prototype.Area$1=function(i){return this.Area(i.Pts)};P.Clipper.SimplifyPolygon=function(i,e){var t=new Array,n=new P.Clipper(0);return n.StrictlySimple=!0,n.AddPath(i,P.PolyType.ptSubject,!0),n.Execute(P.ClipType.ctUnion,t,e,e),t};P.Clipper.SimplifyPolygons=function(i,e){typeof e>"u"&&(e=P.PolyFillType.pftEvenOdd);var t=new Array,n=new P.Clipper(0);return n.StrictlySimple=!0,n.AddPaths(i,P.PolyType.ptSubject,!0),n.Execute(P.ClipType.ctUnion,t,e,e),t};P.Clipper.DistanceSqrd=function(i,e){var t=i.X-e.X,n=i.Y-e.Y;return t*t+n*n};P.Clipper.DistanceFromLineSqrd=function(i,e,t){var n=e.Y-t.Y,r=t.X-e.X,o=n*e.X+r*e.Y;return o=n*i.X+r*i.Y-o,o*o/(n*n+r*r)};P.Clipper.SlopesNearCollinear=function(i,e,t,n){return Math.abs(i.X-e.X)>Math.abs(i.Y-e.Y)?i.X>e.X==i.X<t.X?P.Clipper.DistanceFromLineSqrd(i,e,t)<n:e.X>i.X==e.X<t.X?P.Clipper.DistanceFromLineSqrd(e,i,t)<n:P.Clipper.DistanceFromLineSqrd(t,i,e)<n:i.Y>e.Y==i.Y<t.Y?P.Clipper.DistanceFromLineSqrd(i,e,t)<n:e.Y>i.Y==e.Y<t.Y?P.Clipper.DistanceFromLineSqrd(e,i,t)<n:P.Clipper.DistanceFromLineSqrd(t,i,e)<n};P.Clipper.PointsAreClose=function(i,e,t){var n=i.X-e.X,r=i.Y-e.Y;return n*n+r*r<=t};P.Clipper.ExcludeOp=function(i){var e=i.Prev;return e.Next=i.Next,i.Next.Prev=e,e.Idx=0,e};P.Clipper.CleanPolygon=function(i,e){typeof e>"u"&&(e=1.415);var t=i.length;if(t===0)return new Array;for(var n=new Array(t),r=0;r<t;++r)n[r]=new P.OutPt;for(var r=0;r<t;++r)n[r].Pt=i[r],n[r].Next=n[(r+1)%t],n[r].Next.Prev=n[r],n[r].Idx=0;for(var o=e*e,s=n[0];s.Idx===0&&s.Next!==s.Prev;)P.Clipper.PointsAreClose(s.Pt,s.Prev.Pt,o)?(s=P.Clipper.ExcludeOp(s),t--):P.Clipper.PointsAreClose(s.Prev.Pt,s.Next.Pt,o)?(P.Clipper.ExcludeOp(s.Next),s=P.Clipper.ExcludeOp(s),t-=2):P.Clipper.SlopesNearCollinear(s.Prev.Pt,s.Pt,s.Next.Pt,o)?(s=P.Clipper.ExcludeOp(s),t--):(s.Idx=1,s=s.Next);t<3&&(t=0);for(var a=new Array(t),r=0;r<t;++r)a[r]=new P.FPoint1(s.Pt),s=s.Next;return n=null,a};P.Clipper.CleanPolygons=function(i,e){for(var t=new Array(i.length),n=0,r=i.length;n<r;n++)t[n]=P.Clipper.CleanPolygon(i[n],e);return t};P.Clipper.Minkowski=function(i,e,t,n){var r=n?1:0,o=i.length,s=e.length,a=new Array;if(t)for(var l=0;l<s;l++){for(var h=new Array(o),c=0,p=i.length,d=i[c];c<p;c++,d=i[c])h[c]=new P.FPoint2(e[l].X+d.X,e[l].Y+d.Y);a.push(h)}else for(var l=0;l<s;l++){for(var h=new Array(o),c=0,p=i.length,d=i[c];c<p;c++,d=i[c])h[c]=new P.FPoint2(e[l].X-d.X,e[l].Y-d.Y);a.push(h)}for(var v=new Array,l=0;l<s-1+r;l++)for(var c=0;c<o;c++){var D=new Array;D.push(a[l%s][c%o]),D.push(a[(l+1)%s][c%o]),D.push(a[(l+1)%s][(c+1)%o]),D.push(a[l%s][(c+1)%o]),P.Clipper.Orientation(D)||D.reverse(),v.push(D)}return v};P.Clipper.MinkowskiSum=function(i,e,t){if(e[0]instanceof Array){for(var r=e,s=new P.Paths,o=new P.Clipper,a=0;a<r.length;++a){var l=P.Clipper.Minkowski(i,r[a],!0,t);if(o.AddPaths(l,P.PolyType.ptSubject,!0),t){var n=P.Clipper.TranslatePath(r[a],i[0]);o.AddPath(n,P.PolyType.ptClip,!0)}}return o.Execute(P.ClipType.ctUnion,s,P.PolyFillType.pftNonZero,P.PolyFillType.pftNonZero),s}else{var n=e,r=P.Clipper.Minkowski(i,n,!0,t),o=new P.Clipper;return o.AddPaths(r,P.PolyType.ptSubject,!0),o.Execute(P.ClipType.ctUnion,r,P.PolyFillType.pftNonZero,P.PolyFillType.pftNonZero),r}};P.Clipper.TranslatePath=function(i,e){for(var t=new P.Path,n=0;n<i.length;n++)t.push(new P.FPoint2(i[n].X+e.X,i[n].Y+e.Y));return t};P.Clipper.MinkowskiDiff=function(i,e){var t=P.Clipper.Minkowski(i,e,!1,!0),n=new P.Clipper;return n.AddPaths(t,P.PolyType.ptSubject,!0),n.Execute(P.ClipType.ctUnion,t,P.PolyFillType.pftNonZero,P.PolyFillType.pftNonZero),t};P.Clipper.PolyTreeToPaths=function(i){var e=new Array;return P.Clipper.AddPolyNodeToPaths(i,P.Clipper.NodeType.ntAny,e),e};P.Clipper.AddPolyNodeToPaths=function(i,e,t){var n=!0;switch(e){case P.Clipper.NodeType.ntOpen:return;case P.Clipper.NodeType.ntClosed:n=!i.IsOpen;break}i.m_polygon.length>0&&n&&t.push(i.m_polygon);for(var r=0,o=i.Childs(),s=o.length,a=o[r];r<s;r++,a=o[r])P.Clipper.AddPolyNodeToPaths(a,e,t)};P.Clipper.OpenPathsFromPolyTree=function(i){for(var e=new P.Paths,t=0,n=i.ChildCount();t<n;t++)i.Childs()[t].IsOpen&&e.push(i.Childs()[t].m_polygon);return e};P.Clipper.ClosedPathsFromPolyTree=function(i){var e=new P.Paths;return P.Clipper.AddPolyNodeToPaths(i,P.Clipper.NodeType.ntClosed,e),e};nm(P.Clipper,P.ClipperBase);P.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2};P.ClipperOffset=function(i,e){typeof i>"u"&&(i=2),typeof e>"u"&&(e=P.ClipperOffset.def_arc_tolerance),this.m_destPolys=new P.Paths,this.m_srcPoly=new P.Path,this.m_destPoly=new P.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new P.FPoint0,this.m_polyNodes=new P.PolyNode,this.MiterLimit=i,this.ArcTolerance=e,this.m_lowest.X=-1};P.ClipperOffset.two_pi=6.28318530717959;P.ClipperOffset.def_arc_tolerance=.25;P.ClipperOffset.prototype.Clear=function(){P.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1};P.ClipperOffset.prototype.AddPath=function(i,e,t){var n=i.length-1;if(!(n<0)){var r=new P.PolyNode;if(r.m_jointype=e,r.m_endtype=t,t===P.EndType.etClosedLine||t===P.EndType.etClosedPolygon)for(;n>0&&P.FPoint.op_Equality(i[0],i[n]);)n--;r.m_polygon.push(i[0]);for(var o=0,s=0,a=1;a<=n;a++)P.FPoint.op_Inequality(r.m_polygon[o],i[a])&&(o++,r.m_polygon.push(i[a]),(i[a].Y>r.m_polygon[s].Y||i[a].Y===r.m_polygon[s].Y&&i[a].X<r.m_polygon[s].X)&&(s=o));if(!(t===P.EndType.etClosedPolygon&&o<2)&&(this.m_polyNodes.AddChild(r),t===P.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new P.FPoint2(this.m_polyNodes.ChildCount()-1,s);else{var l=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(r.m_polygon[s].Y>l.Y||r.m_polygon[s].Y===l.Y&&r.m_polygon[s].X<l.X)&&(this.m_lowest=new P.FPoint2(this.m_polyNodes.ChildCount()-1,s))}}};P.ClipperOffset.prototype.AddPaths=function(i,e,t){for(var n=0,r=i.length;n<r;n++)this.AddPath(i[n],e,t)};P.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!P.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var i=0;i<this.m_polyNodes.ChildCount();i++){var e=this.m_polyNodes.Childs()[i];(e.m_endtype===P.EndType.etClosedPolygon||e.m_endtype===P.EndType.etClosedLine&&P.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(var i=0;i<this.m_polyNodes.ChildCount();i++){var e=this.m_polyNodes.Childs()[i];e.m_endtype===P.EndType.etClosedLine&&!P.Clipper.Orientation(e.m_polygon)&&e.m_polygon.reverse()}};P.ClipperOffset.GetUnitNormal=function(i,e){var t=e.X-i.X,n=e.Y-i.Y;if(t===0&&n===0)return new P.FPoint2(0,0);var r=1/Math.sqrt(t*t+n*n);return t*=r,n*=r,new P.FPoint2(n,-t)};P.ClipperOffset.prototype.DoOffset=function(i){if(this.m_destPolys=new Array,this.m_delta=i,P.ClipperBase.near_zero(i)){for(var e=0;e<this.m_polyNodes.ChildCount();e++){var t=this.m_polyNodes.Childs()[e];t.m_endtype===P.EndType.etClosedPolygon&&this.m_destPolys.push(t.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var n;this.ArcTolerance<=0?n=P.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(i)*P.ClipperOffset.def_arc_tolerance?n=Math.abs(i)*P.ClipperOffset.def_arc_tolerance:n=this.ArcTolerance;var r=3.14159265358979/Math.acos(1-n/Math.abs(i));this.m_sin=Math.sin(P.ClipperOffset.two_pi/r),this.m_cos=Math.cos(P.ClipperOffset.two_pi/r),this.m_StepsPerRad=r/P.ClipperOffset.two_pi,i<0&&(this.m_sin=-this.m_sin);for(var e=0;e<this.m_polyNodes.ChildCount();e++){var t=this.m_polyNodes.Childs()[e];this.m_srcPoly=t.m_polygon;var o=this.m_srcPoly.length;if(!(o===0||i<=0&&(o<3||t.m_endtype!==P.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,o===1){if(t.m_jointype===P.JoinType.jtRound)for(var s=1,a=0,l=1;l<=r;l++){this.m_destPoly.push(new P.FPoint2(this.m_srcPoly[0].X+s*i,this.m_srcPoly[0].Y+a*i));var h=s;s=s*this.m_cos-this.m_sin*a,a=h*this.m_sin+a*this.m_cos}else for(var s=-1,a=-1,l=0;l<4;++l)this.m_destPoly.push(new P.FPoint2(this.m_srcPoly[0].X+s*i,this.m_srcPoly[0].Y+a*i)),s<0?s=1:a<0?a=1:s=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var l=0;l<o-1;l++)this.m_normals.push(P.ClipperOffset.GetUnitNormal(this.m_srcPoly[l],this.m_srcPoly[l+1]));if(t.m_endtype===P.EndType.etClosedLine||t.m_endtype===P.EndType.etClosedPolygon?this.m_normals.push(P.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new P.FPoint1(this.m_normals[o-2])),t.m_endtype===P.EndType.etClosedPolygon){for(var c=o-1,l=0;l<o;l++)c=this.OffsetPoint(l,c,t.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(t.m_endtype===P.EndType.etClosedLine){for(var c=o-1,l=0;l<o;l++)c=this.OffsetPoint(l,c,t.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var p=this.m_normals[o-1],l=o-1;l>0;l--)this.m_normals[l]=new P.FPoint2(-this.m_normals[l-1].X,-this.m_normals[l-1].Y);this.m_normals[0]=new P.FPoint2(-p.X,-p.Y),c=0;for(var l=o-1;l>=0;l--)c=this.OffsetPoint(l,c,t.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var c=0,l=1;l<o-1;++l)c=this.OffsetPoint(l,c,t.m_jointype);var d;if(t.m_endtype===P.EndType.etOpenButt){var l=o-1;d=new P.FPoint2(this.m_srcPoly[l].X+this.m_normals[l].X*i,this.m_srcPoly[l].Y+this.m_normals[l].Y*i),this.m_destPoly.push(d),d=new P.FPoint2(this.m_srcPoly[l].X-this.m_normals[l].X*i,this.m_srcPoly[l].Y-this.m_normals[l].Y*i),this.m_destPoly.push(d)}else{var l=o-1;c=o-2,this.m_sinA=0,this.m_normals[l]=new P.FPoint2(-this.m_normals[l].X,-this.m_normals[l].Y),t.m_endtype===P.EndType.etOpenSquare?this.DoSquare(l,c):this.DoRound(l,c)}for(var l=o-1;l>0;l--)this.m_normals[l]=new P.FPoint2(-this.m_normals[l-1].X,-this.m_normals[l-1].Y);this.m_normals[0]=new P.FPoint2(-this.m_normals[1].X,-this.m_normals[1].Y),c=o-1;for(var l=c-1;l>0;--l)c=this.OffsetPoint(l,c,t.m_jointype);t.m_endtype===P.EndType.etOpenButt?(d=new P.FPoint2(this.m_srcPoly[0].X-this.m_normals[0].X*i,this.m_srcPoly[0].Y-this.m_normals[0].Y*i),this.m_destPoly.push(d),d=new P.FPoint2(this.m_srcPoly[0].X+this.m_normals[0].X*i,this.m_srcPoly[0].Y+this.m_normals[0].Y*i),this.m_destPoly.push(d)):(c=1,this.m_sinA=0,t.m_endtype===P.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}};P.ClipperOffset.prototype.Execute=function(){var i=arguments,e=i[0]instanceof P.PolyTree;if(e){var t=i[0],n=i[1];t.Clear(),this.FixOrientations(),this.DoOffset(n);var r=new P.Clipper(0);if(r.AddPaths(this.m_destPolys,P.PolyType.ptSubject,!0),n>0)r.Execute(P.ClipType.ctUnion,t,P.PolyFillType.pftPositive,P.PolyFillType.pftPositive);else{var o=P.Clipper.GetBounds(this.m_destPolys),s=new P.Path;if(s.push(new P.FPoint2(o.left-10,o.bottom+10)),s.push(new P.FPoint2(o.right+10,o.bottom+10)),s.push(new P.FPoint2(o.right+10,o.top-10)),s.push(new P.FPoint2(o.left-10,o.top-10)),r.AddPath(s,P.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(P.ClipType.ctUnion,t,P.PolyFillType.pftNegative,P.PolyFillType.pftNegative),t.ChildCount()===1&&t.Childs()[0].ChildCount()>0){var a=t.Childs()[0];t.Childs()[0]=a.Childs()[0],t.Childs()[0].m_Parent=t;for(var l=1;l<a.ChildCount();l++)t.AddChild(a.Childs()[l])}else t.Clear()}}else{var t=i[0],n=i[1];P.Clear(t),this.FixOrientations(),this.DoOffset(n);var r=new P.Clipper(0);if(r.AddPaths(this.m_destPolys,P.PolyType.ptSubject,!0),n>0)r.Execute(P.ClipType.ctUnion,t,P.PolyFillType.pftPositive,P.PolyFillType.pftPositive);else{var o=P.Clipper.GetBounds(this.m_destPolys),s=new P.Path;s.push(new P.FPoint2(o.left-10,o.bottom+10)),s.push(new P.FPoint2(o.right+10,o.bottom+10)),s.push(new P.FPoint2(o.right+10,o.top-10)),s.push(new P.FPoint2(o.left-10,o.top-10)),r.AddPath(s,P.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(P.ClipType.ctUnion,t,P.PolyFillType.pftNegative,P.PolyFillType.pftNegative),t.length>0&&t.splice(0,1)}}};P.ClipperOffset.prototype.OffsetPoint=function(i,e,t){if(this.m_sinA=this.m_normals[e].X*this.m_normals[i].Y-this.m_normals[i].X*this.m_normals[e].Y,this.m_sinA===0)return e;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new P.FPoint2(this.m_srcPoly[i].X+this.m_normals[e].X*this.m_delta,this.m_srcPoly[i].Y+this.m_normals[e].Y*this.m_delta)),this.m_destPoly.push(new P.FPoint1(this.m_srcPoly[i])),this.m_destPoly.push(new P.FPoint2(this.m_srcPoly[i].X+this.m_normals[i].X*this.m_delta,this.m_srcPoly[i].Y+this.m_normals[i].Y*this.m_delta));else switch(t){case P.JoinType.jtMiter:{var n=1+(this.m_normals[i].X*this.m_normals[e].X+this.m_normals[i].Y*this.m_normals[e].Y);n>=this.m_miterLim?this.DoMiter(i,e,n):this.DoSquare(i,e);break}case P.JoinType.jtSquare:this.DoSquare(i,e);break;case P.JoinType.jtRound:this.DoRound(i,e);break}return e=i,e};P.ClipperOffset.prototype.DoSquare=function(i,e){var t=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[i].X+this.m_normals[e].Y*this.m_normals[i].Y)/4);this.m_destPoly.push(new P.FPoint2(this.m_srcPoly[i].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*t),this.m_srcPoly[i].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*t))),this.m_destPoly.push(new P.FPoint2(this.m_srcPoly[i].X+this.m_delta*(this.m_normals[i].X+this.m_normals[i].Y*t),this.m_srcPoly[i].Y+this.m_delta*(this.m_normals[i].Y-this.m_normals[i].X*t)))};P.ClipperOffset.prototype.DoMiter=function(i,e,t){var n=this.m_delta/t;this.m_destPoly.push(new P.FPoint2(this.m_srcPoly[i].X+(this.m_normals[e].X+this.m_normals[i].X)*n,this.m_srcPoly[i].Y+(this.m_normals[e].Y+this.m_normals[i].Y)*n))};P.ClipperOffset.prototype.DoRound=function(i,e){for(var t=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[i].X+this.m_normals[e].Y*this.m_normals[i].Y),n=Math.max(Math.round(this.m_StepsPerRad*Math.abs(t)),1),r=this.m_normals[e].X,o=this.m_normals[e].Y,s,a=0;a<n;++a)this.m_destPoly.push(new P.FPoint2(this.m_srcPoly[i].X+r*this.m_delta,this.m_srcPoly[i].Y+o*this.m_delta)),s=r,r=r*this.m_cos-this.m_sin*o,o=s*this.m_sin+o*this.m_cos;this.m_destPoly.push(new P.FPoint2(this.m_srcPoly[i].X+this.m_normals[i].X*this.m_delta,this.m_srcPoly[i].Y+this.m_normals[i].Y*this.m_delta))};P.Error=function(i){try{throw new Error(i)}catch(e){alert(e.message)}};P.JS={};P.JS.AreaOfPolygon=function(i){return P.Clipper.Area(i)};P.JS.AreaOfPolygons=function(i){for(var e=0,t=0;t<i.length;t++)e+=P.Clipper.Area(i[t]);return e};P.JS.BoundsOfPath=function(i){return P.JS.BoundsOfPaths([i])};P.JS.BoundsOfPaths=function(i){var e=P.Clipper.GetBounds(i);return e};P.JS.Clean=function(n,e){if(!(n instanceof Array))return[];var t=n[0]instanceof Array,n=P.JS.Clone(n);if(typeof e!="number"||e===null)return P.Error("Delta is not a number in Clean()."),n;if(n.length===0||n.length===1&&n[0].length===0||e<0)return n;t||(n=[n]);for(var r=n.length,o,s,a,l,h,c,p,d=[],v=0;v<r;v++)if(s=n[v],o=s.length,o!==0){if(o<3){a=s,d.push(a);continue}for(a=s,l=e*e,h=s[0],c=1,p=1;p<o;p++)(s[p].X-h.X)*(s[p].X-h.X)+(s[p].Y-h.Y)*(s[p].Y-h.Y)<=l||(a[c]=s[p],h=s[p],c++);h=s[c-1],(s[0].X-h.X)*(s[0].X-h.X)+(s[0].Y-h.Y)*(s[0].Y-h.Y)<=l&&c--,c<o&&a.splice(c,o-c),a.length&&d.push(a)}return!t&&d.length?d=d[0]:!t&&d.length===0?d=[]:t&&d.length===0&&(d=[[]]),d};P.JS.Clone=function(i){if(!(i instanceof Array))return[];if(i.length===0)return[];if(i.length===1&&i[0].length===0)return[[]];var e=i[0]instanceof Array;e||(i=[i]);var t=i.length,n,r,o,s,a=new Array(t);for(r=0;r<t;r++){for(n=i[r].length,s=new Array(n),o=0;o<n;o++)s[o]={X:i[r][o].X,Y:i[r][o].Y};a[r]=s}return e||(a=a[0]),a};P.JS.Lighten=function(i,e){if(!(i instanceof Array))return[];if(typeof e!="number"||e===null)return P.Error("Tolerance is not a number in Lighten()."),P.JS.Clone(i);if(i.length===0||i.length===1&&i[0].length===0||e<0)return P.JS.Clone(i);var t=i[0]instanceof Array;t||(i=[i]);var n,r,o,s,a,l,h,c,p,d,v,D,m,y,x,w,_,I=i.length,N=e*e,Y=[];for(n=0;n<I;n++)if(o=i[n],l=o.length,l!==0){for(s=0;s<1e6;s++){for(a=[],l=o.length,o[l-1].X!==o[0].X||o[l-1].Y!==o[0].Y?(D=1,o.push({X:o[0].X,Y:o[0].Y}),l=o.length):D=0,v=[],r=0;r<l-2;r++)h=o[r],p=o[r+1],c=o[r+2],w=h.X,_=h.Y,m=c.X-w,y=c.Y-_,(m!==0||y!==0)&&(x=((p.X-w)*m+(p.Y-_)*y)/(m*m+y*y),x>1?(w=c.X,_=c.Y):x>0&&(w+=m*x,_+=y*x)),m=p.X-w,y=p.Y-_,d=m*m+y*y,d<=N&&(v[r+1]=1,r++);for(a.push({X:o[0].X,Y:o[0].Y}),r=1;r<l-1;r++)v[r]||a.push({X:o[r].X,Y:o[r].Y});if(a.push({X:o[l-1].X,Y:o[l-1].Y}),D&&o.pop(),v.length)o=a;else break}l=a.length,a[l-1].X===a[0].X&&a[l-1].Y===a[0].Y&&a.pop(),a.length>2&&Y.push(a)}return t||(Y=Y[0]),typeof Y>"u"&&(Y=[]),Y};P.JS.PerimeterOfPath=function(i,e){if(typeof i>"u")return 0;var t=Math.sqrt,n=0,r,o,s=0,a=0,l=0,h=0,c=i.length;if(c<2)return 0;for(e&&(i[c]=i[0],c++);--c;)r=i[c],s=r.X,a=r.Y,o=i[c-1],l=o.X,h=o.Y,n+=t((s-l)*(s-l)+(a-h)*(a-h));return e&&i.pop(),n};P.JS.PerimeterOfPaths=function(i,e){for(var t=0,n=0;n<i.length;n++)t+=P.JS.PerimeterOfPath(i[n],e);return t};P.ExPolygons=function(){return[]};P.ExPolygon=function(){this.outer=null,this.holes=null};P.JS.AddOuterPolyNodeToExPolygons=function(i,e){var t=new P.ExPolygon;t.outer=i.Contour();var n=i.Childs(),r=n.length;t.holes=new Array(r);var o,s,a,l,h,c;for(a=0;a<r;a++)for(o=n[a],t.holes[a]=o.Contour(),l=0,h=o.Childs(),c=h.length;l<c;l++)s=h[l],P.JS.AddOuterPolyNodeToExPolygons(s,e);e.push(t)};P.JS.ExPolygonsToPaths=function(i){var e,t,n,r,o=new P.Paths;for(e=0,n=i.length;e<n;e++)for(o.push(i[e].outer),t=0,r=i[e].holes.length;t<r;t++)o.push(i[e].holes[t]);return o};P.JS.PolyTreeToExPolygons=function(i){var e=new P.ExPolygons,t,n,r,o;for(n=0,r=i.Childs(),o=r.length;n<o;n++)t=r[n],P.JS.AddOuterPolyNodeToExPolygons(t,e);return e};const MO=(i,e)=>1e-8>Math.abs(i[0]-e[0])+Math.abs(i[1]-e[1]),BO=i=>{if(i.length===0)return!0;const e=i[0][0],t=i.at(-1).at(-1);return MO(e,t)};function Cu(i,e,t={}){const n={openSquare:0,openRound:1,openButt:2,closedLine:3,closedPolygon:4},r={square:0,round:1,miter:2};let o=t.endType;o in n||(o="closedPolygon");let s=t.joinType;s in r||(s="round");const a=t.miterLimit||2,l=t.arcTolerance||.1,h=n[o],c=r[s],p=x=>x.map(([w,_])=>({X:w,Y:_})),d=x=>x.map(({X:w,Y:_})=>[w,_]);BO(i);const v=i.map(p),D=new P.ClipperOffset(a,l);D.AddPaths(v,c,h);const m=new P.Paths;D.Execute(m,e);const y=m.map(d);for(;i.length>y.length;)i.pop();return y.forEach((x,w)=>{i[w]=x,i[w].push([x[0][0],x[0][1]])}),i}const $O="modulepreload",NO=function(i,e){return new URL(i,e).href},cd={},RO=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=NO(o,n),o in cd)return;cd[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!n)for(let c=r.length-1;c>=0;c--){const p=r[c];if(p.href===o&&(!s||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const h=document.createElement("link");if(h.rel=s?"stylesheet":$O,s||(h.as="script",h.crossOrigin=""),h.href=o,document.head.appendChild(h),s)return new Promise((c,p)=>{h.addEventListener("load",c),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};let na,Yh;(()=>{const i=new Map;na={register(a,l,h){i.set(a,{d:l,f:h,exp:{}})}};async function e(a,l){let h=a.replace(/\.\w+$/i,"");if(h.includes("./")){const[c,...p]=h.split("/").reverse(),[,...d]=l.split("/").reverse(),v=[c];let D=0,m;for(;m=p.shift();)if(m==="..")D++;else{if(m===".")break;v.push(m)}D<d.length&&v.push(...d.slice(D)),h=v.reverse().join("/")}return i.has(h)?o(h):RO(()=>import(a),[],import.meta.url)}function t(a,l){return{id:a,import:h=>e(h,a),meta:{url:a,main:l}}}function n(a){return(l,h)=>{h=typeof l=="string"?{[l]:h}:l;for(const[c,p]of Object.entries(h))Object.defineProperty(a,c,{value:p,writable:!0,enumerable:!0})}}function r(a){for(const[l,h]of i.entries()){const{f:c,exp:p}=h,{execute:d,setters:v}=c(n(p),t(l,l===a));delete h.f,h.e=d,h.s=v}}async function o(a){if(!i.has(a))return;const l=i.get(a);if(l.s){const{d:h,e:c,s:p}=l;delete l.s,delete l.e;for(let v=0;v<p.length;v++)p[v](await o(h[v]));const d=c();d&&await d}return l.exp}function s(a){if(!i.has(a))return;const l=i.get(a);if(l.s){const{d:h,e:c,s:p}=l;delete l.s,delete l.e;for(let d=0;d<p.length;d++)p[d](s(h[d]));c()}return l.exp}Yh=a=>(na=Yh=void 0,r(a),s(a))})();na.register("-/clipper-lib@v6.4.2-JisZmmhC7gDAFmHQLYDu/dist=es2020/clipper-lib",[],function(i,e){var t;e&&e.id;function n(o,s,a){return a={path:s,exports:{},require:function(l,h){return r(l,h??a.path)}},o(a,a.exports),a.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}return{setters:[],execute:function(){t=n(function(o){(function(){var s={};s.version="6.4.2.2",s.use_lines=!0,s.use_xyz=!1;var a=!1;o.exports?(o.exports=s,a=!0):typeof document<"u"?window.ClipperLib=s:self.ClipperLib=s;var l;if(a){var h="chrome";l="Netscape"}else{var h=navigator.userAgent.toString().toLowerCase();l=navigator.appName}var c={};h.indexOf("chrome")!=-1&&h.indexOf("chromium")==-1?c.chrome=1:c.chrome=0,h.indexOf("chromium")!=-1?c.chromium=1:c.chromium=0,h.indexOf("safari")!=-1&&h.indexOf("chrome")==-1&&h.indexOf("chromium")==-1?c.safari=1:c.safari=0,h.indexOf("firefox")!=-1?c.firefox=1:c.firefox=0,h.indexOf("firefox/17")!=-1?c.firefox17=1:c.firefox17=0,h.indexOf("firefox/15")!=-1?c.firefox15=1:c.firefox15=0,h.indexOf("firefox/3")!=-1?c.firefox3=1:c.firefox3=0,h.indexOf("opera")!=-1?c.opera=1:c.opera=0,h.indexOf("msie 10")!=-1?c.msie10=1:c.msie10=0,h.indexOf("msie 9")!=-1?c.msie9=1:c.msie9=0,h.indexOf("msie 8")!=-1?c.msie8=1:c.msie8=0,h.indexOf("msie 7")!=-1?c.msie7=1:c.msie7=0,h.indexOf("msie ")!=-1?c.msie=1:c.msie=0,s.biginteger_used=null;var p;function d(u,f,O){s.biginteger_used=1,u!=null&&(typeof u=="number"&&typeof f>"u"?this.fromInt(u):typeof u=="number"?this.fromNumber(u,f,O):f==null&&typeof u!="string"?this.fromString(u,256):this.fromString(u,f))}function v(){return new d(null,void 0,void 0)}function D(u,f,O,S,E,R){for(;--R>=0;){var Z=f*this[u++]+O[S]+E;E=Math.floor(Z/67108864),O[S++]=Z&67108863}return E}function m(u,f,O,S,E,R){for(var Z=f&32767,te=f>>15;--R>=0;){var ie=this[u]&32767,pe=this[u++]>>15,Re=te*ie+pe*Z;ie=Z*ie+((Re&32767)<<15)+O[S]+(E&1073741823),E=(ie>>>30)+(Re>>>15)+te*pe+(E>>>30),O[S++]=ie&1073741823}return E}function y(u,f,O,S,E,R){for(var Z=f&16383,te=f>>14;--R>=0;){var ie=this[u]&16383,pe=this[u++]>>14,Re=te*ie+pe*Z;ie=Z*ie+((Re&16383)<<14)+O[S]+E,E=(ie>>28)+(Re>>14)+te*pe,O[S++]=ie&268435455}return E}l=="Microsoft Internet Explorer"?(d.prototype.am=m,p=30):l!="Netscape"?(d.prototype.am=D,p=26):(d.prototype.am=y,p=28),d.prototype.DB=p,d.prototype.DM=(1<<p)-1,d.prototype.DV=1<<p;var x=52;d.prototype.FV=Math.pow(2,x),d.prototype.F1=x-p,d.prototype.F2=2*p-x;var w="0123456789abcdefghijklmnopqrstuvwxyz",_=new Array,I,N;for(I="0".charCodeAt(0),N=0;N<=9;++N)_[I++]=N;for(I="a".charCodeAt(0),N=10;N<36;++N)_[I++]=N;for(I="A".charCodeAt(0),N=10;N<36;++N)_[I++]=N;function Y(u){return w.charAt(u)}function j(u,f){var O=_[u.charCodeAt(f)];return O??-1}function ae(u){for(var f=this.t-1;f>=0;--f)u[f]=this[f];u.t=this.t,u.s=this.s}function K(u){this.t=1,this.s=u<0?-1:0,u>0?this[0]=u:u<-1?this[0]=u+this.DV:this.t=0}function oe(u){var f=v();return f.fromInt(u),f}function fe(u,f){var O;if(f==16)O=4;else if(f==8)O=3;else if(f==256)O=8;else if(f==2)O=1;else if(f==32)O=5;else if(f==4)O=2;else{this.fromRadix(u,f);return}this.t=0,this.s=0;for(var S=u.length,E=!1,R=0;--S>=0;){var Z=O==8?u[S]&255:j(u,S);if(Z<0){u.charAt(S)=="-"&&(E=!0);continue}E=!1,R==0?this[this.t++]=Z:R+O>this.DB?(this[this.t-1]|=(Z&(1<<this.DB-R)-1)<<R,this[this.t++]=Z>>this.DB-R):this[this.t-1]|=Z<<R,R+=O,R>=this.DB&&(R-=this.DB)}O==8&&u[0]&128&&(this.s=-1,R>0&&(this[this.t-1]|=(1<<this.DB-R)-1<<R)),this.clamp(),E&&d.ZERO.subTo(this,this)}function U(){for(var u=this.s&this.DM;this.t>0&&this[this.t-1]==u;)--this.t}function H(u){if(this.s<0)return"-"+this.negate().toString(u);var f;if(u==16)f=4;else if(u==8)f=3;else if(u==2)f=1;else if(u==32)f=5;else if(u==4)f=2;else return this.toRadix(u);var O=(1<<f)-1,S,E=!1,R="",Z=this.t,te=this.DB-Z*this.DB%f;if(Z-- >0)for(te<this.DB&&(S=this[Z]>>te)>0&&(E=!0,R=Y(S));Z>=0;)te<f?(S=(this[Z]&(1<<te)-1)<<f-te,S|=this[--Z]>>(te+=this.DB-f)):(S=this[Z]>>(te-=f)&O,te<=0&&(te+=this.DB,--Z)),S>0&&(E=!0),E&&(R+=Y(S));return E?R:"0"}function B(){var u=v();return d.ZERO.subTo(this,u),u}function re(){return this.s<0?this.negate():this}function Qe(u){var f=this.s-u.s;if(f!=0)return f;var O=this.t;if(f=O-u.t,f!=0)return this.s<0?-f:f;for(;--O>=0;)if((f=this[O]-u[O])!=0)return f;return 0}function De(u){var f=1,O;return(O=u>>>16)!=0&&(u=O,f+=16),(O=u>>8)!=0&&(u=O,f+=8),(O=u>>4)!=0&&(u=O,f+=4),(O=u>>2)!=0&&(u=O,f+=2),(O=u>>1)!=0&&(u=O,f+=1),f}function Xe(){return this.t<=0?0:this.DB*(this.t-1)+De(this[this.t-1]^this.s&this.DM)}function ge(u,f){var O;for(O=this.t-1;O>=0;--O)f[O+u]=this[O];for(O=u-1;O>=0;--O)f[O]=0;f.t=this.t+u,f.s=this.s}function $e(u,f){for(var O=u;O<this.t;++O)f[O-u]=this[O];f.t=Math.max(this.t-u,0),f.s=this.s}function ue(u,f){var O=u%this.DB,S=this.DB-O,E=(1<<S)-1,R=Math.floor(u/this.DB),Z=this.s<<O&this.DM,te;for(te=this.t-1;te>=0;--te)f[te+R+1]=this[te]>>S|Z,Z=(this[te]&E)<<O;for(te=R-1;te>=0;--te)f[te]=0;f[R]=Z,f.t=this.t+R+1,f.s=this.s,f.clamp()}function he(u,f){f.s=this.s;var O=Math.floor(u/this.DB);if(O>=this.t){f.t=0;return}var S=u%this.DB,E=this.DB-S,R=(1<<S)-1;f[0]=this[O]>>S;for(var Z=O+1;Z<this.t;++Z)f[Z-O-1]|=(this[Z]&R)<<E,f[Z-O]=this[Z]>>S;S>0&&(f[this.t-O-1]|=(this.s&R)<<E),f.t=this.t-O,f.clamp()}function je(u,f){for(var O=0,S=0,E=Math.min(u.t,this.t);O<E;)S+=this[O]-u[O],f[O++]=S&this.DM,S>>=this.DB;if(u.t<this.t){for(S-=u.s;O<this.t;)S+=this[O],f[O++]=S&this.DM,S>>=this.DB;S+=this.s}else{for(S+=this.s;O<u.t;)S-=u[O],f[O++]=S&this.DM,S>>=this.DB;S-=u.s}f.s=S<0?-1:0,S<-1?f[O++]=this.DV+S:S>0&&(f[O++]=S),f.t=O,f.clamp()}function We(u,f){var O=this.abs(),S=u.abs(),E=O.t;for(f.t=E+S.t;--E>=0;)f[E]=0;for(E=0;E<S.t;++E)f[E+O.t]=O.am(0,S[E],f,E,0,O.t);f.s=0,f.clamp(),this.s!=u.s&&d.ZERO.subTo(f,f)}function Ae(u){for(var f=this.abs(),O=u.t=2*f.t;--O>=0;)u[O]=0;for(O=0;O<f.t-1;++O){var S=f.am(O,f[O],u,2*O,0,1);(u[O+f.t]+=f.am(O+1,2*f[O],u,2*O+1,S,f.t-O-1))>=f.DV&&(u[O+f.t]-=f.DV,u[O+f.t+1]=1)}u.t>0&&(u[u.t-1]+=f.am(O,f[O],u,2*O,0,1)),u.s=0,u.clamp()}function Me(u,f,O){var S=u.abs();if(!(S.t<=0)){var E=this.abs();if(E.t<S.t){f!=null&&f.fromInt(0),O!=null&&this.copyTo(O);return}O==null&&(O=v());var R=v(),Z=this.s,te=u.s,ie=this.DB-De(S[S.t-1]);ie>0?(S.lShiftTo(ie,R),E.lShiftTo(ie,O)):(S.copyTo(R),E.copyTo(O));var pe=R.t,Re=R[pe-1];if(Re!=0){var _e=Re*(1<<this.F1)+(pe>1?R[pe-2]>>this.F2:0),qe=this.FV/_e,dt=(1<<this.F1)/_e,St=1<<this.F2,wt=O.t,Rt=wt-pe,Pi=f??v();for(R.dlShiftTo(Rt,Pi),O.compareTo(Pi)>=0&&(O[O.t++]=1,O.subTo(Pi,O)),d.ONE.dlShiftTo(pe,Pi),Pi.subTo(R,R);R.t<pe;)R[R.t++]=0;for(;--Rt>=0;){var Bi=O[--wt]==Re?this.DM:Math.floor(O[wt]*qe+(O[wt-1]+St)*dt);if((O[wt]+=R.am(0,Bi,O,Rt,0,pe))<Bi)for(R.dlShiftTo(Rt,Pi),O.subTo(Pi,O);O[wt]<--Bi;)O.subTo(Pi,O)}f!=null&&(O.drShiftTo(pe,f),Z!=te&&d.ZERO.subTo(f,f)),O.t=pe,O.clamp(),ie>0&&O.rShiftTo(ie,O),Z<0&&d.ZERO.subTo(O,O)}}}function vt(u){var f=v();return this.abs().divRemTo(u,null,f),this.s<0&&f.compareTo(d.ZERO)>0&&u.subTo(f,f),f}function et(u){this.m=u}function tt(u){return u.s<0||u.compareTo(this.m)>=0?u.mod(this.m):u}function Ot(u){return u}function it(u){u.divRemTo(this.m,null,u)}function Nt(u,f,O){u.multiplyTo(f,O),this.reduce(O)}function yt(u,f){u.squareTo(f),this.reduce(f)}et.prototype.convert=tt,et.prototype.revert=Ot,et.prototype.reduce=it,et.prototype.mulTo=Nt,et.prototype.sqrTo=yt;function $(){if(this.t<1)return 0;var u=this[0];if(!(u&1))return 0;var f=u&3;return f=f*(2-(u&15)*f)&15,f=f*(2-(u&255)*f)&255,f=f*(2-((u&65535)*f&65535))&65535,f=f*(2-u*f%this.DV)%this.DV,f>0?this.DV-f:-f}function Pe(u){this.m=u,this.mp=u.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<u.DB-15)-1,this.mt2=2*u.t}function Oe(u){var f=v();return u.abs().dlShiftTo(this.m.t,f),f.divRemTo(this.m,null,f),u.s<0&&f.compareTo(d.ZERO)>0&&this.m.subTo(f,f),f}function J(u){var f=v();return u.copyTo(f),this.reduce(f),f}function G(u){for(;u.t<=this.mt2;)u[u.t++]=0;for(var f=0;f<this.m.t;++f){var O=u[f]&32767,S=O*this.mpl+((O*this.mph+(u[f]>>15)*this.mpl&this.um)<<15)&u.DM;for(O=f+this.m.t,u[O]+=this.m.am(0,S,u,f,0,this.m.t);u[O]>=u.DV;)u[O]-=u.DV,u[++O]++}u.clamp(),u.drShiftTo(this.m.t,u),u.compareTo(this.m)>=0&&u.subTo(this.m,u)}function ce(u,f){u.squareTo(f),this.reduce(f)}function Ie(u,f,O){u.multiplyTo(f,O),this.reduce(O)}Pe.prototype.convert=Oe,Pe.prototype.revert=J,Pe.prototype.reduce=G,Pe.prototype.mulTo=Ie,Pe.prototype.sqrTo=ce;function Be(){return(this.t>0?this[0]&1:this.s)==0}function me(u,f){if(u>4294967295||u<1)return d.ONE;var O=v(),S=v(),E=f.convert(this),R=De(u)-1;for(E.copyTo(O);--R>=0;)if(f.sqrTo(O,S),(u&1<<R)>0)f.mulTo(S,E,O);else{var Z=O;O=S,S=Z}return f.revert(O)}function Ze(u,f){var O;return u<256||f.isEven()?O=new et(f):O=new Pe(f),this.exp(u,O)}d.prototype.copyTo=ae,d.prototype.fromInt=K,d.prototype.fromString=fe,d.prototype.clamp=U,d.prototype.dlShiftTo=ge,d.prototype.drShiftTo=$e,d.prototype.lShiftTo=ue,d.prototype.rShiftTo=he,d.prototype.subTo=je,d.prototype.multiplyTo=We,d.prototype.squareTo=Ae,d.prototype.divRemTo=Me,d.prototype.invDigit=$,d.prototype.isEven=Be,d.prototype.exp=me,d.prototype.toString=H,d.prototype.negate=B,d.prototype.abs=re,d.prototype.compareTo=Qe,d.prototype.bitLength=Xe,d.prototype.mod=vt,d.prototype.modPowInt=Ze,d.ZERO=oe(0),d.ONE=oe(1);function Ke(){var u=v();return this.copyTo(u),u}function Ne(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function at(){return this.t==0?this.s:this[0]<<24>>24}function mt(){return this.t==0?this.s:this[0]<<16>>16}function Pt(u){return Math.floor(Math.LN2*this.DB/Math.log(u))}function li(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function ji(u){if(u==null&&(u=10),this.signum()==0||u<2||u>36)return"0";var f=this.chunkSize(u),O=Math.pow(u,f),S=oe(O),E=v(),R=v(),Z="";for(this.divRemTo(S,E,R);E.signum()>0;)Z=(O+R.intValue()).toString(u).substr(1)+Z,E.divRemTo(S,E,R);return R.intValue().toString(u)+Z}function pi(u,f){this.fromInt(0),f==null&&(f=10);for(var O=this.chunkSize(f),S=Math.pow(f,O),E=!1,R=0,Z=0,te=0;te<u.length;++te){var ie=j(u,te);if(ie<0){u.charAt(te)=="-"&&this.signum()==0&&(E=!0);continue}Z=f*Z+ie,++R>=O&&(this.dMultiply(S),this.dAddOffset(Z,0),R=0,Z=0)}R>0&&(this.dMultiply(Math.pow(f,R)),this.dAddOffset(Z,0)),E&&d.ZERO.subTo(this,this)}function kt(u,f,O){if(typeof f=="number")if(u<2)this.fromInt(1);else for(this.fromNumber(u,O),this.testBit(u-1)||this.bitwiseTo(d.ONE.shiftLeft(u-1),ln,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(f);)this.dAddOffset(2,0),this.bitLength()>u&&this.subTo(d.ONE.shiftLeft(u-1),this);else{var S=new Array,E=u&7;S.length=(u>>3)+1,f.nextBytes(S),E>0?S[0]&=(1<<E)-1:S[0]=0,this.fromString(S,256)}}function At(){var u=this.t,f=new Array;f[0]=this.s;var O=this.DB-u*this.DB%8,S,E=0;if(u-- >0)for(O<this.DB&&(S=this[u]>>O)!=(this.s&this.DM)>>O&&(f[E++]=S|this.s<<this.DB-O);u>=0;)O<8?(S=(this[u]&(1<<O)-1)<<8-O,S|=this[--u]>>(O+=this.DB-8)):(S=this[u]>>(O-=8)&255,O<=0&&(O+=this.DB,--u)),S&128&&(S|=-256),E==0&&(this.s&128)!=(S&128)&&++E,(E>0||S!=this.s)&&(f[E++]=S);return f}function Qt(u){return this.compareTo(u)==0}function ei(u){return this.compareTo(u)<0?this:u}function Vt(u){return this.compareTo(u)>0?this:u}function Ln(u,f,O){var S,E,R=Math.min(u.t,this.t);for(S=0;S<R;++S)O[S]=f(this[S],u[S]);if(u.t<this.t){for(E=u.s&this.DM,S=R;S<this.t;++S)O[S]=f(this[S],E);O.t=this.t}else{for(E=this.s&this.DM,S=R;S<u.t;++S)O[S]=f(E,u[S]);O.t=u.t}O.s=f(this.s,u.s),O.clamp()}function Wt(u,f){return u&f}function gn(u){var f=v();return this.bitwiseTo(u,Wt,f),f}function ln(u,f){return u|f}function kn(u){var f=v();return this.bitwiseTo(u,ln,f),f}function ye(u,f){return u^f}function be(u){var f=v();return this.bitwiseTo(u,ye,f),f}function ze(u,f){return u&~f}function st(u){var f=v();return this.bitwiseTo(u,ze,f),f}function ui(){for(var u=v(),f=0;f<this.t;++f)u[f]=this.DM&~this[f];return u.t=this.t,u.s=~this.s,u}function An(u){var f=v();return u<0?this.rShiftTo(-u,f):this.lShiftTo(u,f),f}function un(u){var f=v();return u<0?this.lShiftTo(-u,f):this.rShiftTo(u,f),f}function zr(u){if(u==0)return-1;var f=0;return u&65535||(u>>=16,f+=16),u&255||(u>>=8,f+=8),u&15||(u>>=4,f+=4),u&3||(u>>=2,f+=2),u&1||++f,f}function yo(){for(var u=0;u<this.t;++u)if(this[u]!=0)return u*this.DB+zr(this[u]);return this.s<0?this.t*this.DB:-1}function en(u){for(var f=0;u!=0;)u&=u-1,++f;return f}function Oo(){for(var u=0,f=this.s&this.DM,O=0;O<this.t;++O)u+=en(this[O]^f);return u}function xo(u){var f=Math.floor(u/this.DB);return f>=this.t?this.s!=0:(this[f]&1<<u%this.DB)!=0}function Mi(u,f){var O=d.ONE.shiftLeft(u);return this.bitwiseTo(O,f,O),O}function gr(u){return this.changeBit(u,ln)}function vr(u){return this.changeBit(u,ze)}function yr(u){return this.changeBit(u,ye)}function Ss(u,f){for(var O=0,S=0,E=Math.min(u.t,this.t);O<E;)S+=this[O]+u[O],f[O++]=S&this.DM,S>>=this.DB;if(u.t<this.t){for(S+=u.s;O<this.t;)S+=this[O],f[O++]=S&this.DM,S>>=this.DB;S+=this.s}else{for(S+=this.s;O<u.t;)S+=u[O],f[O++]=S&this.DM,S>>=this.DB;S+=u.s}f.s=S<0?-1:0,S>0?f[O++]=S:S<-1&&(f[O++]=this.DV+S),f.t=O,f.clamp()}function Do(u){var f=v();return this.addTo(u,f),f}function jr(u){var f=v();return this.subTo(u,f),f}function Co(u){var f=v();return this.multiplyTo(u,f),f}function bo(){var u=v();return this.squareTo(u),u}function So(u){var f=v();return this.divRemTo(u,f,null),f}function Gr(u){var f=v();return this.divRemTo(u,null,f),f}function En(u){var f=v(),O=v();return this.divRemTo(u,f,O),new Array(f,O)}function ws(u){this[this.t]=this.am(0,u-1,this,0,0,this.t),++this.t,this.clamp()}function hn(u,f){if(u!=0){for(;this.t<=f;)this[this.t++]=0;for(this[f]+=u;this[f]>=this.DV;)this[f]-=this.DV,++f>=this.t&&(this[this.t++]=0),++this[f]}}function sr(){}function Vr(u){return u}function Ps(u,f,O){u.multiplyTo(f,O)}function wo(u,f){u.squareTo(f)}sr.prototype.convert=Vr,sr.prototype.revert=Vr,sr.prototype.mulTo=Ps,sr.prototype.sqrTo=wo;function Ls(u){return this.exp(u,new sr)}function wi(u,f,O){var S=Math.min(this.t+u.t,f);for(O.s=0,O.t=S;S>0;)O[--S]=0;var E;for(E=O.t-this.t;S<E;++S)O[S+this.t]=this.am(0,u[S],O,S,0,this.t);for(E=Math.min(u.t,f);S<E;++S)this.am(0,u[S],O,S,0,f-S);O.clamp()}function Gi(u,f,O){--f;var S=O.t=this.t+u.t-f;for(O.s=0;--S>=0;)O[S]=0;for(S=Math.max(f-this.t,0);S<u.t;++S)O[this.t+S-f]=this.am(f-S,u[S],O,0,0,this.t+S-f);O.clamp(),O.drShiftTo(1,O)}function ni(u){this.r2=v(),this.q3=v(),d.ONE.dlShiftTo(2*u.t,this.r2),this.mu=this.r2.divide(u),this.m=u}function ks(u){if(u.s<0||u.t>2*this.m.t)return u.mod(this.m);if(u.compareTo(this.m)<0)return u;var f=v();return u.copyTo(f),this.reduce(f),f}function Po(u){return u}function As(u){for(u.drShiftTo(this.m.t-1,this.r2),u.t>this.m.t+1&&(u.t=this.m.t+1,u.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);u.compareTo(this.r2)<0;)u.dAddOffset(1,this.m.t+1);for(u.subTo(this.r2,u);u.compareTo(this.m)>=0;)u.subTo(this.m,u)}function Or(u,f){u.squareTo(f),this.reduce(f)}function qr(u,f,O){u.multiplyTo(f,O),this.reduce(O)}ni.prototype.convert=ks,ni.prototype.revert=Po,ni.prototype.reduce=As,ni.prototype.mulTo=qr,ni.prototype.sqrTo=Or;function or(u,f){var O=u.bitLength(),S,E=oe(1),R;if(O<=0)return E;O<18?S=1:O<48?S=3:O<144?S=4:O<768?S=5:S=6,O<8?R=new et(f):f.isEven()?R=new ni(f):R=new Pe(f);var Z=new Array,te=3,ie=S-1,pe=(1<<S)-1;if(Z[1]=R.convert(this),S>1){var Re=v();for(R.sqrTo(Z[1],Re);te<=pe;)Z[te]=v(),R.mulTo(Re,Z[te-2],Z[te]),te+=2}var _e=u.t-1,qe,dt=!0,St=v(),wt;for(O=De(u[_e])-1;_e>=0;){for(O>=ie?qe=u[_e]>>O-ie&pe:(qe=(u[_e]&(1<<O+1)-1)<<ie-O,_e>0&&(qe|=u[_e-1]>>this.DB+O-ie)),te=S;!(qe&1);)qe>>=1,--te;if((O-=te)<0&&(O+=this.DB,--_e),dt)Z[qe].copyTo(E),dt=!1;else{for(;te>1;)R.sqrTo(E,St),R.sqrTo(St,E),te-=2;te>0?R.sqrTo(E,St):(wt=E,E=St,St=wt),R.mulTo(St,Z[qe],E)}for(;_e>=0&&!(u[_e]&1<<O);)R.sqrTo(E,St),wt=E,E=St,St=wt,--O<0&&(O=this.DB-1,--_e)}return R.revert(E)}function xr(u){var f=this.s<0?this.negate():this.clone(),O=u.s<0?u.negate():u.clone();if(f.compareTo(O)<0){var S=f;f=O,O=S}var E=f.getLowestSetBit(),R=O.getLowestSetBit();if(R<0)return f;for(E<R&&(R=E),R>0&&(f.rShiftTo(R,f),O.rShiftTo(R,O));f.signum()>0;)(E=f.getLowestSetBit())>0&&f.rShiftTo(E,f),(E=O.getLowestSetBit())>0&&O.rShiftTo(E,O),f.compareTo(O)>=0?(f.subTo(O,f),f.rShiftTo(1,f)):(O.subTo(f,O),O.rShiftTo(1,O));return R>0&&O.lShiftTo(R,O),O}function tn(u){if(u<=0)return 0;var f=this.DV%u,O=this.s<0?u-1:0;if(this.t>0)if(f==0)O=this[0]%u;else for(var S=this.t-1;S>=0;--S)O=(f*O+this[S])%u;return O}function Lo(u){var f=u.isEven();if(this.isEven()&&f||u.signum()==0)return d.ZERO;for(var O=u.clone(),S=this.clone(),E=oe(1),R=oe(0),Z=oe(0),te=oe(1);O.signum()!=0;){for(;O.isEven();)O.rShiftTo(1,O),f?((!E.isEven()||!R.isEven())&&(E.addTo(this,E),R.subTo(u,R)),E.rShiftTo(1,E)):R.isEven()||R.subTo(u,R),R.rShiftTo(1,R);for(;S.isEven();)S.rShiftTo(1,S),f?((!Z.isEven()||!te.isEven())&&(Z.addTo(this,Z),te.subTo(u,te)),Z.rShiftTo(1,Z)):te.isEven()||te.subTo(u,te),te.rShiftTo(1,te);O.compareTo(S)>=0?(O.subTo(S,O),f&&E.subTo(Z,E),R.subTo(te,R)):(S.subTo(O,S),f&&Z.subTo(E,Z),te.subTo(R,te))}if(S.compareTo(d.ONE)!=0)return d.ZERO;if(te.compareTo(u)>=0)return te.subtract(u);if(te.signum()<0)te.addTo(u,te);else return te;return te.signum()<0?te.add(u):te}var mi=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],nn=(1<<26)/mi[mi.length-1];function Yt(u){var f,O=this.abs();if(O.t==1&&O[0]<=mi[mi.length-1]){for(f=0;f<mi.length;++f)if(O[0]==mi[f])return!0;return!1}if(O.isEven())return!1;for(f=1;f<mi.length;){for(var S=mi[f],E=f+1;E<mi.length&&S<nn;)S*=mi[E++];for(S=O.modInt(S);f<E;)if(S%mi[f++]==0)return!1}return O.millerRabin(u)}function Es(u){var f=this.subtract(d.ONE),O=f.getLowestSetBit();if(O<=0)return!1;var S=f.shiftRight(O);u=u+1>>1,u>mi.length&&(u=mi.length);for(var E=v(),R=0;R<u;++R){E.fromInt(mi[Math.floor(Math.random()*mi.length)]);var Z=E.modPow(S,this);if(Z.compareTo(d.ONE)!=0&&Z.compareTo(f)!=0){for(var te=1;te++<O&&Z.compareTo(f)!=0;)if(Z=Z.modPowInt(2,this),Z.compareTo(d.ONE)==0)return!1;if(Z.compareTo(f)!=0)return!1}}return!0}d.prototype.chunkSize=Pt,d.prototype.toRadix=ji,d.prototype.fromRadix=pi,d.prototype.fromNumber=kt,d.prototype.bitwiseTo=Ln,d.prototype.changeBit=Mi,d.prototype.addTo=Ss,d.prototype.dMultiply=ws,d.prototype.dAddOffset=hn,d.prototype.multiplyLowerTo=wi,d.prototype.multiplyUpperTo=Gi,d.prototype.modInt=tn,d.prototype.millerRabin=Es,d.prototype.clone=Ke,d.prototype.intValue=Ne,d.prototype.byteValue=at,d.prototype.shortValue=mt,d.prototype.signum=li,d.prototype.toByteArray=At,d.prototype.equals=Qt,d.prototype.min=ei,d.prototype.max=Vt,d.prototype.and=gn,d.prototype.or=kn,d.prototype.xor=be,d.prototype.andNot=st,d.prototype.not=ui,d.prototype.shiftLeft=An,d.prototype.shiftRight=un,d.prototype.getLowestSetBit=yo,d.prototype.bitCount=Oo,d.prototype.testBit=xo,d.prototype.setBit=gr,d.prototype.clearBit=vr,d.prototype.flipBit=yr,d.prototype.add=Do,d.prototype.subtract=jr,d.prototype.multiply=Co,d.prototype.divide=So,d.prototype.remainder=Gr,d.prototype.divideAndRemainder=En,d.prototype.modPow=or,d.prototype.modInverse=Lo,d.prototype.pow=Ls,d.prototype.gcd=xr,d.prototype.isProbablePrime=Yt,d.prototype.square=bo;var Ct=d;Ct.prototype.IsNegative=function(){return this.compareTo(Ct.ZERO)==-1},Ct.op_Equality=function(u,f){return u.compareTo(f)==0},Ct.op_Inequality=function(u,f){return u.compareTo(f)!=0},Ct.op_GreaterThan=function(u,f){return u.compareTo(f)>0},Ct.op_LessThan=function(u,f){return u.compareTo(f)<0},Ct.op_Addition=function(u,f){return new Ct(u,void 0,void 0).add(new Ct(f,void 0,void 0))},Ct.op_Subtraction=function(u,f){return new Ct(u,void 0,void 0).subtract(new Ct(f,void 0,void 0))},Ct.Int128Mul=function(u,f){return new Ct(u,void 0,void 0).multiply(new Ct(f,void 0,void 0))},Ct.op_Division=function(u,f){return u.divide(f)},Ct.prototype.ToDouble=function(){return parseFloat(this.toString())};var Hr=function(u,f){var O;if(typeof Object.getOwnPropertyNames>"u"){for(O in f.prototype)(typeof u.prototype[O]>"u"||u.prototype[O]===Object.prototype[O])&&(u.prototype[O]=f.prototype[O]);for(O in f)typeof u[O]>"u"&&(u[O]=f[O]);u.$baseCtor=f}else{for(var S=Object.getOwnPropertyNames(f.prototype),E=0;E<S.length;E++)typeof Object.getOwnPropertyDescriptor(u.prototype,S[E])>"u"&&Object.defineProperty(u.prototype,S[E],Object.getOwnPropertyDescriptor(f.prototype,S[E]));for(O in f)typeof u[O]>"u"&&(u[O]=f[O]);u.$baseCtor=f}};s.Path=function(){return[]},s.Path.prototype.push=Array.prototype.push,s.Paths=function(){return[]},s.Paths.prototype.push=Array.prototype.push,s.DoublePoint=function(){var u=arguments;this.X=0,this.Y=0,u.length===1?(this.X=u[0].X,this.Y=u[0].Y):u.length===2&&(this.X=u[0],this.Y=u[1])},s.DoublePoint0=function(){this.X=0,this.Y=0},s.DoublePoint0.prototype=s.DoublePoint.prototype,s.DoublePoint1=function(u){this.X=u.X,this.Y=u.Y},s.DoublePoint1.prototype=s.DoublePoint.prototype,s.DoublePoint2=function(u,f){this.X=u,this.Y=f},s.DoublePoint2.prototype=s.DoublePoint.prototype,s.PolyNode=function(){this.m_Parent=null,this.m_polygon=new s.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},s.PolyNode.prototype.IsHoleNode=function(){for(var u=!0,f=this.m_Parent;f!==null;)u=!u,f=f.m_Parent;return u},s.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},s.PolyNode.prototype.Contour=function(){return this.m_polygon},s.PolyNode.prototype.AddChild=function(u){var f=this.m_Childs.length;this.m_Childs.push(u),u.m_Parent=this,u.m_Index=f},s.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},s.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},s.PolyNode.prototype.Childs=function(){return this.m_Childs},s.PolyNode.prototype.Parent=function(){return this.m_Parent},s.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},s.PolyTree=function(){this.m_AllPolys=[],s.PolyNode.call(this)},s.PolyTree.prototype.Clear=function(){for(var u=0,f=this.m_AllPolys.length;u<f;u++)this.m_AllPolys[u]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},s.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},s.PolyTree.prototype.Total=function(){var u=this.m_AllPolys.length;return u>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&u--,u},Hr(s.PolyTree,s.PolyNode),s.Math_Abs_Int64=s.Math_Abs_Int32=s.Math_Abs_Double=function(u){return Math.abs(u)},s.Math_Max_Int32_Int32=function(u,f){return Math.max(u,f)},c.msie||c.opera||c.safari?s.Cast_Int32=function(u){return u|0}:s.Cast_Int32=function(u){return~~u},typeof Number.toInteger>"u"&&(Number.toInteger=null),c.chrome?s.Cast_Int64=function(u){return u<-2147483648||u>2147483647?u<0?Math.ceil(u):Math.floor(u):~~u}:c.firefox&&typeof Number.toInteger=="function"?s.Cast_Int64=function(u){return Number.toInteger(u)}:c.msie7||c.msie8?s.Cast_Int64=function(u){return parseInt(u,10)}:c.msie?s.Cast_Int64=function(u){return u<-2147483648||u>2147483647?u<0?Math.ceil(u):Math.floor(u):u|0}:s.Cast_Int64=function(u){return u<0?Math.ceil(u):Math.floor(u)},s.Clear=function(u){u.length=0},s.PI=3.141592653589793,s.PI2=2*3.141592653589793,s.IntPoint=function(){var u=arguments,f=u.length;if(this.X=0,this.Y=0,s.use_xyz)if(this.Z=0,f===3)this.X=u[0],this.Y=u[1],this.Z=u[2];else if(f===2)this.X=u[0],this.Y=u[1],this.Z=0;else if(f===1)if(u[0]instanceof s.DoublePoint){var O=u[0];this.X=s.Clipper.Round(O.X),this.Y=s.Clipper.Round(O.Y),this.Z=0}else{var S=u[0];typeof S.Z>"u"&&(S.Z=0),this.X=S.X,this.Y=S.Y,this.Z=S.Z}else this.X=0,this.Y=0,this.Z=0;else if(f===2)this.X=u[0],this.Y=u[1];else if(f===1)if(u[0]instanceof s.DoublePoint){var O=u[0];this.X=s.Clipper.Round(O.X),this.Y=s.Clipper.Round(O.Y)}else{var S=u[0];this.X=S.X,this.Y=S.Y}else this.X=0,this.Y=0},s.IntPoint.op_Equality=function(u,f){return u.X===f.X&&u.Y===f.Y},s.IntPoint.op_Inequality=function(u,f){return u.X!==f.X||u.Y!==f.Y},s.IntPoint0=function(){this.X=0,this.Y=0,s.use_xyz&&(this.Z=0)},s.IntPoint0.prototype=s.IntPoint.prototype,s.IntPoint1=function(u){this.X=u.X,this.Y=u.Y,s.use_xyz&&(typeof u.Z>"u"?this.Z=0:this.Z=u.Z)},s.IntPoint1.prototype=s.IntPoint.prototype,s.IntPoint1dp=function(u){this.X=s.Clipper.Round(u.X),this.Y=s.Clipper.Round(u.Y),s.use_xyz&&(this.Z=0)},s.IntPoint1dp.prototype=s.IntPoint.prototype,s.IntPoint2=function(u,f,O){this.X=u,this.Y=f,s.use_xyz&&(typeof O>"u"?this.Z=0:this.Z=O)},s.IntPoint2.prototype=s.IntPoint.prototype,s.IntRect=function(){var u=arguments,f=u.length;if(f===4)this.left=u[0],this.top=u[1],this.right=u[2],this.bottom=u[3];else if(f===1){var O=u[0];this.left=O.left,this.top=O.top,this.right=O.right,this.bottom=O.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0.prototype=s.IntRect.prototype,s.IntRect1=function(u){this.left=u.left,this.top=u.top,this.right=u.right,this.bottom=u.bottom},s.IntRect1.prototype=s.IntRect.prototype,s.IntRect4=function(u,f,O,S){this.left=u,this.top=f,this.right=O,this.bottom=S},s.IntRect4.prototype=s.IntRect.prototype,s.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},s.PolyType={ptSubject:0,ptClip:1},s.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},s.JoinType={jtSquare:0,jtRound:1,jtMiter:2},s.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},s.EdgeSide={esLeft:0,esRight:1},s.Direction={dRightToLeft:0,dLeftToRight:1},s.TEdge=function(){this.Bot=new s.IntPoint0,this.Curr=new s.IntPoint0,this.Top=new s.IntPoint0,this.Delta=new s.IntPoint0,this.Dx=0,this.PolyTyp=s.PolyType.ptSubject,this.Side=s.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},s.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new s.IntPoint0},s.MyIntersectNodeSort=function(){},s.MyIntersectNodeSort.Compare=function(u,f){var O=f.Pt.Y-u.Pt.Y;return O>0?1:O<0?-1:0},s.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},s.Scanbeam=function(){this.Y=0,this.Next=null},s.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},s.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},s.OutPt=function(){this.Idx=0,this.Pt=new s.IntPoint0,this.Next=null,this.Prev=null},s.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new s.IntPoint0},s.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},s.ClipperBase.horizontal=-9007199254740992,s.ClipperBase.Skip=-2,s.ClipperBase.Unassigned=-1,s.ClipperBase.tolerance=1e-20,s.ClipperBase.loRange=47453132,s.ClipperBase.hiRange=0xfffffffffffff,s.ClipperBase.near_zero=function(u){return u>-s.ClipperBase.tolerance&&u<s.ClipperBase.tolerance},s.ClipperBase.IsHorizontal=function(u){return u.Delta.Y===0},s.ClipperBase.prototype.PointIsVertex=function(u,f){var O=f;do{if(s.IntPoint.op_Equality(O.Pt,u))return!0;O=O.Next}while(O!==f);return!1},s.ClipperBase.prototype.PointOnLineSegment=function(u,f,O,S){return S?u.X===f.X&&u.Y===f.Y||u.X===O.X&&u.Y===O.Y||u.X>f.X==u.X<O.X&&u.Y>f.Y==u.Y<O.Y&&Ct.op_Equality(Ct.Int128Mul(u.X-f.X,O.Y-f.Y),Ct.Int128Mul(O.X-f.X,u.Y-f.Y)):u.X===f.X&&u.Y===f.Y||u.X===O.X&&u.Y===O.Y||u.X>f.X==u.X<O.X&&u.Y>f.Y==u.Y<O.Y&&(u.X-f.X)*(O.Y-f.Y)===(O.X-f.X)*(u.Y-f.Y)},s.ClipperBase.prototype.PointOnPolygon=function(u,f,O){for(var S=f;;){if(this.PointOnLineSegment(u,S.Pt,S.Next.Pt,O))return!0;if(S=S.Next,S===f)break}return!1},s.ClipperBase.prototype.SlopesEqual=s.ClipperBase.SlopesEqual=function(){var u=arguments,f=u.length,O,S,E,R,Z,te,ie;return f===3?(O=u[0],S=u[1],ie=u[2],ie?Ct.op_Equality(Ct.Int128Mul(O.Delta.Y,S.Delta.X),Ct.Int128Mul(O.Delta.X,S.Delta.Y)):s.Cast_Int64(O.Delta.Y*S.Delta.X)===s.Cast_Int64(O.Delta.X*S.Delta.Y)):f===4?(E=u[0],R=u[1],Z=u[2],ie=u[3],ie?Ct.op_Equality(Ct.Int128Mul(E.Y-R.Y,R.X-Z.X),Ct.Int128Mul(E.X-R.X,R.Y-Z.Y)):s.Cast_Int64((E.Y-R.Y)*(R.X-Z.X))-s.Cast_Int64((E.X-R.X)*(R.Y-Z.Y))===0):(E=u[0],R=u[1],Z=u[2],te=u[3],ie=u[4],ie?Ct.op_Equality(Ct.Int128Mul(E.Y-R.Y,Z.X-te.X),Ct.Int128Mul(E.X-R.X,Z.Y-te.Y)):s.Cast_Int64((E.Y-R.Y)*(Z.X-te.X))-s.Cast_Int64((E.X-R.X)*(Z.Y-te.Y))===0)},s.ClipperBase.SlopesEqual3=function(u,f,O){return O?Ct.op_Equality(Ct.Int128Mul(u.Delta.Y,f.Delta.X),Ct.Int128Mul(u.Delta.X,f.Delta.Y)):s.Cast_Int64(u.Delta.Y*f.Delta.X)===s.Cast_Int64(u.Delta.X*f.Delta.Y)},s.ClipperBase.SlopesEqual4=function(u,f,O,S){return S?Ct.op_Equality(Ct.Int128Mul(u.Y-f.Y,f.X-O.X),Ct.Int128Mul(u.X-f.X,f.Y-O.Y)):s.Cast_Int64((u.Y-f.Y)*(f.X-O.X))-s.Cast_Int64((u.X-f.X)*(f.Y-O.Y))===0},s.ClipperBase.SlopesEqual5=function(u,f,O,S,E){return E?Ct.op_Equality(Ct.Int128Mul(u.Y-f.Y,O.X-S.X),Ct.Int128Mul(u.X-f.X,O.Y-S.Y)):s.Cast_Int64((u.Y-f.Y)*(O.X-S.X))-s.Cast_Int64((u.X-f.X)*(O.Y-S.Y))===0},s.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var u=0,f=this.m_edges.length;u<f;++u){for(var O=0,S=this.m_edges[u].length;O<S;++O)this.m_edges[u][O]=null;s.Clear(this.m_edges[u])}s.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},s.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var u=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=u}this.m_CurrentLM=null},s.ClipperBase.prototype.RangeTest=function(u,f){f.Value?(u.X>s.ClipperBase.hiRange||u.Y>s.ClipperBase.hiRange||-u.X>s.ClipperBase.hiRange||-u.Y>s.ClipperBase.hiRange)&&s.Error("Coordinate outside allowed range in RangeTest()."):(u.X>s.ClipperBase.loRange||u.Y>s.ClipperBase.loRange||-u.X>s.ClipperBase.loRange||-u.Y>s.ClipperBase.loRange)&&(f.Value=!0,this.RangeTest(u,f))},s.ClipperBase.prototype.InitEdge=function(u,f,O,S){u.Next=f,u.Prev=O,u.Curr.X=S.X,u.Curr.Y=S.Y,s.use_xyz&&(u.Curr.Z=S.Z),u.OutIdx=-1},s.ClipperBase.prototype.InitEdge2=function(u,f){u.Curr.Y>=u.Next.Curr.Y?(u.Bot.X=u.Curr.X,u.Bot.Y=u.Curr.Y,s.use_xyz&&(u.Bot.Z=u.Curr.Z),u.Top.X=u.Next.Curr.X,u.Top.Y=u.Next.Curr.Y,s.use_xyz&&(u.Top.Z=u.Next.Curr.Z)):(u.Top.X=u.Curr.X,u.Top.Y=u.Curr.Y,s.use_xyz&&(u.Top.Z=u.Curr.Z),u.Bot.X=u.Next.Curr.X,u.Bot.Y=u.Next.Curr.Y,s.use_xyz&&(u.Bot.Z=u.Next.Curr.Z)),this.SetDx(u),u.PolyTyp=f},s.ClipperBase.prototype.FindNextLocMin=function(u){for(var f;;){for(;s.IntPoint.op_Inequality(u.Bot,u.Prev.Bot)||s.IntPoint.op_Equality(u.Curr,u.Top);)u=u.Next;if(u.Dx!==s.ClipperBase.horizontal&&u.Prev.Dx!==s.ClipperBase.horizontal)break;for(;u.Prev.Dx===s.ClipperBase.horizontal;)u=u.Prev;for(f=u;u.Dx===s.ClipperBase.horizontal;)u=u.Next;if(u.Top.Y!==u.Prev.Bot.Y){f.Prev.Bot.X<u.Bot.X&&(u=f);break}}return u},s.ClipperBase.prototype.ProcessBound=function(u,f){var O,S=u,E;if(S.OutIdx===s.ClipperBase.Skip){if(u=S,f){for(;u.Top.Y===u.Next.Bot.Y;)u=u.Next;for(;u!==S&&u.Dx===s.ClipperBase.horizontal;)u=u.Prev}else{for(;u.Top.Y===u.Prev.Bot.Y;)u=u.Prev;for(;u!==S&&u.Dx===s.ClipperBase.horizontal;)u=u.Next}if(u===S)f?S=u.Next:S=u.Prev;else{f?u=S.Next:u=S.Prev;var R=new s.LocalMinima;R.Next=null,R.Y=u.Bot.Y,R.LeftBound=null,R.RightBound=u,u.WindDelta=0,S=this.ProcessBound(u,f),this.InsertLocalMinima(R)}return S}if(u.Dx===s.ClipperBase.horizontal&&(f?O=u.Prev:O=u.Next,O.Dx===s.ClipperBase.horizontal?O.Bot.X!==u.Bot.X&&O.Top.X!==u.Bot.X&&this.ReverseHorizontal(u):O.Bot.X!==u.Bot.X&&this.ReverseHorizontal(u)),O=u,f){for(;S.Top.Y===S.Next.Bot.Y&&S.Next.OutIdx!==s.ClipperBase.Skip;)S=S.Next;if(S.Dx===s.ClipperBase.horizontal&&S.Next.OutIdx!==s.ClipperBase.Skip){for(E=S;E.Prev.Dx===s.ClipperBase.horizontal;)E=E.Prev;E.Prev.Top.X>S.Next.Top.X&&(S=E.Prev)}for(;u!==S;)u.NextInLML=u.Next,u.Dx===s.ClipperBase.horizontal&&u!==O&&u.Bot.X!==u.Prev.Top.X&&this.ReverseHorizontal(u),u=u.Next;u.Dx===s.ClipperBase.horizontal&&u!==O&&u.Bot.X!==u.Prev.Top.X&&this.ReverseHorizontal(u),S=S.Next}else{for(;S.Top.Y===S.Prev.Bot.Y&&S.Prev.OutIdx!==s.ClipperBase.Skip;)S=S.Prev;if(S.Dx===s.ClipperBase.horizontal&&S.Prev.OutIdx!==s.ClipperBase.Skip){for(E=S;E.Next.Dx===s.ClipperBase.horizontal;)E=E.Next;(E.Next.Top.X===S.Prev.Top.X||E.Next.Top.X>S.Prev.Top.X)&&(S=E.Next)}for(;u!==S;)u.NextInLML=u.Prev,u.Dx===s.ClipperBase.horizontal&&u!==O&&u.Bot.X!==u.Next.Top.X&&this.ReverseHorizontal(u),u=u.Prev;u.Dx===s.ClipperBase.horizontal&&u!==O&&u.Bot.X!==u.Next.Top.X&&this.ReverseHorizontal(u),S=S.Prev}return S},s.ClipperBase.prototype.AddPath=function(u,f,O){s.use_lines?!O&&f===s.PolyType.ptClip&&s.Error("AddPath: Open paths must be subject."):O||s.Error("AddPath: Open paths have been disabled.");var S=u.length-1;if(O)for(;S>0&&s.IntPoint.op_Equality(u[S],u[0]);)--S;for(;S>0&&s.IntPoint.op_Equality(u[S],u[S-1]);)--S;if(O&&S<2||!O&&S<1)return!1;for(var E=new Array,R=0;R<=S;R++)E.push(new s.TEdge);var Z=!0;E[1].Curr.X=u[1].X,E[1].Curr.Y=u[1].Y,s.use_xyz&&(E[1].Curr.Z=u[1].Z);var te={Value:this.m_UseFullRange};this.RangeTest(u[0],te),this.m_UseFullRange=te.Value,te.Value=this.m_UseFullRange,this.RangeTest(u[S],te),this.m_UseFullRange=te.Value,this.InitEdge(E[0],E[1],E[S],u[0]),this.InitEdge(E[S],E[0],E[S-1],u[S]);for(var R=S-1;R>=1;--R)te.Value=this.m_UseFullRange,this.RangeTest(u[R],te),this.m_UseFullRange=te.Value,this.InitEdge(E[R],E[R+1],E[R-1],u[R]);for(var ie=E[0],pe=ie,Re=ie;;){if(pe.Curr===pe.Next.Curr&&(O||pe.Next!==ie)){if(pe===pe.Next)break;pe===ie&&(ie=pe.Next),pe=this.RemoveEdge(pe),Re=pe;continue}if(pe.Prev===pe.Next)break;if(O&&s.ClipperBase.SlopesEqual4(pe.Prev.Curr,pe.Curr,pe.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(pe.Prev.Curr,pe.Curr,pe.Next.Curr))){pe===ie&&(ie=pe.Next),pe=this.RemoveEdge(pe),pe=pe.Prev,Re=pe;continue}if(pe=pe.Next,pe===Re||!O&&pe.Next===ie)break}if(!O&&pe===pe.Next||O&&pe.Prev===pe.Next)return!1;O||(this.m_HasOpenPaths=!0,ie.Prev.OutIdx=s.ClipperBase.Skip),pe=ie;do this.InitEdge2(pe,f),pe=pe.Next,Z&&pe.Curr.Y!==ie.Curr.Y&&(Z=!1);while(pe!==ie);if(Z){if(O)return!1;pe.Prev.OutIdx=s.ClipperBase.Skip;var _e=new s.LocalMinima;for(_e.Next=null,_e.Y=pe.Bot.Y,_e.LeftBound=null,_e.RightBound=pe,_e.RightBound.Side=s.EdgeSide.esRight,_e.RightBound.WindDelta=0;pe.Bot.X!==pe.Prev.Top.X&&this.ReverseHorizontal(pe),pe.Next.OutIdx!==s.ClipperBase.Skip;)pe.NextInLML=pe.Next,pe=pe.Next;return this.InsertLocalMinima(_e),this.m_edges.push(E),!0}this.m_edges.push(E);var qe,dt=null;for(s.IntPoint.op_Equality(pe.Prev.Bot,pe.Prev.Top)&&(pe=pe.Next);pe=this.FindNextLocMin(pe),pe!==dt;){dt===null&&(dt=pe);var _e=new s.LocalMinima;_e.Next=null,_e.Y=pe.Bot.Y,pe.Dx<pe.Prev.Dx?(_e.LeftBound=pe.Prev,_e.RightBound=pe,qe=!1):(_e.LeftBound=pe,_e.RightBound=pe.Prev,qe=!0),_e.LeftBound.Side=s.EdgeSide.esLeft,_e.RightBound.Side=s.EdgeSide.esRight,O?_e.LeftBound.Next===_e.RightBound?_e.LeftBound.WindDelta=-1:_e.LeftBound.WindDelta=1:_e.LeftBound.WindDelta=0,_e.RightBound.WindDelta=-_e.LeftBound.WindDelta,pe=this.ProcessBound(_e.LeftBound,qe),pe.OutIdx===s.ClipperBase.Skip&&(pe=this.ProcessBound(pe,qe));var St=this.ProcessBound(_e.RightBound,!qe);St.OutIdx===s.ClipperBase.Skip&&(St=this.ProcessBound(St,!qe)),_e.LeftBound.OutIdx===s.ClipperBase.Skip?_e.LeftBound=null:_e.RightBound.OutIdx===s.ClipperBase.Skip&&(_e.RightBound=null),this.InsertLocalMinima(_e),qe||(pe=St)}return!0},s.ClipperBase.prototype.AddPaths=function(u,f,O){for(var S=!1,E=0,R=u.length;E<R;++E)this.AddPath(u[E],f,O)&&(S=!0);return S},s.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(u,f,O){return s.IntPoint.op_Equality(u,O)||s.IntPoint.op_Equality(u,f)||s.IntPoint.op_Equality(O,f)?!1:u.X!==O.X?f.X>u.X==f.X<O.X:f.Y>u.Y==f.Y<O.Y},s.ClipperBase.prototype.RemoveEdge=function(u){u.Prev.Next=u.Next,u.Next.Prev=u.Prev;var f=u.Next;return u.Prev=null,f},s.ClipperBase.prototype.SetDx=function(u){u.Delta.X=u.Top.X-u.Bot.X,u.Delta.Y=u.Top.Y-u.Bot.Y,u.Delta.Y===0?u.Dx=s.ClipperBase.horizontal:u.Dx=u.Delta.X/u.Delta.Y},s.ClipperBase.prototype.InsertLocalMinima=function(u){if(this.m_MinimaList===null)this.m_MinimaList=u;else if(u.Y>=this.m_MinimaList.Y)u.Next=this.m_MinimaList,this.m_MinimaList=u;else{for(var f=this.m_MinimaList;f.Next!==null&&u.Y<f.Next.Y;)f=f.Next;u.Next=f.Next,f.Next=u}},s.ClipperBase.prototype.PopLocalMinima=function(u,f){return f.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===u?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},s.ClipperBase.prototype.ReverseHorizontal=function(u){var f=u.Top.X;u.Top.X=u.Bot.X,u.Bot.X=f,s.use_xyz&&(f=u.Top.Z,u.Top.Z=u.Bot.Z,u.Bot.Z=f)},s.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var u=this.m_MinimaList;u!==null;){this.InsertScanbeam(u.Y);var f=u.LeftBound;f!==null&&(f.Curr.X=f.Bot.X,f.Curr.Y=f.Bot.Y,s.use_xyz&&(f.Curr.Z=f.Bot.Z),f.OutIdx=s.ClipperBase.Unassigned),f=u.RightBound,f!==null&&(f.Curr.X=f.Bot.X,f.Curr.Y=f.Bot.Y,s.use_xyz&&(f.Curr.Z=f.Bot.Z),f.OutIdx=s.ClipperBase.Unassigned),u=u.Next}this.m_ActiveEdges=null}},s.ClipperBase.prototype.InsertScanbeam=function(u){if(this.m_Scanbeam===null)this.m_Scanbeam=new s.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=u;else if(u>this.m_Scanbeam.Y){var f=new s.Scanbeam;f.Y=u,f.Next=this.m_Scanbeam,this.m_Scanbeam=f}else{for(var O=this.m_Scanbeam;O.Next!==null&&u<=O.Next.Y;)O=O.Next;if(u===O.Y)return;var S=new s.Scanbeam;S.Y=u,S.Next=O.Next,O.Next=S}},s.ClipperBase.prototype.PopScanbeam=function(u){return this.m_Scanbeam===null?(u.v=0,!1):(u.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},s.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},s.ClipperBase.prototype.CreateOutRec=function(){var u=new s.OutRec;return u.Idx=s.ClipperBase.Unassigned,u.IsHole=!1,u.IsOpen=!1,u.FirstLeft=null,u.Pts=null,u.BottomPt=null,u.PolyNode=null,this.m_PolyOuts.push(u),u.Idx=this.m_PolyOuts.length-1,u},s.ClipperBase.prototype.DisposeOutRec=function(u){var f=this.m_PolyOuts[u];f.Pts=null,f=null,this.m_PolyOuts[u]=null},s.ClipperBase.prototype.UpdateEdgeIntoAEL=function(u){u.NextInLML===null&&s.Error("UpdateEdgeIntoAEL: invalid call");var f=u.PrevInAEL,O=u.NextInAEL;return u.NextInLML.OutIdx=u.OutIdx,f!==null?f.NextInAEL=u.NextInLML:this.m_ActiveEdges=u.NextInLML,O!==null&&(O.PrevInAEL=u.NextInLML),u.NextInLML.Side=u.Side,u.NextInLML.WindDelta=u.WindDelta,u.NextInLML.WindCnt=u.WindCnt,u.NextInLML.WindCnt2=u.WindCnt2,u=u.NextInLML,u.Curr.X=u.Bot.X,u.Curr.Y=u.Bot.Y,u.PrevInAEL=f,u.NextInAEL=O,s.ClipperBase.IsHorizontal(u)||this.InsertScanbeam(u.Top.Y),u},s.ClipperBase.prototype.SwapPositionsInAEL=function(u,f){if(!(u.NextInAEL===u.PrevInAEL||f.NextInAEL===f.PrevInAEL)){if(u.NextInAEL===f){var O=f.NextInAEL;O!==null&&(O.PrevInAEL=u);var S=u.PrevInAEL;S!==null&&(S.NextInAEL=f),f.PrevInAEL=S,f.NextInAEL=u,u.PrevInAEL=f,u.NextInAEL=O}else if(f.NextInAEL===u){var E=u.NextInAEL;E!==null&&(E.PrevInAEL=f);var R=f.PrevInAEL;R!==null&&(R.NextInAEL=u),u.PrevInAEL=R,u.NextInAEL=f,f.PrevInAEL=u,f.NextInAEL=E}else{var Z=u.NextInAEL,te=u.PrevInAEL;u.NextInAEL=f.NextInAEL,u.NextInAEL!==null&&(u.NextInAEL.PrevInAEL=u),u.PrevInAEL=f.PrevInAEL,u.PrevInAEL!==null&&(u.PrevInAEL.NextInAEL=u),f.NextInAEL=Z,f.NextInAEL!==null&&(f.NextInAEL.PrevInAEL=f),f.PrevInAEL=te,f.PrevInAEL!==null&&(f.PrevInAEL.NextInAEL=f)}u.PrevInAEL===null?this.m_ActiveEdges=u:f.PrevInAEL===null&&(this.m_ActiveEdges=f)}},s.ClipperBase.prototype.DeleteFromAEL=function(u){var f=u.PrevInAEL,O=u.NextInAEL;f===null&&O===null&&u!==this.m_ActiveEdges||(f!==null?f.NextInAEL=O:this.m_ActiveEdges=O,O!==null&&(O.PrevInAEL=f),u.NextInAEL=null,u.PrevInAEL=null)},s.Clipper=function(u){typeof u>"u"&&(u=0),this.m_PolyOuts=null,this.m_ClipType=s.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=s.PolyFillType.pftEvenOdd,this.m_SubjFillType=s.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,s.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=s.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&u)!==0,this.StrictlySimple=(2&u)!==0,this.PreserveCollinear=(4&u)!==0,s.use_xyz&&(this.ZFillFunction=null)},s.Clipper.ioReverseSolution=1,s.Clipper.ioStrictlySimple=2,s.Clipper.ioPreserveCollinear=4,s.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),s.ClipperBase.prototype.Clear.call(this))},s.Clipper.prototype.InsertMaxima=function(u){var f=new s.Maxima;if(f.X=u,this.m_Maxima===null)this.m_Maxima=f,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(u<this.m_Maxima.X)f.Next=this.m_Maxima,f.Prev=null,this.m_Maxima=f;else{for(var O=this.m_Maxima;O.Next!==null&&u>=O.Next.X;)O=O.Next;if(u===O.X)return;f.Next=O.Next,f.Prev=O,O.Next!==null&&(O.Next.Prev=f),O.Next=f}},s.Clipper.prototype.Execute=function(){var u=arguments,f=u.length,O=u[1]instanceof s.PolyTree;if(f===4&&!O){var S=u[0],E=u[1],R=u[2],Z=u[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&s.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,s.Clear(E),this.m_SubjFillType=R,this.m_ClipFillType=Z,this.m_ClipType=S,this.m_UsingPolyTree=!1;try{var te=this.ExecuteInternal();te&&this.BuildResult(E)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return te}else if(f===4&&O){var S=u[0],ie=u[1],R=u[2],Z=u[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=R,this.m_ClipFillType=Z,this.m_ClipType=S,this.m_UsingPolyTree=!0;try{var te=this.ExecuteInternal();te&&this.BuildResult2(ie)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return te}else if(f===2&&!O){var S=u[0],E=u[1];return this.Execute(S,E,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)}else if(f===2&&O){var S=u[0],ie=u[1];return this.Execute(S,ie,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)}},s.Clipper.prototype.FixHoleLinkage=function(u){if(!(u.FirstLeft===null||u.IsHole!==u.FirstLeft.IsHole&&u.FirstLeft.Pts!==null)){for(var f=u.FirstLeft;f!==null&&(f.IsHole===u.IsHole||f.Pts===null);)f=f.FirstLeft;u.FirstLeft=f}},s.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var u={},f={};if(!this.PopScanbeam(u))return!1;for(this.InsertLocalMinimaIntoAEL(u.v);this.PopScanbeam(f)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(f.v))return!1;this.ProcessEdgesAtTopOfScanbeam(f.v),u.v=f.v,this.InsertLocalMinimaIntoAEL(u.v)}var O,S,E;for(S=0,E=this.m_PolyOuts.length;S<E;S++)O=this.m_PolyOuts[S],!(O.Pts===null||O.IsOpen)&&(O.IsHole^this.ReverseSolution)==this.Area$1(O)>0&&this.ReversePolyPtLinks(O.Pts);for(this.JoinCommonEdges(),S=0,E=this.m_PolyOuts.length;S<E;S++)O=this.m_PolyOuts[S],O.Pts!==null&&(O.IsOpen?this.FixupOutPolyline(O):this.FixupOutPolygon(O));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},s.Clipper.prototype.DisposeAllPolyPts=function(){for(var u=0,f=this.m_PolyOuts.length;u<f;++u)this.DisposeOutRec(u);s.Clear(this.m_PolyOuts)},s.Clipper.prototype.AddJoin=function(u,f,O){var S=new s.Join;S.OutPt1=u,S.OutPt2=f,S.OffPt.X=O.X,S.OffPt.Y=O.Y,s.use_xyz&&(S.OffPt.Z=O.Z),this.m_Joins.push(S)},s.Clipper.prototype.AddGhostJoin=function(u,f){var O=new s.Join;O.OutPt1=u,O.OffPt.X=f.X,O.OffPt.Y=f.Y,s.use_xyz&&(O.OffPt.Z=f.Z),this.m_GhostJoins.push(O)},s.Clipper.prototype.SetZ=function(u,f,O){if(this.ZFillFunction!==null){if(u.Z!==0||this.ZFillFunction===null)return;s.IntPoint.op_Equality(u,f.Bot)?u.Z=f.Bot.Z:s.IntPoint.op_Equality(u,f.Top)?u.Z=f.Top.Z:s.IntPoint.op_Equality(u,O.Bot)?u.Z=O.Bot.Z:s.IntPoint.op_Equality(u,O.Top)?u.Z=O.Top.Z:this.ZFillFunction(f.Bot,f.Top,O.Bot,O.Top,u)}},s.Clipper.prototype.InsertLocalMinimaIntoAEL=function(u){for(var f={},O,S;this.PopLocalMinima(u,f);){O=f.v.LeftBound,S=f.v.RightBound;var E=null;if(O===null?(this.InsertEdgeIntoAEL(S,null),this.SetWindingCount(S),this.IsContributing(S)&&(E=this.AddOutPt(S,S.Bot))):S===null?(this.InsertEdgeIntoAEL(O,null),this.SetWindingCount(O),this.IsContributing(O)&&(E=this.AddOutPt(O,O.Bot)),this.InsertScanbeam(O.Top.Y)):(this.InsertEdgeIntoAEL(O,null),this.InsertEdgeIntoAEL(S,O),this.SetWindingCount(O),S.WindCnt=O.WindCnt,S.WindCnt2=O.WindCnt2,this.IsContributing(O)&&(E=this.AddLocalMinPoly(O,S,O.Bot)),this.InsertScanbeam(O.Top.Y)),S!==null&&(s.ClipperBase.IsHorizontal(S)?(S.NextInLML!==null&&this.InsertScanbeam(S.NextInLML.Top.Y),this.AddEdgeToSEL(S)):this.InsertScanbeam(S.Top.Y)),!(O===null||S===null)){if(E!==null&&s.ClipperBase.IsHorizontal(S)&&this.m_GhostJoins.length>0&&S.WindDelta!==0)for(var R=0,Z=this.m_GhostJoins.length;R<Z;R++){var te=this.m_GhostJoins[R];this.HorzSegmentsOverlap(te.OutPt1.Pt.X,te.OffPt.X,S.Bot.X,S.Top.X)&&this.AddJoin(te.OutPt1,E,te.OffPt)}if(O.OutIdx>=0&&O.PrevInAEL!==null&&O.PrevInAEL.Curr.X===O.Bot.X&&O.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(O.PrevInAEL.Curr,O.PrevInAEL.Top,O.Curr,O.Top,this.m_UseFullRange)&&O.WindDelta!==0&&O.PrevInAEL.WindDelta!==0){var ie=this.AddOutPt(O.PrevInAEL,O.Bot);this.AddJoin(E,ie,O.Top)}if(O.NextInAEL!==S){if(S.OutIdx>=0&&S.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(S.PrevInAEL.Curr,S.PrevInAEL.Top,S.Curr,S.Top,this.m_UseFullRange)&&S.WindDelta!==0&&S.PrevInAEL.WindDelta!==0){var ie=this.AddOutPt(S.PrevInAEL,S.Bot);this.AddJoin(E,ie,S.Top)}var pe=O.NextInAEL;if(pe!==null)for(;pe!==S;)this.IntersectEdges(S,pe,O.Curr),pe=pe.NextInAEL}}}},s.Clipper.prototype.InsertEdgeIntoAEL=function(u,f){if(this.m_ActiveEdges===null)u.PrevInAEL=null,u.NextInAEL=null,this.m_ActiveEdges=u;else if(f===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,u))u.PrevInAEL=null,u.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=u,this.m_ActiveEdges=u;else{for(f===null&&(f=this.m_ActiveEdges);f.NextInAEL!==null&&!this.E2InsertsBeforeE1(f.NextInAEL,u);)f=f.NextInAEL;u.NextInAEL=f.NextInAEL,f.NextInAEL!==null&&(f.NextInAEL.PrevInAEL=u),u.PrevInAEL=f,f.NextInAEL=u}},s.Clipper.prototype.E2InsertsBeforeE1=function(u,f){return f.Curr.X===u.Curr.X?f.Top.Y>u.Top.Y?f.Top.X<s.Clipper.TopX(u,f.Top.Y):u.Top.X>s.Clipper.TopX(f,u.Top.Y):f.Curr.X<u.Curr.X},s.Clipper.prototype.IsEvenOddFillType=function(u){return u.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType===s.PolyFillType.pftEvenOdd:this.m_ClipFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsEvenOddAltFillType=function(u){return u.PolyTyp===s.PolyType.ptSubject?this.m_ClipFillType===s.PolyFillType.pftEvenOdd:this.m_SubjFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsContributing=function(u){var f,O;switch(u.PolyTyp===s.PolyType.ptSubject?(f=this.m_SubjFillType,O=this.m_ClipFillType):(f=this.m_ClipFillType,O=this.m_SubjFillType),f){case s.PolyFillType.pftEvenOdd:if(u.WindDelta===0&&u.WindCnt!==1)return!1;break;case s.PolyFillType.pftNonZero:if(Math.abs(u.WindCnt)!==1)return!1;break;case s.PolyFillType.pftPositive:if(u.WindCnt!==1)return!1;break;default:if(u.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case s.ClipType.ctIntersection:switch(O){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return u.WindCnt2!==0;case s.PolyFillType.pftPositive:return u.WindCnt2>0;default:return u.WindCnt2<0}case s.ClipType.ctUnion:switch(O){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return u.WindCnt2===0;case s.PolyFillType.pftPositive:return u.WindCnt2<=0;default:return u.WindCnt2>=0}case s.ClipType.ctDifference:if(u.PolyTyp===s.PolyType.ptSubject)switch(O){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return u.WindCnt2===0;case s.PolyFillType.pftPositive:return u.WindCnt2<=0;default:return u.WindCnt2>=0}else switch(O){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return u.WindCnt2!==0;case s.PolyFillType.pftPositive:return u.WindCnt2>0;default:return u.WindCnt2<0}case s.ClipType.ctXor:if(u.WindDelta===0)switch(O){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return u.WindCnt2===0;case s.PolyFillType.pftPositive:return u.WindCnt2<=0;default:return u.WindCnt2>=0}else return!0}return!0},s.Clipper.prototype.SetWindingCount=function(u){for(var f=u.PrevInAEL;f!==null&&(f.PolyTyp!==u.PolyTyp||f.WindDelta===0);)f=f.PrevInAEL;if(f===null){var O=u.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;u.WindDelta===0?u.WindCnt=O===s.PolyFillType.pftNegative?-1:1:u.WindCnt=u.WindDelta,u.WindCnt2=0,f=this.m_ActiveEdges}else if(u.WindDelta===0&&this.m_ClipType!==s.ClipType.ctUnion)u.WindCnt=1,u.WindCnt2=f.WindCnt2,f=f.NextInAEL;else if(this.IsEvenOddFillType(u)){if(u.WindDelta===0){for(var S=!0,E=f.PrevInAEL;E!==null;)E.PolyTyp===f.PolyTyp&&E.WindDelta!==0&&(S=!S),E=E.PrevInAEL;u.WindCnt=S?0:1}else u.WindCnt=u.WindDelta;u.WindCnt2=f.WindCnt2,f=f.NextInAEL}else f.WindCnt*f.WindDelta<0?Math.abs(f.WindCnt)>1?f.WindDelta*u.WindDelta<0?u.WindCnt=f.WindCnt:u.WindCnt=f.WindCnt+u.WindDelta:u.WindCnt=u.WindDelta===0?1:u.WindDelta:u.WindDelta===0?u.WindCnt=f.WindCnt<0?f.WindCnt-1:f.WindCnt+1:f.WindDelta*u.WindDelta<0?u.WindCnt=f.WindCnt:u.WindCnt=f.WindCnt+u.WindDelta,u.WindCnt2=f.WindCnt2,f=f.NextInAEL;if(this.IsEvenOddAltFillType(u))for(;f!==u;)f.WindDelta!==0&&(u.WindCnt2=u.WindCnt2===0?1:0),f=f.NextInAEL;else for(;f!==u;)u.WindCnt2+=f.WindDelta,f=f.NextInAEL},s.Clipper.prototype.AddEdgeToSEL=function(u){this.m_SortedEdges===null?(this.m_SortedEdges=u,u.PrevInSEL=null,u.NextInSEL=null):(u.NextInSEL=this.m_SortedEdges,u.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=u,this.m_SortedEdges=u)},s.Clipper.prototype.PopEdgeFromSEL=function(u){if(u.v=this.m_SortedEdges,u.v===null)return!1;var f=u.v;return this.m_SortedEdges=u.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),f.NextInSEL=null,f.PrevInSEL=null,!0},s.Clipper.prototype.CopyAELToSEL=function(){var u=this.m_ActiveEdges;for(this.m_SortedEdges=u;u!==null;)u.PrevInSEL=u.PrevInAEL,u.NextInSEL=u.NextInAEL,u=u.NextInAEL},s.Clipper.prototype.SwapPositionsInSEL=function(u,f){if(!(u.NextInSEL===null&&u.PrevInSEL===null)&&!(f.NextInSEL===null&&f.PrevInSEL===null)){if(u.NextInSEL===f){var O=f.NextInSEL;O!==null&&(O.PrevInSEL=u);var S=u.PrevInSEL;S!==null&&(S.NextInSEL=f),f.PrevInSEL=S,f.NextInSEL=u,u.PrevInSEL=f,u.NextInSEL=O}else if(f.NextInSEL===u){var O=u.NextInSEL;O!==null&&(O.PrevInSEL=f);var S=f.PrevInSEL;S!==null&&(S.NextInSEL=u),u.PrevInSEL=S,u.NextInSEL=f,f.PrevInSEL=u,f.NextInSEL=O}else{var O=u.NextInSEL,S=u.PrevInSEL;u.NextInSEL=f.NextInSEL,u.NextInSEL!==null&&(u.NextInSEL.PrevInSEL=u),u.PrevInSEL=f.PrevInSEL,u.PrevInSEL!==null&&(u.PrevInSEL.NextInSEL=u),f.NextInSEL=O,f.NextInSEL!==null&&(f.NextInSEL.PrevInSEL=f),f.PrevInSEL=S,f.PrevInSEL!==null&&(f.PrevInSEL.NextInSEL=f)}u.PrevInSEL===null?this.m_SortedEdges=u:f.PrevInSEL===null&&(this.m_SortedEdges=f)}},s.Clipper.prototype.AddLocalMaxPoly=function(u,f,O){this.AddOutPt(u,O),f.WindDelta===0&&this.AddOutPt(f,O),u.OutIdx===f.OutIdx?(u.OutIdx=-1,f.OutIdx=-1):u.OutIdx<f.OutIdx?this.AppendPolygon(u,f):this.AppendPolygon(f,u)},s.Clipper.prototype.AddLocalMinPoly=function(u,f,O){var S,E,R;if(s.ClipperBase.IsHorizontal(f)||u.Dx>f.Dx?(S=this.AddOutPt(u,O),f.OutIdx=u.OutIdx,u.Side=s.EdgeSide.esLeft,f.Side=s.EdgeSide.esRight,E=u,E.PrevInAEL===f?R=f.PrevInAEL:R=E.PrevInAEL):(S=this.AddOutPt(f,O),u.OutIdx=f.OutIdx,u.Side=s.EdgeSide.esRight,f.Side=s.EdgeSide.esLeft,E=f,E.PrevInAEL===u?R=u.PrevInAEL:R=E.PrevInAEL),R!==null&&R.OutIdx>=0&&R.Top.Y<O.Y&&E.Top.Y<O.Y){var Z=s.Clipper.TopX(R,O.Y),te=s.Clipper.TopX(E,O.Y);if(Z===te&&E.WindDelta!==0&&R.WindDelta!==0&&s.ClipperBase.SlopesEqual5(new s.IntPoint2(Z,O.Y),R.Top,new s.IntPoint2(te,O.Y),E.Top,this.m_UseFullRange)){var ie=this.AddOutPt(R,O);this.AddJoin(S,ie,E.Top)}}return S},s.Clipper.prototype.AddOutPt=function(u,f){if(u.OutIdx<0){var O=this.CreateOutRec();O.IsOpen=u.WindDelta===0;var S=new s.OutPt;return O.Pts=S,S.Idx=O.Idx,S.Pt.X=f.X,S.Pt.Y=f.Y,s.use_xyz&&(S.Pt.Z=f.Z),S.Next=S,S.Prev=S,O.IsOpen||this.SetHoleState(u,O),u.OutIdx=O.Idx,S}else{var O=this.m_PolyOuts[u.OutIdx],E=O.Pts,R=u.Side===s.EdgeSide.esLeft;if(R&&s.IntPoint.op_Equality(f,E.Pt))return E;if(!R&&s.IntPoint.op_Equality(f,E.Prev.Pt))return E.Prev;var S=new s.OutPt;return S.Idx=O.Idx,S.Pt.X=f.X,S.Pt.Y=f.Y,s.use_xyz&&(S.Pt.Z=f.Z),S.Next=E,S.Prev=E.Prev,S.Prev.Next=S,E.Prev=S,R&&(O.Pts=S),S}},s.Clipper.prototype.GetLastOutPt=function(u){var f=this.m_PolyOuts[u.OutIdx];return u.Side===s.EdgeSide.esLeft?f.Pts:f.Pts.Prev},s.Clipper.prototype.SwapPoints=function(u,f){var O=new s.IntPoint1(u.Value);u.Value.X=f.Value.X,u.Value.Y=f.Value.Y,s.use_xyz&&(u.Value.Z=f.Value.Z),f.Value.X=O.X,f.Value.Y=O.Y,s.use_xyz&&(f.Value.Z=O.Z)},s.Clipper.prototype.HorzSegmentsOverlap=function(u,f,O,S){var E;return u>f&&(E=u,u=f,f=E),O>S&&(E=O,O=S,S=E),u<S&&O<f},s.Clipper.prototype.SetHoleState=function(u,f){for(var O=u.PrevInAEL,S=null;O!==null;)O.OutIdx>=0&&O.WindDelta!==0&&(S===null?S=O:S.OutIdx===O.OutIdx&&(S=null)),O=O.PrevInAEL;S===null?(f.FirstLeft=null,f.IsHole=!1):(f.FirstLeft=this.m_PolyOuts[S.OutIdx],f.IsHole=!f.FirstLeft.IsHole)},s.Clipper.prototype.GetDx=function(u,f){return u.Y===f.Y?s.ClipperBase.horizontal:(f.X-u.X)/(f.Y-u.Y)},s.Clipper.prototype.FirstIsBottomPt=function(u,f){for(var O=u.Prev;s.IntPoint.op_Equality(O.Pt,u.Pt)&&O!==u;)O=O.Prev;var S=Math.abs(this.GetDx(u.Pt,O.Pt));for(O=u.Next;s.IntPoint.op_Equality(O.Pt,u.Pt)&&O!==u;)O=O.Next;var E=Math.abs(this.GetDx(u.Pt,O.Pt));for(O=f.Prev;s.IntPoint.op_Equality(O.Pt,f.Pt)&&O!==f;)O=O.Prev;var R=Math.abs(this.GetDx(f.Pt,O.Pt));for(O=f.Next;s.IntPoint.op_Equality(O.Pt,f.Pt)&&O!==f;)O=O.Next;var Z=Math.abs(this.GetDx(f.Pt,O.Pt));return Math.max(S,E)===Math.max(R,Z)&&Math.min(S,E)===Math.min(R,Z)?this.Area(u)>0:S>=R&&S>=Z||E>=R&&E>=Z},s.Clipper.prototype.GetBottomPt=function(u){for(var f=null,O=u.Next;O!==u;)O.Pt.Y>u.Pt.Y?(u=O,f=null):O.Pt.Y===u.Pt.Y&&O.Pt.X<=u.Pt.X&&(O.Pt.X<u.Pt.X?(f=null,u=O):O.Next!==u&&O.Prev!==u&&(f=O)),O=O.Next;if(f!==null)for(;f!==O;)for(this.FirstIsBottomPt(O,f)||(u=f),f=f.Next;s.IntPoint.op_Inequality(f.Pt,u.Pt);)f=f.Next;return u},s.Clipper.prototype.GetLowermostRec=function(u,f){u.BottomPt===null&&(u.BottomPt=this.GetBottomPt(u.Pts)),f.BottomPt===null&&(f.BottomPt=this.GetBottomPt(f.Pts));var O=u.BottomPt,S=f.BottomPt;return O.Pt.Y>S.Pt.Y?u:O.Pt.Y<S.Pt.Y?f:O.Pt.X<S.Pt.X?u:O.Pt.X>S.Pt.X||O.Next===O?f:S.Next===S||this.FirstIsBottomPt(O,S)?u:f},s.Clipper.prototype.OutRec1RightOfOutRec2=function(u,f){do if(u=u.FirstLeft,u===f)return!0;while(u!==null);return!1},s.Clipper.prototype.GetOutRec=function(u){for(var f=this.m_PolyOuts[u];f!==this.m_PolyOuts[f.Idx];)f=this.m_PolyOuts[f.Idx];return f},s.Clipper.prototype.AppendPolygon=function(u,f){var O=this.m_PolyOuts[u.OutIdx],S=this.m_PolyOuts[f.OutIdx],E;this.OutRec1RightOfOutRec2(O,S)?E=S:this.OutRec1RightOfOutRec2(S,O)?E=O:E=this.GetLowermostRec(O,S);var R=O.Pts,Z=R.Prev,te=S.Pts,ie=te.Prev;u.Side===s.EdgeSide.esLeft?f.Side===s.EdgeSide.esLeft?(this.ReversePolyPtLinks(te),te.Next=R,R.Prev=te,Z.Next=ie,ie.Prev=Z,O.Pts=ie):(ie.Next=R,R.Prev=ie,te.Prev=Z,Z.Next=te,O.Pts=te):f.Side===s.EdgeSide.esRight?(this.ReversePolyPtLinks(te),Z.Next=ie,ie.Prev=Z,te.Next=R,R.Prev=te):(Z.Next=te,te.Prev=Z,R.Prev=ie,ie.Next=R),O.BottomPt=null,E===S&&(S.FirstLeft!==O&&(O.FirstLeft=S.FirstLeft),O.IsHole=S.IsHole),S.Pts=null,S.BottomPt=null,S.FirstLeft=O;var pe=u.OutIdx,Re=f.OutIdx;u.OutIdx=-1,f.OutIdx=-1;for(var _e=this.m_ActiveEdges;_e!==null;){if(_e.OutIdx===Re){_e.OutIdx=pe,_e.Side=u.Side;break}_e=_e.NextInAEL}S.Idx=O.Idx},s.Clipper.prototype.ReversePolyPtLinks=function(u){if(u!==null){var f,O;f=u;do O=f.Next,f.Next=f.Prev,f.Prev=O,f=O;while(f!==u)}},s.Clipper.SwapSides=function(u,f){var O=u.Side;u.Side=f.Side,f.Side=O},s.Clipper.SwapPolyIndexes=function(u,f){var O=u.OutIdx;u.OutIdx=f.OutIdx,f.OutIdx=O},s.Clipper.prototype.IntersectEdges=function(u,f,O){var S=u.OutIdx>=0,E=f.OutIdx>=0;if(s.use_xyz&&this.SetZ(O,u,f),s.use_lines&&(u.WindDelta===0||f.WindDelta===0)){if(u.WindDelta===0&&f.WindDelta===0)return;u.PolyTyp===f.PolyTyp&&u.WindDelta!==f.WindDelta&&this.m_ClipType===s.ClipType.ctUnion?u.WindDelta===0?E&&(this.AddOutPt(u,O),S&&(u.OutIdx=-1)):S&&(this.AddOutPt(f,O),E&&(f.OutIdx=-1)):u.PolyTyp!==f.PolyTyp&&(u.WindDelta===0&&Math.abs(f.WindCnt)===1&&(this.m_ClipType!==s.ClipType.ctUnion||f.WindCnt2===0)?(this.AddOutPt(u,O),S&&(u.OutIdx=-1)):f.WindDelta===0&&Math.abs(u.WindCnt)===1&&(this.m_ClipType!==s.ClipType.ctUnion||u.WindCnt2===0)&&(this.AddOutPt(f,O),E&&(f.OutIdx=-1)));return}if(u.PolyTyp===f.PolyTyp)if(this.IsEvenOddFillType(u)){var R=u.WindCnt;u.WindCnt=f.WindCnt,f.WindCnt=R}else u.WindCnt+f.WindDelta===0?u.WindCnt=-u.WindCnt:u.WindCnt+=f.WindDelta,f.WindCnt-u.WindDelta===0?f.WindCnt=-f.WindCnt:f.WindCnt-=u.WindDelta;else this.IsEvenOddFillType(f)?u.WindCnt2=u.WindCnt2===0?1:0:u.WindCnt2+=f.WindDelta,this.IsEvenOddFillType(u)?f.WindCnt2=f.WindCnt2===0?1:0:f.WindCnt2-=u.WindDelta;var Z,te,ie,pe;u.PolyTyp===s.PolyType.ptSubject?(Z=this.m_SubjFillType,ie=this.m_ClipFillType):(Z=this.m_ClipFillType,ie=this.m_SubjFillType),f.PolyTyp===s.PolyType.ptSubject?(te=this.m_SubjFillType,pe=this.m_ClipFillType):(te=this.m_ClipFillType,pe=this.m_SubjFillType);var Re,_e;switch(Z){case s.PolyFillType.pftPositive:Re=u.WindCnt;break;case s.PolyFillType.pftNegative:Re=-u.WindCnt;break;default:Re=Math.abs(u.WindCnt);break}switch(te){case s.PolyFillType.pftPositive:_e=f.WindCnt;break;case s.PolyFillType.pftNegative:_e=-f.WindCnt;break;default:_e=Math.abs(f.WindCnt);break}if(S&&E)Re!==0&&Re!==1||_e!==0&&_e!==1||u.PolyTyp!==f.PolyTyp&&this.m_ClipType!==s.ClipType.ctXor?this.AddLocalMaxPoly(u,f,O):(this.AddOutPt(u,O),this.AddOutPt(f,O),s.Clipper.SwapSides(u,f),s.Clipper.SwapPolyIndexes(u,f));else if(S)(_e===0||_e===1)&&(this.AddOutPt(u,O),s.Clipper.SwapSides(u,f),s.Clipper.SwapPolyIndexes(u,f));else if(E)(Re===0||Re===1)&&(this.AddOutPt(f,O),s.Clipper.SwapSides(u,f),s.Clipper.SwapPolyIndexes(u,f));else if((Re===0||Re===1)&&(_e===0||_e===1)){var qe,dt;switch(ie){case s.PolyFillType.pftPositive:qe=u.WindCnt2;break;case s.PolyFillType.pftNegative:qe=-u.WindCnt2;break;default:qe=Math.abs(u.WindCnt2);break}switch(pe){case s.PolyFillType.pftPositive:dt=f.WindCnt2;break;case s.PolyFillType.pftNegative:dt=-f.WindCnt2;break;default:dt=Math.abs(f.WindCnt2);break}if(u.PolyTyp!==f.PolyTyp)this.AddLocalMinPoly(u,f,O);else if(Re===1&&_e===1)switch(this.m_ClipType){case s.ClipType.ctIntersection:qe>0&&dt>0&&this.AddLocalMinPoly(u,f,O);break;case s.ClipType.ctUnion:qe<=0&&dt<=0&&this.AddLocalMinPoly(u,f,O);break;case s.ClipType.ctDifference:(u.PolyTyp===s.PolyType.ptClip&&qe>0&&dt>0||u.PolyTyp===s.PolyType.ptSubject&&qe<=0&&dt<=0)&&this.AddLocalMinPoly(u,f,O);break;case s.ClipType.ctXor:this.AddLocalMinPoly(u,f,O);break}else s.Clipper.SwapSides(u,f)}},s.Clipper.prototype.DeleteFromSEL=function(u){var f=u.PrevInSEL,O=u.NextInSEL;f===null&&O===null&&u!==this.m_SortedEdges||(f!==null?f.NextInSEL=O:this.m_SortedEdges=O,O!==null&&(O.PrevInSEL=f),u.NextInSEL=null,u.PrevInSEL=null)},s.Clipper.prototype.ProcessHorizontals=function(){for(var u={};this.PopEdgeFromSEL(u);)this.ProcessHorizontal(u.v)},s.Clipper.prototype.GetHorzDirection=function(u,f){u.Bot.X<u.Top.X?(f.Left=u.Bot.X,f.Right=u.Top.X,f.Dir=s.Direction.dLeftToRight):(f.Left=u.Top.X,f.Right=u.Bot.X,f.Dir=s.Direction.dRightToLeft)},s.Clipper.prototype.ProcessHorizontal=function(u){var f={Dir:null,Left:null,Right:null};this.GetHorzDirection(u,f);for(var O=f.Dir,S=f.Left,E=f.Right,R=u.WindDelta===0,Z=u,te=null;Z.NextInLML!==null&&s.ClipperBase.IsHorizontal(Z.NextInLML);)Z=Z.NextInLML;Z.NextInLML===null&&(te=this.GetMaximaPair(Z));var ie=this.m_Maxima;if(ie!==null)if(O===s.Direction.dLeftToRight){for(;ie!==null&&ie.X<=u.Bot.X;)ie=ie.Next;ie!==null&&ie.X>=Z.Top.X&&(ie=null)}else{for(;ie.Next!==null&&ie.Next.X<u.Bot.X;)ie=ie.Next;ie.X<=Z.Top.X&&(ie=null)}for(var pe=null;;){for(var Re=u===Z,_e=this.GetNextInAEL(u,O);_e!==null;){if(ie!==null)if(O===s.Direction.dLeftToRight)for(;ie!==null&&ie.X<_e.Curr.X;)u.OutIdx>=0&&!R&&this.AddOutPt(u,new s.IntPoint2(ie.X,u.Bot.Y)),ie=ie.Next;else for(;ie!==null&&ie.X>_e.Curr.X;)u.OutIdx>=0&&!R&&this.AddOutPt(u,new s.IntPoint2(ie.X,u.Bot.Y)),ie=ie.Prev;if(O===s.Direction.dLeftToRight&&_e.Curr.X>E||O===s.Direction.dRightToLeft&&_e.Curr.X<S||_e.Curr.X===u.Top.X&&u.NextInLML!==null&&_e.Dx<u.NextInLML.Dx)break;if(u.OutIdx>=0&&!R){s.use_xyz&&(O===s.Direction.dLeftToRight?this.SetZ(_e.Curr,u,_e):this.SetZ(_e.Curr,_e,u)),pe=this.AddOutPt(u,_e.Curr);for(var qe=this.m_SortedEdges;qe!==null;){if(qe.OutIdx>=0&&this.HorzSegmentsOverlap(u.Bot.X,u.Top.X,qe.Bot.X,qe.Top.X)){var dt=this.GetLastOutPt(qe);this.AddJoin(dt,pe,qe.Top)}qe=qe.NextInSEL}this.AddGhostJoin(pe,u.Bot)}if(_e===te&&Re){u.OutIdx>=0&&this.AddLocalMaxPoly(u,te,u.Top),this.DeleteFromAEL(u),this.DeleteFromAEL(te);return}if(O===s.Direction.dLeftToRight){var St=new s.IntPoint2(_e.Curr.X,u.Curr.Y);this.IntersectEdges(u,_e,St)}else{var St=new s.IntPoint2(_e.Curr.X,u.Curr.Y);this.IntersectEdges(_e,u,St)}var wt=this.GetNextInAEL(_e,O);this.SwapPositionsInAEL(u,_e),_e=wt}if(u.NextInLML===null||!s.ClipperBase.IsHorizontal(u.NextInLML))break;u=this.UpdateEdgeIntoAEL(u),u.OutIdx>=0&&this.AddOutPt(u,u.Bot),f={Dir:O,Left:S,Right:E},this.GetHorzDirection(u,f),O=f.Dir,S=f.Left,E=f.Right}if(u.OutIdx>=0&&pe===null){pe=this.GetLastOutPt(u);for(var qe=this.m_SortedEdges;qe!==null;){if(qe.OutIdx>=0&&this.HorzSegmentsOverlap(u.Bot.X,u.Top.X,qe.Bot.X,qe.Top.X)){var dt=this.GetLastOutPt(qe);this.AddJoin(dt,pe,qe.Top)}qe=qe.NextInSEL}this.AddGhostJoin(pe,u.Top)}if(u.NextInLML!==null)if(u.OutIdx>=0){if(pe=this.AddOutPt(u,u.Top),u=this.UpdateEdgeIntoAEL(u),u.WindDelta===0)return;var Rt=u.PrevInAEL,wt=u.NextInAEL;if(Rt!==null&&Rt.Curr.X===u.Bot.X&&Rt.Curr.Y===u.Bot.Y&&Rt.WindDelta===0&&Rt.OutIdx>=0&&Rt.Curr.Y>Rt.Top.Y&&s.ClipperBase.SlopesEqual3(u,Rt,this.m_UseFullRange)){var dt=this.AddOutPt(Rt,u.Bot);this.AddJoin(pe,dt,u.Top)}else if(wt!==null&&wt.Curr.X===u.Bot.X&&wt.Curr.Y===u.Bot.Y&&wt.WindDelta!==0&&wt.OutIdx>=0&&wt.Curr.Y>wt.Top.Y&&s.ClipperBase.SlopesEqual3(u,wt,this.m_UseFullRange)){var dt=this.AddOutPt(wt,u.Bot);this.AddJoin(pe,dt,u.Top)}}else u=this.UpdateEdgeIntoAEL(u);else u.OutIdx>=0&&this.AddOutPt(u,u.Top),this.DeleteFromAEL(u)},s.Clipper.prototype.GetNextInAEL=function(u,f){return f===s.Direction.dLeftToRight?u.NextInAEL:u.PrevInAEL},s.Clipper.prototype.IsMinima=function(u){return u!==null&&u.Prev.NextInLML!==u&&u.Next.NextInLML!==u},s.Clipper.prototype.IsMaxima=function(u,f){return u!==null&&u.Top.Y===f&&u.NextInLML===null},s.Clipper.prototype.IsIntermediate=function(u,f){return u.Top.Y===f&&u.NextInLML!==null},s.Clipper.prototype.GetMaximaPair=function(u){return s.IntPoint.op_Equality(u.Next.Top,u.Top)&&u.Next.NextInLML===null?u.Next:s.IntPoint.op_Equality(u.Prev.Top,u.Top)&&u.Prev.NextInLML===null?u.Prev:null},s.Clipper.prototype.GetMaximaPairEx=function(u){var f=this.GetMaximaPair(u);return f===null||f.OutIdx===s.ClipperBase.Skip||f.NextInAEL===f.PrevInAEL&&!s.ClipperBase.IsHorizontal(f)?null:f},s.Clipper.prototype.ProcessIntersections=function(u){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(u),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,s.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},s.Clipper.prototype.BuildIntersectList=function(u){if(this.m_ActiveEdges!==null){var f=this.m_ActiveEdges;for(this.m_SortedEdges=f;f!==null;)f.PrevInSEL=f.PrevInAEL,f.NextInSEL=f.NextInAEL,f.Curr.X=s.Clipper.TopX(f,u),f=f.NextInAEL;for(var O=!0;O&&this.m_SortedEdges!==null;){for(O=!1,f=this.m_SortedEdges;f.NextInSEL!==null;){var S=f.NextInSEL,E=new s.IntPoint0;if(f.Curr.X>S.Curr.X){this.IntersectPoint(f,S,E),E.Y<u&&(E=new s.IntPoint2(s.Clipper.TopX(f,u),u));var R=new s.IntersectNode;R.Edge1=f,R.Edge2=S,R.Pt.X=E.X,R.Pt.Y=E.Y,s.use_xyz&&(R.Pt.Z=E.Z),this.m_IntersectList.push(R),this.SwapPositionsInSEL(f,S),O=!0}else f=S}if(f.PrevInSEL!==null)f.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},s.Clipper.prototype.EdgesAdjacent=function(u){return u.Edge1.NextInSEL===u.Edge2||u.Edge1.PrevInSEL===u.Edge2},s.Clipper.IntersectNodeSort=function(u,f){return f.Pt.Y-u.Pt.Y},s.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var u=this.m_IntersectList.length,f=0;f<u;f++){if(!this.EdgesAdjacent(this.m_IntersectList[f])){for(var O=f+1;O<u&&!this.EdgesAdjacent(this.m_IntersectList[O]);)O++;if(O===u)return!1;var S=this.m_IntersectList[f];this.m_IntersectList[f]=this.m_IntersectList[O],this.m_IntersectList[O]=S}this.SwapPositionsInSEL(this.m_IntersectList[f].Edge1,this.m_IntersectList[f].Edge2)}return!0},s.Clipper.prototype.ProcessIntersectList=function(){for(var u=0,f=this.m_IntersectList.length;u<f;u++){var O=this.m_IntersectList[u];this.IntersectEdges(O.Edge1,O.Edge2,O.Pt),this.SwapPositionsInAEL(O.Edge1,O.Edge2)}this.m_IntersectList.length=0};var ar=function(u){return u<0?Math.ceil(u-.5):Math.round(u)},ko=function(u){return u<0?Math.ceil(u-.5):Math.floor(u+.5)},Dr=function(u){return u<0?-Math.round(Math.abs(u)):Math.round(u)},Jr=function(u){return u<0?(u-=.5,u<-2147483648?Math.ceil(u):u|0):(u+=.5,u>2147483647?Math.floor(u):u|0)};c.msie?s.Clipper.Round=ar:c.chromium?s.Clipper.Round=Dr:c.safari?s.Clipper.Round=Jr:s.Clipper.Round=ko,s.Clipper.TopX=function(u,f){return f===u.Top.Y?u.Top.X:u.Bot.X+s.Clipper.Round(u.Dx*(f-u.Bot.Y))},s.Clipper.prototype.IntersectPoint=function(u,f,O){O.X=0,O.Y=0;var S,E;if(u.Dx===f.Dx){O.Y=u.Curr.Y,O.X=s.Clipper.TopX(u,O.Y);return}if(u.Delta.X===0)O.X=u.Bot.X,s.ClipperBase.IsHorizontal(f)?O.Y=f.Bot.Y:(E=f.Bot.Y-f.Bot.X/f.Dx,O.Y=s.Clipper.Round(O.X/f.Dx+E));else if(f.Delta.X===0)O.X=f.Bot.X,s.ClipperBase.IsHorizontal(u)?O.Y=u.Bot.Y:(S=u.Bot.Y-u.Bot.X/u.Dx,O.Y=s.Clipper.Round(O.X/u.Dx+S));else{S=u.Bot.X-u.Bot.Y*u.Dx,E=f.Bot.X-f.Bot.Y*f.Dx;var R=(E-S)/(u.Dx-f.Dx);O.Y=s.Clipper.Round(R),Math.abs(u.Dx)<Math.abs(f.Dx)?O.X=s.Clipper.Round(u.Dx*R+S):O.X=s.Clipper.Round(f.Dx*R+E)}if(O.Y<u.Top.Y||O.Y<f.Top.Y){if(u.Top.Y>f.Top.Y)return O.Y=u.Top.Y,O.X=s.Clipper.TopX(f,u.Top.Y),O.X<u.Top.X;O.Y=f.Top.Y,Math.abs(u.Dx)<Math.abs(f.Dx)?O.X=s.Clipper.TopX(u,O.Y):O.X=s.Clipper.TopX(f,O.Y)}O.Y>u.Curr.Y&&(O.Y=u.Curr.Y,Math.abs(u.Dx)>Math.abs(f.Dx)?O.X=s.Clipper.TopX(f,O.Y):O.X=s.Clipper.TopX(u,O.Y))},s.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(u){for(var f=this.m_ActiveEdges;f!==null;){var O=this.IsMaxima(f,u);if(O){var S=this.GetMaximaPairEx(f);O=S===null||!s.ClipperBase.IsHorizontal(S)}if(O){this.StrictlySimple&&this.InsertMaxima(f.Top.X);var E=f.PrevInAEL;this.DoMaxima(f),E===null?f=this.m_ActiveEdges:f=E.NextInAEL}else{if(this.IsIntermediate(f,u)&&s.ClipperBase.IsHorizontal(f.NextInLML)?(f=this.UpdateEdgeIntoAEL(f),f.OutIdx>=0&&this.AddOutPt(f,f.Bot),this.AddEdgeToSEL(f)):(f.Curr.X=s.Clipper.TopX(f,u),f.Curr.Y=u),s.use_xyz&&(f.Top.Y===u?f.Curr.Z=f.Top.Z:f.Bot.Y===u?f.Curr.Z=f.Bot.Z:f.Curr.Z=0),this.StrictlySimple){var E=f.PrevInAEL;if(f.OutIdx>=0&&f.WindDelta!==0&&E!==null&&E.OutIdx>=0&&E.Curr.X===f.Curr.X&&E.WindDelta!==0){var R=new s.IntPoint1(f.Curr);s.use_xyz&&this.SetZ(R,E,f);var Z=this.AddOutPt(E,R),te=this.AddOutPt(f,R);this.AddJoin(Z,te,R)}}f=f.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,f=this.m_ActiveEdges;f!==null;){if(this.IsIntermediate(f,u)){var Z=null;f.OutIdx>=0&&(Z=this.AddOutPt(f,f.Top)),f=this.UpdateEdgeIntoAEL(f);var E=f.PrevInAEL,ie=f.NextInAEL;if(E!==null&&E.Curr.X===f.Bot.X&&E.Curr.Y===f.Bot.Y&&Z!==null&&E.OutIdx>=0&&E.Curr.Y===E.Top.Y&&s.ClipperBase.SlopesEqual5(f.Curr,f.Top,E.Curr,E.Top,this.m_UseFullRange)&&f.WindDelta!==0&&E.WindDelta!==0){var te=this.AddOutPt(ePrev2,f.Bot);this.AddJoin(Z,te,f.Top)}else if(ie!==null&&ie.Curr.X===f.Bot.X&&ie.Curr.Y===f.Bot.Y&&Z!==null&&ie.OutIdx>=0&&ie.Curr.Y===ie.Top.Y&&s.ClipperBase.SlopesEqual5(f.Curr,f.Top,ie.Curr,ie.Top,this.m_UseFullRange)&&f.WindDelta!==0&&ie.WindDelta!==0){var te=this.AddOutPt(ie,f.Bot);this.AddJoin(Z,te,f.Top)}}f=f.NextInAEL}},s.Clipper.prototype.DoMaxima=function(u){var f=this.GetMaximaPairEx(u);if(f===null){u.OutIdx>=0&&this.AddOutPt(u,u.Top),this.DeleteFromAEL(u);return}for(var O=u.NextInAEL;O!==null&&O!==f;)this.IntersectEdges(u,O,u.Top),this.SwapPositionsInAEL(u,O),O=u.NextInAEL;u.OutIdx===-1&&f.OutIdx===-1?(this.DeleteFromAEL(u),this.DeleteFromAEL(f)):u.OutIdx>=0&&f.OutIdx>=0?(u.OutIdx>=0&&this.AddLocalMaxPoly(u,f,u.Top),this.DeleteFromAEL(u),this.DeleteFromAEL(f)):s.use_lines&&u.WindDelta===0?(u.OutIdx>=0&&(this.AddOutPt(u,u.Top),u.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(u),f.OutIdx>=0&&(this.AddOutPt(f,u.Top),f.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(f)):s.Error("DoMaxima error")},s.Clipper.ReversePaths=function(u){for(var f=0,O=u.length;f<O;f++)u[f].reverse()},s.Clipper.Orientation=function(u){return s.Clipper.Area(u)>=0},s.Clipper.prototype.PointCount=function(u){if(u===null)return 0;var f=0,O=u;do f++,O=O.Next;while(O!==u);return f},s.Clipper.prototype.BuildResult=function(u){s.Clear(u);for(var f=0,O=this.m_PolyOuts.length;f<O;f++){var S=this.m_PolyOuts[f];if(S.Pts!==null){var E=S.Pts.Prev,R=this.PointCount(E);if(!(R<2)){for(var Z=new Array(R),te=0;te<R;te++)Z[te]=E.Pt,E=E.Prev;u.push(Z)}}}},s.Clipper.prototype.BuildResult2=function(u){u.Clear();for(var f=0,O=this.m_PolyOuts.length;f<O;f++){var S=this.m_PolyOuts[f],E=this.PointCount(S.Pts);if(!(S.IsOpen&&E<2||!S.IsOpen&&E<3)){this.FixHoleLinkage(S);var R=new s.PolyNode;u.m_AllPolys.push(R),S.PolyNode=R,R.m_polygon.length=E;for(var Z=S.Pts.Prev,te=0;te<E;te++)R.m_polygon[te]=Z.Pt,Z=Z.Prev}}for(var f=0,O=this.m_PolyOuts.length;f<O;f++){var S=this.m_PolyOuts[f];S.PolyNode!==null&&(S.IsOpen?(S.PolyNode.IsOpen=!0,u.AddChild(S.PolyNode)):S.FirstLeft!==null&&S.FirstLeft.PolyNode!==null?S.FirstLeft.PolyNode.AddChild(S.PolyNode):u.AddChild(S.PolyNode))}},s.Clipper.prototype.FixupOutPolyline=function(u){for(var f=u.Pts,O=f.Prev;f!==O;)if(f=f.Next,s.IntPoint.op_Equality(f.Pt,f.Prev.Pt)){f===O&&(O=f.Prev);var S=f.Prev;S.Next=f.Next,f.Next.Prev=S,f=S}f===f.Prev&&(u.Pts=null)},s.Clipper.prototype.FixupOutPolygon=function(u){var f=null;u.BottomPt=null;for(var O=u.Pts,S=this.PreserveCollinear||this.StrictlySimple;;){if(O.Prev===O||O.Prev===O.Next){u.Pts=null;return}if(s.IntPoint.op_Equality(O.Pt,O.Next.Pt)||s.IntPoint.op_Equality(O.Pt,O.Prev.Pt)||s.ClipperBase.SlopesEqual4(O.Prev.Pt,O.Pt,O.Next.Pt,this.m_UseFullRange)&&(!S||!this.Pt2IsBetweenPt1AndPt3(O.Prev.Pt,O.Pt,O.Next.Pt)))f=null,O.Prev.Next=O.Next,O.Next.Prev=O.Prev,O=O.Prev;else{if(O===f)break;f===null&&(f=O),O=O.Next}}u.Pts=O},s.Clipper.prototype.DupOutPt=function(u,f){var O=new s.OutPt;return O.Pt.X=u.Pt.X,O.Pt.Y=u.Pt.Y,s.use_xyz&&(O.Pt.Z=u.Pt.Z),O.Idx=u.Idx,f?(O.Next=u.Next,O.Prev=u,u.Next.Prev=O,u.Next=O):(O.Prev=u.Prev,O.Next=u,u.Prev.Next=O,u.Prev=O),O},s.Clipper.prototype.GetOverlap=function(u,f,O,S,E){return u<f?O<S?(E.Left=Math.max(u,O),E.Right=Math.min(f,S)):(E.Left=Math.max(u,S),E.Right=Math.min(f,O)):O<S?(E.Left=Math.max(f,O),E.Right=Math.min(u,S)):(E.Left=Math.max(f,S),E.Right=Math.min(u,O)),E.Left<E.Right},s.Clipper.prototype.JoinHorz=function(u,f,O,S,E,R){var Z=u.Pt.X>f.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight,te=O.Pt.X>S.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight;if(Z===te)return!1;if(Z===s.Direction.dLeftToRight){for(;u.Next.Pt.X<=E.X&&u.Next.Pt.X>=u.Pt.X&&u.Next.Pt.Y===E.Y;)u=u.Next;R&&u.Pt.X!==E.X&&(u=u.Next),f=this.DupOutPt(u,!R),s.IntPoint.op_Inequality(f.Pt,E)&&(u=f,u.Pt.X=E.X,u.Pt.Y=E.Y,s.use_xyz&&(u.Pt.Z=E.Z),f=this.DupOutPt(u,!R))}else{for(;u.Next.Pt.X>=E.X&&u.Next.Pt.X<=u.Pt.X&&u.Next.Pt.Y===E.Y;)u=u.Next;!R&&u.Pt.X!==E.X&&(u=u.Next),f=this.DupOutPt(u,R),s.IntPoint.op_Inequality(f.Pt,E)&&(u=f,u.Pt.X=E.X,u.Pt.Y=E.Y,s.use_xyz&&(u.Pt.Z=E.Z),f=this.DupOutPt(u,R))}if(te===s.Direction.dLeftToRight){for(;O.Next.Pt.X<=E.X&&O.Next.Pt.X>=O.Pt.X&&O.Next.Pt.Y===E.Y;)O=O.Next;R&&O.Pt.X!==E.X&&(O=O.Next),S=this.DupOutPt(O,!R),s.IntPoint.op_Inequality(S.Pt,E)&&(O=S,O.Pt.X=E.X,O.Pt.Y=E.Y,s.use_xyz&&(O.Pt.Z=E.Z),S=this.DupOutPt(O,!R))}else{for(;O.Next.Pt.X>=E.X&&O.Next.Pt.X<=O.Pt.X&&O.Next.Pt.Y===E.Y;)O=O.Next;!R&&O.Pt.X!==E.X&&(O=O.Next),S=this.DupOutPt(O,R),s.IntPoint.op_Inequality(S.Pt,E)&&(O=S,O.Pt.X=E.X,O.Pt.Y=E.Y,s.use_xyz&&(O.Pt.Z=E.Z),S=this.DupOutPt(O,R))}return Z===s.Direction.dLeftToRight===R?(u.Prev=O,O.Next=u,f.Next=S,S.Prev=f):(u.Next=O,O.Prev=u,f.Prev=S,S.Next=f),!0},s.Clipper.prototype.JoinPoints=function(u,f,O){var S=u.OutPt1,E=new s.OutPt,R=u.OutPt2,Z=new s.OutPt,te=u.OutPt1.Pt.Y===u.OffPt.Y;if(te&&s.IntPoint.op_Equality(u.OffPt,u.OutPt1.Pt)&&s.IntPoint.op_Equality(u.OffPt,u.OutPt2.Pt)){if(f!==O)return!1;for(E=u.OutPt1.Next;E!==S&&s.IntPoint.op_Equality(E.Pt,u.OffPt);)E=E.Next;var ie=E.Pt.Y>u.OffPt.Y;for(Z=u.OutPt2.Next;Z!==R&&s.IntPoint.op_Equality(Z.Pt,u.OffPt);)Z=Z.Next;var pe=Z.Pt.Y>u.OffPt.Y;return ie===pe?!1:ie?(E=this.DupOutPt(S,!1),Z=this.DupOutPt(R,!0),S.Prev=R,R.Next=S,E.Next=Z,Z.Prev=E,u.OutPt1=S,u.OutPt2=E,!0):(E=this.DupOutPt(S,!0),Z=this.DupOutPt(R,!1),S.Next=R,R.Prev=S,E.Prev=Z,Z.Next=E,u.OutPt1=S,u.OutPt2=E,!0)}else if(te){for(E=S;S.Prev.Pt.Y===S.Pt.Y&&S.Prev!==E&&S.Prev!==R;)S=S.Prev;for(;E.Next.Pt.Y===E.Pt.Y&&E.Next!==S&&E.Next!==R;)E=E.Next;if(E.Next===S||E.Next===R)return!1;for(Z=R;R.Prev.Pt.Y===R.Pt.Y&&R.Prev!==Z&&R.Prev!==E;)R=R.Prev;for(;Z.Next.Pt.Y===Z.Pt.Y&&Z.Next!==R&&Z.Next!==S;)Z=Z.Next;if(Z.Next===R||Z.Next===S)return!1;var Re={Left:null,Right:null};if(!this.GetOverlap(S.Pt.X,E.Pt.X,R.Pt.X,Z.Pt.X,Re))return!1;var _e=Re.Left,qe=Re.Right,dt=new s.IntPoint0,St;return S.Pt.X>=_e&&S.Pt.X<=qe?(dt.X=S.Pt.X,dt.Y=S.Pt.Y,s.use_xyz&&(dt.Z=S.Pt.Z),St=S.Pt.X>E.Pt.X):R.Pt.X>=_e&&R.Pt.X<=qe?(dt.X=R.Pt.X,dt.Y=R.Pt.Y,s.use_xyz&&(dt.Z=R.Pt.Z),St=R.Pt.X>Z.Pt.X):E.Pt.X>=_e&&E.Pt.X<=qe?(dt.X=E.Pt.X,dt.Y=E.Pt.Y,s.use_xyz&&(dt.Z=E.Pt.Z),St=E.Pt.X>S.Pt.X):(dt.X=Z.Pt.X,dt.Y=Z.Pt.Y,s.use_xyz&&(dt.Z=Z.Pt.Z),St=Z.Pt.X>R.Pt.X),u.OutPt1=S,u.OutPt2=R,this.JoinHorz(S,E,R,Z,dt,St)}else{for(E=S.Next;s.IntPoint.op_Equality(E.Pt,S.Pt)&&E!==S;)E=E.Next;var wt=E.Pt.Y>S.Pt.Y||!s.ClipperBase.SlopesEqual4(S.Pt,E.Pt,u.OffPt,this.m_UseFullRange);if(wt){for(E=S.Prev;s.IntPoint.op_Equality(E.Pt,S.Pt)&&E!==S;)E=E.Prev;if(E.Pt.Y>S.Pt.Y||!s.ClipperBase.SlopesEqual4(S.Pt,E.Pt,u.OffPt,this.m_UseFullRange))return!1}for(Z=R.Next;s.IntPoint.op_Equality(Z.Pt,R.Pt)&&Z!==R;)Z=Z.Next;var Rt=Z.Pt.Y>R.Pt.Y||!s.ClipperBase.SlopesEqual4(R.Pt,Z.Pt,u.OffPt,this.m_UseFullRange);if(Rt){for(Z=R.Prev;s.IntPoint.op_Equality(Z.Pt,R.Pt)&&Z!==R;)Z=Z.Prev;if(Z.Pt.Y>R.Pt.Y||!s.ClipperBase.SlopesEqual4(R.Pt,Z.Pt,u.OffPt,this.m_UseFullRange))return!1}return E===S||Z===R||E===Z||f===O&&wt===Rt?!1:wt?(E=this.DupOutPt(S,!1),Z=this.DupOutPt(R,!0),S.Prev=R,R.Next=S,E.Next=Z,Z.Prev=E,u.OutPt1=S,u.OutPt2=E,!0):(E=this.DupOutPt(S,!0),Z=this.DupOutPt(R,!1),S.Next=R,R.Prev=S,E.Prev=Z,Z.Next=E,u.OutPt1=S,u.OutPt2=E,!0)}},s.Clipper.GetBounds=function(u){for(var f=0,O=u.length;f<O&&u[f].length===0;)f++;if(f===O)return new s.IntRect(0,0,0,0);var S=new s.IntRect;for(S.left=u[f][0].X,S.right=S.left,S.top=u[f][0].Y,S.bottom=S.top;f<O;f++)for(var E=0,R=u[f].length;E<R;E++)u[f][E].X<S.left?S.left=u[f][E].X:u[f][E].X>S.right&&(S.right=u[f][E].X),u[f][E].Y<S.top?S.top=u[f][E].Y:u[f][E].Y>S.bottom&&(S.bottom=u[f][E].Y);return S},s.Clipper.prototype.GetBounds2=function(u){var f=u,O=new s.IntRect;for(O.left=u.Pt.X,O.right=u.Pt.X,O.top=u.Pt.Y,O.bottom=u.Pt.Y,u=u.Next;u!==f;)u.Pt.X<O.left&&(O.left=u.Pt.X),u.Pt.X>O.right&&(O.right=u.Pt.X),u.Pt.Y<O.top&&(O.top=u.Pt.Y),u.Pt.Y>O.bottom&&(O.bottom=u.Pt.Y),u=u.Next;return O},s.Clipper.PointInPolygon=function(u,f){var O=0,S=f.length;if(S<3)return 0;for(var E=f[0],R=1;R<=S;++R){var Z=R===S?f[0]:f[R];if(Z.Y===u.Y&&(Z.X===u.X||E.Y===u.Y&&Z.X>u.X==E.X<u.X))return-1;if(E.Y<u.Y!=Z.Y<u.Y){if(E.X>=u.X)if(Z.X>u.X)O=1-O;else{var te=(E.X-u.X)*(Z.Y-u.Y)-(Z.X-u.X)*(E.Y-u.Y);if(te===0)return-1;te>0==Z.Y>E.Y&&(O=1-O)}else if(Z.X>u.X){var te=(E.X-u.X)*(Z.Y-u.Y)-(Z.X-u.X)*(E.Y-u.Y);if(te===0)return-1;te>0==Z.Y>E.Y&&(O=1-O)}}E=Z}return O},s.Clipper.prototype.PointInPolygon=function(u,f){var O=0,S=f,E=u.X,R=u.Y,Z=f.Pt.X,te=f.Pt.Y;do{f=f.Next;var ie=f.Pt.X,pe=f.Pt.Y;if(pe===R&&(ie===E||te===R&&ie>E==Z<E))return-1;if(te<R!=pe<R){if(Z>=E)if(ie>E)O=1-O;else{var Re=(Z-E)*(pe-R)-(ie-E)*(te-R);if(Re===0)return-1;Re>0==pe>te&&(O=1-O)}else if(ie>E){var Re=(Z-E)*(pe-R)-(ie-E)*(te-R);if(Re===0)return-1;Re>0==pe>te&&(O=1-O)}}Z=ie,te=pe}while(S!==f);return O},s.Clipper.prototype.Poly2ContainsPoly1=function(u,f){var O=u;do{var S=this.PointInPolygon(O.Pt,f);if(S>=0)return S>0;O=O.Next}while(O!==u);return!0},s.Clipper.prototype.FixupFirstLefts1=function(u,f){for(var O,S,E=0,R=this.m_PolyOuts.length;E<R;E++)O=this.m_PolyOuts[E],S=s.Clipper.ParseFirstLeft(O.FirstLeft),O.Pts!==null&&S===u&&this.Poly2ContainsPoly1(O.Pts,f.Pts)&&(O.FirstLeft=f)},s.Clipper.prototype.FixupFirstLefts2=function(u,f){for(var O=f.FirstLeft,S,E,R=0,Z=this.m_PolyOuts.length;R<Z;R++)S=this.m_PolyOuts[R],!(S.Pts===null||S===f||S===u)&&(E=s.Clipper.ParseFirstLeft(S.FirstLeft),!(E!==O&&E!==u&&E!==f)&&(this.Poly2ContainsPoly1(S.Pts,u.Pts)?S.FirstLeft=u:this.Poly2ContainsPoly1(S.Pts,f.Pts)?S.FirstLeft=f:(S.FirstLeft===u||S.FirstLeft===f)&&(S.FirstLeft=O)))},s.Clipper.prototype.FixupFirstLefts3=function(u,f){for(var O,S,E=0,R=this.m_PolyOuts.length;E<R;E++)O=this.m_PolyOuts[E],S=s.Clipper.ParseFirstLeft(O.FirstLeft),O.Pts!==null&&S===u&&(O.FirstLeft=f)},s.Clipper.ParseFirstLeft=function(u){for(;u!==null&&u.Pts===null;)u=u.FirstLeft;return u},s.Clipper.prototype.JoinCommonEdges=function(){for(var u=0,f=this.m_Joins.length;u<f;u++){var O=this.m_Joins[u],S=this.GetOutRec(O.OutPt1.Idx),E=this.GetOutRec(O.OutPt2.Idx);if(!(S.Pts===null||E.Pts===null)&&!(S.IsOpen||E.IsOpen)){var R;S===E?R=S:this.OutRec1RightOfOutRec2(S,E)?R=E:this.OutRec1RightOfOutRec2(E,S)?R=S:R=this.GetLowermostRec(S,E),this.JoinPoints(O,S,E)&&(S===E?(S.Pts=O.OutPt1,S.BottomPt=null,E=this.CreateOutRec(),E.Pts=O.OutPt2,this.UpdateOutPtIdxs(E),this.Poly2ContainsPoly1(E.Pts,S.Pts)?(E.IsHole=!S.IsHole,E.FirstLeft=S,this.m_UsingPolyTree&&this.FixupFirstLefts2(E,S),(E.IsHole^this.ReverseSolution)==this.Area$1(E)>0&&this.ReversePolyPtLinks(E.Pts)):this.Poly2ContainsPoly1(S.Pts,E.Pts)?(E.IsHole=S.IsHole,S.IsHole=!E.IsHole,E.FirstLeft=S.FirstLeft,S.FirstLeft=E,this.m_UsingPolyTree&&this.FixupFirstLefts2(S,E),(S.IsHole^this.ReverseSolution)==this.Area$1(S)>0&&this.ReversePolyPtLinks(S.Pts)):(E.IsHole=S.IsHole,E.FirstLeft=S.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(S,E))):(E.Pts=null,E.BottomPt=null,E.Idx=S.Idx,S.IsHole=R.IsHole,R===E&&(S.FirstLeft=E.FirstLeft),E.FirstLeft=S,this.m_UsingPolyTree&&this.FixupFirstLefts3(E,S)))}}},s.Clipper.prototype.UpdateOutPtIdxs=function(u){var f=u.Pts;do f.Idx=u.Idx,f=f.Prev;while(f!==u.Pts)},s.Clipper.prototype.DoSimplePolygons=function(){for(var u=0;u<this.m_PolyOuts.length;){var f=this.m_PolyOuts[u++],O=f.Pts;if(!(O===null||f.IsOpen))do{for(var S=O.Next;S!==f.Pts;){if(s.IntPoint.op_Equality(O.Pt,S.Pt)&&S.Next!==O&&S.Prev!==O){var E=O.Prev,R=S.Prev;O.Prev=R,R.Next=O,S.Prev=E,E.Next=S,f.Pts=O;var Z=this.CreateOutRec();Z.Pts=S,this.UpdateOutPtIdxs(Z),this.Poly2ContainsPoly1(Z.Pts,f.Pts)?(Z.IsHole=!f.IsHole,Z.FirstLeft=f,this.m_UsingPolyTree&&this.FixupFirstLefts2(Z,f)):this.Poly2ContainsPoly1(f.Pts,Z.Pts)?(Z.IsHole=f.IsHole,f.IsHole=!Z.IsHole,Z.FirstLeft=f.FirstLeft,f.FirstLeft=Z,this.m_UsingPolyTree&&this.FixupFirstLefts2(f,Z)):(Z.IsHole=f.IsHole,Z.FirstLeft=f.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(f,Z)),S=O}S=S.Next}O=O.Next}while(O!==f.Pts)}},s.Clipper.Area=function(u){if(!Array.isArray(u))return 0;var f=u.length;if(f<3)return 0;for(var O=0,S=0,E=f-1;S<f;++S)O+=(u[E].X+u[S].X)*(u[E].Y-u[S].Y),E=S;return-O*.5},s.Clipper.prototype.Area=function(u){var f=u;if(u===null)return 0;var O=0;do O=O+(u.Prev.Pt.X+u.Pt.X)*(u.Prev.Pt.Y-u.Pt.Y),u=u.Next;while(u!==f);return O*.5},s.Clipper.prototype.Area$1=function(u){return this.Area(u.Pts)},s.Clipper.SimplifyPolygon=function(u,f){var O=new Array,S=new s.Clipper(0);return S.StrictlySimple=!0,S.AddPath(u,s.PolyType.ptSubject,!0),S.Execute(s.ClipType.ctUnion,O,f,f),O},s.Clipper.SimplifyPolygons=function(u,f){typeof f>"u"&&(f=s.PolyFillType.pftEvenOdd);var O=new Array,S=new s.Clipper(0);return S.StrictlySimple=!0,S.AddPaths(u,s.PolyType.ptSubject,!0),S.Execute(s.ClipType.ctUnion,O,f,f),O},s.Clipper.DistanceSqrd=function(u,f){var O=u.X-f.X,S=u.Y-f.Y;return O*O+S*S},s.Clipper.DistanceFromLineSqrd=function(u,f,O){var S=f.Y-O.Y,E=O.X-f.X,R=S*f.X+E*f.Y;return R=S*u.X+E*u.Y-R,R*R/(S*S+E*E)},s.Clipper.SlopesNearCollinear=function(u,f,O,S){return Math.abs(u.X-f.X)>Math.abs(u.Y-f.Y)?u.X>f.X==u.X<O.X?s.Clipper.DistanceFromLineSqrd(u,f,O)<S:f.X>u.X==f.X<O.X?s.Clipper.DistanceFromLineSqrd(f,u,O)<S:s.Clipper.DistanceFromLineSqrd(O,u,f)<S:u.Y>f.Y==u.Y<O.Y?s.Clipper.DistanceFromLineSqrd(u,f,O)<S:f.Y>u.Y==f.Y<O.Y?s.Clipper.DistanceFromLineSqrd(f,u,O)<S:s.Clipper.DistanceFromLineSqrd(O,u,f)<S},s.Clipper.PointsAreClose=function(u,f,O){var S=u.X-f.X,E=u.Y-f.Y;return S*S+E*E<=O},s.Clipper.ExcludeOp=function(u){var f=u.Prev;return f.Next=u.Next,u.Next.Prev=f,f.Idx=0,f},s.Clipper.CleanPolygon=function(u,f){typeof f>"u"&&(f=1.415);var O=u.length;if(O===0)return new Array;for(var S=new Array(O),E=0;E<O;++E)S[E]=new s.OutPt;for(var E=0;E<O;++E)S[E].Pt=u[E],S[E].Next=S[(E+1)%O],S[E].Next.Prev=S[E],S[E].Idx=0;for(var R=f*f,Z=S[0];Z.Idx===0&&Z.Next!==Z.Prev;)s.Clipper.PointsAreClose(Z.Pt,Z.Prev.Pt,R)?(Z=s.Clipper.ExcludeOp(Z),O--):s.Clipper.PointsAreClose(Z.Prev.Pt,Z.Next.Pt,R)?(s.Clipper.ExcludeOp(Z.Next),Z=s.Clipper.ExcludeOp(Z),O-=2):s.Clipper.SlopesNearCollinear(Z.Prev.Pt,Z.Pt,Z.Next.Pt,R)?(Z=s.Clipper.ExcludeOp(Z),O--):(Z.Idx=1,Z=Z.Next);O<3&&(O=0);for(var te=new Array(O),E=0;E<O;++E)te[E]=new s.IntPoint1(Z.Pt),Z=Z.Next;return S=null,te},s.Clipper.CleanPolygons=function(u,f){for(var O=new Array(u.length),S=0,E=u.length;S<E;S++)O[S]=s.Clipper.CleanPolygon(u[S],f);return O},s.Clipper.Minkowski=function(u,f,O,S){var E=S?1:0,R=u.length,Z=f.length,te=new Array;if(O)for(var ie=0;ie<Z;ie++){for(var pe=new Array(R),Re=0,_e=u.length,qe=u[Re];Re<_e;Re++,qe=u[Re])pe[Re]=new s.IntPoint2(f[ie].X+qe.X,f[ie].Y+qe.Y);te.push(pe)}else for(var ie=0;ie<Z;ie++){for(var pe=new Array(R),Re=0,_e=u.length,qe=u[Re];Re<_e;Re++,qe=u[Re])pe[Re]=new s.IntPoint2(f[ie].X-qe.X,f[ie].Y-qe.Y);te.push(pe)}for(var dt=new Array,ie=0;ie<Z-1+E;ie++)for(var Re=0;Re<R;Re++){var St=new Array;St.push(te[ie%Z][Re%R]),St.push(te[(ie+1)%Z][Re%R]),St.push(te[(ie+1)%Z][(Re+1)%R]),St.push(te[ie%Z][(Re+1)%R]),s.Clipper.Orientation(St)||St.reverse(),dt.push(St)}return dt},s.Clipper.MinkowskiSum=function(u,f,O){if(f[0]instanceof Array){for(var E=f,Z=new s.Paths,R=new s.Clipper,te=0;te<E.length;++te){var ie=s.Clipper.Minkowski(u,E[te],!0,O);if(R.AddPaths(ie,s.PolyType.ptSubject,!0),O){var S=s.Clipper.TranslatePath(E[te],u[0]);R.AddPath(S,s.PolyType.ptClip,!0)}}return R.Execute(s.ClipType.ctUnion,Z,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),Z}else{var S=f,E=s.Clipper.Minkowski(u,S,!0,O),R=new s.Clipper;return R.AddPaths(E,s.PolyType.ptSubject,!0),R.Execute(s.ClipType.ctUnion,E,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),E}},s.Clipper.TranslatePath=function(u,f){for(var O=new s.Path,S=0;S<u.length;S++)O.push(new s.IntPoint2(u[S].X+f.X,u[S].Y+f.Y));return O},s.Clipper.MinkowskiDiff=function(u,f){var O=s.Clipper.Minkowski(u,f,!1,!0),S=new s.Clipper;return S.AddPaths(O,s.PolyType.ptSubject,!0),S.Execute(s.ClipType.ctUnion,O,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),O},s.Clipper.PolyTreeToPaths=function(u){var f=new Array;return s.Clipper.AddPolyNodeToPaths(u,s.Clipper.NodeType.ntAny,f),f},s.Clipper.AddPolyNodeToPaths=function(u,f,O){var S=!0;switch(f){case s.Clipper.NodeType.ntOpen:return;case s.Clipper.NodeType.ntClosed:S=!u.IsOpen;break}u.m_polygon.length>0&&S&&O.push(u.m_polygon);for(var E=0,R=u.Childs(),Z=R.length,te=R[E];E<Z;E++,te=R[E])s.Clipper.AddPolyNodeToPaths(te,f,O)},s.Clipper.OpenPathsFromPolyTree=function(u){for(var f=new s.Paths,O=0,S=u.ChildCount();O<S;O++)u.Childs()[O].IsOpen&&f.push(u.Childs()[O].m_polygon);return f},s.Clipper.ClosedPathsFromPolyTree=function(u){var f=new s.Paths;return s.Clipper.AddPolyNodeToPaths(u,s.Clipper.NodeType.ntClosed,f),f},Hr(s.Clipper,s.ClipperBase),s.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},s.ClipperOffset=function(u,f){typeof u>"u"&&(u=2),typeof f>"u"&&(f=s.ClipperOffset.def_arc_tolerance),this.m_destPolys=new s.Paths,this.m_srcPoly=new s.Path,this.m_destPoly=new s.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new s.IntPoint0,this.m_polyNodes=new s.PolyNode,this.MiterLimit=u,this.ArcTolerance=f,this.m_lowest.X=-1},s.ClipperOffset.two_pi=6.28318530717959,s.ClipperOffset.def_arc_tolerance=.25,s.ClipperOffset.prototype.Clear=function(){s.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},s.ClipperOffset.Round=s.Clipper.Round,s.ClipperOffset.prototype.AddPath=function(u,f,O){var S=u.length-1;if(!(S<0)){var E=new s.PolyNode;if(E.m_jointype=f,E.m_endtype=O,O===s.EndType.etClosedLine||O===s.EndType.etClosedPolygon)for(;S>0&&s.IntPoint.op_Equality(u[0],u[S]);)S--;E.m_polygon.push(u[0]);for(var R=0,Z=0,te=1;te<=S;te++)s.IntPoint.op_Inequality(E.m_polygon[R],u[te])&&(R++,E.m_polygon.push(u[te]),(u[te].Y>E.m_polygon[Z].Y||u[te].Y===E.m_polygon[Z].Y&&u[te].X<E.m_polygon[Z].X)&&(Z=R));if(!(O===s.EndType.etClosedPolygon&&R<2)&&(this.m_polyNodes.AddChild(E),O===s.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,Z);else{var ie=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(E.m_polygon[Z].Y>ie.Y||E.m_polygon[Z].Y===ie.Y&&E.m_polygon[Z].X<ie.X)&&(this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,Z))}}},s.ClipperOffset.prototype.AddPaths=function(u,f,O){for(var S=0,E=u.length;S<E;S++)this.AddPath(u[S],f,O)},s.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!s.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var u=0;u<this.m_polyNodes.ChildCount();u++){var f=this.m_polyNodes.Childs()[u];(f.m_endtype===s.EndType.etClosedPolygon||f.m_endtype===s.EndType.etClosedLine&&s.Clipper.Orientation(f.m_polygon))&&f.m_polygon.reverse()}else for(var u=0;u<this.m_polyNodes.ChildCount();u++){var f=this.m_polyNodes.Childs()[u];f.m_endtype===s.EndType.etClosedLine&&!s.Clipper.Orientation(f.m_polygon)&&f.m_polygon.reverse()}},s.ClipperOffset.GetUnitNormal=function(u,f){var O=f.X-u.X,S=f.Y-u.Y;if(O===0&&S===0)return new s.DoublePoint2(0,0);var E=1/Math.sqrt(O*O+S*S);return O*=E,S*=E,new s.DoublePoint2(S,-O)},s.ClipperOffset.prototype.DoOffset=function(u){if(this.m_destPolys=new Array,this.m_delta=u,s.ClipperBase.near_zero(u)){for(var f=0;f<this.m_polyNodes.ChildCount();f++){var O=this.m_polyNodes.Childs()[f];O.m_endtype===s.EndType.etClosedPolygon&&this.m_destPolys.push(O.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var S;this.ArcTolerance<=0?S=s.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(u)*s.ClipperOffset.def_arc_tolerance?S=Math.abs(u)*s.ClipperOffset.def_arc_tolerance:S=this.ArcTolerance;var E=3.14159265358979/Math.acos(1-S/Math.abs(u));this.m_sin=Math.sin(s.ClipperOffset.two_pi/E),this.m_cos=Math.cos(s.ClipperOffset.two_pi/E),this.m_StepsPerRad=E/s.ClipperOffset.two_pi,u<0&&(this.m_sin=-this.m_sin);for(var f=0;f<this.m_polyNodes.ChildCount();f++){var O=this.m_polyNodes.Childs()[f];this.m_srcPoly=O.m_polygon;var R=this.m_srcPoly.length;if(!(R===0||u<=0&&(R<3||O.m_endtype!==s.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,R===1){if(O.m_jointype===s.JoinType.jtRound)for(var Z=1,te=0,ie=1;ie<=E;ie++){this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+Z*u),s.ClipperOffset.Round(this.m_srcPoly[0].Y+te*u)));var pe=Z;Z=Z*this.m_cos-this.m_sin*te,te=pe*this.m_sin+te*this.m_cos}else for(var Z=-1,te=-1,ie=0;ie<4;++ie)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+Z*u),s.ClipperOffset.Round(this.m_srcPoly[0].Y+te*u))),Z<0?Z=1:te<0?te=1:Z=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var ie=0;ie<R-1;ie++)this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[ie],this.m_srcPoly[ie+1]));if(O.m_endtype===s.EndType.etClosedLine||O.m_endtype===s.EndType.etClosedPolygon?this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[R-1],this.m_srcPoly[0])):this.m_normals.push(new s.DoublePoint1(this.m_normals[R-2])),O.m_endtype===s.EndType.etClosedPolygon){for(var Re=R-1,ie=0;ie<R;ie++)Re=this.OffsetPoint(ie,Re,O.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(O.m_endtype===s.EndType.etClosedLine){for(var Re=R-1,ie=0;ie<R;ie++)Re=this.OffsetPoint(ie,Re,O.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var _e=this.m_normals[R-1],ie=R-1;ie>0;ie--)this.m_normals[ie]=new s.DoublePoint2(-this.m_normals[ie-1].X,-this.m_normals[ie-1].Y);this.m_normals[0]=new s.DoublePoint2(-_e.X,-_e.Y),Re=0;for(var ie=R-1;ie>=0;ie--)Re=this.OffsetPoint(ie,Re,O.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var Re=0,ie=1;ie<R-1;++ie)Re=this.OffsetPoint(ie,Re,O.m_jointype);var qe;if(O.m_endtype===s.EndType.etOpenButt){var ie=R-1;qe=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[ie].X+this.m_normals[ie].X*u),s.ClipperOffset.Round(this.m_srcPoly[ie].Y+this.m_normals[ie].Y*u)),this.m_destPoly.push(qe),qe=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[ie].X-this.m_normals[ie].X*u),s.ClipperOffset.Round(this.m_srcPoly[ie].Y-this.m_normals[ie].Y*u)),this.m_destPoly.push(qe)}else{var ie=R-1;Re=R-2,this.m_sinA=0,this.m_normals[ie]=new s.DoublePoint2(-this.m_normals[ie].X,-this.m_normals[ie].Y),O.m_endtype===s.EndType.etOpenSquare?this.DoSquare(ie,Re):this.DoRound(ie,Re)}for(var ie=R-1;ie>0;ie--)this.m_normals[ie]=new s.DoublePoint2(-this.m_normals[ie-1].X,-this.m_normals[ie-1].Y);this.m_normals[0]=new s.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),Re=R-1;for(var ie=Re-1;ie>0;--ie)Re=this.OffsetPoint(ie,Re,O.m_jointype);O.m_endtype===s.EndType.etOpenButt?(qe=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*u),s.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*u)),this.m_destPoly.push(qe),qe=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*u),s.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*u)),this.m_destPoly.push(qe)):(Re=1,this.m_sinA=0,O.m_endtype===s.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},s.ClipperOffset.prototype.Execute=function(){var u=arguments,f=u[0]instanceof s.PolyTree;if(f){var O=u[0],S=u[1];O.Clear(),this.FixOrientations(),this.DoOffset(S);var E=new s.Clipper(0);if(E.AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),S>0)E.Execute(s.ClipType.ctUnion,O,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var R=s.Clipper.GetBounds(this.m_destPolys),Z=new s.Path;if(Z.push(new s.IntPoint2(R.left-10,R.bottom+10)),Z.push(new s.IntPoint2(R.right+10,R.bottom+10)),Z.push(new s.IntPoint2(R.right+10,R.top-10)),Z.push(new s.IntPoint2(R.left-10,R.top-10)),E.AddPath(Z,s.PolyType.ptSubject,!0),E.ReverseSolution=!0,E.Execute(s.ClipType.ctUnion,O,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),O.ChildCount()===1&&O.Childs()[0].ChildCount()>0){var te=O.Childs()[0];O.Childs()[0]=te.Childs()[0],O.Childs()[0].m_Parent=O;for(var ie=1;ie<te.ChildCount();ie++)O.AddChild(te.Childs()[ie])}else O.Clear()}}else{var O=u[0],S=u[1];s.Clear(O),this.FixOrientations(),this.DoOffset(S);var E=new s.Clipper(0);if(E.AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),S>0)E.Execute(s.ClipType.ctUnion,O,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var R=s.Clipper.GetBounds(this.m_destPolys),Z=new s.Path;Z.push(new s.IntPoint2(R.left-10,R.bottom+10)),Z.push(new s.IntPoint2(R.right+10,R.bottom+10)),Z.push(new s.IntPoint2(R.right+10,R.top-10)),Z.push(new s.IntPoint2(R.left-10,R.top-10)),E.AddPath(Z,s.PolyType.ptSubject,!0),E.ReverseSolution=!0,E.Execute(s.ClipType.ctUnion,O,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),O.length>0&&O.splice(0,1)}}},s.ClipperOffset.prototype.OffsetPoint=function(u,f,O){if(this.m_sinA=this.m_normals[f].X*this.m_normals[u].Y-this.m_normals[u].X*this.m_normals[f].Y,Math.abs(this.m_sinA*this.m_delta)<1){var S=this.m_normals[f].X*this.m_normals[u].X+this.m_normals[u].Y*this.m_normals[f].Y;if(S>0)return this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[u].X+this.m_normals[f].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[u].Y+this.m_normals[f].Y*this.m_delta))),f}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[u].X+this.m_normals[f].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[u].Y+this.m_normals[f].Y*this.m_delta))),this.m_destPoly.push(new s.IntPoint1(this.m_srcPoly[u])),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[u].X+this.m_normals[u].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[u].Y+this.m_normals[u].Y*this.m_delta)));else switch(O){case s.JoinType.jtMiter:{var E=1+(this.m_normals[u].X*this.m_normals[f].X+this.m_normals[u].Y*this.m_normals[f].Y);E>=this.m_miterLim?this.DoMiter(u,f,E):this.DoSquare(u,f);break}case s.JoinType.jtSquare:this.DoSquare(u,f);break;case s.JoinType.jtRound:this.DoRound(u,f);break}return f=u,f},s.ClipperOffset.prototype.DoSquare=function(u,f){var O=Math.tan(Math.atan2(this.m_sinA,this.m_normals[f].X*this.m_normals[u].X+this.m_normals[f].Y*this.m_normals[u].Y)/4);this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[u].X+this.m_delta*(this.m_normals[f].X-this.m_normals[f].Y*O)),s.ClipperOffset.Round(this.m_srcPoly[u].Y+this.m_delta*(this.m_normals[f].Y+this.m_normals[f].X*O)))),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[u].X+this.m_delta*(this.m_normals[u].X+this.m_normals[u].Y*O)),s.ClipperOffset.Round(this.m_srcPoly[u].Y+this.m_delta*(this.m_normals[u].Y-this.m_normals[u].X*O))))},s.ClipperOffset.prototype.DoMiter=function(u,f,O){var S=this.m_delta/O;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[u].X+(this.m_normals[f].X+this.m_normals[u].X)*S),s.ClipperOffset.Round(this.m_srcPoly[u].Y+(this.m_normals[f].Y+this.m_normals[u].Y)*S)))},s.ClipperOffset.prototype.DoRound=function(u,f){for(var O=Math.atan2(this.m_sinA,this.m_normals[f].X*this.m_normals[u].X+this.m_normals[f].Y*this.m_normals[u].Y),S=Math.max(s.Cast_Int32(s.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(O))),1),E=this.m_normals[f].X,R=this.m_normals[f].Y,Z,te=0;te<S;++te)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[u].X+E*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[u].Y+R*this.m_delta))),Z=E,E=E*this.m_cos-this.m_sin*R,R=Z*this.m_sin+R*this.m_cos;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[u].X+this.m_normals[u].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[u].Y+this.m_normals[u].Y*this.m_delta)))},s.Error=function(u){try{throw new Error(u)}catch(f){alert(f.message)}},s.JS={},s.JS.AreaOfPolygon=function(u,f){return f||(f=1),s.Clipper.Area(u)/(f*f)},s.JS.AreaOfPolygons=function(u,f){f||(f=1);for(var O=0,S=0;S<u.length;S++)O+=s.Clipper.Area(u[S]);return O/(f*f)},s.JS.BoundsOfPath=function(u,f){return s.JS.BoundsOfPaths([u],f)},s.JS.BoundsOfPaths=function(u,f){f||(f=1);var O=s.Clipper.GetBounds(u);return O.left/=f,O.bottom/=f,O.right/=f,O.top/=f,O},s.JS.Clean=function(S,f){if(!(S instanceof Array))return[];var O=S[0]instanceof Array,S=s.JS.Clone(S);if(typeof f!="number"||f===null)return s.Error("Delta is not a number in Clean()."),S;if(S.length===0||S.length===1&&S[0].length===0||f<0)return S;O||(S=[S]);for(var E=S.length,R,Z,te,ie,pe,Re,_e,qe=[],dt=0;dt<E;dt++)if(Z=S[dt],R=Z.length,R!==0){if(R<3){te=Z,qe.push(te);continue}for(te=Z,ie=f*f,pe=Z[0],Re=1,_e=1;_e<R;_e++)(Z[_e].X-pe.X)*(Z[_e].X-pe.X)+(Z[_e].Y-pe.Y)*(Z[_e].Y-pe.Y)<=ie||(te[Re]=Z[_e],pe=Z[_e],Re++);pe=Z[Re-1],(Z[0].X-pe.X)*(Z[0].X-pe.X)+(Z[0].Y-pe.Y)*(Z[0].Y-pe.Y)<=ie&&Re--,Re<R&&te.splice(Re,R-Re),te.length&&qe.push(te)}return!O&&qe.length?qe=qe[0]:!O&&qe.length===0?qe=[]:O&&qe.length===0&&(qe=[[]]),qe},s.JS.Clone=function(u){if(!(u instanceof Array))return[];if(u.length===0)return[];if(u.length===1&&u[0].length===0)return[[]];var f=u[0]instanceof Array;f||(u=[u]);var O=u.length,S,E,R,Z,te=new Array(O);for(E=0;E<O;E++){for(S=u[E].length,Z=new Array(S),R=0;R<S;R++)Z[R]={X:u[E][R].X,Y:u[E][R].Y};te[E]=Z}return f||(te=te[0]),te},s.JS.Lighten=function(u,f){if(!(u instanceof Array))return[];if(typeof f!="number"||f===null)return s.Error("Tolerance is not a number in Lighten()."),s.JS.Clone(u);if(u.length===0||u.length===1&&u[0].length===0||f<0)return s.JS.Clone(u);var O=u[0]instanceof Array;O||(u=[u]);var S,E,R,Z,te,ie,pe,Re,_e,qe,dt,St,wt,Rt,Pi,Bi,_n,_s=u.length,rn=f*f,Tn=[];for(S=0;S<_s;S++)if(R=u[S],ie=R.length,ie!==0){for(Z=0;Z<1e6;Z++){for(te=[],ie=R.length,R[ie-1].X!==R[0].X||R[ie-1].Y!==R[0].Y?(St=1,R.push({X:R[0].X,Y:R[0].Y}),ie=R.length):St=0,dt=[],E=0;E<ie-2;E++)pe=R[E],_e=R[E+1],Re=R[E+2],Bi=pe.X,_n=pe.Y,wt=Re.X-Bi,Rt=Re.Y-_n,(wt!==0||Rt!==0)&&(Pi=((_e.X-Bi)*wt+(_e.Y-_n)*Rt)/(wt*wt+Rt*Rt),Pi>1?(Bi=Re.X,_n=Re.Y):Pi>0&&(Bi+=wt*Pi,_n+=Rt*Pi)),wt=_e.X-Bi,Rt=_e.Y-_n,qe=wt*wt+Rt*Rt,qe<=rn&&(dt[E+1]=1,E++);for(te.push({X:R[0].X,Y:R[0].Y}),E=1;E<ie-1;E++)dt[E]||te.push({X:R[E].X,Y:R[E].Y});if(te.push({X:R[ie-1].X,Y:R[ie-1].Y}),St&&R.pop(),dt.length)R=te;else break}ie=te.length,te[ie-1].X===te[0].X&&te[ie-1].Y===te[0].Y&&te.pop(),te.length>2&&Tn.push(te)}return O||(Tn=Tn[0]),typeof Tn>"u"&&(Tn=[]),Tn},s.JS.PerimeterOfPath=function(u,f,O){if(typeof u>"u")return 0;var S=Math.sqrt,E=0,R,Z,te=0,ie=0,pe=0,Re=0,_e=u.length;if(_e<2)return 0;for(f&&(u[_e]=u[0],_e++);--_e;)R=u[_e],te=R.X,ie=R.Y,Z=u[_e-1],pe=Z.X,Re=Z.Y,E+=S((te-pe)*(te-pe)+(ie-Re)*(ie-Re));return f&&u.pop(),E/O},s.JS.PerimeterOfPaths=function(u,f,O){O||(O=1);for(var S=0,E=0;E<u.length;E++)S+=s.JS.PerimeterOfPath(u[E],f,O);return S},s.JS.ScaleDownPath=function(u,f){var O,S;for(f||(f=1),O=u.length;O--;)S=u[O],S.X=S.X/f,S.Y=S.Y/f},s.JS.ScaleDownPaths=function(u,f){var O,S,E;for(f||(f=1),O=u.length;O--;)for(S=u[O].length;S--;)E=u[O][S],E.X=E.X/f,E.Y=E.Y/f},s.JS.ScaleUpPath=function(u,f){var O,S,E=Math.round;for(f||(f=1),O=u.length;O--;)S=u[O],S.X=E(S.X*f),S.Y=E(S.Y*f)},s.JS.ScaleUpPaths=function(u,f){var O,S,E,R=Math.round;for(f||(f=1),O=u.length;O--;)for(S=u[O].length;S--;)E=u[O][S],E.X=R(E.X*f),E.Y=R(E.Y*f)},s.ExPolygons=function(){return[]},s.ExPolygon=function(){this.outer=null,this.holes=null},s.JS.AddOuterPolyNodeToExPolygons=function(u,f){var O=new s.ExPolygon;O.outer=u.Contour();var S=u.Childs(),E=S.length;O.holes=new Array(E);var R,Z,te,ie,pe,Re;for(te=0;te<E;te++)for(R=S[te],O.holes[te]=R.Contour(),ie=0,pe=R.Childs(),Re=pe.length;ie<Re;ie++)Z=pe[ie],s.JS.AddOuterPolyNodeToExPolygons(Z,f);f.push(O)},s.JS.ExPolygonsToPaths=function(u){var f,O,S,E,R=new s.Paths;for(f=0,S=u.length;f<S;f++)for(R.push(u[f].outer),O=0,E=u[f].holes.length;O<E;O++)R.push(u[f].holes[O]);return R},s.JS.PolyTreeToExPolygons=function(u){var f=new s.ExPolygons,O,S,E,R;for(S=0,E=u.Childs(),R=E.length;S<R;S++)O=E[S],s.JS.AddOuterPolyNodeToExPolygons(O,f);return f}})()}),i("default",t),i("__esModule",!0)}}});na.register("-/clipper-js@v1.0.2-Mou0diNPTgyilhisGDlW/dist=es2020/clipper-js",["-/clipper-lib@v6.4.2-JisZmmhC7gDAFmHQLYDu/dist=es2020/clipper-lib"],function(i,e){var t,n,r;e&&e.id;function o(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function s(l,h,c){return c={path:h,exports:{},require:function(p,d){return a(p,d??c.path)}},l(c,c.exports),c.exports}function a(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}return{setters:[function(l){t=l}],execute:function(){n=s(function(l,h){Object.defineProperty(h,"__esModule",{value:!0}),h.setErrorCallback=void 0;var c=function(){function fe(U,H){for(var B=0;B<H.length;B++){var re=H[B];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(U,re.key,re)}}return function(U,H,B){return H&&fe(U.prototype,H),B&&fe(U,B),U}}(),p=d(t.default);function d(fe){return fe&&fe.__esModule?fe:{default:fe}}function v(fe){if(Array.isArray(fe)){for(var U=0,H=Array(fe.length);U<fe.length;U++)H[U]=fe[U];return H}else return Array.from(fe)}function D(fe,U){if(!(fe instanceof U))throw new TypeError("Cannot call a class as a function")}var m=void 0;h.setErrorCallback=function(U){m=U},p.default.Error=function(fe){m&&m(fe)};var y=new p.default.Clipper,x=new p.default.ClipperOffset,w=function(){function fe(){var U=arguments.length<=0||arguments[0]===void 0?[]:arguments[0],H=arguments.length<=1||arguments[1]===void 0?!0:arguments[1],B=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],re=arguments.length<=3||arguments[3]===void 0?!1:arguments[3],Qe=arguments.length<=4||arguments[4]===void 0?!1:arguments[4];D(this,fe),this.paths=U,B&&(this.paths=this.paths.map(N)),re&&(this.paths=this.paths.map(j)),Qe&&(this.paths=this.paths.map(K)),this.closed=H}return c(fe,[{key:"_clip",value:function(H,B){var re=new p.default.PolyTree;y.Clear(),y.AddPaths(this.paths,p.default.PolyType.ptSubject,this.closed),y.AddPaths(H.paths,p.default.PolyType.ptClip,H.closed),y.Execute(B,re);var Qe=p.default.Clipper.PolyTreeToPaths(re);return new fe(Qe,this.closed)}},{key:"union",value:function(H){return this._clip(H,p.default.ClipType.ctUnion)}},{key:"difference",value:function(H){return this._clip(H,p.default.ClipType.ctDifference)}},{key:"intersect",value:function(H){return this._clip(H,p.default.ClipType.ctIntersection)}},{key:"xor",value:function(H){return this._clip(H,p.default.ClipType.ctXor)}},{key:"offset",value:function(H){var B=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],re=B.jointType,Qe=re===void 0?"jtSquare":re,De=B.endType,Xe=De===void 0?"etClosedPolygon":De,ge=B.miterLimit,$e=ge===void 0?2:ge,ue=B.roundPrecision,he=ue===void 0?.25:ue;x.Clear(),x.ArcTolerance=he,x.MiterLimit=$e;var je=new p.default.Paths;return x.AddPaths(this.paths,p.default.JoinType[Qe],p.default.EndType[Xe]),x.Execute(je,H),new fe(je,!0)}},{key:"scaleUp",value:function(H){return p.default.JS.ScaleUpPaths(this.paths,H),this}},{key:"scaleDown",value:function(H){return p.default.JS.ScaleDownPaths(this.paths,H),this}},{key:"firstPoint",value:function(){var H=arguments.length<=0||arguments[0]===void 0?!1:arguments[0];if(this.paths.length!==0){var B=this.paths[0],re=B[0];return H?I(re):re}}},{key:"lastPoint",value:function(){var H=arguments.length<=0||arguments[0]===void 0?!1:arguments[0];if(this.paths.length!==0){var B=this.paths[this.paths.length-1],re=this.closed?B[0]:B[B.length-1];return H?I(re):re}}},{key:"areas",value:function(){var H=this,B=this.paths.map(function(re,Qe){return H.area(Qe)});return B}},{key:"area",value:function(H){var B=this.paths[H],re=p.default.Clipper.Area(B);return re}},{key:"totalArea",value:function(){return this.areas().reduce(function(H,B){return H+B},0)}},{key:"perimeter",value:function(H){var B=this.paths[H],re=p.default.JS.PerimeterOfPath(B,this.closed,1);return re}},{key:"perimeters",value:function(){var H=this;return this.paths.map(function(B){return p.default.JS.PerimeterOfPath(B,H.closed,1)})}},{key:"totalPerimeter",value:function(){var H=p.default.JS.PerimeterOfPaths(this.paths,this.closed);return H}},{key:"reverse",value:function(){return p.default.Clipper.ReversePaths(this.paths),this}},{key:"thresholdArea",value:function(H){for(var B=[].concat(v(this.paths)),re=0;re<B.length;re++){var Qe=B[re],De=Math.abs(p.default.Clipper.Area(shape));if(De<H){var Xe=this.paths.indexOf(Qe);this.splice(Xe,1)}}}},{key:"join",value:function(H){var B;return(B=this.paths).splice.apply(B,[this.paths.length,0].concat(v(H.paths))),this}},{key:"clone",value:function(){return new fe(p.default.JS.Clone(this.paths),this.closed)}},{key:"shapeBounds",value:function(){var H=p.default.JS.BoundsOfPaths(this.paths);return H.width=H.right-H.left,H.height=H.bottom-H.top,H.size=H.width*H.height,H}},{key:"pathBounds",value:function(H){var B=this.paths[H],re=p.default.JS.BoundsOfPath(B);return re.width=re.right-re.left,re.height=re.bottom-re.top,re.size=re.width*re.height,re}},{key:"clean",value:function(H){return new fe(p.default.Clipper.CleanPolygons(this.paths,H),this.closed)}},{key:"orientation",value:function(H){var B=this.paths[H];return p.default.Clipper.Orientation(B)}},{key:"pointInShape",value:function(H){var B=arguments.length<=1||arguments[1]===void 0?!1:arguments[1],re=arguments.length<=2||arguments[2]===void 0?!1:arguments[2];B&&(H=Y(H)),re&&(H=ae(H));for(var Qe=0;Qe<this.paths.length;Qe++){var De=this.pointInPath(Qe,H),Xe=this.orientation(Qe);if(!De&&Xe||De&&!Xe)return!1}return!0}},{key:"pointInPath",value:function(H,B){var re=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],Qe=arguments.length<=3||arguments[3]===void 0?!1:arguments[3];re&&(B=Y(B)),Qe&&(B=ae(B));var De=this.paths[H],Xe={X:Math.round(B.X),Y:Math.round(B.Y)};return p.default.Clipper.PointInPolygon(Xe,De)>0}},{key:"fixOrientation",value:function(){return this.closed?(this.totalArea()<0&&this.reverse(),this):this}},{key:"removeOverlap",value:function(){console.warn("Shape.removeOverlap is being depricated, use Shape.simplify('pftNonZero') instead"),this.simplify("pftNonZero")}},{key:"simplify",value:function(H){if(this.closed){var B=p.default.Clipper.SimplifyPolygons(this.paths,p.default.PolyFillType[H]);return new fe(B,!0)}else return this}},{key:"seperateShapes",value:function(){var H=this,B=[];if(this.closed)(function(){for(var ue=new WeakMap,he=[],je=[],We=0;We<H.paths.length;We++){var Ae=H.paths[We],Me=H.orientation(We);if(Me){var vt=H.area(We);ue.set(Ae,vt),he.push(Ae)}else je.push(Ae)}he.sort(function(Be,me){return ue.get(Be)-ue.get(me)});var et=!0,tt=!1,Ot=void 0;try{for(var it=he[Symbol.iterator](),Nt;!(et=(Nt=it.next()).done);et=!0){for(var yt=Nt.value,$=[yt],Pe=H.paths.indexOf(yt),Oe=[].concat(je),J=0;J<Oe.length;J++){var G=Oe[J],ce=H.pointInPath(Pe,G[0]);if(ce){$.push(G);var Ie=je.indexOf(G);je.splice(Ie,1)}}B.push(new fe($,!0))}}catch(Be){tt=!0,Ot=Be}finally{try{!et&&it.return&&it.return()}finally{if(tt)throw Ot}}})();else{var re=!0,Qe=!1,De=void 0;try{for(var Xe=this.paths[Symbol.iterator](),ge;!(re=(ge=Xe.next()).done);re=!0){var $e=ge.value;B.push(new fe([$e],!1))}}catch(ue){Qe=!0,De=ue}finally{try{!re&&Xe.return&&Xe.return()}finally{if(Qe)throw De}}}return B}},{key:"round",value:function(){return new fe(this.paths.map(j),this.closed)}},{key:"removeDuplicates",value:function(){return new fe(this.paths.map(K),this.closed)}},{key:"mapToLower",value:function(){return this.paths.map(_)}}]),fe}();h.default=w;function _(fe){return fe.map(I)}function I(fe){var U=fe.X,H=fe.Y;return{x:U,y:H}}function N(fe){return fe.map(Y)}function Y(fe){var U=fe.x,H=fe.y;return{X:U,Y:H}}function j(fe){return fe.map(ae)}function ae(fe){var U=fe.X,H=fe.Y;return{X:Math.round(U),Y:Math.round(H)}}function K(fe){return fe.filter(oe)}function oe(fe,U,H){if(U===0)return!0;var B=H[U-1];return!(fe.X===B.X&&fe.Y===B.Y)}}),r=o(n),i("default",r),i("__esModule",!0)}}});na.register("clipper-js",["-/clipper-js@v1.0.2-Mou0diNPTgyilhisGDlW/dist=es2020/clipper-js"],function(i,e){e&&e.id;var t={default:!0};function n(r){var o={};for(var s in r)s!=="default"&&!t.hasOwnProperty(s)&&(o[s]=r[s]);i(o)}return{setters:[function(r){n(r),i({default:r.default})}],execute:function(){}}});const rm=Yh("clipper-js"),XO=rm.default;rm.__esModule;const WO=(i,e)=>1e-8>Math.abs(i[0]-e[0])+Math.abs(i[1]-e[1]);function sm(i,e,t={}){let{endType:n,jointType:r="jtRound",miterLimit:o=2,roundPrecision:s=.25}=t;if(!n){const d=i[0][0],v=i.at(-1).at(-1);n=WO(d,v)?"etClosedRound":"etOpenRound"}const{data:a,scale:l}=UO(i,e),c=new XO(a,!0).offset(e*l,{jointType:r,endType:n,miterLimit:o,roundPrecision:s}),p=zO(c,l);for(;i.length>p.length;)i.pop();return p.forEach((d,v)=>{i[v]=d}),i}const YO=(i,e)=>{const t={};return t.X=Math.round(i[0]*e),t.Y=Math.round(i[1]*e),t},ZO=(i,e)=>Math.sqrt((e[0]-i[0])**2+(e[1]-i[1])**2);function UO(i,e){const t=[],n=i.flat();for(let s=0;s<n.length-2;s+=1){const a=n[s],l=n[s+1],h=ZO(a,l);Math.abs(h)!==0&&t.push(h)}const r=e!==0?(1/Math.min(...t,e)+1)*10:(1/Math.min(...t)+1)*10;return{data:i.map((s,a)=>s.map(l=>YO(l,r))),scale:r}}function zO(i,e){return Object.values(i.paths).map(n=>(n=n.map(({X:r,Y:o})=>[r/e,o/e]),[...n,n[0]],[...n,n[0]]))}function Ca(i,e,t){const n=d=>d.map(([v,D])=>({X:v,Y:D})),r=d=>d.map(({X:v,Y:D})=>[v,D]),a=i.map(n);e=e.map(n);const l=new P.Paths,h=new P.Clipper;h.AddPaths(a,P.PolyType.ptSubject,!0),h.AddPaths(e,P.PolyType.ptClip,!0);const c={intersection:P.ClipType.ctIntersection,union:P.ClipType.ctUnion,difference:P.ClipType.ctDifference,xor:P.ClipType.ctXor};h.Execute(c[t],l);const p=l.map(r);for(;i.length>p.length;)i.pop();return p.forEach((d,v)=>{i[v]=d,i[v].push([d[0][0],d[0][1]])}),i}// @license
const Ya={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},om=function(i){this._string=i,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()};om.prototype={parseSegment:function(){var i=this._string[this._currentIndex],e=Ya[i]?Ya[i]:null;if(e===null){if(this._prevCommand===null||((i==="+"||i==="-"||i==="."||i>="0"&&i<="9")&&this._prevCommand!=="Z"?this._prevCommand==="M"?e="L":this._prevCommand==="m"?e="l":e=this._prevCommand:e=null,e===null))return null}else this._currentIndex+=1;this._prevCommand=e;var t=null,n=e.toUpperCase();return n==="H"||n==="V"?t=[this._parseNumber()]:n==="M"||n==="L"||n==="T"?t=[this._parseNumber(),this._parseNumber()]:n==="S"||n==="Q"?t=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:n==="C"?t=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:n==="A"?t=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:n==="Z"&&(this._skipOptionalSpaces(),t=[]),t===null||t.indexOf(null)>=0?null:{type:e,values:t}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var i=this._string[this._currentIndex];return Ya[i]?Ya[i]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var i=this.peekSegmentType();return i==="M"||i==="m"},_isCurrentSpace:function(){var i=this._string[this._currentIndex];return i<=" "&&(i===" "||i===`
`||i==="	"||i==="\r"||i==="\f")},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string[this._currentIndex]!==","?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string[this._currentIndex]===","&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var i=0,e=0,t=1,n=0,r=1,o=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,r=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")&&this._string[this._currentIndex]!==".")return null;for(var a=this._currentIndex;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==a)for(var l=this._currentIndex-1,h=1;l>=a;)e+=h*(this._string[l]-"0"),l-=1,h*=10;if(this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="."){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)t*=10,n+=(this._string.charAt(this._currentIndex)-"0")/t,this._currentIndex+=1}if(this._currentIndex!==s&&this._currentIndex+1<this._endIndex&&(this._string[this._currentIndex]==="e"||this._string[this._currentIndex]==="E")&&this._string[this._currentIndex+1]!=="x"&&this._string[this._currentIndex+1]!=="m"){if(this._currentIndex+=1,this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,o=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)i*=10,i+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var c=e+n;return c*=r,i&&(c*=Math.pow(10,o*i)),s===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),c)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var i=null,e=this._string[this._currentIndex];if(this._currentIndex+=1,e==="0")i=0;else if(e==="1")i=1;else return null;return this._skipOptionalSpacesOrDelimiter(),i}};const fd=function(i){if(!i||i.length===0)return[];var e=new om(i),t=[];if(e.initialCommandIsMoveTo())for(;e.hasMoreData();){var n=e.parseSegment();if(n===null)break;t.push(n)}return t},Ms=typeof Symbol<"u"?Symbol():"__cachedPathData",uh=typeof Symbol<"u"?Symbol():"__cachedNormalizedPathData";var am=function(i,e,t,n,r,o,s,a,l,h){var c=function(it){return Math.PI*it/180},p=function(it,Nt,yt){var $=it*Math.cos(yt)-Nt*Math.sin(yt),Pe=it*Math.sin(yt)+Nt*Math.cos(yt);return{x:$,y:Pe}},d=c(s),v=[],D,m,y,x;if(h)D=h[0],m=h[1],y=h[2],x=h[3];else{var w=p(i,e,-d);i=w.x,e=w.y;var _=p(t,n,-d);t=_.x,n=_.y;var I=(i-t)/2,N=(e-n)/2,Y=I*I/(r*r)+N*N/(o*o);Y>1&&(Y=Math.sqrt(Y),r=Y*r,o=Y*o);var j;a===l?j=-1:j=1;var ae=r*r,K=o*o,oe=ae*K-ae*N*N-K*I*I,fe=ae*N*N+K*I*I,U=j*Math.sqrt(Math.abs(oe/fe));y=U*r*N/o+(i+t)/2,x=U*-o*I/r+(e+n)/2,D=Math.asin(parseFloat(((e-x)/o).toFixed(9))),m=Math.asin(parseFloat(((n-x)/o).toFixed(9))),i<y&&(D=Math.PI-D),t<y&&(m=Math.PI-m),D<0&&(D=Math.PI*2+D),m<0&&(m=Math.PI*2+m),l&&D>m&&(D=D-Math.PI*2),!l&&m>D&&(m=m-Math.PI*2)}var H=m-D;if(Math.abs(H)>Math.PI*120/180){var B=m,re=t,Qe=n;l&&m>D?m=D+Math.PI*120/180*1:m=D+Math.PI*120/180*-1,t=y+r*Math.cos(m),n=x+o*Math.sin(m),v=am(t,n,re,Qe,r,o,s,0,l,[m,B,y,x])}H=m-D;var De=Math.cos(D),Xe=Math.sin(D),ge=Math.cos(m),$e=Math.sin(m),ue=Math.tan(H/4),he=4/3*r*ue,je=4/3*o*ue,We=[i,e],Ae=[i+he*Xe,e-je*De],Me=[t+he*$e,n-je*ge],vt=[t,n];if(Ae[0]=2*We[0]-Ae[0],Ae[1]=2*We[1]-Ae[1],h)return[Ae,Me,vt].concat(v);v=[Ae,Me,vt].concat(v);for(var et=[],tt=0;tt<v.length;tt+=3){var r=p(v[tt][0],v[tt][1],d),o=p(v[tt+1][0],v[tt+1][1],d),Ot=p(v[tt+2][0],v[tt+2][1],d);et.push([r.x,r.y,o.x,o.y,Ot.x,Ot.y])}return et},Bs=function(i){return i.map(function(e){return{type:e.type,values:Array.prototype.slice.call(e.values)}})},jO=function(i){var e=[],t=null,n=null,r=null,o=null;return i.forEach(function(s){var a=s.type;if(a==="M"){var l=s.values[0],h=s.values[1];e.push({type:"M",values:[l,h]}),r=l,o=h,t=l,n=h}else if(a==="m"){var l=t+s.values[0],h=n+s.values[1];e.push({type:"M",values:[l,h]}),r=l,o=h,t=l,n=h}else if(a==="L"){var l=s.values[0],h=s.values[1];e.push({type:"L",values:[l,h]}),t=l,n=h}else if(a==="l"){var l=t+s.values[0],h=n+s.values[1];e.push({type:"L",values:[l,h]}),t=l,n=h}else if(a==="C"){var c=s.values[0],p=s.values[1],d=s.values[2],v=s.values[3],l=s.values[4],h=s.values[5];e.push({type:"C",values:[c,p,d,v,l,h]}),t=l,n=h}else if(a==="c"){var c=t+s.values[0],p=n+s.values[1],d=t+s.values[2],v=n+s.values[3],l=t+s.values[4],h=n+s.values[5];e.push({type:"C",values:[c,p,d,v,l,h]}),t=l,n=h}else if(a==="Q"){var c=s.values[0],p=s.values[1],l=s.values[2],h=s.values[3];e.push({type:"Q",values:[c,p,l,h]}),t=l,n=h}else if(a==="q"){var c=t+s.values[0],p=n+s.values[1],l=t+s.values[2],h=n+s.values[3];e.push({type:"Q",values:[c,p,l,h]}),t=l,n=h}else if(a==="A"){var l=s.values[5],h=s.values[6];e.push({type:"A",values:[s.values[0],s.values[1],s.values[2],s.values[3],s.values[4],l,h]}),t=l,n=h}else if(a==="a"){var l=t+s.values[5],h=n+s.values[6];e.push({type:"A",values:[s.values[0],s.values[1],s.values[2],s.values[3],s.values[4],l,h]}),t=l,n=h}else if(a==="H"){var l=s.values[0];e.push({type:"H",values:[l]}),t=l}else if(a==="h"){var l=t+s.values[0];e.push({type:"H",values:[l]}),t=l}else if(a==="V"){var h=s.values[0];e.push({type:"V",values:[h]}),n=h}else if(a==="v"){var h=n+s.values[0];e.push({type:"V",values:[h]}),n=h}else if(a==="S"){var d=s.values[0],v=s.values[1],l=s.values[2],h=s.values[3];e.push({type:"S",values:[d,v,l,h]}),t=l,n=h}else if(a==="s"){var d=t+s.values[0],v=n+s.values[1],l=t+s.values[2],h=n+s.values[3];e.push({type:"S",values:[d,v,l,h]}),t=l,n=h}else if(a==="T"){var l=s.values[0],h=s.values[1];e.push({type:"T",values:[l,h]}),t=l,n=h}else if(a==="t"){var l=t+s.values[0],h=n+s.values[1];e.push({type:"T",values:[l,h]}),t=l,n=h}else(a==="Z"||a==="z")&&(e.push({type:"Z",values:[]}),t=r,n=o)}),e},bu=function(i){var e=[],t=null,n=null,r=null,o=null,s=null,a=null,l=null;return i.forEach(function(h){if(h.type==="M"){var c=h.values[0],p=h.values[1];e.push({type:"M",values:[c,p]}),a=c,l=p,o=c,s=p}else if(h.type==="C"){var d=h.values[0],v=h.values[1],D=h.values[2],m=h.values[3],c=h.values[4],p=h.values[5];e.push({type:"C",values:[d,v,D,m,c,p]}),n=D,r=m,o=c,s=p}else if(h.type==="L"){var c=h.values[0],p=h.values[1];e.push({type:"L",values:[c,p]}),o=c,s=p}else if(h.type==="H"){var c=h.values[0];e.push({type:"L",values:[c,s]}),o=c}else if(h.type==="V"){var p=h.values[0];e.push({type:"L",values:[o,p]}),s=p}else if(h.type==="S"){var D=h.values[0],m=h.values[1],c=h.values[2],p=h.values[3],y,x;t==="C"||t==="S"?(y=o+(o-n),x=s+(s-r)):(y=o,x=s),e.push({type:"C",values:[y,x,D,m,c,p]}),n=D,r=m,o=c,s=p}else if(h.type==="T"){var c=h.values[0],p=h.values[1],d,v;t==="Q"||t==="T"?(d=o+(o-n),v=s+(s-r)):(d=o,v=s);var y=o+2*(d-o)/3,x=s+2*(v-s)/3,w=c+2*(d-c)/3,_=p+2*(v-p)/3;e.push({type:"C",values:[y,x,w,_,c,p]}),n=d,r=v,o=c,s=p}else if(h.type==="Q"){var d=h.values[0],v=h.values[1],c=h.values[2],p=h.values[3],y=o+2*(d-o)/3,x=s+2*(v-s)/3,w=c+2*(d-c)/3,_=p+2*(v-p)/3;e.push({type:"C",values:[y,x,w,_,c,p]}),n=d,r=v,o=c,s=p}else if(h.type==="A"){var I=Math.abs(h.values[0]),N=Math.abs(h.values[1]),Y=h.values[2],j=h.values[3],ae=h.values[4],c=h.values[5],p=h.values[6];if(I===0||N===0)e.push({type:"C",values:[o,s,c,p,c,p]}),o=c,s=p;else if(o!==c||s!==p){var K=am(o,s,c,p,I,N,Y,j,ae);K.forEach(function(U){e.push({type:"C",values:U})}),o=c,s=p}}else h.type==="Z"&&(e.push(h),o=a,s=l);t=h.type}),e};const Oi=(i,e)=>e in i&&"baseVal"in i[e]?i[e].baseVal.value:+i.getAttribute(e),GO=function(i){if(i&&i.normalize){if(this[uh])return Bs(this[uh]);var e;this[Ms]?e=Bs(this[Ms]):(e=fd(this.getAttribute("d")||""),this[Ms]=Bs(e));var t=bu(jO(e));return this[uh]=Bs(t),t}else{if(this[Ms])return Bs(this[Ms]);var e=fd(this.getAttribute("d")||"");return this[Ms]=Bs(e),e}},VO=function(i){var e=Oi(this,"x"),t=Oi(this,"y"),n=Oi(this,"width"),r=Oi(this,"height"),o=this.hasAttribute("rx")?Oi(this,"rx"):Oi(this,"ry"),s=this.hasAttribute("ry")?Oi(this,"ry"):Oi(this,"rx");o>n/2&&(o=n/2),s>r/2&&(s=r/2);var a=[{type:"M",values:[e+o,t]},{type:"H",values:[e+n-o]},{type:"A",values:[o,s,0,0,1,e+n,t+s]},{type:"V",values:[t+r-s]},{type:"A",values:[o,s,0,0,1,e+n-o,t+r]},{type:"H",values:[e+o]},{type:"A",values:[o,s,0,0,1,e,t+r-s]},{type:"V",values:[t+s]},{type:"A",values:[o,s,0,0,1,e+o,t]},{type:"Z",values:[]}];return a=a.filter(function(l){return!(l.type==="A"&&(l.values[0]===0||l.values[1]===0))}),i&&i.normalize===!0&&(a=bu(a)),a},qO=function(i){var e=Oi(this,"cx"),t=Oi(this,"cy"),n=Oi(this,"r"),r=[{type:"M",values:[e+n,t]},{type:"A",values:[n,n,0,0,1,e,t+n]},{type:"A",values:[n,n,0,0,1,e-n,t]},{type:"A",values:[n,n,0,0,1,e,t-n]},{type:"A",values:[n,n,0,0,1,e+n,t]},{type:"Z",values:[]}];return i&&i.normalize===!0&&(r=bu(r)),r},HO=function(i){var e=Oi(this,"cx"),t=Oi(this,"cy"),n=Oi(this,"rx"),r=Oi(this,"ry"),o=[{type:"M",values:[e+n,t]},{type:"A",values:[n,r,0,0,1,e,t+r]},{type:"A",values:[n,r,0,0,1,e-n,t]},{type:"A",values:[n,r,0,0,1,e,t-r]},{type:"A",values:[n,r,0,0,1,e+n,t]},{type:"Z",values:[]}];return i&&i.normalize===!0&&(o=bu(o)),o},JO=function(){const i=Oi(this,"x1"),e=Oi(this,"x2"),t=Oi(this,"y1"),n=Oi(this,"y2");return[{type:"M",values:[i,t]},{type:"L",values:[e,n]}]},KO=function(){for(var i=[],e=0;e<this.points.numberOfItems;e+=1){var t=this.points.getItem(e);i.push({type:e===0?"M":"L",values:[t.x,t.y]})}return i},ex=function(){for(var i=[],e=0;e<this.points.numberOfItems;e+=1){var t=this.points.getItem(e);i.push({type:e===0?"M":"L",values:[t.x,t.y]})}return i.push({type:"Z",values:[]}),i},dd={circle:qO,ellipse:HO,path:GO,polygon:ex,polyline:KO,line:JO,rect:VO};function tx(i,e){const t=i.nodeName.toLowerCase();if(t in dd)return dd[t].call(i,e);throw new Error(`Unsupported SVG element type: '${t}'`)}function ix([i,e,t,n,r,o,s,a],l){const h=3*t-2*i-s,c=3*n-2*e-a,p=3*r-2*s-i,d=3*o-2*a-e;return Math.max(h*h,p*p)+Math.max(c*c,d*d)<=16*l*l}function nx([i,e,t,n,r,o,s,a],l){l===void 0&&(l=.5);let h=1-l,c=h*i+l*t,p=h*e+l*n,d=h*t+l*r,v=h*n+l*o,D=h*r+l*s,m=h*o+l*a,y=h*c+l*d,x=h*p+l*v,w=h*d+l*D,_=h*v+l*m,I=h*y+l*w,N=h*x+l*_;return[[i,e,c,p,y,x,I,N],[I,N,w,_,D,m,s,a]]}function rx(i,e,t=32){const n=1/t,r=[];function o(s,a,l){if(l-a>n&&!ix(s,e)){const h=nx(s,.5),c=(a+l)/2;o(h[0],a,c),o(h[1],c,l)}else{const h=s[6]-s[0],c=s[7]-s[1];Math.sqrt(h*h+c*c)>0&&r.push(s)}}return o(i,0,1),r}function sx(i,e={}){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",i);const{maxError:n=.1}=e,r=[],o=([h,c])=>[h,c],s=tx(t,{normalize:!0});let a=null,l=null;for(const h of s)if(h.type==="M")a=o(h.values),l=a,r.push({points:[a]});else if(h.type==="L")a=o(h.values),r[r.length-1].points.push(a);else if(h.type==="C"){const[c,p,d,v,D,m]=h.values,[y,x]=a,[w,_]=o([c,p]),[I,N]=o([d,v]),[Y,j]=o([D,m]),ae=rx([y,x,w,_,I,N,Y,j],n);for(const K of ae)r[r.length-1].points.push([K[6],K[7]]);a=[Y,j]}else if(h.type==="A"){const[c,p,d,v,D,m,y]=h.values,x=d,w=D,_=v,{cos:I,sin:N,atan2:Y,sqrt:j,sign:ae,acos:K,abs:oe,ceil:fe}=Math,U=(a[0]-m)/2,H=(a[1]-y)/2,B=I(x)*U+N(x)*H,re=-N(x)*U+I(x)*H,Qe=B*B,De=re*re,Xe=Qe/(c*c)+De/(p*p),ge=Xe<=1?j(Xe)*c:c,$e=Xe<=1?j(Xe)*p:p,ue=ge*ge,he=$e*$e;let je=(ue*he-ue*De-he*Qe)/(ue*De+he*Qe);if(oe(je)<1e-4&&(je=0),je<0)throw new Error(`bad arc args ${je}`);const We=(_===w?-1:1)*j(je),Ae=We*ge*re/$e,Me=We*-$e*B/ge,vt=I(x)*Ae-N(x)*Me+(a[0]+m)/2,et=N(x)*Ae+I(x)*Me+(a[1]+y)/2,tt=(Pe,Oe,J,G)=>Y(Pe*G-Oe*J,Pe*J+Oe*G),Ot=tt(1,0,(B-Ae)/ge,(re-Me)/$e),it=tt((B-Ae)/ge,(re-Me)/$e,(-B-Ae)/ge,(-re-Me)/$e)%(Math.PI*2),Nt=w===0&&it>0?it-Math.PI*2:w===1&&it<0?it+Math.PI*2:it,yt=n,$=fe(oe(Nt)/K(1-yt/ge));for(let Pe=1;Pe<=$;Pe++){const Oe=Ot+Nt*Pe/$,J=I(x)*ge*I(Oe)-N(x)*$e*N(Oe)+vt,G=N(x)*ge*I(Oe)+I(x)*$e*N(Oe)+et;r[r.length-1].points.push([J,G])}a=[m,y]}else if(h.type==="Z")l&&(a[0]!==l[0]||a[1]!==l[1])&&r[r.length-1].points.push(l);else throw Error(`Unexpected path command: "${h}"`);return r}const pd=(i,e,t)=>[(1-i)*e.x+i*t.x,(1-i)*e.y+i*t.y],lm=(i,e,t,...n)=>n.length>0?[pd(i,e,t),...lm(i,t,...n)]:[pd(i,e,t)],um=(i,e)=>e.length>1?um(i,lm(i,...e)):e[0],ox=i=>Array.isArray(i)?{x:i[0],y:i[1]}:i;function ax(i,...e){e=e.map(ox),i.length<0&&(i=[[[0,0]]]),e=[i.at(-1).at(-1),...e];const n=[];for(let r=0;r<=1;r+=1/32){const o=um(r,e);n.push(o)}return n.forEach(r=>i.at(-1).push(r)),i}const Mr=(i,e,t=[0,0])=>{const[n,r]=t,[o,s]=e,a=o-n,l=s-r;return lx(i,c=>[c[0]+a,c[1]+l])},lx=(i,e)=>(i.forEach((t,n)=>{i[n]=t.map(e)}),i),Su=i=>{let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return i.flat().forEach(o=>{const[s,a]=o;e>s&&(e=s),t<s&&(t=s),n>a&&(n=a),r<a&&(r=a)}),{xMin:e,xMax:t,yMin:n,yMax:r}},ds=(i,e)=>{if(i.length===0&&i.push([0,0]),e==="start")return i[0][0];if(e==="end")return i.at(-1).at(-1);let{xMax:t,xMin:n,yMax:r,yMin:o}=Su(i),s=(t+n)/2,a=(r+o)/2;if(e==="cc")return[s,a];if(e==="lb")return[n,o];if(e==="rt")return[t,r];if(e==="lc")return[n,a];if(e==="lt")return[n,r];if(e==="cb")return[s,o];if(e==="ct")return[s,r];if(e==="rb")return[t,o];if(e==="rc")return[t,a];throw'"'+e+'" is not an origin point. "right" or "left" come first then "bottom" or "top"'},Uc=(i,e,t)=>(t||(t=ds(i,"cc")),ux(i,r=>{let o=e/180*Math.PI,s=r[0]-t[0],a=r[1]-t[1];return[s*Math.cos(o)-a*Math.sin(o)+t[0],a*Math.cos(o)+s*Math.sin(o)+t[1]]})),ux=(i,e)=>(i.forEach((t,n)=>{i[n]=t.map(e)}),i),hm=(i,e,t)=>{if(i.length===0&&i.push([[0,0]]),t===0)return i;const n=i.at(-1).at(-1),r=hx(i)+e,o=Math.cos(md(r)),s=Math.sin(md(r)),a=n.x+t*o,l=n.y+t*s;return i.at(-1).push([a,l]),i};function hx(i){const e=i.at(-1);if(e.length<2)return 0;const t=e.at(-1),n=e.at(-2),r=t[0]-n[0],o=t[1]-n[1];return Math.atan2(o,r)*180/Math.PI}const md=i=>i/180*Math.PI;function gd(i){const e=i.at(-1);if(e.length<2)return 0;const t=e.at(-1),n=e.at(-2),r=t[0]-n[0],o=t[1]-n[1];return Math.atan2(o,r)*180/Math.PI}const cx=(i,e,t)=>{if(e===0||t===0)return i;i.length===0&&i.push([[0,0]]);const n=32,r=[[]],o=e/180*Math.PI,s=i.at(-1).at(-1),a=gd(i),l=(p,d)=>d*Math.cos(p),h=(p,d)=>d*Math.sin(p);for(let p=0;p<=n;p++){const d=o/n*p,v=l(d,t),D=h(d,t);r[0].push([v,D])}Mr(r,s,r[0][0]),Uc(r,a+(e<0?90:-90),r[0][0]),r[0].slice(1).forEach(p=>i.at(-1).push(p));const c=gd(i);return hm(i,e+a-c,t/1e12),i},wu=(i,e,t)=>{if(i.length===0)return i;t||(t=ds(i,"cc"));const[n,r]=t;typeof e=="number"&&(e=[e,e]);const[o,s]=e;return fx(i,l=>[(l[0]-n)*o+n,(l[1]-r)*s+r])},fx=(i,e)=>(i.forEach((t,n)=>{i[n]=t.map(e)}),i),Io=(i,e)=>Zh(i,e)<1e-6,Zh=([i,e],[t,n])=>Math.sqrt((t-i)**2+(n-e)**2),dx=(i,e)=>Math.sqrt((e[0]-i[0])**2+(e[1]-i[1])**2),Za=(i,e)=>{const t=dx(i,e);return[(e[0]-i[0])/t,(e[1]-i[1])/t]},px=i=>{const e=Math.sqrt(i[0]**2+i[1]**2);return[i[0]/e,i[1]/e]},mx=(i,e,t,n)=>{const r=Math.sin(n*(1-i))/Math.sin(n),o=Math.sin(n*i)/Math.sin(n);return[e[0]*r+t[0]*o,e[1]*r+t[1]*o]};function vd(i){if(typeof i[0]!="string")return i;if(i[0]==="chamfer"){const[e,t,n]=i;return n}else if(i[0]==="fillet"){const[e,t,n]=i;return n}else{if(i[0]==="bezier")throw"Can't begin wire with bezier.";return null}}function gx(i){const e=[];let t=!1;return i.forEach(n=>{n[0]==="bezier"&&t===!0?e.at(-1).push(...n.slice(1)):(e.push(n),t=!1),n[0]==="bezier"&&(t=!0)}),e}function vx(i){if(i.length===0)return[[]];i=gx(i);let e=vd(i[0]);const t=[e];for(let n=1;n<i.length;n++){const r=i[n];let o=null,s=n+1,a=i[s];for(;a&&a[0]!=="bezier"&&(o=vd(a),o===null);)s++,a=i[s];if(typeof r[0]!="string"){if(Io(r,e))continue;t.push(r),e=r}else if(r[0]==="chamfer"){const[l,h,c]=r;if(e&&o){if(Io(c,e)||Io(c,o))continue;const[p,d]=Array.isArray(h)?h:[h,h],v=Za(c,e),D=[c[0]+v[0]*p,c[1]+v[1]*p],m=Za(c,o),y=[c[0]+m[0]*d,c[1]+m[1]*d];t.push(D),t.push(y)}else throw"Chamfering requires previous and next points.";e=t.at(-1)}else if(r[0]==="fillet"){let[l,h,c]=r;if(h<0&&(h=1e-8),e&&o){if(Io(c,e)||Io(c,o))continue;const p=Za(c,e),d=Za(c,o),v=Math.acos(p[0]*d[0]+p[1]*d[1]);let D=h/Math.tan(v/2);const m=Zh(e,c),y=Zh(o,c);D=Math.min(m,y,D),h=Math.min(D*Math.tan(v/2),h);const x=[c[0]+p[0]*D,c[1]+p[1]*D],w=[c[0]+d[0]*D,c[1]+d[1]*D],_=[],I=px([p[0]+d[0],p[1]+d[1]]),N=Math.sqrt(D**2+h**2),Y=[c[0]+I[0]*N,c[1]+I[1]*N],j=Math.PI-v,ae=[x[0]-Y[0],x[1]-Y[1]],K=[w[0]-Y[0],w[1]-Y[1]];for(let oe=1/20;oe<1;oe+=1/20){const[fe,U]=mx(oe,ae,K,j);let H=[Y[0]+fe,Y[1]+U];_.push(H)}t.push(..._)}else throw"Filleting requires previous and next points.";e=t.at(-1)}else if(r[0]==="bezier"){const[l,...h]=r;if(e&&o){let c=yx([e,...h,o]);c=c.slice(1,-1),c.length>0&&t.push(...c)}else throw"Beziers requires previous and next points.";e=t.at(-1)}}return[t]}const yd=(i,e,t)=>[(1-i)*e[0]+i*t[0],(1-i)*e[1]+i*t[1]],cm=(i,e,t,...n)=>n.length>0?[yd(i,e,t),...cm(i,t,...n)]:[yd(i,e,t)],fm=(i,e)=>e.length>1?fm(i,cm(i,...e)):e[0];function yx(i){const e=[];for(let t=0;t<=1;t+=1/64){const n=fm(t,i);e.push(n)}return e}const qo=(i,e)=>Uh(i,e)<1e-6,Uh=([i,e],[t,n])=>Math.sqrt((t-i)**2+(n-e)**2),Ox=(i,e)=>Math.sqrt((e[0]-i[0])**2+(e[1]-i[1])**2),Od=(i,e)=>{const t=Ox(i,e);return[(e[0]-i[0])/t,(e[1]-i[1])/t]},xx=i=>{const e=Math.sqrt(i[0]**2+i[1]**2);return[i[0]/e,i[1]/e]};function Ua(i,e=[0,0],t=[0,0]){if(typeof i[0]!="string")return i;if(i[0]==="chamfer"){const[n,r,o]=i;return o}else if(i[0]==="fillet"){const[n,r,o]=i;return o}else if(i[0]==="cubic"){const[n,r,o,s]=i;return o}else if(i[0]==="rel"){const[n,r,o]=i;return[e[0]+r,e[1]+o]}else if(i[0]==="turnForward"){const[n,r,o]=i,s=r/180*Math.PI,a=Sx(e,t)+s;return[e[0]+Math.cos(a)*o,e[1]+Math.sin(a)*o]}else return null}function Dx(i){if(typeof i[0]!="string")return i;if(i[0]==="chamfer"){const[e,t,n]=i;return n}else if(i[0]==="fillet"){const[e,t,n]=i;return n}else if(i[0]==="cubic"){const[e,t,n,r]=i;return r}else return null}function Cx(i,e,t){const[n,r]=i,[o,s]=e,[a,l]=t,h=n-a,c=r-l,p=o-a,d=s-l,v=h*h+c*c,D=v+h*p+c*d,m=4/3*(Math.sqrt(2*v*D)-D)/(h*d-c*p),y=a+h-m*c,x=l+c+m*h,w=a+p+m*d,_=l+d-m*p;return[[n,r],[y,x],[w,_],[o,s]]}function bx(i,e,t,n){if(qo(e,i)||qo(e,t)||qo(i,t)||n<=0)return null;const r=Od(e,i),o=Od(e,t),s=Math.acos(r[0]*o[0]+r[1]*o[1]);let a=n/Math.tan(s/2);const l=Uh(i,e),h=Uh(t,e);a=Math.min(l,h,a),n=Math.min(a*Math.tan(s/2),n);const c=[e[0]+r[0]*a,e[1]+r[1]*a],p=[e[0]+o[0]*a,e[1]+o[1]*a],d=xx([r[0]+o[0],r[1]+o[1]]),v=Math.sqrt(a**2+n**2),D=[e[0]+d[0]*v,e[1]+d[1]*v];return[c,p,D]}function Sx(i,e){const t=i[0]-e[0],n=i[1]-e[1];return Math.atan2(n,t)}function wx(i){const e=[],t=[];if(i.length===0)return{cubics:e,filletsAndChamfers:t};let n=Ua(i[0]),r=Dx(i[0]);r===null&&(r=n);const o=()=>e.length>0?yl(e.at(-1),32).slice(-2).reverse():[n,n];for(let s=1;s<i.length;s++){const a=i[s];if(typeof a[0]!="string")e.push([n,r,a,a]),n=a,r=a;else if(a[0]==="fillet"||a[0]==="chamfer"){const[l,h,c]=a,p=Ua(c,...o());e.push([n,r,p,p]),n=p,r=p;const d=s===i.length-1?p:Ua(i[s+1],p,n),v={lowerLimit:n,start:p,upperLimit:d,radius:h,cubicIndex:s-1,type:l};t.push(v)}else if(a[0]==="cubic"){const[l,h,c,p]=a;e.push([n,r,h,c]),n=c,r=p}else if(a[0]==="rel"||a[0]==="turnForward"){const l=Ua(a,...o());e.push([n,r,l,l]),n=l,r=l}else throw new Error("Unknown command used in path(...)")}return{cubics:e,filletsAndChamfers:t}}function dm(...i){const{cubics:e,filletsAndChamfers:t}=wx(i);let n=[];const r=30,o=[];for(let a=0;a<e.length;a++){const l=e[a];a===0&&n.push(l[0]);const h=n.length-1;n.push(...yl(l,r).slice(1));const c=p=>{p.cubicIndex===a&&a!==e.length-1&&(p.ptIndex=n.length-1,p.lowerIndex=h,p.upperIndex=p.ptIndex+yl(e[a+1],r).length-1,o.push(p))};t.forEach(c)}let s=0;return o.forEach(a=>{if(a.radius<=0||a.upperIndex-a.lowerIndex>2)return;let l=-1,h=1;if(l=Math.max(l,a.lowerIndex-a.ptIndex),h=Math.min(h,a.upperIndex-a.ptIndex),l>=h)return;const c=a.ptIndex+s,p=n[c],d=n[c+l],v=n[c+h],D=bx(d,p,v,a.radius);if(D){const[m,y,x]=D,w=c+l+1,_=c+h,I=a.type==="fillet"?yl(Cx(m,y,x),r):[m,y];n=[...n.slice(0,w),...I,...n.slice(_)],s+=I.length-(h-l-1)}}),n}const xd=(i,e,t)=>[(1-i)*e[0]+i*t[0],(1-i)*e[1]+i*t[1]],pm=(i,e,t,...n)=>n.length>0?[xd(i,e,t),...pm(i,t,...n)]:[xd(i,e,t)],mm=(i,e)=>e.length>1?mm(i,pm(i,...e)):e[0];function yl(i,e){if(qo(i[0],i[1])&&qo(i[2],i[3]))return[i[0],i[3]];const t=[];for(let n=0;n<=1*e;n+=1){const r=mm(n/e,i);t.push(r)}return t}function gm(){const[i,...e]=arguments;return e.reduce((t,n)=>Ca(t,n,"union"),i)}function Px(){const[i,...e]=arguments;return e.reduce((t,n)=>Ca(t,n,"intersect"),i)}function Lx(){const[i,...e]=arguments;return e.reduce((t,n)=>Ca(t,n,"difference"),i)}function kx(){const[i,...e]=arguments;return e.reduce((t,n)=>Ca(t,n,"xor"),i)}function Ax(i){if(i.length===0)throw new Error("Shape must have at least one pt.");const e=i.at(-1);if(e.length<2)return 0;const t=e.at(-1),n=e.at(-2),r=t[0]-n[0],o=t[1]-n[1];return Math.atan2(o,r)*180/Math.PI}const Ex=(i,[e,t])=>{i.length===0&&i.push([[0,0]]);const[n,r]=i.at(-1).at(-1);return i.at(-1).push([n+e,r+t]),i},_x=i=>{if(i.length===0)throw new Error("Shape must have at least one pt.");const[e,t]=i[0][0];return i.at(-1).push([e,t]),i},Tx=i=>{const e=i.flat();if(e.length===1)return e[0];if(e.length===2)return{x:(e[0][0]+e[1][0])/2,y:(e[0][1]+e[1][1])/2};var t=e[0],n=e[e.length-1];(t[0]!=n[0]||t[1]!=n[1])&&e.push(t);for(var r=0,o=0,s=0,a=e.length,l,h,c,p=0,d=a-1;p<a;d=p++)l=e[p],h=e[d],c=l[0]*h[1]-h[0]*l[1],r+=c,o+=(l[0]+h[0])*c,s+=(l[1]+h[1])*c;return c=r*3,[o/c,s/c]},Ix=i=>JSON.parse(JSON.stringify(i)),vm=i=>{const{xMin:e,xMax:t}=Su(i);return t-e},ym=i=>{const{yMin:e,yMax:t}=Su(i);return t-e},Fx=i=>{const e=ds(i,"cc");return Mr(i,[0,0],e)},Qx=(i,e)=>(i.at(-1).push(e),i),Mx=i=>i.map(e=>e.reverse()).reverse(),Bx=i=>Cu(i,0,{endType:"etClosedPolygon"}),$x=(i,e)=>Cu(i,e,{endType:"etClosedPolygon"}),Nx=(i,e)=>{const t=(s,a)=>1e-8>Math.abs(s[0]-a[0])+Math.abs(s[1]-a[1]),n=i[0][0],r=i.at(-1).at(-1),o=t(n,r)?"etClosedLine":"etOpenButt";return Cu(i,e/2,{endType:o,jointType:"jtMiter"})},Rx=(i,e,t)=>{const n=Ix(i);for(let r=0;r<e;r++)i.push(...t(n));return i},hr=i=>{let e="";return i.forEach(t=>{const[n,r]=t[0];e+=`M ${n},${r}`,t.slice(1).forEach(o=>{const[s,a]=o;e+=`L ${s},${a}`})}),e};function ba(i,e){return sx(e,{maxError:.001}).map(n=>n.points).forEach(n=>i.push(n)),i}const Om=(i,e)=>{const t=[-i/2,e/2],n=[i/2,e/2],r=[i/2,-e/2],o=[-i/2,-e/2];return[[t,n,r,o,t]]},Il=i=>{const t=[],n=(a,l)=>l*Math.cos(a),r=(a,l)=>l*Math.sin(a);for(let a=0;a<180;a++){const l=Math.PI*2/180*a,h=n(l,i),c=r(l,i);t.push([h,c])}const[o,s]=t[0];return t.push([o,s]),[t]},Xx=i=>i.map(e=>e.map(([t,n])=>({x:t,y:n}))),Wx=Object.freeze(Object.defineProperty({__proto__:null,arc:cx,bezier:ax,boolean:Ca,centroid:Tx,circle:Il,close:_x,convertPtType:Xx,copyPaste:Rx,difference:Lx,expand:$x,extrema:Su,getAngle:Ax,getPathData:hr,getPoint:ds,goTo:Qx,height:ym,intersect:Px,offset:Cu,offset2:sm,originate:Fx,outline:Bx,path:vx,path2:dm,pathD:ba,rectangle:Om,reverse:Mx,rotate:Uc,scale:wu,thicken:Nx,translate:Mr,turnForward:hm,union:gm,vec:Ex,width:vm,xor:kx},Symbol.toStringTag,{value:"Module"})),Yx=1.6,Zx="User",Ux=297,ns=210,zx="20221018",jx=0;function Li(i){return i*Cs}const zn=Object.freeze({RECTANGLE:"rect",CIRCLE:"circle"}),On=Object.freeze({PRIMITIVE:"PRIMITIVE",POLYGON:"POLYGON"});var ya,Oa,pu;class xm{constructor(e={}){qt(this,ya,"SvgPcb");qt(this,Oa,On.POLYGON);qt(this,pu,zn.RECTANGLE);e.libraryName&&(Dt(this,ya,e.libraryName),Dt(this,Oa,e.padShapeType))}get libraryName(){return lt(this,ya)}get padShapeType(){return lt(this,Oa)}get padPrimitiveShape(){return lt(this,pu)}}ya=new WeakMap,Oa=new WeakMap,pu=new WeakMap;var Xi,eo,mu,Dm,gu,Cm,to,Ol,xa,zh;class Gx{constructor(e){qt(this,mu);qt(this,gu);qt(this,to);qt(this,xa);qt(this,Xi,"");qt(this,eo,new xm);Dt(this,Xi,""),Dt(this,eo,e)}plotWires(e,t){const n=[];e.forEach(r=>{r.type==="wire"&&n.push(r)}),n.forEach(r=>{const o=Li(r.thickness).toFixed(3),s=t,a=0;r.shape.forEach(h=>{for(let c=0;c<h.length-1;c++){const p=Li(h[c][0]).toFixed(3),d=(Li(-h[c][1])+ns).toFixed(3),v=Li(h[c+1][0]).toFixed(3),D=(Li(-h[c+1][1])+ns).toFixed(3),m=crypto.randomUUID();Dt(this,Xi,lt(this,Xi)+`(segment (start ${p} ${d}) (end ${v} ${D}) (width ${o}) (layer "${s}") (net ${a}) (tstamp ${m}))
`)}})})}plotComponents(e){const t=e.pcb.components,n=[],r=[];Object.values(t).forEach(a=>{Object.keys(a.footprint).includes("via")?r.push(a):n.push(a)});const o=Object.values(n).map(a=>({id:a.id,reference:a.label??"",footprint:a.label??"",position:{x:Li(a._pos[0]).toFixed(3),y:(Li(-a._pos[1])+ns).toFixed(3)},rotation:a.rotation,layer:Object.values(a.footprint)[0].layers[0],pads:Object.entries(a.footprint).map(([h,c])=>({number:c.index,name:h,position:{x:Li(c.pos[0]).toFixed(3),y:Li(-c.pos[1]).toFixed(3)},shape:oi(this,to,Ol).call(this,c.shape),layers:c.layers,size:oi(this,xa,zh).call(this,oi(this,to,Ol).call(this,c.shape))}))}));console.log(o),o.forEach(a=>{const l=a.id,h=a.footprint,c=a.position,p=a.rotation;Dt(this,Xi,lt(this,Xi)+`(footprint "${lt(this,eo).libraryName}:${h}" (layer "${a.layer}")
`),Dt(this,Xi,lt(this,Xi)+`(tstamp ${l})
`),Dt(this,Xi,lt(this,Xi)+`(at ${c.x} ${c.y} ${p})`),Dt(this,Xi,lt(this,Xi)+`(attr smd)
`);const d=crypto.randomUUID();Dt(this,Xi,lt(this,Xi)+`(fp_text reference "${a.reference}" (at 0 0) (layer "F.SilkS")(effects (font (size 1 1) (thickness 0.15))) (tstamp ${d}))`),a.pads.forEach(v=>{const D=crypto.randomUUID(),m=v.layers.map(_=>`"${_}"`);m.push('"F.Mask"'),m.push('"F.Paste"');let y="";lt(this,eo).padShapeType===On.POLYGON&&(y="(gr_poly (pts",v.shape.forEach(_=>{y+=` (xy ${_.x.toFixed(3)} ${_.y.toFixed(3)})`}),y+=") (width 0) (fill yes))");const x=e.downloadKiCadOptions.padPrimitiveShape,w=e.downloadKiCadOptions.padShapeType===On.POLYGON?"custom":e.downloadKiCadOptions.padPrimitiveShape;Dt(this,Xi,lt(this,Xi)+`(pad "${v.number}" smd ${w} (at ${v.position.x} ${v.position.y} ${p}) (size ${Math.min(v.size.w,v.size.h).toFixed(3)} ${Math.min(v.size.w,v.size.h).toFixed(3)}) (layers ${m.join(" ")}) (pinfunction "${v.name}") (tstamp ${D}) (options (clearance 0) (anchor ${x}) ) (primitives ${y}))
`)}),Dt(this,Xi,lt(this,Xi)+`)
`)}),Object.values(r).map(a=>({position:{x:Li(a._pos[0]).toFixed(3),y:(Li(-a._pos[1])+ns).toFixed(3)},size:oi(this,xa,zh).call(this,oi(this,to,Ol).call(this,a.footprint.via.shape)).w.toFixed(3),drill:Li(a.footprint.via.drill.diameter).toFixed(3),tstamp:a.id})).forEach(a=>{Dt(this,Xi,lt(this,Xi)+`(via (at ${a.position.x} ${a.position.y}) (size ${a.size}) (drill ${a.drill}) (layers "F.Cu" "B.Cu") (net 0) (tstamp ${a.tstamp}))
`)})}plotOutline(e){e[0].forEach(n=>{const r=n[0],o=n[n.length-1];(r[0]!==o[0]||r[1]!==o[1])&&n.push(r);for(let s=0;s<n.length-1;s++){const a=n[s],l=n[s+1],h={x:Li(a[0]).toFixed(3),y:(Li(-a[1])+ns).toFixed(3)},c={x:Li(l[0]).toFixed(3),y:(Li(-l[1])+ns).toFixed(3)},p=crypto.randomUUID();Dt(this,Xi,lt(this,Xi)+`(gr_line (start ${h.x} ${h.y}) (end ${c.x} ${c.y})
`),Dt(this,Xi,lt(this,Xi)+`(stroke (width 0.1) (type default)) (layer "Edge.Cuts") (tstamp ${p}))
`)}})}plot(e){const t=e.pcb.layers;t["F.Cu"]&&this.plotWires(t["F.Cu"],"F.Cu"),t["B.Cu"]&&this.plotWires(t["B.Cu"],"B.Cu"),t.interior&&this.plotOutline(t.interior),this.plotComponents(e)}toString(){let e=oi(this,mu,Dm).call(this);return e+=lt(this,Xi),e+=oi(this,gu,Cm).call(this),e}}Xi=new WeakMap,eo=new WeakMap,mu=new WeakSet,Dm=function(){let e=`(kicad_pcb (version ${zx}) (generator ${QO})
`;return e+=`(general
`,e+=`(thickness ${Yx})
`,e+=`)
`,e+=`(paper "${Zx}" ${Ux} ${ns})
`,e+=`(layers
`,e+=`(0 "F.Cu" signal)
`,e+=`(31 "B.Cu" signal)
`,e+=`(36 "B.SilkS" user)
`,e+=`(37 "F.SilkS" user)
`,e+=`(38 "B.Mask" user)
`,e+=`(39 "F.Mask" user)
`,e+=`(44 "Edge.Cuts" user)
`,e+=`)
`,e+=`(setup
`,e+=`(pad_to_mask_clearance ${jx})
`,e+=`)
`,e+=`(net 0 "")
`,e},gu=new WeakSet,Cm=function(){return")"},to=new WeakSet,Ol=function(e){return ba([],e)[0].map(n=>({x:Li(n[0]),y:Li(n[1])}))},xa=new WeakSet,zh=function(e){const t={x:0,y:0},n={x:0,y:0};return e.forEach(o=>{t.x=o.x<t.x?o.x:t.x,t.y=o.y<t.y?o.y:t.y,n.x=o.x>n.x?o.x:n.x,n.y=o.y>n.y?o.y:n.y}),{w:Math.abs(n.x-t.x),h:Math.abs(n.y-t.y)}};function Vx(i){const e=new tm,t=i.name===""?"Untitled":i.name,n=new xm({libraryName:i.downloadKiCadOptions.footprintLibraryName,padShapeType:i.downloadKiCadOptions.padShapeType}),r=new Gx(n);r.plot(i),e.file(`${t}.kicad_pcb`,r.toString()),e.generateAsync({type:"blob"}).then(o=>{Zc.exports.saveAs(o,`${i.name===""?"Untitled":i.name}-KiCad.zip`)})}const ut={version:"v0.1.0",codemirror:void 0,pcb:void 0,heldKeys:new Set,transforming:!1,transformUpdate:()=>{},selectBox:{},footprints:{},wires:[],shapes:[],idToName:{},limits:{x:[0,1],y:[0,1]},mm_per_unit:Cs,background:"#00000000",grid:!0,gridSize:.05,adaptiveGrid:!1,snapToPad:!0,snapToPadRadius:.025,viewHandles:!0,panZoomParams:void 0,previewFootprint:null,vimMode:!1,preview:null,paths:[],cubicHandleManipulation:"symmetric",selectedPathIndex:-1,selectedPath:null,selectablePaths:[],pts:[],layers:[],inputs:[],componentMenu:!1,componentSearch:"",downloadGerberModal:!1,downloadKiCadModal:!1,name:"",error:"",downloadGerberOptions:{layers:new Map([]),includeOutline:!0,excellonMetric:!0,protelFilenames:!1},downloadKiCadOptions:{footprintLibraryName:"SvgPcb",padShapeType:On.POLYGON,padPrimitiveShape:zn.RECTANGLE}};var Bn={exports:{}};(function(i,e){(function(n,r){i.exports=r()})(Gn,function(){return function(t){var n={};function r(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return t[o].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}return r.m=t,r.c=n,r.p="",r(0)}([function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(1),s=r(3),a=r(8),l=r(15);function h(D,m,y){var x=null,w=function(oe,fe){y&&y(oe,fe),x&&x.visit(oe,fe)},_=typeof y=="function"?w:null,I=!1;if(m){I=typeof m.comment=="boolean"&&m.comment;var N=typeof m.attachComment=="boolean"&&m.attachComment;(I||N)&&(x=new o.CommentHandler,x.attach=N,m.comment=!0,_=w)}var Y=!1;m&&typeof m.sourceType=="string"&&(Y=m.sourceType==="module");var j;m&&typeof m.jsx=="boolean"&&m.jsx?j=new s.JSXParser(D,m,_):j=new a.Parser(D,m,_);var ae=Y?j.parseModule():j.parseScript(),K=ae;return I&&x&&(K.comments=x.comments),j.config.tokens&&(K.tokens=j.tokens),j.config.tolerant&&(K.errors=j.errorHandler.errors),K}n.parse=h;function c(D,m,y){var x=m||{};return x.sourceType="module",h(D,x,y)}n.parseModule=c;function p(D,m,y){var x=m||{};return x.sourceType="script",h(D,x,y)}n.parseScript=p;function d(D,m,y){var x=new l.Tokenizer(D,m),w;w=[];try{for(;;){var _=x.getNextToken();if(!_)break;y&&(_=y(_)),w.push(_)}}catch(I){x.errorHandler.tolerate(I)}return x.errorHandler.tolerant&&(w.errors=x.errors()),w}n.tokenize=d;var v=r(2);n.Syntax=v.Syntax,n.version="4.0.1"},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(2),s=function(){function a(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return a.prototype.insertInnerComments=function(l,h){if(l.type===o.Syntax.BlockStatement&&l.body.length===0){for(var c=[],p=this.leading.length-1;p>=0;--p){var d=this.leading[p];h.end.offset>=d.start&&(c.unshift(d.comment),this.leading.splice(p,1),this.trailing.splice(p,1))}c.length&&(l.innerComments=c)}},a.prototype.findTrailingComments=function(l){var h=[];if(this.trailing.length>0){for(var c=this.trailing.length-1;c>=0;--c){var p=this.trailing[c];p.start>=l.end.offset&&h.unshift(p.comment)}return this.trailing.length=0,h}var d=this.stack[this.stack.length-1];if(d&&d.node.trailingComments){var v=d.node.trailingComments[0];v&&v.range[0]>=l.end.offset&&(h=d.node.trailingComments,delete d.node.trailingComments)}return h},a.prototype.findLeadingComments=function(l){for(var h=[],c;this.stack.length>0;){var p=this.stack[this.stack.length-1];if(p&&p.start>=l.start.offset)c=p.node,this.stack.pop();else break}if(c){for(var d=c.leadingComments?c.leadingComments.length:0,v=d-1;v>=0;--v){var D=c.leadingComments[v];D.range[1]<=l.start.offset&&(h.unshift(D),c.leadingComments.splice(v,1))}return c.leadingComments&&c.leadingComments.length===0&&delete c.leadingComments,h}for(var v=this.leading.length-1;v>=0;--v){var p=this.leading[v];p.start<=l.start.offset&&(h.unshift(p.comment),this.leading.splice(v,1))}return h},a.prototype.visitNode=function(l,h){if(!(l.type===o.Syntax.Program&&l.body.length>0)){this.insertInnerComments(l,h);var c=this.findTrailingComments(h),p=this.findLeadingComments(h);p.length>0&&(l.leadingComments=p),c.length>0&&(l.trailingComments=c),this.stack.push({node:l,start:h.start.offset})}},a.prototype.visitComment=function(l,h){var c=l.type[0]==="L"?"Line":"Block",p={type:c,value:l.value};if(l.range&&(p.range=l.range),l.loc&&(p.loc=l.loc),this.comments.push(p),this.attach){var d={comment:{type:c,value:l.value,range:[h.start.offset,h.end.offset]},start:h.start.offset};l.loc&&(d.comment.loc=l.loc),l.type=c,this.leading.push(d),this.trailing.push(d)}},a.prototype.visit=function(l,h){l.type==="LineComment"?this.visitComment(l,h):l.type==="BlockComment"?this.visitComment(l,h):this.attach&&this.visitNode(l,h)},a}();n.CommentHandler=s},function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(t,n,r){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,x){y.__proto__=x}||function(y,x){for(var w in x)x.hasOwnProperty(w)&&(y[w]=x[w])};return function(y,x){m(y,x);function w(){this.constructor=y}y.prototype=x===null?Object.create(x):(w.prototype=x.prototype,new w)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(4),a=r(5),l=r(6),h=r(7),c=r(8),p=r(13),d=r(14);p.TokenName[100]="JSXIdentifier",p.TokenName[101]="JSXText";function v(m){var y;switch(m.type){case l.JSXSyntax.JSXIdentifier:var x=m;y=x.name;break;case l.JSXSyntax.JSXNamespacedName:var w=m;y=v(w.namespace)+":"+v(w.name);break;case l.JSXSyntax.JSXMemberExpression:var _=m;y=v(_.object)+"."+v(_.property);break}return y}var D=function(m){o(y,m);function y(x,w,_){return m.call(this,x,w,_)||this}return y.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():m.prototype.parsePrimaryExpression.call(this)},y.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},y.prototype.finishJSX=function(){this.nextToken()},y.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},y.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},y.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},y.prototype.scanXHTMLEntity=function(x){for(var w="&",_=!0,I=!1,N=!1,Y=!1;!this.scanner.eof()&&_&&!I;){var j=this.scanner.source[this.scanner.index];if(j===x)break;if(I=j===";",w+=j,++this.scanner.index,!I)switch(w.length){case 2:N=j==="#";break;case 3:N&&(Y=j==="x",_=Y||s.Character.isDecimalDigit(j.charCodeAt(0)),N=N&&!Y);break;default:_=_&&!(N&&!s.Character.isDecimalDigit(j.charCodeAt(0))),_=_&&!(Y&&!s.Character.isHexDigit(j.charCodeAt(0)));break}}if(_&&I&&w.length>2){var ae=w.substr(1,w.length-2);N&&ae.length>1?w=String.fromCharCode(parseInt(ae.substr(1),10)):Y&&ae.length>2?w=String.fromCharCode(parseInt("0"+ae.substr(1),16)):!N&&!Y&&d.XHTMLEntities[ae]&&(w=d.XHTMLEntities[ae])}return w},y.prototype.lexJSX=function(){var x=this.scanner.source.charCodeAt(this.scanner.index);if(x===60||x===62||x===47||x===58||x===61||x===123||x===125){var w=this.scanner.source[this.scanner.index++];return{type:7,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(x===34||x===39){for(var _=this.scanner.index,I=this.scanner.source[this.scanner.index++],N="";!this.scanner.eof();){var Y=this.scanner.source[this.scanner.index++];if(Y===I)break;Y==="&"?N+=this.scanXHTMLEntity(I):N+=Y}return{type:8,value:N,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:_,end:this.scanner.index}}if(x===46){var j=this.scanner.source.charCodeAt(this.scanner.index+1),ae=this.scanner.source.charCodeAt(this.scanner.index+2),w=j===46&&ae===46?"...":".",_=this.scanner.index;return this.scanner.index+=w.length,{type:7,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:_,end:this.scanner.index}}if(x===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(s.Character.isIdentifierStart(x)&&x!==92){var _=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var Y=this.scanner.source.charCodeAt(this.scanner.index);if(s.Character.isIdentifierPart(Y)&&Y!==92)++this.scanner.index;else if(Y===45)++this.scanner.index;else break}var K=this.scanner.source.slice(_,this.scanner.index);return{type:100,value:K,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:_,end:this.scanner.index}}return this.scanner.lex()},y.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var x=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(x)),x},y.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var x=this.scanner.index,w="";!this.scanner.eof();){var _=this.scanner.source[this.scanner.index];if(_==="{"||_==="<")break;++this.scanner.index,w+=_,s.Character.isLineTerminator(_.charCodeAt(0))&&(++this.scanner.lineNumber,_==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var I={type:101,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:x,end:this.scanner.index};return w.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(I)),I},y.prototype.peekJSXToken=function(){var x=this.scanner.saveState();this.scanner.scanComments();var w=this.lexJSX();return this.scanner.restoreState(x),w},y.prototype.expectJSX=function(x){var w=this.nextJSXToken();(w.type!==7||w.value!==x)&&this.throwUnexpectedToken(w)},y.prototype.matchJSX=function(x){var w=this.peekJSXToken();return w.type===7&&w.value===x},y.prototype.parseJSXIdentifier=function(){var x=this.createJSXNode(),w=this.nextJSXToken();return w.type!==100&&this.throwUnexpectedToken(w),this.finalize(x,new a.JSXIdentifier(w.value))},y.prototype.parseJSXElementName=function(){var x=this.createJSXNode(),w=this.parseJSXIdentifier();if(this.matchJSX(":")){var _=w;this.expectJSX(":");var I=this.parseJSXIdentifier();w=this.finalize(x,new a.JSXNamespacedName(_,I))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var N=w;this.expectJSX(".");var Y=this.parseJSXIdentifier();w=this.finalize(x,new a.JSXMemberExpression(N,Y))}return w},y.prototype.parseJSXAttributeName=function(){var x=this.createJSXNode(),w,_=this.parseJSXIdentifier();if(this.matchJSX(":")){var I=_;this.expectJSX(":");var N=this.parseJSXIdentifier();w=this.finalize(x,new a.JSXNamespacedName(I,N))}else w=_;return w},y.prototype.parseJSXStringLiteralAttribute=function(){var x=this.createJSXNode(),w=this.nextJSXToken();w.type!==8&&this.throwUnexpectedToken(w);var _=this.getTokenRaw(w);return this.finalize(x,new h.Literal(w.value,_))},y.prototype.parseJSXExpressionAttribute=function(){var x=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(x,new a.JSXExpressionContainer(w))},y.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},y.prototype.parseJSXNameValueAttribute=function(){var x=this.createJSXNode(),w=this.parseJSXAttributeName(),_=null;return this.matchJSX("=")&&(this.expectJSX("="),_=this.parseJSXAttributeValue()),this.finalize(x,new a.JSXAttribute(w,_))},y.prototype.parseJSXSpreadAttribute=function(){var x=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(x,new a.JSXSpreadAttribute(w))},y.prototype.parseJSXAttributes=function(){for(var x=[];!this.matchJSX("/")&&!this.matchJSX(">");){var w=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();x.push(w)}return x},y.prototype.parseJSXOpeningElement=function(){var x=this.createJSXNode();this.expectJSX("<");var w=this.parseJSXElementName(),_=this.parseJSXAttributes(),I=this.matchJSX("/");return I&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(x,new a.JSXOpeningElement(w,I,_))},y.prototype.parseJSXBoundaryElement=function(){var x=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var w=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(x,new a.JSXClosingElement(w))}var _=this.parseJSXElementName(),I=this.parseJSXAttributes(),N=this.matchJSX("/");return N&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(x,new a.JSXOpeningElement(_,N,I))},y.prototype.parseJSXEmptyExpression=function(){var x=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(x,new a.JSXEmptyExpression)},y.prototype.parseJSXExpressionContainer=function(){var x=this.createJSXNode();this.expectJSX("{");var w;return this.matchJSX("}")?(w=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),w=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(x,new a.JSXExpressionContainer(w))},y.prototype.parseJSXChildren=function(){for(var x=[];!this.scanner.eof();){var w=this.createJSXChildNode(),_=this.nextJSXText();if(_.start<_.end){var I=this.getTokenRaw(_),N=this.finalize(w,new a.JSXText(_.value,I));x.push(N)}if(this.scanner.source[this.scanner.index]==="{"){var Y=this.parseJSXExpressionContainer();x.push(Y)}else break}return x},y.prototype.parseComplexJSXElement=function(x){for(var w=[];!this.scanner.eof();){x.children=x.children.concat(this.parseJSXChildren());var _=this.createJSXChildNode(),I=this.parseJSXBoundaryElement();if(I.type===l.JSXSyntax.JSXOpeningElement){var N=I;if(N.selfClosing){var Y=this.finalize(_,new a.JSXElement(N,[],null));x.children.push(Y)}else w.push(x),x={node:_,opening:N,closing:null,children:[]}}if(I.type===l.JSXSyntax.JSXClosingElement){x.closing=I;var j=v(x.opening.name),ae=v(x.closing.name);if(j!==ae&&this.tolerateError("Expected corresponding JSX closing tag for %0",j),w.length>0){var Y=this.finalize(x.node,new a.JSXElement(x.opening,x.children,x.closing));x=w[w.length-1],x.children.push(Y),w.pop()}else break}}return x},y.prototype.parseJSXElement=function(){var x=this.createJSXNode(),w=this.parseJSXOpeningElement(),_=[],I=null;if(!w.selfClosing){var N=this.parseComplexJSXElement({node:x,opening:w,closing:I,children:_});_=N.children,I=N.closing}return this.finalize(x,new a.JSXElement(w,_,I))},y.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var x=this.parseJSXElement();return this.finishJSX(),x},y.prototype.isStartOfExpression=function(){return m.prototype.isStartOfExpression.call(this)||this.match("<")},y}(c.Parser);n.JSXParser=D},function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var r={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};n.Character={fromCodePoint:function(o){return o<65536?String.fromCharCode(o):String.fromCharCode(55296+(o-65536>>10))+String.fromCharCode(56320+(o-65536&1023))},isWhiteSpace:function(o){return o===32||o===9||o===11||o===12||o===160||o>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(o)>=0},isLineTerminator:function(o){return o===10||o===13||o===8232||o===8233},isIdentifierStart:function(o){return o===36||o===95||o>=65&&o<=90||o>=97&&o<=122||o===92||o>=128&&r.NonAsciiIdentifierStart.test(n.Character.fromCodePoint(o))},isIdentifierPart:function(o){return o===36||o===95||o>=65&&o<=90||o>=97&&o<=122||o>=48&&o<=57||o===92||o>=128&&r.NonAsciiIdentifierPart.test(n.Character.fromCodePoint(o))},isDecimalDigit:function(o){return o>=48&&o<=57},isHexDigit:function(o){return o>=48&&o<=57||o>=65&&o<=70||o>=97&&o<=102},isOctalDigit:function(o){return o>=48&&o<=55}}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=function(){function x(w){this.type=o.JSXSyntax.JSXClosingElement,this.name=w}return x}();n.JSXClosingElement=s;var a=function(){function x(w,_,I){this.type=o.JSXSyntax.JSXElement,this.openingElement=w,this.children=_,this.closingElement=I}return x}();n.JSXElement=a;var l=function(){function x(){this.type=o.JSXSyntax.JSXEmptyExpression}return x}();n.JSXEmptyExpression=l;var h=function(){function x(w){this.type=o.JSXSyntax.JSXExpressionContainer,this.expression=w}return x}();n.JSXExpressionContainer=h;var c=function(){function x(w){this.type=o.JSXSyntax.JSXIdentifier,this.name=w}return x}();n.JSXIdentifier=c;var p=function(){function x(w,_){this.type=o.JSXSyntax.JSXMemberExpression,this.object=w,this.property=_}return x}();n.JSXMemberExpression=p;var d=function(){function x(w,_){this.type=o.JSXSyntax.JSXAttribute,this.name=w,this.value=_}return x}();n.JSXAttribute=d;var v=function(){function x(w,_){this.type=o.JSXSyntax.JSXNamespacedName,this.namespace=w,this.name=_}return x}();n.JSXNamespacedName=v;var D=function(){function x(w,_,I){this.type=o.JSXSyntax.JSXOpeningElement,this.name=w,this.selfClosing=_,this.attributes=I}return x}();n.JSXOpeningElement=D;var m=function(){function x(w){this.type=o.JSXSyntax.JSXSpreadAttribute,this.argument=w}return x}();n.JSXSpreadAttribute=m;var y=function(){function x(w,_){this.type=o.JSXSyntax.JSXText,this.value=w,this.raw=_}return x}();n.JSXText=y},function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(2),s=function(){function ye(be){this.type=o.Syntax.ArrayExpression,this.elements=be}return ye}();n.ArrayExpression=s;var a=function(){function ye(be){this.type=o.Syntax.ArrayPattern,this.elements=be}return ye}();n.ArrayPattern=a;var l=function(){function ye(be,ze,st){this.type=o.Syntax.ArrowFunctionExpression,this.id=null,this.params=be,this.body=ze,this.generator=!1,this.expression=st,this.async=!1}return ye}();n.ArrowFunctionExpression=l;var h=function(){function ye(be,ze,st){this.type=o.Syntax.AssignmentExpression,this.operator=be,this.left=ze,this.right=st}return ye}();n.AssignmentExpression=h;var c=function(){function ye(be,ze){this.type=o.Syntax.AssignmentPattern,this.left=be,this.right=ze}return ye}();n.AssignmentPattern=c;var p=function(){function ye(be,ze,st){this.type=o.Syntax.ArrowFunctionExpression,this.id=null,this.params=be,this.body=ze,this.generator=!1,this.expression=st,this.async=!0}return ye}();n.AsyncArrowFunctionExpression=p;var d=function(){function ye(be,ze,st){this.type=o.Syntax.FunctionDeclaration,this.id=be,this.params=ze,this.body=st,this.generator=!1,this.expression=!1,this.async=!0}return ye}();n.AsyncFunctionDeclaration=d;var v=function(){function ye(be,ze,st){this.type=o.Syntax.FunctionExpression,this.id=be,this.params=ze,this.body=st,this.generator=!1,this.expression=!1,this.async=!0}return ye}();n.AsyncFunctionExpression=v;var D=function(){function ye(be){this.type=o.Syntax.AwaitExpression,this.argument=be}return ye}();n.AwaitExpression=D;var m=function(){function ye(be,ze,st){var ui=be==="||"||be==="&&";this.type=ui?o.Syntax.LogicalExpression:o.Syntax.BinaryExpression,this.operator=be,this.left=ze,this.right=st}return ye}();n.BinaryExpression=m;var y=function(){function ye(be){this.type=o.Syntax.BlockStatement,this.body=be}return ye}();n.BlockStatement=y;var x=function(){function ye(be){this.type=o.Syntax.BreakStatement,this.label=be}return ye}();n.BreakStatement=x;var w=function(){function ye(be,ze){this.type=o.Syntax.CallExpression,this.callee=be,this.arguments=ze}return ye}();n.CallExpression=w;var _=function(){function ye(be,ze){this.type=o.Syntax.CatchClause,this.param=be,this.body=ze}return ye}();n.CatchClause=_;var I=function(){function ye(be){this.type=o.Syntax.ClassBody,this.body=be}return ye}();n.ClassBody=I;var N=function(){function ye(be,ze,st){this.type=o.Syntax.ClassDeclaration,this.id=be,this.superClass=ze,this.body=st}return ye}();n.ClassDeclaration=N;var Y=function(){function ye(be,ze,st){this.type=o.Syntax.ClassExpression,this.id=be,this.superClass=ze,this.body=st}return ye}();n.ClassExpression=Y;var j=function(){function ye(be,ze){this.type=o.Syntax.MemberExpression,this.computed=!0,this.object=be,this.property=ze}return ye}();n.ComputedMemberExpression=j;var ae=function(){function ye(be,ze,st){this.type=o.Syntax.ConditionalExpression,this.test=be,this.consequent=ze,this.alternate=st}return ye}();n.ConditionalExpression=ae;var K=function(){function ye(be){this.type=o.Syntax.ContinueStatement,this.label=be}return ye}();n.ContinueStatement=K;var oe=function(){function ye(){this.type=o.Syntax.DebuggerStatement}return ye}();n.DebuggerStatement=oe;var fe=function(){function ye(be,ze){this.type=o.Syntax.ExpressionStatement,this.expression=be,this.directive=ze}return ye}();n.Directive=fe;var U=function(){function ye(be,ze){this.type=o.Syntax.DoWhileStatement,this.body=be,this.test=ze}return ye}();n.DoWhileStatement=U;var H=function(){function ye(){this.type=o.Syntax.EmptyStatement}return ye}();n.EmptyStatement=H;var B=function(){function ye(be){this.type=o.Syntax.ExportAllDeclaration,this.source=be}return ye}();n.ExportAllDeclaration=B;var re=function(){function ye(be){this.type=o.Syntax.ExportDefaultDeclaration,this.declaration=be}return ye}();n.ExportDefaultDeclaration=re;var Qe=function(){function ye(be,ze,st){this.type=o.Syntax.ExportNamedDeclaration,this.declaration=be,this.specifiers=ze,this.source=st}return ye}();n.ExportNamedDeclaration=Qe;var De=function(){function ye(be,ze){this.type=o.Syntax.ExportSpecifier,this.exported=ze,this.local=be}return ye}();n.ExportSpecifier=De;var Xe=function(){function ye(be){this.type=o.Syntax.ExpressionStatement,this.expression=be}return ye}();n.ExpressionStatement=Xe;var ge=function(){function ye(be,ze,st){this.type=o.Syntax.ForInStatement,this.left=be,this.right=ze,this.body=st,this.each=!1}return ye}();n.ForInStatement=ge;var $e=function(){function ye(be,ze,st){this.type=o.Syntax.ForOfStatement,this.left=be,this.right=ze,this.body=st}return ye}();n.ForOfStatement=$e;var ue=function(){function ye(be,ze,st,ui){this.type=o.Syntax.ForStatement,this.init=be,this.test=ze,this.update=st,this.body=ui}return ye}();n.ForStatement=ue;var he=function(){function ye(be,ze,st,ui){this.type=o.Syntax.FunctionDeclaration,this.id=be,this.params=ze,this.body=st,this.generator=ui,this.expression=!1,this.async=!1}return ye}();n.FunctionDeclaration=he;var je=function(){function ye(be,ze,st,ui){this.type=o.Syntax.FunctionExpression,this.id=be,this.params=ze,this.body=st,this.generator=ui,this.expression=!1,this.async=!1}return ye}();n.FunctionExpression=je;var We=function(){function ye(be){this.type=o.Syntax.Identifier,this.name=be}return ye}();n.Identifier=We;var Ae=function(){function ye(be,ze,st){this.type=o.Syntax.IfStatement,this.test=be,this.consequent=ze,this.alternate=st}return ye}();n.IfStatement=Ae;var Me=function(){function ye(be,ze){this.type=o.Syntax.ImportDeclaration,this.specifiers=be,this.source=ze}return ye}();n.ImportDeclaration=Me;var vt=function(){function ye(be){this.type=o.Syntax.ImportDefaultSpecifier,this.local=be}return ye}();n.ImportDefaultSpecifier=vt;var et=function(){function ye(be){this.type=o.Syntax.ImportNamespaceSpecifier,this.local=be}return ye}();n.ImportNamespaceSpecifier=et;var tt=function(){function ye(be,ze){this.type=o.Syntax.ImportSpecifier,this.local=be,this.imported=ze}return ye}();n.ImportSpecifier=tt;var Ot=function(){function ye(be,ze){this.type=o.Syntax.LabeledStatement,this.label=be,this.body=ze}return ye}();n.LabeledStatement=Ot;var it=function(){function ye(be,ze){this.type=o.Syntax.Literal,this.value=be,this.raw=ze}return ye}();n.Literal=it;var Nt=function(){function ye(be,ze){this.type=o.Syntax.MetaProperty,this.meta=be,this.property=ze}return ye}();n.MetaProperty=Nt;var yt=function(){function ye(be,ze,st,ui,An){this.type=o.Syntax.MethodDefinition,this.key=be,this.computed=ze,this.value=st,this.kind=ui,this.static=An}return ye}();n.MethodDefinition=yt;var $=function(){function ye(be){this.type=o.Syntax.Program,this.body=be,this.sourceType="module"}return ye}();n.Module=$;var Pe=function(){function ye(be,ze){this.type=o.Syntax.NewExpression,this.callee=be,this.arguments=ze}return ye}();n.NewExpression=Pe;var Oe=function(){function ye(be){this.type=o.Syntax.ObjectExpression,this.properties=be}return ye}();n.ObjectExpression=Oe;var J=function(){function ye(be){this.type=o.Syntax.ObjectPattern,this.properties=be}return ye}();n.ObjectPattern=J;var G=function(){function ye(be,ze,st,ui,An,un){this.type=o.Syntax.Property,this.key=ze,this.computed=st,this.value=ui,this.kind=be,this.method=An,this.shorthand=un}return ye}();n.Property=G;var ce=function(){function ye(be,ze,st,ui){this.type=o.Syntax.Literal,this.value=be,this.raw=ze,this.regex={pattern:st,flags:ui}}return ye}();n.RegexLiteral=ce;var Ie=function(){function ye(be){this.type=o.Syntax.RestElement,this.argument=be}return ye}();n.RestElement=Ie;var Be=function(){function ye(be){this.type=o.Syntax.ReturnStatement,this.argument=be}return ye}();n.ReturnStatement=Be;var me=function(){function ye(be){this.type=o.Syntax.Program,this.body=be,this.sourceType="script"}return ye}();n.Script=me;var Ze=function(){function ye(be){this.type=o.Syntax.SequenceExpression,this.expressions=be}return ye}();n.SequenceExpression=Ze;var Ke=function(){function ye(be){this.type=o.Syntax.SpreadElement,this.argument=be}return ye}();n.SpreadElement=Ke;var Ne=function(){function ye(be,ze){this.type=o.Syntax.MemberExpression,this.computed=!1,this.object=be,this.property=ze}return ye}();n.StaticMemberExpression=Ne;var at=function(){function ye(){this.type=o.Syntax.Super}return ye}();n.Super=at;var mt=function(){function ye(be,ze){this.type=o.Syntax.SwitchCase,this.test=be,this.consequent=ze}return ye}();n.SwitchCase=mt;var Pt=function(){function ye(be,ze){this.type=o.Syntax.SwitchStatement,this.discriminant=be,this.cases=ze}return ye}();n.SwitchStatement=Pt;var li=function(){function ye(be,ze){this.type=o.Syntax.TaggedTemplateExpression,this.tag=be,this.quasi=ze}return ye}();n.TaggedTemplateExpression=li;var ji=function(){function ye(be,ze){this.type=o.Syntax.TemplateElement,this.value=be,this.tail=ze}return ye}();n.TemplateElement=ji;var pi=function(){function ye(be,ze){this.type=o.Syntax.TemplateLiteral,this.quasis=be,this.expressions=ze}return ye}();n.TemplateLiteral=pi;var kt=function(){function ye(){this.type=o.Syntax.ThisExpression}return ye}();n.ThisExpression=kt;var At=function(){function ye(be){this.type=o.Syntax.ThrowStatement,this.argument=be}return ye}();n.ThrowStatement=At;var Qt=function(){function ye(be,ze,st){this.type=o.Syntax.TryStatement,this.block=be,this.handler=ze,this.finalizer=st}return ye}();n.TryStatement=Qt;var ei=function(){function ye(be,ze){this.type=o.Syntax.UnaryExpression,this.operator=be,this.argument=ze,this.prefix=!0}return ye}();n.UnaryExpression=ei;var Vt=function(){function ye(be,ze,st){this.type=o.Syntax.UpdateExpression,this.operator=be,this.argument=ze,this.prefix=st}return ye}();n.UpdateExpression=Vt;var Ln=function(){function ye(be,ze){this.type=o.Syntax.VariableDeclaration,this.declarations=be,this.kind=ze}return ye}();n.VariableDeclaration=Ln;var Wt=function(){function ye(be,ze){this.type=o.Syntax.VariableDeclarator,this.id=be,this.init=ze}return ye}();n.VariableDeclarator=Wt;var gn=function(){function ye(be,ze){this.type=o.Syntax.WhileStatement,this.test=be,this.body=ze}return ye}();n.WhileStatement=gn;var ln=function(){function ye(be,ze){this.type=o.Syntax.WithStatement,this.object=be,this.body=ze}return ye}();n.WithStatement=ln;var kn=function(){function ye(be,ze){this.type=o.Syntax.YieldExpression,this.argument=be,this.delegate=ze}return ye}();n.YieldExpression=kn},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(9),s=r(10),a=r(11),l=r(7),h=r(12),c=r(2),p=r(13),d="ArrowParameterPlaceHolder",v=function(){function D(m,y,x){y===void 0&&(y={}),this.config={range:typeof y.range=="boolean"&&y.range,loc:typeof y.loc=="boolean"&&y.loc,source:null,tokens:typeof y.tokens=="boolean"&&y.tokens,comment:typeof y.comment=="boolean"&&y.comment,tolerant:typeof y.tolerant=="boolean"&&y.tolerant},this.config.loc&&y.source&&y.source!==null&&(this.config.source=String(y.source)),this.delegate=x,this.errorHandler=new s.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new h.Scanner(m,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return D.prototype.throwError=function(m){var y=Array.prototype.slice.call(arguments,1),x=m.replace(/%(\d)/g,function(N,Y){return o.assert(Y<y.length,"Message reference must be in range"),y[Y]}),w=this.lastMarker.index,_=this.lastMarker.line,I=this.lastMarker.column+1;throw this.errorHandler.createError(w,_,I,x)},D.prototype.tolerateError=function(m){var y=Array.prototype.slice.call(arguments,1),x=m.replace(/%(\d)/g,function(N,Y){return o.assert(Y<y.length,"Message reference must be in range"),y[Y]}),w=this.lastMarker.index,_=this.scanner.lineNumber,I=this.lastMarker.column+1;this.errorHandler.tolerateError(w,_,I,x)},D.prototype.unexpectedTokenError=function(m,y){var x=y||a.Messages.UnexpectedToken,w;if(m?(y||(x=m.type===2?a.Messages.UnexpectedEOS:m.type===3?a.Messages.UnexpectedIdentifier:m.type===6?a.Messages.UnexpectedNumber:m.type===8?a.Messages.UnexpectedString:m.type===10?a.Messages.UnexpectedTemplate:a.Messages.UnexpectedToken,m.type===4&&(this.scanner.isFutureReservedWord(m.value)?x=a.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(m.value)&&(x=a.Messages.StrictReservedWord))),w=m.value):w="ILLEGAL",x=x.replace("%0",w),m&&typeof m.lineNumber=="number"){var _=m.start,I=m.lineNumber,N=this.lastMarker.index-this.lastMarker.column,Y=m.start-N+1;return this.errorHandler.createError(_,I,Y,x)}else{var _=this.lastMarker.index,I=this.lastMarker.line,Y=this.lastMarker.column+1;return this.errorHandler.createError(_,I,Y,x)}},D.prototype.throwUnexpectedToken=function(m,y){throw this.unexpectedTokenError(m,y)},D.prototype.tolerateUnexpectedToken=function(m,y){this.errorHandler.tolerate(this.unexpectedTokenError(m,y))},D.prototype.collectComments=function(){if(!this.config.comment)this.scanner.scanComments();else{var m=this.scanner.scanComments();if(m.length>0&&this.delegate)for(var y=0;y<m.length;++y){var x=m[y],w=void 0;w={type:x.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(x.slice[0],x.slice[1])},this.config.range&&(w.range=x.range),this.config.loc&&(w.loc=x.loc);var _={start:{line:x.loc.start.line,column:x.loc.start.column,offset:x.range[0]},end:{line:x.loc.end.line,column:x.loc.end.column,offset:x.range[1]}};this.delegate(w,_)}}},D.prototype.getTokenRaw=function(m){return this.scanner.source.slice(m.start,m.end)},D.prototype.convertToken=function(m){var y={type:p.TokenName[m.type],value:this.getTokenRaw(m)};if(this.config.range&&(y.range=[m.start,m.end]),this.config.loc&&(y.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),m.type===9){var x=m.pattern,w=m.flags;y.regex={pattern:x,flags:w}}return y},D.prototype.nextToken=function(){var m=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var y=this.scanner.lex();return this.hasLineTerminator=m.lineNumber!==y.lineNumber,y&&this.context.strict&&y.type===3&&this.scanner.isStrictModeReservedWord(y.value)&&(y.type=4),this.lookahead=y,this.config.tokens&&y.type!==2&&this.tokens.push(this.convertToken(y)),m},D.prototype.nextRegexToken=function(){this.collectComments();var m=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(m))),this.lookahead=m,this.nextToken(),m},D.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},D.prototype.startNode=function(m,y){y===void 0&&(y=0);var x=m.start-m.lineStart,w=m.lineNumber;return x<0&&(x+=y,w--),{index:m.start,line:w,column:x}},D.prototype.finalize=function(m,y){if(this.config.range&&(y.range=[m.index,this.lastMarker.index]),this.config.loc&&(y.loc={start:{line:m.line,column:m.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(y.loc.source=this.config.source)),this.delegate){var x={start:{line:m.line,column:m.column,offset:m.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(y,x)}return y},D.prototype.expect=function(m){var y=this.nextToken();(y.type!==7||y.value!==m)&&this.throwUnexpectedToken(y)},D.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var m=this.lookahead;m.type===7&&m.value===","?this.nextToken():m.type===7&&m.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(m)):this.tolerateUnexpectedToken(m,a.Messages.UnexpectedToken)}else this.expect(",")},D.prototype.expectKeyword=function(m){var y=this.nextToken();(y.type!==4||y.value!==m)&&this.throwUnexpectedToken(y)},D.prototype.match=function(m){return this.lookahead.type===7&&this.lookahead.value===m},D.prototype.matchKeyword=function(m){return this.lookahead.type===4&&this.lookahead.value===m},D.prototype.matchContextualKeyword=function(m){return this.lookahead.type===3&&this.lookahead.value===m},D.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var m=this.lookahead.value;return m==="="||m==="*="||m==="**="||m==="/="||m==="%="||m==="+="||m==="-="||m==="<<="||m===">>="||m===">>>="||m==="&="||m==="^="||m==="|="},D.prototype.isolateCoverGrammar=function(m){var y=this.context.isBindingElement,x=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var _=m.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=y,this.context.isAssignmentTarget=x,this.context.firstCoverInitializedNameError=w,_},D.prototype.inheritCoverGrammar=function(m){var y=this.context.isBindingElement,x=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var _=m.call(this);return this.context.isBindingElement=this.context.isBindingElement&&y,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&x,this.context.firstCoverInitializedNameError=w||this.context.firstCoverInitializedNameError,_},D.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type!==2&&!this.match("}")&&this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},D.prototype.parsePrimaryExpression=function(){var m=this.createNode(),y,x,w;switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),y=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(m,new l.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,a.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,x=this.nextToken(),w=this.getTokenRaw(x),y=this.finalize(m,new l.Literal(x.value,w));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,x=this.nextToken(),w=this.getTokenRaw(x),y=this.finalize(m,new l.Literal(x.value==="true",w));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,x=this.nextToken(),w=this.getTokenRaw(x),y=this.finalize(m,new l.Literal(null,w));break;case 10:y=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,y=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":y=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":y=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,x=this.nextRegexToken(),w=this.getTokenRaw(x),y=this.finalize(m,new l.RegexLiteral(x.regex,w,x.pattern,x.flags));break;default:y=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?y=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?y=this.finalize(m,new l.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?y=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),y=this.finalize(m,new l.ThisExpression)):this.matchKeyword("class")?y=this.parseClassExpression():y=this.throwUnexpectedToken(this.nextToken()));break;default:y=this.throwUnexpectedToken(this.nextToken())}return y},D.prototype.parseSpreadElement=function(){var m=this.createNode();this.expect("...");var y=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(m,new l.SpreadElement(y))},D.prototype.parseArrayInitializer=function(){var m=this.createNode(),y=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),y.push(null);else if(this.match("...")){var x=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),y.push(x)}else y.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(m,new l.ArrayExpression(y))},D.prototype.parsePropertyMethod=function(m){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var y=this.context.strict,x=this.context.allowStrictDirective;this.context.allowStrictDirective=m.simple;var w=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&m.firstRestricted&&this.tolerateUnexpectedToken(m.firstRestricted,m.message),this.context.strict&&m.stricted&&this.tolerateUnexpectedToken(m.stricted,m.message),this.context.strict=y,this.context.allowStrictDirective=x,w},D.prototype.parsePropertyMethodFunction=function(){var m=!1,y=this.createNode(),x=this.context.allowYield;this.context.allowYield=!0;var w=this.parseFormalParameters(),_=this.parsePropertyMethod(w);return this.context.allowYield=x,this.finalize(y,new l.FunctionExpression(null,w.params,_,m))},D.prototype.parsePropertyMethodAsyncFunction=function(){var m=this.createNode(),y=this.context.allowYield,x=this.context.await;this.context.allowYield=!1,this.context.await=!0;var w=this.parseFormalParameters(),_=this.parsePropertyMethod(w);return this.context.allowYield=y,this.context.await=x,this.finalize(m,new l.AsyncFunctionExpression(null,w.params,_))},D.prototype.parseObjectPropertyKey=function(){var m=this.createNode(),y=this.nextToken(),x;switch(y.type){case 8:case 6:this.context.strict&&y.octal&&this.tolerateUnexpectedToken(y,a.Messages.StrictOctalLiteral);var w=this.getTokenRaw(y);x=this.finalize(m,new l.Literal(y.value,w));break;case 3:case 1:case 5:case 4:x=this.finalize(m,new l.Identifier(y.value));break;case 7:y.value==="["?(x=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):x=this.throwUnexpectedToken(y);break;default:x=this.throwUnexpectedToken(y)}return x},D.prototype.isPropertyKey=function(m,y){return m.type===c.Syntax.Identifier&&m.name===y||m.type===c.Syntax.Literal&&m.value===y},D.prototype.parseObjectProperty=function(m){var y=this.createNode(),x=this.lookahead,w,_=null,I=null,N=!1,Y=!1,j=!1,ae=!1;if(x.type===3){var K=x.value;this.nextToken(),N=this.match("["),ae=!this.hasLineTerminator&&K==="async"&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","),_=ae?this.parseObjectPropertyKey():this.finalize(y,new l.Identifier(K))}else this.match("*")?this.nextToken():(N=this.match("["),_=this.parseObjectPropertyKey());var oe=this.qualifiedPropertyName(this.lookahead);if(x.type===3&&!ae&&x.value==="get"&&oe)w="get",N=this.match("["),_=this.parseObjectPropertyKey(),this.context.allowYield=!1,I=this.parseGetterMethod();else if(x.type===3&&!ae&&x.value==="set"&&oe)w="set",N=this.match("["),_=this.parseObjectPropertyKey(),I=this.parseSetterMethod();else if(x.type===7&&x.value==="*"&&oe)w="init",N=this.match("["),_=this.parseObjectPropertyKey(),I=this.parseGeneratorMethod(),Y=!0;else if(_||this.throwUnexpectedToken(this.lookahead),w="init",this.match(":")&&!ae)!N&&this.isPropertyKey(_,"__proto__")&&(m.value&&this.tolerateError(a.Messages.DuplicateProtoProperty),m.value=!0),this.nextToken(),I=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))I=ae?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),Y=!0;else if(x.type===3){var K=this.finalize(y,new l.Identifier(x.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),j=!0;var fe=this.isolateCoverGrammar(this.parseAssignmentExpression);I=this.finalize(y,new l.AssignmentPattern(K,fe))}else j=!0,I=K}else this.throwUnexpectedToken(this.nextToken());return this.finalize(y,new l.Property(w,_,N,I,Y,j))},D.prototype.parseObjectInitializer=function(){var m=this.createNode();this.expect("{");for(var y=[],x={value:!1};!this.match("}");)y.push(this.parseObjectProperty(x)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(m,new l.ObjectExpression(y))},D.prototype.parseTemplateHead=function(){o.assert(this.lookahead.head,"Template literal must start with a template head");var m=this.createNode(),y=this.nextToken(),x=y.value,w=y.cooked;return this.finalize(m,new l.TemplateElement({raw:x,cooked:w},y.tail))},D.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var m=this.createNode(),y=this.nextToken(),x=y.value,w=y.cooked;return this.finalize(m,new l.TemplateElement({raw:x,cooked:w},y.tail))},D.prototype.parseTemplateLiteral=function(){var m=this.createNode(),y=[],x=[],w=this.parseTemplateHead();for(x.push(w);!w.tail;)y.push(this.parseExpression()),w=this.parseTemplateElement(),x.push(w);return this.finalize(m,new l.TemplateLiteral(x,y))},D.prototype.reinterpretExpressionAsPattern=function(m){switch(m.type){case c.Syntax.Identifier:case c.Syntax.MemberExpression:case c.Syntax.RestElement:case c.Syntax.AssignmentPattern:break;case c.Syntax.SpreadElement:m.type=c.Syntax.RestElement,this.reinterpretExpressionAsPattern(m.argument);break;case c.Syntax.ArrayExpression:m.type=c.Syntax.ArrayPattern;for(var y=0;y<m.elements.length;y++)m.elements[y]!==null&&this.reinterpretExpressionAsPattern(m.elements[y]);break;case c.Syntax.ObjectExpression:m.type=c.Syntax.ObjectPattern;for(var y=0;y<m.properties.length;y++)this.reinterpretExpressionAsPattern(m.properties[y].value);break;case c.Syntax.AssignmentExpression:m.type=c.Syntax.AssignmentPattern,delete m.operator,this.reinterpretExpressionAsPattern(m.left);break}},D.prototype.parseGroupExpression=function(){var m;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),m={type:d,params:[],async:!1};else{var y=this.lookahead,x=[];if(this.match("..."))m=this.parseRestElement(x),this.expect(")"),this.match("=>")||this.expect("=>"),m={type:d,params:[m],async:!1};else{var w=!1;if(this.context.isBindingElement=!0,m=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var _=[];for(this.context.isAssignmentTarget=!1,_.push(m);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var I=0;I<_.length;I++)this.reinterpretExpressionAsPattern(_[I]);w=!0,m={type:d,params:_,async:!1}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),_.push(this.parseRestElement(x)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(var I=0;I<_.length;I++)this.reinterpretExpressionAsPattern(_[I]);w=!0,m={type:d,params:_,async:!1}}else _.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(w)break}w||(m=this.finalize(this.startNode(y),new l.SequenceExpression(_)))}if(!w){if(this.expect(")"),this.match("=>")&&(m.type===c.Syntax.Identifier&&m.name==="yield"&&(w=!0,m={type:d,params:[m],async:!1}),!w)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),m.type===c.Syntax.SequenceExpression)for(var I=0;I<m.expressions.length;I++)this.reinterpretExpressionAsPattern(m.expressions[I]);else this.reinterpretExpressionAsPattern(m);var N=m.type===c.Syntax.SequenceExpression?m.expressions:[m];m={type:d,params:N,async:!1}}this.context.isBindingElement=!1}}}return m},D.prototype.parseArguments=function(){this.expect("(");var m=[];if(!this.match(")"))for(;;){var y=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(m.push(y),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),m},D.prototype.isIdentifierName=function(m){return m.type===3||m.type===4||m.type===1||m.type===5},D.prototype.parseIdentifierName=function(){var m=this.createNode(),y=this.nextToken();return this.isIdentifierName(y)||this.throwUnexpectedToken(y),this.finalize(m,new l.Identifier(y.value))},D.prototype.parseNewExpression=function(){var m=this.createNode(),y=this.parseIdentifierName();o.assert(y.name==="new","New expression must start with `new`");var x;if(this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var w=this.parseIdentifierName();x=new l.MetaProperty(y,w)}else this.throwUnexpectedToken(this.lookahead);else{var _=this.isolateCoverGrammar(this.parseLeftHandSideExpression),I=this.match("(")?this.parseArguments():[];x=new l.NewExpression(_,I),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(m,x)},D.prototype.parseAsyncArgument=function(){var m=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,m},D.prototype.parseAsyncArguments=function(){this.expect("(");var m=[];if(!this.match(")"))for(;;){var y=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(m.push(y),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),m},D.prototype.parseLeftHandSideExpressionAllowCall=function(){var m=this.lookahead,y=this.matchContextualKeyword("async"),x=this.context.allowIn;this.context.allowIn=!0;var w;for(this.matchKeyword("super")&&this.context.inFunctionBody?(w=this.createNode(),this.nextToken(),w=this.finalize(w,new l.Super),!this.match("(")&&!this.match(".")&&!this.match("[")&&this.throwUnexpectedToken(this.lookahead)):w=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var _=this.parseIdentifierName();w=this.finalize(this.startNode(m),new l.StaticMemberExpression(w,_))}else if(this.match("(")){var I=y&&m.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var N=I?this.parseAsyncArguments():this.parseArguments();if(w=this.finalize(this.startNode(m),new l.CallExpression(w,N)),I&&this.match("=>")){for(var Y=0;Y<N.length;++Y)this.reinterpretExpressionAsPattern(N[Y]);w={type:d,params:N,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var _=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),w=this.finalize(this.startNode(m),new l.ComputedMemberExpression(w,_))}else if(this.lookahead.type===10&&this.lookahead.head){var j=this.parseTemplateLiteral();w=this.finalize(this.startNode(m),new l.TaggedTemplateExpression(w,j))}else break;return this.context.allowIn=x,w},D.prototype.parseSuper=function(){var m=this.createNode();return this.expectKeyword("super"),!this.match("[")&&!this.match(".")&&this.throwUnexpectedToken(this.lookahead),this.finalize(m,new l.Super)},D.prototype.parseLeftHandSideExpression=function(){o.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var m=this.startNode(this.lookahead),y=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var x=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),y=this.finalize(m,new l.ComputedMemberExpression(y,x))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var x=this.parseIdentifierName();y=this.finalize(m,new l.StaticMemberExpression(y,x))}else if(this.lookahead.type===10&&this.lookahead.head){var w=this.parseTemplateLiteral();y=this.finalize(m,new l.TaggedTemplateExpression(y,w))}else break;return y},D.prototype.parseUpdateExpression=function(){var m,y=this.lookahead;if(this.match("++")||this.match("--")){var x=this.startNode(y),w=this.nextToken();m=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&m.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(m.name)&&this.tolerateError(a.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment);var _=!0;m=this.finalize(x,new l.UpdateExpression(w.value,m,_)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(m=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&m.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(m.name)&&this.tolerateError(a.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var I=this.nextToken().value,_=!1;m=this.finalize(this.startNode(y),new l.UpdateExpression(I,m,_))}return m},D.prototype.parseAwaitExpression=function(){var m=this.createNode();this.nextToken();var y=this.parseUnaryExpression();return this.finalize(m,new l.AwaitExpression(y))},D.prototype.parseUnaryExpression=function(){var m;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var y=this.startNode(this.lookahead),x=this.nextToken();m=this.inheritCoverGrammar(this.parseUnaryExpression),m=this.finalize(y,new l.UnaryExpression(x.value,m)),this.context.strict&&m.operator==="delete"&&m.argument.type===c.Syntax.Identifier&&this.tolerateError(a.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else this.context.await&&this.matchContextualKeyword("await")?m=this.parseAwaitExpression():m=this.parseUpdateExpression();return m},D.prototype.parseExponentiationExpression=function(){var m=this.lookahead,y=this.inheritCoverGrammar(this.parseUnaryExpression);if(y.type!==c.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var x=y,w=this.isolateCoverGrammar(this.parseExponentiationExpression);y=this.finalize(this.startNode(m),new l.BinaryExpression("**",x,w))}return y},D.prototype.binaryPrecedence=function(m){var y=m.value,x;return m.type===7?x=this.operatorPrecedence[y]||0:m.type===4?x=y==="instanceof"||this.context.allowIn&&y==="in"?7:0:x=0,x},D.prototype.parseBinaryExpression=function(){var m=this.lookahead,y=this.inheritCoverGrammar(this.parseExponentiationExpression),x=this.lookahead,w=this.binaryPrecedence(x);if(w>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var _=[m,this.lookahead],I=y,N=this.isolateCoverGrammar(this.parseExponentiationExpression),Y=[I,x.value,N],j=[w];w=this.binaryPrecedence(this.lookahead),!(w<=0);){for(;Y.length>2&&w<=j[j.length-1];){N=Y.pop();var ae=Y.pop();j.pop(),I=Y.pop(),_.pop();var K=this.startNode(_[_.length-1]);Y.push(this.finalize(K,new l.BinaryExpression(ae,I,N)))}Y.push(this.nextToken().value),j.push(w),_.push(this.lookahead),Y.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var oe=Y.length-1;y=Y[oe];for(var fe=_.pop();oe>1;){var U=_.pop(),H=fe&&fe.lineStart,K=this.startNode(U,H),ae=Y[oe-1];y=this.finalize(K,new l.BinaryExpression(ae,Y[oe-2],y)),oe-=2,fe=U}}return y},D.prototype.parseConditionalExpression=function(){var m=this.lookahead,y=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var x=this.context.allowIn;this.context.allowIn=!0;var w=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=x,this.expect(":");var _=this.isolateCoverGrammar(this.parseAssignmentExpression);y=this.finalize(this.startNode(m),new l.ConditionalExpression(y,w,_)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return y},D.prototype.checkPatternParam=function(m,y){switch(y.type){case c.Syntax.Identifier:this.validateParam(m,y,y.name);break;case c.Syntax.RestElement:this.checkPatternParam(m,y.argument);break;case c.Syntax.AssignmentPattern:this.checkPatternParam(m,y.left);break;case c.Syntax.ArrayPattern:for(var x=0;x<y.elements.length;x++)y.elements[x]!==null&&this.checkPatternParam(m,y.elements[x]);break;case c.Syntax.ObjectPattern:for(var x=0;x<y.properties.length;x++)this.checkPatternParam(m,y.properties[x].value);break}m.simple=m.simple&&y instanceof l.Identifier},D.prototype.reinterpretAsCoverFormalsList=function(m){var y=[m],x,w=!1;switch(m.type){case c.Syntax.Identifier:break;case d:y=m.params,w=m.async;break;default:return null}x={simple:!0,paramSet:{}};for(var _=0;_<y.length;++_){var I=y[_];I.type===c.Syntax.AssignmentPattern?I.right.type===c.Syntax.YieldExpression&&(I.right.argument&&this.throwUnexpectedToken(this.lookahead),I.right.type=c.Syntax.Identifier,I.right.name="yield",delete I.right.argument,delete I.right.delegate):w&&I.type===c.Syntax.Identifier&&I.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(x,I),y[_]=I}if(this.context.strict||!this.context.allowYield)for(var _=0;_<y.length;++_){var I=y[_];I.type===c.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(x.message===a.Messages.StrictParamDupe){var N=this.context.strict?x.stricted:x.firstRestricted;this.throwUnexpectedToken(N,x.message)}return{simple:x.simple,params:y,stricted:x.stricted,firstRestricted:x.firstRestricted,message:x.message}},D.prototype.parseAssignmentExpression=function(){var m;if(!this.context.allowYield&&this.matchKeyword("yield"))m=this.parseYieldExpression();else{var y=this.lookahead,x=y;if(m=this.parseConditionalExpression(),x.type===3&&x.lineNumber===this.lookahead.lineNumber&&x.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var w=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(w),m={type:d,params:[w],async:!0}}if(m.type===d||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var _=m.async,I=this.reinterpretAsCoverFormalsList(m);if(I){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var N=this.context.strict,Y=this.context.allowStrictDirective;this.context.allowStrictDirective=I.simple;var j=this.context.allowYield,ae=this.context.await;this.context.allowYield=!0,this.context.await=_;var K=this.startNode(y);this.expect("=>");var oe=void 0;if(this.match("{")){var fe=this.context.allowIn;this.context.allowIn=!0,oe=this.parseFunctionSourceElements(),this.context.allowIn=fe}else oe=this.isolateCoverGrammar(this.parseAssignmentExpression);var U=oe.type!==c.Syntax.BlockStatement;this.context.strict&&I.firstRestricted&&this.throwUnexpectedToken(I.firstRestricted,I.message),this.context.strict&&I.stricted&&this.tolerateUnexpectedToken(I.stricted,I.message),m=_?this.finalize(K,new l.AsyncArrowFunctionExpression(I.params,oe,U)):this.finalize(K,new l.ArrowFunctionExpression(I.params,oe,U)),this.context.strict=N,this.context.allowStrictDirective=Y,this.context.allowYield=j,this.context.await=ae}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment),this.context.strict&&m.type===c.Syntax.Identifier){var H=m;this.scanner.isRestrictedWord(H.name)&&this.tolerateUnexpectedToken(x,a.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(H.name)&&this.tolerateUnexpectedToken(x,a.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(m):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),x=this.nextToken();var B=x.value,re=this.isolateCoverGrammar(this.parseAssignmentExpression);m=this.finalize(this.startNode(y),new l.AssignmentExpression(B,m,re)),this.context.firstCoverInitializedNameError=null}}return m},D.prototype.parseExpression=function(){var m=this.lookahead,y=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var x=[];for(x.push(y);this.lookahead.type!==2&&this.match(",");)this.nextToken(),x.push(this.isolateCoverGrammar(this.parseAssignmentExpression));y=this.finalize(this.startNode(m),new l.SequenceExpression(x))}return y},D.prototype.parseStatementListItem=function(){var m;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,a.Messages.IllegalExportDeclaration),m=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,a.Messages.IllegalImportDeclaration),m=this.parseImportDeclaration();break;case"const":m=this.parseLexicalDeclaration({inFor:!1});break;case"function":m=this.parseFunctionDeclaration();break;case"class":m=this.parseClassDeclaration();break;case"let":m=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:m=this.parseStatement();break}else m=this.parseStatement();return m},D.prototype.parseBlock=function(){var m=this.createNode();this.expect("{");for(var y=[];!this.match("}");)y.push(this.parseStatementListItem());return this.expect("}"),this.finalize(m,new l.BlockStatement(y))},D.prototype.parseLexicalBinding=function(m,y){var x=this.createNode(),w=[],_=this.parsePattern(w,m);this.context.strict&&_.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(_.name)&&this.tolerateError(a.Messages.StrictVarName);var I=null;return m==="const"?!this.matchKeyword("in")&&!this.matchContextualKeyword("of")&&(this.match("=")?(this.nextToken(),I=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(a.Messages.DeclarationMissingInitializer,"const")):(!y.inFor&&_.type!==c.Syntax.Identifier||this.match("="))&&(this.expect("="),I=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(x,new l.VariableDeclarator(_,I))},D.prototype.parseBindingList=function(m,y){for(var x=[this.parseLexicalBinding(m,y)];this.match(",");)this.nextToken(),x.push(this.parseLexicalBinding(m,y));return x},D.prototype.isLexicalDeclaration=function(){var m=this.scanner.saveState();this.scanner.scanComments();var y=this.scanner.lex();return this.scanner.restoreState(m),y.type===3||y.type===7&&y.value==="["||y.type===7&&y.value==="{"||y.type===4&&y.value==="let"||y.type===4&&y.value==="yield"},D.prototype.parseLexicalDeclaration=function(m){var y=this.createNode(),x=this.nextToken().value;o.assert(x==="let"||x==="const","Lexical declaration must be either let or const");var w=this.parseBindingList(x,m);return this.consumeSemicolon(),this.finalize(y,new l.VariableDeclaration(w,x))},D.prototype.parseBindingRestElement=function(m,y){var x=this.createNode();this.expect("...");var w=this.parsePattern(m,y);return this.finalize(x,new l.RestElement(w))},D.prototype.parseArrayPattern=function(m,y){var x=this.createNode();this.expect("[");for(var w=[];!this.match("]");)if(this.match(","))this.nextToken(),w.push(null);else{if(this.match("...")){w.push(this.parseBindingRestElement(m,y));break}else w.push(this.parsePatternWithDefault(m,y));this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(x,new l.ArrayPattern(w))},D.prototype.parsePropertyPattern=function(m,y){var x=this.createNode(),w=!1,_=!1,I=!1,N,Y;if(this.lookahead.type===3){var j=this.lookahead;N=this.parseVariableIdentifier();var ae=this.finalize(x,new l.Identifier(j.value));if(this.match("=")){m.push(j),_=!0,this.nextToken();var K=this.parseAssignmentExpression();Y=this.finalize(this.startNode(j),new l.AssignmentPattern(ae,K))}else this.match(":")?(this.expect(":"),Y=this.parsePatternWithDefault(m,y)):(m.push(j),_=!0,Y=ae)}else w=this.match("["),N=this.parseObjectPropertyKey(),this.expect(":"),Y=this.parsePatternWithDefault(m,y);return this.finalize(x,new l.Property("init",N,w,Y,I,_))},D.prototype.parseObjectPattern=function(m,y){var x=this.createNode(),w=[];for(this.expect("{");!this.match("}");)w.push(this.parsePropertyPattern(m,y)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(x,new l.ObjectPattern(w))},D.prototype.parsePattern=function(m,y){var x;return this.match("[")?x=this.parseArrayPattern(m,y):this.match("{")?x=this.parseObjectPattern(m,y):(this.matchKeyword("let")&&(y==="const"||y==="let")&&this.tolerateUnexpectedToken(this.lookahead,a.Messages.LetInLexicalBinding),m.push(this.lookahead),x=this.parseVariableIdentifier(y)),x},D.prototype.parsePatternWithDefault=function(m,y){var x=this.lookahead,w=this.parsePattern(m,y);if(this.match("=")){this.nextToken();var _=this.context.allowYield;this.context.allowYield=!0;var I=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=_,w=this.finalize(this.startNode(x),new l.AssignmentPattern(w,I))}return w},D.prototype.parseVariableIdentifier=function(m){var y=this.createNode(),x=this.nextToken();return x.type===4&&x.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(x,a.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(x):x.type!==3?this.context.strict&&x.type===4&&this.scanner.isStrictModeReservedWord(x.value)?this.tolerateUnexpectedToken(x,a.Messages.StrictReservedWord):(this.context.strict||x.value!=="let"||m!=="var")&&this.throwUnexpectedToken(x):(this.context.isModule||this.context.await)&&x.type===3&&x.value==="await"&&this.tolerateUnexpectedToken(x),this.finalize(y,new l.Identifier(x.value))},D.prototype.parseVariableDeclaration=function(m){var y=this.createNode(),x=[],w=this.parsePattern(x,"var");this.context.strict&&w.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(w.name)&&this.tolerateError(a.Messages.StrictVarName);var _=null;return this.match("=")?(this.nextToken(),_=this.isolateCoverGrammar(this.parseAssignmentExpression)):w.type!==c.Syntax.Identifier&&!m.inFor&&this.expect("="),this.finalize(y,new l.VariableDeclarator(w,_))},D.prototype.parseVariableDeclarationList=function(m){var y={inFor:m.inFor},x=[];for(x.push(this.parseVariableDeclaration(y));this.match(",");)this.nextToken(),x.push(this.parseVariableDeclaration(y));return x},D.prototype.parseVariableStatement=function(){var m=this.createNode();this.expectKeyword("var");var y=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(m,new l.VariableDeclaration(y,"var"))},D.prototype.parseEmptyStatement=function(){var m=this.createNode();return this.expect(";"),this.finalize(m,new l.EmptyStatement)},D.prototype.parseExpressionStatement=function(){var m=this.createNode(),y=this.parseExpression();return this.consumeSemicolon(),this.finalize(m,new l.ExpressionStatement(y))},D.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(a.Messages.StrictFunction),this.parseStatement()},D.prototype.parseIfStatement=function(){var m=this.createNode(),y,x=null;this.expectKeyword("if"),this.expect("(");var w=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new l.EmptyStatement)):(this.expect(")"),y=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),x=this.parseIfClause())),this.finalize(m,new l.IfStatement(w,y,x))},D.prototype.parseDoWhileStatement=function(){var m=this.createNode();this.expectKeyword("do");var y=this.context.inIteration;this.context.inIteration=!0;var x=this.parseStatement();this.context.inIteration=y,this.expectKeyword("while"),this.expect("(");var w=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(m,new l.DoWhileStatement(x,w))},D.prototype.parseWhileStatement=function(){var m=this.createNode(),y;this.expectKeyword("while"),this.expect("(");var x=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new l.EmptyStatement);else{this.expect(")");var w=this.context.inIteration;this.context.inIteration=!0,y=this.parseStatement(),this.context.inIteration=w}return this.finalize(m,new l.WhileStatement(x,y))},D.prototype.parseForStatement=function(){var m=null,y=null,x=null,w=!0,_,I,N=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){m=this.createNode(),this.nextToken();var Y=this.context.allowIn;this.context.allowIn=!1;var j=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=Y,j.length===1&&this.matchKeyword("in")){var ae=j[0];ae.init&&(ae.id.type===c.Syntax.ArrayPattern||ae.id.type===c.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(a.Messages.ForInOfLoopInitializer,"for-in"),m=this.finalize(m,new l.VariableDeclaration(j,"var")),this.nextToken(),_=m,I=this.parseExpression(),m=null}else j.length===1&&j[0].init===null&&this.matchContextualKeyword("of")?(m=this.finalize(m,new l.VariableDeclaration(j,"var")),this.nextToken(),_=m,I=this.parseAssignmentExpression(),m=null,w=!1):(m=this.finalize(m,new l.VariableDeclaration(j,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){m=this.createNode();var K=this.nextToken().value;if(!this.context.strict&&this.lookahead.value==="in")m=this.finalize(m,new l.Identifier(K)),this.nextToken(),_=m,I=this.parseExpression(),m=null;else{var Y=this.context.allowIn;this.context.allowIn=!1;var j=this.parseBindingList(K,{inFor:!0});this.context.allowIn=Y,j.length===1&&j[0].init===null&&this.matchKeyword("in")?(m=this.finalize(m,new l.VariableDeclaration(j,K)),this.nextToken(),_=m,I=this.parseExpression(),m=null):j.length===1&&j[0].init===null&&this.matchContextualKeyword("of")?(m=this.finalize(m,new l.VariableDeclaration(j,K)),this.nextToken(),_=m,I=this.parseAssignmentExpression(),m=null,w=!1):(this.consumeSemicolon(),m=this.finalize(m,new l.VariableDeclaration(j,K)))}}else{var oe=this.lookahead,Y=this.context.allowIn;if(this.context.allowIn=!1,m=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=Y,this.matchKeyword("in"))(!this.context.isAssignmentTarget||m.type===c.Syntax.AssignmentExpression)&&this.tolerateError(a.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(m),_=m,I=this.parseExpression(),m=null;else if(this.matchContextualKeyword("of"))(!this.context.isAssignmentTarget||m.type===c.Syntax.AssignmentExpression)&&this.tolerateError(a.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(m),_=m,I=this.parseAssignmentExpression(),m=null,w=!1;else{if(this.match(",")){for(var fe=[m];this.match(",");)this.nextToken(),fe.push(this.isolateCoverGrammar(this.parseAssignmentExpression));m=this.finalize(this.startNode(oe),new l.SequenceExpression(fe))}this.expect(";")}}typeof _>"u"&&(this.match(";")||(y=this.parseExpression()),this.expect(";"),this.match(")")||(x=this.parseExpression()));var U;if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),U=this.finalize(this.createNode(),new l.EmptyStatement);else{this.expect(")");var H=this.context.inIteration;this.context.inIteration=!0,U=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=H}return typeof _>"u"?this.finalize(N,new l.ForStatement(m,y,x,U)):w?this.finalize(N,new l.ForInStatement(_,I,U)):this.finalize(N,new l.ForOfStatement(_,I,U))},D.prototype.parseContinueStatement=function(){var m=this.createNode();this.expectKeyword("continue");var y=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var x=this.parseVariableIdentifier();y=x;var w="$"+x.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,w)||this.throwError(a.Messages.UnknownLabel,x.name)}return this.consumeSemicolon(),y===null&&!this.context.inIteration&&this.throwError(a.Messages.IllegalContinue),this.finalize(m,new l.ContinueStatement(y))},D.prototype.parseBreakStatement=function(){var m=this.createNode();this.expectKeyword("break");var y=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var x=this.parseVariableIdentifier(),w="$"+x.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,w)||this.throwError(a.Messages.UnknownLabel,x.name),y=x}return this.consumeSemicolon(),y===null&&!this.context.inIteration&&!this.context.inSwitch&&this.throwError(a.Messages.IllegalBreak),this.finalize(m,new l.BreakStatement(y))},D.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(a.Messages.IllegalReturn);var m=this.createNode();this.expectKeyword("return");var y=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&this.lookahead.type!==2||this.lookahead.type===8||this.lookahead.type===10,x=y?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(m,new l.ReturnStatement(x))},D.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(a.Messages.StrictModeWith);var m=this.createNode(),y;this.expectKeyword("with"),this.expect("(");var x=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new l.EmptyStatement)):(this.expect(")"),y=this.parseStatement()),this.finalize(m,new l.WithStatement(x,y))},D.prototype.parseSwitchCase=function(){var m=this.createNode(),y;this.matchKeyword("default")?(this.nextToken(),y=null):(this.expectKeyword("case"),y=this.parseExpression()),this.expect(":");for(var x=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)x.push(this.parseStatementListItem());return this.finalize(m,new l.SwitchCase(y,x))},D.prototype.parseSwitchStatement=function(){var m=this.createNode();this.expectKeyword("switch"),this.expect("(");var y=this.parseExpression();this.expect(")");var x=this.context.inSwitch;this.context.inSwitch=!0;var w=[],_=!1;for(this.expect("{");!this.match("}");){var I=this.parseSwitchCase();I.test===null&&(_&&this.throwError(a.Messages.MultipleDefaultsInSwitch),_=!0),w.push(I)}return this.expect("}"),this.context.inSwitch=x,this.finalize(m,new l.SwitchStatement(y,w))},D.prototype.parseLabelledStatement=function(){var m=this.createNode(),y=this.parseExpression(),x;if(y.type===c.Syntax.Identifier&&this.match(":")){this.nextToken();var w=y,_="$"+w.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,_)&&this.throwError(a.Messages.Redeclaration,"Label",w.name),this.context.labelSet[_]=!0;var I=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),I=this.parseClassDeclaration();else if(this.matchKeyword("function")){var N=this.lookahead,Y=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(N,a.Messages.StrictFunction):Y.generator&&this.tolerateUnexpectedToken(N,a.Messages.GeneratorInLegacyContext),I=Y}else I=this.parseStatement();delete this.context.labelSet[_],x=new l.LabeledStatement(w,I)}else this.consumeSemicolon(),x=new l.ExpressionStatement(y);return this.finalize(m,x)},D.prototype.parseThrowStatement=function(){var m=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(a.Messages.NewlineAfterThrow);var y=this.parseExpression();return this.consumeSemicolon(),this.finalize(m,new l.ThrowStatement(y))},D.prototype.parseCatchClause=function(){var m=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var y=[],x=this.parsePattern(y),w={},_=0;_<y.length;_++){var I="$"+y[_].value;Object.prototype.hasOwnProperty.call(w,I)&&this.tolerateError(a.Messages.DuplicateBinding,y[_].value),w[I]=!0}this.context.strict&&x.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(x.name)&&this.tolerateError(a.Messages.StrictCatchVariable),this.expect(")");var N=this.parseBlock();return this.finalize(m,new l.CatchClause(x,N))},D.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},D.prototype.parseTryStatement=function(){var m=this.createNode();this.expectKeyword("try");var y=this.parseBlock(),x=this.matchKeyword("catch")?this.parseCatchClause():null,w=this.matchKeyword("finally")?this.parseFinallyClause():null;return!x&&!w&&this.throwError(a.Messages.NoCatchOrFinally),this.finalize(m,new l.TryStatement(y,x,w))},D.prototype.parseDebuggerStatement=function(){var m=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(m,new l.DebuggerStatement)},D.prototype.parseStatement=function(){var m;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:m=this.parseExpressionStatement();break;case 7:var y=this.lookahead.value;y==="{"?m=this.parseBlock():y==="("?m=this.parseExpressionStatement():y===";"?m=this.parseEmptyStatement():m=this.parseExpressionStatement();break;case 3:m=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":m=this.parseBreakStatement();break;case"continue":m=this.parseContinueStatement();break;case"debugger":m=this.parseDebuggerStatement();break;case"do":m=this.parseDoWhileStatement();break;case"for":m=this.parseForStatement();break;case"function":m=this.parseFunctionDeclaration();break;case"if":m=this.parseIfStatement();break;case"return":m=this.parseReturnStatement();break;case"switch":m=this.parseSwitchStatement();break;case"throw":m=this.parseThrowStatement();break;case"try":m=this.parseTryStatement();break;case"var":m=this.parseVariableStatement();break;case"while":m=this.parseWhileStatement();break;case"with":m=this.parseWithStatement();break;default:m=this.parseExpressionStatement();break}break;default:m=this.throwUnexpectedToken(this.lookahead)}return m},D.prototype.parseFunctionSourceElements=function(){var m=this.createNode();this.expect("{");var y=this.parseDirectivePrologues(),x=this.context.labelSet,w=this.context.inIteration,_=this.context.inSwitch,I=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)y.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=x,this.context.inIteration=w,this.context.inSwitch=_,this.context.inFunctionBody=I,this.finalize(m,new l.BlockStatement(y))},D.prototype.validateParam=function(m,y,x){var w="$"+x;this.context.strict?(this.scanner.isRestrictedWord(x)&&(m.stricted=y,m.message=a.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(m.paramSet,w)&&(m.stricted=y,m.message=a.Messages.StrictParamDupe)):m.firstRestricted||(this.scanner.isRestrictedWord(x)?(m.firstRestricted=y,m.message=a.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(x)?(m.firstRestricted=y,m.message=a.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(m.paramSet,w)&&(m.stricted=y,m.message=a.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(m.paramSet,w,{value:!0,enumerable:!0,writable:!0,configurable:!0}):m.paramSet[w]=!0},D.prototype.parseRestElement=function(m){var y=this.createNode();this.expect("...");var x=this.parsePattern(m);return this.match("=")&&this.throwError(a.Messages.DefaultRestParameter),this.match(")")||this.throwError(a.Messages.ParameterAfterRestParameter),this.finalize(y,new l.RestElement(x))},D.prototype.parseFormalParameter=function(m){for(var y=[],x=this.match("...")?this.parseRestElement(y):this.parsePatternWithDefault(y),w=0;w<y.length;w++)this.validateParam(m,y[w],y[w].value);m.simple=m.simple&&x instanceof l.Identifier,m.params.push(x)},D.prototype.parseFormalParameters=function(m){var y;if(y={simple:!0,params:[],firstRestricted:m},this.expect("("),!this.match(")"))for(y.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(y),!(this.match(")")||(this.expect(","),this.match(")")))););return this.expect(")"),{simple:y.simple,params:y.params,stricted:y.stricted,firstRestricted:y.firstRestricted,message:y.message}},D.prototype.matchAsyncFunction=function(){var m=this.matchContextualKeyword("async");if(m){var y=this.scanner.saveState();this.scanner.scanComments();var x=this.scanner.lex();this.scanner.restoreState(y),m=y.lineNumber===x.lineNumber&&x.type===4&&x.value==="function"}return m},D.prototype.parseFunctionDeclaration=function(m){var y=this.createNode(),x=this.matchContextualKeyword("async");x&&this.nextToken(),this.expectKeyword("function");var w=x?!1:this.match("*");w&&this.nextToken();var _,I=null,N=null;if(!m||!this.match("(")){var Y=this.lookahead;I=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(Y.value)&&this.tolerateUnexpectedToken(Y,a.Messages.StrictFunctionName):this.scanner.isRestrictedWord(Y.value)?(N=Y,_=a.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(Y.value)&&(N=Y,_=a.Messages.StrictReservedWord)}var j=this.context.await,ae=this.context.allowYield;this.context.await=x,this.context.allowYield=!w;var K=this.parseFormalParameters(N),oe=K.params,fe=K.stricted;N=K.firstRestricted,K.message&&(_=K.message);var U=this.context.strict,H=this.context.allowStrictDirective;this.context.allowStrictDirective=K.simple;var B=this.parseFunctionSourceElements();return this.context.strict&&N&&this.throwUnexpectedToken(N,_),this.context.strict&&fe&&this.tolerateUnexpectedToken(fe,_),this.context.strict=U,this.context.allowStrictDirective=H,this.context.await=j,this.context.allowYield=ae,x?this.finalize(y,new l.AsyncFunctionDeclaration(I,oe,B)):this.finalize(y,new l.FunctionDeclaration(I,oe,B,w))},D.prototype.parseFunctionExpression=function(){var m=this.createNode(),y=this.matchContextualKeyword("async");y&&this.nextToken(),this.expectKeyword("function");var x=y?!1:this.match("*");x&&this.nextToken();var w,_=null,I,N=this.context.await,Y=this.context.allowYield;if(this.context.await=y,this.context.allowYield=!x,!this.match("(")){var j=this.lookahead;_=!this.context.strict&&!x&&this.matchKeyword("yield")?this.parseIdentifierName():this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(j.value)&&this.tolerateUnexpectedToken(j,a.Messages.StrictFunctionName):this.scanner.isRestrictedWord(j.value)?(I=j,w=a.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(j.value)&&(I=j,w=a.Messages.StrictReservedWord)}var ae=this.parseFormalParameters(I),K=ae.params,oe=ae.stricted;I=ae.firstRestricted,ae.message&&(w=ae.message);var fe=this.context.strict,U=this.context.allowStrictDirective;this.context.allowStrictDirective=ae.simple;var H=this.parseFunctionSourceElements();return this.context.strict&&I&&this.throwUnexpectedToken(I,w),this.context.strict&&oe&&this.tolerateUnexpectedToken(oe,w),this.context.strict=fe,this.context.allowStrictDirective=U,this.context.await=N,this.context.allowYield=Y,y?this.finalize(m,new l.AsyncFunctionExpression(_,K,H)):this.finalize(m,new l.FunctionExpression(_,K,H,x))},D.prototype.parseDirective=function(){var m=this.lookahead,y=this.createNode(),x=this.parseExpression(),w=x.type===c.Syntax.Literal?this.getTokenRaw(m).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(y,w?new l.Directive(x,w):new l.ExpressionStatement(x))},D.prototype.parseDirectivePrologues=function(){for(var m=null,y=[];;){var x=this.lookahead;if(x.type!==8)break;var w=this.parseDirective();y.push(w);var _=w.directive;if(typeof _!="string")break;_==="use strict"?(this.context.strict=!0,m&&this.tolerateUnexpectedToken(m,a.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(x,a.Messages.IllegalLanguageModeDirective)):!m&&x.octal&&(m=x)}return y},D.prototype.qualifiedPropertyName=function(m){switch(m.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return m.value==="["}return!1},D.prototype.parseGetterMethod=function(){var m=this.createNode(),y=!1,x=this.context.allowYield;this.context.allowYield=!y;var w=this.parseFormalParameters();w.params.length>0&&this.tolerateError(a.Messages.BadGetterArity);var _=this.parsePropertyMethod(w);return this.context.allowYield=x,this.finalize(m,new l.FunctionExpression(null,w.params,_,y))},D.prototype.parseSetterMethod=function(){var m=this.createNode(),y=!1,x=this.context.allowYield;this.context.allowYield=!y;var w=this.parseFormalParameters();w.params.length!==1?this.tolerateError(a.Messages.BadSetterArity):w.params[0]instanceof l.RestElement&&this.tolerateError(a.Messages.BadSetterRestParameter);var _=this.parsePropertyMethod(w);return this.context.allowYield=x,this.finalize(m,new l.FunctionExpression(null,w.params,_,y))},D.prototype.parseGeneratorMethod=function(){var m=this.createNode(),y=!0,x=this.context.allowYield;this.context.allowYield=!0;var w=this.parseFormalParameters();this.context.allowYield=!1;var _=this.parsePropertyMethod(w);return this.context.allowYield=x,this.finalize(m,new l.FunctionExpression(null,w.params,_,y))},D.prototype.isStartOfExpression=function(){var m=!0,y=this.lookahead.value;switch(this.lookahead.type){case 7:m=y==="["||y==="("||y==="{"||y==="+"||y==="-"||y==="!"||y==="~"||y==="++"||y==="--"||y==="/"||y==="/=";break;case 4:m=y==="class"||y==="delete"||y==="function"||y==="let"||y==="new"||y==="super"||y==="this"||y==="typeof"||y==="void"||y==="yield";break}return m},D.prototype.parseYieldExpression=function(){var m=this.createNode();this.expectKeyword("yield");var y=null,x=!1;if(!this.hasLineTerminator){var w=this.context.allowYield;this.context.allowYield=!1,x=this.match("*"),x?(this.nextToken(),y=this.parseAssignmentExpression()):this.isStartOfExpression()&&(y=this.parseAssignmentExpression()),this.context.allowYield=w}return this.finalize(m,new l.YieldExpression(y,x))},D.prototype.parseClassElement=function(m){var y=this.lookahead,x=this.createNode(),w="",_=null,I=null,N=!1,Y=!1,j=!1,ae=!1;if(this.match("*"))this.nextToken();else{N=this.match("["),_=this.parseObjectPropertyKey();var K=_;if(K.name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(y=this.lookahead,j=!0,N=this.match("["),this.match("*")?this.nextToken():_=this.parseObjectPropertyKey()),y.type===3&&!this.hasLineTerminator&&y.value==="async"){var oe=this.lookahead.value;oe!==":"&&oe!=="("&&oe!=="*"&&(ae=!0,y=this.lookahead,_=this.parseObjectPropertyKey(),y.type===3&&y.value==="constructor"&&this.tolerateUnexpectedToken(y,a.Messages.ConstructorIsAsync))}}var fe=this.qualifiedPropertyName(this.lookahead);return y.type===3?y.value==="get"&&fe?(w="get",N=this.match("["),_=this.parseObjectPropertyKey(),this.context.allowYield=!1,I=this.parseGetterMethod()):y.value==="set"&&fe&&(w="set",N=this.match("["),_=this.parseObjectPropertyKey(),I=this.parseSetterMethod()):y.type===7&&y.value==="*"&&fe&&(w="init",N=this.match("["),_=this.parseObjectPropertyKey(),I=this.parseGeneratorMethod(),Y=!0),!w&&_&&this.match("(")&&(w="init",I=ae?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),Y=!0),w||this.throwUnexpectedToken(this.lookahead),w==="init"&&(w="method"),N||(j&&this.isPropertyKey(_,"prototype")&&this.throwUnexpectedToken(y,a.Messages.StaticPrototype),!j&&this.isPropertyKey(_,"constructor")&&((w!=="method"||!Y||I&&I.generator)&&this.throwUnexpectedToken(y,a.Messages.ConstructorSpecialMethod),m.value?this.throwUnexpectedToken(y,a.Messages.DuplicateConstructor):m.value=!0,w="constructor")),this.finalize(x,new l.MethodDefinition(_,N,I,w,j))},D.prototype.parseClassElementList=function(){var m=[],y={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():m.push(this.parseClassElement(y));return this.expect("}"),m},D.prototype.parseClassBody=function(){var m=this.createNode(),y=this.parseClassElementList();return this.finalize(m,new l.ClassBody(y))},D.prototype.parseClassDeclaration=function(m){var y=this.createNode(),x=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var w=m&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),_=null;this.matchKeyword("extends")&&(this.nextToken(),_=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var I=this.parseClassBody();return this.context.strict=x,this.finalize(y,new l.ClassDeclaration(w,_,I))},D.prototype.parseClassExpression=function(){var m=this.createNode(),y=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var x=this.lookahead.type===3?this.parseVariableIdentifier():null,w=null;this.matchKeyword("extends")&&(this.nextToken(),w=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var _=this.parseClassBody();return this.context.strict=y,this.finalize(m,new l.ClassExpression(x,w,_))},D.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var m=this.createNode(),y=this.parseDirectivePrologues();this.lookahead.type!==2;)y.push(this.parseStatementListItem());return this.finalize(m,new l.Module(y))},D.prototype.parseScript=function(){for(var m=this.createNode(),y=this.parseDirectivePrologues();this.lookahead.type!==2;)y.push(this.parseStatementListItem());return this.finalize(m,new l.Script(y))},D.prototype.parseModuleSpecifier=function(){var m=this.createNode();this.lookahead.type!==8&&this.throwError(a.Messages.InvalidModuleSpecifier);var y=this.nextToken(),x=this.getTokenRaw(y);return this.finalize(m,new l.Literal(y.value,x))},D.prototype.parseImportSpecifier=function(){var m=this.createNode(),y,x;return this.lookahead.type===3?(y=this.parseVariableIdentifier(),x=y,this.matchContextualKeyword("as")&&(this.nextToken(),x=this.parseVariableIdentifier())):(y=this.parseIdentifierName(),x=y,this.matchContextualKeyword("as")?(this.nextToken(),x=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(m,new l.ImportSpecifier(x,y))},D.prototype.parseNamedImports=function(){this.expect("{");for(var m=[];!this.match("}");)m.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),m},D.prototype.parseImportDefaultSpecifier=function(){var m=this.createNode(),y=this.parseIdentifierName();return this.finalize(m,new l.ImportDefaultSpecifier(y))},D.prototype.parseImportNamespaceSpecifier=function(){var m=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(a.Messages.NoAsAfterImportNamespace),this.nextToken();var y=this.parseIdentifierName();return this.finalize(m,new l.ImportNamespaceSpecifier(y))},D.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(a.Messages.IllegalImportDeclaration);var m=this.createNode();this.expectKeyword("import");var y,x=[];if(this.lookahead.type===8)y=this.parseModuleSpecifier();else{if(this.match("{")?x=x.concat(this.parseNamedImports()):this.match("*")?x.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(x.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?x.push(this.parseImportNamespaceSpecifier()):this.match("{")?x=x.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var w=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}this.nextToken(),y=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(m,new l.ImportDeclaration(x,y))},D.prototype.parseExportSpecifier=function(){var m=this.createNode(),y=this.parseIdentifierName(),x=y;return this.matchContextualKeyword("as")&&(this.nextToken(),x=this.parseIdentifierName()),this.finalize(m,new l.ExportSpecifier(y,x))},D.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(a.Messages.IllegalExportDeclaration);var m=this.createNode();this.expectKeyword("export");var y;if(this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var x=this.parseFunctionDeclaration(!0);y=this.finalize(m,new l.ExportDefaultDeclaration(x))}else if(this.matchKeyword("class")){var x=this.parseClassDeclaration(!0);y=this.finalize(m,new l.ExportDefaultDeclaration(x))}else if(this.matchContextualKeyword("async")){var x=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression();y=this.finalize(m,new l.ExportDefaultDeclaration(x))}else{this.matchContextualKeyword("from")&&this.throwError(a.Messages.UnexpectedToken,this.lookahead.value);var x=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),y=this.finalize(m,new l.ExportDefaultDeclaration(x))}else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var w=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}this.nextToken();var _=this.parseModuleSpecifier();this.consumeSemicolon(),y=this.finalize(m,new l.ExportAllDeclaration(_))}else if(this.lookahead.type===4){var x=void 0;switch(this.lookahead.value){case"let":case"const":x=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":x=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}y=this.finalize(m,new l.ExportNamedDeclaration(x,[],null))}else if(this.matchAsyncFunction()){var x=this.parseFunctionDeclaration();y=this.finalize(m,new l.ExportNamedDeclaration(x,[],null))}else{var I=[],N=null,Y=!1;for(this.expect("{");!this.match("}");)Y=Y||this.matchKeyword("default"),I.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");if(this.expect("}"),this.matchContextualKeyword("from"))this.nextToken(),N=this.parseModuleSpecifier(),this.consumeSemicolon();else if(Y){var w=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}else this.consumeSemicolon();y=this.finalize(m,new l.ExportNamedDeclaration(null,I,N))}return y},D}();n.Parser=v},function(t,n){Object.defineProperty(n,"__esModule",{value:!0});function r(o,s){if(!o)throw new Error("ASSERT: "+s)}n.assert=r},function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(){this.errors=[],this.tolerant=!1}return o.prototype.recordError=function(s){this.errors.push(s)},o.prototype.tolerate=function(s){if(this.tolerant)this.recordError(s);else throw s},o.prototype.constructError=function(s,a){var l=new Error(s);try{throw l}catch(h){Object.create&&Object.defineProperty&&(l=Object.create(h),Object.defineProperty(l,"column",{value:a}))}return l},o.prototype.createError=function(s,a,l,h){var c="Line "+a+": "+h,p=this.constructError(c,l);return p.index=s,p.lineNumber=a,p.description=h,p},o.prototype.throwError=function(s,a,l,h){throw this.createError(s,a,l,h)},o.prototype.tolerateError=function(s,a,l,h){var c=this.createError(s,a,l,h);if(this.tolerant)this.recordError(c);else throw c},o}();n.ErrorHandler=r},function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(9),s=r(4),a=r(11);function l(p){return"0123456789abcdef".indexOf(p.toLowerCase())}function h(p){return"01234567".indexOf(p)}var c=function(){function p(d,v){this.source=d,this.errorHandler=v,this.trackComment=!1,this.isModule=!1,this.length=d.length,this.index=0,this.lineNumber=d.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return p.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},p.prototype.restoreState=function(d){this.index=d.index,this.lineNumber=d.lineNumber,this.lineStart=d.lineStart},p.prototype.eof=function(){return this.index>=this.length},p.prototype.throwUnexpectedToken=function(d){return d===void 0&&(d=a.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,d)},p.prototype.tolerateUnexpectedToken=function(d){d===void 0&&(d=a.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,d)},p.prototype.skipSingleLineComment=function(d){var v=[],D,m;for(this.trackComment&&(v=[],D=this.index-d,m={start:{line:this.lineNumber,column:this.index-this.lineStart-d},end:{}});!this.eof();){var y=this.source.charCodeAt(this.index);if(++this.index,s.Character.isLineTerminator(y)){if(this.trackComment){m.end={line:this.lineNumber,column:this.index-this.lineStart-1};var x={multiLine:!1,slice:[D+d,this.index-1],range:[D,this.index-1],loc:m};v.push(x)}return y===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,v}}if(this.trackComment){m.end={line:this.lineNumber,column:this.index-this.lineStart};var x={multiLine:!1,slice:[D+d,this.index],range:[D,this.index],loc:m};v.push(x)}return v},p.prototype.skipMultiLineComment=function(){var d=[],v,D;for(this.trackComment&&(d=[],v=this.index-2,D={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var m=this.source.charCodeAt(this.index);if(s.Character.isLineTerminator(m))m===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(m===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){D.end={line:this.lineNumber,column:this.index-this.lineStart};var y={multiLine:!0,slice:[v+2,this.index-2],range:[v,this.index],loc:D};d.push(y)}return d}++this.index}else++this.index}if(this.trackComment){D.end={line:this.lineNumber,column:this.index-this.lineStart};var y={multiLine:!0,slice:[v+2,this.index],range:[v,this.index],loc:D};d.push(y)}return this.tolerateUnexpectedToken(),d},p.prototype.scanComments=function(){var d;this.trackComment&&(d=[]);for(var v=this.index===0;!this.eof();){var D=this.source.charCodeAt(this.index);if(s.Character.isWhiteSpace(D))++this.index;else if(s.Character.isLineTerminator(D))++this.index,D===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,v=!0;else if(D===47)if(D=this.source.charCodeAt(this.index+1),D===47){this.index+=2;var m=this.skipSingleLineComment(2);this.trackComment&&(d=d.concat(m)),v=!0}else if(D===42){this.index+=2;var m=this.skipMultiLineComment();this.trackComment&&(d=d.concat(m))}else break;else if(v&&D===45)if(this.source.charCodeAt(this.index+1)===45&&this.source.charCodeAt(this.index+2)===62){this.index+=3;var m=this.skipSingleLineComment(3);this.trackComment&&(d=d.concat(m))}else break;else if(D===60&&!this.isModule)if(this.source.slice(this.index+1,this.index+4)==="!--"){this.index+=4;var m=this.skipSingleLineComment(4);this.trackComment&&(d=d.concat(m))}else break;else break}return d},p.prototype.isFutureReservedWord=function(d){switch(d){case"enum":case"export":case"import":case"super":return!0;default:return!1}},p.prototype.isStrictModeReservedWord=function(d){switch(d){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},p.prototype.isRestrictedWord=function(d){return d==="eval"||d==="arguments"},p.prototype.isKeyword=function(d){switch(d.length){case 2:return d==="if"||d==="in"||d==="do";case 3:return d==="var"||d==="for"||d==="new"||d==="try"||d==="let";case 4:return d==="this"||d==="else"||d==="case"||d==="void"||d==="with"||d==="enum";case 5:return d==="while"||d==="break"||d==="catch"||d==="throw"||d==="const"||d==="yield"||d==="class"||d==="super";case 6:return d==="return"||d==="typeof"||d==="delete"||d==="switch"||d==="export"||d==="import";case 7:return d==="default"||d==="finally"||d==="extends";case 8:return d==="function"||d==="continue"||d==="debugger";case 10:return d==="instanceof";default:return!1}},p.prototype.codePointAt=function(d){var v=this.source.charCodeAt(d);if(v>=55296&&v<=56319){var D=this.source.charCodeAt(d+1);if(D>=56320&&D<=57343){var m=v;v=(m-55296)*1024+D-56320+65536}}return v},p.prototype.scanHexEscape=function(d){for(var v=d==="u"?4:2,D=0,m=0;m<v;++m)if(!this.eof()&&s.Character.isHexDigit(this.source.charCodeAt(this.index)))D=D*16+l(this.source[this.index++]);else return null;return String.fromCharCode(D)},p.prototype.scanUnicodeCodePointEscape=function(){var d=this.source[this.index],v=0;for(d==="}"&&this.throwUnexpectedToken();!this.eof()&&(d=this.source[this.index++],!!s.Character.isHexDigit(d.charCodeAt(0)));)v=v*16+l(d);return(v>1114111||d!=="}")&&this.throwUnexpectedToken(),s.Character.fromCodePoint(v)},p.prototype.getIdentifier=function(){for(var d=this.index++;!this.eof();){var v=this.source.charCodeAt(this.index);if(v===92)return this.index=d,this.getComplexIdentifier();if(v>=55296&&v<57343)return this.index=d,this.getComplexIdentifier();if(s.Character.isIdentifierPart(v))++this.index;else break}return this.source.slice(d,this.index)},p.prototype.getComplexIdentifier=function(){var d=this.codePointAt(this.index),v=s.Character.fromCodePoint(d);this.index+=v.length;var D;for(d===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,D=this.scanUnicodeCodePointEscape()):(D=this.scanHexEscape("u"),(D===null||D==="\\"||!s.Character.isIdentifierStart(D.charCodeAt(0)))&&this.throwUnexpectedToken()),v=D);!this.eof()&&(d=this.codePointAt(this.index),!!s.Character.isIdentifierPart(d));)D=s.Character.fromCodePoint(d),v+=D,this.index+=D.length,d===92&&(v=v.substr(0,v.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,D=this.scanUnicodeCodePointEscape()):(D=this.scanHexEscape("u"),(D===null||D==="\\"||!s.Character.isIdentifierPart(D.charCodeAt(0)))&&this.throwUnexpectedToken()),v+=D);return v},p.prototype.octalToDecimal=function(d){var v=d!=="0",D=h(d);return!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(v=!0,D=D*8+h(this.source[this.index++]),"0123".indexOf(d)>=0&&!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(D=D*8+h(this.source[this.index++]))),{code:D,octal:v}},p.prototype.scanIdentifier=function(){var d,v=this.index,D=this.source.charCodeAt(v)===92?this.getComplexIdentifier():this.getIdentifier();if(D.length===1?d=3:this.isKeyword(D)?d=4:D==="null"?d=5:D==="true"||D==="false"?d=1:d=3,d!==3&&v+D.length!==this.index){var m=this.index;this.index=v,this.tolerateUnexpectedToken(a.Messages.InvalidEscapedReservedWord),this.index=m}return{type:d,value:D,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}},p.prototype.scanPunctuator=function(){var d=this.index,v=this.source[this.index];switch(v){case"(":case"{":v==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,v="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:v=this.source.substr(this.index,4),v===">>>="?this.index+=4:(v=v.substr(0,3),v==="==="||v==="!=="||v===">>>"||v==="<<="||v===">>="||v==="**="?this.index+=3:(v=v.substr(0,2),v==="&&"||v==="||"||v==="=="||v==="!="||v==="+="||v==="-="||v==="*="||v==="/="||v==="++"||v==="--"||v==="<<"||v===">>"||v==="&="||v==="|="||v==="^="||v==="%="||v==="<="||v===">="||v==="=>"||v==="**"?this.index+=2:(v=this.source[this.index],"<>=!+-*%&|^/".indexOf(v)>=0&&++this.index)))}return this.index===d&&this.throwUnexpectedToken(),{type:7,value:v,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}},p.prototype.scanHexLiteral=function(d){for(var v="";!this.eof()&&s.Character.isHexDigit(this.source.charCodeAt(this.index));)v+=this.source[this.index++];return v.length===0&&this.throwUnexpectedToken(),s.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+v,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}},p.prototype.scanBinaryLiteral=function(d){for(var v="",D;!this.eof()&&(D=this.source[this.index],!(D!=="0"&&D!=="1"));)v+=this.source[this.index++];return v.length===0&&this.throwUnexpectedToken(),this.eof()||(D=this.source.charCodeAt(this.index),(s.Character.isIdentifierStart(D)||s.Character.isDecimalDigit(D))&&this.throwUnexpectedToken()),{type:6,value:parseInt(v,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}},p.prototype.scanOctalLiteral=function(d,v){var D="",m=!1;for(s.Character.isOctalDigit(d.charCodeAt(0))?(m=!0,D="0"+this.source[this.index++]):++this.index;!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index));)D+=this.source[this.index++];return!m&&D.length===0&&this.throwUnexpectedToken(),(s.Character.isIdentifierStart(this.source.charCodeAt(this.index))||s.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(D,8),octal:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}},p.prototype.isImplicitOctalLiteral=function(){for(var d=this.index+1;d<this.length;++d){var v=this.source[d];if(v==="8"||v==="9")return!1;if(!s.Character.isOctalDigit(v.charCodeAt(0)))return!0}return!0},p.prototype.scanNumericLiteral=function(){var d=this.index,v=this.source[d];o.assert(s.Character.isDecimalDigit(v.charCodeAt(0))||v===".","Numeric literal must start with a decimal digit or a decimal point");var D="";if(v!=="."){if(D=this.source[this.index++],v=this.source[this.index],D==="0"){if(v==="x"||v==="X")return++this.index,this.scanHexLiteral(d);if(v==="b"||v==="B")return++this.index,this.scanBinaryLiteral(d);if(v==="o"||v==="O")return this.scanOctalLiteral(v,d);if(v&&s.Character.isOctalDigit(v.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(v,d)}for(;s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)D+=this.source[this.index++];v=this.source[this.index]}if(v==="."){for(D+=this.source[this.index++];s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)D+=this.source[this.index++];v=this.source[this.index]}if(v==="e"||v==="E")if(D+=this.source[this.index++],v=this.source[this.index],(v==="+"||v==="-")&&(D+=this.source[this.index++]),s.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)D+=this.source[this.index++];else this.throwUnexpectedToken();return s.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(D),lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}},p.prototype.scanStringLiteral=function(){var d=this.index,v=this.source[d];o.assert(v==="'"||v==='"',"String literal must starts with a quote"),++this.index;for(var D=!1,m="";!this.eof();){var y=this.source[this.index++];if(y===v){v="";break}else if(y==="\\")if(y=this.source[this.index++],!y||!s.Character.isLineTerminator(y.charCodeAt(0)))switch(y){case"u":if(this.source[this.index]==="{")++this.index,m+=this.scanUnicodeCodePointEscape();else{var x=this.scanHexEscape(y);x===null&&this.throwUnexpectedToken(),m+=x}break;case"x":var w=this.scanHexEscape(y);w===null&&this.throwUnexpectedToken(a.Messages.InvalidHexEscapeSequence),m+=w;break;case"n":m+=`
`;break;case"r":m+="\r";break;case"t":m+="	";break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;case"8":case"9":m+=y,this.tolerateUnexpectedToken();break;default:if(y&&s.Character.isOctalDigit(y.charCodeAt(0))){var _=this.octalToDecimal(y);D=_.octal||D,m+=String.fromCharCode(_.code)}else m+=y;break}else++this.lineNumber,y==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else{if(s.Character.isLineTerminator(y.charCodeAt(0)))break;m+=y}}return v!==""&&(this.index=d,this.throwUnexpectedToken()),{type:8,value:m,octal:D,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}},p.prototype.scanTemplate=function(){var d="",v=!1,D=this.index,m=this.source[D]==="`",y=!1,x=2;for(++this.index;!this.eof();){var w=this.source[this.index++];if(w==="`"){x=1,y=!0,v=!0;break}else if(w==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,v=!0;break}d+=w}else if(w==="\\")if(w=this.source[this.index++],s.Character.isLineTerminator(w.charCodeAt(0)))++this.lineNumber,w==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(w){case"n":d+=`
`;break;case"r":d+="\r";break;case"t":d+="	";break;case"u":if(this.source[this.index]==="{")++this.index,d+=this.scanUnicodeCodePointEscape();else{var _=this.index,I=this.scanHexEscape(w);I!==null?d+=I:(this.index=_,d+=w)}break;case"x":var N=this.scanHexEscape(w);N===null&&this.throwUnexpectedToken(a.Messages.InvalidHexEscapeSequence),d+=N;break;case"b":d+="\b";break;case"f":d+="\f";break;case"v":d+="\v";break;default:w==="0"?(s.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(a.Messages.TemplateOctalLiteral),d+="\0"):s.Character.isOctalDigit(w.charCodeAt(0))?this.throwUnexpectedToken(a.Messages.TemplateOctalLiteral):d+=w;break}else s.Character.isLineTerminator(w.charCodeAt(0))?(++this.lineNumber,w==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,d+=`
`):d+=w}return v||this.throwUnexpectedToken(),m||this.curlyStack.pop(),{type:10,value:this.source.slice(D+1,this.index-x),cooked:d,head:m,tail:y,lineNumber:this.lineNumber,lineStart:this.lineStart,start:D,end:this.index}},p.prototype.testRegExp=function(d,v){var D="",m=d,y=this;v.indexOf("u")>=0&&(m=m.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(x,w,_){var I=parseInt(w||_,16);return I>1114111&&y.throwUnexpectedToken(a.Messages.InvalidRegExp),I<=65535?String.fromCharCode(I):D}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,D));try{RegExp(m)}catch{this.throwUnexpectedToken(a.Messages.InvalidRegExp)}try{return new RegExp(d,v)}catch{return null}},p.prototype.scanRegExpBody=function(){var d=this.source[this.index];o.assert(d==="/","Regular expression literal must start with a slash");for(var v=this.source[this.index++],D=!1,m=!1;!this.eof();)if(d=this.source[this.index++],v+=d,d==="\\")d=this.source[this.index++],s.Character.isLineTerminator(d.charCodeAt(0))&&this.throwUnexpectedToken(a.Messages.UnterminatedRegExp),v+=d;else if(s.Character.isLineTerminator(d.charCodeAt(0)))this.throwUnexpectedToken(a.Messages.UnterminatedRegExp);else if(D)d==="]"&&(D=!1);else if(d==="/"){m=!0;break}else d==="["&&(D=!0);return m||this.throwUnexpectedToken(a.Messages.UnterminatedRegExp),v.substr(1,v.length-2)},p.prototype.scanRegExpFlags=function(){for(var d="",v="";!this.eof();){var D=this.source[this.index];if(!s.Character.isIdentifierPart(D.charCodeAt(0)))break;if(++this.index,D==="\\"&&!this.eof())if(D=this.source[this.index],D==="u"){++this.index;var m=this.index,y=this.scanHexEscape("u");if(y!==null)for(v+=y,d+="\\u";m<this.index;++m)d+=this.source[m];else this.index=m,v+="u",d+="\\u";this.tolerateUnexpectedToken()}else d+="\\",this.tolerateUnexpectedToken();else v+=D,d+=D}return v},p.prototype.scanRegExp=function(){var d=this.index,v=this.scanRegExpBody(),D=this.scanRegExpFlags(),m=this.testRegExp(v,D);return{type:9,value:"",pattern:v,flags:D,regex:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}},p.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var d=this.source.charCodeAt(this.index);return s.Character.isIdentifierStart(d)?this.scanIdentifier():d===40||d===41||d===59?this.scanPunctuator():d===39||d===34?this.scanStringLiteral():d===46?s.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():s.Character.isDecimalDigit(d)?this.scanNumericLiteral():d===96||d===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():d>=55296&&d<57343&&s.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},p}();n.Scanner=c},function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenName={},n.TokenName[1]="Boolean",n.TokenName[2]="<end>",n.TokenName[3]="Identifier",n.TokenName[4]="Keyword",n.TokenName[5]="Null",n.TokenName[6]="Numeric",n.TokenName[7]="Punctuator",n.TokenName[8]="String",n.TokenName[9]="RegularExpression",n.TokenName[10]="Template"},function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(10),s=r(12),a=r(13),l=function(){function c(){this.values=[],this.curly=this.paren=-1}return c.prototype.beforeFunctionExpression=function(p){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(p)>=0},c.prototype.isRegexStart=function(){var p=this.values[this.values.length-1],d=p!==null;switch(p){case"this":case"]":d=!1;break;case")":var v=this.values[this.paren-1];d=v==="if"||v==="while"||v==="for"||v==="with";break;case"}":if(d=!1,this.values[this.curly-3]==="function"){var D=this.values[this.curly-4];d=D?!this.beforeFunctionExpression(D):!1}else if(this.values[this.curly-4]==="function"){var D=this.values[this.curly-5];d=D?!this.beforeFunctionExpression(D):!0}break}return d},c.prototype.push=function(p){p.type===7||p.type===4?(p.value==="{"?this.curly=this.values.length:p.value==="("&&(this.paren=this.values.length),this.values.push(p.value)):this.values.push(null)},c}(),h=function(){function c(p,d){this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=d?typeof d.tolerant=="boolean"&&d.tolerant:!1,this.scanner=new s.Scanner(p,this.errorHandler),this.scanner.trackComment=d?typeof d.comment=="boolean"&&d.comment:!1,this.trackRange=d?typeof d.range=="boolean"&&d.range:!1,this.trackLoc=d?typeof d.loc=="boolean"&&d.loc:!1,this.buffer=[],this.reader=new l}return c.prototype.errors=function(){return this.errorHandler.errors},c.prototype.getNextToken=function(){if(this.buffer.length===0){var p=this.scanner.scanComments();if(this.scanner.trackComment)for(var d=0;d<p.length;++d){var v=p[d],D=this.scanner.source.slice(v.slice[0],v.slice[1]),m={type:v.multiLine?"BlockComment":"LineComment",value:D};this.trackRange&&(m.range=v.range),this.trackLoc&&(m.loc=v.loc),this.buffer.push(m)}if(!this.scanner.eof()){var y=void 0;this.trackLoc&&(y={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var x=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart(),w=x?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(w);var _={type:a.TokenName[w.type],value:this.scanner.source.slice(w.start,w.end)};if(this.trackRange&&(_.range=[w.start,w.end]),this.trackLoc&&(y.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},_.loc=y),w.type===9){var I=w.pattern,N=w.flags;_.regex={pattern:I,flags:N}}this.buffer.push(_)}}return this.buffer.shift()},c}();n.Tokenizer=h}])})})(Bn);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var hh;const oo=globalThis.trustedTypes,Dd=oo?oo.createPolicy("lit-html",{createHTML:i=>i}):void 0,Lr=`lit$${(Math.random()+"").slice(9)}$`,bm="?"+Lr,qx=`<${bm}>`,ao=document,ra=(i="")=>ao.createComment(i),sa=i=>i===null||typeof i!="object"&&typeof i!="function",Sm=Array.isArray,Hx=i=>{var e;return Sm(i)||typeof((e=i)===null||e===void 0?void 0:e[Symbol.iterator])=="function"},Fo=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Cd=/-->/g,bd=/>/g,rs=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Sd=/'/g,wd=/"/g,wm=/^(?:script|style|textarea|title)$/i,Pm=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),Zi=Pm(1),Ei=Pm(2),oa=Symbol.for("lit-noChange"),ki=Symbol.for("lit-nothing"),Pd=new WeakMap,Ld=(i,e,t)=>{var n,r;const o=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:e;let s=o._$litPart$;if(s===void 0){const a=(r=t==null?void 0:t.renderBefore)!==null&&r!==void 0?r:null;o._$litPart$=s=new Sa(e.insertBefore(ra(),a),a,void 0,t??{})}return s._$AI(i),s},Vs=ao.createTreeWalker(ao,129,null,!1),Jx=(i,e)=>{const t=i.length-1,n=[];let r,o=e===2?"<svg>":"",s=Fo;for(let l=0;l<t;l++){const h=i[l];let c,p,d=-1,v=0;for(;v<h.length&&(s.lastIndex=v,p=s.exec(h),p!==null);)v=s.lastIndex,s===Fo?p[1]==="!--"?s=Cd:p[1]!==void 0?s=bd:p[2]!==void 0?(wm.test(p[2])&&(r=RegExp("</"+p[2],"g")),s=rs):p[3]!==void 0&&(s=rs):s===rs?p[0]===">"?(s=r??Fo,d=-1):p[1]===void 0?d=-2:(d=s.lastIndex-p[2].length,c=p[1],s=p[3]===void 0?rs:p[3]==='"'?wd:Sd):s===wd||s===Sd?s=rs:s===Cd||s===bd?s=Fo:(s=rs,r=void 0);const D=s===rs&&i[l+1].startsWith("/>")?" ":"";o+=s===Fo?h+qx:d>=0?(n.push(c),h.slice(0,d)+"$lit$"+h.slice(d)+Lr+D):h+Lr+(d===-2?(n.push(void 0),l):D)}const a=o+(i[t]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[Dd!==void 0?Dd.createHTML(a):a,n]};class aa{constructor({strings:e,_$litType$:t},n){let r;this.parts=[];let o=0,s=0;const a=e.length-1,l=this.parts,[h,c]=Jx(e,t);if(this.el=aa.createElement(h,n),Vs.currentNode=this.el.content,t===2){const p=this.el.content,d=p.firstChild;d.remove(),p.append(...d.childNodes)}for(;(r=Vs.nextNode())!==null&&l.length<a;){if(r.nodeType===1){if(r.hasAttributes()){const p=[];for(const d of r.getAttributeNames())if(d.endsWith("$lit$")||d.startsWith(Lr)){const v=c[s++];if(p.push(d),v!==void 0){const D=r.getAttribute(v.toLowerCase()+"$lit$").split(Lr),m=/([.?@])?(.*)/.exec(v);l.push({type:1,index:o,name:m[2],strings:D,ctor:m[1]==="."?eD:m[1]==="?"?iD:m[1]==="@"?nD:Pu})}else l.push({type:6,index:o})}for(const d of p)r.removeAttribute(d)}if(wm.test(r.tagName)){const p=r.textContent.split(Lr),d=p.length-1;if(d>0){r.textContent=oo?oo.emptyScript:"";for(let v=0;v<d;v++)r.append(p[v],ra()),Vs.nextNode(),l.push({type:2,index:++o});r.append(p[d],ra())}}}else if(r.nodeType===8)if(r.data===bm)l.push({type:2,index:o});else{let p=-1;for(;(p=r.data.indexOf(Lr,p+1))!==-1;)l.push({type:7,index:o}),p+=Lr.length-1}o++}}static createElement(e,t){const n=ao.createElement("template");return n.innerHTML=e,n}}function lo(i,e,t=i,n){var r,o,s,a;if(e===oa)return e;let l=n!==void 0?(r=t._$Cl)===null||r===void 0?void 0:r[n]:t._$Cu;const h=sa(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==h&&((o=l==null?void 0:l._$AO)===null||o===void 0||o.call(l,!1),h===void 0?l=void 0:(l=new h(i),l._$AT(i,t,n)),n!==void 0?((s=(a=t)._$Cl)!==null&&s!==void 0?s:a._$Cl=[])[n]=l:t._$Cu=l),l!==void 0&&(e=lo(i,l._$AS(i,e.values),l,n)),e}class Kx{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;const{el:{content:n},parts:r}=this._$AD,o=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:ao).importNode(n,!0);Vs.currentNode=o;let s=Vs.nextNode(),a=0,l=0,h=r[0];for(;h!==void 0;){if(a===h.index){let c;h.type===2?c=new Sa(s,s.nextSibling,this,e):h.type===1?c=new h.ctor(s,h.name,h.strings,this,e):h.type===6&&(c=new rD(s,this,e)),this.v.push(c),h=r[++l]}a!==(h==null?void 0:h.index)&&(s=Vs.nextNode(),a++)}return o}m(e){let t=0;for(const n of this.v)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class Sa{constructor(e,t,n,r){var o;this.type=2,this._$AH=ki,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$Cg=(o=r==null?void 0:r.isConnected)===null||o===void 0||o}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cg}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=lo(this,e,t),sa(e)?e===ki||e==null||e===""?(this._$AH!==ki&&this._$AR(),this._$AH=ki):e!==this._$AH&&e!==oa&&this.$(e):e._$litType$!==void 0?this.T(e):e.nodeType!==void 0?this.k(e):Hx(e)?this.S(e):this.$(e)}M(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}k(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}$(e){this._$AH!==ki&&sa(this._$AH)?this._$AA.nextSibling.data=e:this.k(ao.createTextNode(e)),this._$AH=e}T(e){var t;const{values:n,_$litType$:r}=e,o=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=aa.createElement(r.h,this.options)),r);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===o)this._$AH.m(n);else{const s=new Kx(o,this),a=s.p(this.options);s.m(n),this.k(a),this._$AH=s}}_$AC(e){let t=Pd.get(e.strings);return t===void 0&&Pd.set(e.strings,t=new aa(e)),t}S(e){Sm(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,r=0;for(const o of e)r===t.length?t.push(n=new Sa(this.M(ra()),this.M(ra()),this,this.options)):n=t[r],n._$AI(o),r++;r<t.length&&(this._$AR(n&&n._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,t);e&&e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){var t;this._$AM===void 0&&(this._$Cg=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class Pu{constructor(e,t,n,r,o){this.type=1,this._$AH=ki,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=ki}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,r){const o=this.strings;let s=!1;if(o===void 0)e=lo(this,e,t,0),s=!sa(e)||e!==this._$AH&&e!==oa,s&&(this._$AH=e);else{const a=e;let l,h;for(e=o[0],l=0;l<o.length-1;l++)h=lo(this,a[n+l],t,l),h===oa&&(h=this._$AH[l]),s||(s=!sa(h)||h!==this._$AH[l]),h===ki?e=ki:e!==ki&&(e+=(h??"")+o[l+1]),this._$AH[l]=h}s&&!r&&this.C(e)}C(e){e===ki?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class eD extends Pu{constructor(){super(...arguments),this.type=3}C(e){this.element[this.name]=e===ki?void 0:e}}const tD=oo?oo.emptyScript:"";class iD extends Pu{constructor(){super(...arguments),this.type=4}C(e){e&&e!==ki?this.element.setAttribute(this.name,tD):this.element.removeAttribute(this.name)}}class nD extends Pu{constructor(e,t,n,r,o){super(e,t,n,r,o),this.type=5}_$AI(e,t=this){var n;if((e=(n=lo(this,e,t,0))!==null&&n!==void 0?n:ki)===oa)return;const r=this._$AH,o=e===ki&&r!==ki||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==ki&&(r===ki||o);o&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;typeof this._$AH=="function"?this._$AH.call((n=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}class rD{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){lo(this,e)}}const kd=window.litHtmlPolyfillSupport;kd==null||kd(aa,Sa),((hh=globalThis.litHtmlVersions)!==null&&hh!==void 0?hh:globalThis.litHtmlVersions=[]).push("2.2.6");class Xt{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),Vn.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),Vn.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new Ho(this),o=new Ho(e);for(let s=t,a=t;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(a+=r.value.length,r.done||a>=n)return!0}}iter(e=1){return new Ho(this,e)}iterRange(e,t=this.length){return new Lm(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new km(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Xt.empty:e.length<=32?new ai(e):Vn.from(ai.split(e,[]))}}class ai extends Xt{constructor(e,t=sD(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let o=0;;o++){let s=this.text[o],a=r+s.length;if((t?n:a)>=e)return new oD(r,a,n,s);r=a+1,n++}}decompose(e,t,n,r){let o=e<=0&&t>=this.length?this:new ai(Ad(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let s=n.pop(),a=xl(o.text,s.text.slice(),0,o.length);if(a.length<=32)n.push(new ai(a,s.length+o.length));else{let l=a.length>>1;n.push(new ai(a.slice(0,l)),new ai(a.slice(l)))}}else n.push(o)}replace(e,t,n){if(!(n instanceof ai))return super.replace(e,t,n);let r=xl(this.text,xl(n.text,Ad(this.text,0,e)),t),o=this.length+n.length-(t-e);return r.length<=32?new ai(r,o):Vn.from(ai.split(r,[]),o)}sliceString(e,t=this.length,n=`
`){let r="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],l=o+a.length;o>e&&s&&(r+=n),e<l&&t>o&&(r+=a.slice(Math.max(0,e-o),t-o)),o=l+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let o of e)n.push(o),r+=o.length+1,n.length==32&&(t.push(new ai(n,r)),n=[],r=-1);return r>-1&&t.push(new ai(n,r)),t}}class Vn extends Xt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,r){for(let o=0;;o++){let s=this.children[o],a=r+s.length,l=n+s.lines-1;if((t?l:a)>=e)return s.lineInner(e,t,n,r);r=a+1,n=l+1}}decompose(e,t,n,r){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],l=s+a.length;if(e<=l&&t>=s){let h=r&((s<=e?1:0)|(l>=t?2:0));s>=e&&l<=t&&!h?n.push(a):a.decompose(e-s,t-s,n,h)}s=l+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.length;if(e>=o&&t<=a){let l=s.replace(e-o,t-o,n),h=this.lines-s.lines+l.lines;if(l.lines<h>>5-1&&l.lines>h>>5+1){let c=this.children.slice();return c[r]=l,new Vn(c,this.length-(t-e)+n.length)}return super.replace(o,a,l)}o=a+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){let r="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],l=s+a.length;s>e&&o&&(r+=n),e<l&&t>s&&(r+=a.sliceString(e-s,t-s,n)),s=l+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Vn))return 0;let n=0,[r,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==s||o==a)return n;let l=this.children[r],h=e.children[o];if(l!=h)return n+l.scanIdentical(h,t);n+=l.length+1}}static from(e,t=e.reduce((n,r)=>n+r.length+1,-1)){let n=0;for(let v of e)n+=v.lines;if(n<32){let v=[];for(let D of e)D.flatten(v);return new ai(v,t)}let r=Math.max(32,n>>5),o=r<<1,s=r>>1,a=[],l=0,h=-1,c=[];function p(v){let D;if(v.lines>o&&v instanceof Vn)for(let m of v.children)p(m);else v.lines>s&&(l>s||!l)?(d(),a.push(v)):v instanceof ai&&l&&(D=c[c.length-1])instanceof ai&&v.lines+D.lines<=32?(l+=v.lines,h+=v.length+1,c[c.length-1]=new ai(D.text.concat(v.text),D.length+1+v.length)):(l+v.lines>r&&d(),l+=v.lines,h+=v.length+1,c.push(v))}function d(){l!=0&&(a.push(c.length==1?c[0]:Vn.from(c,h)),h=-1,l=c.length=0)}for(let v of e)p(v);return d(),a.length==1?a[0]:new Vn(a,t)}}Xt.empty=new ai([""],0);function sD(i){let e=-1;for(let t of i)e+=t.length+1;return e}function xl(i,e,t=0,n=1e9){for(let r=0,o=0,s=!0;o<i.length&&r<=n;o++){let a=i[o],l=r+a.length;l>=t&&(l>n&&(a=a.slice(0,n-r)),r<t&&(a=a.slice(t-r)),s?(e[e.length-1]+=a,s=!1):e.push(a)),r=l+1}return e}function Ad(i,e,t){return xl(i,[""],e,t)}class Ho{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ai?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],o=this.offsets[n],s=o>>1,a=r instanceof ai?r.text.length:r.children.length;if(s==(t>0?a:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof ai){let l=r.text[s+(t<0?-1:0)];if(this.offsets[n]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[s+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof ai?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Lm{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Ho(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class km{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Xt.prototype[Symbol.iterator]=function(){return this.iter()},Ho.prototype[Symbol.iterator]=Lm.prototype[Symbol.iterator]=km.prototype[Symbol.iterator]=function(){return this});class oD{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}let qs="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(i=>i?parseInt(i,36):1);for(let i=1;i<qs.length;i++)qs[i]+=qs[i-1];function aD(i){for(let e=1;e<qs.length;e+=2)if(qs[e]>i)return qs[e-1]<=i;return!1}function Ed(i){return i>=127462&&i<=127487}const _d=8205;function Ui(i,e,t=!0,n=!0){return(t?Am:lD)(i,e,n)}function Am(i,e,t){if(e==i.length)return e;e&&Em(i.charCodeAt(e))&&_m(i.charCodeAt(e-1))&&e--;let n=Ii(i,e);for(e+=dn(n);e<i.length;){let r=Ii(i,e);if(n==_d||r==_d||t&&aD(r))e+=dn(r),n=r;else if(Ed(r)){let o=0,s=e-2;for(;s>=0&&Ed(Ii(i,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function lD(i,e,t){for(;e>0;){let n=Am(i,e-2,t);if(n<e)return n;e--}return 0}function Em(i){return i>=56320&&i<57344}function _m(i){return i>=55296&&i<56320}function Ii(i,e){let t=i.charCodeAt(e);if(!_m(t)||e+1==i.length)return t;let n=i.charCodeAt(e+1);return Em(n)?(t-55296<<10)+(n-56320)+65536:t}function zc(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function dn(i){return i<65536?1:2}const jh=/\r\n?|\n/;var Ci=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(Ci||(Ci={}));class Kn{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(n,r,o),r+=o):r+=s,n+=o}}iterChangedRanges(e,t=!1){Gh(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new Kn(e)}composeDesc(e){return this.empty?e:e.empty?this:Tm(this,e)}mapDesc(e,t=!1){return e.empty?this:Vh(this,e,t)}mapPos(e,t=-1,n=Ci.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],l=this.sections[s++],h=r+a;if(l<0){if(h>e)return o+(e-r);o+=a}else{if(n!=Ci.Simple&&h>=e&&(n==Ci.TrackDel&&r<e&&h>e||n==Ci.TrackBefore&&r<e||n==Ci.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!a)return e==r||t<0?o:o+l;o+=l}r=h}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let o=this.sections[n++],s=this.sections[n++],a=r+o;if(s>=0&&r<=t&&a>=e)return r<e&&a>t?"cover":!0;r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Kn(e)}static create(e){return new Kn(e)}}class Di extends Kn{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Gh(this,(t,n,r,o,s)=>e=e.replace(r,r+(n-t),s),!1),e}mapDesc(e,t=!1){return Vh(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,o=0;r<t.length;r+=2){let s=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=s;let l=r>>1;for(;n.length<l;)n.push(Xt.empty);n.push(s?e.slice(o,o+s):Xt.empty)}o+=s}return new Di(t,n)}compose(e){return this.empty?e:e.empty?this:Tm(this,e,!0)}map(e,t=!1){return e.empty?this:Vh(this,e,t,!0)}iterChanges(e,t=!1){Gh(this,e,t)}get desc(){return Kn.create(this.sections)}filter(e){let t=[],n=[],r=[],o=new la(this);e:for(let s=0,a=0;;){let l=s==e.length?1e9:e[s++];for(;a<l||a==l&&o.len==0;){if(o.done)break e;let c=Math.min(o.len,l-a);Wi(r,c,-1);let p=o.ins==-1?-1:o.off==0?o.ins:0;Wi(t,c,p),p>0&&Er(n,t,o.text),o.forward(c),a+=c}let h=e[s++];for(;a<h;){if(o.done)break e;let c=Math.min(o.len,h-a);Wi(t,c,-1),Wi(r,c,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(c),a+=c}}return{changes:new Di(t,n),filtered:Kn.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):r==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],o=[],s=0,a=null;function l(c=!1){if(!c&&!r.length)return;s<t&&Wi(r,t-s,-1);let p=new Di(r,o);a=a?a.compose(p.map(a)):p,r=[],o=[],s=0}function h(c){if(Array.isArray(c))for(let p of c)h(p);else if(c instanceof Di){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:p,to:d=p,insert:v}=c;if(p>d||p<0||d>t)throw new RangeError(`Invalid change range ${p} to ${d} (in doc of length ${t})`);let D=v?typeof v=="string"?Xt.of(v.split(n||jh)):v:Xt.empty,m=D.length;if(p==d&&m==0)return;p<s&&l(),p>s&&Wi(r,p-s,-1),Wi(r,d-p,m),Er(o,r,D),s=d}}return h(e),l(!a),a}static empty(e){return new Di(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;n.length<r;)n.push(Xt.empty);n[r]=Xt.of(o.slice(1)),t.push(o[0],n[r].length)}}}return new Di(t,n)}static createSet(e,t){return new Di(e,t)}}function Wi(i,e,t,n=!1){if(e==0&&t<=0)return;let r=i.length-2;r>=0&&t<=0&&t==i[r+1]?i[r]+=e:e==0&&i[r]==0?i[r+1]+=t:n?(i[r]+=e,i[r+1]+=t):i.push(e,t)}function Er(i,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<i.length)i[i.length-1]=i[i.length-1].append(t);else{for(;i.length<n;)i.push(Xt.empty);i.push(t)}}function Gh(i,e,t){let n=i.inserted;for(let r=0,o=0,s=0;s<i.sections.length;){let a=i.sections[s++],l=i.sections[s++];if(l<0)r+=a,o+=a;else{let h=r,c=o,p=Xt.empty;for(;h+=a,c+=l,l&&n&&(p=p.append(n[s-2>>1])),!(t||s==i.sections.length||i.sections[s+1]<0);)a=i.sections[s++],l=i.sections[s++];e(r,h,o,c,p),r=h,o=c}}}function Vh(i,e,t,n=!1){let r=[],o=n?[]:null,s=new la(i),a=new la(e);for(let l=-1;;)if(s.ins==-1&&a.ins==-1){let h=Math.min(s.len,a.len);Wi(r,h,-1),s.forward(h),a.forward(h)}else if(a.ins>=0&&(s.ins<0||l==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let h=a.len;for(Wi(r,a.ins,-1);h;){let c=Math.min(s.len,h);s.ins>=0&&l<s.i&&s.len<=c&&(Wi(r,0,s.ins),o&&Er(o,r,s.text),l=s.i),s.forward(c),h-=c}a.next()}else if(s.ins>=0){let h=0,c=s.len;for(;c;)if(a.ins==-1){let p=Math.min(c,a.len);h+=p,c-=p,a.forward(p)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;Wi(r,h,l<s.i?s.ins:0),o&&l<s.i&&Er(o,r,s.text),l=s.i,s.forward(s.len-c)}else{if(s.done&&a.done)return o?Di.createSet(r,o):Kn.create(r);throw new Error("Mismatched change set lengths")}}function Tm(i,e,t=!1){let n=[],r=t?[]:null,o=new la(i),s=new la(e);for(let a=!1;;){if(o.done&&s.done)return r?Di.createSet(n,r):Kn.create(n);if(o.ins==0)Wi(n,o.len,0,a),o.next();else if(s.len==0&&!s.done)Wi(n,0,s.ins,a),r&&Er(r,n,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let l=Math.min(o.len2,s.len),h=n.length;if(o.ins==-1){let c=s.ins==-1?-1:s.off?0:s.ins;Wi(n,l,c,a),r&&c&&Er(r,n,s.text)}else s.ins==-1?(Wi(n,o.off?0:o.len,l,a),r&&Er(r,n,o.textBit(l))):(Wi(n,o.off?0:o.len,s.off?0:s.ins,a),r&&!s.off&&Er(r,n,s.text));a=(o.ins>l||s.ins>=0&&s.len>l)&&(a||n.length>h),o.forward2(l),s.forward(l)}}}}class la{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Xt.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Xt.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class us{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new us(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Ee.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Ee.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ee.range(e.anchor,e.head)}static create(e,t,n){return new us(e,t,n)}}class Ee{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Ee.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ee([this.main],0)}addRange(e,t=!0){return Ee.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,Ee.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ee(e.ranges.map(t=>us.fromJSON(t)),e.main)}static single(e,t=e){return new Ee([Ee.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=n:o.from<n)return Ee.normalized(e.slice(),t);n=o.to}return new Ee(e,t)}static cursor(e,t=0,n,r){return us.create(e,e,(t==0?0:t<0?4:8)|(n==null?3:Math.min(2,n))|(r??33554431)<<5)}static range(e,t,n,r){let o=(n??33554431)<<5|(r==null?3:Math.min(2,r));return t<e?us.create(t,e,24|o):us.create(e,t,(t>e?4:0)|o)}static normalized(e,t=0){let n=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(n);for(let r=1;r<e.length;r++){let o=e[r],s=e[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,l=Math.max(o.to,s.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?Ee.range(l,a):Ee.range(a,l))}}return new Ee(e,t)}}function Im(i,e){for(let t of i.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let jc=0;class ot{constructor(e,t,n,r,o){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=jc++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}static define(e={}){return new ot(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:Gc),!!e.static,e.enables)}of(e){return new Dl([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Dl(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Dl(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function Gc(i,e){return i==e||i.length==e.length&&i.every((t,n)=>t===e[n])}class Dl{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=jc++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,l=!1,h=!1,c=[];for(let p of this.dependencies)p=="doc"?l=!0:p=="selection"?h=!0:((t=e[p.id])!==null&&t!==void 0?t:1)&1||c.push(e[p.id]);return{create(p){return p.values[s]=n(p),1},update(p,d){if(l&&d.docChanged||h&&(d.docChanged||d.selection)||qh(p,c)){let v=n(p);if(a?!Td(v,p.values[s],r):!r(v,p.values[s]))return p.values[s]=v,1}return 0},reconfigure:(p,d)=>{let v,D=d.config.address[o];if(D!=null){let m=Ql(d,D);if(this.dependencies.every(y=>y instanceof ot?d.facet(y)===p.facet(y):y instanceof Si?d.field(y,!1)==p.field(y,!1):!0)||(a?Td(v=n(p),m,r):r(v=n(p),m)))return p.values[s]=m,0}else v=n(p);return p.values[s]=v,1}}}}function Td(i,e,t){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!t(i[n],e[n]))return!1;return!0}function qh(i,e){let t=!1;for(let n of e)Jo(i,n)&1&&(t=!0);return t}function uD(i,e,t){let n=t.map(l=>i[l.id]),r=t.map(l=>l.type),o=n.filter(l=>!(l&1)),s=i[e.id]>>1;function a(l){let h=[];for(let c=0;c<n.length;c++){let p=Ql(l,n[c]);if(r[c]==2)for(let d of p)h.push(d);else h.push(p)}return e.combine(h)}return{create(l){for(let h of n)Jo(l,h);return l.values[s]=a(l),1},update(l,h){if(!qh(l,o))return 0;let c=a(l);return e.compare(c,l.values[s])?0:(l.values[s]=c,1)},reconfigure(l,h){let c=qh(l,n),p=h.config.facets[e.id],d=h.facet(e);if(p&&!c&&Gc(t,p))return l.values[s]=d,0;let v=a(l);return e.compare(v,d)?(l.values[s]=d,0):(l.values[s]=v,1)}}}const Id=ot.define({static:!0});class Si{constructor(e,t,n,r,o){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new Si(jc++,e.create,e.update,e.compare||((n,r)=>n===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Id).find(n=>n.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,r)=>{let o=n.values[t],s=this.updateF(o,r);return this.compareF(o,s)?0:(n.values[t]=s,1)},reconfigure:(n,r)=>r.config.address[this.id]!=null?(n.values[t]=r.field(this),0):(n.values[t]=this.create(n),1)}}init(e){return[this,Id.of({field:this,create:e})]}get extension(){return this}}const as={lowest:4,low:3,default:2,high:1,highest:0};function Qo(i){return e=>new Fm(e,i)}const Zr={highest:Qo(as.highest),high:Qo(as.high),default:Qo(as.default),low:Qo(as.low),lowest:Qo(as.lowest)};class Fm{constructor(e,t){this.inner=e,this.prec=t}}class Lu{of(e){return new Hh(this,e)}reconfigure(e){return Lu.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Hh{constructor(e,t){this.compartment=e,this.inner=t}}class Fl{constructor(e,t,n,r,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],o=Object.create(null),s=new Map;for(let d of hD(e,t,s))d instanceof Si?r.push(d):(o[d.facet.id]||(o[d.facet.id]=[])).push(d);let a=Object.create(null),l=[],h=[];for(let d of r)a[d.id]=h.length<<1,h.push(v=>d.slot(v));let c=n==null?void 0:n.config.facets;for(let d in o){let v=o[d],D=v[0].facet,m=c&&c[d]||[];if(v.every(y=>y.type==0))if(a[D.id]=l.length<<1|1,Gc(m,v))l.push(n.facet(D));else{let y=D.combine(v.map(x=>x.value));l.push(n&&D.compare(y,n.facet(D))?n.facet(D):y)}else{for(let y of v)y.type==0?(a[y.id]=l.length<<1|1,l.push(y.value)):(a[y.id]=h.length<<1,h.push(x=>y.dynamicSlot(x)));a[D.id]=h.length<<1,h.push(y=>uD(y,D,v))}}let p=h.map(d=>d(a));return new Fl(e,s,p,a,l,o)}}function hD(i,e,t){let n=[[],[],[],[],[]],r=new Map;function o(s,a){let l=r.get(s);if(l!=null){if(l<=a)return;let h=n[l].indexOf(s);h>-1&&n[l].splice(h,1),s instanceof Hh&&t.delete(s.compartment)}if(r.set(s,a),Array.isArray(s))for(let h of s)o(h,a);else if(s instanceof Hh){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(s.compartment)||s.inner;t.set(s.compartment,h),o(h,a)}else if(s instanceof Fm)o(s.inner,s.prec);else if(s instanceof Si)n[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof Dl)n[a].push(s),s.facet.extensions&&o(s.facet.extensions,as.default);else{let h=s.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(h,a)}}return o(i,as.default),n.reduce((s,a)=>s.concat(a))}function Jo(i,e){if(e&1)return 2;let t=e>>1,n=i.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;i.status[t]=4;let r=i.computeSlot(i,i.config.dynamicSlots[t]);return i.status[t]=2|r}function Ql(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}const Qm=ot.define(),Mm=ot.define({combine:i=>i.some(e=>e),static:!0}),Bm=ot.define({combine:i=>i.length?i[0]:void 0,static:!0}),$m=ot.define(),Nm=ot.define(),Rm=ot.define(),Xm=ot.define({combine:i=>i.length?i[0]:!1});class Ur{constructor(e,t){this.type=e,this.value=t}static define(){return new cD}}class cD{of(e){return new Ur(this,e)}}class fD{constructor(e){this.map=e}of(e){return new bt(this,e)}}class bt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new bt(this.type,t)}is(e){return this.type==e}static define(e={}){return new fD(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let o=r.map(t);o&&n.push(o)}return n}}bt.reconfigure=bt.define();bt.appendConfig=bt.define();class bi{constructor(e,t,n,r,o,s){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,n&&Im(n,t.newLength),o.some(a=>a.type==bi.time)||(this.annotations=o.concat(bi.time.of(Date.now())))}static create(e,t,n,r,o,s){return new bi(e,t,n,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(bi.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}bi.time=Ur.define();bi.userEvent=Ur.define();bi.addToHistory=Ur.define();bi.remote=Ur.define();function dD(i,e){let t=[];for(let n=0,r=0;;){let o,s;if(n<i.length&&(r==e.length||e[r]>=i[n]))o=i[n++],s=i[n++];else if(r<e.length)o=e[r++],s=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function Wm(i,e,t){var n;let r,o,s;return t?(r=e.changes,o=Di.empty(e.changes.length),s=i.changes.compose(e.changes)):(r=e.changes.map(i.changes),o=i.changes.mapDesc(e.changes,!0),s=i.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):(n=i.selection)===null||n===void 0?void 0:n.map(r),effects:bt.mapEffects(i.effects,r).concat(bt.mapEffects(e.effects,o)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function Jh(i,e,t){let n=e.selection,r=Hs(e.annotations);return e.userEvent&&(r=r.concat(bi.userEvent.of(e.userEvent))),{changes:e.changes instanceof Di?e.changes:Di.of(e.changes||[],t,i.facet(Bm)),selection:n&&(n instanceof Ee?n:Ee.single(n.anchor,n.head)),effects:Hs(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Ym(i,e,t){let n=Jh(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;n=Wm(n,Jh(i,e[o],s?n.changes.newLength:i.doc.length),s)}let r=bi.create(i,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return mD(t?pD(r):r)}function pD(i){let e=i.startState,t=!0;for(let r of e.facet($m)){let o=r(i);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:dD(t,o))}if(t!==!0){let r,o;if(t===!1)o=i.changes.invertedDesc,r=Di.empty(e.doc.length);else{let s=i.changes.filter(t);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}i=bi.create(e,r,i.selection&&i.selection.map(o),bt.mapEffects(i.effects,o),i.annotations,i.scrollIntoView)}let n=e.facet(Nm);for(let r=n.length-1;r>=0;r--){let o=n[r](i);o instanceof bi?i=o:Array.isArray(o)&&o.length==1&&o[0]instanceof bi?i=o[0]:i=Ym(e,Hs(o),!1)}return i}function mD(i){let e=i.startState,t=e.facet(Rm),n=i;for(let r=t.length-1;r>=0;r--){let o=t[r](i);o&&Object.keys(o).length&&(n=Wm(n,Jh(e,o,i.changes.newLength),!0))}return n==i?i:bi.create(e,i.changes,i.selection,n.effects,n.annotations,n.scrollIntoView)}const gD=[];function Hs(i){return i==null?gD:Array.isArray(i)?i:[i]}var ri=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(ri||(ri={}));const vD=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Kh;try{Kh=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function yD(i){if(Kh)return Kh.test(i);for(let e=0;e<i.length;e++){let t=i[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||vD.test(t)))return!0}return!1}function OD(i){return e=>{if(!/\S/.test(e))return ri.Space;if(yD(e))return ri.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return ri.Word;return ri.Other}}class $t{constructor(e,t,n,r,o,s){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Jo(this,a<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return Jo(this,n),Ql(this,n)}update(...e){return Ym(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:r}=t;for(let s of e.effects)s.is(Lu.reconfigure)?(t&&(r=new Map,t.compartments.forEach((a,l)=>r.set(l,a)),t=null),r.set(s.value.compartment,s.value.extension)):s.is(bt.reconfigure)?(t=null,n=s.value):s.is(bt.appendConfig)&&(t=null,n=Hs(n).concat(s.value));let o;t?o=e.startState.values.slice():(t=Fl.resolve(n,r,this),o=new $t(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new $t(t,e.newDoc,e.newSelection,o,(s,a)=>a.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Ee.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),o=[n.range],s=Hs(n.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),h=this.changes(l.changes),c=h.map(r);for(let d=0;d<a;d++)o[d]=o[d].map(c);let p=r.mapDesc(h,!0);o.push(l.range.map(p)),r=r.compose(c),s=bt.mapEffects(s,c).concat(bt.mapEffects(Hs(l.effects),p))}return{changes:r,selection:Ee.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof Di?e:Di.of(e,this.doc.length,this.facet($t.lineSeparator))}toText(e){return Xt.of(e.split(this.facet($t.lineSeparator)||jh))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Jo(this,t),Ql(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof Si&&this.config.address[r.id]!=null&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n){for(let o in n)if(Object.prototype.hasOwnProperty.call(e,o)){let s=n[o],a=e[o];r.push(s.init(l=>s.spec.fromJSON(a,l)))}}return $t.create({doc:e.doc,selection:Ee.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Fl.resolve(e.extensions||[],new Map),n=e.doc instanceof Xt?e.doc:Xt.of((e.doc||"").split(t.staticFacet($t.lineSeparator)||jh)),r=e.selection?e.selection instanceof Ee?e.selection:Ee.single(e.selection.anchor,e.selection.head):Ee.single(0);return Im(r,n.length),t.staticFacet(Mm)||(r=r.asSingle()),new $t(t,n,r,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet($t.tabSize)}get lineBreak(){return this.facet($t.lineSeparator)||`
`}get readOnly(){return this.facet(Xm)}phrase(e,...t){for(let n of this.facet($t.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?n:t[o-1]})),e}languageDataAt(e,t,n=-1){let r=[];for(let o of this.facet(Qm))for(let s of o(this,t,n))Object.prototype.hasOwnProperty.call(s,e)&&r.push(s[e]);return r}charCategorizer(e){return OD(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-n,a=e-n;for(;s>0;){let l=Ui(t,s,!1);if(o(t.slice(l,s))!=ri.Word)break;s=l}for(;a<r;){let l=Ui(t,a);if(o(t.slice(a,l))!=ri.Word)break;a=l}return s==a?null:Ee.range(s+n,a+n)}}$t.allowMultipleSelections=Mm;$t.tabSize=ot.define({combine:i=>i.length?i[0]:4});$t.lineSeparator=Bm;$t.readOnly=Xm;$t.phrases=ot.define({compare(i,e){let t=Object.keys(i),n=Object.keys(e);return t.length==n.length&&t.every(r=>i[r]==e[r])}});$t.languageData=Qm;$t.changeFilter=$m;$t.transactionFilter=Nm;$t.transactionExtender=Rm;Lu.reconfigure=bt.define();function ir(i,e,t={}){let n={};for(let r of i)for(let o of Object.keys(r)){let s=r[o],a=n[o];if(a===void 0)n[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))n[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let r in e)n[r]===void 0&&(n[r]=e[r]);return n}class vs{eq(e){return this==e}range(e,t=e){return Ml.create(e,t,this)}}vs.prototype.startSide=vs.prototype.endSide=0;vs.prototype.point=!1;vs.prototype.mapMode=Ci.TrackDel;let Ml=class{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new Ml(e,t,n)}};function ec(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}class Vc{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let o=n?this.to:this.from;for(let s=r,a=o.length;;){if(s==a)return s;let l=s+a>>1,h=o[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-t;if(l==s)return h>=0?s:a;h>=0?a=l:s=l+1}}between(e,t,n,r){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(n,1e9,!1,o);o<s;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let n=[],r=[],o=[],s=-1,a=-1;for(let l=0;l<this.value.length;l++){let h=this.value[l],c=this.from[l]+e,p=this.to[l]+e,d,v;if(c==p){let D=t.mapPos(c,h.startSide,h.mapMode);if(D==null||(d=v=D,h.startSide!=h.endSide&&(v=t.mapPos(c,h.endSide),v<d)))continue}else if(d=t.mapPos(c,h.startSide),v=t.mapPos(p,h.endSide),d>v||d==v&&h.startSide>0&&h.endSide<=0)continue;(v-d||h.endSide-h.startSide)<0||(s<0&&(s=d),h.point&&(a=Math.max(a,v-d)),n.push(h),r.push(d-s),o.push(v-s))}return{mapped:n.length?new Vc(r,o,n,a):null,pos:s}}}class Ut{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new Ut(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(n&&(t=t.slice().sort(ec)),this.isEmpty)return t.length?Ut.of(t):this;let a=new Zm(this,null,-1).goto(0),l=0,h=[],c=new er;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let p=t[l++];c.addInner(p.from,p.to,p.value)||h.push(p)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!s||r>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||r>a.to||o<a.from||s(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||h.push(Ml.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!h.length?Ut.empty:this.nextLayer.update({add:h,filter:s,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],l=this.chunk[s],h=e.touchesRange(a,a+l.length);if(h===!1)r=Math.max(r,l.maxPoint),t.push(l),n.push(e.mapPos(a));else if(h===!0){let{mapped:c,pos:p}=l.map(a,e);c&&(r=Math.max(r,c.maxPoint),t.push(c),n.push(p))}}let o=this.nextLayer.map(e);return t.length==0?o:new Ut(n,t,o||Ut.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return ua.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return ua.from(e).goto(t)}static compare(e,t,n,r,o=-1){let s=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=o),a=t.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=o),l=Fd(s,a,n),h=new Mo(s,l,o),c=new Mo(a,l,o);n.iterGaps((p,d,v)=>Qd(h,p,c,d,v,r)),n.empty&&n.length==0&&Qd(h,0,c,0,0,r)}static eq(e,t,n=0,r){r==null&&(r=1e9-1);let o=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),s=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=Fd(o,s),l=new Mo(o,a,0).goto(n),h=new Mo(s,a,0).goto(n);for(;;){if(l.to!=h.to||!tc(l.active,h.active)||l.point&&(!h.point||!l.point.eq(h.point)))return!1;if(l.to>r)return!0;l.next(),h.next()}}static spans(e,t,n,r,o=-1){let s=new Mo(e,null,o).goto(t),a=t,l=s.openStart;for(;;){let h=Math.min(s.to,n);if(s.point){let c=s.activeForPoint(s.to),p=s.pointFrom<t?c.length+1:Math.min(c.length,l);r.point(a,h,s.point,c,p,s.pointRank),l=Math.min(s.openEnd(h),c.length)}else h>a&&(r.span(a,h,s.active,l),l=s.openEnd(h));if(s.to>n)return l+(s.point&&s.to>n?1:0);a=s.to,s.next()}}static of(e,t=!1){let n=new er;for(let r of e instanceof Ml?[e]:t?xD(e):e)n.add(r.from,r.to,r.value);return n.finish()}}Ut.empty=new Ut([],[],null,-1);function xD(i){if(i.length>1)for(let e=i[0],t=1;t<i.length;t++){let n=i[t];if(ec(e,n)>0)return i.slice().sort(ec);e=n}return i}Ut.empty.nextLayer=Ut.empty;class er{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Vc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new er)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Ut.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ut.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Fd(i,e,t){let n=new Map;for(let o of i)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&n.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=n.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!(t!=null&&t.touchesRange(a,a+o.chunk[s].length))&&r.add(o.chunk[s])}return r}class Zm{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ua{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=n&&r.push(new Zm(s,t,n,o));return r.length==1?r[0]:new ua(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)ch(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)ch(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),ch(this.heap,0)}}}function ch(i,e){for(let t=i[e];;){let n=(e<<1)+1;if(n>=i.length)break;let r=i[n];if(n+1<i.length&&r.compare(i[n+1])>=0&&(r=i[n+1],n++),t.compare(r)<0)break;i[n]=t,i[e]=r,e=n}}class Mo{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ua.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){za(this.active,e),za(this.activeTo,e),za(this.activeRank,e),this.minActive=Md(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=o;)t++;ja(this.active,t,n),ja(this.activeTo,t,r),ja(this.activeRank,t,o),e&&ja(e,t,this.cursor.from),this.minActive=Md(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&za(n,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let r=n.length-1;r>=0&&n[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function Qd(i,e,t,n,r,o){i.goto(e),t.goto(n);let s=n+r,a=n,l=n-e;for(;;){let h=i.to+l-t.to||i.endSide-t.endSide,c=h<0?i.to+l:t.to,p=Math.min(c,s);if(i.point||t.point?i.point&&t.point&&(i.point==t.point||i.point.eq(t.point))&&tc(i.activeForPoint(i.to+l),t.activeForPoint(t.to))||o.comparePoint(a,p,i.point,t.point):p>a&&!tc(i.active,t.active)&&o.compareRange(a,p,i.active,t.active),c>s)break;a=c,h<=0&&i.next(),h>=0&&t.next()}}function tc(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t]&&!i[t].eq(e[t]))return!1;return!0}function za(i,e){for(let t=e,n=i.length-1;t<n;t++)i[t]=i[t+1];i.pop()}function ja(i,e,t){for(let n=i.length-1;n>=e;n--)i[n+1]=i[n];i[e]=t}function Md(i,e){let t=-1,n=1e9;for(let r=0;r<e.length;r++)(e[r]-n||i[r].endSide-i[t].endSide)<0&&(t=r,n=e[r]);return t}function wa(i,e,t=i.length){let n=0;for(let r=0;r<t;)i.charCodeAt(r)==9?(n+=e-n%e,r++):(n++,r=Ui(i,r));return n}function ic(i,e,t,n){for(let r=0,o=0;;){if(o>=e)return r;if(r==i.length)break;o+=i.charCodeAt(r)==9?t-o%t:1,r=Ui(i,r)}return n===!0?-1:i.length}const nc="",Bd=typeof Symbol>"u"?"__"+nc:Symbol.for(nc),rc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),$d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Br{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,l,h){let c=[],p=/^@(\w+)\b/.exec(s[0]),d=p&&p[1]=="keyframes";if(p&&a==null)return l.push(s[0]+";");for(let v in a){let D=a[v];if(/&/.test(v))o(v.split(/,\s*/).map(m=>s.map(y=>m.replace(/&/,y))).reduce((m,y)=>m.concat(y)),D,l);else if(D&&typeof D=="object"){if(!p)throw new RangeError("The value of a property ("+v+") should be a primitive value.");o(r(v),D,c,d)}else D!=null&&c.push(v.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+D+";")}(c.length||d)&&l.push((n&&!p&&!h?s.map(n):s).join(", ")+" {"+c.join(" ")+"}")}for(let s in e)o(r(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=$d[Bd]||1;return $d[Bd]=e+1,nc+e.toString(36)}static mount(e,t,n){let r=e[rc],o=n&&n.nonce;r?o&&r.setNonce(o):r=new DD(e,o),r.mount(Array.isArray(t)?t:[t])}}let Nd=new Map;class DD{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let o=Nd.get(n);if(o)return e.adoptedStyleSheets=[o.sheet,...e.adoptedStyleSheets],e[rc]=o;this.sheet=new r.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Nd.set(n,this)}else{this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);let o=e.head||e;o.insertBefore(this.styleTag,o.firstChild)}this.modules=[],e[rc]=this}mount(e){let t=this.sheet,n=0,r=0;for(let o=0;o<e.length;o++){let s=e[o],a=this.modules.indexOf(s);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,s),t)for(let l=0;l<s.rules.length;l++)t.insertRule(s.rules[l],n++)}else{for(;r<a;)n+=this.modules[r++].rules.length;n+=s.rules.length,r++}}if(!t){let o="";for(let s=0;s<this.modules.length;s++)o+=this.modules[s].getRules()+`
`;this.styleTag.textContent=o}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var $r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},ha={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Rd=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),CD=typeof navigator<"u"&&/Apple Computer/.test(navigator.vendor),bD=typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent),Xd=typeof navigator<"u"&&/Mac/.test(navigator.platform),SD=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),wD=Rd&&(Xd||+Rd[1]<57)||bD&&Xd;for(var Fi=0;Fi<10;Fi++)$r[48+Fi]=$r[96+Fi]=String(Fi);for(var Fi=1;Fi<=24;Fi++)$r[Fi+111]="F"+Fi;for(var Fi=65;Fi<=90;Fi++)$r[Fi]=String.fromCharCode(Fi+32),ha[Fi]=String.fromCharCode(Fi);for(var fh in $r)ha.hasOwnProperty(fh)||(ha[fh]=$r[fh]);function PD(i){var e=wD&&(i.ctrlKey||i.altKey||i.metaKey)||(CD||SD)&&i.shiftKey&&i.key&&i.key.length==1,t=!e&&i.key||(i.shiftKey?ha:$r)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Bl(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function sc(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function LD(i){let e=i.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Cl(i,e){if(!e.anchorNode)return!1;try{return sc(i,e.anchorNode)}catch{return!1}}function ca(i){return i.nodeType==3?ys(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function $l(i,e,t,n){return t?Wd(i,e,t,n,-1)||Wd(i,e,t,n,1):!1}function Nl(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function Wd(i,e,t,n,r){for(;;){if(i==t&&e==n)return!0;if(e==(r<0?0:Nr(i))){if(i.nodeName=="DIV")return!1;let o=i.parentNode;if(!o||o.nodeType!=1)return!1;e=Nl(i)+(r<0?0:1),i=o}else if(i.nodeType==1){if(i=i.childNodes[e+(r<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=r<0?Nr(i):0}else return!1}}function Nr(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function qc(i,e){let t=e?i.left:i.right;return{left:t,right:t,top:i.top,bottom:i.bottom}}function kD(i){return{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function AD(i,e,t,n,r,o,s,a){let l=i.ownerDocument,h=l.defaultView||window;for(let c=i,p=!1;c&&!p;)if(c.nodeType==1){let d,v=c==l.body,D=1,m=1;if(v)d=kD(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(p=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let w=c.getBoundingClientRect();D=w.width/c.offsetWidth,m=w.height/c.offsetHeight,d={left:w.left,right:w.left+c.clientWidth*D,top:w.top,bottom:w.top+c.clientHeight*m}}let y=0,x=0;if(r=="nearest")e.top<d.top?(x=-(d.top-e.top+s),t>0&&e.bottom>d.bottom+x&&(x=e.bottom-d.bottom+x+s)):e.bottom>d.bottom&&(x=e.bottom-d.bottom+s,t<0&&e.top-x<d.top&&(x=-(d.top+x-e.top+s)));else{let w=e.bottom-e.top,_=d.bottom-d.top;x=(r=="center"&&w<=_?e.top+w/2-_/2:r=="start"||r=="center"&&t<0?e.top-s:e.bottom-_+s)-d.top}if(n=="nearest"?e.left<d.left?(y=-(d.left-e.left+o),t>0&&e.right>d.right+y&&(y=e.right-d.right+y+o)):e.right>d.right&&(y=e.right-d.right+o,t<0&&e.left<d.left+y&&(y=-(d.left+y-e.left+o))):y=(n=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:n=="start"==a?e.left-o:e.right-(d.right-d.left)+o)-d.left,y||x)if(v)h.scrollBy(y,x);else{let w=0,_=0;if(x){let I=c.scrollTop;c.scrollTop+=x/m,_=(c.scrollTop-I)*m}if(y){let I=c.scrollLeft;c.scrollLeft+=y/D,w=(c.scrollLeft-I)*D}e={left:e.left-w,top:e.top-_,right:e.right-w,bottom:e.bottom-_},w&&Math.abs(w-y)<1&&(n="nearest"),_&&Math.abs(_-x)<1&&(r="nearest")}if(v)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function ED(i){let e=i.ownerDocument;for(let t=i.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class _D{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?Nr(t):0),n,Math.min(e.focusOffset,n?Nr(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let $s=null;function Um(i){if(i.setActive)return i.setActive();if($s)return i.focus($s);let e=[];for(let t=i;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(i.focus($s==null?{get preventScroll(){return $s={preventScroll:!0},!0}}:void 0),!$s){$s=!1;for(let t=0;t<e.length;){let n=e[t++],r=e[t++],o=e[t++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=o&&(n.scrollLeft=o)}}}let Yd;function ys(i,e,t=e){let n=Yd||(Yd=document.createRange());return n.setEnd(i,t),n.setStart(i,e),n}function Js(i,e,t){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0},r=new KeyboardEvent("keydown",n);r.synthetic=!0,i.dispatchEvent(r);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,i.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function TD(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function zm(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function ID(i,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,Nr(t));;)if(n){if(t.nodeType!=1)return!1;let r=t.childNodes[n-1];r.contentEditable=="false"?n--:(t=r,n=Nr(t))}else{if(t==i)return!0;n=Nl(t),t=t.parentNode}}function jm(i){return i.scrollTop>Math.max(1,i.scrollHeight-i.clientHeight-4)}class Yi{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new Yi(e.parentNode,Nl(e),t)}static after(e,t){return new Yi(e.parentNode,Nl(e)+1,t)}}const Hc=[];class Kt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,r=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=r?r.nextSibling:n.firstChild)){let a=Kt.get(o);(!a||!a.parent&&a.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,t),s.flags&=-8}if(o=r?r.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&o!=s.dom&&(t.written=!0),s.dom.parentNode==n)for(;o&&o!=s.dom;)o=Zd(o);else n.insertBefore(s.dom,o);r=s.dom}for(o=r?r.nextSibling:n.firstChild,o&&t&&t.node==n&&(t.written=!0);o;)o=Zd(o)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=Nr(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?r=-1:r=1),e=o}r<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Kt.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,o=0;;r++){let s=this.children[r];if(s.dom==n)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,o=-1,s=-1,a=-1;for(let l=0,h=n,c=n;l<this.children.length;l++){let p=this.children[l],d=h+p.length;if(h<e&&d>t)return p.domBoundsAround(e,t,h);if(d>=e&&r==-1&&(r=l,o=h),h>t&&p.dom.parentNode==this.dom){s=l,a=c;break}c=d,h=d+p.breakAfter}return{from:o,to:a<0?n+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=Hc){this.markDirty();for(let r=e;r<t;r++){let o=this.children[r];o.parent==this&&o.destroy()}this.children.splice(e,t-e,...n);for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Gm(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,r,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}Kt.prototype.breakAfter=0;function Zd(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}class Gm{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Vm(i,e,t,n,r,o,s,a,l){let{children:h}=i,c=h.length?h[e]:null,p=o.length?o[o.length-1]:null,d=p?p.breakAfter:s;if(!(e==n&&c&&!s&&!d&&o.length<2&&c.merge(t,r,o.length?p:null,t==0,a,l))){if(n<h.length){let v=h[n];v&&r<v.length?(e==n&&(v=v.split(r),r=0),!d&&p&&v.merge(0,r,p,!0,0,l)?o[o.length-1]=v:(r&&v.merge(0,r,null,!1,0,l),o.push(v))):v!=null&&v.breakAfter&&(p?p.breakAfter=1:s=1),n++}for(c&&(c.breakAfter=s,t>0&&(!s&&o.length&&c.merge(t,c.length,o[0],!1,a,0)?c.breakAfter=o.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,a,0),e++));e<n&&o.length;)if(h[n-1].become(o[o.length-1]))n--,o.pop(),l=o.length?0:a;else if(h[e].become(o[0]))e++,o.shift(),a=o.length?0:l;else break;!o.length&&e&&n<h.length&&!h[e-1].breakAfter&&h[n].merge(0,0,h[e-1],!1,a,l)&&e--,(e<n||o.length)&&i.replaceChildren(e,n,o)}}function qm(i,e,t,n,r,o){let s=i.childCursor(),{i:a,off:l}=s.findPos(t,1),{i:h,off:c}=s.findPos(e,-1),p=e-t;for(let d of n)p+=d.length;i.length+=p,Vm(i,h,c,a,l,n,0,r,o)}let pn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},oc=typeof document<"u"?document:{documentElement:{style:{}}};const ac=/Edge\/(\d+)/.exec(pn.userAgent),Hm=/MSIE \d/.test(pn.userAgent),lc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pn.userAgent),ku=!!(Hm||lc||ac),Ud=!ku&&/gecko\/(\d+)/i.test(pn.userAgent),dh=!ku&&/Chrome\/(\d+)/.exec(pn.userAgent),zd="webkitFontSmoothing"in oc.documentElement.style,Jm=!ku&&/Apple Computer/.test(pn.vendor),jd=Jm&&(/Mobile\/\w+/.test(pn.userAgent)||pn.maxTouchPoints>2);var ht={mac:jd||/Mac/.test(pn.platform),windows:/Win/.test(pn.platform),linux:/Linux|X11/.test(pn.platform),ie:ku,ie_version:Hm?oc.documentMode||6:lc?+lc[1]:ac?+ac[1]:0,gecko:Ud,gecko_version:Ud?+(/Firefox\/(\d+)/.exec(pn.userAgent)||[0,0])[1]:0,chrome:!!dh,chrome_version:dh?+dh[1]:0,ios:jd,android:/Android\b/.test(pn.userAgent),webkit:zd,safari:Jm,webkit_version:zd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:oc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const FD=256;class cr extends Kt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof cr)||this.length-(t-e)+n.length>FD||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new cr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Yi(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return QD(this.dom,e,t)}}class fr extends Kt{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let r of t)r.setParent(this)}setAttrs(e){if(zm(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,r,o,s){return n&&(!(n instanceof fr&&n.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(qm(this,e,t,n?n.children:[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,o=0;for(let a of this.children){let l=n+a.length;l>e&&t.push(n<e?a.split(e-n):a),r<0&&n>=e&&(r=o),n=l,o++}let s=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new fr(this.mark,t,s)}domAtPos(e){return Km(this,e)}coordsAt(e,t){return tg(this,e,t)}}function QD(i,e,t){let n=i.nodeValue.length;e>n&&(e=n);let r=e,o=e,s=0;e==0&&t<0||e==n&&t>=0?ht.chrome||ht.gecko||(e?(r--,s=1):o<n&&(o++,s=-1)):t<0?r--:o<n&&o++;let a=ys(i,r,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:t>=0)?0:a.length-1];return ht.safari&&!s&&l.width==0&&(l=Array.prototype.find.call(a,h=>h.width)||l),s?qc(l,s<0):l||null}class _r extends Kt{static create(e,t,n){return new _r(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=_r.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,o,s){return n&&(!(n instanceof _r)||!this.widget.compare(n.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof _r&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Xt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):Xt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Yi.before(this.dom):Yi.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let s=this.side?this.side<0:e>0;for(let a=s?r.length-1:0;o=r[a],!(e>0?a==0:a==r.length-1||o.top<o.bottom);a+=s?-1:1);return qc(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class uo extends Kt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof uo&&e.side==this.side}split(){return new uo(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Yi.before(this.dom):Yi.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Xt.empty}get isHidden(){return!0}}cr.prototype.children=_r.prototype.children=uo.prototype.children=Hc;function Km(i,e){let t=i.dom,{children:n}=i,r=0;for(let o=0;r<n.length;r++){let s=n[r],a=o+s.length;if(!(a==o&&s.getSide()<=0)){if(e>o&&e<a&&s.dom.parentNode==t)return s.domAtPos(e-o);if(e<=o)break;o=a}}for(let o=r;o>0;o--){let s=n[o-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let o=r;o<n.length;o++){let s=n[o];if(s.dom.parentNode==t)return s.domAtPos(0)}return new Yi(t,0)}function eg(i,e,t){let n,{children:r}=i;t>0&&e instanceof fr&&r.length&&(n=r[r.length-1])instanceof fr&&n.mark.eq(e.mark)?eg(n,e.children[0],t-1):(r.push(e),e.setParent(i)),i.length+=e.length}function tg(i,e,t){let n=null,r=-1,o=null,s=-1;function a(h,c){for(let p=0,d=0;p<h.children.length&&d<=c;p++){let v=h.children[p],D=d+v.length;D>=c&&(v.children.length?a(v,c-d):(!o||o.isHidden&&t>0)&&(D>c||d==D&&v.getSide()>0)?(o=v,s=c-d):(d<c||d==D&&v.getSide()<0&&!v.isHidden)&&(n=v,r=c-d)),d=D}}a(i,e);let l=(t<0?n:o)||n||o;return l?l.coordsAt(Math.max(0,l==n?r:s),t):MD(i)}function MD(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let t=ca(e);return t[t.length-1]||null}function uc(i,e){for(let t in i)t=="class"&&e.class?e.class+=" "+i.class:t=="style"&&e.style?e.style+=";"+i.style:e[t]=i[t];return e}const Gd=Object.create(null);function Jc(i,e,t){if(i==e)return!0;i||(i=Gd),e||(e=Gd);let n=Object.keys(i),r=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let o of n)if(o!=t&&(r.indexOf(o)==-1||i[o]!==e[o]))return!1;return!0}function hc(i,e,t){let n=!1;if(e)for(let r in e)t&&r in t||(n=!0,r=="style"?i.style.cssText="":i.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(n=!0,r=="style"?i.style.cssText=t[r]:i.setAttribute(r,t[r]));return n}function BD(i){let e=Object.create(null);for(let t=0;t<i.attributes.length;t++){let n=i.attributes[t];e[n.name]=n.value}return e}class yi extends Kt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,o,s){if(n){if(!(n instanceof yi))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),qm(this,e,t,n?n.children:[],o,s),!0}split(e){let t=new yi;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let o=n;o<this.children.length;o++)t.append(this.children[o],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Jc(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){eg(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=uc(t,this.attrs||{})),n&&(this.attrs=uc({class:n},this.attrs||{}))}domAtPos(e){return Km(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(zm(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(hc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&Kt.get(r)instanceof fr;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((n=Kt.get(r))===null||n===void 0?void 0:n.isEditable)==!1&&(!ht.ios||!this.children.some(o=>o instanceof cr))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof cr)||/[^ -~]/.test(n.text))return null;let r=ca(n.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=tg(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:r}=this.parent.view.viewState,o=n.bottom-n.top;if(Math.abs(o-r.lineHeight)<2&&r.textHeight<o){let s=(o-r.textHeight)/2;return{top:n.top+s,bottom:n.bottom-s,left:n.left,right:n.left}}}return n}become(e){return!1}covers(){return!0}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let o=e.children[n],s=r+o.length;if(s>=t){if(o instanceof yi)return o;if(s>t)break}r=s+o.breakAfter}return null}}class ps extends Kt{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,o,s){return n&&(!(n instanceof ps)||!this.widget.compare(n.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Yi.before(this.dom):Yi.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new ps(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return Hc}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Xt.empty}domBoundsAround(){return null}become(e){return e instanceof ps&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class pr{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}destroy(e){}}var Ji=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(Ji||(Ji={}));class gt extends vs{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Pa(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Rr(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,r;if(e.isBlockGap)n=-5e8,r=4e8;else{let{start:o,end:s}=ig(e,t);n=(o?t?-3e8:-1:5e8)-1,r=(s?t?2e8:1:-6e8)+1}return new Rr(e,n,r,t,e.widget||null,!0)}static line(e){return new La(e)}static set(e,t=!1){return Ut.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}gt.none=Ut.empty;class Pa extends gt{constructor(e){let{start:t,end:n}=ig(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof Pa&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&Jc(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Pa.prototype.point=!1;class La extends gt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof La&&this.spec.class==e.spec.class&&Jc(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}La.prototype.mapMode=Ci.TrackBefore;La.prototype.point=!0;class Rr extends gt{constructor(e,t,n,r,o,s){super(t,n,o,e),this.block=r,this.isReplace=s,this.mapMode=r?t<=0?Ci.TrackBefore:Ci.TrackAfter:Ci.TrackDel}get type(){return this.startSide!=this.endSide?Ji.WidgetRange:this.startSide<=0?Ji.WidgetBefore:Ji.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Rr&&$D(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Rr.prototype.point=!0;function ig(i,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=i;return t==null&&(t=i.inclusive),n==null&&(n=i.inclusive),{start:t??e,end:n??e}}function $D(i,e){return i==e||!!(i&&e&&i.compare(e))}function cc(i,e,t,n=0){let r=t.length-1;r>=0&&t[r]+n>=i?t[r]=Math.max(t[r],e):t.push(i,e)}class Ko{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ps&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new yi),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ga(new uo(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!e&&!this.posCovered()&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(Ga(new cr(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,o,s){if(this.disallowBlockEffectsFor[s]&&n instanceof Rr){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(n instanceof Rr)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ps(n.widget||new Vd("div"),a,n));else{let l=_r.create(n.widget||new Vd("span"),a,a?0:n.startSide),h=this.atCursorPos&&!l.isEditable&&o<=r.length&&(e<t||n.startSide>0),c=!l.isEditable&&(e<t||o>r.length||n.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!h&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),h&&(p.append(Ga(new uo(1),r),o),o=r.length+Math.max(0,o-r.length)),p.append(Ga(l,r),o),this.atCursorPos=c,this.pendingBuffer=c?e<t||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,n,r,o){let s=new Ko(e,t,n,o);return s.openEnd=Ut.spans(r,t,n,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function Ga(i,e){for(let t of e)i=new fr(t,[i],i.length);return i}class Vd extends pr{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const ng=ot.define(),rg=ot.define(),sg=ot.define(),og=ot.define(),fc=ot.define(),ag=ot.define(),lg=ot.define(),ug=ot.define({combine:i=>i.some(e=>e)}),hg=ot.define({combine:i=>i.some(e=>e)});class Rl{constructor(e,t="nearest",n="nearest",r=5,o=5){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=o}map(e){return e.empty?this:new Rl(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const qd=bt.define({map:(i,e)=>i.map(e)});function Sn(i,e,t){let n=i.facet(og);n.length?n[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Au=ot.define({combine:i=>i.length?i[0]:!0});let ND=0;const Zo=ot.define();class si{constructor(e,t,n,r,o){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=r,this.extension=o(this)}static define(e,t){const{eventHandlers:n,eventObservers:r,provide:o,decorations:s}=t||{};return new si(ND++,e,n,r,a=>{let l=[Zo.of(a)];return s&&l.push(fa.of(h=>{let c=h.plugin(a);return c?s(c):gt.none})),o&&l.push(o(a)),l})}static fromClass(e,t){return si.define(n=>new e(n),t)}}class ph{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Sn(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Sn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){Sn(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const cg=ot.define(),Kc=ot.define(),fa=ot.define(),ef=ot.define(),fg=ot.define();function Hd(i,e,t){let n=i.state.facet(fg);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(i):s),o=[];return Ut.spans(r,e,t,{point(){},span(s,a,l,h){let c=o;for(let p=l.length-1;p>=0;p--,h--){let d=l[p].spec.bidiIsolate,v;if(d!=null)if(h>0&&c.length&&(v=c[c.length-1]).to==s&&v.direction==d)v.to=a,c=v.inner;else{let D={from:s,to:a,direction:d,inner:[]};c.push(D),c=D.inner}}}}),o}const dg=ot.define();function pg(i){let e=0,t=0,n=0,r=0;for(let o of i.state.facet(dg)){let s=o(i);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(n=Math.max(n,s.top)),s.bottom!=null&&(r=Math.max(r,s.bottom)))}return{left:e,right:t,top:n,bottom:r}}const Uo=ot.define();class wn{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new wn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let r=0,o=0,s=0,a=0;;r++){let l=r==e.length?null:e[r],h=s-a,c=l?l.fromB:1e9;for(;o<t.length&&t[o]<c;){let p=t[o],d=t[o+1],v=Math.max(a,p),D=Math.min(c,d);if(v<=D&&new wn(v+h,D+h,v,D).addToSet(n),d>c)break;o+=2}if(!l)return n;new wn(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),s=l.toA,a=l.toB}}}class Xl{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Di.empty(this.startState.doc.length);for(let o of n)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,s,a,l)=>r.push(new wn(o,s,a,l))),this.changedRanges=r}static create(e,t,n){return new Xl(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var ii=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(ii||(ii={}));const da=ii.LTR,mg=ii.RTL;function gg(i){let e=[];for(let t=0;t<i.length;t++)e.push(1<<+i[t]);return e}const RD=gg("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),XD=gg("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),dc=Object.create(null),Wn=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),t=i.charCodeAt(1);dc[e]=t,dc[t]=-e}function WD(i){return i<=247?RD[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?XD[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8203?256:64336<=i&&i<=65023?4:i==8204?256:1}const YD=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Tr{get dir(){return this.level%2?mg:da}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==n)return s;(o<0||(r!=0?r<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}function vg(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++){let n=i[t],r=e[t];if(n.from!=r.from||n.to!=r.to||n.direction!=r.direction||!vg(n.inner,r.inner))return!1}return!0}const jt=[];function ZD(i,e,t,n,r){for(let o=0;o<=n.length;o++){let s=o?n[o-1].to:e,a=o<n.length?n[o].from:t,l=o?256:r;for(let h=s,c=l,p=l;h<a;h++){let d=WD(i.charCodeAt(h));d==512?d=c:d==8&&p==4&&(d=16),jt[h]=d==4?2:d,d&7&&(p=d),c=d}for(let h=s,c=l,p=l;h<a;h++){let d=jt[h];if(d==128)h<a-1&&c==jt[h+1]&&c&24?d=jt[h]=c:jt[h]=256;else if(d==64){let v=h+1;for(;v<a&&jt[v]==64;)v++;let D=h&&c==8||v<t&&jt[v]==8?p==1?1:8:256;for(let m=h;m<v;m++)jt[m]=D;h=v-1}else d==8&&p==1&&(jt[h]=1);c=d,d&7&&(p=d)}}}function UD(i,e,t,n,r){let o=r==1?2:1;for(let s=0,a=0,l=0;s<=n.length;s++){let h=s?n[s-1].to:e,c=s<n.length?n[s].from:t;for(let p=h,d,v,D;p<c;p++)if(v=dc[d=i.charCodeAt(p)])if(v<0){for(let m=a-3;m>=0;m-=3)if(Wn[m+1]==-v){let y=Wn[m+2],x=y&2?r:y&4?y&1?o:r:0;x&&(jt[p]=jt[Wn[m]]=x),a=m;break}}else{if(Wn.length==189)break;Wn[a++]=p,Wn[a++]=d,Wn[a++]=l}else if((D=jt[p])==2||D==1){let m=D==r;l=m?0:1;for(let y=a-3;y>=0;y-=3){let x=Wn[y+2];if(x&2)break;if(m)Wn[y+2]|=2;else{if(x&4)break;Wn[y+2]|=4}}}}}function zD(i,e,t,n){for(let r=0,o=n;r<=t.length;r++){let s=r?t[r-1].to:i,a=r<t.length?t[r].from:e;for(let l=s;l<a;){let h=jt[l];if(h==256){let c=l+1;for(;;)if(c==a){if(r==t.length)break;c=t[r++].to,a=r<t.length?t[r].from:e}else if(jt[c]==256)c++;else break;let p=o==1,d=(c<e?jt[c]:n)==1,v=p==d?p?1:2:n;for(let D=c,m=r,y=m?t[m-1].to:i;D>l;)D==y&&(D=t[--m].from,y=m?t[m-1].to:i),jt[--D]=v;l=c}else o=h,l++}}}function pc(i,e,t,n,r,o,s){let a=n%2?2:1;if(n%2==r%2)for(let l=e,h=0;l<t;){let c=!0,p=!1;if(h==o.length||l<o[h].from){let m=jt[l];m!=a&&(c=!1,p=m==16)}let d=!c&&a==1?[]:null,v=c?n:n+1,D=l;e:for(;;)if(h<o.length&&D==o[h].from){if(p)break e;let m=o[h];if(!c)for(let y=m.to,x=h+1;;){if(y==t)break e;if(x<o.length&&o[x].from==y)y=o[x++].to;else{if(jt[y]==a)break e;break}}if(h++,d)d.push(m);else{m.from>l&&s.push(new Tr(l,m.from,v));let y=m.direction==da!=!(v%2);mc(i,y?n+1:n,r,m.inner,m.from,m.to,s),l=m.to}D=m.to}else{if(D==t||(c?jt[D]!=a:jt[D]==a))break;D++}d?pc(i,l,D,n+1,r,d,s):l<D&&s.push(new Tr(l,D,v)),l=D}else for(let l=t,h=o.length;l>e;){let c=!0,p=!1;if(!h||l>o[h-1].to){let m=jt[l-1];m!=a&&(c=!1,p=m==16)}let d=!c&&a==1?[]:null,v=c?n:n+1,D=l;e:for(;;)if(h&&D==o[h-1].to){if(p)break e;let m=o[--h];if(!c)for(let y=m.from,x=h;;){if(y==e)break e;if(x&&o[x-1].to==y)y=o[--x].from;else{if(jt[y-1]==a)break e;break}}if(d)d.push(m);else{m.to<l&&s.push(new Tr(m.to,l,v));let y=m.direction==da!=!(v%2);mc(i,y?n+1:n,r,m.inner,m.from,m.to,s),l=m.from}D=m.from}else{if(D==e||(c?jt[D-1]!=a:jt[D-1]==a))break;D--}d?pc(i,D,l,n+1,r,d,s):D<l&&s.push(new Tr(D,l,v)),l=D}}function mc(i,e,t,n,r,o,s){let a=e%2?2:1;ZD(i,r,o,n,a),UD(i,r,o,n,a),zD(r,o,n,a),pc(i,r,o,e,t,n,s)}function jD(i,e,t){if(!i)return[new Tr(0,0,e==mg?1:0)];if(e==da&&!t.length&&!YD.test(i))return yg(i.length);if(t.length)for(;i.length>jt.length;)jt[jt.length]=256;let n=[],r=e==da?0:1;return mc(i,r,r,t,0,i.length,n),n}function yg(i){return[new Tr(0,i,0)]}let Og="";function GD(i,e,t,n,r){var o;let s=n.head-i.from,a=-1;if(s==0){if(!r||!i.length)return null;e[0].level!=t&&(s=e[0].side(!1,t),a=0)}else if(s==i.length){if(r)return null;let d=e[e.length-1];d.level!=t&&(s=d.side(!0,t),a=e.length-1)}a<0&&(a=Tr.find(e,s,(o=n.bidiLevel)!==null&&o!==void 0?o:-1,n.assoc));let l=e[a];s==l.side(r,t)&&(l=e[a+=r?1:-1],s=l.side(!r,t));let h=r==(l.dir==t),c=Ui(i.text,s,h);if(Og=i.text.slice(Math.min(s,c),Math.max(s,c)),c!=l.side(r,t))return Ee.cursor(c+i.from,h?-1:1,l.level);let p=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return!p&&l.level!=t?Ee.cursor(r?i.to:i.from,r?-1:1,t):p&&p.level<l.level?Ee.cursor(p.side(!r,t)+i.from,r?1:-1,p.level):Ee.cursor(c+i.from,r?-1:1,l.level)}class Jd extends Kt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new yi],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new wn(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:h,toA:c})=>c<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let r=-1;this.view.inputState.composing>=0&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!tC(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let o=r>-1?qD(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:c}=this.hasComposition;n=new wn(h,c,e.changes.mapPos(h,-1),e.changes.mapPos(c,1)).addToSet(n.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(ht.ie||ht.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,a=this.updateDeco(),l=KD(s,a,e.changes);return n=wn.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=ht.chrome||ht.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof ps&&s.widget instanceof Kd&&o.push(s.dom);r.updateGaps(o)}updateChildren(e,t,n){let r=n?n.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let s=r.length-1;;s--){let a=s>=0?r[s]:null;if(!a)break;let{fromA:l,toA:h,fromB:c,toB:p}=a,d,v,D,m;if(n&&n.range.fromB<p&&n.range.toB>c){let I=Ko.build(this.view.state.doc,c,n.range.fromB,this.decorations,this.dynamicDecorationMap),N=Ko.build(this.view.state.doc,n.range.toB,p,this.decorations,this.dynamicDecorationMap);v=I.breakAtStart,D=I.openStart,m=N.openEnd;let Y=this.compositionView(n);N.breakAtStart?Y.breakAfter=1:N.content.length&&Y.merge(Y.length,Y.length,N.content[0],!1,N.openStart,0)&&(Y.breakAfter=N.content[0].breakAfter,N.content.shift()),I.content.length&&Y.merge(0,0,I.content[I.content.length-1],!0,0,I.openEnd)&&I.content.pop(),d=I.content.concat(Y).concat(N.content)}else({content:d,breakAtStart:v,openStart:D,openEnd:m}=Ko.build(this.view.state.doc,c,p,this.decorations,this.dynamicDecorationMap));let{i:y,off:x}=o.findPos(h,1),{i:w,off:_}=o.findPos(l,-1);Vm(this,w,_,y,x,d,v,D,m)}n&&this.fixCompositionDOM(n)}compositionView(e){let t=new cr(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new fr(r,[t],t.length);let n=new yi;return n.append(t,0),n}fixCompositionDOM(e){let t=(o,s)=>{s.flags|=8|(s.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(s);let a=Kt.get(o);a&&a!=s&&(a.dom=null),s.setDOM(o)},n=this.childPos(e.range.fromB,1),r=this.children[n.i];t(e.line,r);for(let o=e.marks.length-1;o>=-1;o--)n=r.childPos(n.off,1),r=r.children[n.i],t(o>=0?e.marks[o].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,r=n==this.dom,o=!r&&Cl(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(r||t||o))return;let s=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),h=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(ht.gecko&&a.empty&&!this.hasComposition&&VD(l)){let p=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(p,l.node.childNodes[l.offset]||null)),l=h=new Yi(p,0),s=!0}let c=this.view.observer.selectionRange;(s||!c.focusNode||!$l(l.node,l.offset,c.anchorNode,c.anchorOffset)||!$l(h.node,h.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{ht.android&&ht.chrome&&this.dom.contains(c.focusNode)&&eC(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=Bl(this.view.root);if(p)if(a.empty){if(ht.gecko){let d=HD(l.node,l.offset);if(d&&d!=3){let v=Dg(l.node,l.offset,d==1?1:-1);v&&(l=new Yi(v.node,v.offset))}}p.collapse(l.node,l.offset),a.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=a.bidiLevel)}else if(p.extend){p.collapse(l.node,l.offset);try{p.extend(h.node,h.offset)}catch{}}else{let d=document.createRange();a.anchor>a.head&&([l,h]=[h,l]),d.setEnd(h.node,h.offset),d.setStart(l.node,l.offset),p.removeAllRanges(),p.addRange(d)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,h)),this.impreciseAnchor=l.precise?null:new Yi(c.anchorNode,c.anchorOffset),this.impreciseHead=h.precise?null:new Yi(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=Bl(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let s=yi.find(this,t.head);if(!s)return;let a=s.posAtStart;if(t.head==a||t.head==a+s.length)return;let l=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!l||!h||l.bottom>h.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=t.from&&n.collapse(r,o)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let r=e.offset;!n&&r<t.childNodes.length;r++){let o=Kt.get(t.childNodes[r]);o instanceof yi&&(n=o.domAtPos(0))}for(let r=e.offset-1;!n&&r>=0;r--){let o=Kt.get(t.childNodes[r]);o instanceof yi&&(n=o.domAtPos(o.length))}return n?new Yi(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=Kt.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(n<r.length||r instanceof yi)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,r=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let a=this.children[s],l=o-a.breakAfter,h=l-a.length;if(l<e)break;h<=e&&(h<e||a.covers(-1))&&(l>e||a.covers(1))&&(!n||a instanceof yi&&!(n instanceof yi&&t>=0))&&(n=a,r=h),o=h}return n?n.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),r=this.children[t];if(!(r instanceof yi))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(n,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}n=l}if(!(r instanceof cr))return null;let o=Ui(r.text,n);if(o==n)return null;let s=ys(r.dom,n,o).getClientRects();return!s.length||s[0].top>=s[0].bottom?null:s[0]}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==ii.LTR;for(let h=0,c=0;c<this.children.length;c++){let p=this.children[c],d=h+p.length;if(d>r)break;if(h>=n){let v=p.dom.getBoundingClientRect();if(t.push(v.height),s){let D=p.dom.lastChild,m=D?ca(D):[];if(m.length){let y=m[m.length-1],x=l?y.right-v.left:v.right-y.left;x>a&&(a=x,this.minWidth=o,this.minWidthFrom=h,this.minWidthTo=d)}}}h=d+p.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?ii.RTL:ii.LTR}measureTextSize(){for(let o of this.children)if(o instanceof yi){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),t,n,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=ca(e.firstChild)[0];t=e.getBoundingClientRect().height,n=o?o.width/27:7,r=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Gm(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],s=o?o.from-1:this.length;if(s>n){let a=(t.lineBlockAt(s).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(gt.replace({widget:new Kd(a),block:!0,inclusive:!0,isBlockGap:!0}).range(n,s))}if(!o)break;n=o.to+1}return gt.set(e)}updateDeco(){let e=this.view.state.facet(fa).map((t,n)=>(this.dynamicDecorationMap[n]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!n)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,r.left),top:Math.min(n.top,r.top),right:Math.max(n.right,r.right),bottom:Math.max(n.bottom,r.bottom)});let o=pg(this.view),s={left:n.left-o.left,top:n.top-o.top,right:n.right+o.right,bottom:n.bottom+o.bottom};AD(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==ii.LTR)}}function VD(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}class Kd extends pr{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function xg(i,e){let t=i.observer.selectionRange,n=t.focusNode&&Dg(t.focusNode,t.focusOffset,0);if(!n)return null;let r=e-n.offset;return{from:r,to:r+n.node.nodeValue.length,node:n.node}}function qD(i,e,t){let n=xg(i,t);if(!n)return null;let{node:r,from:o,to:s}=n,a=r.nodeValue;if(/[\n\r]/.test(a)||i.state.doc.sliceString(n.from,n.to)!=a)return null;let l=e.invertedDesc,h=new wn(l.mapPos(o),l.mapPos(s),o,s),c=[];for(let p=r.parentNode;;p=p.parentNode){let d=Kt.get(p);if(d instanceof fr)c.push({node:p,deco:d.mark});else{if(d instanceof yi||p.nodeName=="DIV"&&p.parentNode==i.contentDOM)return{range:h,text:r,marks:c,line:p};if(p!=i.contentDOM)c.push({node:p,deco:new Pa({inclusive:!0,attributes:BD(p),tagName:p.tagName.toLowerCase()})});else return null}}}function Dg(i,e,t){if(t<=0)for(let n=i,r=e;;){if(n.nodeType==3)return{node:n,offset:r};if(n.nodeType==1&&r>0)n=n.childNodes[r-1],r=Nr(n);else break}if(t>=0)for(let n=i,r=e;;){if(n.nodeType==3)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length&&t>=0)n=n.childNodes[r],r=0;else break}return null}function HD(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}let JD=class{constructor(){this.changes=[]}compareRange(e,t){cc(e,t,this.changes)}comparePoint(e,t){cc(e,t,this.changes)}};function KD(i,e,t){let n=new JD;return Ut.compare(i,e,t,n),n.changes}function eC(i,e){for(let t=i;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function tC(i,e){let t=!1;return e&&i.iterChangedRanges((n,r)=>{n<e.to&&r>e.from&&(t=!0)}),t}function iC(i,e,t=1){let n=i.charCategorizer(e),r=i.doc.lineAt(e),o=e-r.from;if(r.length==0)return Ee.cursor(e);o==0?t=1:o==r.length&&(t=-1);let s=o,a=o;t<0?s=Ui(r.text,o,!1):a=Ui(r.text,o);let l=n(r.text.slice(s,a));for(;s>0;){let h=Ui(r.text,s,!1);if(n(r.text.slice(h,s))!=l)break;s=h}for(;a<r.length;){let h=Ui(r.text,a);if(n(r.text.slice(a,h))!=l)break;a=h}return Ee.range(s+r.from,a+r.from)}function nC(i,e){return e.left>i?e.left-i:Math.max(0,i-e.right)}function rC(i,e){return e.top>i?e.top-i:Math.max(0,i-e.bottom)}function mh(i,e){return i.top<e.bottom-1&&i.bottom>e.top+1}function e0(i,e){return e<i.top?{top:e,left:i.left,right:i.right,bottom:i.bottom}:i}function t0(i,e){return e>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:e}:i}function gc(i,e,t){let n,r,o,s,a=!1,l,h,c,p;for(let D=i.firstChild;D;D=D.nextSibling){let m=ca(D);for(let y=0;y<m.length;y++){let x=m[y];r&&mh(r,x)&&(x=e0(t0(x,r.bottom),r.top));let w=nC(e,x),_=rC(t,x);if(w==0&&_==0)return D.nodeType==3?i0(D,e,t):gc(D,e,t);if(!n||s>_||s==_&&o>w){n=D,r=x,o=w,s=_;let I=_?t<x.top?-1:1:w?e<x.left?-1:1:0;a=!I||(I>0?y<m.length-1:y>0)}w==0?t>x.bottom&&(!c||c.bottom<x.bottom)?(l=D,c=x):t<x.top&&(!p||p.top>x.top)&&(h=D,p=x):c&&mh(c,x)?c=t0(c,x.bottom):p&&mh(p,x)&&(p=e0(p,x.top))}}if(c&&c.bottom>=t?(n=l,r=c):p&&p.top<=t&&(n=h,r=p),!n)return{node:i,offset:0};let d=Math.max(r.left,Math.min(r.right,e));if(n.nodeType==3)return i0(n,d,t);if(a&&n.contentEditable!="false")return gc(n,d,t);let v=Array.prototype.indexOf.call(i.childNodes,n)+(e>=(r.left+r.right)/2?1:0);return{node:i,offset:v}}function i0(i,e,t){let n=i.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<n;a++){let l=ys(i,a,a+1).getClientRects();for(let h=0;h<l.length;h++){let c=l[h];if(c.top==c.bottom)continue;s||(s=e-c.left);let p=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&p<o){let d=e>=(c.left+c.right)/2,v=d;if((ht.chrome||ht.gecko)&&ys(i,a).getBoundingClientRect().left==c.right&&(v=!d),p<=0)return{node:i,offset:a+(v?1:0)};r=a+(v?1:0),o=p}}}return{node:i,offset:r>-1?r:s>0?i.nodeValue.length:0}}function Cg(i,e,t,n=-1){var r,o;let s=i.contentDOM.getBoundingClientRect(),a=s.top+i.viewState.paddingTop,l,{docHeight:h}=i.viewState,{x:c,y:p}=e,d=p-a;if(d<0)return 0;if(d>h)return i.state.doc.length;for(let I=i.viewState.heightOracle.textHeight/2,N=!1;l=i.elementAtHeight(d),l.type!=Ji.Text;)for(;d=n>0?l.bottom+I:l.top-I,!(d>=0&&d<=h);){if(N)return t?null:0;N=!0,n=-n}p=a+d;let v=l.from;if(v<i.viewport.from)return i.viewport.from==0?0:t?null:n0(i,s,l,c,p);if(v>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:t?null:n0(i,s,l,c,p);let D=i.dom.ownerDocument,m=i.root.elementFromPoint?i.root:D,y=m.elementFromPoint(c,p);y&&!i.contentDOM.contains(y)&&(y=null),y||(c=Math.max(s.left+1,Math.min(s.right-1,c)),y=m.elementFromPoint(c,p),y&&!i.contentDOM.contains(y)&&(y=null));let x,w=-1;if(y&&((r=i.docView.nearest(y))===null||r===void 0?void 0:r.isEditable)!=!1){if(D.caretPositionFromPoint){let I=D.caretPositionFromPoint(c,p);I&&({offsetNode:x,offset:w}=I)}else if(D.caretRangeFromPoint){let I=D.caretRangeFromPoint(c,p);I&&({startContainer:x,startOffset:w}=I,(!i.contentDOM.contains(x)||ht.safari&&sC(x,w,c)||ht.chrome&&oC(x,w,c))&&(x=void 0))}}if(!x||!i.docView.dom.contains(x)){let I=yi.find(i.docView,v);if(!I)return d>l.top+l.height/2?l.to:l.from;({node:x,offset:w}=gc(I.dom,c,p))}let _=i.docView.nearest(x);if(!_)return null;if(_.isWidget&&((o=_.dom)===null||o===void 0?void 0:o.nodeType)==1){let I=_.dom.getBoundingClientRect();return e.y<I.top||e.y<=I.bottom&&e.x<=(I.left+I.right)/2?_.posAtStart:_.posAtEnd}else return _.localPosFromDOM(x,w)+_.posAtStart}function n0(i,e,t,n,r){let o=Math.round((n-e.left)*i.defaultCharacterWidth);if(i.lineWrapping&&t.height>i.defaultLineHeight*1.5){let a=i.viewState.heightOracle.textHeight,l=Math.floor((r-t.top-(i.defaultLineHeight-a)*.5)/a);o+=l*i.viewState.heightOracle.lineLength}let s=i.state.sliceDoc(t.from,t.to);return t.from+ic(s,o,i.state.tabSize)}function sC(i,e,t){let n;if(i.nodeType!=3||e!=(n=i.nodeValue.length))return!1;for(let r=i.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return ys(i,n-1,n).getBoundingClientRect().left>t}function oC(i,e,t){if(e!=0)return!1;for(let r=i;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let n=i.nodeType==1?i.getBoundingClientRect():ys(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function vc(i,e){let t=i.lineBlockAt(e);if(Array.isArray(t.type)){for(let n of t.type)if(n.to>e||n.to==e&&(n.to==t.to||n.type==Ji.Text))return n}return t}function aC(i,e,t,n){let r=vc(i,e.head),o=!n||r.type!=Ji.Text||!(i.lineWrapping||r.widgetLineBreaks)?null:i.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let s=i.dom.getBoundingClientRect(),a=i.textDirectionAt(r.from),l=i.posAtCoords({x:t==(a==ii.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(l!=null)return Ee.cursor(l,t?-1:1)}return Ee.cursor(t?r.to:r.from,t?-1:1)}function r0(i,e,t,n){let r=i.state.doc.lineAt(e.head),o=i.bidiSpans(r),s=i.textDirectionAt(r.from);for(let a=e,l=null;;){let h=GD(r,o,s,a,t),c=Og;if(!h){if(r.number==(t?i.state.doc.lines:1))return a;c=`
`,r=i.state.doc.line(r.number+(t?1:-1)),o=i.bidiSpans(r),h=Ee.cursor(t?r.from:r.to)}if(l){if(!l(c))return a}else{if(!n)return h;l=n(c)}a=h}}function lC(i,e,t){let n=i.state.charCategorizer(e),r=n(t);return o=>{let s=n(o);return r==ri.Space&&(r=s),r==s}}function uC(i,e,t,n){let r=e.head,o=t?1:-1;if(r==(t?i.state.doc.length:0))return Ee.cursor(r,e.assoc);let s=e.goalColumn,a,l=i.contentDOM.getBoundingClientRect(),h=i.coordsAtPos(r),c=i.documentTop;if(h)s==null&&(s=h.left-l.left),a=o<0?h.top:h.bottom;else{let v=i.viewState.lineBlockAt(r);s==null&&(s=Math.min(l.right-l.left,i.defaultCharacterWidth*(r-v.from))),a=(o<0?v.top:v.bottom)+c}let p=l.left+s,d=n??i.viewState.heightOracle.textHeight>>1;for(let v=0;;v+=10){let D=a+(d+v)*o,m=Cg(i,{x:p,y:D},!1,o);if(D<l.top||D>l.bottom||(o<0?m<r:m>r))return Ee.cursor(m,e.assoc,void 0,s)}}function bl(i,e,t){for(;;){let n=0;for(let r of i)r.between(e-1,e+1,(o,s,a)=>{if(e>o&&e<s){let l=n||t||(e-o<s-e?-1:1);e=l<0?o:s,n=l}});if(!n)return e}}function gh(i,e,t){let n=bl(i.state.facet(ef).map(r=>r(i)),t.from,e.head>t.from?-1:1);return n==t.from?t:Ee.cursor(n,n<t.from?1:-1)}class hC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.handleEvent=this.handleEvent.bind(this),e.scrollDOM.addEventListener("mousedown",t=>{if(t.target==e.scrollDOM&&t.clientY>e.contentDOM.getBoundingClientRect().bottom&&(this.handleEvent(t),!t.defaultPrevented&&t.button==2)){let n=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=n,200)}}),e.scrollDOM.addEventListener("drop",t=>{t.target==e.scrollDOM&&t.clientY>e.contentDOM.getBoundingClientRect().bottom&&this.handleEvent(t)}),this.notifiedFocused=e.hasFocus,ht.safari&&e.contentDOM.addEventListener("input",()=>null),ht.gecko&&PC(e.contentDOM.ownerDocument)}handleEvent(e){!yC(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let n=this.handlers[e];if(n){for(let r of n.observers)r(this.view,t);for(let r of n.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=cC(e),n=this.handlers,r=this.view.contentDOM;for(let o in t)if(o!="scroll"){let s=!t[o].handlers.length,a=n[o];a&&s!=!a.handlers.length&&(r.removeEventListener(o,this.handleEvent),a=null),a||r.addEventListener(o,this.handleEvent,{passive:s})}for(let o in n)o!="scroll"&&!t[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&Sg.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),ht.android&&ht.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return ht.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=bg.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||fC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,Js(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ht.safari&&!ht.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function s0(i,e){return(t,n)=>{try{return e.call(i,n,t)}catch(r){Sn(t.state,r)}}}function cC(i){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of i){let r=n.spec;if(r&&r.domEventHandlers)for(let o in r.domEventHandlers){let s=r.domEventHandlers[o];s&&t(o).handlers.push(s0(n.value,s))}if(r&&r.domEventObservers)for(let o in r.domEventObservers){let s=r.domEventObservers[o];s&&t(o).observers.push(s0(n.value,s))}}for(let n in tr)t(n).handlers.push(tr[n]);for(let n in Nn)t(n).observers.push(Nn[n]);return e}const bg=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],fC="dthko",Sg=[16,17,18,20,91,92,224,225],Va=6;function qa(i){return Math.max(0,i)*.7+8}function dC(i,e){return Math.max(Math.abs(i.clientX-e.clientX),Math.abs(i.clientY-e.clientY))}class pC{constructor(e,t,n,r){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=ED(e.contentDOM),this.atoms=e.state.facet(ef).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet($t.allowMultipleSelections)&&mC(e,t),this.dragging=vC(e,t)&&kg(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,o=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},s=pg(this.view);e.clientX-s.left<=o.left+Va?n=-qa(o.left-e.clientX):e.clientX+s.right>=o.right-Va&&(n=qa(e.clientX-o.right)),e.clientY-s.top<=o.top+Va?r=-qa(o.top-e.clientY):e.clientY+s.bottom>=o.bottom-Va&&(r=qa(e.clientY-o.bottom)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let r=e.ranges[n],o=null;if(r.empty){let s=bl(this.atoms,r.from,0);s!=r.from&&(o=Ee.cursor(s,-1))}else{let s=bl(this.atoms,r.from,-1),a=bl(this.atoms,r.to,1);(s!=r.from||a!=r.to)&&(o=Ee.range(r.from==r.anchor?s:a,r.from==r.head?s:a))}o&&(t||(t=e.ranges.slice()),t[n]=o)}return t?Ee.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection)||n.main.assoc!=t.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function mC(i,e){let t=i.state.facet(ng);return t.length?t[0](e):ht.mac?e.metaKey:e.ctrlKey}function gC(i,e){let t=i.state.facet(rg);return t.length?t[0](e):ht.mac?!e.altKey:!e.ctrlKey}function vC(i,e){let{main:t}=i.state.selection;if(t.empty)return!1;let n=Bl(i.root);if(!n||n.rangeCount==0)return!0;let r=n.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function yC(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=i.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=Kt.get(t))&&n.ignoreEvent(e))return!1;return!0}const tr=Object.create(null),Nn=Object.create(null),wg=ht.ie&&ht.ie_version<15||ht.ios&&ht.webkit_version<604;function OC(i){let e=i.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{i.focus(),t.remove(),Pg(i,t.value)},50)}function Pg(i,e){let{state:t}=i,n,r=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(yc!=null&&t.selection.ranges.every(l=>l.empty)&&yc==o.toString()){let l=-1;n=t.changeByRange(h=>{let c=t.doc.lineAt(h.from);if(c.from==l)return{range:h};l=c.from;let p=t.toText((s?o.line(r++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:p},range:Ee.cursor(h.from+p.length)}})}else s?n=t.changeByRange(l=>{let h=o.line(r++);return{changes:{from:l.from,to:l.to,insert:h.text},range:Ee.cursor(l.from+h.length)}}):n=t.replaceSelection(o);i.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Nn.scroll=i=>{i.inputState.lastScrollTop=i.scrollDOM.scrollTop,i.inputState.lastScrollLeft=i.scrollDOM.scrollLeft};tr.keydown=(i,e)=>(i.inputState.setSelectionOrigin("select"),e.keyCode==27&&(i.inputState.lastEscPress=Date.now()),!1);Nn.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};Nn.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};tr.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of i.state.facet(sg))if(t=n(i,e),t)break;if(!t&&e.button==0&&(t=CC(i,e)),t){let n=!i.hasFocus;i.inputState.startMouseSelection(new pC(i,e,t,n)),n&&i.observer.ignore(()=>Um(i.contentDOM));let r=i.inputState.mouseSelection;if(r)return r.start(e),!r.dragging}return!1};function o0(i,e,t,n){if(n==1)return Ee.cursor(e,t);if(n==2)return iC(i.state,e,t);{let r=yi.find(i.docView,e),o=i.state.doc.lineAt(r?r.posAtEnd:e),s=r?r.posAtStart:o.from,a=r?r.posAtEnd:o.to;return a<i.state.doc.length&&a==o.to&&a++,Ee.range(s,a)}}let Lg=(i,e)=>i>=e.top&&i<=e.bottom,a0=(i,e,t)=>Lg(e,t)&&i>=t.left&&i<=t.right;function xC(i,e,t,n){let r=yi.find(i.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&a0(t,n,s))return-1;let a=r.coordsAt(o,1);return a&&a0(t,n,a)?1:s&&Lg(n,s)?-1:1}function l0(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:xC(i,t,e.clientX,e.clientY)}}const DC=ht.ie&&ht.ie_version<=11;let u0=null,h0=0,c0=0;function kg(i){if(!DC)return i.detail;let e=u0,t=c0;return u0=i,c0=Date.now(),h0=!e||t>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(h0+1)%3:1}function CC(i,e){let t=l0(i,e),n=kg(e),r=i.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,s,a){let l=l0(i,o),h,c=o0(i,l.pos,l.bias,n);if(t.pos!=l.pos&&!s){let p=o0(i,t.pos,t.bias,n),d=Math.min(p.from,c.from),v=Math.max(p.to,c.to);c=d<c.from?Ee.range(d,v):Ee.range(v,d)}return s?r.replaceRange(r.main.extend(c.from,c.to)):a&&n==1&&r.ranges.length>1&&(h=bC(r,l.pos))?h:a?r.addRange(c):Ee.create([c])}}}function bC(i,e){for(let t=0;t<i.ranges.length;t++){let{from:n,to:r}=i.ranges[t];if(n<=e&&r>=e)return Ee.create(i.ranges.slice(0,t).concat(i.ranges.slice(t+1)),i.mainIndex==t?0:i.mainIndex-(i.mainIndex>t?1:0))}return null}tr.dragstart=(i,e)=>{let{selection:{main:t}}=i.state,{mouseSelection:n}=i.inputState;return n&&(n.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",i.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};function f0(i,e,t,n){if(!t)return;let r=i.posAtCoords({x:e.clientX,y:e.clientY},!1),{mouseSelection:o}=i.inputState,s=n&&o&&o.dragging&&gC(i,e)?{from:o.dragging.from,to:o.dragging.to}:null,a={from:r,insert:t},l=i.state.changes(s?[s,a]:a);i.focus(),i.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"})}tr.drop=(i,e)=>{if(!e.dataTransfer)return!1;if(i.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),r=0,o=()=>{++r==t.length&&f0(i,e,n.filter(s=>s!=null).join(i.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(n[s]=a.result),o()},a.readAsText(t[s])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return f0(i,e,n,!0),!0}return!1};tr.paste=(i,e)=>{if(i.state.readOnly)return!0;i.observer.flush();let t=wg?null:e.clipboardData;return t?(Pg(i,t.getData("text/plain")||t.getData("text/uri-text")),!0):(OC(i),!1)};function SC(i,e){let t=i.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),i.focus()},50)}function wC(i){let e=[],t=[],n=!1;for(let r of i.selection.ranges)r.empty||(e.push(i.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of i.selection.ranges){let s=i.doc.lineAt(o);s.number>r&&(e.push(s.text),t.push({from:s.from,to:Math.min(i.doc.length,s.to+1)})),r=s.number}n=!0}return{text:e.join(i.lineBreak),ranges:t,linewise:n}}let yc=null;tr.copy=tr.cut=(i,e)=>{let{text:t,ranges:n,linewise:r}=wC(i.state);if(!t&&!r)return!1;yc=r?t:null,e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let o=wg?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(SC(i,t),!1)};const Ag=Ur.define();function Eg(i,e){let t=[];for(let n of i.facet(lg)){let r=n(i,e);r&&t.push(r)}return t?i.update({effects:t,annotations:Ag.of(!0)}):null}function _g(i){setTimeout(()=>{let e=i.hasFocus;if(e!=i.inputState.notifiedFocused){let t=Eg(i.state,e);t?i.dispatch(t):i.update([])}},10)}Nn.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),_g(i)};Nn.blur=i=>{i.observer.clearSelectionRange(),_g(i)};Nn.compositionstart=Nn.compositionupdate=i=>{i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0)};Nn.compositionend=i=>{i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionPendingKey=!0,i.inputState.compositionPendingChange=i.observer.pendingRecords().length>0,i.inputState.compositionFirstChange=null,ht.chrome&&ht.android?i.observer.flushSoon():i.inputState.compositionPendingChange?Promise.resolve().then(()=>i.observer.flush()):setTimeout(()=>{i.inputState.composing<0&&i.docView.hasComposition&&i.update([])},50)};Nn.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};tr.beforeinput=(i,e)=>{var t;let n;if(ht.chrome&&ht.android&&(n=bg.find(r=>r.inputType==e.inputType))&&(i.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}return!1};const d0=new Set;function PC(i){d0.has(i)||(d0.add(i),i.addEventListener("copy",()=>{}),i.addEventListener("cut",()=>{}))}const p0=["pre-wrap","normal","pre-line","break-spaces"];class LC{constructor(e){this.lineWrapping=e,this.doc=Xt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return p0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,n,r,o,s){let a=p0.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=o,l){this.heightSamples={};for(let h=0;h<s.length;h++){let c=s[h];c<0?h++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class kC{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class qn{constructor(e,t,n,r,o){this.from=e,this.length=t,this.top=n,this.height=r,this._content=o}get type(){return typeof this._content=="number"?Ji.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Rr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new qn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Jt=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(Jt||(Jt={}));const Sl=.001;class Ki{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Sl&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return Ki.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let o=this,s=n.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:h,fromB:c,toB:p}=r[a],d=o.lineAt(l,Jt.ByPosNoHeight,n.setDoc(t),0,0),v=d.to>=h?d:o.lineAt(h,Jt.ByPosNoHeight,n,0,0);for(p+=v.to-h,h=v.to;a>0&&d.from<=r[a-1].toA;)l=r[a-1].fromA,c=r[a-1].fromB,a--,l<d.from&&(d=o.lineAt(l,Jt.ByPosNoHeight,n,0,0));c+=d.from-l,l=d.from;let D=tf.build(n.setDoc(s),e,c,p);o=o.replace(l,h,D)}return o.updateHeight(n,0)}static empty(){return new fn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,r=0,o=0;for(;;)if(t==n)if(r>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),n+=1+a.break,r-=a.size}else if(o>r*2){let a=e[n];a.break?e.splice(n,1,a.left,null,a.right):e.splice(n,1,a.left,a.right),n+=2+a.break,o-=a.size}else break;else if(r<o){let a=e[t++];a&&(r+=a.size)}else{let a=e[--n];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,n++),new AC(Ki.of(e.slice(0,t)),s,Ki.of(e.slice(n)))}}Ki.prototype.size=1;class Tg extends Ki{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,r){return new qn(r,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,r,o){return this.blockAt(0,n,r,o)}forEachLine(e,t,n,r,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,n,r,o))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class fn extends Tg{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,r){return new qn(r,this.length,n,this.height,this.breaks)}replace(e,t,n){let r=n[0];return n.length==1&&(r instanceof fn||r instanceof Ti&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Ti?r=new fn(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Ki.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ti extends Ki{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-n+1,s,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*o);s=l/o,this.length>o+1&&(a=(this.height-l)/(this.length-o-1))}else s=this.height/o;return{firstLine:n,lastLine:r,perLine:s,perChar:a}}blockAt(e,t,n,r){let{firstLine:o,lastLine:s,perLine:a,perChar:l}=this.heightMetrics(t,r);if(t.lineWrapping){let h=r+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),c=t.doc.lineAt(h),p=a+c.length*l,d=Math.max(n,e-p/2);return new qn(c.from,c.length,d,p,0)}else{let h=Math.max(0,Math.min(s-o,Math.floor((e-n)/a))),{from:c,length:p}=t.doc.line(o+h);return new qn(c,p,n+a*h,a,0)}}lineAt(e,t,n,r,o){if(t==Jt.ByHeight)return this.blockAt(e,n,r,o);if(t==Jt.ByPosNoHeight){let{from:v,to:D}=n.doc.lineAt(e);return new qn(v,D-v,0,0,0)}let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,o),h=n.doc.lineAt(e),c=a+h.length*l,p=h.number-s,d=r+a*p+l*(h.from-o-p);return new qn(h.from,h.length,Math.max(r,Math.min(d,r+this.height-c)),c,0)}forEachLine(e,t,n,r,o,s){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:a,perLine:l,perChar:h}=this.heightMetrics(n,o);for(let c=e,p=r;c<=t;){let d=n.doc.lineAt(c);if(c==e){let D=d.number-a;p+=l*D+h*(e-o-D)}let v=l+h*d.length;s(new qn(d.from,d.length,p,v,0)),p+=v,c=d.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let o=n[n.length-1];o instanceof Ti?n[n.length-1]=new Ti(o.length+r):n.push(null,new Ti(r-1))}if(e>0){let o=n[0];o instanceof Ti?n[0]=new Ti(e+o.length):n.unshift(new Ti(e-1),null)}return Ki.of(n)}decomposeLeft(e,t){t.push(new Ti(e-1),null)}decomposeRight(e,t){t.push(null,new Ti(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let s=[],a=Math.max(t,r.from),l=-1;for(r.from>t&&s.push(new Ti(r.from-t-1).updateHeight(e,t));a<=o&&r.more;){let c=e.doc.lineAt(a).length;s.length&&s.push(null);let p=r.heights[r.index++];l==-1?l=p:Math.abs(p-l)>=Sl&&(l=-2);let d=new fn(c,p);d.outdated=!1,s.push(d),a+=c+1}a<=o&&s.push(null,new Ti(o-a).updateHeight(e,a));let h=Ki.of(s);return(l<0||Math.abs(h.height-this.height)>=Sl||Math.abs(l-this.heightMetrics(e,t).perLine)>=Sl)&&(e.heightChanged=!0),h}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class AC extends Ki{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,r){let o=n+this.left.height;return e<o?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,n,r,o){let s=r+this.left.height,a=o+this.left.length+this.break,l=t==Jt.ByHeight?e<s:e<a,h=l?this.left.lineAt(e,t,n,r,o):this.right.lineAt(e,t,n,s,a);if(this.break||(l?h.to<a:h.from>a))return h;let c=t==Jt.ByPosNoHeight?Jt.ByPosNoHeight:Jt.ByPos;return l?h.join(this.right.lineAt(a,c,n,s,a)):this.left.lineAt(a,c,n,r,o).join(h)}forEachLine(e,t,n,r,o,s){let a=r+this.left.height,l=o+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,n,r,o,s),t>=l&&this.right.forEachLine(e,t,n,a,l,s);else{let h=this.lineAt(l,Jt.ByPos,n,r,o);e<h.from&&this.left.forEachLine(e,h.from-1,n,r,o,s),h.to>=e&&h.from<=t&&s(h),t>h.to&&this.right.forEachLine(h.to+1,t,n,a,l,s)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of n)o.push(a);if(e>0&&m0(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),m0(o,a)}return Ki.of(o)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ki.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:o,right:s}=this,a=t+o.length+this.break,l=null;return r&&r.from<=t+o.length&&r.more?l=o=o.updateHeight(e,t,n,r):o.updateHeight(e,t,n),r&&r.from<=a+s.length&&r.more?l=s=s.updateHeight(e,a,n,r):s.updateHeight(e,a,n),l?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function m0(i,e){let t,n;i[e]==null&&(t=i[e-1])instanceof Ti&&(n=i[e+1])instanceof Ti&&i.splice(e-1,3,new Ti(t.length+1+n.length))}const EC=5;class tf{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof fn?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new fn(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,o=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;n.block?this.addBlock(new Tg(s,r,n)):(s||o||r>=EC)&&this.addLineDeco(r,o,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new fn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Ti(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof fn)return e;let t=new fn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof fn)&&!this.isCovered?this.nodes.push(new fn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let r of this.nodes)r instanceof fn&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(e,t,n,r){let o=new tf(n,e);return Ut.spans(t,n,r,o,0),o.finish(n)}}function _C(i,e,t){let n=new TC;return Ut.compare(i,e,t,n,0),n.changes}class TC{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&cc(e,t,this.changes,5)}}function IC(i,e){let t=i.getBoundingClientRect(),n=i.ownerDocument,r=n.defaultView||window,o=Math.max(0,t.left),s=Math.min(r.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(r.innerHeight,t.bottom);for(let h=i.parentNode;h&&h!=n.body;)if(h.nodeType==1){let c=h,p=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&p.overflow!="visible"){let d=c.getBoundingClientRect();o=Math.max(o,d.left),s=Math.min(s,d.right),a=Math.max(a,d.top),l=h==i.parentNode?d.bottom:Math.min(l,d.bottom)}h=p.position=="absolute"||p.position=="fixed"?c.offsetParent:c.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function FC(i,e){let t=i.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class vh{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],o=t[n];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return gt.replace({widget:new QC(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class QC extends pr{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class g0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=v0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ii.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Kc).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new LC(t),this.stateDeco=e.facet(fa).filter(n=>typeof n!="function"),this.heightMap=Ki.empty().applyChanges(this.stateDeco,Xt.empty,this.heightOracle.setDoc(e.doc),[new wn(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=gt.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);e.push(new Ha(o,s))}}this.viewports=e.sort((n,r)=>n.from-r.from),this.scaler=this.heightMap.height<=7e6?v0:new $C(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:zo(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(fa).filter(c=>typeof c!="function");let r=e.changedRanges,o=wn.extendWithRanges(r,_C(n,this.stateDeco,e?e.changes:Di.empty(this.state.doc.length))),s=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=s&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let h=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),h&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(hg)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,o=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?ii.RTL:ii.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=t.getBoundingClientRect(),l=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,c=0;if(a.width&&a.height){let I=a.width/t.offsetWidth,N=a.height/t.offsetHeight;I>.995&&I<1.005&&(I=1),N>.995&&N<1.005&&(N=1),(this.scaleX!=I||this.scaleY!=N)&&(this.scaleX=I,this.scaleY=N,h|=8,s=l=!0)}let p=(parseInt(n.paddingTop)||0)*this.scaleY,d=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=d)&&(this.paddingTop=p,this.paddingBottom=d,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8);let v=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=v&&(this.scrollAnchorHeight=-1,this.scrollTop=v),this.scrolledToBottom=jm(e.scrollDOM);let D=(this.printing?FC:IC)(t,this.paddingTop),m=D.top-this.pixelViewport.top,y=D.bottom-this.pixelViewport.bottom;this.pixelViewport=D;let x=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(x!=this.inView&&(this.inView=x,x&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let w=a.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),l){let I=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(I)&&(s=!0),s||r.lineWrapping&&Math.abs(w-this.contentDOMWidth)>r.charWidth){let{lineHeight:N,charWidth:Y,textHeight:j}=e.docView.measureTextSize();s=N>0&&r.refresh(o,N,Y,j,w/Y,I),s&&(e.docView.minWidth=0,h|=8)}m>0&&y>0?c=Math.max(m,y):m<0&&y<0&&(c=Math.min(m,y)),r.heightChanged=!1;for(let N of this.viewports){let Y=N.from==this.viewport.from?I:e.docView.measureVisibleLineHeights(N);this.heightMap=(s?Ki.empty().applyChanges(this.stateDeco,Xt.empty,this.heightOracle,[new wn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,s,new kC(N.from,Y))}r.heightChanged&&(h|=2)}let _=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(h&2||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:a}=this,l=new Ha(r.lineAt(s-n*1e3,Jt.ByHeight,o,0,0).from,r.lineAt(a+(1-n)*1e3,Jt.ByHeight,o,0,0).to);if(t){let{head:h}=t.range;if(h<l.from||h>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=r.lineAt(h,Jt.ByPos,o,0,0),d;t.y=="center"?d=(p.top+p.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&h<l.from?d=p.top:d=p.bottom-c,l=new Ha(r.lineAt(d-1e3/2,Jt.ByHeight,o,0,0).from,r.lineAt(d+c+1e3/2,Jt.ByHeight,o,0,0).to)}}return l}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Ha(this.heightMap.lineAt(n,Jt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Jt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Jt.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,Jt.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||r<=s-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(n,250)))&&r>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new vh(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,o=r>>1,s=r<<1;if(this.defaultTextDirection!=ii.LTR&&!n)return[];let a=[],l=(h,c,p,d)=>{if(c-h<o)return;let v=this.state.selection.main,D=[v.from];v.empty||D.push(v.to);for(let y of D)if(y>h&&y<c){l(h,y-10,p,d),l(y+10,c,p,d);return}let m=BC(e,y=>y.from>=p.from&&y.to<=p.to&&Math.abs(y.from-h)<o&&Math.abs(y.to-c)<o&&!D.some(x=>y.from<x&&y.to>x));if(!m){if(c<p.to&&t&&n&&t.visibleRanges.some(y=>y.from<=c&&y.to>=c)){let y=t.moveToLineBoundary(Ee.cursor(c),!1,!0).head;y>h&&(c=y)}m=new vh(h,c,this.gapSize(p,h,c,d))}a.push(m)};for(let h of this.viewportLines){if(h.length<s)continue;let c=MC(h.from,h.to,this.stateDeco);if(c.total<s)continue;let p=this.scrollTarget?this.scrollTarget.range.head:null,d,v;if(n){let D=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,y;if(p!=null){let x=Ka(c,p),w=((this.visibleBottom-this.visibleTop)/2+D)/h.height;m=x-w,y=x+w}else m=(this.visibleTop-h.top-D)/h.height,y=(this.visibleBottom-h.top+D)/h.height;d=Ja(c,m),v=Ja(c,y)}else{let D=c.total*this.heightOracle.charWidth,m=r*this.heightOracle.charWidth,y,x;if(p!=null){let w=Ka(c,p),_=((this.pixelViewport.right-this.pixelViewport.left)/2+m)/D;y=w-_,x=w+_}else y=(this.pixelViewport.left-m)/D,x=(this.pixelViewport.right+m)/D;d=Ja(c,y),v=Ja(c,x)}d>h.from&&l(h.from,d,h,c),v<h.to&&l(v,h.to,h,c)}return a}gapSize(e,t,n,r){let o=Ka(r,n)-Ka(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){vh.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=gt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Ut.spans(e,this.viewport.from,this.viewport.to,{span(r,o){t.push({from:r,to:o})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some((r,o)=>r.from!=t[o].from||r.to!=t[o].to);return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||zo(this.heightMap.lineAt(e,Jt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return zo(this.heightMap.lineAt(this.scaler.fromDOM(e),Jt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return zo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ha{constructor(e,t){this.from=e,this.to=t}}function MC(i,e,t){let n=[],r=i,o=0;return Ut.spans(t,i,e,{span(){},point(s,a){s>r&&(n.push({from:r,to:s}),o+=s-r),r=a}},20),r<e&&(n.push({from:r,to:e}),o+=e-r),{total:o,ranges:n}}function Ja({total:i,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(i*t);for(let r=0;;r++){let{from:o,to:s}=e[r],a=s-o;if(n<=a)return o+n;n-=a}}function Ka(i,e){let t=0;for(let{from:n,to:r}of i.ranges){if(e<=r){t+=e-n;break}t+=r-n}return t/i.total}function BC(i,e){for(let t of i)if(e(t))return t}const v0={toDOM(i){return i},fromDOM(i){return i},scale:1};class $C{constructor(e,t,n){let r=0,o=0,s=0;this.viewports=n.map(({from:a,to:l})=>{let h=t.lineAt(a,Jt.ByPos,e,0,0).top,c=t.lineAt(l,Jt.ByPos,e,0,0).bottom;return r+=c-h,{from:a,to:l,top:h,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-n)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);n=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return n+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);n=o.bottom,r=o.domBottom}}}function zo(i,e){if(e.scale==1)return i;let t=e.toDOM(i.top),n=e.toDOM(i.bottom);return new qn(i.from,i.length,t,n-t,Array.isArray(i._content)?i._content.map(r=>zo(r,e)):i._content)}const el=ot.define({combine:i=>i.join(" ")}),Oc=ot.define({combine:i=>i.indexOf(!0)>-1}),xc=Br.newName(),Ig=Br.newName(),Fg=Br.newName(),Qg={"&light":"."+Ig,"&dark":"."+Fg};function Dc(i,e,t){return new Br(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,r=>{if(r=="&")return i;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):i+" "+n}})}const NC=Dc("."+xc,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Qg),jo="";class RC{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet($t.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=jo}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let o=this.text.length;this.readNode(r);let s=r.nextSibling;if(s==t)break;let a=Kt.get(r),l=Kt.get(s);(a&&l?a.breakAfter:(a?a.breakAfter:y0(r))||y0(s)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>o)&&this.lineBreak(),r=s}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(a=r.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=s-1);n=o+s}}readNode(e){if(e.cmIgnore)return;let t=Kt.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let r=n.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function y0(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}class O0{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class XC{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let a=o||s?[]:ZC(e),l=new RC(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=UC(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!sc(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),h=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!sc(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=Ee.single(h,l)}}}function Mg(i,e){let t,{newSel:n}=e,r=i.state.selection.main,o=i.inputState.lastKeyTime>Date.now()-100?i.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:a}=e.bounds,l=r.from,h=null;(o===8||ht.android&&e.text.length<a-s)&&(l=r.to,h="end");let c=YC(i.state.doc.sliceString(s,a,jo),e.text,l-s,h);c&&(ht.chrome&&o==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==jo+jo&&c.toB--,t={from:s+c.from,to:s+c.toA,insert:Xt.of(e.text.slice(c.from,c.toB).split(jo))})}else n&&(!i.hasFocus&&i.state.facet(Au)||n.main.eq(r))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!r.empty&&n&&n.main.empty?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,r.to)}:t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,t.from).append(t.insert).append(i.state.doc.slice(t.to,r.to))}:(ht.mac||ht.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&i.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=Ee.single(n.main.anchor-1,n.main.head-1)),t={from:r.from,to:r.to,insert:Xt.of([" "])}):ht.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&i.lineWrapping&&(n&&(n=Ee.single(n.main.anchor-1,n.main.head-1)),t={from:r.from,to:r.to,insert:Xt.of([" "])}),t){if(ht.ios&&i.inputState.flushIOSKey()||ht.android&&(t.from==r.from&&t.to==r.to&&t.insert.length==1&&t.insert.lines==2&&Js(i.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&t.insert.length==0||o==8&&t.insert.length<t.to-t.from&&t.to>r.head)&&Js(i.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&t.insert.length==0&&Js(i.contentDOM,"Delete",46)))return!0;let s=t.insert.toString();i.inputState.composing>=0&&i.inputState.composing++;let a,l=()=>a||(a=WC(i,t,n));return i.state.facet(ag).some(h=>h(i,t.from,t.to,s,l))||i.dispatch(l()),!0}else if(n&&!n.main.eq(r)){let s=!1,a="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(s=!0),a=i.inputState.lastSelectionOrigin),i.dispatch({selection:n,scrollIntoView:s,userEvent:a}),!0}else return!1}function WC(i,e,t){let n,r=i.state,o=r.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&i.inputState.composing<0){let a=o.from<e.from?r.sliceDoc(o.from,e.from):"",l=o.to>e.to?r.sliceDoc(e.to,o.to):"";n=r.replaceSelection(i.state.toText(a+e.insert.sliceString(0,void 0,i.state.lineBreak)+l))}else{let a=r.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(r.selection.ranges.length>1&&i.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let h=i.state.sliceDoc(e.from,e.to),c,p=t&&xg(i,t.main.head);if(p){let D=e.insert.length-(e.to-e.from);c={from:p.from,to:p.to-D}}else c=i.state.doc.lineAt(o.head);let d=o.to-e.to,v=o.to-o.from;n=r.changeByRange(D=>{if(D.from==o.from&&D.to==o.to)return{changes:a,range:l||D.map(a)};let m=D.to-d,y=m-h.length;if(D.to-D.from!=v||i.state.sliceDoc(y,m)!=h||D.to>=c.from&&D.from<=c.to)return{range:D};let x=r.changes({from:y,to:m,insert:e.insert}),w=D.to-o.to;return{changes:x,range:l?Ee.range(Math.max(0,l.anchor+w),Math.max(0,l.head+w)):D.map(x)}})}else n={changes:a,selection:l&&r.selection.replaceRange(l)}}let s="input.type";return(i.composing||i.inputState.compositionPendingChange&&i.inputState.compositionEndedAt>Date.now()-50)&&(i.inputState.compositionPendingChange=!1,s+=".compose",i.inputState.compositionFirstChange&&(s+=".start",i.inputState.compositionFirstChange=!1)),r.update(n,{userEvent:s,scrollIntoView:!0})}function YC(i,e,t,n){let r=Math.min(i.length,e.length),o=0;for(;o<r&&i.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&i.length==e.length)return null;let s=i.length,a=e.length;for(;s>0&&a>0&&i.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(n=="end"){let l=Math.max(0,o-Math.min(s,a));t-=s+l-o}if(s<o&&i.length<e.length){let l=t<=o&&t>=s?o-t:0;o-=l,a=o+(a-s),s=o}else if(a<o){let l=t<=o&&t>=a?o-t:0;o-=l,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function ZC(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:r,focusOffset:o}=i.observer.selectionRange;return t&&(e.push(new O0(t,n)),(r!=t||o!=n)&&e.push(new O0(r,o))),e}function UC(i,e){if(i.length==0)return null;let t=i[0].pos,n=i.length==2?i[1].pos:t;return t>-1&&n>-1?Ee.single(t+e,n+e):null}const zC={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},yh=ht.ie&&ht.ie_version<=11;class jC{constructor(e){this.view=e,this.active=!1,this.selectionRange=new _D,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(ht.ie&&ht.ie_version<=11||ht.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),yh&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(Au)?n.root.activeElement!=this.dom:!Cl(n.dom,r))return;let o=r.anchorNode&&n.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ht.ie&&ht.ie_version<=11||ht.android&&ht.chrome)&&!n.state.selection.main.empty&&r.focusNode&&$l(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=ht.safari&&e.root.nodeType==11&&LD(this.dom.ownerDocument)==this.dom&&GC(this.view)||Bl(e.root);if(!t||this.selectionRange.eq(t))return!1;let n=Cl(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&ID(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,zC),yh&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),yh&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Js(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(r=!0),t==-1?{from:t,to:n}=s:(t=Math.min(s.from,t),n=Math.max(s.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&Cl(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new XC(this.view,e,t,n);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let n=this.view.state,r=Mg(this.view,t);return this.view.state==n&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=x0(t,e.previousSibling||e.target.previousSibling,-1),r=x0(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function x0(i,e,t){for(;e;){let n=Kt.get(e);if(n&&n.parent==i)return n;let r=e.parentNode;e=r!=i.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function GC(i){let e=null;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(i.contentDOM.addEventListener("beforeinput",t,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let n=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,a=i.docView.domAtPos(i.state.selection.main.anchor);return $l(a.node,a.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}class nt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(n=>n.forEach(r=>t(r,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||TD(e.parent)||document,this.viewState=new g0(e.state||$t.create(e)),this.plugins=this.state.facet(Zo).map(n=>new ph(n));for(let n of this.plugins)n.update(this);this.observer=new jC(this),this.inputState=new hC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Jd(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}dispatch(...e){let t=e.length==1&&e[0]instanceof bi?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,r,o=this.state;for(let d of e){if(d.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=d.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,a=0,l=null;e.some(d=>d.annotation(Ag))?(this.inputState.notifiedFocused=s,a=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,l=Eg(o,s),l||(a=1));let h=this.observer.delayedAndroidKey,c=null;if(h?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(c=null)):this.observer.clear(),o.facet($t.phrases)!=this.state.facet($t.phrases))return this.setState(o);r=Xl.create(this,o,e),r.flags|=a;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(p&&(p=p.map(d.changes)),d.scrollIntoView){let{main:v}=d.state.selection;p=new Rl(v.empty?v:Ee.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of d.effects)v.is(qd)&&(p=v.value)}this.viewState.update(r,p),this.bidiCache=Wl.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(Uo)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(el)!=r.state.facet(el)&&(this.viewState.mustMeasureContent=!0),(t||n||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let d of this.state.facet(fc))d(r);(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!Mg(this,c)&&h.force&&Js(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new g0(e),this.plugins=e.facet(Zo).map(n=>new ph(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView=new Jd(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Zo),n=e.state.facet(Zo);if(t!=n){let r=[];for(let o of n){let s=t.indexOf(o);if(s<0)r.push(new ph(o));else{let a=this.plugins[s];a.mustUpdate=e,r.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,r=n.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(s<0)if(jm(n))o=-1,s=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(r);o=v.from,s=v.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];l&4||([this.measureRequests,h]=[h,this.measureRequests]);let c=h.map(v=>{try{return v.read(this)}catch(D){return Sn(this.state,D),D0}}),p=Xl.create(this,this.state,[]),d=!1;p.flags|=l,t?t.flags|=l:t=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),d=this.docView.update(p));for(let v=0;v<h.length;v++)if(c[v]!=D0)try{let D=h[v];D.write&&D.write(c[v],this)}catch(D){Sn(this.state,D)}if(d&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let D=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(D>1||D<-1){r=r+D,n.scrollTop=r/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(fc))a(t)}get themeClasses(){return xc+" "+(this.state.facet(Oc)?Fg:Ig)+" "+this.state.facet(el)}updateAttrs(){let e=C0(this,cg,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Au)?"true":"false",class:"cm-content",style:`${ht.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),C0(this,Kc,t);let n=this.observer.ignore(()=>{let r=hc(this.contentDOM,this.contentAttrs,t),o=hc(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let r of n.effects)if(r.is(nt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Uo);let e=this.state.facet(nt.cspNonce);Br.mount(this.root,this.styleModules.concat(NC).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return gh(this,e,r0(this,e,t,n))}moveByGroup(e,t){return gh(this,e,r0(this,e,t,n=>lC(this,e.head,n)))}moveToLineBoundary(e,t,n=!0){return aC(this,e,t,n)}moveVertically(e,t,n){return gh(this,e,uC(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Cg(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),s=o[Tr.find(o,e-r.from,-1,t)];return qc(n,s.dir==ii.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(ug)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>VC)return yg(e.length);let t=this.textDirectionAt(e.from),n;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||vg(o.isolates,n=Hd(this,e.from,e.to))))return o.order;n||(n=Hd(this,e.from,e.to));let r=jD(e.text,t,n);return this.bidiCache.push(new Wl(e.from,e.to,t,n,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ht.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Um(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return qd.of(new Rl(typeof e=="number"?Ee.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return si.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return si.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=Br.newName(),r=[el.of(n),Uo.of(Dc(`.${n}`,e))];return t&&t.dark&&r.push(Oc.of(!0)),r}static baseTheme(e){return Zr.lowest(Uo.of(Dc("."+xc,e,Qg)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&Kt.get(n)||Kt.get(e);return((t=r==null?void 0:r.rootView)===null||t===void 0?void 0:t.view)||null}}nt.styleModule=Uo;nt.inputHandler=ag;nt.focusChangeEffect=lg;nt.perLineTextDirection=ug;nt.exceptionSink=og;nt.updateListener=fc;nt.editable=Au;nt.mouseSelectionStyle=sg;nt.dragMovesSelection=rg;nt.clickAddsSelectionRange=ng;nt.decorations=fa;nt.atomicRanges=ef;nt.bidiIsolatedRanges=fg;nt.scrollMargins=dg;nt.darkTheme=Oc;nt.cspNonce=ot.define({combine:i=>i.length?i[0]:""});nt.contentAttributes=Kc;nt.editorAttributes=cg;nt.lineWrapping=nt.contentAttributes.of({class:"cm-lineWrapping"});nt.announce=bt.define();const VC=4096,D0={};class Wl{constructor(e,t,n,r,o,s){this.from=e,this.to=t,this.dir=n,this.isolates=r,this.fresh=o,this.order=s}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let n=[],r=e.length?e[e.length-1].dir:ii.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==r&&!t.touchesRange(s.from,s.to)&&n.push(new Wl(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return n}}function C0(i,e,t){for(let n=i.state.facet(e),r=n.length-1;r>=0;r--){let o=n[r],s=typeof o=="function"?o(i):o;s&&uc(s,t)}return t}const qC=ht.mac?"mac":ht.windows?"win":ht.linux?"linux":"key";function HC(i,e){const t=i.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let r,o,s,a;for(let l=0;l<t.length-1;++l){const h=t[l];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))s=!0;else if(/^mod$/i.test(h))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),a&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function tl(i,e,t){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t!==!1&&e.shiftKey&&(i="Shift-"+i),i}const JC=Zr.default(nt.domEventHandlers({keydown(i,e){return $g(Bg(e.state),i,e,"editor")}})),ka=ot.define({enables:JC}),b0=new WeakMap;function Bg(i){let e=i.facet(ka),t=b0.get(e);return t||b0.set(e,t=tb(e.reduce((n,r)=>n.concat(r),[]))),t}function KC(i,e,t){return $g(Bg(i.state),e,i,t)}let kr=null;const eb=4e3;function tb(i,e=qC){let t=Object.create(null),n=Object.create(null),r=(s,a)=>{let l=n[s];if(l==null)n[s]=a;else if(l!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,l,h,c)=>{var p,d;let v=t[s]||(t[s]=Object.create(null)),D=a.split(/ (?!$)/).map(x=>HC(x,e));for(let x=1;x<D.length;x++){let w=D.slice(0,x).join(" ");r(w,!0),v[w]||(v[w]={preventDefault:!0,stopPropagation:!1,run:[_=>{let I=kr={view:_,prefix:w,scope:s};return setTimeout(()=>{kr==I&&(kr=null)},eb),!0}]})}let m=D.join(" ");r(m,!1);let y=v[m]||(v[m]={preventDefault:!1,stopPropagation:!1,run:((d=(p=v._any)===null||p===void 0?void 0:p.run)===null||d===void 0?void 0:d.slice())||[]});l&&y.run.push(l),h&&(y.preventDefault=!0),c&&(y.stopPropagation=!0)};for(let s of i){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let h of a){let c=t[h]||(t[h]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let p in c)c[p].run.push(s.any)}let l=s[e]||s.key;if(l)for(let h of a)o(h,l,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(h,"Shift-"+l,s.shift,s.preventDefault,s.stopPropagation)}return t}function $g(i,e,t,n){let r=PD(e),o=Ii(r,0),s=dn(o)==r.length&&r!=" ",a="",l=!1,h=!1,c=!1;kr&&kr.view==t&&kr.scope==n&&(a=kr.prefix+" ",Sg.indexOf(e.keyCode)<0&&(h=!0,kr=null));let p=new Set,d=y=>{if(y){for(let x of y.run)if(!p.has(x)&&(p.add(x),x(t,e)))return y.stopPropagation&&(c=!0),!0;y.preventDefault&&(y.stopPropagation&&(c=!0),h=!0)}return!1},v=i[n],D,m;return v&&(d(v[a+tl(r,e,!s)])?l=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ht.windows&&e.ctrlKey&&e.altKey)&&(D=$r[e.keyCode])&&D!=r?(d(v[a+tl(D,e,!0)])||e.shiftKey&&(m=ha[e.keyCode])!=r&&m!=D&&d(v[a+tl(m,e,!1)]))&&(l=!0):s&&e.shiftKey&&d(v[a+tl(r,e,!0)])&&(l=!0),!l&&d(v._any)&&(l=!0)),h&&(l=!0),l&&c&&e.stopPropagation(),l}class Aa{constructor(e,t,n,r,o){this.className=e,this.left=t,this.top=n,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let o=Ng(e);return[new Aa(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return ib(e,t,n)}}function Ng(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==ii.LTR?e.left:e.right-i.scrollDOM.clientWidth*i.scaleX)-i.scrollDOM.scrollLeft*i.scaleX,top:e.top-i.scrollDOM.scrollTop*i.scaleY}}function S0(i,e,t){let n=Ee.cursor(e);return{from:Math.max(t.from,i.moveToLineBoundary(n,!1,!0).from),to:Math.min(t.to,i.moveToLineBoundary(n,!0,!0).from),type:Ji.Text}}function ib(i,e,t){if(t.to<=i.viewport.from||t.from>=i.viewport.to)return[];let n=Math.max(t.from,i.viewport.from),r=Math.min(t.to,i.viewport.to),o=i.textDirection==ii.LTR,s=i.contentDOM,a=s.getBoundingClientRect(),l=Ng(i),h=s.querySelector(".cm-line"),c=h&&window.getComputedStyle(h),p=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=a.right-(c?parseInt(c.paddingRight):0),v=vc(i,n),D=vc(i,r),m=v.type==Ji.Text?v:null,y=D.type==Ji.Text?D:null;if(m&&(i.lineWrapping||v.widgetLineBreaks)&&(m=S0(i,n,m)),y&&(i.lineWrapping||D.widgetLineBreaks)&&(y=S0(i,r,y)),m&&y&&m.from==y.from)return w(_(t.from,t.to,m));{let N=m?_(t.from,null,m):I(v,!1),Y=y?_(null,t.to,y):I(D,!0),j=[];return(m||v).to<(y||D).from-(m&&y?1:0)||v.widgetLineBreaks>1&&N.bottom+i.defaultLineHeight/2<Y.top?j.push(x(p,N.bottom,d,Y.top)):N.bottom<Y.top&&i.elementAtHeight((N.bottom+Y.top)/2).type==Ji.Text&&(N.bottom=Y.top=(N.bottom+Y.top)/2),w(N).concat(j).concat(w(Y))}function x(N,Y,j,ae){return new Aa(e,N-l.left,Y-l.top-.01,j-N,ae-Y+.01)}function w({top:N,bottom:Y,horizontal:j}){let ae=[];for(let K=0;K<j.length;K+=2)ae.push(x(j[K],N,j[K+1],Y));return ae}function _(N,Y,j){let ae=1e9,K=-1e9,oe=[];function fe(B,re,Qe,De,Xe){let ge=i.coordsAtPos(B,B==j.to?-2:2),$e=i.coordsAtPos(Qe,Qe==j.from?2:-2);!ge||!$e||(ae=Math.min(ge.top,$e.top,ae),K=Math.max(ge.bottom,$e.bottom,K),Xe==ii.LTR?oe.push(o&&re?p:ge.left,o&&De?d:$e.right):oe.push(!o&&De?p:$e.left,!o&&re?d:ge.right))}let U=N??j.from,H=Y??j.to;for(let B of i.visibleRanges)if(B.to>U&&B.from<H)for(let re=Math.max(B.from,U),Qe=Math.min(B.to,H);;){let De=i.state.doc.lineAt(re);for(let Xe of i.bidiSpans(De)){let ge=Xe.from+De.from,$e=Xe.to+De.from;if(ge>=Qe)break;$e>re&&fe(Math.max(ge,re),N==null&&ge<=U,Math.min($e,Qe),Y==null&&$e>=H,Xe.dir)}if(re=De.to+1,re>=Qe)break}return oe.length==0&&fe(U,N==null,H,Y==null,i.textDirection),{top:ae,bottom:K,horizontal:oe}}function I(N,Y){let j=a.top+(Y?N.top:N.bottom);return{top:j,bottom:j,horizontal:[]}}}function nb(i,e){return i.constructor==e.constructor&&i.eq(e)}class rb{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(wl)!=e.state.facet(wl)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let t=0,n=e.facet(wl);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!nb(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[n].constructor&&r.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const wl=ot.define();function Rg(i){return[si.define(e=>new rb(e,i)),wl.of(i)]}const Xg=!ht.ios,pa=ot.define({combine(i){return ir(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function sb(i={}){return[pa.of(i),ob,ab,lb,hg.of(!0)]}function Wg(i){return i.startState.facet(pa)!=i.state.facet(pa)}const ob=Rg({above:!0,markers(i){let{state:e}=i,t=e.facet(pa),n=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty?!o||Xg:t.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:Ee.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Aa.forRange(i,s,a))n.push(l)}}return n},update(i,e){i.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Wg(i);return t&&w0(i.state,e),i.docChanged||i.selectionSet||t},mount(i,e){w0(e.state,i)},class:"cm-cursorLayer"});function w0(i,e){e.style.animationDuration=i.facet(pa).cursorBlinkRate+"ms"}const ab=Rg({above:!1,markers(i){return i.state.selection.ranges.map(e=>e.empty?[]:Aa.forRange(i,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(i,e){return i.docChanged||i.selectionSet||i.viewportChanged||Wg(i)},class:"cm-selectionLayer"}),Yg={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Xg&&(Yg[".cm-line"].caretColor="transparent !important");const lb=Zr.highest(nt.theme(Yg)),Zg=bt.define({map(i,e){return i==null?null:e.mapPos(i)}}),Go=Si.define({create(){return null},update(i,e){return i!=null&&(i=e.changes.mapPos(i)),e.effects.reduce((t,n)=>n.is(Zg)?n.value:t,i)}}),ub=si.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var e;let t=i.state.field(Go);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(Go)!=t||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:i}=this,e=i.state.field(Go),t=e!=null&&i.coordsAtPos(e);if(!t)return null;let n=i.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+i.scrollDOM.scrollLeft*i.scaleX,top:t.top-n.top+i.scrollDOM.scrollTop*i.scaleY,height:t.bottom-t.top}}drawCursor(i){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;i?(this.cursor.style.left=i.left/e+"px",this.cursor.style.top=i.top/t+"px",this.cursor.style.height=i.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(Go)!=i&&this.view.dispatch({effects:Zg.of(i)})}},{eventObservers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function hb(){return[Go,ub]}function P0(i,e,t,n,r){e.lastIndex=0;for(let o=i.iterRange(t,n),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)r(s+a.index,a)}function cb(i,e){let t=i.visibleRanges;if(t.length==1&&t[0].from==i.viewport.from&&t[0].to==i.viewport.to)return t;let n=[];for(let{from:r,to:o}of t)r=Math.max(i.state.doc.lineAt(r).from,r-e),o=Math.min(i.state.doc.lineAt(o).to,o+e),n.length&&n[n.length-1].to>=r?n[n.length-1].to=o:n.push({from:r,to:o});return n}class fb{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(a,l,h,c)=>r(c,h,h+a[0].length,a,l);else if(typeof n=="function")this.addMatch=(a,l,h,c)=>{let p=n(a,l,h);p&&c(h,h+a[0].length,p)};else if(n)this.addMatch=(a,l,h,c)=>c(h,h+a[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new er,n=t.add.bind(t);for(let{from:r,to:o}of cb(e,this.maxLength))P0(e.state.doc,this.regexp,r,o,(s,a)=>this.addMatch(a,e,s,n));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(n=Math.min(a,n),r=Math.max(l,r))}),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let o of e.visibleRanges){let s=Math.max(o.from,n),a=Math.min(o.to,r);if(a>s){let l=e.state.doc.lineAt(s),h=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(o.from,l.from),p=Math.min(o.to,h.to);if(this.boundary){for(;s>l.from;s--)if(this.boundary.test(l.text[s-1-l.from])){c=s;break}for(;a<h.to;a++)if(this.boundary.test(h.text[a-h.from])){p=a;break}}let d=[],v,D=(m,y,x)=>d.push(x.range(m,y));if(l==h)for(this.regexp.lastIndex=c-l.from;(v=this.regexp.exec(l.text))&&v.index<p-l.from;)this.addMatch(v,e,v.index+l.from,D);else P0(e.state.doc,this.regexp,c,p,(m,y)=>this.addMatch(y,e,m,D));t=t.update({filterFrom:c,filterTo:p,filter:(m,y)=>m<c||y>p,add:d})}}return t}}const Cc=/x/.unicode!=null?"gu":"g",db=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Cc),pb={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Oh=null;function mb(){var i;if(Oh==null&&typeof document<"u"&&document.body){let e=document.body.style;Oh=((i=e.tabSize)!==null&&i!==void 0?i:e.MozTabSize)!=null}return Oh||!1}const Pl=ot.define({combine(i){let e=ir(i,{render:null,specialChars:db,addSpecialChars:null});return(e.replaceTabs=!mb())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Cc)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Cc)),e}});function gb(i={}){return[Pl.of(i),vb()]}let L0=null;function vb(){return L0||(L0=si.fromClass(class{constructor(i){this.view=i,this.decorations=gt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(Pl)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new fb({regexp:i.specialChars,decoration:(e,t,n)=>{let{doc:r}=t.state,o=Ii(e[0],0);if(o==9){let s=r.lineAt(n),a=t.state.tabSize,l=wa(s.text,a,n-s.from);return gt.replace({widget:new Db((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=gt.replace({widget:new xb(i,o)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let e=i.state.facet(Pl);i.startState.facet(Pl)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const yb="";function Ob(i){return i>=32?yb:i==10?"":String.fromCharCode(9216+i)}class xb extends pr{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=Ob(this.code),n=e.state.phrase("Control character")+" "+(pb[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=n,o.setAttribute("aria-label",n),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class Db extends pr{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Cb(){return Sb}const bb=gt.line({class:"cm-activeLine"}),Sb=si.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=-1,t=[];for(let n of i.state.selection.ranges){let r=i.lineBlockAt(n.head);r.from>e&&(t.push(bb.range(r.from)),e=r.from)}return gt.set(t)}},{decorations:i=>i.decorations}),bc=2e3;function wb(i,e,t){let n=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>bc||t.off>bc||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=n;l<=r;l++){let h=i.doc.line(l);h.length<=a&&o.push(Ee.range(h.from+s,h.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=n;l<=r;l++){let h=i.doc.line(l),c=ic(h.text,s,i.tabSize,!0);if(c<0)o.push(Ee.cursor(h.to));else{let p=ic(h.text,a,i.tabSize);o.push(Ee.range(h.from+c,h.from+p))}}}return o}function Pb(i,e){let t=i.coordsAtPos(i.viewport.from);return t?Math.round(Math.abs((t.left-e)/i.defaultCharacterWidth)):-1}function k0(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1),n=i.state.doc.lineAt(t),r=t-n.from,o=r>bc?-1:r==n.length?Pb(i,e.clientX):wa(n.text,i.state.tabSize,t-n.from);return{line:n.number,col:o,off:r}}function Lb(i,e){let t=k0(i,e),n=i.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),s=r.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},n=n.map(r.changes)}},get(r,o,s){let a=k0(i,r);if(!a)return n;let l=wb(i.state,t,a);return l.length?s?Ee.create(l.concat(n.ranges)):Ee.create(l):n}}:null}function kb(i){let e=(i==null?void 0:i.eventFilter)||(t=>t.altKey&&t.button==0);return nt.mouseSelectionStyle.of((t,n)=>e(n)?Lb(t,n):null)}const Ab={Alt:[18,i=>!!i.altKey],Control:[17,i=>!!i.ctrlKey],Shift:[16,i=>!!i.shiftKey],Meta:[91,i=>!!i.metaKey]},Eb={style:"cursor: crosshair"};function _b(i={}){let[e,t]=Ab[i.key||"Alt"],n=si.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[n,nt.contentAttributes.of(r=>{var o;return!((o=r.plugin(n))===null||o===void 0)&&o.isDown?Eb:null})]}const il="-10000px";class Ug{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(n)}update(e){var t;let n=e.state.facet(this.facet),r=n.filter(s=>s);if(n===this.input){for(let s of this.tooltipViews)s.update&&s.update(e);return!1}let o=[];for(let s=0;s<r.length;s++){let a=r[s],l=-1;if(a){for(let h=0;h<this.tooltips.length;h++){let c=this.tooltips[h];c&&c.create==a.create&&(l=h)}if(l<0)o[s]=this.createTooltipView(a);else{let h=o[s]=this.tooltipViews[l];h.update&&h.update(e)}}}for(let s of this.tooltipViews)o.indexOf(s)<0&&(s.dom.remove(),(t=s.destroy)===null||t===void 0||t.call(s));return this.input=n,this.tooltips=r,this.tooltipViews=o,!0}}function Tb(i){let{win:e}=i;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const xh=ot.define({combine:i=>{var e,t,n;return{position:ht.ios?"absolute":((e=i.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=i.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=i.find(r=>r.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||Tb}}}),A0=new WeakMap,zg=si.fromClass(class{constructor(i){this.view=i,this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=i.state.facet(xh);this.position=e.position,this.parent=e.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Ug(i,nf,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(i);e&&this.observeIntersection();let t=e||i.geometryChanged,n=i.state.facet(xh);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(i){let e=i.create(this.view);if(e.dom.classList.add("cm-tooltip"),i.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=il,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var i,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(i=t.destroy)===null||i===void 0||i.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=this.view.dom.getBoundingClientRect(),e=1,t=1,n=!1;if(this.position=="fixed"){let r=this.manager.tooltipViews;n=r.length>0&&r[0].dom.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,t=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:i,parent:this.parent?this.container.getBoundingClientRect():i,pos:this.manager.tooltips.map((r,o)=>{let s=this.manager.tooltipViews[o];return s.getCoords?s.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(xh).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:n}}writeMeasure(i){var e;if(i.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{editor:t,space:n,scaleX:r,scaleY:o}=i,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:c}=h,p=i.pos[a],d=i.size[a];if(!p||p.bottom<=Math.max(t.top,n.top)||p.top>=Math.min(t.bottom,n.bottom)||p.right<Math.max(t.left,n.left)-.1||p.left>Math.min(t.right,n.right)+.1){c.style.top=il;continue}let v=l.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,D=v?7:0,m=d.right-d.left,y=(e=A0.get(h))!==null&&e!==void 0?e:d.bottom-d.top,x=h.offset||Fb,w=this.view.textDirection==ii.LTR,_=d.width>n.right-n.left?w?n.left:n.right-d.width:w?Math.min(p.left-(v?14:0)+x.x,n.right-m):Math.max(n.left,p.left-m+(v?14:0)-x.x),I=!!l.above;!l.strictSide&&(I?p.top-(d.bottom-d.top)-x.y<n.top:p.bottom+(d.bottom-d.top)+x.y>n.bottom)&&I==n.bottom-p.bottom>p.top-n.top&&(I=!I);let N=(I?p.top-n.top:n.bottom-p.bottom)-D;if(N<y&&h.resize!==!1){if(N<this.view.defaultLineHeight){c.style.top=il;continue}A0.set(h,y),c.style.height=(y=N)/o+"px"}else c.style.height&&(c.style.height="");let Y=I?p.top-y-D-x.y:p.bottom+D+x.y,j=_+m;if(h.overlap!==!0)for(let ae of s)ae.left<j&&ae.right>_&&ae.top<Y+y&&ae.bottom>Y&&(Y=I?ae.top-y-2-D:ae.bottom+D+2);if(this.position=="absolute"?(c.style.top=(Y-i.parent.top)/o+"px",c.style.left=(_-i.parent.left)/r+"px"):(c.style.top=Y/o+"px",c.style.left=_/r+"px"),v){let ae=p.left+(w?x.x:-x.x)-(_+14-7);v.style.left=ae/r+"px"}h.overlap!==!0&&s.push({left:_,top:Y,right:j,bottom:Y+y}),c.classList.toggle("cm-tooltip-above",I),c.classList.toggle("cm-tooltip-below",!I),h.positioned&&h.positioned(i.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=il}},{eventObservers:{scroll(){this.maybeMeasure()}}}),Ib=nt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Fb={x:0,y:0},nf=ot.define({enables:[zg,Ib]}),Yl=ot.define();class rf{static create(e){return new rf(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Ug(e,Yl,t=>this.createHostedView(t))}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}}const Qb=nf.compute([Yl],i=>{let e=i.facet(Yl).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:rf.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class Mb{constructor(e,t,n,r,o){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let r,o=1;if(n instanceof _r)r=n.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let a=e.coordsAtPos(r);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(c=>c.from<=r&&c.to>=r),h=l&&l.dir==ii.RTL?-1:1;o=t.x<a.left?-h:h}let s=this.source(e,r,o);if(s!=null&&s.then){let a=this.pending={pos:r};s.then(l=>{this.pending==a&&(this.pending=null,l&&e.dispatch({effects:this.setHover.of(l)}))},l=>Sn(e.state,l,"hover tooltip"))}else s&&e.dispatch({effects:this.setHover.of(s)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!E0(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,o=(t=n==null?void 0:n.end)!==null&&t!==void 0?t:r;(r==o?this.view.posAtCoords(this.lastMove)!=r:!Bb(this.view,r,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!E0(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function E0(i){for(let e=i;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function Bb(i,e,t,n,r,o){let s=i.scrollDOM.getBoundingClientRect(),a=i.documentTop+i.documentPadding.top+i.contentHeight;if(s.left>n||s.right<n||s.top>r||Math.min(s.bottom,a)<r)return!1;let l=i.posAtCoords({x:n,y:r},!1);return l>=e&&l<=t}function $b(i,e={}){let t=bt.define(),n=Si.define({create(){return null},update(r,o){if(r&&(e.hideOnChange&&(o.docChanged||o.selection)||e.hideOn&&e.hideOn(o,r)))return null;if(r&&o.docChanged){let s=o.changes.mapPos(r.pos,-1,Ci.TrackDel);if(s==null)return null;let a=Object.assign(Object.create(null),r);a.pos=s,r.end!=null&&(a.end=o.changes.mapPos(r.end)),r=a}for(let s of o.effects)s.is(t)&&(r=s.value),s.is(Rb)&&(r=null);return r},provide:r=>Yl.from(r)});return[n,si.define(r=>new Mb(r,i,n,t,e.hoverTime||300)),Qb]}function Nb(i,e){let t=i.plugin(zg);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const Rb=bt.define(),_0=ot.define({combine(i){let e,t;for(let n of i)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function ma(i,e){let t=i.plugin(jg),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const jg=si.fromClass(class{constructor(i){this.input=i.state.facet(Os),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(i));let e=i.state.facet(_0);this.top=new nl(i,!0,e.topContainer),this.bottom=new nl(i,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(i){let e=i.state.facet(_0);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new nl(i.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new nl(i.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=i.state.facet(Os);if(t!=this.input){let n=t.filter(l=>l),r=[],o=[],s=[],a=[];for(let l of n){let h=this.specs.indexOf(l),c;h<0?(c=l(i.view),a.push(c)):(c=this.panels[h],c.update&&c.update(i)),r.push(c),(c.top?o:s).push(c)}this.specs=n,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>nt.scrollMargins.of(e=>{let t=e.plugin(i);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class nl{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=T0(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=T0(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function T0(i){let e=i.nextSibling;return i.remove(),e}const Os=ot.define({enables:jg});class dr extends vs{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}dr.prototype.elementClass="";dr.prototype.toDOM=void 0;dr.prototype.mapMode=Ci.TrackBefore;dr.prototype.startSide=dr.prototype.endSide=-1;dr.prototype.point=!0;const Ll=ot.define(),Xb={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ut.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},ea=ot.define();function Wb(i){return[Gg(),ea.of(Object.assign(Object.assign({},Xb),i))]}const Sc=ot.define({combine:i=>i.some(e=>e)});function Gg(i){let e=[Yb];return i&&i.fixed===!1&&e.push(Sc.of(!0)),e}const Yb=si.fromClass(class{constructor(i){this.view=i,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=i.state.facet(ea).map(e=>new F0(i,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!i.state.facet(Sc),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}update(i){if(this.updateGutters(i)){let e=this.prevViewport,t=i.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}i.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Sc)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=i.view.viewport}syncGutters(i){let e=this.dom.nextSibling;i&&this.dom.remove();let t=Ut.iter(this.view.state.facet(Ll),this.view.viewport.from),n=[],r=this.gutters.map(o=>new Zb(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(o.type)){let s=!0;for(let a of o.type)if(a.type==Ji.Text&&s){wc(t,n,a.from);for(let l of r)l.line(this.view,a,n);s=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(o.type==Ji.Text){wc(t,n,o.from);for(let s of r)s.line(this.view,o,n)}else if(o.widget)for(let s of r)s.widget(this.view,o);for(let o of r)o.finish();i&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(i){let e=i.startState.facet(ea),t=i.state.facet(ea),n=i.docChanged||i.heightChanged||i.viewportChanged||!Ut.eq(i.startState.facet(Ll),i.state.facet(Ll),i.view.viewport.from,i.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(i)&&(n=!0);else{n=!0;let r=[];for(let o of t){let s=e.indexOf(o);s<0?r.push(new F0(this.view,o)):(this.gutters[s].update(i),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)this.dom.appendChild(o.dom);this.gutters=r}return n}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove()}},{provide:i=>nt.scrollMargins.of(e=>{let t=e.plugin(i);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==ii.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function I0(i){return Array.isArray(i)?i:[i]}function wc(i,e,t){for(;i.value&&i.from<=t;)i.from==t&&e.push(i.value),i.next()}class Zb{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=Ut.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:r}=this,o=t.top-this.height;if(this.i==r.elements.length){let s=new Vg(e,t.height,o,n);r.elements.push(s),r.dom.appendChild(s.dom)}else r.elements[this.i].update(e,t.height,o,n);this.height=t.bottom,this.i++}line(e,t,n){let r=[];wc(this.cursor,r,t.from),n.length&&(r=r.concat(n));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let s=this.gutter;r.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t);n&&this.addElement(e,t,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class F0{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,r=>{let o=r.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let l=o.getBoundingClientRect();s=(l.top+l.bottom)/2}else s=r.clientY;let a=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[n](e,a,r)&&r.preventDefault()});this.markers=I0(t.markers(e)),t.initialSpacer&&(this.spacer=new Vg(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=I0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let n=e.view.viewport;return!Ut.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Vg{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.height=t,this.dom.style.height=t/e.scaleY+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n/e.scaleY+"px":""),Ub(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let a=s,l=o<t.length?t[o++]:null,h=!1;if(l){let c=l.elementClass;c&&(n+=" "+c);for(let p=s;p<this.markers.length;p++)if(this.markers[p].compare(l)){a=p,h=!0;break}}else a=this.markers.length;for(;s<a;){let c=this.markers[s++];if(c.toDOM){c.destroy(r);let p=r.nextSibling;r.remove(),r=p}}if(!l)break;l.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),h&&s++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function Ub(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].compare(e[t]))return!1;return!0}const zb=ot.define(),zs=ot.define({combine(i){return ir(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let r in t){let o=n[r],s=t[r];n[r]=o?(a,l,h)=>o(a,l,h)||s(a,l,h):s}return n}})}});class Dh extends dr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ch(i,e){return i.state.facet(zs).formatNumber(e,i.state)}const jb=ea.compute([zs],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(zb)},lineMarker(e,t,n){return n.some(r=>r.toDOM)?null:new Dh(Ch(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(zs)!=e.state.facet(zs),initialSpacer(e){return new Dh(Ch(e,Q0(e.state.doc.lines)))},updateSpacer(e,t){let n=Ch(t.view,Q0(t.view.state.doc.lines));return n==e.number?e:new Dh(n)},domEventHandlers:i.facet(zs).domEventHandlers}));function Gb(i={}){return[zs.of(i),Gg(),jb]}function Q0(i){let e=9;for(;e<i;)e=e*10+9;return e}const Vb=new class extends dr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},qb=Ll.compute(["selection"],i=>{let e=[],t=-1;for(let n of i.selection.ranges){let r=i.doc.lineAt(n.head).from;r>t&&(t=r,e.push(Vb.range(r)))}return Ut.of(e)});function Hb(){return qb}const qg=1024;let Jb=0;class bh{constructor(e,t){this.from=e,this.to=t}}class Tt{constructor(e={}){this.id=Jb++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=an.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}Tt.closedBy=new Tt({deserialize:i=>i.split(" ")});Tt.openedBy=new Tt({deserialize:i=>i.split(" ")});Tt.group=new Tt({deserialize:i=>i.split(" ")});Tt.contextHash=new Tt({perNode:!0});Tt.lookAhead=new Tt({perNode:!0});Tt.mounted=new Tt({perNode:!0});const Kb=Object.create(null);class an{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Kb,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new an(e.name||"",t,e.id,n);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Tt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return n=>{for(let r=n.prop(Tt.group),o=-1;o<(r?r.length:0);o++){let s=t[o<0?n.name:r[o]];if(s)return s}}}}an.none=new an("",Object.create(null),0,8);class sf{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let o of e){let s=o(n);s&&(r||(r=Object.assign({},n.props)),r[s[0].id]=s[1])}t.push(r?new an(n.name,r,n.id,n.flags):n)}return new sf(t)}}const rl=new WeakMap,M0=new WeakMap;var Ai;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(Ai||(Ai={}));class fi{constructor(e,t,n,r,o){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=this.prop(Tt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let r=n.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new zl(this.topNode,e)}cursorAt(e,t=0,n=0){let r=rl.get(this)||this.topNode,o=new zl(r);return o.moveTo(e,t),rl.set(this,o._tree),o}get topNode(){return new $n(this,0,0,null)}resolve(e,t=0){let n=ho(rl.get(this)||this.topNode,e,t,!1);return rl.set(this,n),n}resolveInner(e,t=0){let n=ho(M0.get(this)||this.topNode,e,t,!0);return M0.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:o=this.length}=e;for(let s=this.cursor((e.mode||0)|Ai.IncludeAnonymous);;){let a=!1;if(s.from<=o&&s.to>=r&&(s.type.isAnonymous||t(s)!==!1)){if(s.firstChild())continue;a=!0}for(;a&&n&&!s.type.isAnonymous&&n(s),!s.nextSibling();){if(!s.parent())return;a=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:lf(an.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,r)=>new fi(this.type,t,n,r,this.propValues),e.makeTree||((t,n,r)=>new fi(an.none,t,n,r)))}static build(e){return tS(e)}}fi.empty=new fi(an.none,[],[],0);class of{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new of(this.buffer,this.index)}}class bs{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return an.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,n==e)return o;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,n,r,o){let{buffer:s}=this,a=-1;for(let l=e;l!=t&&!(Hg(o,r,s[l+1],s[l+2])&&(a=l,n>0));l=s[l+3]);return a}slice(e,t,n,r){let o=this.buffer,s=new Uint16Array(t-e);for(let a=e,l=0;a<t;)s[l++]=o[a++],s[l++]=o[a++]-n,s[l++]=o[a++]-n,s[l++]=o[a++]-e;return new bs(s,r-n,this.set)}}function Hg(i,e,t,n){switch(i){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function Jg(i,e){let t=i.childBefore(e);for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(i=t,t=n.prevSibling):t=n}return i}function ho(i,e,t,n){for(var r;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let s=!n&&i instanceof $n&&i.index<0?null:i.parent;if(!s)return i;i=s}let o=n?0:Ai.IgnoreOverlays;if(n)for(let s=i,a=s.parent;a;s=a,a=s.parent)s instanceof $n&&s.index<0&&((r=a.enter(e,t,o))===null||r===void 0?void 0:r.from)!=s.from&&(i=a);for(;;){let s=i.enter(e,t,o);if(!s)return i;i=s}}class $n{constructor(e,t,n,r){this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,o=0){for(let s=this;;){for(let{children:a,positions:l}=s._tree,h=t>0?a.length:-1;e!=h;e+=t){let c=a[e],p=l[e]+s.from;if(Hg(r,n,p,p+c.length)){if(c instanceof bs){if(o&Ai.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,t,n-p,r);if(d>-1)return new Hn(new eS(s,c,e,p),null,d)}else if(o&Ai.IncludeAnonymous||!c.type.isAnonymous||af(c)){let d;if(!(o&Ai.IgnoreMounts)&&c.props&&(d=c.prop(Tt.mounted))&&!d.overlay)return new $n(d.tree,p,e,s);let v=new $n(c,p,e,s);return o&Ai.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(t<0?c.children.length-1:0,t,n,r)}}}if(o&Ai.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&Ai.IgnoreOverlays)&&(r=this._tree.prop(Tt.mounted))&&r.overlay){let o=e-this.from;for(let{from:s,to:a}of r.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new $n(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new zl(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return ho(this,e,t,!1)}resolveInner(e,t=0){return ho(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Jg(this,e)}getChild(e,t=null,n=null){let r=Zl(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return Zl(this,e,t,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Ul(this,e)}}function Zl(i,e,t,n){let r=i.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(;!r.type.is(t);)if(!r.nextSibling())return o}for(;;){if(n!=null&&r.type.is(n))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return n==null?o:[]}}function Ul(i,e,t=e.length-1){for(let n=i.parent;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class eS{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class Hn{constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,n){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return o<0?null:new Hn(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Ai.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Hn(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Hn(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Hn(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new zl(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,o=n.buffer[this.index+3];if(o>r){let s=n.buffer[this.index+1],a=n.buffer[this.index+2];e.push(n.slice(r,o,s,a)),t.push(0)}return new fi(this.type,e,t,this.to-this.from)}resolve(e,t=0){return ho(this,e,t,!1)}resolveInner(e,t=0){return ho(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Jg(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let r=Zl(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return Zl(this,e,t,n)}get node(){return this}matchContext(e){return Ul(this,e)}}class zl{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof $n)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return e?e instanceof $n?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&Ai.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ai.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ai.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let o=t+e,s=e<0?-1:n._tree.children.length;o!=s;o+=e){let a=n._tree.children[o];if(this.mode&Ai.IncludeAnonymous||a instanceof bs||!a.type.isAnonymous||af(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer){e:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==r){if(r==this.index)return s;t=s,n=o+1;break e}r=this.stack[--o]}}for(let r=n;r<this.stack.length;r++)t=new Hn(this.buffer,t,this.stack[r]);return this.bufferNode=new Hn(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return Ul(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return Ul(this.node,e,r);let s=n[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[r]&&e[r]!=s.name)return!1;r--}}return!0}}function af(i){return i.children.some(e=>e instanceof bs||!e.type.isAnonymous||af(e))}function tS(i){var e;let{buffer:t,nodeSet:n,maxBufferLength:r=qg,reused:o=[],minRepeatType:s=n.types.length}=i,a=Array.isArray(t)?new of(t,t.length):t,l=n.types,h=0,c=0;function p(I,N,Y,j,ae){let{id:K,start:oe,end:fe,size:U}=a,H=c;for(;U<0;)if(a.next(),U==-1){let Xe=o[K];Y.push(Xe),j.push(oe-I);return}else if(U==-3){h=K;return}else if(U==-4){c=K;return}else throw new RangeError(`Unrecognized record size: ${U}`);let B=l[K],re,Qe,De=oe-I;if(fe-oe<=r&&(Qe=m(a.pos-N,ae))){let Xe=new Uint16Array(Qe.size-Qe.skip),ge=a.pos-Qe.size,$e=Xe.length;for(;a.pos>ge;)$e=y(Qe.start,Xe,$e);re=new bs(Xe,fe-Qe.start,n),De=Qe.start-I}else{let Xe=a.pos-U;a.next();let ge=[],$e=[],ue=K>=s?K:-1,he=0,je=fe;for(;a.pos>Xe;)ue>=0&&a.id==ue&&a.size>=0?(a.end<=je-r&&(v(ge,$e,oe,he,a.end,je,ue,H),he=ge.length,je=a.end),a.next()):p(oe,Xe,ge,$e,ue);if(ue>=0&&he>0&&he<ge.length&&v(ge,$e,oe,he,oe,je,ue,H),ge.reverse(),$e.reverse(),ue>-1&&he>0){let We=d(B);re=lf(B,ge,$e,0,ge.length,0,fe-oe,We,We)}else re=D(B,ge,$e,fe-oe,H-fe)}Y.push(re),j.push(De)}function d(I){return(N,Y,j)=>{let ae=0,K=N.length-1,oe,fe;if(K>=0&&(oe=N[K])instanceof fi){if(!K&&oe.type==I&&oe.length==j)return oe;(fe=oe.prop(Tt.lookAhead))&&(ae=Y[K]+oe.length+fe)}return D(I,N,Y,j,ae)}}function v(I,N,Y,j,ae,K,oe,fe){let U=[],H=[];for(;I.length>j;)U.push(I.pop()),H.push(N.pop()+Y-ae);I.push(D(n.types[oe],U,H,K-ae,fe-K)),N.push(ae-Y)}function D(I,N,Y,j,ae=0,K){if(h){let oe=[Tt.contextHash,h];K=K?[oe].concat(K):[oe]}if(ae>25){let oe=[Tt.lookAhead,ae];K=K?[oe].concat(K):[oe]}return new fi(I,N,Y,j,K)}function m(I,N){let Y=a.fork(),j=0,ae=0,K=0,oe=Y.end-r,fe={size:0,start:0,skip:0};e:for(let U=Y.pos-I;Y.pos>U;){let H=Y.size;if(Y.id==N&&H>=0){fe.size=j,fe.start=ae,fe.skip=K,K+=4,j+=4,Y.next();continue}let B=Y.pos-H;if(H<0||B<U||Y.start<oe)break;let re=Y.id>=s?4:0,Qe=Y.start;for(Y.next();Y.pos>B;){if(Y.size<0)if(Y.size==-3)re+=4;else break e;else Y.id>=s&&(re+=4);Y.next()}ae=Qe,j+=H,K+=re}return(N<0||j==I)&&(fe.size=j,fe.start=ae,fe.skip=K),fe.size>4?fe:void 0}function y(I,N,Y){let{id:j,start:ae,end:K,size:oe}=a;if(a.next(),oe>=0&&j<s){let fe=Y;if(oe>4){let U=a.pos-(oe-4);for(;a.pos>U;)Y=y(I,N,Y)}N[--Y]=fe,N[--Y]=K-I,N[--Y]=ae-I,N[--Y]=j}else oe==-3?h=j:oe==-4&&(c=j);return Y}let x=[],w=[];for(;a.pos>0;)p(i.start||0,i.bufferStart||0,x,w,-1);let _=(e=i.length)!==null&&e!==void 0?e:x.length?w[0]+x[0].length:0;return new fi(l[i.topID],x.reverse(),w.reverse(),_)}const B0=new WeakMap;function kl(i,e){if(!i.isAnonymous||e instanceof bs||e.type!=i)return 1;let t=B0.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=i||!(n instanceof fi)){t=1;break}t+=kl(i,n)}B0.set(e,t)}return t}function lf(i,e,t,n,r,o,s,a,l){let h=0;for(let D=n;D<r;D++)h+=kl(i,e[D]);let c=Math.ceil(h*1.5/8),p=[],d=[];function v(D,m,y,x,w){for(let _=y;_<x;){let I=_,N=m[_],Y=kl(i,D[_]);for(_++;_<x;_++){let j=kl(i,D[_]);if(Y+j>=c)break;Y+=j}if(_==I+1){if(Y>c){let j=D[I];v(j.children,j.positions,0,j.children.length,m[I]+w);continue}p.push(D[I])}else{let j=m[_-1]+D[_-1].length-N;p.push(lf(i,D,m,I,_,N,j,null,l))}d.push(N+w-o)}}return v(e,t,n,r,0),(a||l)(p,d,s)}class iS{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof Hn?this.setBuffer(e.context.buffer,e.index,t):e instanceof $n&&this.map.set(e.tree,t)}get(e){return e instanceof Hn?this.getBuffer(e.context.buffer,e.index):e instanceof $n?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class ms{constructor(e,t,n,r,o=!1,s=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let r=[new ms(0,e.length,e,0,!1,n)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],o=1,s=e.length?e[0]:null;for(let a=0,l=0,h=0;;a++){let c=a<t.length?t[a]:null,p=c?c.fromA:1e9;if(p-l>=n)for(;s&&s.from<p;){let d=s;if(l>=d.from||p<=d.to||h){let v=Math.max(d.from,l)-h,D=Math.min(d.to,p)-h;d=v>=D?null:new ms(v,D,d.tree,d.offset+h,a>0,!!c)}if(d&&r.push(d),s.to>p)break;s=o<e.length?e[o++]:null}if(!c)break;l=c.toA,h=c.toA-c.toB}return r}}class Kg{startParse(e,t,n){return typeof e=="string"&&(e=new nS(e)),n=n?n.length?n.map(r=>new bh(r.from,r.to)):[new bh(0,0)]:[new bh(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let o=r.advance();if(o)return o}}}class nS{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Tt({perNode:!0});let rS=0;class jn{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=rS++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new jn([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new jl;return t=>t.modified.indexOf(e)>-1?t:jl.get(t.base||t,t.modified.concat(e).sort((n,r)=>n.id-r.id))}}let sS=0;class jl{constructor(){this.instances=[],this.id=sS++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(a=>a.base==e&&oS(t,a.modified));if(n)return n;let r=[],o=new jn(r,e,t);for(let a of t)a.instances.push(o);let s=ev(t);for(let a of e.set)for(let l of s)r.push(jl.get(a,l));return o}}function oS(i,e){return i.length==e.length&&i.every((t,n)=>t==e[n])}function ev(i){let e=[i];for(let t=0;t<i.length;t++)for(let n of ev(i.slice(0,t).concat(i.slice(t+1))))e.push(n);return e}function tv(i){let e=Object.create(null);for(let t in i){let n=i[t];Array.isArray(n)||(n=[n]);for(let r of t.split(" "))if(r){let o=[],s=2,a=r;for(let p=0;;){if(a=="..."&&p>0&&p+3==r.length){s=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!d)throw new RangeError("Invalid path: "+r);if(o.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),p+=d[0].length,p==r.length)break;let v=r[p++];if(p==r.length&&v=="!"){s=0;break}if(v!="/")throw new RangeError("Invalid path: "+r);a=r.slice(p)}let l=o.length-1,h=o[l];if(!h)throw new RangeError("Invalid path: "+r);let c=new aS(n,s,l>0?o.slice(0,l):null);e[h]=c.sort(e[h])}}return iv.add(e)}const iv=new Tt;class aS{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function nv(i,e){let t=Object.create(null);for(let o of i)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:n,all:r=null}=e||{};return{style:o=>{let s=r;for(let a of o)for(let l of a.set){let h=t[l.id];if(h){s=s?s+" "+h:h;break}}return s},scope:n}}function lS(i,e){let t=null;for(let n of i){let r=n.style(e);r&&(t=t?t+" "+r:r)}return t}function uS(i,e,t,n=0,r=i.length){let o=new hS(n,Array.isArray(e)?e:[e],t);o.highlightRange(i.cursor(),n,r,"",o.highlighters),o.flush(r)}class hS{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,o){let{type:s,from:a,to:l}=e;if(a>=n||l<=t)return;s.isTop&&(o=this.highlighters.filter(v=>!v.scope||v.scope(s)));let h=r,c=s.prop(iv),p=!1;for(;c;){if(!c.context||e.matchContext(c.context)){let v=lS(o,c.tags);v&&(h&&(h+=" "),h+=v,c.mode==1?r+=(r?" ":"")+v:c.mode==0&&(p=!0));break}c=c.next}if(this.startSpan(e.from,h),p)return;let d=e.tree&&e.tree.prop(Tt.mounted);if(d&&d.overlay){let v=e.node.enter(d.overlay[0].from+a,1),D=this.highlighters.filter(y=>!y.scope||y.scope(d.tree.type)),m=e.firstChild();for(let y=0,x=a;;y++){let w=y<d.overlay.length?d.overlay[y]:null,_=w?w.from+a:l,I=Math.max(t,x),N=Math.min(n,_);if(I<N&&m)for(;e.from<N&&(this.highlightRange(e,I,N,r,o),this.startSpan(Math.min(n,e.to),h),!(e.to>=_||!e.nextSibling())););if(!w||_>n)break;x=w.to+a,x>t&&(this.highlightRange(v.cursor(),Math.max(t,w.from+a),Math.min(n,x),r,D),this.startSpan(x,h))}m&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,o),this.startSpan(Math.min(n,e.to),h)}while(e.nextSibling());e.parent()}}}const He=jn.define,sl=He(),wr=He(),$0=He(wr),N0=He(wr),Pr=He(),ol=He(Pr),Sh=He(Pr),Un=He(),ss=He(Un),Yn=He(),Zn=He(),Pc=He(),Bo=He(Pc),al=He(),ke={comment:sl,lineComment:He(sl),blockComment:He(sl),docComment:He(sl),name:wr,variableName:He(wr),typeName:$0,tagName:He($0),propertyName:N0,attributeName:He(N0),className:He(wr),labelName:He(wr),namespace:He(wr),macroName:He(wr),literal:Pr,string:ol,docString:He(ol),character:He(ol),attributeValue:He(ol),number:Sh,integer:He(Sh),float:He(Sh),bool:He(Pr),regexp:He(Pr),escape:He(Pr),color:He(Pr),url:He(Pr),keyword:Yn,self:He(Yn),null:He(Yn),atom:He(Yn),unit:He(Yn),modifier:He(Yn),operatorKeyword:He(Yn),controlKeyword:He(Yn),definitionKeyword:He(Yn),moduleKeyword:He(Yn),operator:Zn,derefOperator:He(Zn),arithmeticOperator:He(Zn),logicOperator:He(Zn),bitwiseOperator:He(Zn),compareOperator:He(Zn),updateOperator:He(Zn),definitionOperator:He(Zn),typeOperator:He(Zn),controlOperator:He(Zn),punctuation:Pc,separator:He(Pc),bracket:Bo,angleBracket:He(Bo),squareBracket:He(Bo),paren:He(Bo),brace:He(Bo),content:Un,heading:ss,heading1:He(ss),heading2:He(ss),heading3:He(ss),heading4:He(ss),heading5:He(ss),heading6:He(ss),contentSeparator:He(Un),list:He(Un),quote:He(Un),emphasis:He(Un),strong:He(Un),link:He(Un),monospace:He(Un),strikethrough:He(Un),inserted:He(),deleted:He(),changed:He(),invalid:He(),meta:al,documentMeta:He(al),annotation:He(al),processingInstruction:He(al),definition:jn.defineModifier(),constant:jn.defineModifier(),function:jn.defineModifier(),standard:jn.defineModifier(),local:jn.defineModifier(),special:jn.defineModifier()};nv([{tag:ke.link,class:"tok-link"},{tag:ke.heading,class:"tok-heading"},{tag:ke.emphasis,class:"tok-emphasis"},{tag:ke.strong,class:"tok-strong"},{tag:ke.keyword,class:"tok-keyword"},{tag:ke.atom,class:"tok-atom"},{tag:ke.bool,class:"tok-bool"},{tag:ke.url,class:"tok-url"},{tag:ke.labelName,class:"tok-labelName"},{tag:ke.inserted,class:"tok-inserted"},{tag:ke.deleted,class:"tok-deleted"},{tag:ke.literal,class:"tok-literal"},{tag:ke.string,class:"tok-string"},{tag:ke.number,class:"tok-number"},{tag:[ke.regexp,ke.escape,ke.special(ke.string)],class:"tok-string2"},{tag:ke.variableName,class:"tok-variableName"},{tag:ke.local(ke.variableName),class:"tok-variableName tok-local"},{tag:ke.definition(ke.variableName),class:"tok-variableName tok-definition"},{tag:ke.special(ke.variableName),class:"tok-variableName2"},{tag:ke.definition(ke.propertyName),class:"tok-propertyName tok-definition"},{tag:ke.typeName,class:"tok-typeName"},{tag:ke.namespace,class:"tok-namespace"},{tag:ke.className,class:"tok-className"},{tag:ke.macroName,class:"tok-macroName"},{tag:ke.propertyName,class:"tok-propertyName"},{tag:ke.operator,class:"tok-operator"},{tag:ke.comment,class:"tok-comment"},{tag:ke.meta,class:"tok-meta"},{tag:ke.invalid,class:"tok-invalid"},{tag:ke.punctuation,class:"tok-punctuation"}]);var wh;const js=new Tt;function cS(i){return ot.define({combine:i?e=>e.concat(i):void 0})}const fS=new Tt;class Dn{constructor(e,t,n=[],r=""){this.data=e,this.name=r,$t.prototype.hasOwnProperty("tree")||Object.defineProperty($t.prototype,"tree",{get(){return di(this)}}),this.parser=t,this.extension=[Xr.of(this),$t.languageData.of((o,s,a)=>{let l=R0(o,s,a),h=l.type.prop(js);if(!h)return[];let c=o.facet(h),p=l.type.prop(fS);if(p){let d=l.resolve(s-l.from,a);for(let v of p)if(v.test(d,o)){let D=o.facet(v.facet);return v.type=="replace"?D:D.concat(c)}}return c})].concat(n)}isActiveAt(e,t,n=-1){return R0(e,t,n).type.prop(js)==this.data}findRegions(e){let t=e.facet(Xr);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(o,s)=>{if(o.prop(js)==this.data){n.push({from:s,to:s+o.length});return}let a=o.prop(Tt.mounted);if(a){if(a.tree.prop(js)==this.data){if(a.overlay)for(let l of a.overlay)n.push({from:l.from+s,to:l.to+s});else n.push({from:s,to:s+o.length});return}else if(a.overlay){let l=n.length;if(r(a.tree,a.overlay[0].from+s),n.length>l)return}}for(let l=0;l<o.children.length;l++){let h=o.children[l];h instanceof fi&&r(h,o.positions[l]+s)}};return r(di(e),0),n}get allowsNesting(){return!0}}Dn.setState=bt.define();function R0(i,e,t){let n=i.facet(Xr),r=di(i).topNode;if(!n||n.allowsNesting)for(let o=r;o;o=o.enter(e,t,Ai.ExcludeBuffers))o.type.isTop&&(r=o);return r}class Gl extends Dn{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=cS(e.languageData);return new Gl(t,e.parser.configure({props:[js.add(n=>n.isTop?t:void 0)]}),e.name)}configure(e,t){return new Gl(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function di(i){let e=i.field(Dn.state,!1);return e?e.tree:fi.empty}function uf(i,e,t=50){var n;let r=(n=i.field(Dn.state,!1))===null||n===void 0?void 0:n.context;if(!r)return null;let o=r.viewport;r.updateViewport({from:0,to:e});let s=r.isDone(e)||r.work(t,e)?r.tree:null;return r.updateViewport(o),s}class dS{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let $o=null;class Vl{constructor(e,t,n=[],r,o,s,a,l){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Vl(e,t,[],fi.empty,0,n,[],null)}startParse(){return this.parser.startParse(new dS(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=fi.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(ms.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(ms.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=$o;$o=this;try{return e()}finally{$o=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=X0(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((h,c,p,d)=>l.push({fromA:h,toA:c,fromB:p,toB:d})),n=ms.applyChanges(n,l),r=fi.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let c=e.mapPos(h.from,1),p=e.mapPos(h.to,-1);c<p&&a.push({from:c,to:p})}}}return new Vl(this.parser,t,n,r,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:o}=this.skipped[n];r<e.to&&o>e.from&&(this.fragments=X0(this.fragments,r,o),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Kg{createParse(t,n,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let l=$o;if(l){for(let h of r)l.tempSkipped.push(h);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=s,new fi(an.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return $o}}function X0(i,e,t){return ms.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}class co{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new co(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=Vl.create(e.facet(Xr).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new co(n)}}Dn.state=Si.define({create:co.init,update(i,e){for(let t of e.effects)if(t.is(Dn.setState))return t.value;return e.startState.facet(Xr)!=e.state.facet(Xr)?co.init(e.state):i.apply(e)}});let rv=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(rv=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Ph=typeof navigator<"u"&&(!((wh=navigator.scheduling)===null||wh===void 0)&&wh.isInputPending)?()=>navigator.scheduling.isInputPending():null,pS=si.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Dn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Dn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=rv(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,o=n.field(Dn.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Ph?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<r&&n.doc.length>r+1e3,l=o.context.work(()=>Ph&&Ph()||Date.now()>s,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Dn.setState.of(new co(o.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Sn(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Xr=ot.define({combine(i){return i.length?i[0]:null},enables:i=>[Dn.state,pS,nt.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]});class mS{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const gS=ot.define(),xs=ot.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function ql(i){let e=i.facet(xs);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function ga(i,e){let t="",n=i.tabSize,r=i.facet(xs)[0];if(r=="	"){for(;e>=n;)t+="	",e-=n;r=" "}for(let o=0;o<e;o++)t+=r;return t}function hf(i,e){i instanceof $t&&(i=new Eu(i));for(let n of i.state.facet(gS)){let r=n(i,e);if(r!==void 0)return r}let t=di(i.state);return t.length>=e?vS(i,t,e):null}class Eu{constructor(e,t={}){this.state=e,this.options=t,this.unit=ql(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=n.from&&r<=n.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),o=this.countColumn(n,e-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(n,n.search(/\S|$/))),o}countColumn(e,t=e.length){return wa(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const sv=new Tt;function vS(i,e,t){return ov(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,i)}function yS(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function OS(i){let e=i.type.prop(sv);if(e)return e;let t=i.firstChild,n;if(t&&(n=t.type.prop(Tt.closedBy))){let r=i.lastChild,o=r&&n.indexOf(r.name)>-1;return s=>av(s,!0,1,void 0,o&&!yS(s)?r.from:void 0)}return i.parent==null?xS:null}function ov(i,e,t){for(;i;i=i.parent){let n=OS(i);if(n)return n(cf.create(t,e,i))}return null}function xS(){return 0}class cf extends Eu{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}static create(e,t,n){return new cf(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(DS(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){let e=this.node.parent;return e?ov(e,this.pos,this.base):0}}function DS(i,e){for(let t=e;t;t=t.parent)if(i==t)return!0;return!1}function CS(i){let e=i.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let r=i.options.simulateBreak,o=i.state.doc.lineAt(t.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==n)return null;if(!l.type.isSkipped)return l.from<s?t:null;a=l.to}}function bS({closing:i,align:e=!0,units:t=1}){return n=>av(n,e,t,i)}function av(i,e,t,n,r){let o=i.textAfter,s=o.match(/^\s*/)[0].length,a=n&&o.slice(s,s+n.length)==n||r==i.pos+s,l=e?CS(i):null;return l?a?i.column(l.from):i.column(l.to):i.baseIndent+(a?0:i.unit*t)}const SS=i=>i.baseIndent;function Lh({except:i,units:e=1}={}){return t=>{let n=i&&i.test(t.textAfter);return t.baseIndent+(n?0:e*t.unit)}}const wS=200;function PS(){return $t.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let e=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!e.length)return i;let t=i.newDoc,{head:n}=i.newSelection.main,r=t.lineAt(n);if(n>r.from+wS)return i;let o=t.sliceString(r.from,n);if(!e.some(h=>h.test(o)))return i;let{state:s}=i,a=-1,l=[];for(let{head:h}of s.selection.ranges){let c=s.doc.lineAt(h);if(c.from==a)continue;a=c.from;let p=hf(s,c.from);if(p==null)continue;let d=/^\s*/.exec(c.text)[0],v=ga(s,p);d!=v&&l.push({from:c.from,to:c.from+d.length,insert:v})}return l.length?[i,{changes:l,sequential:!0}]:i})}const LS=ot.define(),lv=new Tt;function kS(i){let e=i.firstChild,t=i.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?i.to:t.from}:null}function AS(i,e,t){let n=di(i);if(n.length<t)return null;let r=n.resolveInner(t,1),o=null;for(let s=r;s;s=s.parent){if(s.to<=t||s.from>t)continue;if(o&&s.from<e)break;let a=s.type.prop(lv);if(a&&(s.to<n.length-50||n.length==i.doc.length||!ES(s))){let l=a(s,i);l&&l.from<=t&&l.from>=e&&l.to>t&&(o=l)}}return o}function ES(i){let e=i.lastChild;return e&&e.to==i.to&&e.type.isError}function Hl(i,e,t){for(let n of i.facet(LS)){let r=n(i,e,t);if(r)return r}return AS(i,e,t)}function uv(i,e){let t=e.mapPos(i.from,1),n=e.mapPos(i.to,-1);return t>=n?void 0:{from:t,to:n}}const _u=bt.define({map:uv}),Ea=bt.define({map:uv});function hv(i){let e=[];for(let{head:t}of i.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(i.lineBlockAt(t));return e}const Ds=Si.define({create(){return gt.none},update(i,e){i=i.map(e.changes);for(let t of e.effects)if(t.is(_u)&&!_S(i,t.value.from,t.value.to)){let{preparePlaceholder:n}=e.state.facet(ff),r=n?gt.replace({widget:new BS(n(e.state,t.value))}):W0;i=i.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(Ea)&&(i=i.update({filter:(n,r)=>t.value.from!=n||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:n}=e.selection.main;i.between(n,n,(r,o)=>{r<n&&o>n&&(t=!0)}),t&&(i=i.update({filterFrom:n,filterTo:n,filter:(r,o)=>o<=n||r>=n}))}return i},provide:i=>nt.decorations.from(i),toJSON(i,e){let t=[];return i.between(0,e.doc.length,(n,r)=>{t.push(n,r)}),t},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<i.length;){let n=i[t++],r=i[t++];if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(W0.range(n,r))}return gt.set(e,!0)}});function Jl(i,e,t){var n;let r=null;return(n=i.field(Ds,!1))===null||n===void 0||n.between(e,t,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function _S(i,e,t){let n=!1;return i.between(e,e,(r,o)=>{r==e&&o==t&&(n=!0)}),n}function cv(i,e){return i.field(Ds,!1)?e:e.concat(bt.appendConfig.of(pv()))}const fv=i=>{for(let e of hv(i)){let t=Hl(i.state,e.from,e.to);if(t)return i.dispatch({effects:cv(i.state,[_u.of(t),dv(i,t)])}),!0}return!1},TS=i=>{if(!i.state.field(Ds,!1))return!1;let e=[];for(let t of hv(i)){let n=Jl(i.state,t.from,t.to);n&&e.push(Ea.of(n),dv(i,n,!1))}return e.length&&i.dispatch({effects:e}),e.length>0};function dv(i,e,t=!0){let n=i.state.doc.lineAt(e.from).number,r=i.state.doc.lineAt(e.to).number;return nt.announce.of(`${i.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${i.state.phrase("to")} ${r}.`)}const IS=i=>{let{state:e}=i,t=[];for(let n=0;n<e.doc.length;){let r=i.lineBlockAt(n),o=Hl(e,r.from,r.to);o&&t.push(_u.of(o)),n=(o?i.lineBlockAt(o.to):r).to+1}return t.length&&i.dispatch({effects:cv(i.state,t)}),!!t.length},FS=i=>{let e=i.state.field(Ds,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,i.state.doc.length,(n,r)=>{t.push(Ea.of({from:n,to:r}))}),i.dispatch({effects:t}),!0},QS=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:fv},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:TS},{key:"Ctrl-Alt-[",run:IS},{key:"Ctrl-Alt-]",run:FS}],MS={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},ff=ot.define({combine(i){return ir(i,MS)}});function pv(i){let e=[Ds,RS];return i&&e.push(ff.of(i)),e}function mv(i,e){let{state:t}=i,n=t.facet(ff),r=s=>{let a=i.lineBlockAt(i.posAtDOM(s.target)),l=Jl(i.state,a.from,a.to);l&&i.dispatch({effects:Ea.of(l)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(i,r,e);let o=document.createElement("span");return o.textContent=n.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const W0=gt.replace({widget:new class extends pr{toDOM(i){return mv(i,null)}}});class BS extends pr{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return mv(e,this.value)}}const $S={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class kh extends dr{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function NS(i={}){let e=Object.assign(Object.assign({},$S),i),t=new kh(e,!0),n=new kh(e,!1),r=si.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(Xr)!=s.state.facet(Xr)||s.startState.field(Ds,!1)!=s.state.field(Ds,!1)||di(s.startState)!=di(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new er;for(let l of s.viewportLineBlocks){let h=Jl(s.state,l.from,l.to)?n:Hl(s.state,l.from,l.to)?t:null;h&&a.add(l.from,l.from,h)}return a.finish()}}),{domEventHandlers:o}=e;return[r,Wb({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(r))===null||a===void 0?void 0:a.markers)||Ut.empty},initialSpacer(){return new kh(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,a,l)=>{if(o.click&&o.click(s,a,l))return!0;let h=Jl(s.state,a.from,a.to);if(h)return s.dispatch({effects:Ea.of(h)}),!0;let c=Hl(s.state,a.from,a.to);return c?(s.dispatch({effects:_u.of(c)}),!0):!1}})}),pv()]}const RS=nt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Tu{constructor(e,t){this.specs=e;let n;function r(a){let l=Br.newName();return(n||(n=Object.create(null)))["."+l]=a,l}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,s=t.scope;this.scope=s instanceof Dn?a=>a.prop(js)==s.data:s?a=>a==s:void 0,this.style=nv(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=n?new Br(n):null,this.themeType=t.themeType}static define(e,t){return new Tu(e,t||{})}}const Lc=ot.define(),gv=ot.define({combine(i){return i.length?[i[0]]:null}});function Ah(i){let e=i.facet(Lc);return e.length?e:i.facet(gv)}function XS(i,e){let t=[YS],n;return i instanceof Tu&&(i.module&&t.push(nt.styleModule.of(i.module)),n=i.themeType),e!=null&&e.fallback?t.push(gv.of(i)):n?t.push(Lc.computeN([nt.darkTheme],r=>r.facet(nt.darkTheme)==(n=="dark")?[i]:[])):t.push(Lc.of(i)),t}class WS{constructor(e){this.markCache=Object.create(null),this.tree=di(e.state),this.decorations=this.buildDeco(e,Ah(e.state))}update(e){let t=di(e.state),n=Ah(e.state),r=n!=Ah(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return gt.none;let n=new er;for(let{from:r,to:o}of e.visibleRanges)uS(this.tree,t,(s,a,l)=>{n.add(s,a,this.markCache[l]||(this.markCache[l]=gt.mark({class:l})))},r,o);return n.finish()}}const YS=Zr.high(si.fromClass(WS,{decorations:i=>i.decorations})),ZS=Tu.define([{tag:ke.meta,color:"#404740"},{tag:ke.link,textDecoration:"underline"},{tag:ke.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ke.emphasis,fontStyle:"italic"},{tag:ke.strong,fontWeight:"bold"},{tag:ke.strikethrough,textDecoration:"line-through"},{tag:ke.keyword,color:"#708"},{tag:[ke.atom,ke.bool,ke.url,ke.contentSeparator,ke.labelName],color:"#219"},{tag:[ke.literal,ke.inserted],color:"#164"},{tag:[ke.string,ke.deleted],color:"#a11"},{tag:[ke.regexp,ke.escape,ke.special(ke.string)],color:"#e40"},{tag:ke.definition(ke.variableName),color:"#00f"},{tag:ke.local(ke.variableName),color:"#30a"},{tag:[ke.typeName,ke.namespace],color:"#085"},{tag:ke.className,color:"#167"},{tag:[ke.special(ke.variableName),ke.macroName],color:"#256"},{tag:ke.definition(ke.propertyName),color:"#00c"},{tag:ke.comment,color:"#940"},{tag:ke.invalid,color:"#f00"}]),US=nt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),vv=1e4,yv="()[]{}",Ov=ot.define({combine(i){return ir(i,{afterCursor:!0,brackets:yv,maxScanDistance:vv,renderMatch:GS})}}),zS=gt.mark({class:"cm-matchingBracket"}),jS=gt.mark({class:"cm-nonmatchingBracket"});function GS(i){let e=[],t=i.matched?zS:jS;return e.push(t.range(i.start.from,i.start.to)),i.end&&e.push(t.range(i.end.from,i.end.to)),e}const VS=Si.define({create(){return gt.none},update(i,e){if(!e.docChanged&&!e.selection)return i;let t=[],n=e.state.facet(Ov);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=Cn(e.state,r.head,-1,n)||r.head>0&&Cn(e.state,r.head-1,1,n)||n.afterCursor&&(Cn(e.state,r.head,1,n)||r.head<e.state.doc.length&&Cn(e.state,r.head+1,-1,n));o&&(t=t.concat(n.renderMatch(o,e.state)))}return gt.set(t,!0)},provide:i=>nt.decorations.from(i)}),qS=[VS,US];function HS(i={}){return[Ov.of(i),qS]}const JS=new Tt;function kc(i,e,t){let n=i.prop(e<0?Tt.openedBy:Tt.closedBy);if(n)return n;if(i.name.length==1){let r=t.indexOf(i.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function Ac(i){let e=i.type.prop(JS);return e?e(i.node):i}function Cn(i,e,t,n={}){let r=n.maxScanDistance||vv,o=n.brackets||yv,s=di(i),a=s.resolveInner(e,t);for(let l=a;l;l=l.parent){let h=kc(l.type,t,o);if(h&&l.from<l.to){let c=Ac(l);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return KS(i,e,t,l,c,h,o)}}return ew(i,e,t,s,a.type,r,o)}function KS(i,e,t,n,r,o,s){let a=n.parent,l={from:r.from,to:r.to},h=0,c=a==null?void 0:a.cursor();if(c&&(t<0?c.childBefore(n.from):c.childAfter(n.to)))do if(t<0?c.to<=n.from:c.from>=n.to){if(h==0&&o.indexOf(c.type.name)>-1&&c.from<c.to){let p=Ac(c);return{start:l,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(kc(c.type,t,s))h++;else if(kc(c.type,-t,s)){if(h==0){let p=Ac(c);return{start:l,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}h--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function ew(i,e,t,n,r,o,s){let a=t<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),l=s.indexOf(a);if(l<0||l%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},c=i.doc.iterRange(e,t>0?i.doc.length:0),p=0;for(let d=0;!c.next().done&&d<=o;){let v=c.value;t<0&&(d+=v.length);let D=e+d*t;for(let m=t>0?0:v.length-1,y=t>0?v.length:-1;m!=y;m+=t){let x=s.indexOf(v[m]);if(!(x<0||n.resolveInner(D+m,1).type!=r))if(x%2==0==t>0)p++;else{if(p==1)return{start:h,end:{from:D+m,to:D+m+1},matched:x>>1==l>>1};p--}}t>0&&(d+=v.length)}return c.done?{start:h,matched:!1}:null}function Y0(i,e,t,n=0,r=0){e==null&&(e=i.search(/[^\s\u00a0]/),e==-1&&(e=i.length));let o=r;for(let s=n;s<e;s++)i.charCodeAt(s)==9?o+=t-o%t:o++;return o}class tw{constructor(e,t,n,r){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),n;if(typeof e=="string"?n=t==e:n=t&&(e instanceof RegExp?e.test(t):e(t)),n)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Y0(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Y0(this.string,null,this.tabSize)}match(e,t,n){if(typeof e=="string"){let r=s=>n?s.toLowerCase():s,o=this.string.substr(this.pos,e.length);return r(o)==r(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}const iw=Object.create(null),Z0=[an.none],U0=[],nw=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])nw[i]=rw(iw,e);function Eh(i,e){U0.indexOf(i)>-1||(U0.push(i),console.warn(e))}function rw(i,e){let t=null;for(let o of e.split(".")){let s=i[o]||ke[o];s?typeof s=="function"?t?t=s(t):Eh(o,`Modifier ${o} used at start of tag`):t?Eh(o,`Tag ${o} used as modifier`):t=s:Eh(o,`Unknown highlighting tag ${o}`)}if(!t)return 0;let n=e.replace(/ /g,"_"),r=an.define({id:Z0.length,name:n,props:[tv({[n]:t})]});return Z0.push(r),r.id}const sw=i=>{let e=pf(i.state);return e.line?ow(i):e.block?lw(i):!1};function df(i,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=i(e,t);return r?(n(t.update(r)),!0):!1}}const ow=df(cw,0),aw=df(xv,0),lw=df((i,e)=>xv(i,e,hw(e)),0);function pf(i,e=i.selection.main.head){let t=i.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const No=50;function uw(i,{open:e,close:t},n,r){let o=i.sliceDoc(n-No,n),s=i.sliceDoc(r,r+No),a=/\s*$/.exec(o)[0].length,l=/^\s*/.exec(s)[0].length,h=o.length-a;if(o.slice(h-e.length,h)==e&&s.slice(l,l+t.length)==t)return{open:{pos:n-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let c,p;r-n<=2*No?c=p=i.sliceDoc(n,r):(c=i.sliceDoc(n,n+No),p=i.sliceDoc(r-No,r));let d=/^\s*/.exec(c)[0].length,v=/\s*$/.exec(p)[0].length,D=p.length-v-t.length;return c.slice(d,d+e.length)==e&&p.slice(D,D+t.length)==t?{open:{pos:n+d+e.length,margin:/\s/.test(c.charAt(d+e.length))?1:0},close:{pos:r-v-t.length,margin:/\s/.test(p.charAt(D-1))?1:0}}:null}function hw(i){let e=[];for(let t of i.selection.ranges){let n=i.doc.lineAt(t.from),r=t.to<=n.to?n:i.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>n.from?e[o].to=r.to:e.push({from:n.from,to:r.to})}return e}function xv(i,e,t=e.selection.ranges){let n=t.map(o=>pf(e,o.from).block);if(!n.every(o=>o))return null;let r=t.map((o,s)=>uw(e,n[s],o.from,o.to));if(i!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,s)=>r[s]?[]:[{from:o.from,insert:n[s].open+" "},{from:o.to,insert:" "+n[s].close}]))};if(i!=1&&r.some(o=>o)){let o=[];for(let s=0,a;s<r.length;s++)if(a=r[s]){let l=n[s],{open:h,close:c}=a;o.push({from:h.pos-l.open.length,to:h.pos+h.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:o}}return null}function cw(i,e,t=e.selection.ranges){let n=[],r=-1;for(let{from:o,to:s}of t){let a=n.length,l=1e9;for(let h=o;h<=s;){let c=e.doc.lineAt(h);if(c.from>r&&(o==s||s>c.from)){r=c.from;let p=pf(e,h).line;if(!p)continue;let d=/^\s*/.exec(c.text)[0].length,v=d==c.length,D=c.text.slice(d,d+p.length)==p?d:-1;d<c.text.length&&d<l&&(l=d),n.push({line:c,comment:D,token:p,indent:d,empty:v,single:!1})}h=c.to+1}if(l<1e9)for(let h=a;h<n.length;h++)n[h].indent<n[h].line.text.length&&(n[h].indent=l);n.length==a+1&&(n[a].single=!0)}if(i!=2&&n.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:l,indent:h,empty:c,single:p}of n)(p||!c)&&o.push({from:a.from+h,insert:l+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(i!=1&&n.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:l}of n)if(a>=0){let h=s.from+a,c=h+l.length;s.text[c-s.from]==" "&&c++,o.push({from:h,to:c})}return{changes:o}}return null}const Ec=Ur.define(),fw=Ur.define(),dw=ot.define(),Dv=ot.define({combine(i){return ir(i,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function pw(i){let e=0;return i.iterChangedRanges((t,n)=>e=n),e}const Cv=Si.define({create(){return Jn.empty},update(i,e){let t=e.state.facet(Dv),n=e.annotation(Ec);if(n){let l=e.docChanged?Ee.single(pw(e.changes)):void 0,h=on.fromTransaction(e,l),c=n.side,p=c==0?i.undone:i.done;return h?p=Kl(p,p.length,t.minDepth,h):p=Sv(p,e.startState.selection),new Jn(c==0?n.rest:p,c==0?p:n.rest)}let r=e.annotation(fw);if((r=="full"||r=="before")&&(i=i.isolate()),e.annotation(bi.addToHistory)===!1)return e.changes.empty?i:i.addMapping(e.changes.desc);let o=on.fromTransaction(e),s=e.annotation(bi.time),a=e.annotation(bi.userEvent);return o?i=i.addChanges(o,s,a,t.newGroupDelay,t.minDepth):e.selection&&(i=i.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(r=="full"||r=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(e=>e.toJSON()),undone:i.undone.map(e=>e.toJSON())}},fromJSON(i){return new Jn(i.done.map(on.fromJSON),i.undone.map(on.fromJSON))}});function mw(i={}){return[Cv,Dv.of(i),nt.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?mf:e.inputType=="historyRedo"?gf:null;return n?(e.preventDefault(),n(t)):!1}})]}function Iu(i,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let r=t.field(Cv,!1);if(!r)return!1;let o=r.pop(i,t,e);return o?(n(o),!0):!1}}const mf=Iu(0,!1),gf=Iu(1,!1),gw=Iu(0,!0),vw=Iu(1,!0);class on{constructor(e,t,n,r,o){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new on(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new on(e.changes&&Di.fromJSON(e.changes),[],e.mapped&&Kn.fromJSON(e.mapped),e.startSelection&&Ee.fromJSON(e.startSelection),e.selectionsAfter.map(Ee.fromJSON))}static fromTransaction(e,t){let n=bn;for(let r of e.startState.facet(dw)){let o=r(e);o.length&&(n=n.concat(o))}return!n.length&&e.changes.empty?null:new on(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,bn)}static selection(e){return new on(void 0,bn,void 0,void 0,e)}}function Kl(i,e,t,n){let r=e+1>t+20?e-t-1:0,o=i.slice(r,e);return o.push(n),o}function yw(i,e){let t=[],n=!1;return i.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,s,a)=>{for(let l=0;l<t.length;){let h=t[l++],c=t[l++];a>=h&&s<=c&&(n=!0)}}),n}function Ow(i,e){return i.ranges.length==e.ranges.length&&i.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function bv(i,e){return i.length?e.length?i.concat(e):i:e}const bn=[],xw=200;function Sv(i,e){if(i.length){let t=i[i.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-xw));return n.length&&n[n.length-1].eq(e)?i:(n.push(e),Kl(i,i.length-1,1e9,t.setSelAfter(n)))}else return[on.selection([e])]}function Dw(i){let e=i[i.length-1],t=i.slice();return t[i.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function _h(i,e){if(!i.length)return i;let t=i.length,n=bn;for(;t;){let r=Cw(i[t-1],e,n);if(r.changes&&!r.changes.empty||r.effects.length){let o=i.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,n=r.selectionsAfter}return n.length?[on.selection(n)]:bn}function Cw(i,e,t){let n=bv(i.selectionsAfter.length?i.selectionsAfter.map(a=>a.map(e)):bn,t);if(!i.changes)return on.selection(n);let r=i.changes.map(e),o=e.mapDesc(i.changes,!0),s=i.mapped?i.mapped.composeDesc(o):o;return new on(r,bt.mapEffects(i.effects,e),s,i.startSelection.map(o),n)}const bw=/^(input\.type|delete)($|\.)/;class Jn{constructor(e,t,n=0,r=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new Jn(this.done,this.undone):this}addChanges(e,t,n,r,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!n||bw.test(n))&&(!a.selectionsAfter.length&&t-this.prevTime<r&&yw(a.changes,e.changes)||n=="input.type.compose")?s=Kl(s,s.length-1,o,new on(e.changes.compose(a.changes),bv(e.effects,a.effects),a.mapped,a.startSelection,bn)):s=Kl(s,s.length,o,e),new Jn(s,bn,t,n)}addSelection(e,t,n,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:bn;return o.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&Ow(o[o.length-1],e)?this:new Jn(Sv(this.done,e),this.undone,t,n)}addMapping(e){return new Jn(_h(this.done,e),_h(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1];if(n&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Ec.of({side:e,rest:Dw(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let s=r.length==1?bn:r.slice(0,r.length-1);return o.mapped&&(s=_h(s,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Ec.of({side:e,rest:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Jn.empty=new Jn(bn,bn);const Sw=[{key:"Mod-z",run:mf,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:gf,preventDefault:!0},{key:"Mod-u",run:gw,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:vw,preventDefault:!0}];function mo(i,e){return Ee.create(i.ranges.map(e),i.mainIndex)}function nr(i,e){return i.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function mr({state:i,dispatch:e},t){let n=mo(i.selection,t);return n.eq(i.selection)?!1:(e(nr(i,n)),!0)}function Fu(i,e){return Ee.cursor(e?i.to:i.from)}function vf(i,e){return mr(i,t=>t.empty?i.moveByChar(t,e):Fu(t,e))}function Pn(i){return i.textDirectionAt(i.state.selection.main.head)==ii.LTR}const yf=i=>vf(i,!Pn(i)),wv=i=>vf(i,Pn(i)),ww=i=>vf(i,!1);function Pv(i,e){return mr(i,t=>t.empty?i.moveByGroup(t,e):Fu(t,e))}const Pw=i=>Pv(i,!Pn(i)),Lw=i=>Pv(i,Pn(i));function kw(i,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(i.sliceDoc(e.from,e.to)))||e.firstChild}function Qu(i,e,t){let n=di(i).resolveInner(e.head),r=t?Tt.closedBy:Tt.openedBy;for(let l=e.head;;){let h=t?n.childAfter(l):n.childBefore(l);if(!h)break;kw(i,h,r)?n=h:l=t?h.to:h.from}let o=n.type.prop(r),s,a;return o&&(s=t?Cn(i,n.from,1):Cn(i,n.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?n.to:n.from,Ee.cursor(a,t?-1:1)}const Aw=i=>mr(i,e=>Qu(i.state,e,!Pn(i))),Ew=i=>mr(i,e=>Qu(i.state,e,Pn(i)));function Lv(i,e){return mr(i,t=>{if(!t.empty)return Fu(t,e);let n=i.moveVertically(t,e);return n.head!=t.head?n:i.moveToLineBoundary(t,e)})}const kv=i=>Lv(i,!1),Av=i=>Lv(i,!0);function Ev(i){return Math.max(i.defaultLineHeight,Math.min(i.dom.clientHeight,innerHeight)-5)}function _v(i,e){let{state:t}=i,n=mo(t.selection,a=>a.empty?i.moveVertically(a,e,Ev(i)):Fu(a,e));if(n.eq(t.selection))return!1;let r=i.coordsAtPos(t.selection.main.head),o=i.scrollDOM.getBoundingClientRect(),s;return r&&r.top>o.top&&r.bottom<o.bottom&&r.top-o.top<=i.scrollDOM.scrollHeight-i.scrollDOM.scrollTop-i.scrollDOM.clientHeight&&(s=nt.scrollIntoView(n.main.head,{y:"start",yMargin:r.top-o.top})),i.dispatch(nr(t,n),{effects:s}),!0}const z0=i=>_v(i,!1),_c=i=>_v(i,!0);function Mu(i,e,t){let n=i.lineBlockAt(e.head),r=i.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?n.to:n.from)&&(r=i.moveToLineBoundary(e,t,!1)),!t&&r.head==n.from&&n.length){let o=/^\s*/.exec(i.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;o&&e.head!=n.from+o&&(r=Ee.cursor(n.from+o))}return r}const Tc=i=>mr(i,e=>Mu(i,e,!0)),Ic=i=>mr(i,e=>Mu(i,e,!1)),_w=i=>mr(i,e=>Ee.cursor(i.lineBlockAt(e.head).from,1)),Tw=i=>mr(i,e=>Ee.cursor(i.lineBlockAt(e.head).to,-1));function Iw(i,e,t){let n=!1,r=mo(i.selection,o=>{let s=Cn(i,o.head,-1)||Cn(i,o.head,1)||o.head>0&&Cn(i,o.head-1,1)||o.head<i.doc.length&&Cn(i,o.head+1,-1);if(!s||!s.end)return o;n=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return t?Ee.range(o.anchor,a):Ee.cursor(a)});return n?(e(nr(i,r)),!0):!1}const Fw=({state:i,dispatch:e})=>Iw(i,e,!1);function rr(i,e){let t=mo(i.state.selection,n=>{let r=e(n);return Ee.range(n.anchor,r.head,r.goalColumn)});return t.eq(i.state.selection)?!1:(i.dispatch(nr(i.state,t)),!0)}function Tv(i,e){return rr(i,t=>i.moveByChar(t,e))}const Iv=i=>Tv(i,!Pn(i)),Fv=i=>Tv(i,Pn(i));function Qv(i,e){return rr(i,t=>i.moveByGroup(t,e))}const Qw=i=>Qv(i,!Pn(i)),Mw=i=>Qv(i,Pn(i)),Bw=i=>rr(i,e=>Qu(i.state,e,!Pn(i))),$w=i=>rr(i,e=>Qu(i.state,e,Pn(i)));function Mv(i,e){return rr(i,t=>i.moveVertically(t,e))}const Bv=i=>Mv(i,!1),$v=i=>Mv(i,!0);function Nv(i,e){return rr(i,t=>i.moveVertically(t,e,Ev(i)))}const j0=i=>Nv(i,!1),G0=i=>Nv(i,!0),V0=i=>rr(i,e=>Mu(i,e,!0)),q0=i=>rr(i,e=>Mu(i,e,!1)),Nw=i=>rr(i,e=>Ee.cursor(i.lineBlockAt(e.head).from)),Rw=i=>rr(i,e=>Ee.cursor(i.lineBlockAt(e.head).to)),H0=({state:i,dispatch:e})=>(e(nr(i,{anchor:0})),!0),J0=({state:i,dispatch:e})=>(e(nr(i,{anchor:i.doc.length})),!0),K0=({state:i,dispatch:e})=>(e(nr(i,{anchor:i.selection.main.anchor,head:0})),!0),ep=({state:i,dispatch:e})=>(e(nr(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),Xw=({state:i,dispatch:e})=>(e(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),Ww=({state:i,dispatch:e})=>{let t=Nu(i).map(({from:n,to:r})=>Ee.range(n,Math.min(r+1,i.doc.length)));return e(i.update({selection:Ee.create(t),userEvent:"select"})),!0},Yw=({state:i,dispatch:e})=>{let t=mo(i.selection,n=>{var r;let o=di(i).resolveInner(n.head,1);for(;!(o.from<n.from&&o.to>=n.to||o.to>n.to&&o.from<=n.from||!(!((r=o.parent)===null||r===void 0)&&r.parent));)o=o.parent;return Ee.range(o.to,o.from)});return e(nr(i,t)),!0},Zw=({state:i,dispatch:e})=>{let t=i.selection,n=null;return t.ranges.length>1?n=Ee.create([t.main]):t.main.empty||(n=Ee.create([Ee.cursor(t.main.head)])),n?(e(nr(i,n)),!0):!1};function Bu({state:i,dispatch:e},t){if(i.readOnly)return!1;let n="delete.selection",r=i.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let l=t(s);l<s?n="delete.backward":l>s&&(n="delete.forward"),s=Math.min(s,l),a=Math.max(a,l)}return s==a?{range:o}:{changes:{from:s,to:a},range:Ee.cursor(s)}});return r.changes.empty?!1:(e(i.update(r,{scrollIntoView:!0,userEvent:n})),!0)}function $u(i,e,t){if(i instanceof nt)for(let n of i.state.facet(nt.atomicRanges).map(r=>r(i)))n.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const Rv=(i,e)=>Bu(i,t=>{let{state:n}=i,r=n.doc.lineAt(t),o,s;if(!e&&t>r.from&&t<r.from+200&&!/[^ \t]/.test(o=r.text.slice(0,t-r.from))){if(o[o.length-1]=="	")return t-1;let a=wa(o,n.tabSize),l=a%ql(n)||ql(n);for(let h=0;h<l&&o[o.length-1-h]==" ";h++)t--;s=t}else s=Ui(r.text,t-r.from,e,e)+r.from,s==t&&r.number!=(e?n.doc.lines:1)&&(s+=e?1:-1);return $u(i,s,e)}),eu=i=>Rv(i,!1),Of=i=>Rv(i,!0),Xv=(i,e)=>Bu(i,t=>{let n=t,{state:r}=i,o=r.doc.lineAt(n),s=r.charCategorizer(n);for(let a=null;;){if(n==(e?o.to:o.from)){n==t&&o.number!=(e?r.doc.lines:1)&&(n+=e?1:-1);break}let l=Ui(o.text,n-o.from,e)+o.from,h=o.text.slice(Math.min(n,l)-o.from,Math.max(n,l)-o.from),c=s(h);if(a!=null&&c!=a)break;(h!=" "||n!=t)&&(a=c),n=l}return $u(i,n,e)}),Wv=i=>Xv(i,!1),Uw=i=>Xv(i,!0),Yv=i=>Bu(i,e=>{let t=i.lineBlockAt(e).to;return $u(i,e<t?t:Math.min(i.state.doc.length,e+1),!0)}),zw=i=>Bu(i,e=>{let t=i.lineBlockAt(e).from;return $u(i,e>t?t:Math.max(0,e-1),!1)}),jw=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Xt.of(["",""])},range:Ee.cursor(n.from)}));return e(i.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},Gw=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>{if(!n.empty||n.from==0||n.from==i.doc.length)return{range:n};let r=n.from,o=i.doc.lineAt(r),s=r==o.from?r-1:Ui(o.text,r-o.from,!1)+o.from,a=r==o.to?r+1:Ui(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:i.doc.slice(r,a).append(i.doc.slice(s,r))},range:Ee.cursor(a)}});return t.changes.empty?!1:(e(i.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Nu(i){let e=[],t=-1;for(let n of i.selection.ranges){let r=i.doc.lineAt(n.from),o=i.doc.lineAt(n.to);if(!n.empty&&n.to==o.from&&(o=i.doc.lineAt(n.to-1)),t>=r.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(n)}else e.push({from:r.from,to:o.to,ranges:[n]});t=o.number+1}return e}function Zv(i,e,t){if(i.readOnly)return!1;let n=[],r=[];for(let o of Nu(i)){if(t?o.to==i.doc.length:o.from==0)continue;let s=i.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){n.push({from:o.to,to:s.to},{from:o.from,insert:s.text+i.lineBreak});for(let l of o.ranges)r.push(Ee.range(Math.min(i.doc.length,l.anchor+a),Math.min(i.doc.length,l.head+a)))}else{n.push({from:s.from,to:o.from},{from:o.to,insert:i.lineBreak+s.text});for(let l of o.ranges)r.push(Ee.range(l.anchor-a,l.head-a))}}return n.length?(e(i.update({changes:n,scrollIntoView:!0,selection:Ee.create(r,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Vw=({state:i,dispatch:e})=>Zv(i,e,!1),qw=({state:i,dispatch:e})=>Zv(i,e,!0);function Uv(i,e,t){if(i.readOnly)return!1;let n=[];for(let r of Nu(i))t?n.push({from:r.from,insert:i.doc.slice(r.from,r.to)+i.lineBreak}):n.push({from:r.to,insert:i.lineBreak+i.doc.slice(r.from,r.to)});return e(i.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Hw=({state:i,dispatch:e})=>Uv(i,e,!1),Jw=({state:i,dispatch:e})=>Uv(i,e,!0),Kw=i=>{if(i.state.readOnly)return!1;let{state:e}=i,t=e.changes(Nu(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),n=mo(e.selection,r=>i.moveVertically(r,!0)).map(t);return i.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function eP(i,e){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=di(i).resolveInner(e),n=t.childBefore(e),r=t.childAfter(e),o;return n&&r&&n.to<=e&&r.from>=e&&(o=n.type.prop(Tt.closedBy))&&o.indexOf(r.name)>-1&&i.doc.lineAt(n.to).from==i.doc.lineAt(r.from).from?{from:n.to,to:r.from}:null}const zv=jv(!1),tP=jv(!0);function jv(i){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>{let{from:o,to:s}=r,a=e.doc.lineAt(o),l=!i&&o==s&&eP(e,o);i&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let h=new Eu(e,{simulateBreak:o,simulateDoubleBreak:!!l}),c=hf(h,o);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(o).text)[0].length);s<a.to&&/\s/.test(a.text[s-a.from]);)s++;l?{from:o,to:s}=l:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let p=["",ga(e,c)];return l&&p.push(ga(e,h.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:Xt.of(p)},range:Ee.cursor(o+1+p[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function xf(i,e){let t=-1;return i.changeByRange(n=>{let r=[];for(let s=n.from;s<=n.to;){let a=i.doc.lineAt(s);a.number>t&&(n.empty||n.to>a.from)&&(e(a,r,n),t=a.number),s=a.to+1}let o=i.changes(r);return{changes:r,range:Ee.range(o.mapPos(n.anchor,1),o.mapPos(n.head,1))}})}const Gv=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=Object.create(null),n=new Eu(i,{overrideIndentation:o=>{let s=t[o];return s??-1}}),r=xf(i,(o,s,a)=>{let l=hf(n,o.from);if(l==null)return;/\S/.test(o.text)||(l=0);let h=/^\s*/.exec(o.text)[0],c=ga(i,l);(h!=c||a.from<o.from+h.length)&&(t[o.from]=l,s.push({from:o.from,to:o.from+h.length,insert:c}))});return r.changes.empty||e(i.update(r,{userEvent:"indent"})),!0},Df=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(xf(i,(t,n)=>{n.push({from:t.from,insert:i.facet(xs)})}),{userEvent:"input.indent"})),!0),Cf=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(xf(i,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=wa(r,i.tabSize),s=0,a=ga(i,Math.max(0,o-ql(i)));for(;s<r.length&&s<a.length&&r.charCodeAt(s)==a.charCodeAt(s);)s++;n.push({from:t.from+s,to:t.from+r.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),iP=[{key:"Ctrl-b",run:yf,shift:Iv,preventDefault:!0},{key:"Ctrl-f",run:wv,shift:Fv},{key:"Ctrl-p",run:kv,shift:Bv},{key:"Ctrl-n",run:Av,shift:$v},{key:"Ctrl-a",run:_w,shift:Nw},{key:"Ctrl-e",run:Tw,shift:Rw},{key:"Ctrl-d",run:Of},{key:"Ctrl-h",run:eu},{key:"Ctrl-k",run:Yv},{key:"Ctrl-Alt-h",run:Wv},{key:"Ctrl-o",run:jw},{key:"Ctrl-t",run:Gw},{key:"Ctrl-v",run:_c}],nP=[{key:"ArrowLeft",run:yf,shift:Iv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Pw,shift:Qw},{mac:"Cmd-ArrowLeft",run:Ic,shift:q0},{key:"ArrowRight",run:wv,shift:Fv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Lw,shift:Mw},{mac:"Cmd-ArrowRight",run:Tc,shift:V0},{key:"ArrowUp",run:kv,shift:Bv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:H0,shift:K0},{mac:"Ctrl-ArrowUp",run:z0,shift:j0},{key:"ArrowDown",run:Av,shift:$v,preventDefault:!0},{mac:"Cmd-ArrowDown",run:J0,shift:ep},{mac:"Ctrl-ArrowDown",run:_c,shift:G0},{key:"PageUp",run:z0,shift:j0},{key:"PageDown",run:_c,shift:G0},{key:"Home",run:Ic,shift:q0,preventDefault:!0},{key:"Mod-Home",run:H0,shift:K0},{key:"End",run:Tc,shift:V0,preventDefault:!0},{key:"Mod-End",run:J0,shift:ep},{key:"Enter",run:zv},{key:"Mod-a",run:Xw},{key:"Backspace",run:eu,shift:eu},{key:"Delete",run:Of},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Wv},{key:"Mod-Delete",mac:"Alt-Delete",run:Uw},{mac:"Mod-Backspace",run:zw},{mac:"Mod-Delete",run:Yv}].concat(iP.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),rP=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Aw,shift:Bw},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Ew,shift:$w},{key:"Alt-ArrowUp",run:Vw},{key:"Shift-Alt-ArrowUp",run:Hw},{key:"Alt-ArrowDown",run:qw},{key:"Shift-Alt-ArrowDown",run:Jw},{key:"Escape",run:Zw},{key:"Mod-Enter",run:tP},{key:"Alt-l",mac:"Ctrl-l",run:Ww},{key:"Mod-i",run:Yw,preventDefault:!0},{key:"Mod-[",run:Cf},{key:"Mod-]",run:Df},{key:"Mod-Alt-\\",run:Gv},{key:"Shift-Mod-k",run:Kw},{key:"Shift-Mod-\\",run:Fw},{key:"Mod-/",run:sw},{key:"Alt-A",run:aw}].concat(nP),sP={key:"Tab",run:Df,shift:Cf};function Gt(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];typeof r=="string"?i.setAttribute(n,r):r!=null&&(i[n]=r)}e++}for(;e<arguments.length;e++)Vv(i,arguments[e]);return i}function Vv(i,e){if(typeof e=="string")i.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)i.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Vv(i,e[t]);else throw new RangeError("Unsupported child node: "+e)}const tp=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i;class fo{constructor(e,t,n=0,r=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=o?a=>o(tp(a)):tp,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ii(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=zc(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=dn(e);let r=this.normalize(t);for(let o=0,s=n;;o++){let a=r.charCodeAt(o),l=this.match(a,s);if(l)return this.value=l,this;if(o==r.length-1)break;s==n&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t){let n=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],s=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,s=!0)),s||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:t+1}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferPos)&&(n=null),n}}typeof Symbol<"u"&&(fo.prototype[Symbol.iterator]=function(){return this});const qv={from:-1,to:-1,match:/.*/.exec("")},bf="gm"+(/x/.unicode==null?"":"u");class Sf{constructor(e,t,n,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=qv,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Hv(e,t,n,r,o);this.re=new RegExp(t,bf+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let s=e.lineAt(r);this.curLineStart=s.from,this.matchPos=tu(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=tu(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Th=new WeakMap;class Ks{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=Th.get(e);if(!r||r.from>=n||r.to<=t){let a=new Ks(t,e.sliceString(t,n));return Th.set(e,a),a}if(r.from==t&&r.to==n)return r;let{text:o,from:s}=r;return s>t&&(o=e.sliceString(t,s)+o,s=t),r.to<n&&(o+=e.sliceString(r.to,n)),Th.set(e,new Ks(s,o)),new Ks(t,o.slice(t-s,n-s))}}class Hv{constructor(e,t,n,r,o){this.text=e,this.to=o,this.done=!1,this.value=qv,this.matchPos=tu(e,r),this.re=new RegExp(t,bf+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=Ks.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let n=this.flat.from+t.index,r=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this.matchPos=tu(this.text,r+(n==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ks.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Sf.prototype[Symbol.iterator]=Hv.prototype[Symbol.iterator]=function(){return this});function oP(i){try{return new RegExp(i,bf),!0}catch{return!1}}function tu(i,e){if(e>=i.length)return e;let t=i.lineAt(e),n;for(;e<t.to&&(n=t.text.charCodeAt(e-t.from))>=56320&&n<57344;)e++;return e}function Fc(i){let e=Gt("input",{class:"cm-textfield",name:"line"}),t=Gt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),i.dispatch({effects:iu.of(!1)}),i.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},Gt("label",i.state.phrase("Go to line"),": ",e)," ",Gt("button",{class:"cm-button",type:"submit"},i.state.phrase("go")));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:o}=i,s=o.doc.lineAt(o.selection.main.head),[,a,l,h,c]=r,p=h?+h.slice(1):0,d=l?+l:s.number;if(l&&c){let D=d/100;a&&(D=D*(a=="-"?-1:1)+s.number/o.doc.lines),d=Math.round(o.doc.lines*D)}else l&&a&&(d=d*(a=="-"?-1:1)+s.number);let v=o.doc.line(Math.max(1,Math.min(o.doc.lines,d)));i.dispatch({effects:iu.of(!1),selection:Ee.cursor(v.from+Math.max(0,Math.min(p,v.length))),scrollIntoView:!0}),i.focus()}return{dom:t}}const iu=bt.define(),ip=Si.define({create(){return!0},update(i,e){for(let t of e.effects)t.is(iu)&&(i=t.value);return i},provide:i=>Os.from(i,e=>e?Fc:null)}),aP=i=>{let e=ma(i,Fc);if(!e){let t=[iu.of(!0)];i.state.field(ip,!1)==null&&t.push(bt.appendConfig.of([ip,lP])),i.dispatch({effects:t}),e=ma(i,Fc)}return e&&e.dom.querySelector("input").focus(),!0},lP=nt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),uP={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Jv=ot.define({combine(i){return ir(i,uP,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function hP(i){let e=[mP,pP];return i&&e.push(Jv.of(i)),e}const cP=gt.mark({class:"cm-selectionMatch"}),fP=gt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function np(i,e,t,n){return(t==0||i(e.sliceDoc(t-1,t))!=ri.Word)&&(n==e.doc.length||i(e.sliceDoc(n,n+1))!=ri.Word)}function dP(i,e,t,n){return i(e.sliceDoc(t,t+1))==ri.Word&&i(e.sliceDoc(n-1,n))==ri.Word}const pP=si.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.selectionSet||i.docChanged||i.viewportChanged)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=i.state.facet(Jv),{state:t}=i,n=t.selection;if(n.ranges.length>1)return gt.none;let r=n.main,o,s=null;if(r.empty){if(!e.highlightWordAroundCursor)return gt.none;let l=t.wordAt(r.head);if(!l)return gt.none;s=t.charCategorizer(r.head),o=t.sliceDoc(l.from,l.to)}else{let l=r.to-r.from;if(l<e.minSelectionLength||l>200)return gt.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),s=t.charCategorizer(r.head),!(np(s,t,r.from,r.to)&&dP(s,t,r.from,r.to)))return gt.none}else if(o=t.sliceDoc(r.from,r.to).trim(),!o)return gt.none}let a=[];for(let l of i.visibleRanges){let h=new fo(t.doc,o,l.from,l.to);for(;!h.next().done;){let{from:c,to:p}=h.value;if((!s||np(s,t,c,p))&&(r.empty&&c<=r.from&&p>=r.to?a.push(fP.range(c,p)):(c>=r.to||p<=r.from)&&a.push(cP.range(c,p)),a.length>e.maxMatches))return gt.none}}return gt.set(a)}},{decorations:i=>i.decorations}),mP=nt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),gP=({state:i,dispatch:e})=>{let{selection:t}=i,n=Ee.create(t.ranges.map(r=>i.wordAt(r.head)||Ee.cursor(r.head)),t.mainIndex);return n.eq(t)?!1:(e(i.update({selection:n})),!0)};function vP(i,e){let{main:t,ranges:n}=i.selection,r=i.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let s=!1,a=new fo(i.doc,e,n[n.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new fo(i.doc,e,0,Math.max(0,n[n.length-1].from-1)),s=!0}else{if(s&&n.some(l=>l.from==a.value.from))continue;if(o){let l=i.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const yP=({state:i,dispatch:e})=>{let{ranges:t}=i.selection;if(t.some(o=>o.from===o.to))return gP({state:i,dispatch:e});let n=i.sliceDoc(t[0].from,t[0].to);if(i.selection.ranges.some(o=>i.sliceDoc(o.from,o.to)!=n))return!1;let r=vP(i,n);return r?(e(i.update({selection:i.selection.addRange(Ee.range(r.from,r.to),!1),effects:nt.scrollIntoView(r.to)})),!0):!1},go=ot.define({combine(i){return ir(i,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new EP(e),scrollToMatch:e=>nt.scrollIntoView(e)})}});class wf{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||oP(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new CP(this):new xP(this)}getCursor(e,t=0,n){let r=e.doc?e:$t.create({doc:e});return n==null&&(n=r.doc.length),this.regexp?Zs(this,r,t,n):Ys(this,r,t,n)}}class Kv{constructor(e){this.spec=e}}function Ys(i,e,t,n){return new fo(e.doc,i.unquoted,t,n,i.caseSensitive?void 0:r=>r.toLowerCase(),i.wholeWord?OP(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function OP(i,e){return(t,n,r,o)=>((o>t||o+r.length<n)&&(o=Math.max(0,t-2),r=i.sliceString(o,Math.min(i.length,n+2))),(e(nu(r,t-o))!=ri.Word||e(ru(r,t-o))!=ri.Word)&&(e(ru(r,n-o))!=ri.Word||e(nu(r,n-o))!=ri.Word))}class xP extends Kv{constructor(e){super(e)}nextMatch(e,t,n){let r=Ys(this.spec,e,n,e.doc.length).nextOverlapping();return r.done&&(r=Ys(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),s=Ys(this.spec,e,o,r),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;r-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=Ys(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let o=Ys(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function Zs(i,e,t,n){return new Sf(e.doc,i.search,{ignoreCase:!i.caseSensitive,test:i.wholeWord?DP(e.charCategorizer(e.selection.main.head)):void 0},t,n)}function nu(i,e){return i.slice(Ui(i,e,!1),e)}function ru(i,e){return i.slice(e,Ui(i,e))}function DP(i){return(e,t,n)=>!n[0].length||(i(nu(n.input,n.index))!=ri.Word||i(ru(n.input,n.index))!=ri.Word)&&(i(ru(n.input,n.index+n[0].length))!=ri.Word||i(nu(n.input,n.index+n[0].length))!=ri.Word)}class CP extends Kv{nextMatch(e,t,n){let r=Zs(this.spec,e,n,e.doc.length).next();return r.done&&(r=Zs(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let o=Math.max(t,n-r*1e4),s=Zs(this.spec,e,o,n),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=Zs(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let o=Zs(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const Wr=bt.define(),Pf=bt.define(),Fr=Si.define({create(i){return new Ih(Qc(i).create(),null)},update(i,e){for(let t of e.effects)t.is(Wr)?i=new Ih(t.value.create(),i.panel):t.is(Pf)&&(i=new Ih(i.query,t.value?Lf:null));return i},provide:i=>Os.from(i,e=>e.panel)});class Ih{constructor(e,t){this.query=e,this.panel=t}}const bP=gt.mark({class:"cm-searchMatch"}),SP=gt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),wP=si.fromClass(class{constructor(i){this.view=i,this.decorations=this.highlight(i.state.field(Fr))}update(i){let e=i.state.field(Fr);(e!=i.startState.field(Fr)||i.docChanged||i.selectionSet||i.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:i,panel:e}){if(!e||!i.spec.valid)return gt.none;let{view:t}=this,n=new er;for(let r=0,o=t.visibleRanges,s=o.length;r<s;r++){let{from:a,to:l}=o[r];for(;r<s-1&&l>o[r+1].from-2*250;)l=o[++r].to;i.highlight(t.state,a,l,(h,c)=>{let p=t.state.selection.ranges.some(d=>d.from==h&&d.to==c);n.add(h,c,p?SP:bP)})}return n.finish()}},{decorations:i=>i.decorations});function _a(i){return e=>{let t=e.state.field(Fr,!1);return t&&t.query.spec.valid?i(e,t):ey(e)}}const su=_a((i,{query:e})=>{let{to:t}=i.state.selection.main,n=e.nextMatch(i.state,t,t);if(!n)return!1;let r=Ee.single(n.from,n.to),o=i.state.facet(go);return i.dispatch({selection:r,effects:[kf(i,n),o.scrollToMatch(r.main)],userEvent:"select.search"}),!0}),ou=_a((i,{query:e})=>{let{state:t}=i,{from:n}=t.selection.main,r=e.prevMatch(t,n,n);if(!r)return!1;let o=Ee.single(r.from,r.to),s=i.state.facet(go);return i.dispatch({selection:o,effects:[kf(i,r),s.scrollToMatch(o.main)],userEvent:"select.search"}),!0}),PP=_a((i,{query:e})=>{let t=e.matchAll(i.state,1e3);return!t||!t.length?!1:(i.dispatch({selection:Ee.create(t.map(n=>Ee.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),LP=({state:i,dispatch:e})=>{let t=i.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:n,to:r}=t.main,o=[],s=0;for(let a=new fo(i.doc,i.sliceDoc(n,r));!a.next().done;){if(o.length>1e3)return!1;a.value.from==n&&(s=o.length),o.push(Ee.range(a.value.from,a.value.to))}return e(i.update({selection:Ee.create(o,s),userEvent:"select.search.matches"})),!0},rp=_a((i,{query:e})=>{let{state:t}=i,{from:n,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,n,n);if(!o)return!1;let s=[],a,l,h=[];if(o.from==n&&o.to==r&&(l=t.toText(e.getReplacement(o)),s.push({from:o.from,to:o.to,insert:l}),o=e.nextMatch(t,o.from,o.to),h.push(nt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(n).number)+"."))),o){let c=s.length==0||s[0].from>=o.to?0:o.to-o.from-l.length;a=Ee.single(o.from-c,o.to-c),h.push(kf(i,o)),h.push(t.facet(go).scrollToMatch(a.main))}return i.dispatch({changes:s,selection:a,effects:h,userEvent:"input.replace"}),!0}),kP=_a((i,{query:e})=>{if(i.state.readOnly)return!1;let t=e.matchAll(i.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:e.getReplacement(r)}});if(!t.length)return!1;let n=i.state.phrase("replaced $ matches",t.length)+".";return i.dispatch({changes:t,effects:nt.announce.of(n),userEvent:"input.replace.all"}),!0});function Lf(i){return i.state.facet(go).createPanel(i)}function Qc(i,e){var t,n,r,o;let s=i.selection.main,a=s.empty||s.to>s.from+100?"":i.sliceDoc(s.from,s.to);if(e&&!a)return e;let l=i.facet(go);return new wf({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:l.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:l.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:l.literal,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:l.wholeWord})}const ey=i=>{let e=i.state.field(Fr,!1);if(e&&e.panel){let t=ma(i,Lf);if(!t)return!1;let n=t.dom.querySelector("[main-field]");if(n&&n!=i.root.activeElement){let r=Qc(i.state,e.query.spec);r.valid&&i.dispatch({effects:Wr.of(r)}),n.focus(),n.select()}}else i.dispatch({effects:[Pf.of(!0),e?Wr.of(Qc(i.state,e.query.spec)):bt.appendConfig.of(TP)]});return!0},ty=i=>{let e=i.state.field(Fr,!1);if(!e||!e.panel)return!1;let t=ma(i,Lf);return t&&t.dom.contains(i.root.activeElement)&&i.focus(),i.dispatch({effects:Pf.of(!1)}),!0},AP=[{key:"Mod-f",run:ey,scope:"editor search-panel"},{key:"F3",run:su,shift:ou,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:su,shift:ou,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:ty,scope:"editor search-panel"},{key:"Mod-Shift-l",run:LP},{key:"Alt-g",run:aP},{key:"Mod-d",run:yP,preventDefault:!0}];class EP{constructor(e){this.view=e;let t=this.query=e.state.field(Fr).query.spec;this.commit=this.commit.bind(this),this.searchField=Gt("input",{value:t.search,placeholder:cn(e,"Find"),"aria-label":cn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Gt("input",{value:t.replace,placeholder:cn(e,"Replace"),"aria-label":cn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Gt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Gt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Gt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function n(r,o,s){return Gt("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=Gt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,n("next",()=>su(e),[cn(e,"next")]),n("prev",()=>ou(e),[cn(e,"previous")]),n("select",()=>PP(e),[cn(e,"all")]),Gt("label",null,[this.caseField,cn(e,"match case")]),Gt("label",null,[this.reField,cn(e,"regexp")]),Gt("label",null,[this.wordField,cn(e,"by word")]),...e.state.readOnly?[]:[Gt("br"),this.replaceField,n("replace",()=>rp(e),[cn(e,"replace")]),n("replaceAll",()=>kP(e),[cn(e,"replace all")])],Gt("button",{name:"close",onclick:()=>ty(e),"aria-label":cn(e,"close"),type:"button"},[""])])}commit(){let e=new wf({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Wr.of(e)}))}keydown(e){KC(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ou:su)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),rp(this.view))}update(e){for(let t of e.transactions)for(let n of t.effects)n.is(Wr)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(go).top}}function cn(i,e){return i.state.phrase(e)}const ll=30,ul=/[\s\.,:;?!]/;function kf(i,{from:e,to:t}){let n=i.state.doc.lineAt(e),r=i.state.doc.lineAt(t).to,o=Math.max(n.from,e-ll),s=Math.min(r,t+ll),a=i.state.sliceDoc(o,s);if(o!=n.from){for(let l=0;l<ll;l++)if(!ul.test(a[l+1])&&ul.test(a[l])){a=a.slice(l);break}}if(s!=r){for(let l=a.length-1;l>a.length-ll;l--)if(!ul.test(a[l-1])&&ul.test(a[l])){a=a.slice(0,l);break}}return nt.announce.of(`${i.state.phrase("current match")}. ${a} ${i.state.phrase("on line")} ${n.number}.`)}const _P=nt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),TP=[Fr,Zr.lowest(wP),_P];class iy{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=di(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),o=r.search(ry(e,!1));return o<0?null:{from:n+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function sp(i){let e=Object.keys(i).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function IP(i){let e=Object.create(null),t=Object.create(null);for(let{label:r}of i){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let n=sp(e)+sp(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function ny(i){let e=i.map(r=>typeof r=="string"?{label:r}:r),[t,n]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:IP(e);return r=>{let o=r.matchBefore(n);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}function FP(i,e){return t=>{for(let n=di(t.state).resolveInner(t.pos,-1);n;n=n.parent)if(i.indexOf(n.name)>-1)return null;return e(t)}}class op{constructor(e,t,n){this.completion=e,this.source=t,this.match=n}}function Qr(i){return i.selection.main.head}function ry(i,e){var t;let{source:n}=i,r=e&&n[0]!="^",o=n[n.length-1]!="$";return!r&&!o?i:new RegExp(`${r?"^":""}(?:${n})${o?"$":""}`,(t=i.flags)!==null&&t!==void 0?t:i.ignoreCase?"i":"")}function QP(i,e,t,n){return Object.assign(Object.assign({},i.changeByRange(r=>{if(r==i.selection.main)return{changes:{from:t,to:n,insert:e},range:Ee.cursor(t+e.length)};let o=n-t;return!r.empty||o&&i.sliceDoc(r.from-o,r.from)!=i.sliceDoc(t,n)?{range:r}:{changes:{from:r.from-o,to:r.from,insert:e},range:Ee.cursor(r.from-o+e.length)}})),{userEvent:"input.complete"})}function sy(i,e){const t=e.completion.apply||e.completion.label;let n=e.source;typeof t=="string"?i.dispatch(QP(i.state,t,n.from,n.to)):t(i,e.completion,n.from,n.to)}const ap=new WeakMap;function MP(i){if(!Array.isArray(i))return i;let e=ap.get(i);return e||ap.set(i,e=ny(i)),e}class BP{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=Ii(e,t),r=dn(n);this.chars.push(n);let o=e.slice(t,t+r),s=o.toUpperCase();this.folded.push(Ii(s==o?o.toLowerCase():s,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:o,byWord:s}=this;if(t.length==1){let w=Ii(e,0);return w==t[0]?[0,0,dn(w)]:w==n[0]?[-200,0,dn(w)]:null}let a=e.indexOf(this.pattern);if(a==0)return[0,0,this.pattern.length];let l=t.length,h=0;if(a<0){for(let w=0,_=Math.min(e.length,200);w<_&&h<l;){let I=Ii(e,w);(I==t[h]||I==n[h])&&(r[h++]=w),w+=dn(I)}if(h<l)return null}let c=0,p=0,d=!1,v=0,D=-1,m=-1,y=/[a-z]/.test(e),x=!0;for(let w=0,_=Math.min(e.length,200),I=0;w<_&&p<l;){let N=Ii(e,w);a<0&&(c<l&&N==t[c]&&(o[c++]=w),v<l&&(N==t[v]||N==n[v]?(v==0&&(D=w),m=w+1,v++):v=0));let Y,j=N<255?N>=48&&N<=57||N>=97&&N<=122?2:N>=65&&N<=90?1:0:(Y=zc(N))!=Y.toLowerCase()?1:Y!=Y.toUpperCase()?2:0;(!w||j==1&&y||I==0&&j!=0)&&(t[p]==N||n[p]==N&&(d=!0)?s[p++]=w:s.length&&(x=!1)),I=j,w+=dn(N)}return p==l&&s[0]==0&&x?this.result(-100+(d?-200:0),s,e):v==l&&D==0?[-200-e.length,0,m]:a>-1?[-700-e.length,a,a+this.pattern.length]:v==l?[-200+-700-e.length,D,m]:p==l?this.result(-100+(d?-200:0)+-700+(x?0:-1100),s,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,n){let r=[e-n.length],o=1;for(let s of t){let a=s+(this.astral?dn(Ii(n,s)):1);o>1&&r[o-1]==s?r[o-1]=a:(r[o++]=s,r[o++]=a)}return r}}const Yr=ot.define({combine(i){return ir(i,{activateOnTyping:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>n=>$P(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})}});function $P(i,e){return i?e?i+" "+e:i:e}function NP(i){let e=i.addToOptions.slice();return i.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let{label:s}=t,a=0;for(let l=1;l<r.length;){let h=r[l++],c=r[l++];h>a&&o.appendChild(document.createTextNode(s.slice(a,h)));let p=o.appendChild(document.createElement("span"));p.appendChild(document.createTextNode(s.slice(h,c))),p.className="cm-completionMatchedText",a=c}return a<s.length&&o.appendChild(document.createTextNode(s.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function lp(i,e,t){if(i<=t)return{from:0,to:i};if(e<=i>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let n=Math.floor((i-e)/t);return{from:i-(n+1)*t,to:i-n*t}}class RP{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:a=>this.positionInfo(a),key:this};let n=e.state.field(t),{options:r,selected:o}=n.open,s=e.state.facet(Yr);this.optionContent=NP(s),this.optionClass=s.optionClass,this.range=lp(r.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",a=>{for(let l=a.target,h;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(h=/-(\d+)$/.exec(l.id))&&+h[1]<r.length){sy(e,r[+h[1]]),a.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=lp(t.options.length,t.selected,this.view.state.facet(Yr).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s)}).catch(s=>Sn(this.view.state,s,"completion info")):this.addInfoPane(o)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&WP(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect();if(r.top>Math.min(innerHeight,t.bottom)-10||r.bottom<Math.max(0,t.top)+10)return null;let o=Math.max(0,Math.min(r.top,innerHeight-n.height))-t.top,s=this.view.textDirection==ii.RTL,a=t.left,l=innerWidth-t.right;return s&&a<Math.min(n.width,l)?s=!1:!s&&l<Math.min(n.width,a)&&(s=!0),{top:o,left:s}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let o=n.from;o<n.to;o++){let{completion:s,match:a}=e[o];const l=r.appendChild(document.createElement("li"));l.id=t+"-"+o,l.setAttribute("role","option");let h=this.optionClass(s);h&&(l.className=h);for(let c of this.optionContent){let p=c(s,this.view.state,a);p&&l.appendChild(p)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function XP(i){return e=>new RP(e,i)}function WP(i,e){let t=i.getBoundingClientRect(),n=e.getBoundingClientRect();n.top<t.top?i.scrollTop-=t.top-n.top:n.bottom>t.bottom&&(i.scrollTop+=n.bottom-t.bottom)}function up(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function YP(i,e){let t=[],n=0;for(let s of i)if(s.hasResult())if(s.result.filter===!1){let a=s.result.getMatch;for(let l of s.result.options){let h=[1e9-n++];if(a)for(let c of a(l))h.push(c);t.push(new op(l,s,h))}}else{let a=new BP(e.sliceDoc(s.from,s.to)),l;for(let h of s.result.options)(l=a.match(h.label))&&(h.boost!=null&&(l[0]+=h.boost),t.push(new op(h,s,l)))}let r=[],o=null;for(let s of t.sort(jP))!o||o.label!=s.completion.label||o.detail!=s.completion.detail||o.type!=null&&s.completion.type!=null&&o.type!=s.completion.type||o.apply!=s.completion.apply?r.push(s):up(s.completion)>up(o)&&(r[r.length-1]=s),o=s.completion;return r}class ta{constructor(e,t,n,r,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ta(this.options,hp(t,e),this.tooltip,this.timestamp,e)}static build(e,t,n,r,o){let s=YP(e,t);if(!s.length)return null;let a=0;if(r&&r.selected){let l=r.options[r.selected].completion;for(let h=0;h<s.length;h++)if(s[h].completion==l){a=h;break}}return new ta(s,hp(n,a),{pos:e.reduce((l,h)=>h.hasResult()?Math.min(l,h.from):l,1e8),create:XP(xn),above:o.aboveCursor},r?r.timestamp:Date.now(),a)}map(e){return new ta(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class au{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new au(zP,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(Yr),o=(n.override||t.languageDataAt("autocomplete",Qr(t)).map(MP)).map(a=>(this.active.find(h=>h.source==a)||new sn(a,this.active.some(h=>h.state!=0)?1:0)).update(e,n));o.length==this.active.length&&o.every((a,l)=>a==this.active[l])&&(o=this.active);let s=e.selection||o.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!ZP(o,this.active)?ta.build(o,t,this.id,this.open,n):this.open&&e.docChanged?this.open.map(e.changes):this.open;!s&&o.every(a=>a.state!=1)&&o.some(a=>a.hasResult())&&(o=o.map(a=>a.hasResult()?new sn(a.source,0):a));for(let a of e.effects)a.is(ay)&&(s=s&&s.setSelected(a.value,this.id));return o==this.active&&s==this.open?this:new au(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:UP}}function ZP(i,e){if(i==e)return!0;for(let t=0,n=0;;){for(;t<i.length&&!i[t].hasResult;)t++;for(;n<e.length&&!e[n].hasResult;)n++;let r=t==i.length,o=n==e.length;if(r||o)return r==o;if(i[t++].result!=e[n++].result)return!1}}const UP={"aria-autocomplete":"list"};function hp(i,e){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":i+"-"+e,"aria-controls":i}}const zP=[];function jP(i,e){let t=e.match[0]-i.match[0];return t||i.completion.label.localeCompare(e.completion.label)}function Mc(i){return i.isUserEvent("input.type")?"input":i.isUserEvent("delete.backward")?"delete":null}class sn{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=Mc(e),r=this;n?r=r.handleUserEvent(e,n,t):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new sn(r.source,0));for(let o of e.effects)if(o.is(Af))r=new sn(r.source,1,o.value?Qr(e.state):-1);else if(o.is(lu))r=new sn(r.source,0);else if(o.is(oy))for(let s of o.value)s.source==r.source&&(r=s);return r}handleUserEvent(e,t,n){return t=="delete"||!n.activateOnTyping?this.map(e.changes):new sn(this.source,1)}handleChange(e){return e.changes.touchesRange(Qr(e.startState))?new sn(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new sn(this.source,this.state,e.mapPos(this.explicitPos))}}class ia extends sn{constructor(e,t,n,r,o){super(e,2,t),this.result=n,this.from=r,this.to=o}hasResult(){return!0}handleUserEvent(e,t,n){var r;let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=Qr(e.state);if((this.explicitPos<0?a<=o:a<this.from)||a>s||t=="delete"&&Qr(e.startState)==this.from)return new sn(this.source,t=="input"&&n.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),h;return GP(this.result.validFor,e.state,o,s)?new ia(this.source,l,this.result,o,s):this.result.update&&(h=this.result.update(this.result,o,s,new iy(e.state,a,l>=0)))?new ia(this.source,l,h,h.from,(r=h.to)!==null&&r!==void 0?r:Qr(e.state)):new sn(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new sn(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new ia(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function GP(i,e,t,n){if(!i)return!1;let r=e.sliceDoc(t,n);return typeof i=="function"?i(r,t,n,e):ry(i,!0).test(r)}const Af=bt.define(),lu=bt.define(),oy=bt.define({map(i,e){return i.map(t=>t.map(e))}}),ay=bt.define(),xn=Si.define({create(){return au.start()},update(i,e){return i.update(e)},provide:i=>[nf.from(i,e=>e.tooltip),nt.contentAttributes.from(i,e=>e.attrs)]}),ly=75;function hl(i,e="option"){return t=>{let n=t.state.field(xn,!1);if(!n||!n.open||Date.now()-n.open.timestamp<ly)return!1;let r=1,o;e=="page"&&(o=Nb(t,n.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let s=n.open.selected+r*(i?1:-1),{length:a}=n.open.options;return s<0?s=e=="page"?0:a-1:s>=a&&(s=e=="page"?a-1:0),t.dispatch({effects:ay.of(s)}),!0}}const VP=i=>{let e=i.state.field(xn,!1);return i.state.readOnly||!e||!e.open||Date.now()-e.open.timestamp<ly?!1:(sy(i,e.open.options[e.open.selected]),!0)},qP=i=>i.state.field(xn,!1)?(i.dispatch({effects:Af.of(!0)}),!0):!1,HP=i=>{let e=i.state.field(xn,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(i.dispatch({effects:lu.of(null)}),!0)};class JP{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const cp=50,KP=50,e2=1e3,t2=si.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of i.state.field(xn).active)e.state==1&&this.startQuery(e)}update(i){let e=i.state.field(xn);if(!i.selectionSet&&!i.docChanged&&i.startState.field(xn)==e)return;let t=i.transactions.some(n=>(n.selection||n.docChanged)&&!Mc(n));for(let n=0;n<this.running.length;n++){let r=this.running[n];if(t||r.updates.length+i.transactions.length>KP&&Date.now()-r.time>e2){for(let o of r.context.abortListeners)try{o()}catch(s){Sn(this.view.state,s)}r.context.abortListeners=null,this.running.splice(n--,1)}else r.updates.push(...i.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(n=>n.state==1&&!this.running.some(r=>r.active.source==n.source))?setTimeout(()=>this.startUpdate(),cp):-1,this.composing!=0)for(let n of i.transactions)Mc(n)=="input"?this.composing=2:this.composing==2&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:i}=this.view,e=i.field(xn);for(let t of e.active)t.state==1&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t)}startQuery(i){let{state:e}=this.view,t=Qr(e),n=new iy(e,t,i.explicitPos==t),r=new JP(i,n);this.running.push(r),Promise.resolve(i.source(n)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:lu.of(null)}),Sn(this.view.state,o)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),cp))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Yr);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let s=new ia(r.active.source,r.active.explicitPos,r.done,r.done.from,(i=r.done.to)!==null&&i!==void 0?i:Qr(r.updates.length?r.updates[0].startState:this.view.state));for(let a of r.updates)s=s.update(a,t);if(s.hasResult()){e.push(s);continue}}let o=this.view.state.field(xn).active.find(s=>s.source==r.active.source);if(o&&o.state==1)if(r.done==null){let s=new sn(r.active.source,0);for(let a of r.updates)s=s.update(a,t);s.state!=1&&e.push(s)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:oy.of(e)})}},{eventHandlers:{blur(){let i=this.view.state.field(xn,!1);i&&i.tooltip&&this.view.state.facet(Yr).closeOnBlur&&this.view.dispatch({effects:lu.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Af.of(!1)}),20),this.composing=0}}}),uy=nt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class i2{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class Ef{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,Ci.TrackDel),n=e.mapPos(this.to,1,Ci.TrackDel);return t==null||n==null?null:new Ef(this.field,t,n)}}class _f{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],o=e.doc.lineAt(t),s=/^\s*/.exec(o.text)[0];for(let l of this.lines){if(n.length){let h=s,c=/^\t*/.exec(l)[0].length;for(let p=0;p<c;p++)h+=e.facet(xs);r.push(t+h.length-c),l=h+l.slice(c)}n.push(l),t+=l.length+1}let a=this.fieldPositions.map(l=>new Ef(l.field,r[l.line]+l.from,r[l.line]+l.to));return{text:n,ranges:a}}static parse(e){let t=[],n=[],r=[],o;for(let s of e.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(s);){let a=o[1]?+o[1]:null,l=o[2]||o[3]||"",h=-1;for(let c=0;c<t.length;c++)(a!=null?t[c].seq==a:l&&t[c].name==l)&&(h=c);if(h<0){let c=0;for(;c<t.length&&(a==null||t[c].seq!=null&&t[c].seq<a);)c++;t.splice(c,0,{seq:a,name:l}),h=c;for(let p of r)p.field>=h&&p.field++}r.push(new i2(h,n.length,o.index,o.index+l.length)),s=s.slice(0,o.index)+l+s.slice(o.index+o[0].length)}for(let a;a=/([$#])\\{/.exec(s);){s=s.slice(0,a.index)+a[1]+"{"+s.slice(a.index+a[0].length);for(let l of r)l.line==n.length&&l.from>a.index&&(l.from--,l.to--)}n.push(s)}return new _f(n,r)}}let n2=gt.widget({widget:new class extends pr{toDOM(){let i=document.createElement("span");return i.className="cm-snippetFieldPosition",i}ignoreEvent(){return!1}}}),r2=gt.mark({class:"cm-snippetField"});class vo{constructor(e,t){this.ranges=e,this.active=t,this.deco=gt.set(e.map(n=>(n.from==n.to?n2:r2).range(n.from,n.to)))}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new vo(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(n=>n.field==this.active&&n.from<=t.from&&n.to>=t.to))}}const Ta=bt.define({map(i,e){return i&&i.map(e)}}),s2=bt.define(),va=Si.define({create(){return null},update(i,e){for(let t of e.effects){if(t.is(Ta))return t.value;if(t.is(s2)&&i)return new vo(i.ranges,t.value)}return i&&e.docChanged&&(i=i.map(e.changes)),i&&e.selection&&!i.selectionInsideField(e.selection)&&(i=null),i},provide:i=>nt.decorations.from(i,e=>e?e.deco:gt.none)});function Tf(i,e){return Ee.create(i.filter(t=>t.field==e).map(t=>Ee.range(t.from,t.to)))}function o2(i){let e=_f.parse(i);return(t,n,r,o)=>{let{text:s,ranges:a}=e.instantiate(t.state,r),l={changes:{from:r,to:o,insert:Xt.of(s)},scrollIntoView:!0};if(a.length&&(l.selection=Tf(a,0)),a.length>1){let h=new vo(a,0),c=l.effects=[Ta.of(h)];t.state.field(va,!1)===void 0&&c.push(bt.appendConfig.of([va,c2,f2,uy]))}t.dispatch(t.state.update(l))}}function hy(i){return({state:e,dispatch:t})=>{let n=e.field(va,!1);if(!n||i<0&&n.active==0)return!1;let r=n.active+i,o=i>0&&!n.ranges.some(s=>s.field==r+i);return t(e.update({selection:Tf(n.ranges,r),effects:Ta.of(o?null:new vo(n.ranges,r))})),!0}}const a2=({state:i,dispatch:e})=>i.field(va,!1)?(e(i.update({effects:Ta.of(null)})),!0):!1,l2=hy(1),u2=hy(-1),h2=[{key:"Tab",run:l2,shift:u2},{key:"Escape",run:a2}],fp=ot.define({combine(i){return i.length?i[0]:h2}}),c2=Zr.highest(ka.compute([fp],i=>i.facet(fp)));function Fn(i,e){return Object.assign(Object.assign({},e),{apply:o2(i)})}const f2=nt.domEventHandlers({mousedown(i,e){let t=e.state.field(va,!1),n;if(!t||(n=e.posAtCoords({x:i.clientX,y:i.clientY}))==null)return!1;let r=t.ranges.find(o=>o.from<=n&&o.to>=n);return!r||r.field==t.active?!1:(e.dispatch({selection:Tf(t.ranges,r.field),effects:Ta.of(t.ranges.some(o=>o.field>r.field)?new vo(t.ranges,r.field):null)}),!0)}}),uu={brackets:["(","[","{","'",'"'],before:")]}:;>"},hs=bt.define({map(i,e){let t=e.mapPos(i,-1,Ci.TrackAfter);return t??void 0}}),If=bt.define({map(i,e){return e.mapPos(i)}}),Ff=new class extends vs{};Ff.startSide=1;Ff.endSide=-1;const cy=Si.define({create(){return Ut.empty},update(i,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,n=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(n,-1)&&(i=Ut.empty)}i=i.map(e.changes);for(let t of e.effects)t.is(hs)?i=i.update({add:[Ff.range(t.value,t.value+1)]}):t.is(If)&&(i=i.update({filter:n=>n!=t.value}));return i}});function d2(){return[m2,cy]}const Fh="()[]{}<>";function fy(i){for(let e=0;e<Fh.length;e+=2)if(Fh.charCodeAt(e)==i)return Fh.charAt(e+1);return zc(i<128?i:i+1)}function dy(i,e){return i.languageDataAt("closeBrackets",e)[0]||uu}const p2=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),m2=nt.inputHandler.of((i,e,t,n)=>{if((p2?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let r=i.state.selection.main;if(n.length>2||n.length==2&&dn(Ii(n,0))==1||e!=r.from||t!=r.to)return!1;let o=y2(i.state,n);return o?(i.dispatch(o),!0):!1}),g2=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let n=dy(i,i.selection.main.head).brackets||uu.brackets,r=null,o=i.changeByRange(s=>{if(s.empty){let a=O2(i.doc,s.head);for(let l of n)if(l==a&&Ru(i.doc,s.head)==fy(Ii(l,0)))return{changes:{from:s.head-l.length,to:s.head+l.length},range:Ee.cursor(s.head-l.length),userEvent:"delete.backward"}}return{range:r=s}});return r||e(i.update(o,{scrollIntoView:!0})),!r},v2=[{key:"Backspace",run:g2}];function y2(i,e){let t=dy(i,i.selection.main.head),n=t.brackets||uu.brackets;for(let r of n){let o=fy(Ii(r,0));if(e==r)return o==r?C2(i,r,n.indexOf(r+r+r)>-1):x2(i,r,o,t.before||uu.before);if(e==o&&py(i,i.selection.main.from))return D2(i,r,o)}return null}function py(i,e){let t=!1;return i.field(cy).between(0,i.doc.length,n=>{n==e&&(t=!0)}),t}function Ru(i,e){let t=i.sliceString(e,e+2);return t.slice(0,dn(Ii(t,0)))}function O2(i,e){let t=i.sliceString(e-2,e);return dn(Ii(t,0))==t.length?t:t.slice(1)}function x2(i,e,t,n){let r=null,o=i.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:hs.of(s.to+e.length),range:Ee.range(s.anchor+e.length,s.head+e.length)};let a=Ru(i.doc,s.head);return!a||/\s/.test(a)||n.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:hs.of(s.head+e.length),range:Ee.cursor(s.head+e.length)}:{range:r=s}});return r?null:i.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function D2(i,e,t){let n=null,r=i.selection.ranges.map(o=>o.empty&&Ru(i.doc,o.head)==t?Ee.cursor(o.head+t.length):n=o);return n?null:i.update({selection:Ee.create(r,i.selection.mainIndex),scrollIntoView:!0,effects:i.selection.ranges.map(({from:o})=>If.of(o))})}function C2(i,e,t){let n=null,r=i.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:hs.of(o.to+e.length),range:Ee.range(o.anchor+e.length,o.head+e.length)};let s=o.head,a=Ru(i.doc,s);if(a==e){if(dp(i,s))return{changes:{insert:e+e,from:s},effects:hs.of(s+e.length),range:Ee.cursor(s+e.length)};if(py(i,s)){let l=t&&i.sliceDoc(s,s+e.length*3)==e+e+e;return{range:Ee.cursor(s+e.length*(l?3:1)),effects:If.of(s)}}}else{if(t&&i.sliceDoc(s-2*e.length,s)==e+e&&dp(i,s-2*e.length))return{changes:{insert:e+e+e+e,from:s},effects:hs.of(s+e.length),range:Ee.cursor(s+e.length)};if(i.charCategorizer(s)(a)!=ri.Word){let l=i.sliceDoc(s-1,s);if(l!=e&&i.charCategorizer(s)(l)!=ri.Word&&!b2(i,s,e))return{changes:{insert:e+e,from:s},effects:hs.of(s+e.length),range:Ee.cursor(s+e.length)}}}return{range:n=o}});return n?null:i.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function dp(i,e){let t=di(i).resolveInner(e+1);return t.parent&&t.from==e}function b2(i,e,t){let n=di(i).resolveInner(e,-1);for(let r=0;r<5;r++){if(i.sliceDoc(n.from,n.from+t.length)==t)return!0;let o=n.to==e&&n.parent;if(!o)break;n=o}return!1}function S2(i={}){return[xn,Yr.of(i),t2,w2,uy]}const my=[{key:"Ctrl-Space",run:qP},{key:"Escape",run:HP},{key:"ArrowDown",run:hl(!0)},{key:"ArrowUp",run:hl(!1)},{key:"PageDown",run:hl(!0,"page")},{key:"PageUp",run:hl(!1,"page")},{key:"Enter",run:VP}],w2=Zr.highest(ka.computeN([Yr],i=>i.facet(Yr).defaultKeymap?[my]:[]));class P2{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class ls{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=e,o=n.facet(Gs).markerFilter;o&&(r=o(r));let s=gt.set(r.map(a=>a.from==a.to||a.from==a.to-1&&n.doc.lineAt(a.from).to==a.from?gt.widget({widget:new M2(a),diagnostic:a}).range(a.from):gt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)),!0);return new ls(s,t,po(s))}}function po(i,e=null,t=0){let n=null;return i.between(t,1e9,(r,o,{spec:s})=>{if(!(e&&s.diagnostic!=e))return n=new P2(r,o,s.diagnostic),!1}),n}function L2(i,e){return!!(i.effects.some(t=>t.is(Qf))||i.changes.touchesRange(e.pos))}function gy(i,e){return i.field(mn,!1)?e:e.concat(bt.appendConfig.of([mn,nt.decorations.compute([mn],t=>{let{selected:n,panel:r}=t.field(mn);return!n||!r||n.from==n.to?gt.none:gt.set([A2.range(n.from,n.to)])}),$b(E2,{hideOn:L2}),$2]))}function k2(i,e){return{effects:gy(i,[Qf.of(e)])}}const Qf=bt.define(),Mf=bt.define(),vy=bt.define(),mn=Si.define({create(){return new ls(gt.none,null,null)},update(i,e){if(e.docChanged){let t=i.diagnostics.map(e.changes),n=null;if(i.selected){let r=e.changes.mapPos(i.selected.from,1);n=po(t,i.selected.diagnostic,r)||po(t,null,r)}i=new ls(t,i.panel,n)}for(let t of e.effects)t.is(Qf)?i=ls.init(t.value,i.panel,e.state):t.is(Mf)?i=new ls(i.diagnostics,t.value?Xu.open:null,i.selected):t.is(vy)&&(i=new ls(i.diagnostics,i.panel,t.value));return i},provide:i=>[Os.from(i,e=>e.panel),nt.decorations.from(i,e=>e.diagnostics)]}),A2=gt.mark({class:"cm-lintRange cm-lintRange-active"});function E2(i,e,t){let{diagnostics:n}=i.state.field(mn),r=[],o=2e8,s=0;n.between(e-(t<0?1:0),e+(t>0?1:0),(l,h,{spec:c})=>{e>=l&&e<=h&&(l==h||(e>l||t>0)&&(e<h||t<0))&&(r.push(c.diagnostic),o=Math.min(l,o),s=Math.max(h,s))});let a=i.state.facet(Gs).tooltipFilter;return a&&(r=a(r)),r.length?{pos:o,end:s,above:i.state.doc.lineAt(o).to<s,create(){return{dom:_2(i,r)}}}:null}function _2(i,e){return Gt("ul",{class:"cm-tooltip-lint"},e.map(t=>Oy(i,t,!1)))}const T2=i=>{let e=i.state.field(mn,!1);(!e||!e.panel)&&i.dispatch({effects:gy(i.state,[Mf.of(!0)])});let t=ma(i,Xu.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},pp=i=>{let e=i.state.field(mn,!1);return!e||!e.panel?!1:(i.dispatch({effects:Mf.of(!1)}),!0)},I2=i=>{let e=i.state.field(mn,!1);if(!e)return!1;let t=i.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(i.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},F2=[{key:"Mod-Shift-m",run:T2},{key:"F8",run:I2}],Q2=si.fromClass(class{constructor(i){this.view=i,this.timeout=-1,this.set=!0;let{delay:e}=i.state.facet(Gs);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let i=Date.now();if(i<this.lintTime-10)setTimeout(this.run,this.lintTime-i);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Gs);Promise.all(t.map(n=>Promise.resolve(n(this.view)))).then(n=>{let r=n.reduce((o,s)=>o.concat(s));this.view.state.doc==e.doc&&this.view.dispatch(k2(this.view.state,r))},n=>{Sn(this.view.state,n)})}}update(i){let e=i.state.facet(Gs);(i.docChanged||e!=i.startState.facet(Gs))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Gs=ot.define({combine(i){return Object.assign({sources:i.map(e=>e.source)},ir(i.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:Q2});function yy(i){let e=[];if(i)e:for(let{name:t}of i){for(let n=0;n<t.length;n++){let r=t[n];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Oy(i,e,t){var n;let r=t?yy(e.actions):[];return Gt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Gt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(n=e.actions)===null||n===void 0?void 0:n.map((o,s)=>{let a=p=>{p.preventDefault();let d=po(i.state.field(mn).diagnostics,e);d&&o.apply(i,d.from,d.to)},{name:l}=o,h=r[s]?l.indexOf(r[s]):-1,c=h<0?l:[l.slice(0,h),Gt("u",l.slice(h,h+1)),l.slice(h+1)];return Gt("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${l}${h<0?"":` (access key "${r[s]})"`}.`},c)}),e.source&&Gt("div",{class:"cm-diagnosticSource"},e.source))}class M2 extends pr{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Gt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class mp{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Oy(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Xu{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)pp(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=yy(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=po(this.view.state.field(mn).diagnostics,o);l&&o.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},n=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=Gt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=Gt("div",{class:"cm-panel-lint"},this.list,Gt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>pp(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(mn).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(mn),n=0,r=!1,o=null;for(e.between(0,this.view.state.doc.length,(s,a,{spec:l})=>{let h=-1,c;for(let p=n;p<this.items.length;p++)if(this.items[p].diagnostic==l.diagnostic){h=p;break}h<0?(c=new mp(this.view,l.diagnostic),this.items.splice(n,0,c),r=!0):(c=this.items[h],h>n&&(this.items.splice(n,h-n),r=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),o=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new mp(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:a})=>{s.top<a.top?this.list.scrollTop-=a.top-s.top:s.bottom>a.bottom&&(this.list.scrollTop+=s.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(mn),n=po(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:vy.of(n)})}static open(e){return new Xu(e)}}function B2(i,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(i)}</svg>')`}function Qh(i){return B2(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const $2=nt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Qh("#d11")},".cm-lintRange-warning":{backgroundImage:Qh("orange")},".cm-lintRange-info":{backgroundImage:Qh("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),N2=[Gb(),Hb(),gb(),mw(),NS(),sb(),hb(),$t.allowMultipleSelections.of(!0),PS(),XS(ZS,{fallback:!0}),HS(),d2(),S2(),kb(),_b(),Cb(),hP(),ka.of([...v2,...rP,...AP,...Sw,...QS,...my,...F2])];class hu{constructor(e,t,n,r,o,s,a,l,h,c=0,p){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=l,this.curContext=h,this.lookAhead=c,this.parent=p}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new hu(e,[],t,n,n,0,[],0,r?new gp(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,n=e&65535,{parser:r}=this.p,o=r.dynamicPrecedence(n);if(o&&(this.score+=o),t==0){this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),this.reduceContext(n,this.reducePos);return}let s=this.stack.length-(t-1)*3-(e&262144?6:0),a=this.stack[s-2],l=this.stack[s-1],h=this.bufferBase+this.buffer.length-l;if(n<r.minRepeatTerm||e&131072){let c=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,a,c,h+4,!0)}if(e&262144)this.state=this.stack[s];else{let c=this.stack[s-3];this.state=r.getGoto(c,n,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(n,a)}storeNode(e,t,n,r=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(t==n)return;if(s.buffer[a-2]>=t){s.buffer[a-2]=n;return}}}if(!o||this.pos==n)this.buffer.push(e,t,n,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0)for(;s>0&&this.buffer[s-2]>n;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4);this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=n,this.buffer[s+3]=r}}shift(e,t,n){let r=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4);else{let o=e,{parser:s}=this.p;(n>this.pos||t<=s.maxNode)&&(this.pos=n,s.stateFlag(o,1)||(this.reducePos=n)),this.pushState(o,r),this.shiftContext(t,r),t<=s.maxNode&&this.buffer.push(t,r,n,4)}}apply(e,t,n){e&65536?this.reduce(e):this.shift(e,t,n)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new hu(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new R2(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(!(n&65536))return!0;if(n==0)return!1;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let r=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&r.push(t[o],s);if(this.stack.length<120)for(let o=0;r.length<4<<1&&o<t.length;o+=2){let s=t[o+1];r.some((a,l)=>l&1&&a==s)||r.push(t[o],s)}t=r}let n=[];for(let r=0;r<t.length&&n.length<4;r+=2){let o=t[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[r],this.pos),s.score-=200,n.push(s)}return n}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(e&65536))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let n=e>>19,r=e&65535,o=this.stack.length-n*3;if(o<0||t.getGoto(this.stack[o],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new gp(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class gp{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var vp;(function(i){i[i.Insert=200]="Insert",i[i.Delete=190]="Delete",i[i.Reduce=100]="Reduce",i[i.MaxNext=4]="MaxNext",i[i.MaxInsertStackDepth=300]="MaxInsertStackDepth",i[i.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(vp||(vp={}));class R2{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,n=e>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class cu{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new cu(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new cu(this.stack,this.pos,this.index)}}class Al{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const yp=new Al;class X2{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=yp,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<n.from;){if(!r)return null;let s=this.ranges[--r];o-=n.from-s.to,n=s}for(;t<0?o>n.to:o>=n.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-n.to,n=s}return o}peek(e){let t=this.chunkOff+e,n,r;if(t>=0&&t<this.chunk.length)n=this.pos+e,r=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(n=o,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=n;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-n)),r=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),r}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=yp,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}class El{constructor(e,t){this.data=e,this.id=t}token(e,t){W2(this.data,e,t,this.id)}}El.prototype.contextual=El.prototype.fallback=El.prototype.extend=!1;class Wu{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function W2(i,e,t,n){let r=0,o=1<<n,{parser:s}=t.p,{dialect:a}=s;e:for(;o&i[r];){let l=i[r+1];for(let h=r+3;h<l;h+=2)if((i[h+1]&o)>0){let c=i[h];if(a.allows(c)&&(e.token.value==-1||e.token.value==c||s.overrides(c,e.token.value))){e.acceptToken(c);break}}for(let h=e.next,c=0,p=i[r+2];c<p;){let d=c+p>>1,v=l+d+(d<<1),D=i[v],m=i[v+1];if(h<D)p=d;else if(h>=m)c=d+1;else{r=i[v+2],e.advance();continue e}}break}}function cl(i,e=Uint16Array){if(typeof i!="string")return i;let t=null;for(let n=0,r=0;n<i.length;){let o=0;for(;;){let s=i.charCodeAt(n++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let l=s-32;if(l>=46&&(l-=46,a=!0),o+=l,a)break;o*=46}t?t[r++]=o:t=new e(o)}return t}const Qn=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let Mh=null;var Op;(function(i){i[i.Margin=25]="Margin"})(Op||(Op={}));function xp(i,e,t){let n=i.cursor(Ai.IncludeAnonymous);for(n.moveTo(e);;)if(!(t<0?n.childBefore(e):n.childAfter(e)))for(;;){if((t<0?n.to<e:n.from>e)&&!n.type.isError)return t<0?Math.max(0,Math.min(n.to-1,e-25)):Math.min(i.length,Math.max(n.from+1,e+25));if(t<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return t<0?0:i.length}}class Y2{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?xp(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?xp(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=n.children[r],s=this.start[t]+n.positions[r];if(s>e)return this.nextStart=s,null;if(o instanceof fi){if(s==e){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let l=o.prop(Tt.lookAhead);if(!l||a+l<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class Z2{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(n=>new Al)}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:o}=r,s=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let h=0;h<o.length;h++){if(!(1<<h&s))continue;let c=o[h],p=this.tokens[h];if(!(n&&!c.fallback)&&((c.contextual||p.start!=e.pos||p.mask!=s||p.context!=a)&&(this.updateCachedToken(p,c,e),p.mask=s,p.context=a),p.lookAhead>p.end+25&&(l=Math.max(p.lookAhead,l)),p.value!=0)){let d=t;if(p.extended>-1&&(t=this.addActions(e,p.extended,p.end,t)),t=this.addActions(e,p.value,p.end,t),!c.extend&&(n=p,t>d))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!n&&e.pos==this.stream.end&&(n=new Al,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Al,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){if(t.token(this.stream.reset(n.pos,e),n),e.value>-1){let{parser:r}=n.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){let s=r.specializers[o](this.stream.read(e.start,e.end),n);if(s>=0&&n.p.parser.dialect.allows(s>>1)){s&1?e.extended=s>>1:e.value=s>>1;break}}}else e.value=0,e.end=Math.min(n.p.stream.end,n.pos+1)}putAction(e,t,n,r){for(let o=0;o<r;o+=3)if(this.actions[o]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:o}=e,{parser:s}=e.p,{data:a}=s;for(let l=0;l<2;l++)for(let h=s.stateSlot(o,l?2:1);;h+=3){if(a[h]==65535)if(a[h+1]==1)h=ur(a,h+2);else{r==0&&a[h+1]==2&&(r=this.putAction(ur(a,h+2),t,n,r));break}a[h]==t&&(r=this.putAction(ur(a,h+1),t,n,r))}return r}}var Dp;(function(i){i[i.Distance=5]="Distance",i[i.MaxRemainingPerStep=3]="MaxRemainingPerStep",i[i.MinBufferLengthPrune=500]="MinBufferLengthPrune",i[i.ForceReduceLimit=10]="ForceReduceLimit",i[i.CutDepth=15e3]="CutDepth",i[i.CutTo=9e3]="CutTo"})(Dp||(Dp={}));class U2{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new X2(t,r),this.tokens=new Z2(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[hu.start(this,e.top[0],o)],this.fragments=n.length&&this.stream.end-o>e.bufferLength*4?new Y2(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,n=this.stacks=[],r,o;for(let s=0;s<e.length;s++){let a=e[s];for(;;){if(this.tokens.mainToken=null,a.pos>t)n.push(a);else{if(this.advanceStack(a,n,e))continue;{r||(r=[],o=[]),r.push(a);let l=this.tokens.getMainToken(a);o.push(l.value,l.end)}}break}}if(!n.length){let s=r&&G2(r);if(s)return this.stackToTree(s);if(this.parser.strict)throw Qn&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,n);if(s)return this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(n.length>s)for(n.sort((a,l)=>l.score-a.score);n.length>s;)n.pop();n.some(a=>a.reducePos>t)&&this.recovering--}else if(n.length>1){e:for(let s=0;s<n.length-1;s++){let a=n[s];for(let l=s+1;l<n.length;l++){let h=n[l];if(a.sameState(h)||a.buffer.length>500&&h.buffer.length>500)if((a.score-h.score||a.buffer.length-h.buffer.length)>0)n.splice(l--,1);else{n.splice(s--,1);continue e}}}}this.minStackPos=n[0].pos;for(let s=1;s<n.length;s++)n[s].pos<this.minStackPos&&(this.minStackPos=n[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:o}=this,s=Qn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,c=h?e.curContext.hash:0;for(let p=this.fragments.nodeAt(r);p;){let d=this.parser.nodeSet.types[p.type.id]==p.type?o.getGoto(e.state,p.type.id):-1;if(d>-1&&p.length&&(!h||(p.prop(Tt.contextHash)||0)==c))return e.useNode(p,d),Qn&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(p.type.id)})`),!0;if(!(p instanceof fi)||p.children.length==0||p.positions[0]>0)break;let v=p.children[0];if(v instanceof fi&&p.positions[0]==0)p=v;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),Qn&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let h=0;h<l.length;){let c=l[h++],p=l[h++],d=l[h++],v=h==l.length||!n,D=v?e:e.split();if(D.apply(c,p,d),Qn&&console.log(s+this.stackID(D)+` (via ${c&65536?`reduce of ${o.getName(c&65535)}`:"shift"} for ${o.getName(p)} @ ${r}${D==e?"":", split"})`),v)return!0;D.pos>r?t.push(D):n.push(D)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return Cp(e,t),!0}}runRecovery(e,t,n){let r=null,o=!1;for(let s=0;s<e.length;s++){let a=e[s],l=t[s<<1],h=t[(s<<1)+1],c=Qn?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),Qn&&console.log(c+this.stackID(a)+" (restarted)"),this.advanceFully(a,n))))continue;let p=a.split(),d=c;for(let v=0;p.forceReduce()&&v<10&&(Qn&&console.log(d+this.stackID(p)+" (via force-reduce)"),!this.advanceFully(p,n));v++)Qn&&(d=this.stackID(p)+" -> ");for(let v of a.recoverByInsert(l))Qn&&console.log(c+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,n);this.stream.end>a.pos?(h==a.pos&&(h++,l=0),a.recoverByDelete(l,h),Qn&&console.log(c+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),Cp(a,n)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),fi.build({buffer:cu.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Mh||(Mh=new WeakMap)).get(e);return t||Mh.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Cp(i,e){for(let t=0;t<e.length;t++){let n=e[t];if(n.pos==i.pos&&n.sameState(i)){e[t].score<i.score&&(e[t]=i);return}}e.push(i)}class z2{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||this.disabled[e]==0}}const Bh=i=>i;class j2{constructor(e){this.start=e.start,this.shift=e.shift||Bh,this.reduce=e.reduce||Bh,this.reuse=e.reuse||Bh,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class fu extends Kg{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let n=Object.keys(e.topRules).map(a=>e.topRules[a][1]),r=[];for(let a=0;a<t.length;a++)r.push([]);function o(a,l,h){r[a].push([l,l.deserialize(String(h))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=Tt[l]);for(let h=1;h<a.length;){let c=a[h++];if(c>=0)o(c,l,a[h++]);else{let p=a[h+-c];for(let d=-c;d>0;d--)o(a[h++],l,p);h++}}}this.nodeSet=new sf(t.map((a,l)=>an.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:r[l],top:n.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=qg;let s=cl(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let a=0;a<e.specialized.length;a++)this.specialized[a]=e.specialized[a].term,this.specializers[a]=e.specialized[a].get;this.states=cl(e.states,Uint32Array),this.data=cl(e.stateData),this.goto=cl(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new El(s,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new U2(this,e,t,n);for(let o of this.wrappers)r=o(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let s=r[o++],a=s&1,l=r[o++];if(a&&n)return l;for(let h=o+(s>>1);o<h;o++)if(r[o]==e)return l;if(a)return-1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(e,r?2:1),s;;o+=3){if((s=n[o])==65535)if(n[o+1]==1)s=n[o=ur(n,o+2)];else{if(n[o+1]==2)return ur(n,o+2);break}if(s==t||s==0)return ur(n,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=ur(this.data,n+2);else return!1;if(t==ur(this.data,n+1))return!0}}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=ur(this.data,n+2);else break;if(!(this.data[n+2]&1)){let r=this.data[n+1];t.some((o,s)=>s&1&&o==r)||t.push(this.data[n],r)}}return t}overrides(e,t){let n=bp(this.data,this.tokenPrecTable,t);return n<0||bp(this.data,this.tokenPrecTable,e)<n}configure(e){let t=Object.assign(Object.create(fu.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(n=>{let r=e.tokenizers.find(o=>o.from==n);return r?r.to:n})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(n[s]=!0)}let r=null;for(let o=0;o<t.length;o++)if(!n[o])for(let s=this.dialects[t[o]],a;(a=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new z2(e,n,r)}static deserialize(e){return new fu(e)}}function ur(i,e){return i[e]|i[e+1]<<16}function bp(i,e,t){for(let n=e,r;(r=i[n])!=65535;n++)if(r==t)return n-e;return-1}function G2(i){let e=null;for(let t of i){let n=t.p.stoppedAt;(t.pos==t.p.stream.end||n!=null&&t.pos>n)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}const Sp=281,wp=1,V2=2,fl=282,q2=3,H2=283,Pp=284,J2=4,K2=286,e3=287,t3=5,i3=6,n3=1,r3=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],xy=125,s3=123,o3=59,Lp=47,a3=42,l3=43,u3=45,h3=36,c3=96,f3=92,d3=new j2({start:!1,shift(i,e){return e==t3||e==i3||e==K2?i:e==e3},strict:!1}),p3=new Wu((i,e)=>{let{next:t}=i;(t==xy||t==-1||e.context)&&e.canShift(Pp)&&i.acceptToken(Pp)},{contextual:!0,fallback:!0}),m3=new Wu((i,e)=>{let{next:t}=i,n;r3.indexOf(t)>-1||t==Lp&&((n=i.peek(1))==Lp||n==a3)||t!=xy&&t!=o3&&t!=-1&&!e.context&&e.canShift(Sp)&&i.acceptToken(Sp)},{contextual:!0}),g3=new Wu((i,e)=>{let{next:t}=i;if((t==l3||t==u3)&&(i.advance(),t==i.next)){i.advance();let n=!e.context&&e.canShift(wp);i.acceptToken(n?wp:V2)}},{contextual:!0}),v3=new Wu(i=>{for(let e=!1,t=0;;t++){let{next:n}=i;if(n<0){t&&i.acceptToken(fl);break}else if(n==c3){t?i.acceptToken(fl):i.acceptToken(H2,1);break}else if(n==s3&&e){t==1?i.acceptToken(q2,1):i.acceptToken(fl,-1);break}else if(n==10&&t){i.advance(),i.acceptToken(fl);break}else n==f3&&i.advance();e=n==h3,i.advance()}});function y3(i,e){return i=="extends"&&e.dialectEnabled(n3)?J2:-1}const O3=tv({"get set async static":ke.modifier,"for while do if else switch try catch finally return throw break continue default case":ke.controlKeyword,"in of await yield void typeof delete instanceof":ke.operatorKeyword,"let var const function class extends":ke.definitionKeyword,"import export from":ke.moduleKeyword,"with debugger as new":ke.keyword,TemplateString:ke.special(ke.string),Super:ke.atom,BooleanLiteral:ke.bool,this:ke.self,null:ke.null,Star:ke.modifier,VariableName:ke.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":ke.function(ke.variableName),VariableDefinition:ke.definition(ke.variableName),Label:ke.labelName,PropertyName:ke.propertyName,PrivatePropertyName:ke.special(ke.propertyName),"CallExpression/MemberExpression/PropertyName":ke.function(ke.propertyName),"FunctionDeclaration/VariableDefinition":ke.function(ke.definition(ke.variableName)),"ClassDeclaration/VariableDefinition":ke.definition(ke.className),PropertyDefinition:ke.definition(ke.propertyName),PrivatePropertyDefinition:ke.definition(ke.special(ke.propertyName)),UpdateOp:ke.updateOperator,LineComment:ke.lineComment,BlockComment:ke.blockComment,Number:ke.number,String:ke.string,ArithOp:ke.arithmeticOperator,LogicOp:ke.logicOperator,BitOp:ke.bitwiseOperator,CompareOp:ke.compareOperator,RegExp:ke.regexp,Equals:ke.definitionOperator,"Arrow : Spread":ke.punctuation,"( )":ke.paren,"[ ]":ke.squareBracket,"{ }":ke.brace,"InterpolationStart InterpolationEnd":ke.special(ke.brace),".":ke.derefOperator,", ;":ke.separator,TypeName:ke.typeName,TypeDefinition:ke.definition(ke.typeName),"type enum interface implements namespace module declare":ke.definitionKeyword,"abstract global Privacy readonly override":ke.modifier,"is keyof unique infer":ke.operatorKeyword,JSXAttributeValue:ke.attributeValue,JSXText:ke.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":ke.angleBracket,"JSXIdentifier JSXNameSpacedName":ke.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":ke.attributeName}),x3={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},D3={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},C3={__proto__:null,"<":129},b3=fu.deserialize({version:14,states:"$4|O`QYOOO'QQ$IfO'#ChO'XOSO'#DVO)dQYO'#D]O)tQYO'#DhO){QYO'#DrO-xQYO'#DxOOQO'#E]'#E]O.]QWO'#E[O.bQWO'#E[OOQ$IU'#Ef'#EfO0aQ$IfO'#ItO2wQ$IfO'#IuO3eQWO'#EzO3jQpO'#FaOOQ$IU'#FS'#FSO3rO!bO'#FSO4QQWO'#FhO5_QWO'#FgOOQ$IU'#Iu'#IuOOQ$IS'#It'#ItOOQQ'#J^'#J^O5dQWO'#HpO5iQ$I[O'#HqOOQQ'#Ih'#IhOOQQ'#Hr'#HrQ`QYOOO){QYO'#DjO5qQWO'#G[O5vQ#tO'#CmO6UQWO'#EZO6aQWO'#EgO6fQ#tO'#FRO7QQWO'#G[O7VQWO'#G`O7bQWO'#G`O7pQWO'#GcO7pQWO'#GdO7pQWO'#GfO5qQWO'#GiO8aQWO'#GlO9oQWO'#CdO:PQWO'#GyO:XQWO'#HPO:XQWO'#HRO`QYO'#HTO:XQWO'#HVO:XQWO'#HYO:^QWO'#H`O:cQ$I]O'#HfO){QYO'#HhO:nQ$I]O'#HjO:yQ$I]O'#HlO5iQ$I[O'#HnO){QYO'#DWOOOS'#Ht'#HtO;UOSO,59qOOQ$IU,59q,59qO=gQbO'#ChO=qQYO'#HuO>UQWO'#IvO@TQbO'#IvO'dQYO'#IvO@[QWO,59wO@rQ&jO'#DbOAkQWO'#E]OAxQWO'#JROBTQWO'#JQOBTQWO'#JQOB]QWO,5:yOBbQWO'#JPOBiQWO'#DyO5vQ#tO'#EZOBwQWO'#EZOCSQ`O'#FROOQ$IU,5:S,5:SOC[QYO,5:SOEYQ$IfO,5:^OEvQWO,5:dOFaQ$I[O'#JOO7VQWO'#I}OFhQWO'#I}OFpQWO,5:xOFuQWO'#I}OGTQYO,5:vOITQWO'#EWOJ_QWO,5:vOKnQWO'#DlOKuQYO'#DqOLPQ&jO,5;PO){QYO,5;POOQQ'#Er'#ErOOQQ'#Et'#EtO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;ROOQQ'#Ex'#ExOLXQYO,5;cOOQ$IU,5;h,5;hOOQ$IU,5;i,5;iONXQWO,5;iOOQ$IU,5;j,5;jO){QYO'#IPON^Q$I[O,5<TONxQWO,5;RO){QYO,5;fO! bQpO'#JVO! PQpO'#JVO! iQpO'#JVO! zQpO,5;qOOOO,5;{,5;{O!!YQYO'#FcOOOO'#IO'#IOO3rO!bO,5;nO!!aQpO'#FeOOQ$IU,5;n,5;nO!!}Q,UO'#CrOOQ$IU'#Cu'#CuO!#bQWO'#CuO!#gOSO'#CyO!$TQ#tO,5<QO!$[QWO,5<SO!%hQWO'#FrO!%uQWO'#FsO!%zQWO'#FwO!&yQ&jO'#F{O!'lQ,UO'#IqOOQ$IU'#Iq'#IqO!'vQWO'#IpO!(UQWO'#IoOOQ$IU'#Cs'#CsOOQ$IU'#C|'#C|O!(^QWO'#DOOJdQWO'#FjOJdQWO'#FlO!(cQWO'#FnO!(hQWO'#FoO!(mQWO'#FuOJdQWO'#FzO!(rQWO'#E^O!)ZQWO,5<RO`QYO,5>[OOQQ'#Ik'#IkOOQQ,5>],5>]OOQQ-E;p-E;pO!+VQ$IfO,5:UOOQ$IS'#Cp'#CpO!+vQ#tO,5<vOOQO'#Cf'#CfO!,XQWO'#CqO!,aQ$I[O'#IlO5_QWO'#IlO:^QWO,59XO!,rQpO,59XO!,zQ#tO,59XO5vQ#tO,59XO!-VQWO,5:vO!-_QWO'#GxO!-mQWO'#JbO){QYO,5;kO!-uQ&jO,5;mO!-zQWO,5=cO!.PQWO,5=cO!.UQWO,5=cO5iQ$I[O,5=cO5qQWO,5<vO!.dQWO'#E_O!.xQ&jO'#E`OOQ$IS'#JP'#JPO!/ZQ$I[O'#J_O5iQ$I[O,5<zO7pQWO,5=QOOQO'#Cr'#CrO!/fQpO,5<}O!/nQ#tO,5=OO!/yQWO,5=QO!0OQ`O,5=TO:^QWO'#GnO5qQWO'#GpO!0WQWO'#GpO5vQ#tO'#GsO!0]QWO'#GsOOQQ,5=W,5=WO!0bQWO'#GtO!0jQWO'#CmO!0oQWO,59OO!0yQWO,59OO!2{QYO,59OOOQQ,59O,59OO!3YQ$I[O,59OO){QYO,59OO!3eQYO'#G{OOQQ'#G|'#G|OOQQ'#G}'#G}O`QYO,5=eO!3uQWO,5=eO){QYO'#DxO`QYO,5=kO`QYO,5=mO!3zQWO,5=oO`QYO,5=qO!4PQWO,5=tO!4UQYO,5=zOOQQ,5>Q,5>QO){QYO,5>QO5iQ$I[O,5>SOOQQ,5>U,5>UO!8VQWO,5>UOOQQ,5>W,5>WO!8VQWO,5>WOOQQ,5>Y,5>YO!8[Q`O,59rOOOS-E;r-E;rOOQ$IU1G/]1G/]O!8aQbO,5>aO'dQYO,5>aOOQO,5>f,5>fO!8kQYO'#HuOOQO-E;s-E;sO!8xQWO,5?bO!9QQbO,5?bO!9XQWO,5?lOOQ$IU1G/c1G/cO!9aQpO'#DTOOQO'#Ix'#IxO){QYO'#IxO!:OQpO'#IxO!:mQpO'#DcO!;OQ&jO'#DcO!=ZQYO'#DcO!=bQWO'#IwO!=jQWO,59|O!=oQWO'#EaO!=}QWO'#JSO!>VQWO,5:zO!>mQ&jO'#DcO){QYO,5?mO!>wQWO'#HzOOQO-E;x-E;xO!9XQWO,5?lOOQ$IS1G0e1G0eO!@TQ&jO'#D|OOQ$IU,5:e,5:eO){QYO,5:eOITQWO,5:eO!@[QWO,5:eO:^QWO,5:uO!,rQpO,5:uO!,zQ#tO,5:uO5vQ#tO,5:uOOQ$IU1G/n1G/nOOQ$IU1G0O1G0OOOQ$IS'#EV'#EVO){QYO,5?jO!@gQ$I[O,5?jO!@xQ$I[O,5?jO!APQWO,5?iO!AXQWO'#H|O!APQWO,5?iOOQ$IS1G0d1G0dO7VQWO,5?iOOQ$IU1G0b1G0bO!AsQ$IfO1G0bO!BdQ$IdO,5:rOOQ$IU'#Fq'#FqO!CQQ$IfO'#IqOGTQYO1G0bO!EPQ#tO'#IyO!EZQWO,5:WO!E`QbO'#IzO){QYO'#IzO!EjQWO,5:]OOQ$IU'#DT'#DTOOQ$IU1G0k1G0kO!EoQWO1G0kO!HQQ$IfO1G0mO!HXQ$IfO1G0mO!JlQ$IfO1G0mO!JsQ$IfO1G0mO!LzQ$IfO1G0mO!M_Q$IfO1G0mO#!OQ$IfO1G0mO#!VQ$IfO1G0mO#$jQ$IfO1G0mO#$qQ$IfO1G0mO#&fQ$IfO1G0mO#)`Q7^O'#ChO#+ZQ7^O1G0}O#-UQ7^O'#IuOOQ$IU1G1T1G1TO#-iQ$IfO,5>kOOQ$IS-E;}-E;}O#.YQ$IfO1G0mOOQ$IU1G0m1G0mO#0[Q$IfO1G1QO#0{QpO,5;sO#1QQpO,5;tO#1VQpO'#F[O#1kQWO'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#1pQpO1G1]OOQ$IU1G1]1G1]OOOO1G1f1G1fO#2OQ7^O'#ItO#2YQWO,5;}OLXQYO,5;}OOOO-E;|-E;|OOQ$IU1G1Y1G1YOOQ$IU,5<P,5<PO#2_QpO,5<POOQ$IU,59a,59aOITQWO'#C{OOOS'#Hs'#HsO#2dOSO,59eOOQ$IU,59e,59eO){QYO1G1lO!(hQWO'#IRO#2oQWO,5<eOOQ$IU,5<b,5<bOOQO'#GV'#GVOJdQWO,5<pOOQO'#GX'#GXOJdQWO,5<rOJdQWO,5<tOOQO1G1n1G1nO#2zQ`O'#CpO#3_Q`O,5<^O#3fQWO'#JZO5qQWO'#JZO#3tQWO,5<`OJdQWO,5<_O#3yQ`O'#FqO#4WQ`O'#J[O#4bQWO'#J[OITQWO'#J[O#4gQWO,5<cOOQ$IS'#Dg'#DgO#4lQWO'#FtO#4wQpO'#F|O!&tQ&jO'#F|O!&tQ&jO'#GOO#5YQWO'#GPO!(mQWO'#GSO#5_Q$I[O'#ITO#5jQ&jO,5<gOOQ$IU,5<g,5<gO#5qQ&jO'#F|O#6PQ&jO'#F}O#6XQ&jO'#F}OOQ$IU,5<u,5<uOJdQWO,5?[OJdQWO,5?[O#6^QWO'#IUO#6iQWO,5?ZOOQ$IU'#Ch'#ChO#7]Q#tO,59jOOQ$IU,59j,59jO#8OQ#tO,5<UO#8qQ#tO,5<WO#8{QWO,5<YOOQ$IU,5<Z,5<ZO#9QQWO,5<aO#9VQ#tO,5<fOGTQYO1G1mO#9gQWO1G1mOOQQ1G3v1G3vOOQ$IU1G/p1G/pONXQWO1G/pOOQQ1G2b1G2bOITQWO1G2bO){QYO1G2bOITQWO1G2bO#9lQWO1G2bO#9zQWO,59]O#;TQWO'#EWOOQ$IS,5?W,5?WO#;_Q$I[O,5?WOOQQ1G.s1G.sO:^QWO1G.sO!,rQpO1G.sO!,zQ#tO1G.sO#;pQWO1G0bO#;uQWO'#ChO#<QQWO'#JcO#<YQWO,5=dO#<_QWO'#JcO#<dQWO'#JcO#<lQWO'#I^O#<zQWO,5?|O#=SQbO1G1VOOQ$IU1G1X1G1XO5qQWO1G2}O#=ZQWO1G2}O#=`QWO1G2}O#=eQWO1G2}OOQQ1G2}1G2}O#=jQ#tO1G2bO7VQWO'#JQO7VQWO'#EaO7VQWO'#IWO#={Q$I[O,5?yOOQQ1G2f1G2fO!/yQWO1G2lOITQWO1G2iO#>WQWO1G2iOOQQ1G2j1G2jOITQWO1G2jO#>]QWO1G2jO#>eQ&jO'#GhOOQQ1G2l1G2lO!&tQ&jO'#IYO!0OQ`O1G2oOOQQ1G2o1G2oOOQQ,5=Y,5=YO#>mQ#tO,5=[O5qQWO,5=[O#5YQWO,5=_O5_QWO,5=_O!,rQpO,5=_O!,zQ#tO,5=_O5vQ#tO,5=_O#?OQWO'#JaO#?ZQWO,5=`OOQQ1G.j1G.jO#?`Q$I[O1G.jO#?kQWO1G.jO#?pQWO1G.jO5iQ$I[O1G.jO#?xQbO,5@OO#@SQWO,5@OO#@_QYO,5=gO#@fQWO,5=gO7VQWO,5@OOOQQ1G3P1G3PO`QYO1G3POOQQ1G3V1G3VOOQQ1G3X1G3XO:XQWO1G3ZO#@kQYO1G3]O#DfQYO'#H[OOQQ1G3`1G3`O#DsQWO'#HbO:^QWO'#HdOOQQ1G3f1G3fO#D{QYO1G3fO5iQ$I[O1G3lOOQQ1G3n1G3nOOQ$IS'#Fx'#FxO5iQ$I[O1G3pO5iQ$I[O1G3rOOOS1G/^1G/^O#HyQ`O,5<TO#IRQbO1G3{OOQO1G4Q1G4QO){QYO,5>aO#I]QWO1G4|O#IeQWO1G5WO#ImQWO,5?dOLXQYO,5:{O7VQWO,5:{O:^QWO,59}OLXQYO,59}O!,rQpO,59}O#IrQ7^O,59}OOQO,5:{,5:{O#I|Q&jO'#HvO#JdQWO,5?cOOQ$IU1G/h1G/hO#JlQ&jO'#H{O#KQQWO,5?nOOQ$IS1G0f1G0fO!;OQ&jO,59}O#KYQbO1G5XO7VQWO,5>fOOQ$IS'#ES'#ESO#KdQ$ItO'#ETO!?{Q&jO'#D}OOQO'#Hy'#HyO#LOQ&jO,5:hOOQ$IU,5:h,5:hO#LVQ&jO'#D}O#LhQ&jO'#D}O#LoQ&jO'#EYO#LrQ&jO'#ETO#MPQ&jO'#ETO!?{Q&jO'#ETO#MdQWO1G0PO#MiQ`O1G0POOQ$IU1G0P1G0PO){QYO1G0POITQWO1G0POOQ$IU1G0a1G0aO:^QWO1G0aO!,rQpO1G0aO!,zQ#tO1G0aO#MpQ$IfO1G5UO){QYO1G5UO#NQQ$I[O1G5UO#NcQWO1G5TO7VQWO,5>hOOQO,5>h,5>hO#NkQWO,5>hOOQO-E;z-E;zO#NcQWO1G5TO#NyQ$IfO,59jO$!xQ$IfO,5<UO$$zQ$IfO,5<WO$&|Q$IfO,5<fOOQ$IU7+%|7+%|O$)UQ$IfO7+%|O$)uQWO'#HwO$*PQWO,5?eOOQ$IU1G/r1G/rO$*XQYO'#HxO$*fQWO,5?fO$*nQbO,5?fOOQ$IU1G/w1G/wOOQ$IU7+&V7+&VO$*xQ7^O,5:^O){QYO7+&iO$+SQ7^O,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$+aQMhO,5;vOLXQYO,5;uOOQO-E;{-E;{OOQ$IU7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$+lQWO1G1iOOQ$IU1G1k1G1kO$+qQ`O,59gOOOS-E;q-E;qOOQ$IU1G/P1G/PO$+xQ$IfO7+'WOOQ$IU,5>m,5>mO$,iQWO,5>mOOQ$IU1G2P1G2PP$,nQWO'#IRPOQ$IU-E<P-E<PO$-_Q#tO1G2[O$.QQ#tO1G2^O$.[Q#tO1G2`OOQ$IU1G1x1G1xO$.cQWO'#IQO$.qQWO,5?uO$.qQWO,5?uO$.yQWO,5?uO$/UQWO,5?uOOQO1G1z1G1zO$/dQ#tO1G1yO$/tQWO'#ISO$0UQWO,5?vOITQWO,5?vO$0^Q`O,5?vOOQ$IU1G1}1G1}OOQ$IS,5<h,5<hOOQ$IS,5<i,5<iO$0hQWO,5<iO#5TQWO,5<iO!,rQpO,5<hO$0mQWO,5<jOOQ$IS,5<k,5<kO$0hQWO,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ$IU1G2R1G2RO!&tQ&jO,5<hO$0uQWO,5<iO!&tQ&jO,5<jO!&tQ&jO,5<iO$1QQ#tO1G4vO$1[Q#tO1G4vOOQO,5>p,5>pOOQO-E<S-E<SO!-uQ&jO,59lO){QYO,59lO$1iQWO1G1tOJdQWO1G1{O$1nQ$IfO7+'XOOQ$IU7+'X7+'XOGTQYO7+'XOOQ$IU7+%[7+%[O$2_Q`O'#J]O#MdQWO7+'|O$2iQWO7+'|O$2qQ`O7+'|OOQQ7+'|7+'|OITQWO7+'|O){QYO7+'|OITQWO7+'|OOQO1G.w1G.wO$2{Q$IdO'#ChO$3`Q$IdO,5<lO$4QQWO,5<lOOQ$IS1G4r1G4rOOQQ7+$_7+$_O:^QWO7+$_O!,rQpO7+$_OGTQYO7+%|O$4VQWO'#I]O$4hQWO,5?}OOQO1G3O1G3OO5qQWO,5?}O$4hQWO,5?}O$4pQWO,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ$IU7+&q7+&qO$4uQWO7+(iO5iQ$I[O7+(iO5qQWO7+(iO$4zQWO7+(iO$5PQWO7+'|OOQ$IS,5>r,5>rOOQ$IS-E<U-E<UOOQQ7+(W7+(WO$5_Q$IdO7+(TOITQWO7+(TO$5iQ`O7+(UOOQQ7+(U7+(UOITQWO7+(UO$5pQWO'#J`O$5{QWO,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQQ7+(Z7+(ZO$6uQ&jO'#GqOOQQ1G2v1G2vOITQWO1G2vO){QYO1G2vOITQWO1G2vO$6|QWO1G2vO$7[Q#tO1G2vO5iQ$I[O1G2yO#5YQWO1G2yO5_QWO1G2yO!,rQpO1G2yO!,zQ#tO1G2yO$7mQWO'#I[O$7xQWO,5?{O$8QQ&jO,5?{OOQ$IS1G2z1G2zOOQQ7+$U7+$UO$8YQWO7+$UO5iQ$I[O7+$UO$8_QWO7+$UO){QYO1G5jO){QYO1G5kO$8dQYO1G3RO$8kQWO1G3RO$8pQYO1G3RO$8wQ$I[O1G5jOOQQ7+(k7+(kO5iQ$I[O7+(uO`QYO7+(wOOQQ'#Jf'#JfOOQQ'#I_'#I_O$9RQYO,5=vOOQQ,5=v,5=vO){QYO'#H]O$9`QWO'#H_OOQQ,5=|,5=|O7VQWO,5=|OOQQ,5>O,5>OOOQQ7+)Q7+)QOOQQ7+)W7+)WOOQQ7+)[7+)[OOQQ7+)^7+)^OOQO1G5O1G5OO$9eQ7^O1G0gO$9oQWO1G0gOOQO1G/i1G/iO$9zQ7^O1G/iO:^QWO1G/iOLXQYO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!,rQpO1G/iO:^QWO,5:iOOQO,5:o,5:oO){QYO,5:oO$:UQ$I[O,5:oO$:aQ$I[O,5:oO!,rQpO,5:iOOQO-E;w-E;wOOQ$IU1G0S1G0SO!?{Q&jO,5:iO$:oQ&jO,5:iO$;QQ$ItO,5:oO$;lQ&jO,5:iO!?{Q&jO,5:oOOQO,5:t,5:tO$;sQ&jO,5:oO$<QQ$I[O,5:oOOQ$IU7+%k7+%kO#MdQWO7+%kO#MiQ`O7+%kOOQ$IU7+%{7+%{O:^QWO7+%{O!,rQpO7+%{O$<fQ$IfO7+*pO){QYO7+*pOOQO1G4S1G4SO7VQWO1G4SO$<vQWO7+*oO$=OQ$IfO1G2[O$?QQ$IfO1G2^O$ASQ$IfO1G1yO$C[Q#tO,5>cOOQO-E;u-E;uO$CfQbO,5>dO){QYO,5>dOOQO-E;v-E;vO$CpQWO1G5QO$CxQ7^O1G0bO$FPQ7^O1G0mO$FWQ7^O1G0mO$HXQ7^O1G0mO$H`Q7^O1G0mO$JTQ7^O1G0mO$JhQ7^O1G0mO$LuQ7^O1G0mO$L|Q7^O1G0mO$N}Q7^O1G0mO% UQ7^O1G0mO%!yQ7^O1G0mO%#^Q$IfO<<JTO%#}Q7^O1G0mO%&UQ7^O'#IqO%'nQ7^O1G1QOLXQYO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%'{QWO1G1aO%(QQ7^O,5>kOOOO7+'T7+'TOOOS1G/R1G/ROOQ$IU1G4X1G4XOJdQWO7+'zO%([QWO,5>lO5qQWO,5>lOOQO-E<O-E<OO%(jQWO1G5aO%(jQWO1G5aO%(rQWO1G5aO%(}Q`O,5>nO%)XQWO,5>nOITQWO,5>nOOQO-E<Q-E<QO%)^Q`O1G5bO%)hQWO1G5bOOQ$IS1G2T1G2TO$0hQWO1G2TOOQ$IS1G2S1G2SO%)pQWO1G2UOITQWO1G2UOOQ$IS1G2Y1G2YO!,rQpO1G2SO#5TQWO1G2TO%)uQWO1G2UO%)}QWO1G2TOJdQWO7+*bOOQ$IU1G/W1G/WO%*YQWO1G/WOOQ$IU7+'`7+'`O%*_Q#tO7+'gO%*oQ$IfO<<JsOOQ$IU<<Js<<JsOITQWO'#IVO%+`QWO,5?wOOQQ<<Kh<<KhOITQWO<<KhO#MdQWO<<KhO%+hQWO<<KhO%+pQ`O<<KhOITQWO1G2WOOQQ<<Gy<<GyO:^QWO<<GyO%+zQ$IfO<<IhOOQ$IU<<Ih<<IhOOQO,5>w,5>wO%,kQWO,5>wO%,pQWO,5>wOOQO-E<Z-E<ZO%,xQWO1G5iO%,xQWO1G5iO5qQWO1G5iO%-QQWO<<LTOOQQ<<LT<<LTO%-VQWO<<LTO5iQ$I[O<<LTO){QYO<<KhOITQWO<<KhOOQQ<<Ko<<KoO$5_Q$IdO<<KoOOQQ<<Kp<<KpO$5iQ`O<<KpO%-[Q&jO'#IXO%-gQWO,5?zOLXQYO,5?zOOQQ1G2n1G2nO#KdQ$ItO'#ETO!?{Q&jO'#GrOOQO'#IZ'#IZO%-oQ&jO,5=]OOQQ,5=],5=]O%-vQ&jO'#ETO%.RQ&jO'#ETO%.jQ&jO'#ETO%.tQ&jO'#GrO%/VQWO7+(bO%/[QWO7+(bO%/dQ`O7+(bOOQQ7+(b7+(bOITQWO7+(bO){QYO7+(bOITQWO7+(bO%/nQWO7+(bOOQQ7+(e7+(eO5iQ$I[O7+(eO#5YQWO7+(eO5_QWO7+(eO!,rQpO7+(eO%/|QWO,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%0XQWO1G5gO5iQ$I[O<<GpOOQQ<<Gp<<GpO%0aQWO<<GpO%0fQWO7++UO%0kQWO7++VOOQQ7+(m7+(mO%0pQWO7+(mO%0uQYO7+(mO%0|QWO7+(mO){QYO7++UO){QYO7++VOOQQ<<La<<LaOOQQ<<Lc<<LcOOQQ-E<]-E<]OOQQ1G3b1G3bO%1RQWO,5=wOOQQ,5=y,5=yO%1WQWO1G3hOLXQYO7+&ROOQO7+%T7+%TO%1]Q7^O1G5XO:^QWO7+%TOOQO1G0T1G0TO%1gQ$IfO1G0ZOOQO1G0Z1G0ZO){QYO1G0ZO%1qQ$I[O1G0ZO:^QWO1G0TO!,rQpO1G0TO!?{Q&jO1G0TO%1|Q$I[O1G0ZO%2[Q&jO1G0TO%2mQ$I[O1G0ZO%3RQ$ItO1G0ZO%3]Q&jO1G0TO!?{Q&jO1G0ZOOQ$IU<<IV<<IVOOQ$IU<<Ig<<IgO:^QWO<<IgO%3dQ$IfO<<N[OOQO7+)n7+)nO%3tQ$IfO7+'gO%5|QbO1G4OO%6WQ7^O7+%|O%6|Q7^O,59jO%8zQ7^O,5<UO%:{Q7^O,5<WO%<hQ7^O,5<fO%>WQ7^O7+'WO%>eQ7^O7+'XO%>rQWO,5;xOOQO7+&{7+&{O%>wQ#tO<<KfOOQO1G4W1G4WO%?XQWO1G4WO%?dQWO1G4WO%?rQWO7+*{O%?rQWO7+*{OITQWO1G4YO%?zQ`O1G4YO%@UQWO7+*|OOQ$IS7+'o7+'oO$0hQWO7+'pO%@^Q`O7+'pOOQ$IS7+'n7+'nO$0hQWO7+'oO%@eQWO7+'pOITQWO7+'pO#5TQWO7+'oO%@jQ#tO<<M|OOQ$IU7+$r7+$rO%@tQ`O,5>qOOQO-E<T-E<TO#MdQWOANASOOQQANASANASOITQWOANASO%AOQ$IdO7+'rOOQQAN=eAN=eO5qQWO1G4cOOQO1G4c1G4cO%A`QWO1G4cO%AeQWO7++TO%AeQWO7++TO5iQ$I[OANAoO%AmQWOANAoOOQQANAoANAoO%ArQWOANASO%AzQ`OANASOOQQANAZANAZOOQQANA[ANA[O%BUQWO,5>sOOQO-E<V-E<VO%BaQ7^O1G5fO#5YQWO,5=^O5_QWO,5=^O!,rQpO,5=^OOQO-E<X-E<XOOQQ1G2w1G2wO$;QQ$ItO,5:oO!?{Q&jO,5=^O%BkQ&jO,5=^O%B|Q&jO,5:oOOQQ<<K|<<K|OITQWO<<K|O%/VQWO<<K|O%CWQWO<<K|O%C`Q`O<<K|O){QYO<<K|OITQWO<<K|OOQQ<<LP<<LPO5iQ$I[O<<LPO#5YQWO<<LPO5_QWO<<LPO%CjQ&jO1G4bO%CrQWO7++ROOQQAN=[AN=[O5iQ$I[OAN=[OOQQ<<Np<<NpOOQQ<<Nq<<NqOOQQ<<LX<<LXO%CzQWO<<LXO%DPQYO<<LXO%DWQWO<<NpO%D]QWO<<NqOOQQ1G3c1G3cO:^QWO7+)SO%DbQ7^O<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%1gQ$IfO7+%uO){QYO7+%uOOQO7+%o7+%oO:^QWO7+%oO!,rQpO7+%oO%DlQ$I[O7+%uO!?{Q&jO7+%oO%DwQ$I[O7+%uO%EVQ&jO7+%oO%EhQ$I[O7+%uOOQ$IUAN?RAN?RO%E|Q$IfO<<KfO%HUQ7^O<<JTO%HcQ7^O1G1yO%JgQ7^O1G2[O%LhQ7^O1G2^O%NTQ7^O<<JsO%NbQ7^O<<IhOOQO1G1d1G1dOOQO7+)r7+)rO%NoQWO7+)rO%NzQWO<<NgO& SQ`O7+)tOOQ$IS<<K[<<K[O$0hQWO<<K[OOQ$IS<<KZ<<KZO& ^Q`O<<K[O$0hQWO<<KZOOQQG26nG26nO#MdQWOG26nOOQO7+)}7+)}O5qQWO7+)}O& eQWO<<NoOOQQG27ZG27ZO5iQ$I[OG27ZOITQWOG26nOLXQYO1G4_O& mQWO7++QO5iQ$I[O1G2xO#5YQWO1G2xO5_QWO1G2xO!,rQpO1G2xO!?{Q&jO1G2xO%3RQ$ItO1G0ZO& uQ&jO1G2xO%/VQWOANAhOOQQANAhANAhOITQWOANAhO&!WQWOANAhO&!`Q`OANAhOOQQANAkANAkO5iQ$I[OANAkO#5YQWOANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQQG22vG22vOOQQANAsANAsO&!jQWOANAsOOQQAND[AND[OOQQAND]AND]OOQQ<<Ln<<LnOOQO<<Ia<<IaO%1gQ$IfO<<IaOOQO<<IZ<<IZO:^QWO<<IZO){QYO<<IaO!,rQpO<<IZO&!oQ$I[O<<IaO!?{Q&jO<<IZO&!zQ$I[O<<IaO&#YQ7^O7+'gOOQO<<M^<<M^OOQ$ISAN@vAN@vO$0hQWOAN@vOOQ$ISAN@uAN@uOOQQLD,YLD,YOOQO<<Mi<<MiOOQQLD,uLD,uO#MdQWOLD,YO&$xQ7^O7+)yOOQO7+(d7+(dO5iQ$I[O7+(dO#5YQWO7+(dO5_QWO7+(dO!,rQpO7+(dO!?{Q&jO7+(dOOQQG27SG27SO%/VQWOG27SOITQWOG27SOOQQG27VG27VO5iQ$I[OG27VOOQQG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%1gQ$IfOAN>{O:^QWOAN>uO){QYOAN>{O!,rQpOAN>uO&%SQ$I[OAN>{O&%_Q7^O<<KfOOQ$ISG26bG26bOOQQ!$( t!$( tOOQO<<LO<<LOO5iQ$I[O<<LOO#5YQWO<<LOO5_QWO<<LOO!,rQpO<<LOOOQQLD,nLD,nO%/VQWOLD,nOOQQLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%1gQ$IfOG24gO:^QWOG24aO){QYOG24gO&&}QMhO,5:rO&'tQ!LQO'#IqOOQOANAjANAjO5iQ$I[OANAjO#5YQWOANAjO5_QWOANAjOOQQ!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%1gQ$IfOLD*RO&(hQMhO,59jO&)[QMhO,5<UO&*OQMhO,5<WO&*rQMhO,5<fOOQOG27UG27UO5iQ$I[OG27UO#5YQWOG27UOOQO!$'Mm!$'MmO&+iQMhO1G2[O&,]QMhO1G2^O&-PQMhO1G1yOOQOLD,pLD,pO5iQ$I[OLD,pO&-vQMhO7+'gOOQO!$(![!$(![O&.mQMhO<<KfOLXQYO'#DrO&/dQbO'#ItOLXQYO'#DjO&/kQ$IfO'#ChO&0UQbO'#ChO&0fQYO,5:vO&2fQWO'#EWOLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO'#IPO&3pQWO,5<TO&5SQWO,5;ROLXQYO,5;fO!(^QWO'#DOO!(^QWO'#DOO!(^QWO'#DOOITQWO'#FjO&2fQWO'#FjO&3xQWO'#FjOITQWO'#FlO&2fQWO'#FlO&3xQWO'#FlOITQWO'#FzO&2fQWO'#FzO&3xQWO'#FzOLXQYO,5?mO&0fQYO1G0bO&5ZQ7^O'#ChOLXQYO1G1lOITQWO,5<pO&2fQWO,5<pO&3xQWO,5<pOITQWO,5<rO&2fQWO,5<rO&3xQWO,5<rOITQWO,5<_O&2fQWO,5<_O&3xQWO,5<_O&0fQYO1G1mOLXQYO7+&iOITQWO1G1{O&2fQWO1G1{O&3xQWO1G1{O&0fQYO7+'XO&0fQYO7+%|OITQWO7+'zO&2fQWO7+'zO&3xQWO7+'zO&5eQWO7+'pO&5eQWO<<K[O&5eQWOAN@vO&5jQWO'#E[O&5oQWO'#E[O&5wQWO'#EzO&5|QWO'#EgO&6RQWO'#JRO&6^QWO'#JPO&6iQWO,5:vO&6nQ#tO,5<QO&6uQWO'#FsO&6zQWO'#FsO&7PQWO'#FsO&7UQWO,5<RO&7^QWO,5:vO&7fQ7^O1G0}O&7mQWO,5<aO&7rQWO,5<aO&7wQWO,5<aO&7|QWO1G1mO&8RQWO1G0bO&8WQ#tO1G2`O&8_Q#tO1G2`O&8fQ#tO1G2`O&8mQWO1G2UO&8rQ`O7+'pO&8yQWO7+'pO&9OQ`O<<K[O4QQWO'#FhO5_QWO'#FgOBwQWO'#EZOLXQYO,5;cO!(mQWO'#FuO!(mQWO'#FuO!(mQWO'#FuOJdQWO,5<tOJdQWO,5<tOJdQWO,5<tO&9VQWO,5<jOITQWO1G2UO&9_QWO1G2UOITQWO7+'pO!&tQ&jO'#GOO!&tQ&jO,5<j",stateData:"&:]~O'YOS'ZOSTOSUOS~OPTOQTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OP[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOR!WO'U!XO'V!ZO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9WO'fQO'oYO'|aO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9XO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOP'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO']#pO'f#sO'a'cP~O!d$XO~O!]$ZO~O_$[O'W$[O~O']$`O~O!d$XO']$`O'^$bO'b$cO~Oc$iO!d$XO']$`O~O#c#TO~O]$rOu$nO!T$kO!d$mO%R$qO']$`O'^$bO^(UP~O!n$sO~Ox$tO!T$uO']$`O~Ox$tO!T$uO%Z$yO']$`O~O']$zO~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%TOc%SO!n%QO%P%RO%c%PO~P7uOb%WOcmO!T%VO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%ZO!{%^O%R%XO'^$bO~P8tO!d%_O!g%cO~O!d%dO~O!TSO~O_$[O'T%lO'W$[O~O_$[O'T%oO'W$[O~O_$[O'T%qO'W$[O~OR!WO'U!XO'V%uO~OP[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;aO!Q%wO!O&iX!O&nX!R&iX!R&nX~P'dO!R%yO!O'jX~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R%yO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>^O!O&OO~Ox&RO!W&]O!X&UO!Y&UO'^$bO~O]&SOk&SO!Q&VO'g&PO!S'kP!S'vP~P@aO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PAYO!{&^O!O'uX!R'uX~O!R&_O!O'tX~O!O&bO~O!{#eO~PAYOS&fO!T&cO!o&eO']$`O~Oc&kO!d$XO']$`O~Ou$nO!d$mO~O!S&lO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOP!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCcO!c&mO~O!]!wO!{&oO'p&nO!R'rX_'rX'W'rX~O!c'rX~PE{O!R&sO!c'qX~O!c&uO~Ox$tO!T$uO#V&vO']$`O~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9WO'fQO'oYO'|aO~O]#qOh$OOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO']&zO'f#sO~O#W&|O~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO']&zO'f#sO~O'a'mP~PJdO!Q'QO!c'nP~P){O'g'SO'oYO~OP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!T!bO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O']'bO'fQO'oYO'|:}O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'iO~PITO!]'kO!T'yX#w'yX#z'yX$R'yX~Ou'lO~P! POu'lO!T'yX#w'yX#z'yX$R'yX~O!T'nO#w'rO#z'mO$R'sO~O!Q'vO~PLXO#z#fO$R'yO~Ou$eXx$eX!b$eX'p$eX'w$eX'x$eX~OSfX!RfX!{fX'afX'a$eX~P!!iOk'{O~OR'|O'U'}O'V(PO~Ou(ROx(SO'p#[O'w(UO'x(WO~O'a(QO~P!#rO'a(ZO~O]#qOh$OOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO'f#sO~O!Q(_O']([O!c'}P~P!$aO#W(aO~O!Q(eO'](bO!O(OP~P!$aOj(sOx(kO!W(qO!X(jO!Y(jO!d(hO!x(rO$w(mO'^$bO'g(gO~O!S(pO~P!&XO!b!yOu'eXx'eX'p'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'QOS(vO!{(uO!R'dX'a'dX~O!R(wO'a'cX~O'](yO~O!d)OO~O']&zO~O!d(hO~Ox$tO!Q!rO!T$uO#U!uO#V!rO']$`O!c'qP~O!]!wO#W)SO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)cOS)[O!T&cO!o)ZO%Q)YO'b$cO~O']$zO'a'cP~O!])_O!T'`X_'`X!R'`X'W'`X~O!d$XO'b$cO~O!d$XO']$`O'b$cO~O!]!wO#W&|O~O])jO%R)kO'])gO!S(VP~O!R)lO^(UX~O'g'SO~OZ)pO~O^)qO~O!T$kO']$`O'^$bO^(UP~Ox$tO!Q)vO!R&_O!T$uO']$`O!O'tP~O]&YOk&YO!Q)wO'g'SO!S'vP~O!R)xO_(RX'W(RX~O!{)|O'b$cO~OS*PO!T#yO'b$cO~O!T*RO~Ou*TO!TSO~O!n*YO~Oc*_O~O'](yO!S(TP~Oc$iO~O%RtO']$zO~P8tOZ*eO^*dO~OPTOQTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9WO~P!1RO^*dO_$[O'W$[O~O_*iO#d*kO%T*kO%U*kO~P){O!d%_O~O%t*pO~O!T*rO~O&V*tO&X*uOP&SaQ&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*zO~On*}O~O!O&ia!R&ia~P!)cO!Q+RO!O&iX!R&iX~P){O!R%yO!O'ja~O!O'ja~P>^O!R&_O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+WO!{+VO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+YO!d$XO'b$cO!R!VX!S!VX~O]&QOk&QOx&RO'g(gO~OP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!T!bO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O'fQO'oYO'|:}O~O']9yO~P!;^O!R+^O!S'kX~O!S+`O~O!]+WO!{+VO!R#TX!S#TX~O!R+aO!S'vX~O!S+cO~O]&QOk&QOx&RO'^$bO'g(gO~O!X+dO!Y+dO~P!>[Ox$tO!Q+fO!T$uO']$`O!O&nX!R&nX~O_+jO!W+mO!X+iO!Y+iO!r+qO!s+oO!t+pO!u+nO!x+rO'^$bO'g(gO'o+gO~O!S+lO~P!?]OS+wO!T&cO!o+vO~O!{+}O!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@gO!R&sO!c'qa~Ox$tO!Q,QO!T$uO#U,SO#V,QO']$`O!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)cO#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!#rO#W'eXP'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'QO!R,]O'a'mX~P!#rO'a,_O~O!R,`O!c'nX~P!)cO!c,cO~O!O,dO~OP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!EtO#[#PO~P!EtOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!H`Oj#RO~P!H`OP#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!JzOZ#dO!a#TO#a#TO#b#TO#c#TO~P!JzOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!MrO'w!}O~P!MrOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P#!^O'x#OO~P#!^OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#$xOP[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#']OP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO#i9eO#j9fO'fQO'p#[O'w!}O'x#OO~O#m,fO~P#)gOP'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9jO#o9jO#c'iX#m'iX!S'iX~P#+bO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)cOP#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!#rO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)cO#z,hO~O#z,iO~O!]'kO!{,jO!T$OX#w$OX#z$OX$R$OX~O!Q,kO~O!T'nO#w,mO#z'mO$R,nO~O!R9gO!S'hX~P#)gO!S,oO~O$R,qO~OR'|O'U'}O'V,tO~O],wOk,wO!O,xO~O!RdX!]dX!cdX!c$eX'pdX~P!!iO!c-OO~P!#rO!R-PO!]!wO'p&nO!c'}X~O!c-UO~O!O$eX!R$eX!]$lX~P!!iO!R-WO!O(OX~P!#rO!]-YO~O!O-[O~O!Q(_O']$`O!c'}P~Oj-`O!]!wO!d$XO'b$cO'p&nO~O!])_O~O_$[O!R-eO'W$[O~O!S-gO~P!&XO!X-hO!Y-hO'^$bO'g(gO~Ox-jO'g(gO~O!x-kO~O']$zO!R&xX'a&xX~O!R(wO'a'ca~Ou-pOv-pOx-qO'pra'wra'xra!Rra!{ra~O'ara#mra~P#6qOu(ROx(SO'p$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#7gOu(ROx(SO'p$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#8YO]-rO~O#W-sO~O'a$na!R$na#m$na!{$na~P!#rO#W-vO~OS.PO!T&cO!o.OO%Q-}O~O'a.QO~O]#qOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO'f#sO~Oh.SO'].RO~P#:PO!])_O!T'`a_'`a!R'`a'W'`a~O#W.YO~OZ[X!RdX!SdX~O!R.ZO!S(VX~O!S.]O~OZ.^O~O].`O'])gO~O!T$kO']$`O^'QX!R'QX~O!R)lO^(Ua~O!c.cO~P!)cO].eO~OZ.fO~O^.gO~OS.PO!T&cO!o.OO%Q-}O'b$cO~O!R)xO_(Ra'W(Ra~O!{.mO~OS.pO!T#yO~O'g'SO!S(SP~OS.zO!T.vO!o.yO%Q.xO'b$cO~OZ/UO!R/SO!S(TX~O!S/VO~O^/XO_$[O'W$[O~O]/YO~O]/ZO'](yO~O#c/[O%r/]O~P0zO!{#eO#c/[O%r/]O~O_/^O~P){O_/`O~O%{/dOP%yiQ%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/jO!S/hO&Q/iO~P`O!TSO!d/lO~O&X*uOP&SiQ&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)cO!R%yO!O'ji~O!R&_O!O'ti~O!O/rO~O!R!Va!S!Va~P#)gO]&QOk&QO!Q/xO'g(gO!R&jX!S&jX~P@aO!R+^O!S'ka~O]&YOk&YO!Q)wO'g'SO!R&oX!S&oX~O!R+aO!S'va~O!O'ui!R'ui~P!)cO_$[O!]!wO!d$XO!j0SO!{0QO'W$[O'b$cO'p&nO~O!S0VO~P!?]O!X0WO!Y0WO'^$bO'g(gO'o+gO~O!W0XO~P#LVO!TSO!W0XO!u0ZO!x0[O~P#LVO!W0XO!s0^O!t0^O!u0ZO!x0[O~P#LVO!T&cO~O!T&cO~P!#rO!R'ri!c'ri_'ri'W'ri~P!)cO!{0gO!R'ri!c'ri_'ri'W'ri~O!R&sO!c'qi~Ox$tO!T$uO#V0iO']$`O~O#WraPraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra!cra!Ora!Tranra%Qra!]ra~P#6qO#W$^aP$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#7gO#W$`aP$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#8YO#W$naP$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!#rO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)cO!R&kX'a&kX~PJdO!R,]O'a'ma~O!Q0qO!R&lX!c&lX~P){O!R,`O!c'na~O!R,`O!c'na~P!)cO#m!fa!S!fa~PCcO#m!^a!R!^a!S!^a~P#)gO!T1UO#x^O$P1VO~O!S1ZO~On1[O~P!#rO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)cO!O1]O~O],wOk,wO~Ou(ROx(SO'x(WO'p$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$,vOu(ROx(SO'p$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$-iO#m1^O~P!#rO!Q1`O']$`O!R&tX!c&tX~O!R-PO!c'}a~O!R-PO!]!wO!c'}a~O!R-PO!]!wO'p&nO!c'}a~O'a$gi!R$gi#m$gi!{$gi~P!#rO!Q1gO'](bO!O&vX!R&vX~P!$aO!R-WO!O(Oa~O!R-WO!O(Oa~P!#rO!]!wO~O!]!wO#c1oO~Oj1rO!]!wO'p&nO~O!R'di'a'di~P!#rO!{1uO!R'di'a'di~P!#rO!c1xO~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)cO!R1|O!T(PX~P!#rO!T&cO%Q2PO~O!T&cO%Q2PO~P!#rO!T$eX$u[X_$eX!R$eX'W$eX~P!!iO$u2TOugXxgX!TgX'pgX'wgX'xgX_gX!RgX'WgX~O$u2TO~O]2ZO%R2[O'])gO!R'PX!S'PX~O!R.ZO!S(Va~OZ2`O~O^2aO~O]2dO~OS2fO!T&cO!o2eO%Q2PO~O_$[O'W$[O~P!#rO!T#yO~P!#rO!R2kO!{2mO!S(SX~O!S2nO~Ox;]O!W2wO!X2pO!Y2pO!r2vO!s2uO!t2uO!x2tO'^$bO'g(gO'o+gO~O!S2sO~P$6QOS3OO!T.vO!o2}O%Q2|O~OS3OO!T.vO!o2}O%Q2|O'b$cO~O'](yO!R'OX!S'OX~O!R/SO!S(Ta~O]3YO'g3XO~O]3ZO~O^3]O~O!c3`O~P){O_3bO~O_3bO~P){O#c3dO%r3eO~PE{O`/jO!S3iO&Q/iO~P`O!]3kO~O!R#Ti!S#Ti~P#)gO!{3mO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#)gO_$[O!{3tO'W$[O~O_$[O!]!wO!{3tO'W$[O~O!X3xO!Y3xO'^$bO'g(gO'o+gO~O_$[O!]!wO!d$XO!j3yO!{3tO'W$[O'b$cO'p&nO~O!W3zO~P$:oO!W3zO!u3}O!x4OO~P$:oO_$[O!]!wO!j3yO!{3tO'W$[O'p&nO~O!R'rq!c'rq_'rq'W'rq~P!)cO!R&sO!c'qq~O#W$xiP$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$,vO#W$ziP$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$-iO#W$giP$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!#rO!R&ka'a&ka~P!#rO!R&la!c&la~P!)cO!R,`O!c'ni~O#m#Oi!R#Oi!S#Oi~P#)gOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$DVO#[9[O~P$DVOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$F_Oj9^O~P$F_OP#^Oj9^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$HgOZ9iO!a9`O#a9`O#b9`O#c9`O~P$HgOP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$J{O'w!}O~P$J{OP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$MTO'x#OO~P$MTOP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO#i9eO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P% ]O_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)cOP#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi!R#Zi!S#Zi~P!#rO!b!yOu'eXx'eX'p'eX'w'eX'x'eX!S'eX~OP'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX!R'eX~P%%mO#m#ni!R#ni!S#ni~P#)gO!S4`O~O!R&sa!S&sa~P#)gO!]!wO'p&nO!R&ta!c&ta~O!R-PO!c'}i~O!R-PO!]!wO!c'}i~O!O&va!R&va~P!#rO!]4gO~O!R-WO!O(Oi~P!#rO!R-WO!O(Oi~O!O4kO~O!]!wO#c4pO~Oj4qO!]!wO'p&nO~O!O4sO~O'a$iq!R$iq#m$iq!{$iq~P!#rO_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)cO!R1|O!T(Pa~O!T&cO%Q4xO~O!T&cO%Q4xO~P!#rO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)cOZ4{O~O]4}O'])gO~O!R.ZO!S(Vi~O]5QO~O^5RO~O'g'SO!R&{X!S&{X~O!R2kO!S(Sa~O!S5`O~P$6QOx;^O'g(gO'o+gO~O!W5cO!X5bO!Y5bO!x0[O'^$bO'g(gO'o+gO~O!s5dO!t5dO~P%.RO!X5bO!Y5bO'^$bO'g(gO'o+gO~O!T.vO~O!T.vO%Q5fO~O!T.vO%Q5fO~P!#rOS5kO!T.vO!o5jO%Q5fO~OZ5pO!R'Oa!S'Oa~O!R/SO!S(Ti~O]5sO~O!c5tO~O!c5uO~O!c5vO~O!c5vO~P){O_5xO~O!]5{O~O!c5|O~O!R'ui!S'ui~P#)gO_$[O'W$[O~P!)cO_$[O!{6RO'W$[O~O_$[O!]!wO!{6RO'W$[O~O!X6WO!Y6WO'^$bO'g(gO'o+gO~O_$[O!]!wO!j6XO!{6RO'W$[O'p&nO~O!d$XO'b$cO~P%2mO!W6YO~P%2[O!R'ry!c'ry_'ry'W'ry~P!)cO#W$iqP$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!#rO!R&li!c&li~P!)cO#m#Oq!R#Oq!S#Oq~P#)gOu-pOv-pOx-qO'pra'wra'xra!Sra~OPraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra!Rra~P%6eOu(ROx(SO'p$^a'w$^a'x$^a!S$^a~OP$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a!R$^a~P%8fOu(ROx(SO'p$`a'w$`a'x$`a!S$`a~OP$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a!R$`a~P%:gOP$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na!R$na!S$na~P!#rO#m$Yq!R$Yq!S$Yq~P#)gO#m$Zq!R$Zq!S$Zq~P#)gO!S6dO~O'a$|y!R$|y#m$|y!{$|y~P!#rO!]!wO!R&ti!c&ti~O!]!wO'p&nO!R&ti!c&ti~O!R-PO!c'}q~O!O&vi!R&vi~P!#rO!R-WO!O(Oq~O!O6jO~P!#rO!O6jO~O!R'dy'a'dy~P!#rO!R&ya!T&ya~P!#rO!T$tq_$tq!R$tq'W$tq~P!#rOZ6qO~O!R.ZO!S(Vq~O]6tO~O!T&cO%Q6uO~O!T&cO%Q6uO~P!#rO!{6vO!R&{a!S&{a~O!R2kO!S(Si~P#)gO!X6|O!Y6|O'^$bO'g(gO'o+gO~O!W7OO!x4OO~P%BkO!T.vO%Q7RO~O!T.vO%Q7RO~P!#rO]7YO'g7XO~O!R/SO!S(Tq~O!c7[O~O!c7[O~P){O!c7^O~O!c7_O~O!R#Ty!S#Ty~P#)gO_$[O!{7eO'W$[O~O_$[O!]!wO!{7eO'W$[O~O!X7hO!Y7hO'^$bO'g(gO'o+gO~O_$[O!]!wO!j7iO!{7eO'W$[O'p&nO~O#W$|yP$|yZ$|y_$|yj$|yv$|y!R$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y'W$|y'f$|y!c$|y!O$|y!T$|y!{$|yn$|y%Q$|y!]$|y~P!#rO#m#ky!R#ky!S#ky~P#)gOP$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi!R$gi!S$gi~P!#rOu(ROx(SO'x(WO'p$xi'w$xi!S$xi~OP$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi!R$xi~P%JROu(ROx(SO'p$zi'w$zi'x$zi!S$zi~OP$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi!R$zi~P%LSO#m$Zy!R$Zy!S$Zy~P#)gO#m#Oy!R#Oy!S#Oy~P#)gO!]!wO!R&tq!c&tq~O!R-PO!c'}y~O!O&vq!R&vq~P!#rO!O7mO~P!#rO!R.ZO!S(Vy~O!R2kO!S(Sq~O!X7yO!Y7yO'^$bO'g(gO'o+gO~O!T.vO%Q7|O~O!T.vO%Q7|O~P!#rO!c8PO~O_$[O!{8UO'W$[O~O_$[O!]!wO!{8UO'W$[O~OP$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq!R$iq!S$iq~P!#rO!R&{q!S&{q~P#)gO_$[O!{8hO'W$[O~OP$|yZ$|yj$|yv$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y#m$|y'f$|y!R$|y!S$|y~P!#rO!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P!#rO!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%%mO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%6eO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%8fO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%:gO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P!#rO!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%JRO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%LSO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P!#rO!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P!#rO!S$|y!W$|y!X$|y!Y$|y!r$|y!s$|y!t$|y!x$|y'^$|y'g$|y'o$|y~P!#rOn'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;aOP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!TSO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O']'bO'fQO'oYO'|:}O~O]#qOh$OOj#rOk#qOl#qOq$POs9lOx#xO!T#yO!_;SO!d#vO#V9uO#t$TO$_9oO$a9rO$d$UO']&zO'f#sO~O!R9gO!S$]a~O]#qOh$OOj#rOk#qOl#qOq$POs9mOx#xO!T#yO!_;TO!d#vO#V9vO#t$TO$_9pO$a9sO$d$UO']&zO'f#sO~O#d'iO~P&3xO!S[X!SdX~P;aO!]9ZO~O#W9YO~O!]!wO#W9YO~O!{9jO~O#c9`O~O!{9wO!R'uX!S'uX~O!{9jO!R'sX!S'sX~O#W9xO~O'a9zO~P!#rO#W:RO~O#W:SO~O#W:TO~O!]!wO#W:UO~O!]!wO#W9xO~O#m:VO~P#)gO#W:WO~O#W:XO~O#W:YO~O#W:ZO~O#W:[O~O#m:]O~P!#rO#m:^O~P!#rO#m:_O~P!#rO!O:`O~O!O:aO~P!#rO!O:aO~O!O:bO~P!#rO!]!wO#c;YO~O!]!wO#c;[O~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Hc(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s5g5zP5zPPP5zP7t5zP5zP7xPP8OP8d<uPPPP<yPPPP<y?kPPP?qBSP<yPDgPPPPF`<yPPPPPHX<yPPKYLVPPPPLZMsPM{N|PLV<y<y!$^!'X!+z!+z!/ZPPP!/b!2W<yPPPPPPPPPP!4}P!6`PP<y!7mP<yP<y<y<y<yP<y!:[PP!=TP!?x!@Q!@U!@UP!=QP!@Y!@YP!B}P!CR<y<y!CX!E{5zP5zP5z5zP!GO5z5z!IU5z!Ki5z!Mi5z5z!NV#!]#!]#!a#!]#!iP#!]P5z##e5z#$y5z5z-zPPP#&cPP#&{#&{P#&{P#'b#&{PP#'hP#'_P#'_#'zMw#'_#(i#(o#(r([#(u([P#(|#(|#(|P([P([P([P([PP([P#)S#)VP#)V([P#)ZP#)^P([P([P([P([P([P([([#)d#)n#)t#)z#*Y#*`#*f#*p#*v#+V#+]#+k#+q#+w#,V#,l#.[#.j#.p#.v#.|#/S#/^#/d#/j#/t#0W#0^PPPPPPPP#0dPP#1W#4`PP#5v#5}#6VPP#;X#=l#Ch#Ck#Cn#Cy#C|PP#DP#DT#Dr#Ei#Em#FRPP#FV#F]#FaP#Fd#Fh#Fk#GZ#Gq#Gv#Gy#G|#HS#HV#HZ#H_mhOSj}!n$Z%b%e%f%h*m*r/d/gQ$hmQ$opQ%YyS&U!b+^Q&j!jS(j#y(oQ)e$iQ)r$qQ*^%SQ+d&]S+i&c+kQ+{&kQ-h(qQ/R*_Y0W+m+n+o+p+qS2p.v2rU3x0X0Z0^U5b2u2v2wS6W3z3}S6|5c5dQ7h6YR7y7O$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!j'd#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ(z$QQ)j$kQ*`%VQ*g%_Q,V9kQ.T)_Q.`)kQ/Z*eQ2Z.ZQ3V/SQ4X9mQ4}2[R8s9lpeOSjy}!n$Z%X%b%e%f%h*m*r/d/gR*b%Z&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%y&R&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;P;Q[!cRU!]!`%w&VQ$alQ$gmS$lp$qv$vrs!r!u$X$t&_&s&v)v)w)x*k+W+f,Q,S/l0iQ%OwQ&g!iQ&i!jS(^#v(hS)d$h$iQ)h$kQ)u$sQ*X%QQ*]%SS+z&j&kQ-T(_Q.X)eQ._)kQ.a)lQ.d)pQ.|*YS/Q*^*_Q0e+{Q1_-PQ2Y.ZQ2^.^Q2c.fQ3U/RQ4d1`Q4|2[Q5P2`Q6p4{R7p6q!Y$em!j$g$h$i&T&i&j&k(i)d)e+Z+h+z+{-a.X/}0T0Y0e1q3w3|6U7f8VQ)]$aQ)}${Q*Q$|Q*[%SQ.h)uQ.{*XU/P*]*^*_Q3P.|S3T/Q/RQ5]2oQ5o3US6z5^5aS7w6{6}Q8_7xR8n8`W#|a$c(w:}S${t%XQ$|uQ$}vR){$y$o#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+w,]-W-Y-s-}.P.m.p.x.z1^1g1o1u1|2P2T2f2|3O4g4p4x5f5k6u7R7|9Z9i9n9o9p9q9r9s9t9u9v9{9|9}:O:P:Q:R:S:T:W:X:Y:]:^:_:};U;V;W;Y;[T'}#s(OX({$Q9k9l9mU&Y!b$u+aQ'T!{Q)o$nQ.q*RQ1v-pR5X2k&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q$]#aZ!_!o$_%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,g,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pT!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ&W!bR/y+^Y&Q!b&U&]+^+dS(i#y(oS+h&c+kS-a(j(qQ-b(kQ-i(rQ.s*TU0T+i+m+nU0Y+o+p+qS0_+r2tQ1q-hQ1s-jQ1t-kS2o.v2rU3w0W0X0ZQ3{0[Q3|0^S5^2p2wS5a2u2vU6U3x3z3}Q6Z4OS6{5b5cQ6}5dS7f6W6YS7x6|7OQ8V7hQ8`7yQ;X;]R;Z;^lhOSj}!n$Z%b%e%f%h*m*r/d/gQ%j!QS&w!v9YQ)b$fQ*V%OQ*W%PQ+x&hS,Z&|9xS-u)S:UQ.V)cQ.u*UQ/k*tQ/m*uQ/u+XQ0]+oQ0c+yS1{-v:ZQ2U.WS2X.Y:[Q3n/wQ3q0OQ4Q0dQ4z2VQ6O3pQ6S3vQ6[4RQ7`5|Q7c6TQ8R7dQ8e8TR8q8g$W#`Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pW(t#z&{1S8jT)W$_,g$W#_Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pQ'e#`S)V$_,gR-w)W&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ%e{Q%f|Q%h!OQ%i!PR/c*pQ&d!iQ)X$aQ+u&gS-|)])uS0`+s+tW2O-y-z-{.hS4P0a0bU4w2Q2R2SU6n4v5T5UQ7o6oR8Z7rT+j&c+kS+h&c+kU0T+i+m+nU0Y+o+p+qS0_+r2tS2o.v2rU3w0W0X0ZQ3{0[Q3|0^S5^2p2wS5a2u2vU6U3x3z3}Q6Z4OS6{5b5cQ6}5dS7f6W6YS7x6|7OQ8V7hR8`7yS+j&c+kT2q.v2rS&q!q/aQ-S(^Q-_(iS0S+h2oQ1d-TS1l-`-iU3y0Y0_5aQ4c1_S4n1r1tU6X3{3|6}Q6f4dQ6m4qR7i6ZQ!xXS&p!q/aQ)T$YQ)`$dQ)f$jQ,O&qQ-R(^Q-^(iQ-c(lQ.U)aQ.}*ZS0R+h2oS1c-S-TS1k-_-iQ1n-bQ1p-dQ3R/OW3u0S0Y0_5aQ4b1_Q4f1dS4j1l1tQ4o1sQ5m3SW6V3y3{3|6}S6e4c4dS6i4k:`Q6k4nQ6x5[Q7V5nS7g6X6ZQ7k6fS7l6j:aQ7n6mQ7u6yQ8O7WQ8W7iS8Y7m:bQ8]7vQ8l8^Q8x8mQ9P8yQ:i:dQ:t:nQ:u:oQ:y;XR:{;Z$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hS!xn!k!j:c#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR:i;P$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hQ$Yb!Y$dm!j$g$h$i&T&i&j&k(i)d)e+Z+h+z+{-a.X/}0T0Y0e1q3w3|6U7f8VS$jn!kQ)a$eQ*Z%SW/O*[*]*^*_U3S/P/Q/RQ5[2oS5n3T3UU6y5]5^5aQ7W5oU7v6z6{6}S8^7w7xS8m8_8`Q8y8n!j:d#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ:n;OR:o;P$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hY!hRU!]!`%wv$vrs!r!u$X$t&_&s&v)v)w)x*k+W+f,Q,S/l0iQ*h%_!h:e#]#k'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR:h&VS&Z!b$uR/{+a$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!j'd#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR*g%_$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hQ'T!{!k:f#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q!h#VZ!_$_%v%|&x'P'^'_'`'a'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9U!R9b'c't+[,g/s/v0t0|0}1O1P1T1Y3o4W4]4^5Z5}6^6b6c7s:p!d#XZ!_$_%v%|&x'P'`'a'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9U}9d'c't+[,g/s/v0t1O1P1T1Y3o4W4]4^5Z5}6^6b6c7s:p!`#]Z!_$_%v%|&x'P'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9Un(Y#t&})R,}-V-l-m0n1y4a4r:j:v:w:xx;Q'c't+[,g/s/v0t1T1Y3o4W4]4^5Z5}6^6b6c7s:p!d;U&y'h(](c+t,Y,r-Z-x-{.l.n0b0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|Y;V8i8v8}9Q9SZ;W1R4[6_7j8X&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QS#l`#mR1V,j&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,j,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QS#g^#nT'm#i'qT#h^#nT'o#i'q&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,j,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QT#l`#mQ#o`R'x#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!k;O#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q#RdOSUj}!S!W!n!|#k$Z%Z%^%_%b%d%e%f%h%l&R&e'v)Z*i*m*r+v,k-q.O.y/[/]/^/`/d/g/i1U2e2}3b3d3e5j5xv#za!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;W#Q&{!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[Q)P$UQ,v(Rb1S9i9p9s9v9}:Q:T:Y:_c8j9Z9o9r9u9|:P:S:X:^v#wa!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;WS(l#y(oQ)Q$VQ-d(m#Q:k!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[b:l9Z9o9r9u9|:P:S:X:^b:m9i9p9s9v9}:Q:T:Y:_Q:q;RQ:r;SR:s;Tv#za!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;W#Q&{!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[b1S9i9p9s9v9}:Q:T:Y:_c8j9Z9o9r9u9|:P:S:X:^lfOSj}!n$Z%b%e%f%h*m*r/d/gQ(d#xQ*{%oQ*|%qR1f-W$n#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+w,]-W-Y-s-}.P.m.p.x.z1^1g1o1u1|2P2T2f2|3O4g4p4x5f5k6u7R7|9Z9i9n9o9p9q9r9s9t9u9v9{9|9}:O:P:Q:R:S:T:W:X:Y:]:^:_:};U;V;W;Y;[Q*O$|Q.o*QQ2i.nR5W2jT(n#y(oS(n#y(oT2q.v2rQ)`$dQ-c(lQ.U)aQ.}*ZQ3R/OQ5m3SQ6x5[Q7V5nQ7u6yQ8O7WQ8]7vQ8l8^Q8x8mR9P8yn(V#t&})R,}-V-l-m0n1y4a4r:j:v:w:x!d9{&y'h(](c+t,Y,r-Z-x-{.l.n0b0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|Y9|8i8v8}9Q9SZ9}1R4[6_7j8Xp(X#t&})R,{,}-V-l-m0n1y4a4r:j:v:w:x!f:O&y'h(](c+t,Y,r-Z-x-{.l.n0b0k0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|[:P8i8v8{8}9Q9S]:Q1R4[6_6`7j8XpeOSjy}!n$Z%X%b%e%f%h*m*r/d/gQ%UxR*i%_peOSjy}!n$Z%X%b%e%f%h*m*r/d/gR%UxQ*S$}R.k){qeOSjy}!n$Z%X%b%e%f%h*m*r/d/gQ.w*XS2{.{.|W5e2x2y2z3PU7Q5g5h5iU7z7P7S7TQ8a7{R8o8bQ%]yR*c%XR3Y/UR7Y5pS$lp$qR.a)lQ%bzR*m%cR*s%iT/e*r/gR*w%jQ*v%jR/n*wQjOQ!nST$^j!nQ(O#sR,s(OQ!YQR%t!YQ!^RU%z!^%{+SQ%{!_R+S%|Q+_&WR/z+_Q,^&}R0o,^Q,a'PS0r,a0sR0s,bQ+k&cR0U+kS!eR$tU&`!e&a+TQ&a!fR+T%}Q+b&ZR/|+bQ&t!sQ,P&rU,T&t,P0jR0j,UQ'q#iR,l'qQ#m`R'w#mQ#cZU'g#c+O9hQ+O9UR9h'tQ-Q(^W1a-Q1b4e6gU1b-R-S-TS4e1c1dR6g4f$Z(T#t&y&}'h(](c(|(})R+t,W,X,Y,r,{,|,}-V-Z-l-m-x-{.l.n0b0k0l0m0n1R1e1i1y2S2h2j2z4U4Y4Z4[4a4h4l4r4t4y5U5i6]6_6`6a6h6l7T7j8X8i8t8u8v8{8|8}9Q9S:j:v:w:x:z:|Q-X(cU1h-X1j4iQ1j-ZR4i1iQ(o#yR-f(oQ(x#}R-o(xQ1}-xR4u1}Q)y$wR.j)yQ2l.qS5Y2l6wR6w5ZQ*U%OR.t*UQ2r.vR5_2rQ/T*`S3W/T5qR5q3YQ.[)hW2].[2_5O6rQ2_._Q5O2^R6r5PQ)m$lR.b)mQ/g*rR3h/gWiOSj!nQ%g}Q)U$ZQ*l%bQ*n%eQ*o%fQ*q%hQ/b*mS/e*r/gR3g/dQ$]gQ%k!RQ%n!TQ%p!UQ%r!VQ)t$rQ)z$xQ*b%]Q*y%mQ-e(nS/W*c*fQ/o*xQ/p*{Q/q*|S0P+h2oQ2b.eQ2g.lQ3Q.}Q3[/YQ3f/cY3s0R0S0Y0_5aQ5S2dQ5V2hQ5l3RQ5r3Z[6P3r3u3y3{3|6}Q6s5QQ7U5mQ7Z5sW7a6Q6V6X6ZQ7q6tQ7t6xQ7}7VU8Q7b7g7iQ8[7uQ8c8OS8d8S8WQ8k8]Q8p8fQ8w8lQ8z8rQ9O8xR9R9PQ$fmQ&h!jU)c$g$h$iQ+X&TU+y&i&j&kQ-](iS.W)d)eQ/w+ZQ0O+hS0d+z+{Q1m-aQ2V.XQ3p/}S3v0T0YQ4R0eQ4m1qS6T3w3|Q7d6UQ8T7fR8g8VS#ua:}R)^$cU#}a$c:}R-n(wQ#taS&y!w)_Q&}!yQ'h#dQ(]#vQ(c#xQ(|$RQ(}$SQ)R$WQ+t&fQ,W9nQ,X9qQ,Y9tQ,r'|Q,{(VQ,|(XQ,}(YQ-V(aQ-Z(eQ-l(uQ-m(vd-x)Y-}.x2P2|4x5f6u7R7|Q-{)[Q.l)|Q.n*PQ0b+wQ0k9{Q0l:OQ0m:RQ0n,]Q1R9iQ1e-WQ1i-YQ1y-sQ2S.PQ2h.mQ2j.pQ2z.zQ4U:WQ4Y9pQ4Z9sQ4[9vQ4a1^Q4h1gQ4l1oQ4r1uQ4t1|Q4y2TQ5U2fQ5i3OQ6]:]Q6_:TQ6`9}Q6a:QQ6h4gQ6l4pQ7T5kQ7j:YQ8X:_Q8i9ZQ8t9oQ8u9rQ8v9uQ8{9|Q8|:PQ8}:SQ9Q:XQ9S:^Q:j:}Q:v;UQ:w;VQ:x;WQ:z;YR:|;[lgOSj}!n$Z%b%e%f%h*m*r/d/gS!pU%dQ%m!SQ%s!WQ'U!|Q'u#kS*f%Z%^Q*j%_Q*x%lQ+U&RQ+s&eQ,p'vQ-z)ZQ/_*iQ0a+vQ1X,kQ1w-qQ2R.OQ2y.yQ3^/[Q3_/]Q3a/^Q3c/`Q3j/iQ4_1UQ5T2eQ5h2}Q5w3bQ5y3dQ5z3eQ7S5jR7]5x!vZOSUj}!S!n!|$Z%Z%^%_%b%d%e%f%h%l&R&e)Z*i*m*r+v-q.O.y/[/]/^/`/d/g/i2e2}3b3d3e5j5xQ!_RQ!oTQ$_kS%v!]%yQ%|!`Q&x!vQ'P!zQ'V#PQ'W#QQ'X#RQ'Y#SQ'Z#TQ'[#UQ']#VQ'^#WQ'_#XQ'`#YQ'a#ZQ'c#]Q'f#bQ'j#eW't#k'v,k1UQ)n$mS+P%w+RS+[&V/xQ+e&^Q+|&oQ,[&|Q,b'QQ,e9TQ,g9VQ,u(QQ-t)SQ/s+VQ/v+YQ0f+}Q0p,`Q0t9YQ0u9[Q0v9]Q0w9^Q0x9_Q0y9`Q0z9aQ0{9bQ0|9cQ0}9dQ1O9eQ1P9fQ1Q,fQ1T9jQ1Y9gQ1z-vQ2W.YQ3o9wQ3r0QQ4S0gQ4V0qQ4W9xQ4]9zQ4^:UQ5Z2mQ5}3mQ6Q3tQ6^:VQ6b:ZQ6c:[Q7b6RQ7s6vQ8S7eQ8f8UQ8r8hQ9U!WR:p;QR!aRR&X!bS&T!b+^S+Z&U&]R/}+dR'O!yR'R!zT!tU$XS!sU$XU$wrs*kS&r!r!uQ,R&sQ,U&vQ.i)xS0h,Q,SR4T0i`!dR!]!`$t%w&_)v+fh!qUrs!r!u$X&s&v)x,Q,S0iQ/a*kQ/t+WQ3l/lT:g&V)wT!gR$tS!fR$tS%x!]&_S%}!`)vS+Q%w+fT+]&V)wT&[!b$uQ#i^R'z#nT'p#i'qR1W,jT(`#v(hR(f#xQ-y)YQ2Q-}Q2x.xQ4v2PQ5g2|Q6o4xQ7P5fQ7r6uQ7{7RR8b7|lhOSj}!n$Z%b%e%f%h*m*r/d/gQ%[yR*b%XV$xrs*kR.r*RR*a%VQ$ppR)s$qR)i$kT%`z%cT%az%cT/f*r/g",nodeNames:" ArithOp ArithOp InterpolationStart extends LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:d3,nodeProps:[["closedBy",3,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[O3],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T'u(rZ$UW]!ROY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j'u*{R$P&j$UW]!RO!^%T!_#o%T#p~%T'm+ZV]!ROY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U'm+wO$P&j]!R'm+zROr+Urs,Ts~+U'm,[U$P&j]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R,sU]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R-[O]!R!R-_PO~,n'u-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k'u.VZ$P&j$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/PZ$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/yR$UW]!RO!^%T!_#o%T#p~%T!Z0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x2k0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`2k1g]$UW'o2cOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']%k'g2bOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T6d5lU'x6[$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T'u6jZ$UW]!ROY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w'm8YV]!ROY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T'm8rROw8Twx8{x~8T'm9SU$P&j]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R9kU]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R:QPO~9f'u:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c'u:xZ$P&j$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z;rZ$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k%V=QR!d$}$UWO!^%T!_#o%T#p~%TZ=bR!cR$UWO!^%T!_#o%T#p~%T5s=tU'^2s#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T$u>rSj$m$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu6`$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%Ty@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%Ty@iR!Qq$UWO!^%T!_#o%T#p~%Ty@yZ$UWkqO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%TyAqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyBiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyCVV$UWkqO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Duy!0cd$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%Ty!1x_$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%Ty!3OR$UWkqO!^%T!_#o%T#p~%Ty!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%Ty!3}Y$UWkqO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%Ty!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%Ty!5`X$UWkqO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%Ty!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%Ty!6z]$UWkqO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T%w!7|R!]V$UW#m%hO!^%T!_#o%T#p~%T!P!8^R_w$UWO!^%T!_#o%T#p~%T6i!8rR'bd!a0`#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v%w!9kT!{%o$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%w!:gT'a!s#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T6i!<YV'p6a$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T)z!<vRv)r$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%TZ!={R!OR$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$P!>pR$UW'f#wO!^%T!_#o%T#p~%T~!?OO!T~6d!?VT'w6[$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T5g!?oR!S5]nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']%k'g2bOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']%k'g2bOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[m3,g3,v3,0,1,2,3,4,5,6,7,8,9,p3],topRules:{Script:[0,7]},dialects:{jsx:11707,ts:11709},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:(i,e)=>y3(i,e)<<1},{term:289,get:i=>x3[i]||-1},{term:299,get:i=>D3[i]||-1},{term:63,get:i=>C3[i]||-1}],tokenPrec:11730}),S3=[Fn("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Fn("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Fn("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Fn("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Fn("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Fn(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Fn("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Fn(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Fn(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Fn('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Fn('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],kp=new iS,Dy=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Ro(i){return(e,t)=>{let n=e.node.getChild("VariableDefinition");return n&&t(n,i),!0}}const w3=["FunctionDeclaration"],P3={FunctionDeclaration:Ro("function"),ClassDeclaration:Ro("class"),ClassExpression:()=>!0,EnumDeclaration:Ro("constant"),TypeAliasDeclaration:Ro("type"),NamespaceDeclaration:Ro("namespace"),VariableDefinition(i,e){i.matchContext(w3)||e(i,"variable")},TypeDefinition(i,e){e(i,"type")},__proto__:null};function Cy(i,e){let t=kp.get(e);if(t)return t;let n=[],r=!0;function o(s,a){let l=i.sliceString(s.from,s.to);n.push({label:l,type:a})}return e.cursor(Ai.IncludeAnonymous).iterate(s=>{if(r)r=!1;else if(s.name){let a=P3[s.name];if(a&&a(s,o)||Dy.has(s.name))return!1}else if(s.to-s.from>8192){for(let a of Cy(i,s.node))n.push(a);return!1}}),kp.set(e,n),n}const Ap=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/;function L3(i){let e=di(i.state).resolve(i.pos,-1);if(e.name=="TemplateString"||e.name=="String"||e.name=="LineComment"||e.name=="BlockComment")return null;let t=e.to-e.from<20&&Ap.test(i.state.sliceDoc(e.from,e.to));if(!t&&!i.explicit)return null;let n=[];for(let r=e;r;r=r.parent)Dy.has(r.name)&&(n=n.concat(Cy(i.state.doc,r)));return{options:n,from:t?e.from:i.pos,validFor:Ap}}const gs=Gl.define({parser:b3.configure({props:[sv.add({IfStatement:Lh({except:/^\s*({|else\b)/}),TryStatement:Lh({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:SS,SwitchBody:i=>{let e=i.textAfter,t=/^\s*\}/.test(e),n=/^\s*(case|default)\b/.test(e);return i.baseIndent+(t?0:n?1:2)*i.unit},Block:bS({closing:"}"}),ArrowFunction:i=>i.baseIndent+i.unit,"TemplateString BlockComment":()=>-1,"Statement Property":Lh({except:/^{/}),JSXElement(i){let e=/^\s*<\//.test(i.textAfter);return i.lineIndent(i.node.from)+(e?0:i.unit)},JSXEscape(i){let e=/\s*\}/.test(i.textAfter);return i.lineIndent(i.node.from)+(e?0:i.unit)},"JSXOpenTag JSXSelfClosingTag"(i){return i.column(i.node.from)+i.unit}}),lv.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":kS,BlockComment(i){return{from:i.from+2,to:i.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),k3=gs.configure({dialect:"ts"}),A3=gs.configure({dialect:"jsx"}),E3=gs.configure({dialect:"jsx ts"}),_3="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(i=>({label:i,type:"keyword"}));function T3(i={}){let e=i.jsx?i.typescript?E3:A3:i.typescript?k3:gs;return new mS(e,[gs.data.of({autocomplete:FP(["LineComment","BlockComment","String"],ny(S3.concat(_3)))}),gs.data.of({autocomplete:L3}),i.jsx?F3:[]])}function Ep(i,e,t=i.length){if(!e)return"";let n=e.getChild("JSXIdentifier");return n?i.sliceString(n.from,Math.min(n.to,t)):""}const I3=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),F3=nt.inputHandler.of((i,e,t,n)=>{if((I3?i.composing:i.compositionStarted)||i.state.readOnly||e!=t||n!=">"&&n!="/"||!gs.isActiveAt(i.state,e,-1))return!1;let{state:r}=i,o=r.changeByRange(s=>{var a,l,h;let{head:c}=s,p=di(r).resolveInner(c,-1),d;if(p.name=="JSXStartTag"&&(p=p.parent),n==">"&&p.name=="JSXFragmentTag")return{range:Ee.cursor(c+1),changes:{from:c,insert:"><>"}};if(n==">"&&p.name=="JSXIdentifier"){if(((l=(a=p.parent)===null||a===void 0?void 0:a.lastChild)===null||l===void 0?void 0:l.name)!="JSXEndTag"&&(d=Ep(r.doc,p.parent,c)))return{range:Ee.cursor(c+1),changes:{from:c,insert:`></${d}>`}}}else if(n=="/"&&p.name=="JSXFragmentTag"){let v=p.parent,D=v==null?void 0:v.parent;if(v.from==c-1&&((h=D.lastChild)===null||h===void 0?void 0:h.name)!="JSXEndTag"&&(d=Ep(r.doc,D==null?void 0:D.firstChild,c))){let m=`/${d}>`;return{range:Ee.cursor(c+m.length),changes:{from:c,insert:m}}}}return{range:s}});return o.changes.empty?!1:(i.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)});function _p(i){let e=new er;for(let{from:t,to:n}of i.visibleRanges){const r=di(i.state),s={from:t,to:n,enter:a=>{if(a.name=="CallExpression"){if(!(i.state.doc.sliceString(a.from,a.from+5)=="path("))return;const h=a.from;a.next(),a.next();const c=gt.mark({attributes:{"data-path-start":a.from},class:"cm-path-button"});e.add(h,h+4,c)}}};r.iterate(s)}return e.finish()}const Q3=si.fromClass(class{constructor(i){this.decorations=_p(i),this.initialized=!1}update(i){(i.docChanged||i.viewportChanged||this.initialized===!1)&&(this.decorations=_p(i.view),this.initialized=!0)}},{decorations:i=>i.decorations});function M3(i){var e=i.Pos;function t(g,b){var L=g.state.vim;if(!L||L.insertMode)return b.head;var A=L.sel.head;if(!A)return b.head;if(!(L.visualBlock&&b.head.line!=A.line))return b.from()==b.anchor&&!b.empty()&&b.head.line==A.line&&b.head.ch!=A.ch?new e(b.head.line,b.head.ch-1):b.head}function n(g,b,L){if(b.line===L.line&&b.ch>=L.ch-1){var A=g.getLine(b.line),T=A.charCodeAt(b.ch);55296<=T&&T<=55551&&(L.ch+=1)}return{start:b,end:L}}var r=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"g<Up>",type:"keyToKey",toKeys:"gk"},{keys:"g<Down>",type:"keyToKey",toKeys:"gj"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"keyToKey",toKeys:"i",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"g$",type:"motion",motion:"moveToEndOfDisplayLine"},{keys:"g^",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"g0",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"<C-r><character>",type:"action",action:"insertRegister",context:"insert",isEdit:!0},{keys:"<C-o>",type:"action",action:"oneNormalCommand",context:"insert"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],o=r.length,s=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"delete",shortName:"d"},{name:"join",shortName:"j"},{name:"global",shortName:"g"}];function a(g){g.setOption("disableInput",!0),g.setOption("showCursorWhenSelecting",!1),i.signal(g,"vim-mode-change",{mode:"normal"}),g.on("cursorActivity",_n),Ae(g),i.on(g.getInputField(),"paste",m(g))}function l(g){g.setOption("disableInput",!1),g.off("cursorActivity",_n),i.off(g.getInputField(),"paste",m(g)),g.state.vim=null,Dr&&clearTimeout(Dr)}function h(g,b){this==i.keyMap.vim&&(g.options.$customCursor=null,i.rmClass(g.getWrapperElement(),"cm-fat-cursor")),(!b||b.attach!=c)&&l(g)}function c(g,b){this==i.keyMap.vim&&(g.curOp&&(g.curOp.selectionChanged=!0),g.options.$customCursor=t,i.addClass(g.getWrapperElement(),"cm-fat-cursor")),(!b||b.attach!=c)&&a(g)}i.defineOption("vimMode",!1,function(g,b,L){b&&g.getOption("keyMap")!="vim"?g.setOption("keyMap","vim"):!b&&L!=i.Init&&/^vim/.test(g.getOption("keyMap"))&&g.setOption("keyMap","default")});function p(g,b){if(b){if(this[g])return this[g];var L=D(g);if(!L)return!1;var A=tt.findKey(b,L);return typeof A=="function"&&i.signal(b,"vim-keypress",L),A}}var d={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},v={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function D(g){if(g.charAt(0)=="'")return g.charAt(1);var b=g.split(/-(?!$)/),L=b[b.length-1];if(b.length==1&&b[0].length==1)return!1;if(b.length==2&&b[0]=="Shift"&&L.length==1)return!1;for(var A=!1,T=0;T<b.length;T++){var M=b[T];M in d?b[T]=d[M]:A=!0,M in v&&(b[T]=v[M])}return A?(B(L)&&(b[b.length-1]=L.toLowerCase()),"<"+b.join("-")+">"):!1}function m(g){var b=g.state.vim;return b.onPasteFn||(b.onPasteFn=function(){b.insertMode||(g.setCursor(mt(g.getCursor(),0,1)),Ze.enterInsertMode(g,{},b))}),b.onPasteFn}var y=/[\d]/,x=[i.isWordChar,function(g){return g&&!i.isWordChar(g)&&!/\s/.test(g)}],w=[function(g){return/\S/.test(g)}];function _(g,b){for(var L=[],A=g;A<g+b;A++)L.push(String.fromCharCode(A));return L}var I=_(65,26),N=_(97,26),Y=_(48,10),j=[].concat(I,N,Y,["<",">"]),ae=[].concat(I,N,Y,["-",'"',".",":","_","/","+"]),K;try{K=new RegExp("^[\\p{Lu}]$","u")}catch{K=/^[A-Z]$/}function oe(g,b){return b>=g.firstLine()&&b<=g.lastLine()}function fe(g){return/^[a-z]$/.test(g)}function U(g){return"()[]{}".indexOf(g)!=-1}function H(g){return y.test(g)}function B(g){return K.test(g)}function re(g){return/^\s*$/.test(g)}function Qe(g){return".?!".indexOf(g)!=-1}function De(g,b){for(var L=0;L<b.length;L++)if(b[L]==g)return!0;return!1}var Xe={};function ge(g,b,L,A,T){if(b===void 0&&!T)throw Error("defaultValue is required unless callback is provided");if(L||(L="string"),Xe[g]={type:L,defaultValue:b,callback:T},A)for(var M=0;M<A.length;M++)Xe[A[M]]=Xe[g];b&&$e(g,b)}function $e(g,b,L,A){var T=Xe[g];A=A||{};var M=A.scope;if(!T)return new Error("Unknown option: "+g);if(T.type=="boolean"){if(b&&b!==!0)return new Error("Invalid argument: "+g+"="+b);b!==!1&&(b=!0)}T.callback?(M!=="local"&&T.callback(b,void 0),M!=="global"&&L&&T.callback(b,L)):(M!=="local"&&(T.value=T.type=="boolean"?!!b:b),M!=="global"&&L&&(L.state.vim.options[g]={value:b}))}function ue(g,b,L){var A=Xe[g];L=L||{};var T=L.scope;if(!A)return new Error("Unknown option: "+g);if(A.callback){var M=b&&A.callback(void 0,b);return T!=="global"&&M!==void 0?M:T!=="local"?A.callback():void 0}else{var M=T!=="global"&&b&&b.state.vim.options[g];return(M||T!=="local"&&A||{}).value}}ge("filetype",void 0,"string",["ft"],function(g,b){if(b!==void 0)if(g===void 0){var L=b.getOption("mode");return L=="null"?"":L}else{var L=g==""?"null":g;b.setOption("mode",L)}});var he=function(){var g=100,b=-1,L=0,A=0,T=new Array(g);function M(V,se,ne){var Ce=b%g,Te=T[Ce];function ve(Ve){var Ge=++b%g,ft=T[Ge];ft&&ft.clear(),T[Ge]=V.setBookmark(Ve)}if(Te){var xe=Te.find();xe&&!At(xe,se)&&ve(se)}else ve(se);ve(ne),L=b,A=b-g+1,A<0&&(A=0)}function z(V,se){b+=se,b>L?b=L:b<A&&(b=A);var ne=T[(g+b)%g];if(ne&&!ne.find()){var Ce=se>0?1:-1,Te,ve=V.getCursor();do if(b+=Ce,ne=T[(g+b)%g],ne&&(Te=ne.find())&&!At(ve,Te))break;while(b<L&&b>A)}return ne}function q(V,se){var ne=b,Ce=z(V,se);return b=ne,Ce&&Ce.find()}return{cachedCursor:void 0,add:M,find:q,move:z}},je=function(g){return g?{changes:g.changes,expectCursorActivityForChange:g.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function We(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=je()}We.prototype={exitMacroRecordMode:function(){var g=Me.macroModeState;g.onRecordingDone&&g.onRecordingDone(),g.onRecordingDone=void 0,g.isRecording=!1},enterMacroRecordMode:function(g,b){var L=Me.registerController.getRegister(b);if(L){if(L.clear(),this.latestRegister=b,g.openDialog){var A=nn("span",{class:"cm-vim-message"},"recording @"+b);this.onRecordingDone=g.openDialog(A,null,{bottom:!0})}this.isRecording=!0}}};function Ae(g){return g.state.vim||(g.state.vim={inputState:new Ot,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeReturn:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),g.state.vim}var Me;function vt(){Me={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:he(),macroModeState:new We,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new Pe({}),searchHistoryController:new Oe,exCommandHistoryController:new Oe};for(var g in Xe){var b=Xe[g];b.value=b.defaultValue}}var et,tt={enterVimMode:a,leaveVimMode:l,buildKeyMap:function(){},getRegisterController:function(){return Me.registerController},resetVimGlobalState_:vt,getVimGlobalState_:function(){return Me},maybeInitVimState_:Ae,suppressErrorLogging:!1,InsertModeKey:rn,map:function(g,b,L){pe.map(g,b,L)},unmap:function(g,b){return pe.unmap(g,b)},noremap:function(g,b,L){function A(ve){return ve?[ve]:["normal","insert","visual"]}for(var T=A(L),M=r.length,z=o,q=[],V=M-z;V<M&&T.length;V++){var se=r[V];if(se.keys==b&&(!L||!se.context||se.context===L)&&se.type.substr(0,2)!=="ex"&&se.type.substr(0,3)!=="key"){var ne={};for(var Ce in se)ne[Ce]=se[Ce];ne.keys=g,L&&!ne.context&&(ne.context=L),q.unshift(ne);var Te=A(se.context);T=T.filter(function(ve){return Te.indexOf(ve)===-1})}}for(var ne of q)this._mapCommand(ne)},mapclear:function(g){var b=r.length,L=o,A=r.slice(0,b-L);if(r=r.slice(b-L),g)for(var T=A.length-1;T>=0;T--){var M=A[T];if(g!==M.context)if(M.context)this._mapCommand(M);else{var z=["normal","insert","visual"];for(var q in z)if(z[q]!==g){var V={};for(var se in M)V[se]=M[se];V.context=z[q],this._mapCommand(V)}}}},setOption:$e,getOption:ue,defineOption:ge,defineEx:function(g,b,L){if(!b)b=g;else if(g.indexOf(b)!==0)throw new Error('(Vim.defineEx) "'+b+'" is not a prefix of "'+g+'", command not registered');ie[g]=L,pe.commandMap_[b]={name:g,shortName:b,type:"api"}},handleKey:function(g,b,L){var A=this.findKey(g,b,L);if(typeof A=="function")return A()},multiSelectHandleKey:Qa,findKey:function(g,b,L){var A=Ae(g);function T(){var ne=Me.macroModeState;if(ne.isRecording){if(b=="q")return ne.exitMacroRecordMode(),it(g),!0;L!="mapping"&&wt(ne,b)}}function M(){if(b=="<Esc>"){if(A.visualMode)en(g);else if(A.insertMode)_e(g);else return;return it(g),!0}}function z(ne){for(var Ce;ne;)Ce=/<\w+-.+?>|<\w+>|./.exec(ne),b=Ce[0],ne=ne.substring(Ce.index+b.length),tt.handleKey(g,b,"mapping")}function q(){if(M())return!0;A.inputState.keyBuffer.push(b);var ne=A.inputState.keyBuffer.join(""),Ce=b.length==1,Te=J.matchCommand(ne,r,A.inputState,"insert"),ve=A.inputState.changeQueue;if(Te.type=="none")return it(g),!1;if(Te.type=="partial"){if(et&&window.clearTimeout(et),et=Ce&&window.setTimeout(function(){A.insertMode&&A.inputState.keyBuffer.length&&it(g)},ue("insertModeEscKeysTimeout")),Ce){var xe=g.listSelections();(!ve||ve.removed.length!=xe.length)&&(ve=A.inputState.changeQueue=new Nt),ve.inserted+=b;for(var Ve=0;Ve<xe.length;Ve++){var Ge=ei(xe[Ve].anchor,xe[Ve].head),ft=Vt(xe[Ve].anchor,xe[Ve].head),xt=g.getRange(Ge,g.state.overwrite?mt(ft,0,1):ft);ve.removed[Ve]=(ve.removed[Ve]||"")+xt}}return!Ce}if(et&&window.clearTimeout(et),Te.command&&ve){for(var xe=g.listSelections(),Ve=0;Ve<xe.length;Ve++){var pt=xe[Ve].head;g.replaceRange(ve.removed[Ve]||"",mt(pt,0,-ve.inserted.length),pt,"+input")}Me.macroModeState.lastInsertModeChanges.changes.pop()}return Te.command||it(g),Te.command}function V(){if(T()||M())return!0;A.inputState.keyBuffer.push(b);var ne=A.inputState.keyBuffer.join("");if(/^[1-9]\d*$/.test(ne))return!0;var Ce=/^(\d*)(.*)$/.exec(ne);if(!Ce)return it(g),!1;var Te=A.visualMode?"visual":"normal",ve=Ce[2]||Ce[1];A.inputState.operatorShortcut&&A.inputState.operatorShortcut.slice(-1)==ve&&(ve=A.inputState.operatorShortcut);var xe=J.matchCommand(ve,r,A.inputState,Te);return xe.type=="none"?(it(g),!1):xe.type=="partial"?!0:xe.type=="clear"?(it(g),!0):(A.inputState.keyBuffer.length=0,Ce=/^(\d*)(.*)$/.exec(ne),Ce[1]&&Ce[1]!="0"&&A.inputState.pushRepeatDigit(Ce[1]),xe.command)}var se;return A.insertMode?se=q():se=V(),se===!1?!A.insertMode&&b.length===1?function(){return!0}:void 0:se===!0?function(){return!0}:function(){return g.operation(function(){g.curOp.isVimOp=!0;try{se.type=="keyToKey"?z(se.toKeys):J.processCommand(g,A,se)}catch(ne){throw g.state.vim=void 0,Ae(g),console.log(ne),ne}return!0})}},handleEx:function(g,b){pe.processCommand(g,b)},defineMotion:ce,defineAction:Ke,defineOperator:me,mapCommand:dt,_mapCommand:qe,defineRegister:$,exitVisualMode:en,exitInsertMode:_e};function Ot(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null,this.changeQueue=null}Ot.prototype.pushRepeatDigit=function(g){this.operator?this.motionRepeat=this.motionRepeat.concat(g):this.prefixRepeat=this.prefixRepeat.concat(g)},Ot.prototype.getRepeat=function(){var g=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(g=1,this.prefixRepeat.length>0&&(g*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(g*=parseInt(this.motionRepeat.join(""),10))),g};function it(g,b){g.state.vim.inputState=new Ot,i.signal(g,"vim-command-done",b)}function Nt(){this.removed=[],this.inserted=""}function yt(g,b,L){this.clear(),this.keyBuffer=[g||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!b,this.blockwise=!!L}yt.prototype={setText:function(g,b,L){this.keyBuffer=[g||""],this.linewise=!!b,this.blockwise=!!L},pushText:function(g,b){b&&(this.linewise||this.keyBuffer.push(`
`),this.linewise=!0),this.keyBuffer.push(g)},pushInsertModeChanges:function(g){this.insertModeChanges.push(je(g))},pushSearchQuery:function(g){this.searchQueries.push(g)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}};function $(g,b){var L=Me.registerController.registers;if(!g||g.length!=1)throw Error("Register name must be 1 character");if(L[g])throw Error("Register already defined "+g);L[g]=b,ae.push(g)}function Pe(g){this.registers=g,this.unnamedRegister=g['"']=new yt,g["."]=new yt,g[":"]=new yt,g["/"]=new yt,g["+"]=new yt}Pe.prototype={pushText:function(g,b,L,A,T){if(g!=="_"){A&&L.charAt(L.length-1)!==`
`&&(L+=`
`);var M=this.isValidRegister(g)?this.getRegister(g):null;if(!M){switch(b){case"yank":this.registers[0]=new yt(L,A,T);break;case"delete":case"change":L.indexOf(`
`)==-1?this.registers["-"]=new yt(L,A):(this.shiftNumericRegisters_(),this.registers[1]=new yt(L,A));break}this.unnamedRegister.setText(L,A,T);return}var z=B(g);z?M.pushText(L,A):M.setText(L,A,T),g==="+"&&navigator.clipboard.writeText(L),this.unnamedRegister.setText(M.toString(),A)}},getRegister:function(g){return this.isValidRegister(g)?(g=g.toLowerCase(),this.registers[g]||(this.registers[g]=new yt),this.registers[g]):this.unnamedRegister},isValidRegister:function(g){return g&&De(g,ae)},shiftNumericRegisters_:function(){for(var g=9;g>=2;g--)this.registers[g]=this.getRegister(""+(g-1))}};function Oe(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}Oe.prototype={nextMatch:function(g,b){var L=this.historyBuffer,A=b?-1:1;this.initialPrefix===null&&(this.initialPrefix=g);for(var T=this.iterator+A;b?T>=0:T<L.length;T+=A)for(var M=L[T],z=0;z<=M.length;z++)if(this.initialPrefix==M.substring(0,z))return this.iterator=T,M;if(T>=L.length)return this.iterator=L.length,this.initialPrefix;if(T<0)return g},pushInput:function(g){var b=this.historyBuffer.indexOf(g);b>-1&&this.historyBuffer.splice(b,1),g.length&&this.historyBuffer.push(g)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var J={matchCommand:function(g,b,L,A){var T=Pt(g,b,A,L);if(!T.full&&!T.partial)return{type:"none"};if(!T.full&&T.partial)return{type:"partial"};for(var M,z=0;z<T.full.length;z++){var q=T.full[z];M||(M=q)}if(M.keys.slice(-11)=="<character>"){var V=ji(g);if(!V||V.length>1)return{type:"clear"};L.selectedCharacter=V}return{type:"full",command:M}},processCommand:function(g,b,L){switch(b.inputState.repeatOverride=L.repeatOverride,L.type){case"motion":this.processMotion(g,b,L);break;case"operator":this.processOperator(g,b,L);break;case"operatorMotion":this.processOperatorMotion(g,b,L);break;case"action":this.processAction(g,b,L);break;case"search":this.processSearch(g,b,L);break;case"ex":case"keyToEx":this.processEx(g,b,L);break}},processMotion:function(g,b,L){b.inputState.motion=L.motion,b.inputState.motionArgs=at(L.motionArgs),this.evalInput(g,b)},processOperator:function(g,b,L){var A=b.inputState;if(A.operator)if(A.operator==L.operator){A.motion="expandToLine",A.motionArgs={linewise:!0},this.evalInput(g,b);return}else it(g);A.operator=L.operator,A.operatorArgs=at(L.operatorArgs),L.keys.length>1&&(A.operatorShortcut=L.keys),L.exitVisualBlock&&(b.visualBlock=!1,un(g)),b.visualMode&&this.evalInput(g,b)},processOperatorMotion:function(g,b,L){var A=b.visualMode,T=at(L.operatorMotionArgs);T&&A&&T.visualLine&&(b.visualLine=!0),this.processOperator(g,b,L),A||this.processMotion(g,b,L)},processAction:function(g,b,L){var A=b.inputState,T=A.getRepeat(),M=!!T,z=at(L.actionArgs)||{};A.selectedCharacter&&(z.selectedCharacter=A.selectedCharacter),L.operator&&this.processOperator(g,b,L),L.motion&&this.processMotion(g,b,L),(L.motion||L.operator)&&this.evalInput(g,b),z.repeat=T||1,z.repeatIsExplicit=M,z.registerName=A.registerName,it(g),b.lastMotion=null,L.isEdit&&this.recordLastEdit(b,A,L),Ze[L.action](g,z,b)},processSearch:function(g,b,L){if(!g.getSearchCursor)return;var A=L.searchArgs.forward,T=L.searchArgs.wholeWordOnly;ni(g).setReversed(!A);var M=A?"/":"?",z=ni(g).getQuery(),q=g.getScrollInfo();function V(Ge,ft,xt){Me.searchHistoryController.pushInput(Ge),Me.searchHistoryController.reset();try{ar(g,Ge,ft,xt)}catch{Yt(g,"Invalid regex: "+Ge),it(g);return}J.processMotion(g,b,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:L.searchArgs.toJumplist}})}function se(Ge){g.scrollTo(q.left,q.top),V(Ge,!0,!0);var ft=Me.macroModeState;ft.isRecording&&Pi(ft,Ge)}function ne(Ge,ft,xt){var pt=i.keyName(Ge),Mt,hi;pt=="Up"||pt=="Down"?(Mt=pt=="Up",hi=Ge.target?Ge.target.selectionEnd:0,ft=Me.searchHistoryController.nextMatch(ft,Mt)||"",xt(ft),hi&&Ge.target&&(Ge.target.selectionEnd=Ge.target.selectionStart=Math.min(hi,Ge.target.value.length))):pt!="Left"&&pt!="Right"&&pt!="Ctrl"&&pt!="Alt"&&pt!="Shift"&&Me.searchHistoryController.reset();var ti;try{ti=ar(g,ft,!0,!0)}catch{}ti?g.scrollIntoView(u(g,!A,ti),30):(O(g),g.scrollTo(q.left,q.top))}function Ce(Ge,ft,xt){var pt=i.keyName(Ge);pt=="Esc"||pt=="Ctrl-C"||pt=="Ctrl-["||pt=="Backspace"&&ft==""?(Me.searchHistoryController.pushInput(ft),Me.searchHistoryController.reset(),ar(g,z),O(g),g.scrollTo(q.left,q.top),i.e_stop(Ge),it(g),xt(),g.focus()):pt=="Up"||pt=="Down"?i.e_stop(Ge):pt=="Ctrl-U"&&(i.e_stop(Ge),xt(""))}switch(L.searchArgs.querySrc){case"prompt":var Te=Me.macroModeState;if(Te.isPlaying){var Ve=Te.replaySearchQueries.shift();V(Ve,!0,!1)}else Ct(g,{onClose:se,prefix:M,desc:"(JavaScript regexp)",onKeyUp:ne,onKeyDown:Ce});break;case"wordUnderCursor":var ve=gr(g,!1,!1,!1,!0),xe=!0;if(ve||(ve=gr(g,!1,!1,!1,!1),xe=!1),!ve)return;var Ve=g.getLine(ve.start.line).substring(ve.start.ch,ve.end.ch);xe&&T?Ve="\\b"+Ve+"\\b":Ve=ln(Ve),Me.jumpList.cachedCursor=g.getCursor(),g.setCursor(ve.start),V(Ve,!0,!1);break}},processEx:function(g,b,L){function A(M){Me.exCommandHistoryController.pushInput(M),Me.exCommandHistoryController.reset(),pe.processCommand(g,M),g.state.vim&&it(g)}function T(M,z,q){var V=i.keyName(M),se,ne;(V=="Esc"||V=="Ctrl-C"||V=="Ctrl-["||V=="Backspace"&&z=="")&&(Me.exCommandHistoryController.pushInput(z),Me.exCommandHistoryController.reset(),i.e_stop(M),it(g),q(),g.focus()),V=="Up"||V=="Down"?(i.e_stop(M),se=V=="Up",ne=M.target?M.target.selectionEnd:0,z=Me.exCommandHistoryController.nextMatch(z,se)||"",q(z),ne&&M.target&&(M.target.selectionEnd=M.target.selectionStart=Math.min(ne,M.target.value.length))):V=="Ctrl-U"?(i.e_stop(M),q("")):V!="Left"&&V!="Right"&&V!="Ctrl"&&V!="Alt"&&V!="Shift"&&Me.exCommandHistoryController.reset()}L.type=="keyToEx"?pe.processCommand(g,L.exArgs.input):b.visualMode?Ct(g,{onClose:A,prefix:":",value:"'<,'>",onKeyDown:T,selectValueOnOpen:!1}):Ct(g,{onClose:A,prefix:":",onKeyDown:T})},evalInput:function(g,b){var L=b.inputState,A=L.motion,T=L.motionArgs||{},M=L.operator,z=L.operatorArgs||{},q=L.registerName,V=b.sel,se=kt(b.visualMode?Ne(g,V.head):g.getCursor("head")),ne=kt(b.visualMode?Ne(g,V.anchor):g.getCursor("anchor")),Ce=kt(se),Te=kt(ne),ve,xe,Ve;if(M&&this.recordLastEdit(b,L),L.repeatOverride!==void 0?Ve=L.repeatOverride:Ve=L.getRepeat(),Ve>0&&T.explicitRepeat?T.repeatIsExplicit=!0:(T.noRepeat||!T.explicitRepeat&&Ve===0)&&(Ve=1,T.repeatIsExplicit=!1),L.selectedCharacter&&(T.selectedCharacter=z.selectedCharacter=L.selectedCharacter),T.repeat=Ve,it(g),A){var Ge=G[A](g,se,T,b,L);if(b.lastMotion=G[A],!Ge)return;if(T.toJumplist){var ft=Me.jumpList,xt=ft.cachedCursor;xt?(yr(g,xt,Ge),delete ft.cachedCursor):yr(g,se,Ge)}Ge instanceof Array?(xe=Ge[0],ve=Ge[1]):ve=Ge,ve||(ve=kt(se)),b.visualMode?(b.visualBlock&&ve.ch===1/0||(ve=Ne(g,ve,Ce)),xe&&(xe=Ne(g,xe)),xe=xe||Te,V.anchor=xe,V.head=ve,un(g),hn(g,b,"<",Qt(xe,ve)?xe:ve),hn(g,b,">",Qt(xe,ve)?ve:xe)):M||(ve=Ne(g,ve,Ce),g.setCursor(ve.line,ve.ch))}if(M){if(z.lastSel){xe=Te;var pt=z.lastSel,Mt=Math.abs(pt.head.line-pt.anchor.line),hi=Math.abs(pt.head.ch-pt.anchor.ch);pt.visualLine?ve=new e(Te.line+Mt,Te.ch):pt.visualBlock?ve=new e(Te.line+Mt,Te.ch+hi):pt.head.line==pt.anchor.line?ve=new e(Te.line,Te.ch+hi):ve=new e(Te.line+Mt,Te.ch),b.visualMode=!0,b.visualLine=pt.visualLine,b.visualBlock=pt.visualBlock,V=b.sel={anchor:xe,head:ve},un(g)}else b.visualMode&&(z.lastSel={anchor:kt(V.anchor),head:kt(V.head),visualBlock:b.visualBlock,visualLine:b.visualLine});var ti,gi,Zt,Et,vi;if(b.visualMode){ti=ei(V.head,V.anchor),gi=Vt(V.head,V.anchor),Zt=b.visualLine||z.linewise,Et=b.visualBlock?"block":Zt?"line":"char";var $i=n(g,ti,gi);if(vi=zr(g,{anchor:$i.start,head:$i.end},Et),Zt){var ci=vi.ranges;if(Et=="block")for(var vn=0;vn<ci.length;vn++)ci[vn].head.ch=Wt(g,ci[vn].head.line);else Et=="line"&&(ci[0].head=new e(ci[0].head.line+1,0))}}else{if(ti=kt(xe||Te),gi=kt(ve||Ce),Qt(gi,ti)){var Cr=ti;ti=gi,gi=Cr}Zt=T.linewise||z.linewise,Zt?xo(g,ti,gi):T.forward&&Oo(g,ti,gi),Et="char";var Uu=!T.inclusive||Zt,$i=n(g,ti,gi);vi=zr(g,{anchor:$i.start,head:$i.end},Et,Uu)}g.setSelections(vi.ranges,vi.primary),b.lastMotion=null,z.repeat=Ve,z.registerName=q,z.linewise=Zt;var Ts=Be[M](g,z,vi.ranges,Te,ve);b.visualMode&&en(g,Ts!=null),Ts&&g.setCursor(Ts)}},recordLastEdit:function(g,b,L){var A=Me.macroModeState;A.isPlaying||(g.lastEditInputState=b,g.lastEditActionCommand=L,A.lastInsertModeChanges.changes=[],A.lastInsertModeChanges.expectCursorActivityForChange=!1,A.lastInsertModeChanges.visualBlock=g.visualBlock?g.sel.head.line-g.sel.anchor.line:0)}},G={moveToTopLine:function(g,b,L){var A=E(g).top+L.repeat-1;return new e(A,Mi(g.getLine(A)))},moveToMiddleLine:function(g){var b=E(g),L=Math.floor((b.top+b.bottom)*.5);return new e(L,Mi(g.getLine(L)))},moveToBottomLine:function(g,b,L){var A=E(g).bottom-L.repeat+1;return new e(A,Mi(g.getLine(A)))},expandToLine:function(g,b,L){var A=b;return new e(A.line+L.repeat-1,1/0)},findNext:function(g,b,L){var A=ni(g),T=A.getQuery();if(T){var M=!L.forward;return M=A.isReversed()?!M:M,Jr(g,T),u(g,M,T,L.repeat)}},findAndSelectNextInclusive:function(g,b,L,A,T){var M=ni(g),z=M.getQuery();if(z){var q=!L.forward;q=M.isReversed()?!q:q;var V=f(g,q,z,L.repeat,A);if(V){if(T.operator)return V;var se=V[0],ne=new e(V[1].line,V[1].ch-1);if(A.visualMode){(A.visualLine||A.visualBlock)&&(A.visualLine=!1,A.visualBlock=!1,i.signal(g,"vim-mode-change",{mode:"visual",subMode:""}));var Ce=A.sel.anchor;if(Ce)return M.isReversed()?L.forward?[Ce,se]:[Ce,ne]:L.forward?[Ce,ne]:[Ce,se]}else A.visualMode=!0,A.visualLine=!1,A.visualBlock=!1,i.signal(g,"vim-mode-change",{mode:"visual",subMode:""});return q?[ne,se]:[se,ne]}}},goToMark:function(g,b,L,A){var T=R(g,A,L.selectedCharacter);return T?L.linewise?{line:T.line,ch:Mi(g.getLine(T.line))}:T:null},moveToOtherHighlightedEnd:function(g,b,L,A){if(A.visualBlock&&L.sameLine){var T=A.sel;return[Ne(g,new e(T.anchor.line,T.head.ch)),Ne(g,new e(T.head.line,T.anchor.ch))]}else return[A.sel.head,A.sel.anchor]},jumpToMark:function(g,b,L,A){for(var T=b,M=0;M<L.repeat;M++){var z=T;for(var q in A.marks)if(fe(q)){var V=A.marks[q].find(),se=L.forward?Qt(V,z):Qt(z,V);if(!se&&!(L.linewise&&V.line==z.line)){var ne=At(z,T),Ce=L.forward?Ln(z,V,T):Ln(T,V,z);(ne||Ce)&&(T=V)}}}return L.linewise&&(T=new e(T.line,Mi(g.getLine(T.line)))),T},moveByCharacters:function(g,b,L){var A=b,T=L.repeat,M=L.forward?A.ch+T:A.ch-T;return new e(A.line,M)},moveByLines:function(g,b,L,A){var T=b,M=T.ch;switch(A.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:M=A.lastHPos;break;default:A.lastHPos=M}var z=L.repeat+(L.repeatOffset||0),q=L.forward?T.line+z:T.line-z,V=g.firstLine(),se=g.lastLine(),ne=g.findPosV(T,L.forward?z:-z,"line",A.lastHSPos),Ce=L.forward?ne.line>q:ne.line<q;return Ce&&(q=ne.line,M=ne.ch),q<V&&T.line==V?this.moveToStartOfLine(g,b,L,A):q>se&&T.line==se?Gr(g,b,L,A,!0):(L.toFirstChar&&(M=Mi(g.getLine(q)),A.lastHPos=M),A.lastHSPos=g.charCoords(new e(q,M),"div").left,new e(q,M))},moveByDisplayLines:function(g,b,L,A){var T=b;switch(A.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:A.lastHSPos=g.charCoords(T,"div").left}var M=L.repeat,z=g.findPosV(T,L.forward?M:-M,"line",A.lastHSPos);if(z.hitSide)if(L.forward)var q=g.charCoords(z,"div"),V={top:q.top+8,left:A.lastHSPos},z=g.coordsChar(V,"div");else{var se=g.charCoords(new e(g.firstLine(),0),"div");se.left=A.lastHSPos,z=g.coordsChar(se,"div")}return A.lastHPos=z.ch,z},moveByPage:function(g,b,L){var A=b,T=L.repeat;return g.findPosV(A,L.forward?T:-T,"page")},moveByParagraph:function(g,b,L){var A=L.forward?1:-1;return Vr(g,b,L.repeat,A)},moveBySentence:function(g,b,L){var A=L.forward?1:-1;return wo(g,b,L.repeat,A)},moveByScroll:function(g,b,L,A){var T=g.getScrollInfo(),M=null,z=L.repeat;z||(z=T.clientHeight/(2*g.defaultTextHeight()));var q=g.charCoords(b,"local");if(L.repeat=z,M=G.moveByDisplayLines(g,b,L,A),!M)return null;var V=g.charCoords(M,"local");return g.scrollTo(null,T.top+V.top-q.top),M},moveByWords:function(g,b,L){return So(g,b,L.repeat,!!L.forward,!!L.wordEnd,!!L.bigWord)},moveTillCharacter:function(g,b,L){var A=L.repeat,T=En(g,A,L.forward,L.selectedCharacter,b),M=L.forward?-1:1;return Ss(M,L),T?(T.ch+=M,T):null},moveToCharacter:function(g,b,L){var A=L.repeat;return Ss(0,L),En(g,A,L.forward,L.selectedCharacter,b)||b},moveToSymbol:function(g,b,L){var A=L.repeat;return Co(g,A,L.forward,L.selectedCharacter)||b},moveToColumn:function(g,b,L,A){var T=L.repeat;return A.lastHPos=T-1,A.lastHSPos=g.charCoords(b,"div").left,ws(g,T)},moveToEol:function(g,b,L,A){return Gr(g,b,L,A,!1)},moveToFirstNonWhiteSpaceCharacter:function(g,b){var L=b;return new e(L.line,Mi(g.getLine(L.line)))},moveToMatchedSymbol:function(g,b){for(var L=b,A=L.line,T=L.ch,M=g.getLine(A),z;T<M.length;T++)if(z=M.charAt(T),z&&U(z)){var q=g.getTokenTypeAt(new e(A,T+1));if(q!=="string"&&q!=="comment")break}if(T<M.length){var V=T==="<"||T===">"?/[(){}[\]<>]/:/[(){}[\]]/,se=g.findMatchingBracket(new e(A,T),{bracketRegex:V});return se.to}else return L},moveToStartOfLine:function(g,b){return new e(b.line,0)},moveToLineOrEdgeOfDocument:function(g,b,L){var A=L.forward?g.lastLine():g.firstLine();return L.repeatIsExplicit&&(A=L.repeat-g.getOption("firstLineNumber")),new e(A,Mi(g.getLine(A)))},moveToStartOfDisplayLine:function(g){return g.execCommand("goLineLeft"),g.getCursor()},moveToEndOfDisplayLine:function(g){g.execCommand("goLineRight");var b=g.getCursor();return b.sticky=="before"&&b.ch--,b},textObjectManipulation:function(g,b,L,A){var T={"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"},M={"'":!0,'"':!0,"`":!0},z=L.selectedCharacter;z=="b"?z="(":z=="B"&&(z="{");var q=!L.textObjectInner,V;if(T[z])V=Ls(g,b,z,q);else if(M[z])V=wi(g,b,z,q);else if(z==="W")V=gr(g,q,!q,!0);else if(z==="w")V=gr(g,q,!q,!1);else if(z==="p")if(V=Vr(g,b,L.repeat,0,q),L.linewise=!0,A.visualMode)A.visualLine||(A.visualLine=!0);else{var se=A.inputState.operatorArgs;se&&(se.linewise=!0),V.end.line--}else if(z==="t")V=vr(g,b,q);else if(z==="s"){var ne=g.getLine(b.line);b.ch>0&&Qe(ne[b.ch])&&(b.ch-=1);var Ce=Ps(g,b,L.repeat,1,q),Te=Ps(g,b,L.repeat,-1,q);re(g.getLine(Te.line)[Te.ch])&&re(g.getLine(Ce.line)[Ce.ch-1])&&(Te={line:Te.line,ch:Te.ch+1}),V={start:Te,end:Ce}}return V?g.state.vim.visualMode?An(g,V.start,V.end):[V.start,V.end]:null},repeatLastCharacterSearch:function(g,b,L){var A=Me.lastCharacterSearch,T=L.repeat,M=L.forward===A.forward,z=(A.increment?1:0)*(M?-1:1);g.moveH(-z,"char"),L.inclusive=!!M;var q=En(g,T,M,A.selectedCharacter);return q?(q.ch+=z,q):(g.moveH(z,"char"),b)}};function ce(g,b){G[g]=b}function Ie(g,b){for(var L=[],A=0;A<b;A++)L.push(g);return L}var Be={change:function(g,b,L){var A,T,M=g.state.vim,z=L[0].anchor,q=L[0].head;if(M.visualMode)if(b.fullLine)q.ch=Number.MAX_VALUE,q.line--,g.setSelection(z,q),T=g.getSelection(),g.replaceSelection(""),A=z;else{T=g.getSelection();var Te=Ie("",L.length);g.replaceSelections(Te),A=ei(L[0].head,L[0].anchor)}else{T=g.getRange(z,q);var V=M.lastEditInputState||{};if(V.motion=="moveByWords"&&!re(T)){var se=/\s+$/.exec(T);se&&V.motionArgs&&V.motionArgs.forward&&(q=mt(q,0,-se[0].length),T=T.slice(0,-se[0].length))}var ne=new e(z.line-1,Number.MAX_VALUE),Ce=g.firstLine()==g.lastLine();q.line>g.lastLine()&&b.linewise&&!Ce?g.replaceRange("",ne,q):g.replaceRange("",z,q),b.linewise&&(Ce||(g.setCursor(ne),i.commands.newlineAndIndent(g)),z.ch=Number.MAX_VALUE),A=z}Me.registerController.pushText(b.registerName,"change",T,b.linewise,L.length>1),Ze.enterInsertMode(g,{head:A},g.state.vim)},delete:function(g,b,L){var A,T,M=g.state.vim;if(M.visualBlock){T=g.getSelection();var V=Ie("",L.length);g.replaceSelections(V),A=ei(L[0].head,L[0].anchor)}else{var z=L[0].anchor,q=L[0].head;b.linewise&&q.line!=g.firstLine()&&z.line==g.lastLine()&&z.line==q.line-1&&(z.line==g.firstLine()?z.ch=0:z=new e(z.line-1,Wt(g,z.line-1))),T=g.getRange(z,q),g.replaceRange("",z,q),A=z,b.linewise&&(A=G.moveToFirstNonWhiteSpaceCharacter(g,z))}return Me.registerController.pushText(b.registerName,"delete",T,b.linewise,M.visualBlock),Ne(g,A)},indent:function(g,b,L){var A=g.state.vim;if(g.indentMore)for(var T=A.visualMode?b.repeat:1,M=0;M<T;M++)b.indentRight?g.indentMore():g.indentLess();else{var z=L[0].anchor.line,q=A.visualBlock?L[L.length-1].anchor.line:L[0].head.line,T=A.visualMode?b.repeat:1;b.linewise&&q--;for(var V=z;V<=q;V++)for(var M=0;M<T;M++)g.indentLine(V,b.indentRight)}return G.moveToFirstNonWhiteSpaceCharacter(g,L[0].anchor)},indentAuto:function(g,b,L){return g.execCommand("indentAuto"),G.moveToFirstNonWhiteSpaceCharacter(g,L[0].anchor)},changeCase:function(g,b,L,A,T){for(var M=g.getSelections(),z=[],q=b.toLower,V=0;V<M.length;V++){var se=M[V],ne="";if(q===!0)ne=se.toLowerCase();else if(q===!1)ne=se.toUpperCase();else for(var Ce=0;Ce<se.length;Ce++){var Te=se.charAt(Ce);ne+=B(Te)?Te.toLowerCase():Te.toUpperCase()}z.push(ne)}return g.replaceSelections(z),b.shouldMoveCursor?T:!g.state.vim.visualMode&&b.linewise&&L[0].anchor.line+1==L[0].head.line?G.moveToFirstNonWhiteSpaceCharacter(g,A):b.linewise?A:ei(L[0].anchor,L[0].head)},yank:function(g,b,L,A){var T=g.state.vim,M=g.getSelection(),z=T.visualMode?ei(T.sel.anchor,T.sel.head,L[0].head,L[0].anchor):A;return Me.registerController.pushText(b.registerName,"yank",M,b.linewise,T.visualBlock),z}};function me(g,b){Be[g]=b}var Ze={jumpListWalk:function(g,b,L){if(!L.visualMode){var A=b.repeat,T=b.forward,M=Me.jumpList,z=M.move(g,T?A:-A),q=z?z.find():void 0;q=q||g.getCursor(),g.setCursor(q)}},scroll:function(g,b,L){if(!L.visualMode){var A=b.repeat||1,T=g.defaultTextHeight(),M=g.getScrollInfo().top,z=T*A,q=b.forward?M+z:M-z,V=kt(g.getCursor()),se=g.charCoords(V,"local");if(b.forward)q>se.top?(V.line+=(q-se.top)/T,V.line=Math.ceil(V.line),g.setCursor(V),se=g.charCoords(V,"local"),g.scrollTo(null,se.top)):g.scrollTo(null,q);else{var ne=q+g.getScrollInfo().clientHeight;ne<se.bottom?(V.line-=(se.bottom-ne)/T,V.line=Math.floor(V.line),g.setCursor(V),se=g.charCoords(V,"local"),g.scrollTo(null,se.bottom-g.getScrollInfo().clientHeight)):g.scrollTo(null,q)}}},scrollToCursor:function(g,b){var L=g.getCursor().line,A=g.charCoords(new e(L,0),"local"),T=g.getScrollInfo().clientHeight,M=A.top;switch(b.position){case"center":M=A.bottom-T/2;break;case"bottom":var z=new e(L,g.getLine(L).length-1),q=g.charCoords(z,"local"),V=q.bottom-M;M=M-T+V;break}g.scrollTo(null,M)},replayMacro:function(g,b,L){var A=b.selectedCharacter,T=b.repeat,M=Me.macroModeState;for(A=="@"?A=M.latestRegister:M.latestRegister=A;T--;)St(g,L,M,A)},enterMacroRecordMode:function(g,b){var L=Me.macroModeState,A=b.selectedCharacter;Me.registerController.isValidRegister(A)&&L.enterMacroRecordMode(g,A)},toggleOverwrite:function(g){g.state.overwrite?(g.toggleOverwrite(!1),g.setOption("keyMap","vim-insert"),i.signal(g,"vim-mode-change",{mode:"insert"})):(g.toggleOverwrite(!0),g.setOption("keyMap","vim-replace"),i.signal(g,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(g,b,L){if(!g.getOption("readOnly")){L.insertMode=!0,L.insertModeRepeat=b&&b.repeat||1;var A=b?b.insertAt:null,T=L.sel,M=b.head||g.getCursor("head"),z=g.listSelections().length;if(A=="eol")M=new e(M.line,Wt(g,M.line));else if(A=="bol")M=new e(M.line,0);else if(A=="charAfter"){var q=n(g,M,mt(M,0,1));M=q.end}else if(A=="firstNonBlank"){var q=n(g,M,G.moveToFirstNonWhiteSpaceCharacter(g,M));M=q.end}else if(A=="startOfSelectedArea"){if(!L.visualMode)return;L.visualBlock?(M=new e(Math.min(T.head.line,T.anchor.line),Math.min(T.head.ch,T.anchor.ch)),z=Math.abs(T.head.line-T.anchor.line)+1):T.head.line<T.anchor.line?M=T.head:M=new e(T.anchor.line,0)}else if(A=="endOfSelectedArea"){if(!L.visualMode)return;L.visualBlock?(M=new e(Math.min(T.head.line,T.anchor.line),Math.max(T.head.ch,T.anchor.ch)+1),z=Math.abs(T.head.line-T.anchor.line)+1):T.head.line>=T.anchor.line?M=mt(T.head,0,1):M=new e(T.anchor.line,0)}else if(A=="inplace"){if(L.visualMode)return}else A=="lastEdit"&&(M=Z(g)||M);g.setOption("disableInput",!1),b&&b.replace?(g.toggleOverwrite(!0),g.setOption("keyMap","vim-replace"),i.signal(g,"vim-mode-change",{mode:"replace"})):(g.toggleOverwrite(!1),g.setOption("keyMap","vim-insert"),i.signal(g,"vim-mode-change",{mode:"insert"})),Me.macroModeState.isPlaying||(g.on("change",Bi),i.on(g.getInputField(),"keydown",Tn)),L.visualMode&&en(g),be(g,M,z)}},toggleVisualMode:function(g,b,L){var A=b.repeat,T=g.getCursor(),M;if(L.visualMode)L.visualLine^b.linewise||L.visualBlock^b.blockwise?(L.visualLine=!!b.linewise,L.visualBlock=!!b.blockwise,i.signal(g,"vim-mode-change",{mode:"visual",subMode:L.visualLine?"linewise":L.visualBlock?"blockwise":""}),un(g)):en(g);else{L.visualMode=!0,L.visualLine=!!b.linewise,L.visualBlock=!!b.blockwise,M=Ne(g,new e(T.line,T.ch+A-1));var z=n(g,T,M);L.sel={anchor:z.start,head:z.end},i.signal(g,"vim-mode-change",{mode:"visual",subMode:L.visualLine?"linewise":L.visualBlock?"blockwise":""}),un(g),hn(g,L,"<",ei(T,M)),hn(g,L,">",Vt(T,M))}},reselectLastSelection:function(g,b,L){var A=L.lastSelection;if(L.visualMode&&ui(g,L),A){var T=A.anchorMark.find(),M=A.headMark.find();if(!T||!M)return;L.sel={anchor:T,head:M},L.visualMode=!0,L.visualLine=A.visualLine,L.visualBlock=A.visualBlock,un(g),hn(g,L,"<",ei(T,M)),hn(g,L,">",Vt(T,M)),i.signal(g,"vim-mode-change",{mode:"visual",subMode:L.visualLine?"linewise":L.visualBlock?"blockwise":""})}},joinLines:function(g,b,L){var A,T;if(L.visualMode){if(A=g.getCursor("anchor"),T=g.getCursor("head"),Qt(T,A)){var M=T;T=A,A=M}T.ch=Wt(g,T.line)-1}else{var z=Math.max(b.repeat,2);A=g.getCursor(),T=Ne(g,new e(A.line+z-1,1/0))}for(var q=0,V=A.line;V<T.line;V++){q=Wt(g,A.line);var se="",ne=0;if(!b.keepSpaces){var Ce=g.getLine(A.line+1);ne=Ce.search(/\S/),ne==-1?ne=Ce.length:se=" "}g.replaceRange(se,new e(A.line,q),new e(A.line+1,ne))}var Te=Ne(g,new e(A.line,q));L.visualMode&&en(g,!1),g.setCursor(Te)},newLineAndEnterInsertMode:function(g,b,L){L.insertMode=!0;var A=kt(g.getCursor());if(A.line===g.firstLine()&&!b.after)g.replaceRange(`
`,new e(g.firstLine(),0)),g.setCursor(g.firstLine(),0);else{A.line=b.after?A.line:A.line-1,A.ch=Wt(g,A.line),g.setCursor(A);var T=i.commands.newlineAndIndentContinueComment||i.commands.newlineAndIndent;T(g)}this.enterInsertMode(g,{repeat:b.repeat},L)},paste:function(g,b,L){var A=Me.registerController.getRegister(b.registerName);if(b.registerName==="+")navigator.clipboard.readText().then(M=>{this.continuePaste(g,b,L,M,A)});else{var T=A.toString();this.continuePaste(g,b,L,T,A)}},continuePaste:function(g,b,L,A,T){var M=kt(g.getCursor());if(A){if(b.matchIndent){var z=g.getOption("tabSize"),q=function(ci){var vn=ci.split("	").length-1,Cr=ci.split(" ").length-1;return vn*z+Cr*1},V=g.getLine(g.getCursor().line),se=q(V.match(/^\s*/)[0]),ne=A.replace(/\n$/,""),Ce=A!==ne,Te=q(A.match(/^\s*/)[0]),A=ne.replace(/^\s*/gm,function(ci){var vn=se+(q(ci)-Te);if(vn<0)return"";if(g.getOption("indentWithTabs")){var Cr=Math.floor(vn/z);return Array(Cr+1).join("	")}else return Array(vn+1).join(" ")});A+=Ce?`
`:""}if(b.repeat>1)var A=Array(b.repeat+1).join(A);var ve=T.linewise,xe=T.blockwise;if(xe){A=A.split(`
`),ve&&A.pop();for(var Ve=0;Ve<A.length;Ve++)A[Ve]=A[Ve]==""?" ":A[Ve];M.ch+=b.after?1:0,M.ch=Math.min(Wt(g,M.line),M.ch)}else ve?L.visualMode?A=L.visualLine?A.slice(0,-1):`
`+A.slice(0,A.length-1)+`
`:b.after?(A=`
`+A.slice(0,A.length-1),M.ch=Wt(g,M.line)):M.ch=0:M.ch+=b.after?1:0;var Ge,ft;if(L.visualMode){L.lastPastedText=A;var xt,pt=st(g,L),Mt=pt[0],hi=pt[1],ti=g.getSelection(),gi=g.listSelections(),Zt=new Array(gi.length).join("1").split("1");L.lastSelection&&(xt=L.lastSelection.headMark.find()),Me.registerController.unnamedRegister.setText(ti),xe?(g.replaceSelections(Zt),hi=new e(Mt.line+A.length-1,Mt.ch),g.setCursor(Mt),ye(g,hi),g.replaceSelections(A),Ge=Mt):L.visualBlock?(g.replaceSelections(Zt),g.setCursor(Mt),g.replaceRange(A,Mt,Mt),Ge=Mt):(g.replaceRange(A,Mt,hi),Ge=g.posFromIndex(g.indexFromPos(Mt)+A.length-1)),xt&&(L.lastSelection.headMark=g.setBookmark(xt)),ve&&(Ge.ch=0)}else if(xe){g.setCursor(M);for(var Ve=0;Ve<A.length;Ve++){var Et=M.line+Ve;Et>g.lastLine()&&g.replaceRange(`
`,new e(Et,0));var vi=Wt(g,Et);vi<M.ch&&kn(g,Et,M.ch)}g.setCursor(M),ye(g,new e(M.line+A.length-1,M.ch)),g.replaceSelections(A),Ge=M}else g.replaceRange(A,M),ve&&b.after?Ge=new e(M.line+1,Mi(g.getLine(M.line+1))):ve&&!b.after?Ge=new e(M.line,Mi(g.getLine(M.line))):!ve&&b.after?(ft=g.indexFromPos(M),Ge=g.posFromIndex(ft+A.length-1)):(ft=g.indexFromPos(M),Ge=g.posFromIndex(ft+A.length));L.visualMode&&en(g,!1),g.setCursor(Ge)}},undo:function(g,b){g.operation(function(){pi(g,i.commands.undo,b.repeat)(),g.setCursor(Ne(g,g.getCursor("start")))})},redo:function(g,b){pi(g,i.commands.redo,b.repeat)()},setRegister:function(g,b,L){L.inputState.registerName=b.selectedCharacter},insertRegister:function(g,b,L){var A=b.selectedCharacter,T=Me.registerController.getRegister(A),M=T&&T.toString();M&&g.replaceSelection(M)},oneNormalCommand:function(g,b,L){_e(g,!0),L.insertModeReturn=!0,i.on(g,"vim-command-done",function A(){L.visualMode||(L.insertModeReturn&&(L.insertModeReturn=!1,L.insertMode||Ze.enterInsertMode(g,{},L)),i.off(g,"vim-command-done",A))})},setMark:function(g,b,L){var A=b.selectedCharacter;hn(g,L,A,g.getCursor())},replace:function(g,b,L){var A=b.selectedCharacter,T=g.getCursor(),M,z,q=g.listSelections();if(L.visualMode)T=g.getCursor("start"),z=g.getCursor("end");else{var V=g.getLine(T.line);M=T.ch+b.repeat,M>V.length&&(M=V.length),z=new e(T.line,M)}var se=n(g,T,z);if(T=se.start,z=se.end,A==`
`)L.visualMode||g.replaceRange("",T,z),(i.commands.newlineAndIndentContinueComment||i.commands.newlineAndIndent)(g);else{var ne=g.getRange(T,z);if(ne=ne.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,A),ne=ne.replace(/[^\n]/g,A),L.visualBlock){var Ce=new Array(g.getOption("tabSize")+1).join(" ");ne=g.getSelection(),ne=ne.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,A),ne=ne.replace(/\t/g,Ce).replace(/[^\n]/g,A).split(`
`),g.replaceSelections(ne)}else g.replaceRange(ne,T,z);L.visualMode?(T=Qt(q[0].anchor,q[0].head)?q[0].anchor:q[0].head,g.setCursor(T),en(g,!1)):g.setCursor(mt(z,0,-1))}},incrementNumberToken:function(g,b){for(var L=g.getCursor(),A=g.getLine(L.line),T=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi,M,z,q,V;(M=T.exec(A))!==null&&(z=M.index,q=z+M[0].length,!(L.ch<q)););if(!(!b.backtrack&&q<=L.ch)){if(M){var se=M[2]||M[4],ne=M[3]||M[5],Ce=b.increase?1:-1,Te={"0b":2,0:8,"":10,"0x":16}[se.toLowerCase()],ve=parseInt(M[1]+ne,Te)+Ce*b.repeat;V=ve.toString(Te);var xe=se?new Array(ne.length-V.length+1+M[1].length).join("0"):"";V.charAt(0)==="-"?V="-"+se+xe+V.substr(1):V=se+xe+V;var Ve=new e(L.line,z),Ge=new e(L.line,q);g.replaceRange(V,Ve,Ge)}else return;g.setCursor(new e(L.line,z+V.length-1))}},repeatLastEdit:function(g,b,L){var A=L.lastEditInputState;if(A){var T=b.repeat;T&&b.repeatIsExplicit?L.lastEditInputState.repeatOverride=T:T=L.lastEditInputState.repeatOverride||T,Ia(g,L,T,!1)}},indent:function(g,b){g.indentLine(g.getCursor().line,b.indentRight)},exitInsertMode:_e};function Ke(g,b){Ze[g]=b}function Ne(g,b,L){var A=g.state.vim,T=A.insertMode||A.visualMode,M=Math.min(Math.max(g.firstLine(),b.line),g.lastLine()),z=g.getLine(M),q=z.length-1+Number(!!T),V=Math.min(Math.max(0,b.ch),q),se=z.charCodeAt(V);if(56320<=se&&se<=57343){var ne=1;L&&L.line==M&&L.ch>V&&(ne=-1),V+=ne,V>q&&(V-=2)}return new e(M,V)}function at(g){var b={};for(var L in g)g.hasOwnProperty(L)&&(b[L]=g[L]);return b}function mt(g,b,L){return typeof b=="object"&&(L=b.ch,b=b.line),new e(g.line+b,g.ch+L)}function Pt(g,b,L,A){for(var T,M=[],z=[],q=0;q<b.length;q++){var V=b[q];L=="insert"&&V.context!="insert"||V.context&&V.context!=L||A.operator&&V.type=="action"||!(T=li(g,V.keys))||(T=="partial"&&M.push(V),T=="full"&&z.push(V))}return{partial:M.length&&M,full:z.length&&z}}function li(g,b){if(b.slice(-11)=="<character>"){var L=b.length-11,A=g.slice(0,L),T=b.slice(0,L);return A==T&&g.length>L?"full":T.indexOf(A)==0?"partial":!1}else return g==b?"full":b.indexOf(g)==0?"partial":!1}function ji(g){var b=/^.*(<[^>]+>)$/.exec(g),L=b?b[1]:g.slice(-1);if(L.length>1)switch(L){case"<CR>":L=`
`;break;case"<Space>":L=" ";break;default:L="";break}return L}function pi(g,b,L){return function(){for(var A=0;A<L;A++)b(g)}}function kt(g){return new e(g.line,g.ch)}function At(g,b){return g.ch==b.ch&&g.line==b.line}function Qt(g,b){return g.line<b.line||g.line==b.line&&g.ch<b.ch}function ei(g,b){return arguments.length>2&&(b=ei.apply(void 0,Array.prototype.slice.call(arguments,1))),Qt(g,b)?g:b}function Vt(g,b){return arguments.length>2&&(b=Vt.apply(void 0,Array.prototype.slice.call(arguments,1))),Qt(g,b)?b:g}function Ln(g,b,L){var A=Qt(g,b),T=Qt(b,L);return A&&T}function Wt(g,b){return g.getLine(b).length}function gn(g){return g.trim?g.trim():g.replace(/^\s+|\s+$/g,"")}function ln(g){return g.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function kn(g,b,L){var A=Wt(g,b),T=new Array(L-A+1).join(" ");g.setCursor(new e(b,A)),g.replaceRange(T,g.getCursor())}function ye(g,b){var L=[],A=g.listSelections(),T=kt(g.clipPos(b)),M=!At(b,T),z=g.getCursor("head"),q=ze(A,z),V=At(A[q].head,A[q].anchor),se=A.length-1,ne=se-q>q?se:0,Ce=A[ne].anchor,Te=Math.min(Ce.line,T.line),ve=Math.max(Ce.line,T.line),xe=Ce.ch,Ve=T.ch,Ge=A[ne].head.ch-xe,ft=Ve-xe;Ge>0&&ft<=0?(xe++,M||Ve--):Ge<0&&ft>=0?(xe--,V||Ve++):Ge<0&&ft==-1&&(xe--,Ve++);for(var xt=Te;xt<=ve;xt++){var pt={anchor:new e(xt,xe),head:new e(xt,Ve)};L.push(pt)}return g.setSelections(L),b.ch=Ve,Ce.ch=xe,Ce}function be(g,b,L){for(var A=[],T=0;T<L;T++){var M=mt(b,T,0);A.push({anchor:M,head:M})}g.setSelections(A,0)}function ze(g,b,L){for(var A=0;A<g.length;A++){var T=L!="head"&&At(g[A].anchor,b),M=L!="anchor"&&At(g[A].head,b);if(T||M)return A}return-1}function st(g,b){var L=b.lastSelection,A=function(){var M=g.listSelections(),z=M[0],q=M[M.length-1],V=Qt(z.anchor,z.head)?z.anchor:z.head,se=Qt(q.anchor,q.head)?q.head:q.anchor;return[V,se]},T=function(){var M=g.getCursor(),z=g.getCursor(),q=L.visualBlock;if(q){var V=q.width,se=q.height;z=new e(M.line+se,M.ch+V);for(var ne=[],Ce=M.line;Ce<z.line;Ce++){var Te=new e(Ce,M.ch),ve=new e(Ce,z.ch),xe={anchor:Te,head:ve};ne.push(xe)}g.setSelections(ne)}else{var Ve=L.anchorMark.find(),Ge=L.headMark.find(),ft=Ge.line-Ve.line,xt=Ge.ch-Ve.ch;z={line:z.line+ft,ch:ft?z.ch:xt+z.ch},L.visualLine&&(M=new e(M.line,0),z=new e(z.line,Wt(g,z.line))),g.setSelection(M,z)}return[M,z]};return b.visualMode?A():T()}function ui(g,b){var L=b.sel.anchor,A=b.sel.head;b.lastPastedText&&(A=g.posFromIndex(g.indexFromPos(L)+b.lastPastedText.length),b.lastPastedText=null),b.lastSelection={anchorMark:g.setBookmark(L),headMark:g.setBookmark(A),anchor:kt(L),head:kt(A),visualMode:b.visualMode,visualLine:b.visualLine,visualBlock:b.visualBlock}}function An(g,b,L){var A=g.state.vim.sel,T=A.head,M=A.anchor,z;return Qt(L,b)&&(z=L,L=b,b=z),Qt(T,M)?(T=ei(b,T),M=Vt(M,L)):(M=ei(b,M),T=Vt(T,L),T=mt(T,0,-1),T.ch==-1&&T.line!=g.firstLine()&&(T=new e(T.line-1,Wt(g,T.line-1)))),[M,T]}function un(g,b,T){var A=g.state.vim;b=b||A.sel;var T=T||A.visualLine?"line":A.visualBlock?"block":"char",M=zr(g,b,T);g.setSelections(M.ranges,M.primary)}function zr(g,b,L,A){var T=kt(b.head),M=kt(b.anchor);if(L=="char"){var z=!A&&!Qt(b.head,b.anchor)?1:0,q=Qt(b.head,b.anchor)?1:0;return T=mt(b.head,0,z),M=mt(b.anchor,0,q),{ranges:[{anchor:M,head:T}],primary:0}}else if(L=="line"){if(Qt(b.head,b.anchor))T.ch=0,M.ch=Wt(g,M.line);else{M.ch=0;var V=g.lastLine();T.line>V&&(T.line=V),T.ch=Wt(g,T.line)}return{ranges:[{anchor:M,head:T}],primary:0}}else if(L=="block"){var se=Math.min(M.line,T.line),ne=M.ch,Ce=Math.max(M.line,T.line),Te=T.ch;ne<Te?Te+=1:ne+=1;for(var ve=Ce-se+1,xe=T.line==se?0:ve-1,Ve=[],Ge=0;Ge<ve;Ge++)Ve.push({anchor:new e(se+Ge,ne),head:new e(se+Ge,Te)});return{ranges:Ve,primary:xe}}}function yo(g){var b=g.getCursor("head");return g.getSelection().length==1&&(b=ei(b,g.getCursor("anchor"))),b}function en(g,b){var L=g.state.vim;b!==!1&&g.setCursor(Ne(g,L.sel.head)),ui(g,L),L.visualMode=!1,L.visualLine=!1,L.visualBlock=!1,L.insertMode||i.signal(g,"vim-mode-change",{mode:"normal"})}function Oo(g,b,L){var A=g.getRange(b,L);if(/\n\s*$/.test(A)){var T=A.split(`
`);T.pop();for(var M,M=T.pop();T.length>0&&M&&re(M);M=T.pop())L.line--,L.ch=0;M?(L.line--,L.ch=Wt(g,L.line)):L.ch=0}}function xo(g,b,L){b.ch=0,L.ch=0,L.line++}function Mi(g){if(!g)return 0;var b=g.search(/\S/);return b==-1?g.length:b}function gr(g,b,L,A,T){var M=yo(g),z=g.getLine(M.line),q=M.ch,V=T?x[0]:w[0];if(L&&/\s/.test(z.charAt(q)))V=function(ve){return/\s/.test(ve)};else{for(;!V(z.charAt(q));)if(q++,q>=z.length)return null;A?V=w[0]:(V=x[0],V(z.charAt(q))||(V=x[1]))}for(var se=q,ne=q;V(z.charAt(se))&&se<z.length;)se++;for(;V(z.charAt(ne))&&ne>=0;)ne--;if(ne++,b){for(var Ce=se;/\s/.test(z.charAt(se))&&se<z.length;)se++;if(Ce==se){for(var Te=ne;/\s/.test(z.charAt(ne-1))&&ne>0;)ne--;ne||(ne=Te)}}return{start:new e(M.line,ne),end:new e(M.line,se)}}function vr(g,b,L){var A=b;if(!i.findMatchingTag||!i.findEnclosingTag)return{start:A,end:A};var T=i.findMatchingTag(g,b)||i.findEnclosingTag(g,b);return!T||!T.open||!T.close?{start:A,end:A}:L?{start:T.open.from,end:T.close.to}:{start:T.open.to,end:T.close.from}}function yr(g,b,L){At(b,L)||Me.jumpList.add(g,b,L)}function Ss(g,b){Me.lastCharacterSearch.increment=g,Me.lastCharacterSearch.forward=b.forward,Me.lastCharacterSearch.selectedCharacter=b.selectedCharacter}var Do={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},jr={bracket:{isComplete:function(g){if(g.nextCh===g.symb){if(g.depth++,g.depth>=1)return!0}else g.nextCh===g.reverseSymb&&g.depth--;return!1}},section:{init:function(g){g.curMoveThrough=!0,g.symb=(g.forward?"]":"[")===g.symb?"{":"}"},isComplete:function(g){return g.index===0&&g.nextCh===g.symb}},comment:{isComplete:function(g){var b=g.lastCh==="*"&&g.nextCh==="/";return g.lastCh=g.nextCh,b}},method:{init:function(g){g.symb=g.symb==="m"?"{":"}",g.reverseSymb=g.symb==="{"?"}":"{"},isComplete:function(g){return g.nextCh===g.symb}},preprocess:{init:function(g){g.index=0},isComplete:function(g){if(g.nextCh==="#"){var b=g.lineText.match(/^#(\w+)/)[1];if(b==="endif"){if(g.forward&&g.depth===0)return!0;g.depth++}else if(b==="if"){if(!g.forward&&g.depth===0)return!0;g.depth--}if(b==="else"&&g.depth===0)return!0}return!1}}};function Co(g,b,L,A){var T=kt(g.getCursor()),M=L?1:-1,z=L?g.lineCount():-1,q=T.ch,V=T.line,se=g.getLine(V),ne={lineText:se,nextCh:se.charAt(q),lastCh:null,index:q,symb:A,reverseSymb:(L?{")":"(","}":"{"}:{"(":")","{":"}"})[A],forward:L,depth:0,curMoveThrough:!1},Ce=Do[A];if(!Ce)return T;var Te=jr[Ce].init,ve=jr[Ce].isComplete;for(Te&&Te(ne);V!==z&&b;){if(ne.index+=M,ne.nextCh=ne.lineText.charAt(ne.index),!ne.nextCh){if(V+=M,ne.lineText=g.getLine(V)||"",M>0)ne.index=0;else{var xe=ne.lineText.length;ne.index=xe>0?xe-1:0}ne.nextCh=ne.lineText.charAt(ne.index)}ve(ne)&&(T.line=V,T.ch=ne.index,b--)}return ne.nextCh||ne.curMoveThrough?new e(V,ne.index):T}function bo(g,b,L,A,T){var M=b.line,z=b.ch,q=g.getLine(M),V=L?1:-1,se=A?w:x;if(T&&q==""){if(M+=V,q=g.getLine(M),!oe(g,M))return null;z=L?0:q.length}for(;;){if(T&&q=="")return{from:0,to:0,line:M};for(var ne=V>0?q.length:-1,Ce=ne,Te=ne;z!=ne;){for(var ve=!1,xe=0;xe<se.length&&!ve;++xe)if(se[xe](q.charAt(z))){for(Ce=z;z!=ne&&se[xe](q.charAt(z));)z+=V;if(Te=z,ve=Ce!=Te,Ce==b.ch&&M==b.line&&Te==Ce+V)continue;return{from:Math.min(Ce,Te+1),to:Math.max(Ce,Te),line:M}}ve||(z+=V)}if(M+=V,!oe(g,M))return null;q=g.getLine(M),z=V>0?0:q.length}}function So(g,b,L,A,T,M){var z=kt(b),q=[];(A&&!T||!A&&T)&&L++;for(var V=!(A&&T),se=0;se<L;se++){var ne=bo(g,b,A,M,V);if(!ne){var Ce=Wt(g,g.lastLine());q.push(A?{line:g.lastLine(),from:Ce,to:Ce}:{line:0,from:0,to:0});break}q.push(ne),b=new e(ne.line,A?ne.to-1:ne.from)}var Te=q.length!=L,ve=q[0],xe=q.pop();return A&&!T?(!Te&&(ve.from!=z.ch||ve.line!=z.line)&&(xe=q.pop()),new e(xe.line,xe.from)):A&&T?new e(xe.line,xe.to-1):!A&&T?(!Te&&(ve.to!=z.ch||ve.line!=z.line)&&(xe=q.pop()),new e(xe.line,xe.to)):new e(xe.line,xe.from)}function Gr(g,b,L,A,T){var M=b,z=new e(M.line+L.repeat-1,1/0),q=g.clipPos(z);return q.ch--,T||(A.lastHPos=1/0,A.lastHSPos=g.charCoords(q,"div").left),z}function En(g,b,L,A,T){for(var M=T||g.getCursor(),z=M.ch,q,V=0;V<b;V++){var se=g.getLine(M.line);if(q=sr(z,se,A,L,!0),q==-1)return null;z=q}return new e(g.getCursor().line,q)}function ws(g,b){var L=g.getCursor().line;return Ne(g,new e(L,b-1))}function hn(g,b,L,A){De(L,j)&&(b.marks[L]&&b.marks[L].clear(),b.marks[L]=g.setBookmark(A))}function sr(g,b,L,A,T){var M;return A?(M=b.indexOf(L,g+1),M!=-1&&!T&&(M-=1)):(M=b.lastIndexOf(L,g-1),M!=-1&&!T&&(M+=1)),M}function Vr(g,b,L,A,T){var M=b.line,z=g.firstLine(),q=g.lastLine(),V,se,ne=M;function Ce(Ge){return!g.getLine(Ge)}function Te(Ge,ft,xt){return xt?Ce(Ge)!=Ce(Ge+ft):!Ce(Ge)&&Ce(Ge+ft)}if(A){for(;z<=ne&&ne<=q&&L>0;)Te(ne,A)&&L--,ne+=A;return new e(ne,0)}var ve=g.state.vim;if(ve.visualLine&&Te(M,1,!0)){var xe=ve.sel.anchor;Te(xe.line,-1,!0)&&(!T||xe.line!=M)&&(M+=1)}var Ve=Ce(M);for(ne=M;ne<=q&&L;ne++)Te(ne,1,!0)&&(!T||Ce(ne)!=Ve)&&L--;for(se=new e(ne,0),ne>q&&!Ve?Ve=!0:T=!1,ne=M;ne>z&&!((!T||Ce(ne)==Ve||ne==M)&&Te(ne,-1,!0));ne--);return V=new e(ne,0),{start:V,end:se}}function Ps(g,b,L,A,T){function M(se){se.pos+se.dir<0||se.pos+se.dir>=se.line.length?se.line=null:se.pos+=se.dir}function z(se,ne,Ce,Te){var ve=se.getLine(ne),xe={line:ve,ln:ne,pos:Ce,dir:Te};if(xe.line==="")return{ln:xe.ln,pos:xe.pos};var Ve=xe.pos;for(M(xe);xe.line!==null;){if(Ve=xe.pos,Qe(xe.line[xe.pos]))if(T){for(M(xe);xe.line!==null&&re(xe.line[xe.pos]);)Ve=xe.pos,M(xe);return{ln:xe.ln,pos:Ve+1}}else return{ln:xe.ln,pos:xe.pos+1};M(xe)}return{ln:xe.ln,pos:Ve+1}}function q(se,ne,Ce,Te){var ve=se.getLine(ne),xe={line:ve,ln:ne,pos:Ce,dir:Te};if(xe.line==="")return{ln:xe.ln,pos:xe.pos};var Ve=xe.pos;for(M(xe);xe.line!==null;){if(!re(xe.line[xe.pos])&&!Qe(xe.line[xe.pos]))Ve=xe.pos;else if(Qe(xe.line[xe.pos]))return T?re(xe.line[xe.pos+1])?{ln:xe.ln,pos:xe.pos+1}:{ln:xe.ln,pos:Ve}:{ln:xe.ln,pos:Ve};M(xe)}return xe.line=ve,T&&re(xe.line[xe.pos])?{ln:xe.ln,pos:xe.pos}:{ln:xe.ln,pos:Ve}}for(var V={ln:b.line,pos:b.ch};L>0;)A<0?V=q(g,V.ln,V.pos,A):V=z(g,V.ln,V.pos,A),L--;return new e(V.ln,V.pos)}function wo(g,b,L,A){function T(V,se){if(se.pos+se.dir<0||se.pos+se.dir>=se.line.length){if(se.ln+=se.dir,!oe(V,se.ln)){se.line=null,se.ln=null,se.pos=null;return}se.line=V.getLine(se.ln),se.pos=se.dir>0?0:se.line.length-1}else se.pos+=se.dir}function M(V,se,ne,Ce){var Ge=V.getLine(se),Te=Ge==="",ve={line:Ge,ln:se,pos:ne,dir:Ce},xe={ln:ve.ln,pos:ve.pos},Ve=ve.line==="";for(T(V,ve);ve.line!==null;){if(xe.ln=ve.ln,xe.pos=ve.pos,ve.line===""&&!Ve)return{ln:ve.ln,pos:ve.pos};if(Te&&ve.line!==""&&!re(ve.line[ve.pos]))return{ln:ve.ln,pos:ve.pos};Qe(ve.line[ve.pos])&&!Te&&(ve.pos===ve.line.length-1||re(ve.line[ve.pos+1]))&&(Te=!0),T(V,ve)}var Ge=V.getLine(xe.ln);xe.pos=0;for(var ft=Ge.length-1;ft>=0;--ft)if(!re(Ge[ft])){xe.pos=ft;break}return xe}function z(V,se,ne,Ce){var Ve=V.getLine(se),Te={line:Ve,ln:se,pos:ne,dir:Ce},ve={ln:Te.ln,pos:null},xe=Te.line==="";for(T(V,Te);Te.line!==null;){if(Te.line===""&&!xe)return ve.pos!==null?ve:{ln:Te.ln,pos:Te.pos};if(Qe(Te.line[Te.pos])&&ve.pos!==null&&!(Te.ln===ve.ln&&Te.pos+1===ve.pos))return ve;Te.line!==""&&!re(Te.line[Te.pos])&&(xe=!1,ve={ln:Te.ln,pos:Te.pos}),T(V,Te)}var Ve=V.getLine(ve.ln);ve.pos=0;for(var Ge=0;Ge<Ve.length;++Ge)if(!re(Ve[Ge])){ve.pos=Ge;break}return ve}for(var q={ln:b.line,pos:b.ch};L>0;)A<0?q=z(g,q.ln,q.pos,A):q=M(g,q.ln,q.pos,A),L--;return new e(q.ln,q.pos)}function Ls(g,b,L,A){var T=b,M,z,q={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[L],V={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[L],se=g.getLine(T.line).charAt(T.ch),ne=se===V?1:0;if(M=g.scanForBracket(new e(T.line,T.ch+ne),-1,void 0,{bracketRegex:q}),z=g.scanForBracket(new e(T.line,T.ch+ne),1,void 0,{bracketRegex:q}),!M||!z)return{start:T,end:T};if(M=M.pos,z=z.pos,M.line==z.line&&M.ch>z.ch||M.line>z.line){var Ce=M;M=z,z=Ce}return A?z.ch+=1:M.ch+=1,{start:M,end:z}}function wi(g,b,L,A){var T=kt(b),M=g.getLine(T.line),z=M.split(""),q,V,se,ne,Ce=z.indexOf(L);if(T.ch<Ce)T.ch=Ce;else if(Ce<T.ch&&z[T.ch]==L){var Te=/string/.test(g.getTokenTypeAt(mt(b,0,1))),ve=/string/.test(g.getTokenTypeAt(b)),xe=Te&&!ve;xe||(V=T.ch,--T.ch)}if(z[T.ch]==L&&!V)q=T.ch+1;else for(se=T.ch;se>-1&&!q;se--)z[se]==L&&(q=se+1);if(q&&!V)for(se=q,ne=z.length;se<ne&&!V;se++)z[se]==L&&(V=se);return!q||!V?{start:T,end:T}:(A&&(--q,++V),{start:new e(T.line,q),end:new e(T.line,V)})}ge("pcre",!0,"boolean");function Gi(){}Gi.prototype={getQuery:function(){return Me.query},setQuery:function(g){Me.query=g},getOverlay:function(){return this.searchOverlay},setOverlay:function(g){this.searchOverlay=g},isReversed:function(){return Me.isReversed},setReversed:function(g){Me.isReversed=g},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(g){this.annotate=g}};function ni(g){var b=g.state.vim;return b.searchState_||(b.searchState_=new Gi)}function ks(g){return As(g,"/")}function Po(g){return Or(g,"/")}function As(g,b){var L=Or(g,b)||[];if(!L.length)return[];var A=[];if(L[0]===0){for(var T=0;T<L.length;T++)typeof L[T]=="number"&&A.push(g.substring(L[T]+1,L[T+1]));return A}}function Or(g,b){b||(b="/");for(var L=!1,A=[],T=0;T<g.length;T++){var M=g.charAt(T);!L&&M==b&&A.push(T),L=!L&&M=="\\"}return A}function qr(g){for(var b="|(){",L="}",A=!1,T=[],M=-1;M<g.length;M++){var z=g.charAt(M)||"",q=g.charAt(M+1)||"",V=q&&b.indexOf(q)!=-1;A?((z!=="\\"||!V)&&T.push(z),A=!1):z==="\\"?(A=!0,q&&L.indexOf(q)!=-1&&(V=!0),(!V||q==="\\")&&T.push(z)):(T.push(z),V&&q!=="\\"&&T.push("\\"))}return T.join("")}var or={"\\n":`
`,"\\r":"\r","\\t":"	"};function xr(g){for(var b=!1,L=[],A=-1;A<g.length;A++){var T=g.charAt(A)||"",M=g.charAt(A+1)||"";or[T+M]?(L.push(or[T+M]),A++):b?(L.push(T),b=!1):T==="\\"?(b=!0,H(M)||M==="$"?L.push("$"):M!=="/"&&M!=="\\"&&L.push("\\")):(T==="$"&&L.push("$"),L.push(T),M==="/"&&L.push("\\"))}return L.join("")}var tn={"\\/":"/","\\\\":"\\","\\n":`
`,"\\r":"\r","\\t":"	","\\&":"&"};function Lo(g){for(var b=new i.StringStream(g),L=[];!b.eol();){for(;b.peek()&&b.peek()!="\\";)L.push(b.next());var A=!1;for(var T in tn)if(b.match(T,!0)){A=!0,L.push(tn[T]);break}A||L.push(b.next())}return L.join("")}function mi(g,b,L){var A=Me.registerController.getRegister("/");if(A.setText(g),g instanceof RegExp)return g;var T=Po(g),M,z;if(!T.length)M=g;else{M=g.substring(0,T[0]);var q=g.substring(T[0]);z=q.indexOf("i")!=-1}if(!M)return null;ue("pcre")||(M=qr(M)),L&&(b=/^[^A-Z]*$/.test(M));var V=new RegExp(M,b||z?"im":"m");return V}function nn(g){typeof g=="string"&&(g=document.createElement(g));for(var b,L=1;L<arguments.length;L++)if(b=arguments[L])if(typeof b!="object"&&(b=document.createTextNode(b)),b.nodeType)g.appendChild(b);else for(var A in b)Object.prototype.hasOwnProperty.call(b,A)&&(A[0]==="$"?g.style[A.slice(1)]=b[A]:g.setAttribute(A,b[A]));return g}function Yt(g,b){var L=nn("div",{$color:"red",$whiteSpace:"pre",class:"cm-vim-message"},b);g.openNotification?g.openNotification(L,{bottom:!0,duration:5e3}):alert(L.innerText)}function Es(g,b){return nn(document.createDocumentFragment(),nn("span",{$fontFamily:"monospace",$whiteSpace:"pre"},g,nn("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),b&&nn("span",{$color:"#888"},b))}function Ct(g,b){var L=Es(b.prefix,b.desc);if(g.openDialog)g.openDialog(L,b.onClose,{onKeyDown:b.onKeyDown,onKeyUp:b.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:b.value});else{var A="";typeof b.prefix!="string"&&b.prefix&&(A+=b.prefix.textContent),b.desc&&(A+=" "+b.desc),b.onClose(prompt(A,""))}}function Hr(g,b){if(g instanceof RegExp&&b instanceof RegExp){for(var L=["global","multiline","ignoreCase","source"],A=0;A<L.length;A++){var T=L[A];if(g[T]!==b[T])return!1}return!0}return!1}function ar(g,b,L,A){if(b){var T=ni(g),M=mi(b,!!L,!!A);if(M)return Jr(g,M),Hr(M,T.getQuery())||T.setQuery(M),M}}function ko(g){if(g.source.charAt(0)=="^")var b=!0;return{token:function(L){if(b&&!L.sol()){L.skipToEnd();return}var A=L.match(g,!1);if(A)return A[0].length==0?(L.next(),"searching"):!L.sol()&&(L.backUp(1),!g.exec(L.next()+A[0]))?(L.next(),null):(L.match(g),"searching");for(;!L.eol()&&(L.next(),!L.match(g,!1)););},query:g}}var Dr=0;function Jr(g,b){clearTimeout(Dr),Dr=setTimeout(function(){if(g.state.vim){var L=ni(g),A=L.getOverlay();(!A||b!=A.query)&&(A&&g.removeOverlay(A),A=ko(b),g.addOverlay(A),g.showMatchesOnScrollbar&&(L.getScrollbarAnnotate()&&L.getScrollbarAnnotate().clear(),L.setScrollbarAnnotate(g.showMatchesOnScrollbar(b))),L.setOverlay(A))}},50)}function u(g,b,L,A){return A===void 0&&(A=1),g.operation(function(){for(var T=g.getCursor(),M=g.getSearchCursor(L,T),z=0;z<A;z++){var q=M.find(b);if(z==0&&q&&At(M.from(),T)){var V=b?M.from():M.to();q=M.find(b),q&&!q[0]&&At(M.from(),V)&&g.getLine(V.line).length==V.ch&&(q=M.find(b))}if(!q&&(M=g.getSearchCursor(L,b?new e(g.lastLine()):new e(g.firstLine(),0)),!M.find(b)))return}return M.from()})}function f(g,b,L,A,T){return A===void 0&&(A=1),g.operation(function(){var M=g.getCursor(),z=g.getSearchCursor(L,M),q=z.find(!b);!T.visualMode&&q&&At(z.from(),M)&&z.find(!b);for(var V=0;V<A;V++)if(q=z.find(b),!q&&(z=g.getSearchCursor(L,b?new e(g.lastLine()):new e(g.firstLine(),0)),!z.find(b)))return;return[z.from(),z.to()]})}function O(g){var b=ni(g);g.removeOverlay(ni(g).getOverlay()),b.setOverlay(null),b.getScrollbarAnnotate()&&(b.getScrollbarAnnotate().clear(),b.setScrollbarAnnotate(null))}function S(g,b,L){return typeof g!="number"&&(g=g.line),b instanceof Array?De(g,b):typeof L=="number"?g>=b&&g<=L:g==b}function E(g){var b=g.getScrollInfo(),L=6,A=10,T=g.coordsChar({left:0,top:L+b.top},"local"),M=b.clientHeight-A+b.top,z=g.coordsChar({left:0,top:M},"local");return{top:T.line,bottom:z.line}}function R(g,b,L){if(L=="'"||L=="`")return Me.jumpList.find(g,-1)||new e(0,0);if(L==".")return Z(g);var A=b.marks[L];return A&&A.find()}function Z(g){for(var b=g.doc.history.done,L=b.length;L--;)if(b[L].changes)return kt(b[L].changes[0].to)}var te=function(){this.buildCommandMap_()};te.prototype={processCommand:function(g,b,L){var A=this;g.operation(function(){g.curOp.isVimOp=!0,A._processCommand(g,b,L)})},_processCommand:function(g,b,L){var A=g.state.vim,T=Me.registerController.getRegister(":"),M=T.toString(),z=new i.StringStream(b);T.setText(b);var q=L||{};q.input=b;try{this.parseInput_(g,z,q)}catch(Ce){throw Yt(g,Ce.toString()),Ce}A.visualMode&&en(g);var V,se;if(!q.commandName)q.line!==void 0&&(se="move");else if(V=this.matchCommand_(q.commandName),V){if(se=V.name,V.excludeFromCommandHistory&&T.setText(M),this.parseCommandArgs_(z,q,V),V.type=="exToKey"){for(var ne=0;ne<V.toKeys.length;ne++)tt.handleKey(g,V.toKeys[ne],"mapping");return}else if(V.type=="exToEx"){this.processCommand(g,V.toInput);return}}if(!se){Yt(g,'Not an editor command ":'+b+'"');return}try{ie[se](g,q),(!V||!V.possiblyAsync)&&q.callback&&q.callback()}catch(Ce){throw Yt(g,Ce.toString()),Ce}},parseInput_:function(g,b,L){var T,M;b.eatWhile(":"),b.eat("%")?(L.line=g.firstLine(),L.lineEnd=g.lastLine()):(L.line=this.parseLineSpec_(g,b),L.line!==void 0&&b.eat(",")&&(L.lineEnd=this.parseLineSpec_(g,b))),L.line==null?g.state.vim.visualMode?(L.selectionLine=(T=R(g,g.state.vim,"<"))==null?void 0:T.line,L.selectionLineEnd=(M=R(g,g.state.vim,">"))==null?void 0:M.line):L.selectionLine=g.getCursor().line:(L.selectionLine=L.line,L.selectionLineEnd=L.lineEnd);var A=b.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return A?L.commandName=A[1]:L.commandName=b.match(/.*/)[0],L},parseLineSpec_:function(g,b){var L=b.match(/^(\d+)/);if(L)return parseInt(L[1],10)-1;switch(b.next()){case".":return this.parseLineSpecOffset_(b,g.getCursor().line);case"$":return this.parseLineSpecOffset_(b,g.lastLine());case"'":var A=b.next(),T=R(g,g.state.vim,A);if(!T)throw new Error("Mark not set");return this.parseLineSpecOffset_(b,T.line);case"-":case"+":return b.backUp(1),this.parseLineSpecOffset_(b,g.getCursor().line);default:b.backUp(1);return}},parseLineSpecOffset_:function(g,b){var L=g.match(/^([+-])?(\d+)/);if(L){var A=parseInt(L[2],10);L[1]=="-"?b-=A:b+=A}return b},parseCommandArgs_:function(g,b,L){if(!g.eol()){b.argString=g.match(/.*/)[0];var A=L.argDelimiter||/\s+/,T=gn(b.argString).split(A);T.length&&T[0]&&(b.args=T)}},matchCommand_:function(g){for(var b=g.length;b>0;b--){var L=g.substring(0,b);if(this.commandMap_[L]){var A=this.commandMap_[L];if(A.name.indexOf(g)===0)return A}}return null},buildCommandMap_:function(){this.commandMap_={};for(var g=0;g<s.length;g++){var b=s[g],L=b.shortName||b.name;this.commandMap_[L]=b}},map:function(g,b,L){if(g!=":"&&g.charAt(0)==":"){if(L)throw Error("Mode not supported for ex mappings");var A=g.substring(1);b!=":"&&b.charAt(0)==":"?this.commandMap_[A]={name:A,type:"exToEx",toInput:b.substring(1),user:!0}:this.commandMap_[A]={name:A,type:"exToKey",toKeys:b,user:!0}}else if(b!=":"&&b.charAt(0)==":"){var T={keys:g,type:"keyToEx",exArgs:{input:b.substring(1)}};L&&(T.context=L),r.unshift(T)}else{var T={keys:g,type:"keyToKey",toKeys:b};L&&(T.context=L),r.unshift(T)}},unmap:function(g,b){if(g!=":"&&g.charAt(0)==":"){if(b)throw Error("Mode not supported for ex mappings");var L=g.substring(1);if(this.commandMap_[L]&&this.commandMap_[L].user)return delete this.commandMap_[L],!0}else for(var A=g,T=0;T<r.length;T++)if(A==r[T].keys&&r[T].context===b)return r.splice(T,1),!0}};var ie={colorscheme:function(g,b){if(!b.args||b.args.length<1){Yt(g,g.getOption("theme"));return}g.setOption("theme",b.args[0])},map:function(g,b,L){var A=b.args;if(!A||A.length<2){g&&Yt(g,"Invalid mapping: "+b.input);return}pe.map(A[0],A[1],L)},imap:function(g,b){this.map(g,b,"insert")},nmap:function(g,b){this.map(g,b,"normal")},vmap:function(g,b){this.map(g,b,"visual")},unmap:function(g,b,L){var A=b.args;(!A||A.length<1||!pe.unmap(A[0],L))&&g&&Yt(g,"No such mapping: "+b.input)},move:function(g,b){J.processCommand(g,g.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:b.line+1})},set:function(g,b){var L=b.args,A=b.setCfg||{};if(!L||L.length<1){g&&Yt(g,"Invalid mapping: "+b.input);return}var T=L[0].split("="),M=T[0],z=T[1],q=!1;if(M.charAt(M.length-1)=="?"){if(z)throw Error("Trailing characters: "+b.argString);M=M.substring(0,M.length-1),q=!0}z===void 0&&M.substring(0,2)=="no"&&(M=M.substring(2),z=!1);var V=Xe[M]&&Xe[M].type=="boolean";if(V&&z==null&&(z=!0),!V&&z===void 0||q){var se=ue(M,g,A);se instanceof Error?Yt(g,se.message):se===!0||se===!1?Yt(g," "+(se?"":"no")+M):Yt(g,"  "+M+"="+se)}else{var ne=$e(M,z,g,A);ne instanceof Error&&Yt(g,ne.message)}},setlocal:function(g,b){b.setCfg={scope:"local"},this.set(g,b)},setglobal:function(g,b){b.setCfg={scope:"global"},this.set(g,b)},registers:function(g,b){var L=b.args,A=Me.registerController.registers,T=`----------Registers----------

`;if(L){var M;L=L.join("");for(var q=0;q<L.length;q++)if(M=L.charAt(q),!!Me.registerController.isValidRegister(M)){var V=A[M]||new yt;T+='"'+M+"    "+V.toString()+`
`}}else for(var M in A){var z=A[M].toString();z.length&&(T+='"'+M+"    "+z+`
`)}Yt(g,T)},sort:function(g,b){var L,A,T,M,z;function q(){if(b.argString){var Zt=new i.StringStream(b.argString);if(Zt.eat("!")&&(L=!0),Zt.eol())return;if(!Zt.eatSpace())return"Invalid arguments";var Et=Zt.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!Et&&!Zt.eol())return"Invalid arguments";if(Et[1]){A=Et[1].indexOf("i")!=-1,T=Et[1].indexOf("u")!=-1;var vi=Et[1].indexOf("d")!=-1||Et[1].indexOf("n")!=-1&&1,$i=Et[1].indexOf("x")!=-1&&1,ci=Et[1].indexOf("o")!=-1&&1;if(vi+$i+ci>1)return"Invalid arguments";M=vi&&"decimal"||$i&&"hex"||ci&&"octal"}Et[2]&&(z=new RegExp(Et[2].substr(1,Et[2].length-2),A?"i":""))}}var V=q();if(V){Yt(g,V+": "+b.argString);return}var se=b.line||g.firstLine(),ne=b.lineEnd||b.line||g.lastLine();if(se==ne)return;var Ce=new e(se,0),Te=new e(ne,Wt(g,ne)),ve=g.getRange(Ce,Te).split(`
`),xe=z||(M=="decimal"?/(-?)([\d]+)/:M=="hex"?/(-?)(?:0x)?([0-9a-f]+)/i:M=="octal"?/([0-7]+)/:null),Ve=M=="decimal"?10:M=="hex"?16:M=="octal"?8:null,Ge=[],ft=[];if(M||z)for(var xt=0;xt<ve.length;xt++){var pt=z?ve[xt].match(z):null;pt&&pt[0]!=""?Ge.push(pt):!z&&xe.exec(ve[xt])?Ge.push(ve[xt]):ft.push(ve[xt])}else ft=ve;function Mt(Zt,Et){if(L){var vi;vi=Zt,Zt=Et,Et=vi}A&&(Zt=Zt.toLowerCase(),Et=Et.toLowerCase());var $i=M&&xe.exec(Zt),ci=M&&xe.exec(Et);return $i?($i=parseInt(($i[1]+$i[2]).toLowerCase(),Ve),ci=parseInt((ci[1]+ci[2]).toLowerCase(),Ve),$i-ci):Zt<Et?-1:1}function hi(Zt,Et){if(L){var vi;vi=Zt,Zt=Et,Et=vi}return A&&(Zt[0]=Zt[0].toLowerCase(),Et[0]=Et[0].toLowerCase()),Zt[0]<Et[0]?-1:1}if(Ge.sort(z?hi:Mt),z)for(var xt=0;xt<Ge.length;xt++)Ge[xt]=Ge[xt].input;else M||ft.sort(Mt);if(ve=L?Ge.concat(ft):ft.concat(Ge),T){var ti=ve,gi;ve=[];for(var xt=0;xt<ti.length;xt++)ti[xt]!=gi&&ve.push(ti[xt]),gi=ti[xt]}g.replaceRange(ve.join(`
`),Ce,Te)},vglobal:function(g,b){this.global(g,b)},global:function(g,b){var L=b.argString;if(!L){Yt(g,"Regular Expression missing from global");return}var A=b.commandName[0]==="v";L[0]==="!"&&b.commandName[0]==="g"&&(A=!0,L=L.slice(1));var T=b.line!==void 0?b.line:g.firstLine(),M=b.lineEnd||b.line||g.lastLine(),z=ks(L),q=L,V;if(z.length&&(q=z[0],V=z.slice(1,z.length).join("/")),q)try{ar(g,q,!0,!0)}catch{Yt(g,"Invalid regex: "+q);return}for(var se=ni(g).getQuery(),ne=[],Ce=T;Ce<=M;Ce++){var Te=g.getLine(Ce),ve=se.test(Te);ve!==A&&ne.push(V?g.getLineHandle(Ce):Te)}if(!V){Yt(g,ne.join(`
`));return}var xe=0,Ve=function(){if(xe<ne.length){var Ge=ne[xe++],ft=g.getLineNumber(Ge);if(ft==null){Ve();return}var xt=ft+1+V;pe.processCommand(g,xt,{callback:Ve})}else g.releaseLineHandles&&g.releaseLineHandles()};Ve()},substitute:function(g,b){if(!g.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var L=b.argString,A=L?As(L,L[0]):[],T,M="",z,q,V,se=!1,ne=!1;if(A.length)T=A[0],ue("pcre")&&T!==""&&(T=new RegExp(T).source),M=A[1],M!==void 0&&(ue("pcre")?M=Lo(M.replace(/([^\\])&/g,"$1$$&")):M=xr(M),Me.lastSubstituteReplacePart=M),z=A[2]?A[2].split(" "):[];else if(L&&L.length){Yt(g,"Substitutions should be of the form :s/pattern/replace/");return}if(z&&(q=z[0],V=parseInt(z[1]),q&&(q.indexOf("c")!=-1&&(se=!0),q.indexOf("g")!=-1&&(ne=!0),ue("pcre")?T=T+"/"+q:T=T.replace(/\//g,"\\/")+"/"+q)),T)try{ar(g,T,!0,!0)}catch{Yt(g,"Invalid regex: "+T);return}if(M=M||Me.lastSubstituteReplacePart,M===void 0){Yt(g,"No previous substitute regular expression");return}var Ce=ni(g),Te=Ce.getQuery(),ve=b.line!==void 0?b.line:g.getCursor().line,xe=b.lineEnd||ve;ve==g.firstLine()&&xe==g.lastLine()&&(xe=1/0),V&&(ve=xe,xe=ve+V-1);var Ve=Ne(g,new e(ve,0)),Ge=g.getSearchCursor(Te,Ve);Re(g,se,ne,ve,xe,Ge,Te,M,b.callback)},redo:i.commands.redo,undo:i.commands.undo,write:function(g){i.commands.save?i.commands.save(g):g.save&&g.save()},nohlsearch:function(g){O(g)},yank:function(g){var b=kt(g.getCursor()),L=b.line,A=g.getLine(L);Me.registerController.pushText("0","yank",A,!0,!0)},delete:function(g,b){var L=b.selectionLine,A=isNaN(b.selectionLineEnd)?L:b.selectionLineEnd;Be.delete(g,{linewise:!0},[{anchor:new e(L,0),head:new e(A+1,0)}])},join:function(g,b){var L=b.selectionLine,A=isNaN(b.selectionLineEnd)?L:b.selectionLineEnd;g.setCursor(new e(L,0)),Ze.joinLines(g,{repeat:A-L},g.state.vim)},delmarks:function(g,b){if(!b.argString||!gn(b.argString)){Yt(g,"Argument required");return}for(var L=g.state.vim,A=new i.StringStream(gn(b.argString));!A.eol();){A.eatSpace();var T=A.pos;if(!A.match(/[a-zA-Z]/,!1)){Yt(g,"Invalid argument: "+b.argString.substring(T));return}var M=A.next();if(A.match("-",!0)){if(!A.match(/[a-zA-Z]/,!1)){Yt(g,"Invalid argument: "+b.argString.substring(T));return}var z=M,q=A.next();if(fe(z)&&fe(q)||B(z)&&B(q)){var V=z.charCodeAt(0),se=q.charCodeAt(0);if(V>=se){Yt(g,"Invalid argument: "+b.argString.substring(T));return}for(var ne=0;ne<=se-V;ne++){var Ce=String.fromCharCode(V+ne);delete L.marks[Ce]}}else{Yt(g,"Invalid argument: "+z+"-");return}}else delete L.marks[M]}}},pe=new te;function Re(g,b,L,A,T,M,z,q,V){g.state.vim.exMode=!0;var se=!1,ne,Ce,Te;function ve(){g.operation(function(){for(;!se;)xe(),Ge();ft()})}function xe(){var pt=g.getRange(M.from(),M.to()),Mt=pt.replace(z,q),hi=M.to().line;M.replace(Mt),Ce=M.to().line,T+=Ce-hi,Te=Ce<hi}function Ve(){var pt=ne&&kt(M.to()),Mt=M.findNext();return Mt&&!Mt[0]&&pt&&At(M.from(),pt)&&(Mt=M.findNext()),Mt}function Ge(){for(;Ve()&&S(M.from(),A,T);)if(!(!L&&M.from().line==Ce&&!Te)){g.scrollIntoView(M.from(),30),g.setSelection(M.from(),M.to()),ne=M.from(),se=!1;return}se=!0}function ft(pt){if(pt&&pt(),g.focus(),ne){g.setCursor(ne);var Mt=g.state.vim;Mt.exMode=!1,Mt.lastHPos=Mt.lastHSPos=ne.ch}V&&V()}function xt(pt,Mt,hi){i.e_stop(pt);var ti=i.keyName(pt);switch(ti){case"Y":xe(),Ge();break;case"N":Ge();break;case"A":var gi=V;V=void 0,g.operation(ve),V=gi;break;case"L":xe();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":ft(hi);break}return se&&ft(hi),!0}if(Ge(),se){Yt(g,"No matches for "+z.source);return}if(!b){ve(),V&&V();return}Ct(g,{prefix:nn("span","replace with ",nn("strong",q)," (y/n/a/q/l)"),onKeyDown:xt})}i.keyMap.vim={attach:c,detach:h,call:p};function _e(g,b){var L=g.state.vim,A=Me.macroModeState,T=Me.registerController.getRegister("."),M=A.isPlaying,z=A.lastInsertModeChanges;M||(g.off("change",Bi),i.off(g.getInputField(),"keydown",Tn)),!M&&L.insertModeRepeat>1&&(Ia(g,L,L.insertModeRepeat-1,!0),L.lastEditInputState.repeatOverride=L.insertModeRepeat),delete L.insertModeRepeat,L.insertMode=!1,b||g.setCursor(g.getCursor().line,g.getCursor().ch-1),g.setOption("keyMap","vim"),g.setOption("disableInput",!0),g.toggleOverwrite(!1),T.setText(z.changes.join("")),i.signal(g,"vim-mode-change",{mode:"normal"}),A.isRecording&&Rt(A)}function qe(g){r.unshift(g)}function dt(g,b,L,A,T){var M={keys:g,type:b};M[b]=L,M[b+"Args"]=A;for(var z in T)M[z]=T[z];qe(M)}ge("insertModeEscKeysTimeout",200,"number"),i.keyMap["vim-insert"]={fallthrough:["default"],attach:c,detach:h,call:p},i.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:c,detach:h};function St(g,b,L,A){var T=Me.registerController.getRegister(A);if(A==":"){T.keyBuffer[0]&&pe.processCommand(g,T.keyBuffer[0]),L.isPlaying=!1;return}var M=T.keyBuffer,z=0;L.isPlaying=!0,L.replaySearchQueries=T.searchQueries.slice(0);for(var q=0;q<M.length;q++)for(var V=M[q],se,ne;V;)if(se=/<\w+-.+?>|<\w+>|./.exec(V),ne=se[0],V=V.substring(se.index+ne.length),tt.handleKey(g,ne,"macro"),b.insertMode){var Ce=T.insertModeChanges[z++].changes;Me.macroModeState.lastInsertModeChanges.changes=Ce,Fa(g,Ce,1),_e(g)}L.isPlaying=!1}function wt(g,b){if(!g.isPlaying){var L=g.latestRegister,A=Me.registerController.getRegister(L);A&&A.pushText(b)}}function Rt(g){if(!g.isPlaying){var b=g.latestRegister,L=Me.registerController.getRegister(b);L&&L.pushInsertModeChanges&&L.pushInsertModeChanges(g.lastInsertModeChanges)}}function Pi(g,b){if(!g.isPlaying){var L=g.latestRegister,A=Me.registerController.getRegister(L);A&&A.pushSearchQuery&&A.pushSearchQuery(b)}}function Bi(g,b){var L=Me.macroModeState,A=L.lastInsertModeChanges;if(!L.isPlaying)for(;b;){if(A.expectCursorActivityForChange=!0,A.ignoreCount>1)A.ignoreCount--;else if(b.origin=="+input"||b.origin=="paste"||b.origin===void 0){var T=g.listSelections().length;T>1&&(A.ignoreCount=T);var M=b.text.join(`
`);A.maybeReset&&(A.changes=[],A.maybeReset=!1),M&&(g.state.overwrite&&!/\n/.test(M)?A.changes.push([M]):A.changes.push(M))}b=b.next}}function _n(g){var b=g.state.vim;if(b.insertMode){var L=Me.macroModeState;if(L.isPlaying)return;var A=L.lastInsertModeChanges;A.expectCursorActivityForChange?A.expectCursorActivityForChange=!1:A.maybeReset=!0}else g.curOp.isVimOp||_s(g,b)}function _s(g,b){var L=g.getCursor("anchor"),A=g.getCursor("head");if(b.visualMode&&!g.somethingSelected()?en(g,!1):!b.visualMode&&!b.insertMode&&g.somethingSelected()&&(b.visualMode=!0,b.visualLine=!1,i.signal(g,"vim-mode-change",{mode:"visual"})),b.visualMode){var T=Qt(A,L)?0:-1,M=Qt(A,L)?-1:0;A=mt(A,0,T),L=mt(L,0,M),b.sel={anchor:L,head:A},hn(g,b,"<",ei(A,L)),hn(g,b,">",Vt(A,L))}else b.insertMode||(b.lastHPos=g.getCursor().ch)}function rn(g){this.keyName=g}function Tn(g){var b=Me.macroModeState,L=b.lastInsertModeChanges,A=i.keyName(g);if(!A)return;function T(){return L.maybeReset&&(L.changes=[],L.maybeReset=!1),L.changes.push(new rn(A)),!0}(A.indexOf("Delete")!=-1||A.indexOf("Backspace")!=-1)&&i.lookupKey(A,"vim-insert",T)}function Ia(g,b,L,A){var T=Me.macroModeState;T.isPlaying=!0;var M=!!b.lastEditActionCommand,z=b.inputState;function q(){M?J.processAction(g,b,b.lastEditActionCommand):J.evalInput(g,b)}function V(ne){if(T.lastInsertModeChanges.changes.length>0){ne=b.lastEditActionCommand?ne:1;var Ce=T.lastInsertModeChanges;Fa(g,Ce.changes,ne)}}if(b.inputState=b.lastEditInputState,M&&b.lastEditActionCommand.interlaceInsertRepeat)for(var se=0;se<L;se++)q(),V(1);else A||q(),V(L);b.inputState=z,b.insertMode&&!A&&_e(g),T.isPlaying=!1}function Fa(g,b,L){function A(Ce){return typeof Ce=="string"?i.commands[Ce](g):Ce(g),!0}var T=g.getCursor("head"),M=Me.macroModeState.lastInsertModeChanges.visualBlock;M&&(be(g,T,M+1),L=g.listSelections().length,g.setCursor(T));for(var z=0;z<L;z++){M&&g.setCursor(mt(T,z,0));for(var q=0;q<b.length;q++){var V=b[q];if(V instanceof rn)i.lookupKey(V.keyName,"vim-insert",A);else if(typeof V=="string")g.replaceSelection(V);else{var se=g.getCursor(),ne=mt(se,0,V[0].length);g.replaceRange(V[0],se,ne),g.setCursor(ne)}}}M&&g.setCursor(mt(T,0,1))}function Ao(g){var b=new g.constructor;return Object.keys(g).forEach(function(L){var A=g[L];Array.isArray(A)?A=A.slice():A&&typeof A=="object"&&A.constructor!=Object&&(A=Ao(A)),b[L]=A}),g.sel&&(b.sel={head:g.sel.head&&kt(g.sel.head),anchor:g.sel.anchor&&kt(g.sel.anchor)}),b}function Qa(g,b,L){var A=!1,T=tt.maybeInitVimState_(g),M=T.visualBlock||T.wasInVisualBlock,z=g.isInMultiSelectMode();if(T.wasInVisualBlock&&!z?T.wasInVisualBlock=!1:z&&T.visualBlock&&(T.wasInVisualBlock=!0),b=="<Esc>"&&!T.insertMode&&!T.visualMode&&z&&T.status=="<Esc>")it(g);else if(M||!z||g.inVirtualSelectionMode)A=tt.handleKey(g,b,L);else{var q=Ao(T),V=T.inputState.changeQueueList||[];g.operation(function(){g.curOp.isVimOp=!0;var se=0;g.forEachSelection(function(){g.state.vim.inputState.changeQueue=V[se];var ne=g.getCursor("head"),Ce=g.getCursor("anchor"),Te=Qt(ne,Ce)?0:-1,ve=Qt(ne,Ce)?-1:0;ne=mt(ne,0,Te),Ce=mt(Ce,0,ve),g.state.vim.sel.head=ne,g.state.vim.sel.anchor=Ce,A=tt.handleKey(g,b,L),g.virtualSelection&&(V[se]=g.state.vim.inputState.changeQueue,g.state.vim=Ao(q)),se++}),g.curOp.cursorActivity&&!A&&(g.curOp.cursorActivity=!1),g.state.vim=T,T.inputState.changeQueueList=V,T.inputState.changeQueue=null},!0)}return A&&!T.visualMode&&!T.insert&&T.visualMode!=g.somethingSelected()&&_s(g,T),A}return vt(),tt}function qi(i,e){var t=e.ch,n=e.line+1;n<1&&(n=1,t=0),n>i.lines&&(n=i.lines,t=Number.MAX_VALUE);var r=i.line(n);return Math.min(r.from+Math.max(0,t),r.to)}function yn(i,e){let t=i.lineAt(e);return{line:t.number-1,ch:e-t.from}}class du{constructor(e,t){this.line=e,this.ch=t}}function by(i,e,t){if(i.addEventListener)i.addEventListener(e,t,!1);else{var n=i._handlers||(i._handlers={});n[e]=(n[e]||[]).concat(t)}}function Sy(i,e,t){if(i.removeEventListener)i.removeEventListener(e,t,!1);else{var n=i._handlers,r=n&&n[e];if(r){var o=r.indexOf(t);o>-1&&(n[e]=r.slice(0,o).concat(r.slice(o+1)))}}}function wy(i,e,...t){var n,r=(n=i._handlers)===null||n===void 0?void 0:n[e];if(r)for(var o=0;o<r.length;++o)r[o](...t)}function Tp(i,...e){if(i)for(var t=0;t<i.length;++t)i[t](...e)}var B3={Return:"CR",Backspace:"BS",Delete:"Del",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"CR"," ":"Space"},Py={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1,AltGraph:1,Dead:1,Unidentified:1};let Bc;try{Bc=new RegExp("[\\w\\p{Alphabetic}\\p{Number}_]","u")}catch{Bc=/[\w]/}function Vo(i,e){var t=i.cm6,n="input.type.compose";if(i.curOp&&(i.curOp.lastChange||(n="input.type.compose.start")),e.annotations)try{e.annotations.some(function(r){r.value=="input"&&(r.value=n)})}catch(r){console.error(r)}else e.userEvent=n;return t.dispatch(e)}function Ip(i,e){var t;i.curOp&&(i.curOp.$changeStart=void 0),(e?mf:gf)(i.cm6);let n=(t=i.curOp)===null||t===void 0?void 0:t.$changeStart;n!=null&&i.cm6.dispatch({selection:{anchor:n}})}class Ft{constructor(e){this.state={},this.marks=Object.create(null),this.$mid=0,this.options={},this._handlers={},this.doc={history:{done:[{changes:[{cm:this,get to(){return this.cm.posFromIndex(this.cm.$lastChangeEndOffset)}}]}]}},this.$lastChangeEndOffset=0,this.virtualSelection=null,this.cm6=e,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this)}openDialog(e,t,n){return N3(this,e,t,n)}openNotification(e,t){return $3(this,e,t)}on(e,t){by(this,e,t)}off(e,t){Sy(this,e,t)}signal(e,t,n){wy(this,e,t,n)}indexFromPos(e){return qi(this.cm6.state.doc,e)}posFromIndex(e){return yn(this.cm6.state.doc,e)}foldCode(e){let t=this.cm6,n=t.state.selection.ranges,r=this.cm6.state.doc,o=qi(r,e),s=Ee.create([Ee.range(o,o)],0).ranges;t.state.selection.ranges=s,fv(t),t.state.selection.ranges=n}firstLine(){return 0}lastLine(){return this.cm6.state.doc.lines-1}lineCount(){return this.cm6.state.doc.lines}setCursor(e,t){typeof e=="object"&&(t=e.ch,e=e.line);var n=qi(this.cm6.state.doc,{line:e,ch:t});this.cm6.dispatch({selection:{anchor:n}},{scrollIntoView:!this.curOp}),this.curOp&&!this.curOp.isVimOp&&this.onBeforeEndOperation()}getCursor(e){var t=this.cm6.state.selection.main,n=e=="head"||!e?t.head:e=="anchor"?t.anchor:e=="start"?t.from:e=="end"?t.to:null;if(n==null)throw new Error("Invalid cursor type");return this.posFromIndex(n)}listSelections(){var e=this.cm6.state.doc;return this.cm6.state.selection.ranges.map(t=>({anchor:yn(e,t.anchor),head:yn(e,t.head)}))}setSelections(e,t){var n=this.cm6.state.doc,r=e.map(o=>Ee.range(qi(n,o.anchor),qi(n,o.head)));this.cm6.dispatch({selection:Ee.create(r,t)})}setSelection(e,t,n){var r=this.cm6.state.doc,o=[Ee.range(qi(r,e),qi(r,t))];this.cm6.dispatch({selection:Ee.create(o,0)}),n&&n.origin=="*mouse"&&this.onBeforeEndOperation()}getLine(e){var t=this.cm6.state.doc;return e<0||e>=t.lines?"":this.cm6.state.doc.line(e+1).text}getLineHandle(e){return this.$lineHandleChanges||(this.$lineHandleChanges=[]),{row:e,index:this.indexFromPos(new du(e,0))}}getLineNumber(e){var t=this.$lineHandleChanges;if(!t)return null;for(var n=e.index,r=0;r<t.length;r++)if(n=t[r].changes.mapPos(n,1,Ci.TrackAfter),n==null)return null;var o=this.posFromIndex(n);return o.ch==0?o.line:null}releaseLineHandles(){this.$lineHandleChanges=void 0}getRange(e,t){var n=this.cm6.state.doc;return this.cm6.state.sliceDoc(qi(n,e),qi(n,t))}replaceRange(e,t,n){n||(n=t);var r=this.cm6.state.doc,o=qi(r,t),s=qi(r,n);Vo(this,{changes:{from:o,to:s,insert:e}})}replaceSelection(e){Vo(this,this.cm6.state.replaceSelection(e))}replaceSelections(e){var t=this.cm6.state.selection.ranges,n=t.map((r,o)=>({from:r.from,to:r.to,insert:e[o]||""}));Vo(this,{changes:n})}getSelection(){return this.getSelections().join(`
`)}getSelections(){var e=this.cm6;return e.state.selection.ranges.map(t=>e.state.sliceDoc(t.from,t.to))}somethingSelected(){return this.cm6.state.selection.ranges.some(e=>!e.empty)}getInputField(){return this.cm6.contentDOM}clipPos(e){var t=this.cm6.state.doc,n=e.ch,r=e.line+1;r<1&&(r=1,n=0),r>t.lines&&(r=t.lines,n=Number.MAX_VALUE);var o=t.line(r);return n=Math.min(Math.max(0,n),o.to-o.from),new du(r-1,n)}getValue(){return this.cm6.state.doc.toString()}setValue(e){var t=this.cm6;return t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e},selection:Ee.range(0,0)})}focus(){return this.cm6.focus()}blur(){return this.cm6.contentDOM.blur()}defaultTextHeight(){return this.cm6.defaultLineHeight}findMatchingBracket(e){var t=this.cm6.state,n=qi(t.doc,e),r=Cn(t,n+1,-1);return r&&r.end?{to:yn(t.doc,r.end.from)}:(r=Cn(t,n,1),r&&r.end?{to:yn(t.doc,r.end.from)}:{to:void 0})}scanForBracket(e,t,n,r){return W3(this,e,t,n,r)}indentLine(e,t){t?this.indentMore():this.indentLess()}indentMore(){Df(this.cm6)}indentLess(){Cf(this.cm6)}execCommand(e){e=="indentAuto"?Ft.commands.indentAuto(this):e=="goLineLeft"?Ic(this.cm6):e=="goLineRight"?(Tc(this.cm6),ww(this.cm6)):console.log(e+" is not implemented")}setBookmark(e,t){var n=t!=null&&t.insertLeft?1:-1,r=this.indexFromPos(e),o=new U3(this,r,n);return o}addOverlay({query:e}){let t=new wf({regexp:!0,search:e.source,caseSensitive:!/i/.test(e.flags)});if(t.valid){t.forVim=!0,this.cm6Query=t;let n=Wr.of(t);return this.cm6.dispatch({effects:n}),t}}removeOverlay(e){if(!this.cm6Query)return;this.cm6Query.forVim=!1;let t=Wr.of(this.cm6Query);this.cm6.dispatch({effects:t})}getSearchCursor(e,t){var n=this,r=null,o=null;t.ch==null&&(t.ch=Number.MAX_VALUE);var s=qi(n.cm6.state.doc,t),a=e.source.replace(/(\\.|{(?:\d+(?:,\d*)?|,\d+)})|[{}]/g,function(d,v){return v||"\\"+d});function l(d,v=0,D=d.length){return new Sf(d,a,{ignoreCase:e.ignoreCase},v,D)}function h(d){var v=n.cm6.state.doc;if(d>v.length)return null;let D=l(v,d).next();return D.done?null:D.value}var c=1e4;function p(d,v){var D=n.cm6.state.doc;for(let m=1;;m++){let y=Math.max(d,v-m*c),x=l(D,y,v),w=null;for(;!x.next().done;)w=x.value;if(w&&(y==d||w.from>y+10))return w;if(y==d)return null}}return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(d){var v=n.cm6.state.doc;if(d){let D=r?r.from==r.to?r.to-1:r.from:s;r=p(0,D)}else{let D=r?r.from==r.to?r.to+1:r.to:s;r=h(D)}return o=r&&{from:yn(v,r.from),to:yn(v,r.to),match:r.match},r&&r.match},from:function(){return o==null?void 0:o.from},to:function(){return o==null?void 0:o.to},replace:function(d){r&&(Vo(n,{changes:{from:r.from,to:r.to,insert:d}}),r.to=r.from+d.length,o&&(o.to=yn(n.cm6.state.doc,r.to)))}}}findPosV(e,t,n,r){let{cm6:o}=this;const s=o.state.doc;let a=n=="page"?o.dom.clientHeight:0;const l=qi(s,e);let h=Ee.range(l,l,r),c=Math.round(Math.abs(t));for(let d=0;d<c;d++)n=="page"?h=o.moveVertically(h,t>0,a):n=="line"&&(h=o.moveVertically(h,t>0));let p=yn(s,h.head);return(t<0&&h.head==0&&r!=0&&e.line==0&&e.ch!=0||t>0&&h.head==s.length&&p.ch!=r&&e.line==p.line)&&(p.hitSide=!0),p}charCoords(e,t){var n=this.cm6.contentDOM.getBoundingClientRect(),r=qi(this.cm6.state.doc,e),o=this.cm6.coordsAtPos(r),s=-n.top;return{left:((o==null?void 0:o.left)||0)-n.left,top:((o==null?void 0:o.top)||0)+s,bottom:((o==null?void 0:o.bottom)||0)+s}}coordsChar(e,t){var n=this.cm6.contentDOM.getBoundingClientRect(),r=this.cm6.posAtCoords({x:e.left+n.left,y:e.top+n.top})||0;return yn(this.cm6.state.doc,r)}getScrollInfo(){var e=this.cm6.scrollDOM;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight,width:e.scrollWidth,clientHeight:e.clientHeight,clientWidth:e.clientWidth}}scrollTo(e,t){e!=null&&(this.cm6.scrollDOM.scrollLeft=e),t!=null&&(this.cm6.scrollDOM.scrollTop=t)}scrollIntoView(e,t){if(e){var n=this.indexFromPos(e);this.cm6.dispatch({effects:nt.scrollIntoView(n)})}else this.cm6.dispatch({scrollIntoView:!0,userEvent:"scroll"})}getWrapperElement(){return this.cm6.dom}getMode(){return{name:this.getOption("mode")}}setSize(e,t){this.cm6.dom.style.width=e+4+"px",this.cm6.dom.style.height=t+"px",this.refresh()}refresh(){this.cm6.measure()}destroy(){this.removeOverlay()}onChange(e){this.$lineHandleChanges&&this.$lineHandleChanges.push(e);for(let n in this.marks)this.marks[n].update(e.changes);this.virtualSelection&&(this.virtualSelection.ranges=this.virtualSelection.ranges.map(n=>n.map(e.changes)));var t=this.curOp=this.curOp||{};e.changes.iterChanges((n,r,o,s,a)=>{(t.$changeStart==null||t.$changeStart>o)&&(t.$changeStart=o),this.$lastChangeEndOffset=s;var l={text:a.toJSON()};t.lastChange?t.lastChange.next=t.lastChange=l:t.lastChange=t.change=l},!0),t.changeHandlers||(t.changeHandlers=this._handlers.change&&this._handlers.change.slice())}onSelectionChange(){var e=this.curOp=this.curOp||{};e.cursorActivityHandlers||(e.cursorActivityHandlers=this._handlers.cursorActivity&&this._handlers.cursorActivity.slice()),this.curOp.cursorActivity=!0}operation(e){this.curOp||(this.curOp={$d:0}),this.curOp.$d++;try{var t=e()}finally{this.curOp&&(this.curOp.$d--,this.curOp.$d||this.onBeforeEndOperation())}return t}onBeforeEndOperation(){var e=this.curOp,t=!1;e&&(e.change&&Tp(e.changeHandlers,this,e.change),e&&e.cursorActivity&&(Tp(e.cursorActivityHandlers,this,null),e.isVimOp&&(t=!0)),this.curOp=null),t&&this.scrollIntoView()}moveH(e,t){if(t=="char"){var n=this.getCursor();this.setCursor(n.line,n.ch+e)}}setOption(e,t){switch(e){case"keyMap":this.state.keyMap=t;break}}getOption(e){switch(e){case"firstLineNumber":return 1;case"tabSize":return this.cm6.state.tabSize||4;case"readonly":return this.cm6.state.readOnly;case"indentWithTabs":return this.cm6.state.facet(xs)=="	";case"indentUnit":return this.cm6.state.facet(xs).length||2;case"keyMap":return this.state.keyMap||"vim"}}toggleOverwrite(e){this.state.overwrite=e}getTokenTypeAt(e){var t,n=this.indexFromPos(e),r=uf(this.cm6.state,n),o=r==null?void 0:r.resolve(n),s=((t=o==null?void 0:o.type)===null||t===void 0?void 0:t.name)||"";return/comment/i.test(s)?"comment":/string/i.test(s)?"string":""}overWriteSelection(e){var t=this.cm6.state.doc,n=this.cm6.state.selection,r=n.ranges.map(o=>{if(o.empty){var s=o.to<t.length?t.sliceString(o.from,o.to+1):"";if(s&&!/\n/.test(s))return Ee.range(o.from,o.to+1)}return o});this.cm6.dispatch({selection:Ee.create(r,n.mainIndex)}),this.replaceSelection(e)}isInMultiSelectMode(){return this.cm6.state.selection.ranges.length>1}virtualSelectionMode(){return!!this.virtualSelection}forEachSelection(e){var t=this.cm6.state.selection;this.virtualSelection=Ee.create(t.ranges,t.mainIndex);for(var n=0;n<this.virtualSelection.ranges.length;n++){var r=this.virtualSelection.ranges[n];r&&(this.cm6.dispatch({selection:Ee.create([r])}),e(),this.virtualSelection.ranges[n]=this.cm6.state.selection.ranges[0])}this.cm6.dispatch({selection:this.virtualSelection}),this.virtualSelection=null}}Ft.isMac=typeof navigator<"u"&&/Mac/.test(navigator.platform);Ft.Pos=du;Ft.StringStream=tw;Ft.commands={cursorCharLeft:function(i){yf(i.cm6)},redo:function(i){Ip(i,!1)},undo:function(i){Ip(i,!0)},newlineAndIndent:function(i){zv({state:i.cm6.state,dispatch:e=>Vo(i,e)})},indentAuto:function(i){Gv(i.cm6)}};Ft.defineOption=function(i,e,t){};Ft.isWordChar=function(i){return Bc.test(i)};Ft.keys={Backspace:function(i){eu(i.cm6)},Delete:function(i){Of(i.cm6)}};Ft.keyMap={};Ft.addClass=function(){};Ft.rmClass=function(){};Ft.e_preventDefault=function(i){i.preventDefault()};Ft.e_stop=function(i){var e,t;(e=i==null?void 0:i.stopPropagation)===null||e===void 0||e.call(i),(t=i==null?void 0:i.preventDefault)===null||t===void 0||t.call(i)};Ft.keyName=function(i){var e=i.key;if(!Py[e]){e=="Escape"&&(e="Esc"),e==" "&&(e="Space"),e.length>1&&(e=e.replace(/Numpad|Arrow/,"")),e.length==1&&(e=e.toUpperCase());var t="";return i.ctrlKey&&(t+="Ctrl-"),i.altKey&&(t+="Alt-"),(t||e.length>1)&&i.shiftKey&&(t+="Shift-"),t+=e,t}};Ft.vimKey=function(e){var t=e.key;if(!Py[t]){t.length>1&&t[0]=="n"&&(t=t.replace("Numpad","")),t=B3[t]||t;var n="";return e.ctrlKey&&(n+="C-"),e.altKey&&(n+="A-"),e.metaKey&&(n+="M-"),Ft.isMac&&e.altKey&&!e.metaKey&&!e.ctrlKey&&(n=n.slice(2)),(n||t.length>1)&&e.shiftKey&&(n+="S-"),n+=t,n.length>1&&(n="<"+n+">"),n}};Ft.lookupKey=function(e,t,n){var r=Ft.keys[e];r&&n(r)};Ft.on=by;Ft.off=Sy;Ft.signal=wy;Ft.findMatchingTag=Y3;Ft.findEnclosingTag=Z3;function Ly(i,e,t){var n=document.createElement("div");return n.appendChild(e),n}function ky(i,e){i.state.currentNotificationClose&&i.state.currentNotificationClose(),i.state.currentNotificationClose=e}function $3(i,e,t){ky(i,a);var n=Ly(i,e,t&&t.bottom),r=!1,o,s=t&&typeof t.duration<"u"?t.duration:5e3;function a(){r||(r=!0,clearTimeout(o),n.remove(),Ey(i,n))}return n.onclick=function(l){l.preventDefault(),a()},Ay(i,n),s&&(o=setTimeout(a,s)),a}function Ay(i,e){var t=i.state.dialog;i.state.dialog=e,e&&t!==e&&(t&&t.contains(document.activeElement)&&i.focus(),t&&t.parentElement?t.parentElement.replaceChild(e,t):t&&t.remove(),Ft.signal(i,"dialog"))}function Ey(i,e){i.state.dialog==e&&(i.state.dialog=null,Ft.signal(i,"dialog"))}function N3(i,e,t,n){n||(n={}),ky(i,void 0);var r=Ly(i,e,n.bottom),o=!1;Ay(i,r);function s(l){if(typeof l=="string")a.value=l;else{if(o)return;o=!0,Ey(i,r),i.state.dialog||i.focus(),n.onClose&&n.onClose(r)}}var a=r.getElementsByTagName("input")[0];return a&&(n.value&&(a.value=n.value,n.selectValueOnOpen!==!1&&a.select()),n.onInput&&Ft.on(a,"input",function(l){n.onInput(l,a.value,s)}),n.onKeyUp&&Ft.on(a,"keyup",function(l){n.onKeyUp(l,a.value,s)}),Ft.on(a,"keydown",function(l){n&&n.onKeyDown&&n.onKeyDown(l,a.value,s)||(l.keyCode==13&&t(a.value),(l.keyCode==27||n.closeOnEnter!==!1&&l.keyCode==13)&&(a.blur(),Ft.e_stop(l),s()))}),n.closeOnBlur!==!1&&Ft.on(a,"blur",function(){setTimeout(function(){document.activeElement!==a&&s()})}),a.focus()),s}var R3={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function X3(i){return i&&i.bracketRegex||/[(){}[\]]/}function W3(i,e,t,n,r){for(var o=r&&r.maxScanLineLength||1e4,s=r&&r.maxScanLines||1e3,a=[],l=X3(r),h=t>0?Math.min(e.line+s,i.lastLine()+1):Math.max(i.firstLine()-1,e.line-s),c=e.line;c!=h;c+=t){var p=i.getLine(c);if(p){var d=t>0?0:p.length-1,v=t>0?p.length:-1;if(!(p.length>o))for(c==e.line&&(d=e.ch-(t<0?1:0));d!=v;d+=t){var D=p.charAt(d);if(l.test(D)){var m=R3[D];if(m&&m.charAt(1)==">"==t>0)a.push(D);else if(a.length)a.pop();else return{pos:new du(c,d),ch:D}}}}}return c-t==(t>0?i.lastLine():i.firstLine())?!1:null}function Y3(i,e){}function Z3(i,e){var t,n,r=i.cm6.state,o=i.indexFromPos(e);if(o<r.doc.length){var s=r.sliceDoc(o,o+1);s=="<"&&o++}for(var a=uf(r,o),l=(a==null?void 0:a.resolve(o))||null;l;){if(((t=l.firstChild)===null||t===void 0?void 0:t.type.name)=="OpenTag"&&((n=l.lastChild)===null||n===void 0?void 0:n.type.name)=="CloseTag")return{open:Fp(r.doc,l.firstChild),close:Fp(r.doc,l.lastChild)};l=l.parent}}function Fp(i,e){return{from:yn(i,e.from),to:yn(i,e.to)}}class U3{constructor(e,t,n){this.cm=e,this.id=e.$mid++,this.offset=t,this.assoc=n,e.marks[this.id]=this}clear(){delete this.cm.marks[this.id]}find(){return this.offset==null?null:this.cm.posFromIndex(this.offset)}update(e){this.offset!=null&&(this.offset=e.mapPos(this.offset,this.assoc,Ci.TrackDel))}}class z3{constructor(e,t,n,r,o,s,a,l,h,c){this.left=e,this.top=t,this.height=n,this.fontFamily=r,this.fontSize=o,this.fontWeight=s,this.color=a,this.className=l,this.letter=h,this.partial=c}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",e.style.height=this.height+"px",e.style.lineHeight=this.height+"px",e.style.fontFamily=this.fontFamily,e.style.fontSize=this.fontSize,e.style.fontWeight=this.fontWeight,e.style.color=this.partial?"transparent":this.color,e.className=this.className,e.textContent=this.letter}eq(e){return this.left==e.left&&this.top==e.top&&this.height==e.height&&this.fontFamily==e.fontFamily&&this.fontSize==e.fontSize&&this.fontWeight==e.fontWeight&&this.color==e.color&&this.className==e.className&&this.letter==e.letter}}class j3{constructor(e,t){this.view=e,this.rangePieces=[],this.cursors=[],this.cm=t,this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=1200+"ms"}update(e){(e.selectionSet||e.geometryChanged||e.viewportChanged)&&(this.view.requestMeasure(this.measureReq),this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink")}scheduleRedraw(){this.view.requestMeasure(this.measureReq)}readPos(){let{state:e}=this.view,t=[];for(let n of e.selection.ranges){let r=n==e.selection.main,o=H3(this.cm,this.view,n,r);o&&t.push(o)}return{cursors:t}}drawSel({cursors:e}){if(e.length!=this.cursors.length||e.some((t,n)=>!t.eq(this.cursors[n]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const n of e)this.cursorLayer.appendChild(n.draw())}else e.forEach((n,r)=>n.adjust(t[r]));this.cursors=e}}destroy(){this.cursorLayer.remove()}}const G3={".cm-vimMode .cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",background:"#ff9696",border:"none",whiteSpace:"pre"},"&:not(.cm-focused) .cm-fat-cursor":{background:"none",outline:"solid 1px #ff9696",color:"transparent !important"}},V3=Zr.highest(nt.theme(G3));function q3(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==ii.LTR?e.left:e.right-i.scrollDOM.clientWidth)-i.scrollDOM.scrollLeft,top:e.top-i.scrollDOM.scrollTop}}function H3(i,e,t,n){let r=t.head,o=!1,s=1,a=i.state.vim;if(a&&(!a.insertMode||i.state.overwrite)){if(o=!0,a.visualBlock&&!n)return null;t.anchor<t.head&&r--,i.state.overwrite?s=.2:a.status&&(s=.5)}if(o){let l=r<e.state.doc.length&&e.state.sliceDoc(r,r+1);l&&/[\uDC00-\uDFFF]/.test(l)&&r>1&&(r--,l=e.state.sliceDoc(r,r+1));let h=e.coordsAtPos(r,1);if(!h)return null;let c=q3(e),p=e.domAtPos(r),d=p?p.node:e.contentDOM;for(;p&&p.node instanceof HTMLElement;)d=p.node,p={node:p.node.childNodes[p.offset],offset:0};if(!(d instanceof HTMLElement)){if(!d.parentNode)return null;d=d.parentNode}let v=getComputedStyle(d);!l||l==`
`||l=="\r"?l="":/[\uD800-\uDBFF]/.test(l)&&r<e.state.doc.length-1&&(l+=e.state.sliceDoc(r+1,r+2));let D=h.bottom-h.top;return new z3(h.left-c.left,h.top-c.top+D*(1-s),D*s,v.fontFamily,v.fontSize,v.fontWeight,v.color,n?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",l,s!=1)}else return null}const Xo=M3(Ft),J3=250,K3=nt.baseTheme({".cm-vimMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"0px 10px",fontFamily:"monospace",minHeight:"1.3em"},".cm-vim-panel input":{border:"none",outline:"none",backgroundColor:"inherit"},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"}}),eL=si.fromClass(class{constructor(i){this.status="",this.query=null,this.decorations=gt.none,this.waitForCopy=!1,this.lastKeydown="",this.useNextTextInput=!1,this.view=i;const e=this.cm=new Ft(i);Xo.enterVimMode(this.cm),this.view.cm=this.cm,this.cm.state.vimPlugin=this,this.blockCursor=new j3(i,e),this.updateClass(),this.cm.on("vim-command-done",()=>{e.state.vim&&(e.state.vim.status=""),this.blockCursor.scheduleRedraw(),this.updateStatus()}),this.cm.on("vim-mode-change",t=>{e.state.vim.mode=t.mode,t.subMode&&(e.state.vim.mode+=" block"),e.state.vim.status="",this.blockCursor.scheduleRedraw(),this.updateClass(),this.updateStatus()}),this.cm.on("dialog",()=>{this.cm.state.statusbar?this.updateStatus():i.dispatch({effects:_y.of(!!this.cm.state.dialog)})}),this.dom=document.createElement("span"),this.dom.style.cssText="position: absolute; right: 10px; top: 1px",this.statusButton=document.createElement("span"),this.statusButton.onclick=t=>{Xo.handleKey(this.cm,"<Esc>","user"),this.cm.focus()},this.statusButton.style.cssText="cursor: pointer"}update(i){var e;if((i.viewportChanged||i.docChanged)&&this.query&&this.highlight(this.query),i.docChanged&&this.cm.onChange(i),i.selectionSet&&this.cm.onSelectionChange(),i.viewportChanged,this.cm.curOp&&!this.cm.curOp.isVimOp&&this.cm.onBeforeEndOperation(),i.transactions){for(let t of i.transactions)for(let n of t.effects)if(n.is(Wr))if(!((e=n.value)===null||e===void 0?void 0:e.forVim))this.highlight(null);else{let o=n.value.create();this.highlight(o)}}this.blockCursor.update(i)}updateClass(){const i=this.cm.state;!i.vim||i.vim.insertMode&&!i.overwrite?this.view.scrollDOM.classList.remove("cm-vimMode"):this.view.scrollDOM.classList.add("cm-vimMode")}updateStatus(){let i=this.cm.state.statusbar,e=this.cm.state.vim;if(!i||!e)return;let t=this.cm.state.dialog;if(t)t.parentElement!=i&&(i.textContent="",i.appendChild(t));else{i.textContent="";var n=(e.mode||"normal").toUpperCase();e.insertModeReturn&&(n+="(C-O)"),this.statusButton.textContent=`--${n}--`,i.appendChild(this.statusButton)}this.dom.textContent=e.status,i.appendChild(this.dom)}destroy(){Xo.leaveVimMode(this.cm),this.updateClass(),this.blockCursor.destroy(),delete this.view.cm}highlight(i){if(this.query=i,!i)return this.decorations=gt.none;let{view:e}=this,t=new er;for(let n=0,r=e.visibleRanges,o=r.length;n<o;n++){let{from:s,to:a}=r[n];for(;n<o-1&&a>r[n+1].from-2*J3;)a=r[++n].to;i.highlight(e.state,s,a,(l,h)=>{t.add(l,h,iL)})}return this.decorations=t.finish()}handleKey(i,e){const t=Ft.vimKey(i),n=this.cm;if(!t)return;let r=n.state.vim;if(!r)return;if(t=="<Esc>"&&!r.insertMode&&!r.visualMode&&this.query){const a=r.searchState_;a&&(n.removeOverlay(a.getOverlay()),a.setOverlay(null))}if(t==="<C-c>"&&!Ft.isMac&&n.somethingSelected())return this.waitForCopy=!0,!0;r.status=(r.status||"")+t;let s=Xo.multiSelectHandleKey(n,t,"user");return r=n.state.vim,!s&&r.insertMode&&n.state.overwrite&&(i.key&&i.key.length==1&&!/\n/.test(i.key)?(s=!0,n.overWriteSelection(i.key)):i.key=="Backspace"&&(s=!0,Ft.commands.cursorCharLeft(n))),s&&(Ft.signal(this.cm,"vim-keypress",t),i.preventDefault(),i.stopPropagation(),this.blockCursor.scheduleRedraw()),this.updateStatus(),!!s}},{eventHandlers:{copy:function(i,e){this.waitForCopy&&(this.waitForCopy=!1,Promise.resolve().then(()=>{var t=this.cm,n=t.state.vim;n&&(n.insertMode?t.setSelection(t.getCursor(),t.getCursor()):t.operation(()=>{t.curOp&&(t.curOp.isVimOp=!0),Xo.handleKey(t,"<Esc>","user")}))}))},keypress:function(i,e){this.lastKeydown=="Dead"&&this.handleKey(i,e)},keydown:function(i,e){this.lastKeydown=i.key,this.lastKeydown=="Unidentified"||this.lastKeydown=="Process"||this.lastKeydown=="Dead"?this.useNextTextInput=!0:(this.useNextTextInput=!1,this.handleKey(i,e))}},provide:()=>[nt.inputHandler.of((i,e,t,n)=>{var r,o,s=aL(i);if(!s)return!1;var a=(r=s.state)===null||r===void 0?void 0:r.vim,l=s.state.vimPlugin;return a&&!a.insertMode&&!(!((o=s.curOp)===null||o===void 0)&&o.isVimOp)?(n.length==1&&l.useNextTextInput&&l.handleKey({key:n,preventDefault:()=>{},stopPropagation:()=>{}}),tL(i),!0):!1})],decorations:i=>i.decorations});function tL(i){var e=i.scrollDOM.parentElement;if(e){var t=i.scrollDOM.nextSibling,n=window.getSelection(),r=n&&{anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset};i.scrollDOM.remove(),e.insertBefore(i.scrollDOM,t);try{r&&n&&(n.setPosition(r.anchorNode,r.anchorOffset),r.focusNode&&n.extend(r.focusNode,r.focusOffset))}catch(o){console.error(o)}i.focus(),i.contentDOM.dispatchEvent(new CustomEvent("compositionend"))}}const iL=gt.mark({class:"cm-searchMatch"}),_y=bt.define(),nL=Si.define({create:()=>!1,update(i,e){for(let t of e.effects)t.is(_y)&&(i=t.value);return i},provide:i=>Os.from(i,e=>e?rL:null)});function rL(i){let e=document.createElement("div");e.className="cm-vim-panel";let t=i.cm;return t.state.dialog&&e.appendChild(t.state.dialog),{top:!1,dom:e}}function sL(i){let e=document.createElement("div");e.className="cm-vim-panel";let t=i.cm;return t.state.statusbar=e,t.state.vimPlugin.updateStatus(),{dom:e}}function oL(i={}){return[K3,eL,V3,i.status?Os.of(sL):nL]}function aL(i){return i.cm||null}function Ty(i,e=!1){const t=e?oL():ka.of([sP]),n=[N2,T3(),t,xs.of("  "),Q3],r=$t.create({extensions:n}),o=new nt({state:r,parent:i});return{state:r,view:o,foldRange(){}}}const lL=["./library/connectors/XIAO_RP2040.json","./library/connectors/ESP8266_12E.json","./library/connectors/header_FTDI.json","./library/connectors/power_65mm.json","./library/connectors/ESP32_CAM.json","./library/connectors/USB_A_plug.json","./library/connectors/header_i0.json","./library/connectors/header_serial_reverse.json","./library/connectors/header_4.json","./library/connectors/header_signal.json","./library/connectors/MTA_i0.json","./library/connectors/HM11.json","./library/connectors/header_MFRC522.json","./library/connectors/header_serial_reverse_5V.json","./library/connectors/USB_mini_B.json","./library/connectors/ESC.json","./library/connectors/MTA_PS2.json","./library/connectors/header_APA.json","./library/connectors/MTA_ICP.json","./library/connectors/stereo_2_5mm.json","./library/connectors/header_VL53L1X_3415.json","./library/connectors/Molex_serial.json","./library/connectors/header_SWD_4_1.json","./library/connectors/ESP_01.json","./library/connectors/HCSR04.json","./library/connectors/header_SWD_4_05.json","./library/connectors/ESP32_WROOM.json","./library/connectors/header_serial.json","./library/connectors/header_PDI.json","./library/connectors/I2C4x1v.json","./library/connectors/header_power.json","./library/connectors/MTA_serial.json","./library/connectors/header_LSM6DS33_2736.json","./library/connectors/MTA_2.json","./library/connectors/MTA_3.json","./library/connectors/header_LCD.json","./library/connectors/screw_terminal_2.json","./library/connectors/HCSR501.json","./library/connectors/screw_terminal_i0.json","./library/connectors/header_unipolar_stepper.json","./library/connectors/screw_terminal_power.json","./library/connectors/header_nRF24L01.json","./library/connectors/header_serial_reverse_3V3.json","./library/connectors/MTA_power.json","./library/connectors/MTA_4.json","./library/connectors/RCWL0516.json","./library/connectors/ESP_WROOM_02D.json","./library/connectors/RN4871.json","./library/connectors/header_I2C.json","./library/connectors/header_SWD.json","./library/connectors/header_servo.json","./library/connectors/microSD.json","./library/connectors/header_4H.json","./library/connectors/header_UPDI.json","./library/connectors/I2C4x1i.json","./library/connectors/I2C4x1h.json","./library/connectors/header_ISP.json","./library/connectors/header_NEO_6M.json","./library/connectors/MTA_5.json","./library/connectors/header_6.json","./library/connectors/header_UPDI_reverse.json","./library/connectors/header_bus.json","./library/connectors/TFT8x1v.json","./library/connectors/header_2H.json","./library/connectors/header_ATP.json","./library/switches/button_6mm.json","./library/switches/slide_switch.json","./library/diodes_transistors_regulators_sensors/D_1206.json","./library/diodes_transistors_regulators_sensors/mic_SPM1437.json","./library/diodes_transistors_regulators_sensors/LED_1206.json","./library/diodes_transistors_regulators_sensors/NMOSFET_TO252AA.json","./library/diodes_transistors_regulators_sensors/regulator_SOT223.json","./library/diodes_transistors_regulators_sensors/regulator_SOT23.json","./library/diodes_transistors_regulators_sensors/VL53L1X.json","./library/diodes_transistors_regulators_sensors/H_bridge_SM8.json","./library/diodes_transistors_regulators_sensors/SPG08P4HM4H.json","./library/diodes_transistors_regulators_sensors/Hall_SOT23.json","./library/diodes_transistors_regulators_sensors/VEML6040.json","./library/diodes_transistors_regulators_sensors/phototransistor_1206.json","./library/diodes_transistors_regulators_sensors/LED_RGB.json","./library/diodes_transistors_regulators_sensors/accel_MXD6235M.json","./library/diodes_transistors_regulators_sensors/ADXL343.json","./library/diodes_transistors_regulators_sensors/mic_SPU0414HR5H.json","./library/diodes_transistors_regulators_sensors/D_SOD_123.json","./library/diodes_transistors_regulators_sensors/LED_3014_1100.json","./library/diodes_transistors_regulators_sensors/A4953_SOICN.json","./library/diodes_transistors_regulators_sensors/NMOSFET_SOT23.json","./library/diodes_transistors_regulators_sensors/phototransistor_PLCC2.json","./library/diodes_transistors_regulators_sensors/PMOSFET_SOT23.json","./library/diodes_transistors_regulators_sensors/DRV8428_HTSSOP.json","./library/diodes_transistors_regulators_sensors/CMM4030D261I2STR.json","./library/crystals_and_resonators/XTAL_CSM_7.json","./library/crystals_and_resonators/XTAL_NX5032GA.json","./library/crystals_and_resonators/XTAL_EFOBM.json","./library/discretes/R_0402.json","./library/discretes/ST4EB.json","./library/discretes/C_1206.json","./library/discretes/R_1206.json","./library/discretes/choke.json","./library/discretes/L_1210.json","./library/discretes/C_FND.json","./library/ICs/CBA.json","./library/ICs/SAMD21E.json","./library/ICs/AVRDB28.json","./library/ICs/FT230XS.json","./library/ICs/ATtiny1614.json","./library/ICs/fab.json","./library/ICs/ATtiny44_SOICN.json","./library/ICs/ATxmegaE5_TQFP.json","./library/ICs/op_amp_SOICN.json","./library/ICs/ATtiny45_SOIC.json","./library/ICs/ATmega88_TQFP.json","./library/ICs/SAMD11D.json","./library/ICs/TRC102.json","./library/ICs/ATtiny412.json","./library/ICs/ATmega644_TQFP.json","./library/ICs/op_amp_SOT23_5.json","./library/ICs/SAMD11C.json","./library/ICs/ATtiny3216.json"];function uL(){const i=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;i[e]=t}return i}function hL(i){let e=-1;$h||($h=uL());for(let t=0;t<i.length;t++)e=$h[(e^i[t])&255]^e>>>8;return e^-1}let $h;const $c="image/png",Nc="image/jpeg",cL="AAlwSFlz",fL="AAAJcEhZ",dL="AAAACXBI",Iy="p".charCodeAt(0),Fy="H".charCodeAt(0),Qy="Y".charCodeAt(0),My="s".charCodeAt(0);function pL(i,e){const t=i.split(","),n=t[0],r=t[1];let o,s,a=!1;if(n.indexOf($c)!==-1){o=$c;const D=mL(r);D>=0?(s=Math.ceil((D+28)/3)*4,a=!0):s=33/3*4}n.indexOf(Nc)!==-1&&(o=Nc,s=18/3*4);const l=r.substring(0,s),h=r.substring(s),c=atob(l),p=new Uint8Array(c.length);for(let D=0;D<p.length;D++)p[D]=c.charCodeAt(D);const d=vL(p,e,o,a),v=btoa(String.fromCharCode(...d));return[n,",",v,h].join("")}function mL(i){let e=i.indexOf(cL);return e===-1&&(e=i.indexOf(fL)),e===-1&&(e=i.indexOf(dL)),e}function gL(i){const e=i.length-1;for(let t=e;t>=4;t--)if(i[t-4]===9&&i[t-3]===Iy&&i[t-2]===Fy&&i[t-1]===Qy&&i[t]===My)return t-3}function vL(i,e,t,n){if(t===Nc)return i[13]=1,i[14]=e>>8,i[15]=e&255,i[16]=e>>8,i[17]=e&255,i;if(t===$c){const r=new Uint8Array(13);e*=39.3701,r[0]=Iy,r[1]=Fy,r[2]=Qy,r[3]=My,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const o=hL(r),s=new Uint8Array(4);if(s[0]=o>>>24,s[1]=o>>>16,s[2]=o>>>8,s[3]=o&255,n){const a=gL(i);return i.set(r,a),i.set(s,a+13),i}else{const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const l=new Uint8Array(54);return l.set(i,0),l.set(a,33),l.set(r,37),l.set(s,50),l}}}function yL(i){const e=By(i),t=document.createElement("a");t.href=e,t.download=`${i.name===""?"anon":i.name}.svg`,document.body.appendChild(t),t.click(),document.body.removeChild(t)}function By(i){const e=new XMLSerializer,t=document.querySelector("svg").cloneNode(!0),n=t.querySelector(".shapes"),r=t.querySelector(".paths"),o=t.querySelector(".background");t.innerHTML="",t.append(o),t.append(n),t.append(r);const s=i.limits.x[1]-i.limits.x[0],a=i.limits.y[1]-i.limits.y[0];t.setAttribute("transform",`scale(1, -1) translate(0, ${-(i.limits.y[0]+i.limits.y[1])})`),t.setAttribute("style",""),t.setAttribute("width",`${s*i.mm_per_unit}mm`),t.setAttribute("height",`${a*i.mm_per_unit}mm`),t.setAttribute("viewBox",`${i.limits.x[0]} ${i.limits.y[0]} ${s} ${a}`),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");const l=e.serializeToString(t);return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(l)}function $y(i,e,t=!0){t&&!e.match(/@version\s*:\s*(v[\S]+)/)&&(e=`// @version: ${ut.version}
${e}`);const n=new Blob([e],{type:"text/plain"});var r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=`${i}`,r.click(),URL.revokeObjectURL(r)}function OL(i,e=1e3){const t=By(i);var n=Cs;const r=(i.limits.x[1]-i.limits.x[0])*i.mm_per_unit,o=(i.limits.y[1]-i.limits.y[0])*i.mm_per_unit;var s=e*r/n,a=e*o/n,l=new Image;l.width=s,l.height=a,l.setAttribute("src",t),l.onload=function(){const h=document.createElement("canvas");h.width=s,h.height=a;var c=h.getContext("2d");c.clearRect(0,0,s,a),c.drawImage(l,0,0,s,a),c.getImageData(0,0,s,a),xL(h,`${i.name===""?"anon":i.name}`)}}function xL(i,e){var t=i.toDataURL("image/png");t=pL(t,1e3);var n=document.createElement("a");n.download=`${e}.png`,n.href=t,n.click()}const DL=i=>ut.componentMenu?Zi`
    <div class="component-menu">
      <div class="title">
        <b>Component Menu</b>
        <span class="close" @mousedown=${()=>{ut.componentMenu=!1,rt("RENDER")}}>close</span>
      </div>
      <div class="search-container">
        <input .value=${ut.componentSearch} placeholder="search" @input=${e=>{ut.componentSearch=e.target.value,rt("RENDER")}}/>
      </div>
      <div class="file-menu">
        ${i.map(e=>{const t=e.slice(10);return!t.toLowerCase().includes(ut.componentSearch.toLowerCase())&&ut.componentSearch!==""?"":Zi`
            <div class="menu-item" @mousedown=${async r=>{const s=await(await fetch(`components/${t}`)).text();rt("ADD_IMPORT",{text:s,name:r.target.innerText.split("/")[1].split(".")[0]})}}>${t}</div>
          `})}
      </div>
    </div>

  `:"",CL=i=>Zi`
  <div class="layers-color-picker">
    <b>Layers:</b>
    ${i.layers.map(e=>{const{name:t,visible:n,color:r}=e,a=(()=>i.codemirror.view.state.doc.toString())().slice(i.layersStaticInfo.from,i.layersStaticInfo.to),l=()=>{const y=Bn.exports.parse(a,{range:!0}),x=Ny(y,{type:"Identifier",name:"layerColors"}).getParent().value.range,w=x[0]+i.layersStaticInfo.from,_=x[1]+i.layersStaticInfo.from;i.codemirror.view.dispatch({changes:{from:w,to:_,insert:bL(i.layers)}}),rt("RUN")},h=y=>(parseInt(y,16)/255).toFixed(2),c=r.slice(0,-2),p=h(r.slice(-2)),d=y=>{let x=Math.floor(Number(y.target.value)*255).toString(16);e.color=`${c}${x}`,l()},v=y=>{let x=r.slice(-2);e.color=y.target.value+x,l()},D=y=>{e.visible=y.target.checked,l()},m=n?Zi`
          <span class="layer-color">
            <input @input=${v} class="color-input" type="color" style="opacity: ${p};" value=${c}/>
            <span class="opacity-input">
              ${p}
              <input @input=${d} type="range" min="0" max="1" step="0.01" value=${p}/>
            </span>
          </span>
        `:"";return Zi`
          <div class="layer-item">
            <span class="layer-name">
              <input @input=${D} type="checkbox" .checked=${n}/>
              <span>${t}</span>
            </span>
            ${m}
          </div>
        `})}
  </div>

`;function bL(i){let e=[];return i.forEach(t=>{const{visible:n,name:r,color:o}=t,s=n?` "${r}": "${o}",`:`/* "${r}": "${o}", */`;e.push(s)}),`{
`+e.join(`
`)+`
}`}function Ny(i,e,t=null){if(typeof i!="object"||i===null)return null;Object.defineProperty(i,"getParent",{value:function(){return t},enumerable:!1,writable:!1});let n=!0;for(const r in e)if(i[r]!==e[r]){n=!1;break}if(n)return i;for(const r in i){const o=Ny(i[r],e,i);if(o)return o}return null}const SL=({svgView:i},e)=>{const t=o=>Ei`
    <path
      class="path-footprint"
      d="${hr([o])}"
      fill-rule="nonzero"
      />
  `,[n,r]=e;return Zi`
    <style>
      .path-footprint-dragged {
        fill: black;
      }
    </style>

    <svg 
      style="position: absolute; left: ${n}; top: ${r}; transform: translate(-50%, -50%) scale(1, -1);"
      width="50px"
      height="50px">
      ${i.map(t)}
    </svg>

  `},Qp=(i,e)=>wL(i,e)<1e-6,wL=([i,e],[t,n])=>Math.sqrt((t-i)**2+(n-e)**2);function dl(i,e=[0,0],t=[0,0]){if(typeof i[0]!="string")return i;if(i[0]==="chamfer"){const[n,r,o]=i;return o}else if(i[0]==="fillet"){const[n,r,o]=i;return o}else if(i[0]==="cubic"){const[n,r,o,s]=i;return o}else if(i[0]==="relative"){const[n,r,o]=i;return[e[0]+r,e[1]+o]}else if(i[0]==="turnForward"){const[n,r,o]=i,s=r/180*Math.PI,a=LL(e,t)+s;return[e[0]+Math.cos(a)*o,e[1]+Math.sin(a)*o]}else return null}function PL(i){if(typeof i[0]!="string")return i;if(i[0]==="chamfer"){const[e,t,n]=i;return n}else if(i[0]==="fillet"){const[e,t,n]=i;return n}else if(i[0]==="cubic"){const[e,t,n,r]=i;return r}else return null}function LL(i,e){const t=i[0]-e[0],n=i[1]-e[1];return Math.atan2(n,t)}function Ry(i){const e=[],t=[];if(i.length===0)return{cubics:e,filletsAndChamfers:t};let n=dl(i[0]),r=PL(i[0]);r===null&&(r=n);const o=()=>e.length>0?kL(e.at(-1),32).slice(-2).reverse():[n,n];for(let s=1;s<i.length;s++){const a=i[s];if(typeof a[0]!="string")e.push([n,r,a,a]),n=a,r=a;else if(a[0]==="fillet"||a[0]==="chamfer"){const[l,h,c]=a,p=dl(c,...o());e.push([n,r,p,p]),n=p,r=p;const d=s===i.length-1?p:dl(i[s+1],p,n),v={lowerLimit:n,start:p,upperLimit:d,radius:h,cubicIndex:s-1,type:l};t.push(v)}else if(a[0]==="cubic"){const[l,h,c,p]=a;e.push([n,r,h,c]),n=c,r=p}else if(a[0]==="relative"||a[0]==="turnForward"){const l=dl(a,...o());e.push([n,r,l,l]),n=l,r=l}else throw console.log(a),new Error("Unknown command used in path(...)")}return{cubics:e,filletsAndChamfers:t}}const Mp=(i,e,t)=>[(1-i)*e[0]+i*t[0],(1-i)*e[1]+i*t[1]],Xy=(i,e,t,...n)=>n.length>0?[Mp(i,e,t),...Xy(i,t,...n)]:[Mp(i,e,t)],Wy=(i,e)=>e.length>1?Wy(i,Xy(i,...e)):e[0];function kL(i,e){if(Qp(i[0],i[1])&&Qp(i[2],i[3]))return[i[0],i[3]];const t=[];for(let n=0;n<=1*e;n+=1){const r=Wy(n/e,i);t.push(r)}return t}const Bp=({data:i,color:e,groupId:t=""})=>{const n=parseInt(e.slice(-2),16)/255,r=l=>Ei`
    <text 
      text-anchor="middle" 
      x=${l.translate[0]} 
      y=${-l.translate[1]+l.size*.352778}
      transform-origin=${`${l.translate[0]},${l.translate[1]}`}
      transform=${"scale(1, -1)"}
      style=${`font: ${l.size}pt sans-serif;`}
      fill=${e.slice(0,-2)}
      opacity=${n}
      >
      ${l.value}
    </text>
  `,o=({data:l,thickness:h})=>Ei`
    <path
      d=${l}
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width=${h}
      fill-rule="nonzero"
      stroke="${e.slice(0,-2)}"
      fill="none"
      stroke-opacity=${n}/>
  `,s=[],a=[];return i.forEach(l=>{if(typeof l=="string"){const h=Ei`
        <path
            d="${l}"
            fill-rule="evenodd"
            stroke-linecap="round"
            stroke-linejoin="round"
            fill="${e.slice(0,-2)}"
            fill-opacity=${n}/>
      `;s.push(h)}else l.type==="text"?a.push(r(l)):l.type==="wire"&&s.push(o(l))}),Ei`
    <g id=${t}>
      ${s}
      <g>${a}</g>
    </g>
  `},AL=({pt:i,start:e,end:t,text:n},r,o)=>Ei`
  <circle
    class="draggable-pt"
    cx=${i[0]}
    cy=${i[1]}
    r=${.01/(o*.0015)}
    data-index=${r}
    data-start=${e}
    data-end=${t}
    data-text=${n}></circle>
`,EL=({d:i,stroke:e,strokeWidth:t,fill:n,strokeLinecap:r,strokeLinejoin:o})=>Ei`
  <path 
    d=${i} 
    stroke=${e} 
    stroke-linecap=${r}
    stroke-linejoin=${o}
    stroke-width=${t} 
    fill=${n}></path>
`,_L=i=>{var p,d;(p=i.panZoomParams)==null||p.corners();const e=(d=i.panZoomParams)==null?void 0:d.scale(),t=[],n=[];for(const v of i.layers){const{visible:D,color:m,name:y}=v;D&&n.push(y)}n.some(v=>v.includes("interior")),i.pcb&&i.pcb.components.forEach(v=>{v.drills.forEach(D=>{t.push(Ei`
        <circle
          fill="white"
          cx=${D.pos[0]}
          cy=${D.pos[1]}
          r=${D.diameter/2}/>
        `)})});const r=Ei`
    <g class="drills">${t}</g>
  `,o=i.shapes.filter(v=>["componentLabels","padLabels"].includes(v.groupId)),a=[...i.shapes.filter(v=>!["componentLabels","padLabels"].includes(v.groupId)).map(Bp),r,...o.map(Bp)],l=i.paths.map(EL),h=i.pts.map((v,D)=>AL(v,D,e)),c=[];return i.selectablePaths.forEach(([v,D],m)=>{if(i.selectedPathIndex>=0)return;const y={class:["selectable-path",`pathStart-${v}`,`pathIndex-${m}`]},x=Yy(Ry(D).cubics,y);c.push(x)}),Ei`
    <svg id="viewer" style="width: 100%; height: 100%; transform: scale(1, -1);">
      ${i.panZoomParams&&i.gridSize>0&&i.grid?TL(i.panZoomParams.x(),i.panZoomParams.y(),i.panZoomParams.scale(),i.panZoomParams.corners(),i.gridSize):""}

      <g class="transform-group">
          <rect
            class="limits"
            width="${i.limits.x[1]-i.limits.x[0]}"
            height="${i.limits.y[1]-i.limits.y[0]}"
            stroke="black" fill="transparent" stroke-width="1"
            vector-effect="non-scaling-stroke"
            transform="translate(${i.limits.x[0]}, ${i.limits.y[0]})"/>

          <rect 
            class="background"
            x=${i.limits.x[0]} 
            y=${i.limits.y[0]} 
            fill=${i.background} 
            width=${i.limits.x[1]-i.limits.x[0]} 
            height=${i.limits.y[1]-i.limits.y[0]}>
            </rect>
            ${i.selectBox.start&&i.selectBox.end?Ei`
              <path
                class="selectBox"
                d="
                  M ${i.selectBox.start.x} ${i.selectBox.start.y}
                  L ${i.selectBox.end.x} ${i.selectBox.start.y}
                  L ${i.selectBox.end.x} ${i.selectBox.end.y}
                  L ${i.selectBox.start.x} ${i.selectBox.end.y}
                "
              />`:""}

          <g class="shapes">${a}</g>
          <g class="paths">${l}</g>
          <g class="selectable-paths">${c}</g>
          ${IL(i,e)}

          ${i.panZoomParams&&i.gridSize>0&&i.grid,""}


        <g class="pts">${i.viewHandles?h:""}</g>
      </g>

    </svg>
  `};function TL(i,e,t,n,r){return n.lt.x,n.rt.x,n.lb.y,n.lt.y,Ei`
    <defs>
      <pattern
        id="grid"
        x="${i}"
        y="${e}"
        width="${t*r}"
        height="${t*r}"
        patternUnits="userSpaceOnUse">
        <line stroke="black" stroke-width=".2" x1="0" y1="0" x2="${t*r}" y2="0"></line>
        <line stroke="black" stroke-width=".2" x1="0" y1="0" x2="0" y2="${t*r}"></line>
      </pattern>
    </defs>
    <rect
      width="100%"
      height="100%"
      fill="url(#grid)">
    </rect>
    <line 
      stroke="black" 
      stroke-width=".6" 
      x1=${t*n.lt.x+i} 
      y1=${e} 
      x2=${t*n.rt.x+i} 
      y2=${e}>
      </line>
    <line 
      stroke="black" 
      stroke-width=".6" 
      x1=${i} 
      y1=${t*n.lb.y+e} 
      x2=${i} 
      y2=${t*n.lt.y+e}>
      </line>
  `}function IL(i,e){const t=i.selectedPath;return i.selectedPathIndex<0||!t||!t.args?"":[Yy(Ry(t.args).cubics),QL(i),FL(t.args,e)]}function Yy(i,e={}){e={...{stroke:"plum","stroke-width":"5","vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round",fill:"none",class:[]},...e};let n="";i.forEach((r,o)=>{const[s,a,l,h]=r,c=o===0?`M ${s[0]} ${s[1]}`:"";n+=`${c} C ${a[0]} ${a[1]}, ${l[0]} ${l[1]}, ${h[0]} ${h[1]} `});for(const r in e)e[r];return Ei`
    <path
      d=${n}
      class=${e.class.join(" ")}
      stroke=${e.stroke}
      stroke-width=${e["stroke-width"]}
      vector-effect=${e["vector-effect"]}
      stroke-linecap=${e["stroke-linecap"]}
      stroke-linejoin=${e["stroke-linejoin"]}
      fill=${e.fill}
      />
  `}function Zy(i){return typeof i[0]=="number"?"point":i[0]}function Wo(i,e,t={}){return Ei`
    <circle
      cx=${i[0]}
      cy=${i[1]}
      class="path-pt"
      r=${.01/(e*.0015)}
      display=${t.display??"inherit"}
      fill=${t.fill??"black"}
      stroke-width="0.15"
      vector-effect="non-scaling-stroke"
      stroke="black"
      data-index=${t.index}
      data-type=${t.type}
    >`}function FL(i,e){let t=[];const n="inherit",r="inherit";return i.forEach((o,s)=>{const a=`${s}`,l=Zy(o);if(l==="point"&&t.push(Wo(o,e,{display:n,index:a,type:"point"})),l==="fillet"||l==="chamfer"){const[h,c,p]=o;t.push(Wo(p,e,{display:n,index:a,type:"filletOrChamfer"}))}if(l==="cubic"){const[h,c,p,d]=o,v=`
        stroke: red;
        stroke-width: 7;
        vector-effect: non-scaling-stroke;
        stroke-dasharray: 7;
        opacity: .7;
      `;s!==0&&t.push(Ei`
        <path display=${r} style="${v}" d="M ${c.join(" ")} L ${p.join(" ")}">
      `),s!==i.length-1&&t.push(Ei`
        <path display=${r} style="${v}" d="M ${d.join(" ")} L ${p.join(" ")}">
      `),s!==0&&t.push(Wo(c,e,{display:r,fill:"blue",index:`${a},1`,type:"cubic"})),t.push(Wo(p,e,{display:n,index:`${a},2`,fill:"purple",type:"cubic"})),s!==i.length-1&&t.push(Wo(d,e,{display:r,fill:"blue",index:`${a},3`,type:"cubic"}))}}),t}function QL(i){if(!i.selectedPath||!i.selectedPath.args||i.selectedPath.args.length<1)return"";const e=i.selectedPath.args.at(-1);let t={cubic:e[2],fillet:e[2],chamfer:e[2]}[Zy(e)];return t||(t=e),((r,o)=>{if(!r||!o)return"";const s=`M ${r[0]} ${r[1]} L ${o[0]} ${o[1]}`;return Ei`
      <path
        d=${s}
        stroke="plum"
        stroke-width="5"
        stroke-dasharray="10"
        vector-effect="non-scaling-stroke"
        stroke-linecap="round"
        stroke-linejoin="round"
        fill="none"
        >
     </path>
    `})(t,i.preview)}const ML=({name:i,svgView:e},t)=>{const n=r=>Ei`
    <path
      class="path-footprint"
      data-index=${t}
      data-key=${i}
      d="${hr([r])}"
      fill-rule="nonzero"
      />
  `;return Zi`
    <style>
      .path-footprint {
        fill: black;
      }

      .footprint-svg:hover .path-footprint {
        fill: orange;
      }
    </style>
    <div class="footprint-item">
      <svg
        data-index=${t}
        data-key=${i}
        class="footprint-svg footprint-${t}"
        width="50px"
        height="50px"
        transform="scale(1, -1)">
        ${e.map(n)}
      </svg>
      <span style="padding-left: 5px;">${i}</span>
    </div>
  `};function Uy(){ut.selectedPathIndex=-1,ut.selectedPath=null,rt("RENDER")}const BL=""+new URL("logo-4f3ace64.svg",import.meta.url).href,$L={slider:(i,e,t)=>Zi`
    <style>
      .range-input-name {
        padding-right: 5px;
      }

      .range-input-slider {
        padding-right: 5px;
      }
    </style>
    <div class="range-input">
      <span class="range-input-name">${i.name}:</span>
      <input 
        type="range" 
        class="range-input-slider"
        min=${i.min}
        max=${i.max}
        step=${i.step}
        value=${i.value}
        @input=${n=>{const r=n.target.value;t.codemirror.view.dispatch({changes:{from:e.from,to:e.to,insert:r}}),rt("RUN",{flatten:!1})}}>
      </input>
      <span>${i.value}</span>
    </div>`};function Hi(i){return i*Cs}function os(i,e){const t=i.name===""?"Untitled":i.name,n=i.downloadGerberOptions.protelFilenames;let r=t;switch(e){case"F.Cu":r+="-F_Cu"+(n?".GTL":".gbr");break;case"B.Cu":r+="-B_Cu"+(n?".GBL":".gbr");break;case"F.Mask":r+="-F_Mask"+(n?".GTS":".gbr");break;case"B.Mask":r+="-B_Mask"+(n?".GBS":".gbr");break;case"F.Silkscreen":r+="-F_Silkscreen"+(n?".GTO":".gbr");break;case"B.Silkscreen":r+="-B_Silkscreen"+(n?".GBO":".gbr");break;case"Outline":r+="-Edge_Cuts"+(n?".GM1":".gbr");break;case"Drills":r+="-Drill"+(n?".XLN":".xln");break}return r}var Ht,io,cs,no,ro,vu,zy,yu,jy,Ar,Us,so,_l;class Ns{constructor(){qt(this,vu);qt(this,yu);qt(this,Ar);qt(this,so);qt(this,Ht,"");qt(this,io,10);qt(this,cs,[]);qt(this,no,"");qt(this,ro,"")}static format(e){let t=e.toFixed(6);for(t=t.replace(".","");t.startsWith("0");)t=t.substr(1,t.length);return t===""&&(t="0"),t}setFileFunction(e){Dt(this,no,e)}setFilePolarity(e){Dt(this,ro,e)}plotWires(e){let t=[];Dt(this,Ht,lt(this,Ht)+oi(this,Ar,Us).call(this,"Begin wires")),e.map(n=>{if(n.type!=="wire")return;const r=Hi(n.thickness).toFixed(3);if(!lt(this,cs).includes(r)){lt(this,cs).push(r);const o=oi(this,so,_l).call(this);Dt(this,Ht,lt(this,Ht)+("%ADD"+o.toString()+"C,"+r.toString()+`*%
`))}n.gerberAperture=lt(this,cs).indexOf(r)+(lt(this,io)-lt(this,cs).length),t.push(n)}),t.map(n=>{Dt(this,Ht,lt(this,Ht)+("D"+n.gerberAperture.toString()+`*
`)),n.shape.flat().forEach((r,o)=>{const s=this.constructor.format(Hi(r[0])),a=this.constructor.format(Hi(r[1]));Dt(this,Ht,lt(this,Ht)+("X"+s+"Y"+a+"D0"+(o===0?2:1)+`*
`))})})}plotPads(e,t=0){const n=t?t*2:0,r=oi(this,so,_l).call(this);Dt(this,Ht,lt(this,Ht)+oi(this,Ar,Us).call(this,"Begin pads")),Dt(this,Ht,lt(this,Ht)+("%ADD"+r.toString()+"C,"+n.toFixed(3)+`*%
`)),Dt(this,Ht,lt(this,Ht)+("D"+r.toString()+`*
`)),Dt(this,Ht,lt(this,Ht)+`G01*
`),e.map(o=>{o.type!=="wire"&&(Dt(this,Ht,lt(this,Ht)+`G36*
`),o.flat().forEach((s,a)=>{const l=this.constructor.format(Hi(s[0])),h=this.constructor.format(Hi(s[1]));Dt(this,Ht,lt(this,Ht)+("X"+l+"Y"+h+"D0"+(a===0?2:1)+`*
`))}),Dt(this,Ht,lt(this,Ht)+`G37*
`))}),t!==0&&(Dt(this,Ht,lt(this,Ht)+oi(this,Ar,Us).call(this,"Begin pad offsets")),e.map(o=>{o.type!=="wire"&&o.flat().forEach((s,a)=>{const l=this.constructor.format(Hi(s[0])),h=this.constructor.format(Hi(s[1]));Dt(this,Ht,lt(this,Ht)+("X"+l+"Y"+h+"D0"+(a===0?2:1)+`*
`))})}))}plotSilkscreen(e){console.log(e),Dt(this,Ht,lt(this,Ht)+oi(this,Ar,Us).call(this,"Begin silkscreen")),e.map(t=>{if(t.type!=="text")return;const n=t.value,r=Hi(t.size);t.translate,t.rotation;const o="Courier";Dt(this,Ht,lt(this,Ht)+("%TA.FlashText,"+n.replace(/\n/g,"\\n")+",C,R,"+o+","+r+`,*%
`))})}plotOutline(e){const n=oi(this,so,_l).call(this);Dt(this,Ht,lt(this,Ht)+("%ADD"+n.toString()+"C,"+.1 .toFixed(3)+`*%
`)),Dt(this,Ht,lt(this,Ht)+("D"+n.toString()+`*
`)),Dt(this,Ht,lt(this,Ht)+`G01*
`),Dt(this,Ht,lt(this,Ht)+oi(this,Ar,Us).call(this,"Begin outline")),e.map(r=>{r.forEach((o,s)=>{if(o.forEach((a,l)=>{const h=this.constructor.format(Hi(a[0])),c=this.constructor.format(Hi(a[1]));Dt(this,Ht,lt(this,Ht)+("X"+h+"Y"+c+"D0"+(l===0?2:1)+`*
`))}),o[0][0]!==o[o.length-1][0]||o[0][1]!==o[o.length-1][1]){const a=this.constructor.format(Hi(o[0][0])),l=this.constructor.format(Hi(o[0][1]));Dt(this,Ht,lt(this,Ht)+("X"+a+"Y"+l+`D01*
`))}})})}toString(){let e=oi(this,vu,zy).call(this);return e+=lt(this,Ht),e+=oi(this,yu,jy).call(this),e}}Ht=new WeakMap,io=new WeakMap,cs=new WeakMap,no=new WeakMap,ro=new WeakMap,vu=new WeakSet,zy=function(){let e="";e+=`%TF.GenerationSoftware,Leo McElroy & Contributors,SvgPcb,v0.1*%
`;const t=new Date().toISOString();return e+="%TF.CreationDate,"+t+`*%
`,e+=`%TF.SameCoordinates,Original*%
`,lt(this,no)!==""&&(e+="%TF.FileFunction,"+lt(this,no)+`*%
`),lt(this,ro)!==""&&(e+="%TF.FilePolarity,"+lt(this,ro)+`*%
`),e+=`%MOMM*%
`,e+=`%FSLAX46Y46*%
`,e},yu=new WeakSet,jy=function(){return"M02*"},Ar=new WeakSet,Us=function(e){return"G04 "+e+`*
`},so=new WeakSet,_l=function(){const e=lt(this,io);return lh(this,io)._++,e};var Mn,Da,fs,Ou,Gy,xu,Vy,Du,qy;class NL{constructor(e){qt(this,Ou);qt(this,xu);qt(this,Du);qt(this,Mn,"");qt(this,Da,1);qt(this,fs,{});Dt(this,fs,e)}plotDrills(e){Dt(this,Mn,lt(this,Mn)+`; #@! TA.AperFunction,Plated,PTH,ComponentDrill
`);const t=e.components.map(r=>r.drills).flat().map(r=>{let o=r.pos,s=r.diameter;return lt(this,fs).downloadGerberOptions.excellonMetric&&(o[0]=Hi(o[0]),o[1]=Hi(o[1]),s=Hi(r.diameter)),{center:o,diameter:s}}),n={};t.forEach(({diameter:r,center:o})=>{r in n?n[r].drillPoints.push(o):(n[r]={},n[r].toolID=oi(this,Du,qy).call(this),n[r].drillPoints=[o])});for(const r in n)Dt(this,Mn,lt(this,Mn)+("T"+n[r].toolID+"C"+r+`
`));Dt(this,Mn,lt(this,Mn)+`%
`),Dt(this,Mn,lt(this,Mn)+`G90
`),Dt(this,Mn,lt(this,Mn)+`G05
`);for(const r in n)Dt(this,Mn,lt(this,Mn)+("T"+n[r].toolID+`
`)),n[r].drillPoints.forEach(o=>{Dt(this,Mn,lt(this,Mn)+("X"+o[0].toFixed(3)+"Y"+o[1].toFixed(3)+`
`))})}toString(){let e=oi(this,Ou,Gy).call(this);return e+=lt(this,Mn),e+=oi(this,xu,Vy).call(this),e}}Mn=new WeakMap,Da=new WeakMap,fs=new WeakMap,Ou=new WeakSet,Gy=function(){let e=`M48
`;const t=new Date().toISOString();return e+="; DRILL file {SvgPcb v0.1} date "+t+`
`,e+="; FORMAT={-:-/ absolute / "+(lt(this,fs).downloadGerberOptions.excellonMetric?"metric":"inch")+` / decimal}
`,e+="; #@! TF.CreationDate,"+t+`
`,e+=`; #@! TF.GenerationSoftware,SvgPcb v0.1
`,e+=`; #@! TF.FileFunction,MixedPlating,1,2
`,e+=`FMAT,2
`,lt(this,fs).downloadGerberOptions.excellonMetric?e+=`METRIC
`:e+=`INCH
`,e},xu=new WeakSet,Vy=function(){let e=`T0
`;return e+=`M30
`,e},Du=new WeakSet,qy=function(){const e=lt(this,Da);return lh(this,Da)._++,e};function RL(i){const e=i.pcb.layers,t=i.pcb;var n=new tm;let r;for(const o of i.downloadGerberOptions.layers.keys())if(o.toLowerCase().includes("interior")||o.toLowerCase().includes("edge")||o.toLowerCase().includes("cuts")||o.toLowerCase().includes("outline")||o.toLowerCase().includes("mechanical")||o.toLowerCase().includes("dimension")){r=o;break}console.log(r),i.downloadGerberOptions.layers.forEach((o,s)=>{if(!o)return;if(s=="F.Cu"){let l=new Ns;l.setFileFunction("Copper,L1,Top"),l.setFilePolarity("Positive"),l.plotPads(e["F.Cu"]),l.plotWires(e["F.Cu"]),i.downloadGerberOptions.includeOutline&&l.plotOutline(e[r]),n.file(os(i,"F.Cu"),l.toString());let h=new Ns;h.setFileFunction("Soldermask,Top"),h.setFilePolarity("Negative"),h.plotPads(e["F.Cu"],.1),i.downloadGerberOptions.includeOutline&&h.plotOutline(e[r]),n.file(os(i,"F.Mask"),h.toString())}else if(s=="B.Cu"){let l=new Ns;l.setFileFunction("Copper,L2,Bot"),l.setFilePolarity("Positive"),l.plotPads(e["B.Cu"]),l.plotWires(e["B.Cu"]),i.downloadGerberOptions.includeOutline&&l.plotOutline(e[r]),n.file(os(i,"B.Cu"),l.toString());let h=new Ns;h.setFileFunction("Soldermask,Bot"),h.setFilePolarity("Negative"),h.plotPads(e["B.Cu"],.1),i.downloadGerberOptions.includeOutline&&h.plotOutline(e[r]),n.file(os(i,"B.Mask"),h.toString())}else if(s=="F.Silkscreen"){let l=new Ns;l.setFileFunction("Legend,Top"),l.setFilePolarity("Negative"),l.plotSilkscreen(e.componentLabels),i.downloadGerberOptions.includeOutline&&l.plotOutline(e.interior),n.file(os(i,"F.Silkscreen"),l.toString())}else if(s!="B.Silkscreen"){if(s===r){let l=new Ns;l.setFileFunction("Profile,NP"),l.plotOutline(e[s]),n.file(os(i,"Outline"),l.toString())}}let a=new NL(i);a.plotDrills(t),n.file(os(i,"Drills"),a.toString())}),n.generateAsync({type:"blob"}).then(o=>{Zc.exports.saveAs(o,`${i.name===""?"Untitled":i.name}-Gerbers.zip`)})}function XL(i){const e=i.pcb.layers;i.downloadGerberOptions.layers.clear();for(const[n,r]of Object.entries(e))i.downloadGerberOptions.layers.set(n,r);const t=[];return i.downloadGerberOptions.layers.forEach((n,r)=>{t.push(r)}),t}function WL(i){i.downloadGerberOptions.layers.set("F.Cu",i.pcb.layers["F.Cu"]!==void 0),i.downloadGerberOptions.layers.set("B.Cu",i.pcb.layers["B.Cu"]!==void 0),i.downloadGerberOptions.layers.set("F.Mask",i.pcb.layers["F.Cu"]!==void 0),i.downloadGerberOptions.layers.set("B.Mask",i.pcb.layers["B.Cu"]!==void 0),i.downloadGerberOptions.layers.set("Outline",i.pcb.layers.interior!==void 0),i.downloadGerberOptions.layers.set("Drills",!0)}const YL=i=>i.downloadGerberModal?(WL(i),Zi`
    <div id="modal_download_gerber" class="modal">
    	<div class="modal-content">
    		<div class="modal-header">
    			<div class="col-75 align-left">
    				<i class="icon fa fa-arrow-circle-down"></i>
    				<h3 class="modal-title">Download Gerber Options</h3>
    			</div>
    			<div class="col-25 align-right">
    				<span 
    					class="close"
    					@click=${e=>{document.getElementById("modal_download_gerber"),i.downloadGerberModal=!1,rt("RENDER")}}><i class="fa fa-times"></i></span>
    			</div>
    		</div>
    		<div class="modal-body">
    			<div class="col-50">
    				<h4>Include Layers</h4>
    				${XL(i).map(e=>Zi`
    					<div class="modal-line">
    						<input 
    							type="checkbox"
    							id="input-${e}"
    							.checked=${i.downloadGerberOptions.layers.get(e)}
    							@change=${t=>{i.downloadGerberOptions.layers.set(e,t.target.checked)}}> 
    						<label for="input-${e}">${e}</label>
    					</div>
    					`)}
    			</div> <!-- /.col-50 -->
    			<div class="col-50">
    				<h4><label for="projectName">Project Name</label></h4>
    				<div class="modal-line">
    					<input id="projectName" 
    						type="text" 
    						.value=${i.name===""?"Untitled":i.name}
    						@input=${e=>{i.name=e.target.value}}>
    				</div>

    				<h4>Excellon Drill Units</h4>
    				<div class="modal-line">	
    					<input 
    						type="radio"
    						id="input-excellonMM"
    						name="excellonUnits"
    						.checked=${i.downloadGerberOptions.excellonMetric}
    						@change=${e=>{i.downloadGerberOptions.excellonMetric=e.target.checked}}>
    					<label for="input-excellonMM">mm</label>
    					&nbsp;
    					<input 
    						type="radio"
    						id="input-excellonIN"
    						name="excellonUnits"
    						.checked=${!i.downloadGerberOptions.excellonMetric}
    						@change=${e=>{i.downloadGerberOptions.excellonMetric=!e.target.checked}}>
    					<label for="input-excellonIN">in</label>
    				</div> <!-- /.modal-line -->

    				<h4>Additional Options</h4>
    				<div class="modal-line">
    					<input 
    						type="checkbox"
    						id="input-outlineAllLayers"
    						.checked=${i.downloadGerberOptions.includeOutline}
    						@change=${e=>{i.downloadGerberOptions.includeOutline=e.target.checked}}> 
    					<label for="input-outlineAllLayers">Include outline in all layers</label>
    				</div>
    				<div class="modal-line">
    					<input 
    						type="checkbox"
    						id="input-protelFilenames"
    						.checked=${i.downloadGerberOptions.protelFilenames}
    						@change=${e=>{i.downloadGerberOptions.protelFilenames=e.target.checked}}> 
    					<label for="input-protelFilenames">Use Protel Filenames</label>
    				</div>
    			</div> <!-- /.col-50 -->
    		</div> <!-- /.modal-body -->
    		<div class="modal-footer">
    			<button 
    				type="button" 
    				class="btn"
    				@click=${e=>{i.downloadGerberModal=!1,rt("RENDER")}}>Cancel</button>
    			<button 
    				type="button" 
    				class="btn btn-primary"
    				@click=${e=>{i.downloadGerberModal=!1,RL(i),rt("RENDER")}}>Download</button>
    		</div>
    	</div>
    </div>
    `):"",ZL=i=>i.downloadKiCadModal?Zi`
    <div id="modal_download_kicad" class="modal">
    	<div class="modal-content">
    		<div class="modal-header">
    			<div class="col-75 align-left">
    				<i class="icon fa fa-arrow-circle-down"></i>
    				<h3 class="modal-title">Download KiCad Options</h3>
    			</div>
    			<div class="col-25 align-right">
    				<span 
    					class="close"
    					@click=${e=>{i.downloadKiCadModal=!1,rt("RENDER")}}><i class="fa fa-times"></i></span>
    			</div>
    		</div>
    		<div class="modal-body">
    			<div class="col-50">
					<h4><label for="projectName">Project Name</label></h4>
					<div class="modal-line">
						<input id="projectName" 
							type="text" 
							.value=${i.name===""?"Untitled":i.name}
							@input=${e=>{i.name=e.target.value}}>
					</div>
    			</div> <!-- /.col-50 -->
    			<div class="col-50">

					<h4><label for="footprintLibraryName">Footprint Library Name</label></h4>

					<div class="modal-line">
						<input id="footprintLibraryName" 
							type="text" 
							.value=${i.downloadKiCadOptions.footprintLibraryName===""?"SvgPcb":i.downloadKiCadOptions.footprintLibraryName}
							@input=${e=>{i.downloadKiCadOptions.footprintLibraryName=e.target.value}}>
					</div>

					<h4>Footprint Pad Type</h4>

					<div class="modal-line">
						<input id="kicadFootprintPadTypePolygon"
							type="radio" 
							name="kicadFootprintPadType"
							.value=${On.POLYGON}
							.checked=${i.downloadKiCadOptions.padShapeType===On.POLYGON}
    						@change=${e=>{i.downloadKiCadOptions.padShapeType=e.target.checked?On.POLYGON:On.PRIMITIVE}}>
						<label for="kicadFootprintPadTypePolygon">Polygon</label>

						&nbsp;

						<input id="kicadFootprintPadTypePrimitive"
							type="radio" 
							name="kicadFootprintPadType"
							.value=${On.PRIMITIVE}
							.checked=${i.downloadKiCadOptions.padShapeType===On.PRIMITIVE}
    						@change=${e=>{i.downloadKiCadOptions.padShapeType=e.target.checked?On.PRIMITIVE:On.POLYGON}}>
						<label for="kicadFootprintPadTypePrimitive">Primitive</label>
					</div>

					<h4>Footprint Primitive Pad Shape</h4>

					<div class="modal-line">
						<input id="kicadFootprintPadPrimitiveShapeRectangle"
							type="radio" 
							name="kicadFootprintPadPrimitiveShape"
							.value=${zn.RECTANGLE}
							.checked=${i.downloadKiCadOptions.padPrimitiveShape===zn.RECTANGLE}
    						@change=${e=>{i.downloadKiCadOptions.padPrimitiveShape=e.target.checked?zn.RECTANGLE:zn.CIRCLE}}>
						<label for="kicadFootprintPadPrimitiveShapeRectangle">Rectangle</label>

						&nbsp;

						<input id="kicadFootprintPadPrimitiveShapeCircle"
							type="radio" 
							name="kicadFootprintPadPrimitiveShape"
							.value=${zn.CIRCLE}
							.checked=${i.downloadKiCadOptions.padPrimitiveShape===zn.CIRCLE}
    						@change=${e=>{i.downloadKiCadOptions.padPrimitiveShape=e.target.checked?zn.CIRCLE:zn.RECTANGLE}}>
						<label for="kicadFootprintPadPrimitiveShapeCircle">Circle</label>
					</div>

    			</div> <!-- /.col-50 -->
    		</div> <!-- /.modal-body -->
    		<div class="modal-footer">
    			<button 
    				type="button" 
    				class="btn"
    				@click=${e=>{i.downloadKiCadModal=!1,rt("RENDER")}}>Cancel</button>
    			<button 
    				type="button" 
    				class="btn btn-primary"
    				@click=${e=>{i.downloadKiCadModal=!1,Vx(i),rt("RENDER")}}>Download</button>
    		</div>
    	</div>
    </div>
    `:"";var Hy={exports:{}};(function(i,e){(function(t){function n(){var r=t();return r.default||r}i.exports=n()})(function(){var t=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,l=(C,k)=>()=>(C&&(k=C(C=0)),k),h=(C,k)=>()=>(k||C((k={exports:{}}).exports,k),k.exports),c=(C,k)=>{for(var F in k)n(C,F,{get:k[F],enumerable:!0})},p=(C,k,F,Q)=>{if(k&&typeof k=="object"||typeof k=="function")for(let X of o(k))!a.call(C,X)&&X!==F&&n(C,X,{get:()=>k[X],enumerable:!(Q=r(k,X))||Q.enumerable});return C},d=(C,k,F)=>(F=C!=null?t(s(C)):{},p(k||!C||!C.__esModule?n(F,"default",{value:C,enumerable:!0}):F,C)),v=C=>p(n({},"__esModule",{value:!0}),C),D=(C,k,F)=>{if(!k.has(C))throw TypeError("Cannot "+F)},m=(C,k,F)=>{if(k.has(C))throw TypeError("Cannot add the same private member more than once");k instanceof WeakSet?k.add(C):k.set(C,F)},y=(C,k,F)=>(D(C,k,"access private method"),F),x=h(C=>{Object.defineProperty(C,"__esModule",{value:!0}),C.default=k;function k(){}k.prototype={diff:function(X,W){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},le=ee.callback;typeof ee=="function"&&(le=ee,ee={}),this.options=ee;var de=this;function Se(Lt){return le?(setTimeout(function(){le(void 0,Lt)},0),!0):Lt}X=this.castInput(X),W=this.castInput(W),X=this.removeEmpty(this.tokenize(X)),W=this.removeEmpty(this.tokenize(W));var Le=W.length,Ue=X.length,we=1,Ye=Le+Ue;ee.maxEditLength&&(Ye=Math.min(Ye,ee.maxEditLength));var Fe=[{newPos:-1,components:[]}],Je=this.extractCommon(Fe[0],W,X,0);if(Fe[0].newPos+1>=Le&&Je+1>=Ue)return Se([{value:this.join(W),count:W.length}]);function ct(){for(var Lt=-1*we;Lt<=we;Lt+=2){var It=void 0,Bt=Fe[Lt-1],zt=Fe[Lt+1],Ni=(zt?zt.newPos:0)-Lt;Bt&&(Fe[Lt-1]=void 0);var _i=Bt&&Bt.newPos+1<Le,Vi=zt&&0<=Ni&&Ni<Ue;if(!_i&&!Vi){Fe[Lt]=void 0;continue}if(!_i||Vi&&Bt.newPos<zt.newPos?(It=Q(zt),de.pushComponent(It.components,void 0,!0)):(It=Bt,It.newPos++,de.pushComponent(It.components,!0,void 0)),Ni=de.extractCommon(It,W,X,Lt),It.newPos+1>=Le&&Ni+1>=Ue)return Se(F(de,It.components,W,X,de.useLongestToken));Fe[Lt]=It}we++}if(le)(function Lt(){setTimeout(function(){if(we>Ye)return le();ct()||Lt()},0)})();else for(;we<=Ye;){var _t=ct();if(_t)return _t}},pushComponent:function(X,W,ee){var le=X[X.length-1];le&&le.added===W&&le.removed===ee?X[X.length-1]={count:le.count+1,added:W,removed:ee}:X.push({count:1,added:W,removed:ee})},extractCommon:function(X,W,ee,le){for(var de=W.length,Se=ee.length,Le=X.newPos,Ue=Le-le,we=0;Le+1<de&&Ue+1<Se&&this.equals(W[Le+1],ee[Ue+1]);)Le++,Ue++,we++;return we&&X.components.push({count:we}),X.newPos=Le,Ue},equals:function(X,W){return this.options.comparator?this.options.comparator(X,W):X===W||this.options.ignoreCase&&X.toLowerCase()===W.toLowerCase()},removeEmpty:function(X){for(var W=[],ee=0;ee<X.length;ee++)X[ee]&&W.push(X[ee]);return W},castInput:function(X){return X},tokenize:function(X){return X.split("")},join:function(X){return X.join("")}};function F(X,W,ee,le,de){for(var Se=0,Le=W.length,Ue=0,we=0;Se<Le;Se++){var Ye=W[Se];if(Ye.removed){if(Ye.value=X.join(le.slice(we,we+Ye.count)),we+=Ye.count,Se&&W[Se-1].added){var Fe=W[Se-1];W[Se-1]=W[Se],W[Se]=Fe}}else{if(!Ye.added&&de){var Je=ee.slice(Ue,Ue+Ye.count);Je=Je.map(function(_t,Lt){var It=le[we+Lt];return It.length>_t.length?It:_t}),Ye.value=X.join(Je)}else Ye.value=X.join(ee.slice(Ue,Ue+Ye.count));Ue+=Ye.count,Ye.added||(we+=Ye.count)}}var ct=W[Le-1];return Le>1&&typeof ct.value=="string"&&(ct.added||ct.removed)&&X.equals("",ct.value)&&(W[Le-2].value+=ct.value,W.pop()),W}function Q(X){return{newPos:X.newPos,components:X.components.slice(0)}}}),w=h(C=>{Object.defineProperty(C,"__esModule",{value:!0}),C.diffArrays=X,C.arrayDiff=void 0;var k=F(x());function F(W){return W&&W.__esModule?W:{default:W}}var Q=new k.default;C.arrayDiff=Q,Q.tokenize=function(W){return W.slice()},Q.join=Q.removeEmpty=function(W){return W};function X(W,ee,le){return Q.diff(W,ee,le)}}),_=h((C,k)=>{var F=new Proxy(String,{get:()=>F});k.exports=F}),I={};c(I,{default:()=>Y,shouldHighlight:()=>N});var N,Y,j=l(()=>{N=()=>!1,Y=String}),ae=h(C=>{Object.defineProperty(C,"__esModule",{value:!0}),C.codeFrameColumns=Le,C.default=Ue;var k=(j(),v(I)),F=_(),Q=F,X;function W(we){return we?(X!=null||(X=new Q.constructor({enabled:!0,level:1})),X):Q}var ee=!1;function le(we){return{gutter:we.grey,marker:we.red.bold,message:we.red.bold}}var de=/\r\n|[\n\r\u2028\u2029]/;function Se(we,Ye,Fe){let Je=Object.assign({column:0,line:-1},we.start),ct=Object.assign({},Je,we.end),{linesAbove:_t=2,linesBelow:Lt=3}=Fe||{},It=Je.line,Bt=Je.column,zt=ct.line,Ni=ct.column,_i=Math.max(It-(_t+1),0),Vi=Math.min(Ye.length,zt+Lt);It===-1&&(_i=0),zt===-1&&(Vi=Ye.length);let Rn=zt-It,Ri={};if(Rn)for(let In=0;In<=Rn;In++){let Xn=In+It;if(!Bt)Ri[Xn]=!0;else if(In===0){let is=Ye[Xn-1].length;Ri[Xn]=[Bt,is-Bt+1]}else if(In===Rn)Ri[Xn]=[0,Ni];else{let is=Ye[Xn-In].length;Ri[Xn]=[0,is]}}else Bt===Ni?Bt?Ri[It]=[Bt,0]:Ri[It]=!0:Ri[It]=[Bt,Ni-Bt];return{start:_i,end:Vi,markerLines:Ri}}function Le(we,Ye,Fe={}){let Je=(Fe.highlightCode||Fe.forceColor)&&(0,k.shouldHighlight)(Fe),ct=W(Fe.forceColor),_t=le(ct),Lt=(Ri,In)=>Je?Ri(In):In,It=we.split(de),{start:Bt,end:zt,markerLines:Ni}=Se(Ye,It,Fe),_i=Ye.start&&typeof Ye.start.column=="number",Vi=String(zt).length,Rn=(Je?(0,k.default)(we,Fe):we).split(de,zt).slice(Bt,zt).map((Ri,In)=>{let Xn=Bt+1+In,is=` ${` ${Xn}`.slice(-Vi)} |`,Ra=Ni[Xn],EO=!Ni[Xn+1];if(Ra){let oh="";if(Array.isArray(Ra)){let _O=Ri.slice(0,Math.max(Ra[0]-1,0)).replace(/[^\t]/g," "),TO=Ra[1]||1;oh=[`
 `,Lt(_t.gutter,is.replace(/\d/g," "))," ",_O,Lt(_t.marker,"^").repeat(TO)].join(""),EO&&Fe.message&&(oh+=" "+Lt(_t.message,Fe.message))}return[Lt(_t.marker,">"),Lt(_t.gutter,is),Ri.length>0?` ${Ri}`:"",oh].join("")}else return` ${Lt(_t.gutter,is)}${Ri.length>0?` ${Ri}`:""}`}).join(`
`);return Fe.message&&!_i&&(Rn=`${" ".repeat(Vi+1)}${Fe.message}
${Rn}`),Je?ct.reset(Rn):Rn}function Ue(we,Ye,Fe,Je={}){if(!ee){ee=!0;let ct="Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";{let _t=new Error(ct);_t.name="DeprecationWarning",console.warn(new Error(ct))}}return Fe=Math.max(Fe,0),Le(we,{start:{column:Fe,line:Ye}},Je)}}),K={};c(K,{__debug:()=>AO,check:()=>LO,doc:()=>ld,format:()=>hd,formatWithCursor:()=>ud,getSupportInfo:()=>kO,util:()=>ad,version:()=>PO});var oe=(C,k,F,Q)=>{if(!(C&&k==null))return k.replaceAll?k.replaceAll(F,Q):F.global?k.replace(F,Q):k.split(F).join(Q)},fe=oe,U=d(w(),1),H="string",B="array",re="cursor",Qe="indent",De="align",Xe="trim",ge="group",$e="fill",ue="if-break",he="indent-if-break",je="line-suffix",We="line-suffix-boundary",Ae="line",Me="label",vt="break-parent",et=new Set([re,Qe,De,Xe,ge,$e,ue,he,je,We,Ae,Me,vt]);function tt(C){if(typeof C=="string")return H;if(Array.isArray(C))return B;if(!C)return;let{type:k}=C;if(et.has(k))return k}var Ot=tt,it=C=>new Intl.ListFormat("en-US",{type:"disjunction"}).format(C);function Nt(C){let k=C===null?"null":typeof C;if(k!=="string"&&k!=="object")return`Unexpected doc '${k}', 
Expected it to be 'string' or 'object'.`;if(Ot(C))throw new Error("doc is valid.");let F=Object.prototype.toString.call(C);if(F!=="[object Object]")return`Unexpected doc '${F}'.`;let Q=it([...et].map(X=>`'${X}'`));return`Unexpected doc.type '${C.type}'.
Expected it to be ${Q}.`}var yt=class extends Error{constructor(k){super(Nt(k));Xa(this,"name","InvalidDocError");this.doc=k}},$=yt,Pe={};function Oe(C,k,F,Q){let X=[C];for(;X.length>0;){let W=X.pop();if(W===Pe){F(X.pop());continue}F&&X.push(W,Pe);let ee=Ot(W);if(!ee)throw new $(W);if((k==null?void 0:k(W))!==!1)switch(ee){case B:case $e:{let le=ee===B?W:W.parts;for(let de=le.length,Se=de-1;Se>=0;--Se)X.push(le[Se]);break}case ue:X.push(W.flatContents,W.breakContents);break;case ge:if(Q&&W.expandedStates)for(let le=W.expandedStates.length,de=le-1;de>=0;--de)X.push(W.expandedStates[de]);else X.push(W.contents);break;case De:case Qe:case he:case Me:case je:X.push(W.contents);break;case H:case re:case Xe:case We:case Ae:case vt:break;default:throw new $(W)}}}var J=Oe,G=()=>{},ce=G;function Ie(C){return{type:Qe,contents:C}}function Be(C,k){return{type:De,contents:k,n:C}}function me(C,k={}){return ce(k.expandedStates),{type:ge,id:k.id,contents:C,break:!!k.shouldBreak,expandedStates:k.expandedStates}}function Ze(C){return Be(Number.NEGATIVE_INFINITY,C)}function Ke(C){return Be({type:"root"},C)}function Ne(C){return Be(-1,C)}function at(C,k){return me(C[0],{...k,expandedStates:C})}function mt(C){return{type:$e,parts:C}}function Pt(C,k="",F={}){return{type:ue,breakContents:C,flatContents:k,groupId:F.groupId}}function li(C,k){return{type:he,contents:C,groupId:k.groupId,negate:k.negate}}function ji(C){return{type:je,contents:C}}var pi={type:We},kt={type:vt},At={type:Xe},Qt={type:Ae,hard:!0},ei={type:Ae,hard:!0,literal:!0},Vt={type:Ae},Ln={type:Ae,soft:!0},Wt=[Qt,kt],gn=[ei,kt],ln={type:re};function kn(C,k){let F=[];for(let Q=0;Q<k.length;Q++)Q!==0&&F.push(C),F.push(k[Q]);return F}function ye(C,k,F){let Q=C;if(k>0){for(let X=0;X<Math.floor(k/F);++X)Q=Ie(Q);Q=Be(k%F,Q),Q=Be(Number.NEGATIVE_INFINITY,Q)}return Q}function be(C,k){return C?{type:Me,label:C,contents:k}:k}var ze=(C,k,F)=>{if(!(C&&k==null))return Array.isArray(k)||typeof k=="string"?k[F<0?k.length+F:F]:k.at(F)},st=ze;function ui(C){let k=C.indexOf("\r");return k>=0?C.charAt(k+1)===`
`?"crlf":"cr":"lf"}function An(C){switch(C){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}function un(C,k){let F;switch(k){case`
`:F=/\n/g;break;case"\r":F=/\r/g;break;case`\r
`:F=/\r\n/g;break;default:throw new Error(`Unexpected "eol" ${JSON.stringify(k)}.`)}let Q=C.match(F);return Q?Q.length:0}function zr(C){return fe(!1,C,/\r\n?/g,`
`)}var yo=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g,en={eastAsianWidth(C){var k=C.charCodeAt(0),F=C.length==2?C.charCodeAt(1):0,Q=k;return 55296<=k&&k<=56319&&56320<=F&&F<=57343&&(k&=1023,F&=1023,Q=k<<10|F,Q+=65536),Q==12288||65281<=Q&&Q<=65376||65504<=Q&&Q<=65510?"F":4352<=Q&&Q<=4447||4515<=Q&&Q<=4519||4602<=Q&&Q<=4607||9001<=Q&&Q<=9002||11904<=Q&&Q<=11929||11931<=Q&&Q<=12019||12032<=Q&&Q<=12245||12272<=Q&&Q<=12283||12289<=Q&&Q<=12350||12353<=Q&&Q<=12438||12441<=Q&&Q<=12543||12549<=Q&&Q<=12589||12593<=Q&&Q<=12686||12688<=Q&&Q<=12730||12736<=Q&&Q<=12771||12784<=Q&&Q<=12830||12832<=Q&&Q<=12871||12880<=Q&&Q<=13054||13056<=Q&&Q<=19903||19968<=Q&&Q<=42124||42128<=Q&&Q<=42182||43360<=Q&&Q<=43388||44032<=Q&&Q<=55203||55216<=Q&&Q<=55238||55243<=Q&&Q<=55291||63744<=Q&&Q<=64255||65040<=Q&&Q<=65049||65072<=Q&&Q<=65106||65108<=Q&&Q<=65126||65128<=Q&&Q<=65131||110592<=Q&&Q<=110593||127488<=Q&&Q<=127490||127504<=Q&&Q<=127546||127552<=Q&&Q<=127560||127568<=Q&&Q<=127569||131072<=Q&&Q<=194367||177984<=Q&&Q<=196605||196608<=Q&&Q<=262141?"W":"N"}},Oo=/[^\x20-\x7F]/;function xo(C){if(!C)return 0;if(!Oo.test(C))return C.length;C=C.replace(yo(),"  ");let k=0;for(let F of C){let Q=F.codePointAt(0);if(Q<=31||Q>=127&&Q<=159||Q>=768&&Q<=879)continue;let X=en.eastAsianWidth(F);k+=X==="F"||X==="W"?2:1}return k}var Mi=xo,gr=C=>{if(Array.isArray(C))return C;if(C.type!==$e)throw new Error(`Expect doc to be 'array' or '${$e}'.`);return C.parts};function vr(C,k){if(typeof C=="string")return k(C);let F=new Map;return Q(C);function Q(W){if(F.has(W))return F.get(W);let ee=X(W);return F.set(W,ee),ee}function X(W){switch(Ot(W)){case B:return k(W.map(Q));case $e:return k({...W,parts:W.parts.map(Q)});case ue:return k({...W,breakContents:Q(W.breakContents),flatContents:Q(W.flatContents)});case ge:{let{expandedStates:ee,contents:le}=W;return ee?(ee=ee.map(Q),le=ee[0]):le=Q(le),k({...W,contents:le,expandedStates:ee})}case De:case Qe:case he:case Me:case je:return k({...W,contents:Q(W.contents)});case H:case re:case Xe:case We:case Ae:case vt:return k(W);default:throw new $(W)}}}function yr(C,k,F){let Q=F,X=!1;function W(ee){if(X)return!1;let le=k(ee);le!==void 0&&(X=!0,Q=le)}return J(C,W),Q}function Ss(C){if(C.type===ge&&C.break||C.type===Ae&&C.hard||C.type===vt)return!0}function Do(C){return yr(C,Ss,!1)}function jr(C){if(C.length>0){let k=st(!1,C,-1);!k.expandedStates&&!k.break&&(k.break="propagated")}return null}function Co(C){let k=new Set,F=[];function Q(W){if(W.type===vt&&jr(F),W.type===ge){if(F.push(W),k.has(W))return!1;k.add(W)}}function X(W){W.type===ge&&F.pop().break&&jr(F)}J(C,Q,X,!0)}function bo(C){return C.type===Ae&&!C.hard?C.soft?"":" ":C.type===ue?C.flatContents:C}function So(C){return vr(C,bo)}function Gr(C){for(C=[...C];C.length>=2&&st(!1,C,-2).type===Ae&&st(!1,C,-1).type===vt;)C.length-=2;if(C.length>0){let k=En(st(!1,C,-1));C[C.length-1]=k}return C}function En(C){switch(Ot(C)){case De:case Qe:case he:case ge:case je:case Me:{let k=En(C.contents);return{...C,contents:k}}case ue:return{...C,breakContents:En(C.breakContents),flatContents:En(C.flatContents)};case $e:return{...C,parts:Gr(C.parts)};case B:return Gr(C);case H:return C.replace(/[\n\r]*$/,"");case re:case Xe:case We:case Ae:case vt:break;default:throw new $(C)}return C}function ws(C){return En(sr(C))}function hn(C){switch(Ot(C)){case $e:if(C.parts.every(k=>k===""))return"";break;case ge:if(!C.contents&&!C.id&&!C.break&&!C.expandedStates)return"";if(C.contents.type===ge&&C.contents.id===C.id&&C.contents.break===C.break&&C.contents.expandedStates===C.expandedStates)return C.contents;break;case De:case Qe:case he:case je:if(!C.contents)return"";break;case ue:if(!C.flatContents&&!C.breakContents)return"";break;case B:{let k=[];for(let F of C){if(!F)continue;let[Q,...X]=Array.isArray(F)?F:[F];typeof Q=="string"&&typeof st(!1,k,-1)=="string"?k[k.length-1]+=Q:k.push(Q),k.push(...X)}return k.length===0?"":k.length===1?k[0]:k}case H:case re:case Xe:case We:case Ae:case Me:case vt:break;default:throw new $(C)}return C}function sr(C){return vr(C,k=>hn(k))}function Vr(C,k=gn){return vr(C,F=>typeof F=="string"?kn(k,F.split(`
`)):F)}function Ps(C){if(C.type===Ae)return!0}function wo(C){return yr(C,Ps,!1)}function Ls(C,k){return C.type===Me?{...C,contents:k(C.contents)}:k(C)}var wi=Symbol("MODE_BREAK"),Gi=Symbol("MODE_FLAT"),ni=Symbol("cursor");function ks(){return{value:"",length:0,queue:[]}}function Po(C,k){return Or(C,{type:"indent"},k)}function As(C,k,F){return k===Number.NEGATIVE_INFINITY?C.root||ks():k<0?Or(C,{type:"dedent"},F):k?k.type==="root"?{...C,root:C}:Or(C,{type:typeof k=="string"?"stringAlign":"numberAlign",n:k},F):C}function Or(C,k,F){let Q=k.type==="dedent"?C.queue.slice(0,-1):[...C.queue,k],X="",W=0,ee=0,le=0;for(let Fe of Q)switch(Fe.type){case"indent":Le(),F.useTabs?de(1):Se(F.tabWidth);break;case"stringAlign":Le(),X+=Fe.n,W+=Fe.n.length;break;case"numberAlign":ee+=1,le+=Fe.n;break;default:throw new Error(`Unexpected type '${Fe.type}'`)}return we(),{...C,value:X,length:W,queue:Q};function de(Fe){X+="	".repeat(Fe),W+=F.tabWidth*Fe}function Se(Fe){X+=" ".repeat(Fe),W+=Fe}function Le(){F.useTabs?Ue():we()}function Ue(){ee>0&&de(ee),Ye()}function we(){le>0&&Se(le),Ye()}function Ye(){ee=0,le=0}}function qr(C){let k=0,F=0,Q=C.length;e:for(;Q--;){let X=C[Q];if(X===ni){F++;continue}for(let W=X.length-1;W>=0;W--){let ee=X[W];if(ee===" "||ee==="	")k++;else{C[Q]=X.slice(0,W+1);break e}}}if(k>0||F>0)for(C.length=Q+1;F-- >0;)C.push(ni);return k}function or(C,k,F,Q,X,W){if(F===Number.POSITIVE_INFINITY)return!0;let ee=k.length,le=[C],de=[];for(;F>=0;){if(le.length===0){if(ee===0)return!0;le.push(k[--ee]);continue}let{mode:Se,doc:Le}=le.pop();switch(Ot(Le)){case H:de.push(Le),F-=Mi(Le);break;case B:case $e:{let Ue=gr(Le);for(let we=Ue.length-1;we>=0;we--)le.push({mode:Se,doc:Ue[we]});break}case Qe:case De:case he:case Me:le.push({mode:Se,doc:Le.contents});break;case Xe:F+=qr(de);break;case ge:{if(W&&Le.break)return!1;let Ue=Le.break?wi:Se,we=Le.expandedStates&&Ue===wi?st(!1,Le.expandedStates,-1):Le.contents;le.push({mode:Ue,doc:we});break}case ue:{let Ue=(Le.groupId?X[Le.groupId]||Gi:Se)===wi?Le.breakContents:Le.flatContents;Ue&&le.push({mode:Se,doc:Ue});break}case Ae:if(Se===wi||Le.hard)return!0;Le.soft||(de.push(" "),F--);break;case je:Q=!0;break;case We:if(Q)return!1;break}}return!1}function xr(C,k){let F={},Q=k.printWidth,X=An(k.endOfLine),W=0,ee=[{ind:ks(),mode:wi,doc:C}],le=[],de=!1,Se=[],Le=0;for(Co(C);ee.length>0;){let{ind:we,mode:Ye,doc:Fe}=ee.pop();switch(Ot(Fe)){case H:{let Je=X!==`
`?fe(!1,Fe,`
`,X):Fe;le.push(Je),ee.length>0&&(W+=Mi(Je));break}case B:for(let Je=Fe.length-1;Je>=0;Je--)ee.push({ind:we,mode:Ye,doc:Fe[Je]});break;case re:if(Le>=2)throw new Error("There are too many 'cursor' in doc.");le.push(ni),Le++;break;case Qe:ee.push({ind:Po(we,k),mode:Ye,doc:Fe.contents});break;case De:ee.push({ind:As(we,Fe.n,k),mode:Ye,doc:Fe.contents});break;case Xe:W-=qr(le);break;case ge:switch(Ye){case Gi:if(!de){ee.push({ind:we,mode:Fe.break?wi:Gi,doc:Fe.contents});break}case wi:{de=!1;let Je={ind:we,mode:Gi,doc:Fe.contents},ct=Q-W,_t=Se.length>0;if(!Fe.break&&or(Je,ee,ct,_t,F))ee.push(Je);else if(Fe.expandedStates){let Lt=st(!1,Fe.expandedStates,-1);if(Fe.break){ee.push({ind:we,mode:wi,doc:Lt});break}else for(let It=1;It<Fe.expandedStates.length+1;It++)if(It>=Fe.expandedStates.length){ee.push({ind:we,mode:wi,doc:Lt});break}else{let Bt=Fe.expandedStates[It],zt={ind:we,mode:Gi,doc:Bt};if(or(zt,ee,ct,_t,F)){ee.push(zt);break}}}else ee.push({ind:we,mode:wi,doc:Fe.contents});break}}Fe.id&&(F[Fe.id]=st(!1,ee,-1).mode);break;case $e:{let Je=Q-W,{parts:ct}=Fe;if(ct.length===0)break;let[_t,Lt]=ct,It={ind:we,mode:Gi,doc:_t},Bt={ind:we,mode:wi,doc:_t},zt=or(It,[],Je,Se.length>0,F,!0);if(ct.length===1){zt?ee.push(It):ee.push(Bt);break}let Ni={ind:we,mode:Gi,doc:Lt},_i={ind:we,mode:wi,doc:Lt};if(ct.length===2){zt?ee.push(Ni,It):ee.push(_i,Bt);break}ct.splice(0,2);let Vi={ind:we,mode:Ye,doc:mt(ct)},Rn=ct[0];or({ind:we,mode:Gi,doc:[_t,Lt,Rn]},[],Je,Se.length>0,F,!0)?ee.push(Vi,Ni,It):zt?ee.push(Vi,_i,It):ee.push(Vi,_i,Bt);break}case ue:case he:{let Je=Fe.groupId?F[Fe.groupId]:Ye;if(Je===wi){let ct=Fe.type===ue?Fe.breakContents:Fe.negate?Fe.contents:Ie(Fe.contents);ct&&ee.push({ind:we,mode:Ye,doc:ct})}if(Je===Gi){let ct=Fe.type===ue?Fe.flatContents:Fe.negate?Ie(Fe.contents):Fe.contents;ct&&ee.push({ind:we,mode:Ye,doc:ct})}break}case je:Se.push({ind:we,mode:Ye,doc:Fe.contents});break;case We:Se.length>0&&ee.push({ind:we,mode:Ye,doc:Qt});break;case Ae:switch(Ye){case Gi:if(Fe.hard)de=!0;else{Fe.soft||(le.push(" "),W+=1);break}case wi:if(Se.length>0){ee.push({ind:we,mode:Ye,doc:Fe},...Se.reverse()),Se.length=0;break}Fe.literal?we.root?(le.push(X,we.root.value),W=we.root.length):(le.push(X),W=0):(W-=qr(le),le.push(X+we.value),W=we.length);break}break;case Me:ee.push({ind:we,mode:Ye,doc:Fe.contents});break;case vt:break;default:throw new $(Fe)}ee.length===0&&Se.length>0&&(ee.push(...Se.reverse()),Se.length=0)}let Ue=le.indexOf(ni);if(Ue!==-1){let we=le.indexOf(ni,Ue+1),Ye=le.slice(0,Ue).join(""),Fe=le.slice(Ue+1,we).join(""),Je=le.slice(we+1).join("");return{formatted:Ye+Fe+Je,cursorNodeStart:Ye.length,cursorNodeText:Fe}}return{formatted:le.join("")}}function tn(C){var k;if(!C)return"";if(Array.isArray(C)){let F=[];for(let Q of C)if(Array.isArray(Q))F.push(...tn(Q));else{let X=tn(Q);X!==""&&F.push(X)}return F}return C.type===ue?{...C,breakContents:tn(C.breakContents),flatContents:tn(C.flatContents)}:C.type===ge?{...C,contents:tn(C.contents),expandedStates:(k=C.expandedStates)==null?void 0:k.map(tn)}:C.type===$e?{type:"fill",parts:C.parts.map(tn)}:C.contents?{...C,contents:tn(C.contents)}:C}function Lo(C){let k=Object.create(null),F=new Set;return Q(tn(C));function Q(W,ee,le){var de,Se;if(typeof W=="string")return JSON.stringify(W);if(Array.isArray(W)){let Le=W.map(Q).filter(Boolean);return Le.length===1?Le[0]:`[${Le.join(", ")}]`}if(W.type===Ae){let Le=((de=le==null?void 0:le[ee+1])==null?void 0:de.type)===vt;return W.literal?Le?"literalline":"literallineWithoutBreakParent":W.hard?Le?"hardline":"hardlineWithoutBreakParent":W.soft?"softline":"line"}if(W.type===vt)return((Se=le==null?void 0:le[ee-1])==null?void 0:Se.type)===Ae&&le[ee-1].hard?void 0:"breakParent";if(W.type===Xe)return"trim";if(W.type===Qe)return"indent("+Q(W.contents)+")";if(W.type===De)return W.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+Q(W.contents)+")":W.n<0?"dedent("+Q(W.contents)+")":W.n.type==="root"?"markAsRoot("+Q(W.contents)+")":"align("+JSON.stringify(W.n)+", "+Q(W.contents)+")";if(W.type===ue)return"ifBreak("+Q(W.breakContents)+(W.flatContents?", "+Q(W.flatContents):"")+(W.groupId?(W.flatContents?"":', ""')+`, { groupId: ${X(W.groupId)} }`:"")+")";if(W.type===he){let Le=[];W.negate&&Le.push("negate: true"),W.groupId&&Le.push(`groupId: ${X(W.groupId)}`);let Ue=Le.length>0?`, { ${Le.join(", ")} }`:"";return`indentIfBreak(${Q(W.contents)}${Ue})`}if(W.type===ge){let Le=[];W.break&&W.break!=="propagated"&&Le.push("shouldBreak: true"),W.id&&Le.push(`id: ${X(W.id)}`);let Ue=Le.length>0?`, { ${Le.join(", ")} }`:"";return W.expandedStates?`conditionalGroup([${W.expandedStates.map(we=>Q(we)).join(",")}]${Ue})`:`group(${Q(W.contents)}${Ue})`}if(W.type===$e)return`fill([${W.parts.map(Le=>Q(Le)).join(", ")}])`;if(W.type===je)return"lineSuffix("+Q(W.contents)+")";if(W.type===We)return"lineSuffixBoundary";if(W.type===Me)return`label(${JSON.stringify(W.label)}, ${Q(W.contents)})`;throw new Error("Unknown doc type "+W.type)}function X(W){if(typeof W!="symbol")return JSON.stringify(String(W));if(W in k)return k[W];let ee=W.description||"symbol";for(let le=0;;le++){let de=ee+(le>0?` #${le}`:"");if(!F.has(de))return F.add(de),k[W]=`Symbol.for(${JSON.stringify(de)})`}}}function mi(C,k,F=0){let Q=0;for(let X=F;X<C.length;++X)C[X]==="	"?Q=Q+k-Q%k:Q++;return Q}var nn=mi,Yt=class extends Error{constructor(){super(...arguments);Xa(this,"name","ConfigError")}},Es=class extends Error{constructor(){super(...arguments);Xa(this,"name","UndefinedParserError")}},Ct={cursorOffset:{category:"Special",type:"int",default:-1,range:{start:-1,end:1/0,step:1},description:`Print (to stderr) where a cursor at the given position would move to after formatting.
This option cannot be used with --range-start and --range-end.`,cliCategory:"Editor"},endOfLine:{category:"Global",type:"choice",default:"lf",description:"Which end of line characters to apply.",choices:[{value:"lf",description:"Line Feed only (\\n), common on Linux and macOS as well as inside git repos"},{value:"crlf",description:"Carriage Return + Line Feed characters (\\r\\n), common on Windows"},{value:"cr",description:"Carriage Return character only (\\r), used very rarely"},{value:"auto",description:`Maintain existing
(mixed values within one file are normalised by looking at what's used after the first line)`}]},filepath:{category:"Special",type:"path",description:"Specify the input filepath. This will be used to do parser inference.",cliName:"stdin-filepath",cliCategory:"Other",cliDescription:"Path to the file to pretend that stdin comes from."},insertPragma:{category:"Special",type:"boolean",default:!1,description:"Insert @format pragma into file's first docblock comment.",cliCategory:"Other"},parser:{category:"Global",type:"choice",default:void 0,description:"Which parser to use.",exception:C=>typeof C=="string"||typeof C=="function",choices:[{value:"flow",description:"Flow"},{value:"babel",description:"JavaScript"},{value:"babel-flow",description:"Flow"},{value:"babel-ts",description:"TypeScript"},{value:"typescript",description:"TypeScript"},{value:"acorn",description:"JavaScript"},{value:"espree",description:"JavaScript"},{value:"meriyah",description:"JavaScript"},{value:"css",description:"CSS"},{value:"less",description:"Less"},{value:"scss",description:"SCSS"},{value:"json",description:"JSON"},{value:"json5",description:"JSON5"},{value:"json-stringify",description:"JSON.stringify"},{value:"graphql",description:"GraphQL"},{value:"markdown",description:"Markdown"},{value:"mdx",description:"MDX"},{value:"vue",description:"Vue"},{value:"yaml",description:"YAML"},{value:"glimmer",description:"Ember / Handlebars"},{value:"html",description:"HTML"},{value:"angular",description:"Angular"},{value:"lwc",description:"Lightning Web Components"}]},plugins:{type:"path",array:!0,default:[{value:[]}],category:"Global",description:"Add a plugin. Multiple plugins can be passed as separate `--plugin`s.",exception:C=>typeof C=="string"||typeof C=="object",cliName:"plugin",cliCategory:"Config"},printWidth:{category:"Global",type:"int",default:80,description:"The line length where Prettier will try wrap.",range:{start:0,end:1/0,step:1}},rangeEnd:{category:"Special",type:"int",default:1/0,range:{start:0,end:1/0,step:1},description:`Format code ending at a given character offset (exclusive).
The range will extend forwards to the end of the selected statement.
This option cannot be used with --cursor-offset.`,cliCategory:"Editor"},rangeStart:{category:"Special",type:"int",default:0,range:{start:0,end:1/0,step:1},description:`Format code starting at a given character offset.
The range will extend backwards to the start of the first line containing the selected statement.
This option cannot be used with --cursor-offset.`,cliCategory:"Editor"},requirePragma:{category:"Special",type:"boolean",default:!1,description:`Require either '@prettier' or '@format' to be present in the file's first docblock comment
in order for it to be formatted.`,cliCategory:"Other"},tabWidth:{type:"int",category:"Global",default:2,description:"Number of spaces per indentation level.",range:{start:0,end:1/0,step:1}},useTabs:{category:"Global",type:"boolean",default:!1,description:"Indent with tabs instead of spaces."},embeddedLanguageFormatting:{category:"Global",type:"choice",default:"auto",description:"Control how Prettier formats quoted code embedded in the file.",choices:[{value:"auto",description:"Format embedded code if Prettier can automatically identify it."},{value:"off",description:"Never automatically format embedded code."}]}};function Hr({plugins:C=[],showDeprecated:k=!1}={}){let F=C.flatMap(X=>X.languages??[]),Q=[];for(let X of ko(Object.assign({},...C.map(({options:W})=>W),Ct)))!k&&X.deprecated||(Array.isArray(X.choices)&&(k||(X.choices=X.choices.filter(W=>!W.deprecated)),X.name==="parser"&&(X.choices=[...X.choices,...ar(X.choices,F,C)])),X.pluginDefaults=Object.fromEntries(C.filter(W=>{var ee;return((ee=W.defaultOptions)==null?void 0:ee[X.name])!==void 0}).map(W=>[W.name,W.defaultOptions[X.name]])),Q.push(X));return{languages:F,options:Q}}function*ar(C,k,F){let Q=new Set(C.map(X=>X.value));for(let X of k)if(X.parsers){for(let W of X.parsers)if(!Q.has(W)){Q.add(W);let ee=F.find(de=>de.parsers&&Object.prototype.hasOwnProperty.call(de.parsers,W)),le=X.name;ee!=null&&ee.name&&(le+=` (plugin: ${ee.name})`),yield{value:W,description:le}}}}function ko(C){let k=[];for(let[F,Q]of Object.entries(C)){let X={name:F,...Q};Array.isArray(X.default)&&(X.default=st(!1,X.default,-1).value),k.push(X)}return k}var Dr=C=>C.split(/[/\\]/).pop();function Jr(C,k){if(!k)return;let F=Dr(k).toLowerCase();return C.find(Q=>{var X,W;return((X=Q.extensions)==null?void 0:X.some(ee=>F.endsWith(ee)))||((W=Q.filenames)==null?void 0:W.some(ee=>ee.toLowerCase()===F))})}function u(C,k){if(k)return C.find(({name:F})=>F.toLowerCase()===k)??C.find(({aliases:F})=>F==null?void 0:F.includes(k))??C.find(({extensions:F})=>F==null?void 0:F.includes(`.${k}`))}function f(C,k){let F=C.plugins.flatMap(X=>X.languages??[]),Q=u(F,k.language)??Jr(F,k.physicalFile)??Jr(F,k.file)??(k.physicalFile,void 0);return Q==null?void 0:Q.parsers[0]}var O=f,S={key:C=>/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(C)?C:JSON.stringify(C),value(C){if(C===null||typeof C!="object")return JSON.stringify(C);if(Array.isArray(C))return`[${C.map(F=>S.value(F)).join(", ")}]`;let k=Object.keys(C);return k.length===0?"{}":`{ ${k.map(F=>`${S.key(F)}: ${S.value(C[F])}`).join(", ")} }`},pair:({key:C,value:k})=>S.value({[C]:k})},E=d(_(),1),R=(C,k,{descriptor:F})=>{let Q=[`${E.default.yellow(typeof C=="string"?F.key(C):F.pair(C))} is deprecated`];return k&&Q.push(`we now treat it as ${E.default.blue(typeof k=="string"?F.key(k):F.pair(k))}`),Q.join("; ")+"."},Z=d(_(),1),te=Symbol.for("vnopts.VALUE_NOT_EXIST"),ie=Symbol.for("vnopts.VALUE_UNCHANGED"),pe=" ".repeat(2),Re=(C,k,F)=>{let{text:Q,list:X}=F.normalizeExpectedResult(F.schemas[C].expected(F)),W=[];return Q&&W.push(_e(C,k,Q,F.descriptor)),X&&W.push([_e(C,k,X.title,F.descriptor)].concat(X.values.map(ee=>qe(ee,F.loggerPrintWidth))).join(`
`)),dt(W,F.loggerPrintWidth)};function _e(C,k,F,Q){return[`Invalid ${Z.default.red(Q.key(C))} value.`,`Expected ${Z.default.blue(F)},`,`but received ${k===te?Z.default.gray("nothing"):Z.default.red(Q.value(k))}.`].join(" ")}function qe({text:C,list:k},F){let Q=[];return C&&Q.push(`- ${Z.default.blue(C)}`),k&&Q.push([`- ${Z.default.blue(k.title)}:`].concat(k.values.map(X=>qe(X,F-pe.length).replace(/^|\n/g,`$&${pe}`))).join(`
`)),dt(Q,F)}function dt(C,k){if(C.length===1)return C[0];let[F,Q]=C,[X,W]=C.map(ee=>ee.split(`
`,1)[0].length);return X>k&&X>W?Q:F}var St=d(_(),1),wt=[],Rt=[];function Pi(C,k){if(C===k)return 0;let F=C;C.length>k.length&&(C=k,k=F);let Q=C.length,X=k.length;for(;Q>0&&C.charCodeAt(~-Q)===k.charCodeAt(~-X);)Q--,X--;let W=0;for(;W<Q&&C.charCodeAt(W)===k.charCodeAt(W);)W++;if(Q-=W,X-=W,Q===0)return X;let ee,le,de,Se,Le=0,Ue=0;for(;Le<Q;)Rt[Le]=C.charCodeAt(W+Le),wt[Le]=++Le;for(;Ue<X;)for(ee=k.charCodeAt(W+Ue),de=Ue++,le=Ue,Le=0;Le<Q;Le++)Se=ee===Rt[Le]?de:de+1,de=wt[Le],le=wt[Le]=de>le?Se>le?le+1:Se:Se>de?de+1:Se;return le}var Bi=(C,k,{descriptor:F,logger:Q,schemas:X})=>{let W=[`Ignored unknown option ${St.default.yellow(F.pair({key:C,value:k}))}.`],ee=Object.keys(X).sort().find(le=>Pi(C,le)<3);ee&&W.push(`Did you mean ${St.default.blue(F.key(ee))}?`),Q.warn(W.join(" "))},_n=["default","expected","validate","deprecated","forward","redirect","overlap","preprocess","postprocess"];function _s(C,k){let F=new C(k),Q=Object.create(F);for(let X of _n)X in k&&(Q[X]=Tn(k[X],F,rn.prototype[X].length));return Q}var rn=class{static create(C){return _s(this,C)}constructor(C){this.name=C.name}default(C){}expected(C){return"nothing"}validate(C,k){return!1}deprecated(C,k){return!1}forward(C,k){}redirect(C,k){}overlap(C,k,F){return C}preprocess(C,k){return C}postprocess(C,k){return ie}};function Tn(C,k,F){return typeof C=="function"?(...Q)=>C(...Q.slice(0,F-1),k,...Q.slice(F-1)):()=>C}var Ia=class extends rn{constructor(C){super(C),this._sourceName=C.sourceName}expected(C){return C.schemas[this._sourceName].expected(C)}validate(C,k){return k.schemas[this._sourceName].validate(C,k)}redirect(C,k){return this._sourceName}},Fa=class extends rn{expected(){return"anything"}validate(){return!0}},Ao=class extends rn{constructor({valueSchema:C,name:k=C.name,...F}){super({...F,name:k}),this._valueSchema=C}expected(C){let{text:k,list:F}=C.normalizeExpectedResult(this._valueSchema.expected(C));return{text:k&&`an array of ${k}`,list:F&&{title:"an array of the following values",values:[{list:F}]}}}validate(C,k){if(!Array.isArray(C))return!1;let F=[];for(let Q of C){let X=k.normalizeValidateResult(this._valueSchema.validate(Q,k),Q);X!==!0&&F.push(X.value)}return F.length===0?!0:{value:F}}deprecated(C,k){let F=[];for(let Q of C){let X=k.normalizeDeprecatedResult(this._valueSchema.deprecated(Q,k),Q);X!==!1&&F.push(...X.map(({value:W})=>({value:[W]})))}return F}forward(C,k){let F=[];for(let Q of C){let X=k.normalizeForwardResult(this._valueSchema.forward(Q,k),Q);F.push(...X.map(Qa))}return F}redirect(C,k){let F=[],Q=[];for(let X of C){let W=k.normalizeRedirectResult(this._valueSchema.redirect(X,k),X);"remain"in W&&F.push(W.remain),Q.push(...W.redirect.map(Qa))}return F.length===0?{redirect:Q}:{redirect:Q,remain:F}}overlap(C,k){return C.concat(k)}};function Qa({from:C,to:k}){return{from:[C],to:k}}var g=class extends rn{expected(){return"true or false"}validate(C){return typeof C=="boolean"}};function b(C,k){let F=Object.create(null);for(let Q of C){let X=Q[k];if(F[X])throw new Error(`Duplicate ${k} ${JSON.stringify(X)}`);F[X]=Q}return F}function L(C,k){let F=new Map;for(let Q of C){let X=Q[k];if(F.has(X))throw new Error(`Duplicate ${k} ${JSON.stringify(X)}`);F.set(X,Q)}return F}function A(){let C=Object.create(null);return k=>{let F=JSON.stringify(k);return C[F]?!0:(C[F]=!0,!1)}}function T(C,k){let F=[],Q=[];for(let X of C)k(X)?F.push(X):Q.push(X);return[F,Q]}function M(C){return C===Math.floor(C)}function z(C,k){if(C===k)return 0;let F=typeof C,Q=typeof k,X=["undefined","object","boolean","number","string"];return F!==Q?X.indexOf(F)-X.indexOf(Q):F!=="string"?Number(C)-Number(k):C.localeCompare(k)}function q(C){return(...k)=>{let F=C(...k);return typeof F=="string"?new Error(F):F}}function V(C){return C===void 0?{}:C}function se(C){if(typeof C=="string")return{text:C};let{text:k,list:F}=C;return Ve((k||F)!==void 0,"Unexpected `expected` result, there should be at least one field."),F?{text:k,list:{title:F.title,values:F.values.map(se)}}:{text:k}}function ne(C,k){return C===!0?!0:C===!1?{value:k}:C}function Ce(C,k,F=!1){return C===!1?!1:C===!0?F?!0:[{value:k}]:"value"in C?[C]:C.length===0?!1:C}function Te(C,k){return typeof C=="string"||"key"in C?{from:k,to:C}:"from"in C?{from:C.from,to:C.to}:{from:k,to:C.to}}function ve(C,k){return C===void 0?[]:Array.isArray(C)?C.map(F=>Te(F,k)):[Te(C,k)]}function xe(C,k){let F=ve(typeof C=="object"&&"redirect"in C?C.redirect:C,k);return F.length===0?{remain:k,redirect:F}:typeof C=="object"&&"remain"in C?{remain:C.remain,redirect:F}:{redirect:F}}function Ve(C,k){if(!C)throw new Error(k)}var Ge=class extends rn{constructor(C){super(C),this._choices=L(C.choices.map(k=>k&&typeof k=="object"?k:{value:k}),"value")}expected({descriptor:C}){let k=Array.from(this._choices.keys()).map(X=>this._choices.get(X)).filter(({hidden:X})=>!X).map(X=>X.value).sort(z).map(C.value),F=k.slice(0,-2),Q=k.slice(-2);return{text:F.concat(Q.join(" or ")).join(", "),list:{title:"one of the following values",values:k}}}validate(C){return this._choices.has(C)}deprecated(C){let k=this._choices.get(C);return k&&k.deprecated?{value:C}:!1}forward(C){let k=this._choices.get(C);return k?k.forward:void 0}redirect(C){let k=this._choices.get(C);return k?k.redirect:void 0}},ft=class extends rn{expected(){return"a number"}validate(C,k){return typeof C=="number"}},xt=class extends ft{expected(){return"an integer"}validate(C,k){return k.normalizeValidateResult(super.validate(C,k),C)===!0&&M(C)}},pt=class extends rn{expected(){return"a string"}validate(C){return typeof C=="string"}},Mt=S,hi=Bi,ti=Re,gi=R,Zt=class{constructor(C,k){let{logger:F=console,loggerPrintWidth:Q=80,descriptor:X=Mt,unknown:W=hi,invalid:ee=ti,deprecated:le=gi,missing:de=()=>!1,required:Se=()=>!1,preprocess:Le=we=>we,postprocess:Ue=()=>ie}=k||{};this._utils={descriptor:X,logger:F||{warn:()=>{}},loggerPrintWidth:Q,schemas:b(C,"name"),normalizeDefaultResult:V,normalizeExpectedResult:se,normalizeDeprecatedResult:Ce,normalizeForwardResult:ve,normalizeRedirectResult:xe,normalizeValidateResult:ne},this._unknownHandler=W,this._invalidHandler=q(ee),this._deprecatedHandler=le,this._identifyMissing=(we,Ye)=>!(we in Ye)||de(we,Ye),this._identifyRequired=Se,this._preprocess=Le,this._postprocess=Ue,this.cleanHistory()}cleanHistory(){this._hasDeprecationWarned=A()}normalize(C){let k={},F=[this._preprocess(C,this._utils)],Q=()=>{for(;F.length!==0;){let X=F.shift(),W=this._applyNormalization(X,k);F.push(...W)}};Q();for(let X of Object.keys(this._utils.schemas)){let W=this._utils.schemas[X];if(!(X in k)){let ee=V(W.default(this._utils));"value"in ee&&F.push({[X]:ee.value})}}Q();for(let X of Object.keys(this._utils.schemas)){if(!(X in k))continue;let W=this._utils.schemas[X],ee=k[X],le=W.postprocess(ee,this._utils);le!==ie&&(this._applyValidation(le,X,W),k[X]=le)}return this._applyPostprocess(k),this._applyRequiredCheck(k),k}_applyNormalization(C,k){let F=[],{knownKeys:Q,unknownKeys:X}=this._partitionOptionKeys(C);for(let W of Q){let ee=this._utils.schemas[W],le=ee.preprocess(C[W],this._utils);this._applyValidation(le,W,ee);let de=({from:Ue,to:we})=>{F.push(typeof we=="string"?{[we]:Ue}:{[we.key]:we.value})},Se=({value:Ue,redirectTo:we})=>{let Ye=Ce(ee.deprecated(Ue,this._utils),le,!0);if(Ye!==!1)if(Ye===!0)this._hasDeprecationWarned(W)||this._utils.logger.warn(this._deprecatedHandler(W,we,this._utils));else for(let{value:Fe}of Ye){let Je={key:W,value:Fe};if(!this._hasDeprecationWarned(Je)){let ct=typeof we=="string"?{key:we,value:Fe}:we;this._utils.logger.warn(this._deprecatedHandler(Je,ct,this._utils))}}};ve(ee.forward(le,this._utils),le).forEach(de);let Le=xe(ee.redirect(le,this._utils),le);if(Le.redirect.forEach(de),"remain"in Le){let Ue=Le.remain;k[W]=W in k?ee.overlap(k[W],Ue,this._utils):Ue,Se({value:Ue})}for(let{from:Ue,to:we}of Le.redirect)Se({value:Ue,redirectTo:we})}for(let W of X){let ee=C[W];this._applyUnknownHandler(W,ee,k,(le,de)=>{F.push({[le]:de})})}return F}_applyRequiredCheck(C){for(let k of Object.keys(this._utils.schemas))if(this._identifyMissing(k,C)&&this._identifyRequired(k))throw this._invalidHandler(k,te,this._utils)}_partitionOptionKeys(C){let[k,F]=T(Object.keys(C).filter(Q=>!this._identifyMissing(Q,C)),Q=>Q in this._utils.schemas);return{knownKeys:k,unknownKeys:F}}_applyValidation(C,k,F){let Q=ne(F.validate(C,this._utils),C);if(Q!==!0)throw this._invalidHandler(k,Q.value,this._utils)}_applyUnknownHandler(C,k,F,Q){let X=this._unknownHandler(C,k,this._utils);if(X)for(let W of Object.keys(X)){if(this._identifyMissing(W,X))continue;let ee=X[W];W in this._utils.schemas?Q(W,ee):F[W]=ee}}_applyPostprocess(C){let k=this._postprocess(C,this._utils);if(k!==ie){if(k.delete)for(let F of k.delete)delete C[F];if(k.override){let{knownKeys:F,unknownKeys:Q}=this._partitionOptionKeys(k.override);for(let X of F){let W=k.override[X];this._applyValidation(W,X,this._utils.schemas[X]),C[X]=W}for(let X of Q){let W=k.override[X];this._applyUnknownHandler(X,W,C,(ee,le)=>{let de=this._utils.schemas[ee];this._applyValidation(le,ee,de),C[ee]=le})}}}}},Et;function vi(C,k,{logger:F=!1,isCLI:Q=!1,passThrough:X=!1,FlagSchema:W,descriptor:ee}={}){if(Q){if(!W)throw new Error("'FlagSchema' option is required.");if(!ee)throw new Error("'descriptor' option is required.")}else ee=S;let le=X?Array.isArray(X)?(we,Ye)=>X.includes(we)?{[we]:Ye}:void 0:(we,Ye)=>({[we]:Ye}):(we,Ye,Fe)=>{let{_:Je,...ct}=Fe.schemas;return Bi(we,Ye,{...Fe,schemas:ct})},de=$i(k,{isCLI:Q,FlagSchema:W}),Se=new Zt(de,{logger:F,unknown:le,descriptor:ee}),Le=F!==!1;Le&&Et&&(Se._hasDeprecationWarned=Et);let Ue=Se.normalize(C);return Le&&(Et=Se._hasDeprecationWarned),Ue}function $i(C,{isCLI:k,FlagSchema:F}){let Q=[];k&&Q.push(Fa.create({name:"_"}));for(let X of C)Q.push(ci(X,{isCLI:k,optionInfos:C,FlagSchema:F})),X.alias&&k&&Q.push(Ia.create({name:X.alias,sourceName:X.name}));return Q}function ci(C,{isCLI:k,optionInfos:F,FlagSchema:Q}){let{name:X}=C,W={name:X},ee,le={};switch(C.type){case"int":ee=xt,k&&(W.preprocess=Number);break;case"string":ee=pt;break;case"choice":ee=Ge,W.choices=C.choices.map(de=>de!=null&&de.redirect?{...de,redirect:{to:{key:C.name,value:de.redirect}}}:de);break;case"boolean":ee=g;break;case"flag":ee=Q,W.flags=F.flatMap(de=>[de.alias,de.description&&de.name,de.oppositeDescription&&`no-${de.name}`].filter(Boolean));break;case"path":ee=pt;break;default:throw new Error(`Unexpected type ${C.type}`)}if(C.exception?W.validate=(de,Se,Le)=>C.exception(de)||Se.validate(de,Le):W.validate=(de,Se,Le)=>de===void 0||Se.validate(de,Le),C.redirect&&(le.redirect=de=>de?{to:{key:C.redirect.option,value:C.redirect.value}}:void 0),C.deprecated&&(le.deprecated=!0),k&&!C.array){let de=W.preprocess||(Se=>Se);W.preprocess=(Se,Le,Ue)=>Le.preprocess(de(Array.isArray(Se)?st(!1,Se,-1):Se),Ue)}return C.array?Ao.create({...k?{preprocess:de=>Array.isArray(de)?de:[de]}:{},...le,valueSchema:ee.create(W)}):ee.create({...W,...le})}var vn=vi;function Cr(C,k){if(!k)throw new Error("parserName is required.");for(let Q=C.length-1;Q>=0;Q--){let X=C[Q];if(X.parsers&&Object.prototype.hasOwnProperty.call(X.parsers,k))return X}let F=`Couldn't resolve parser "${k}".`;throw F+=" Plugins must be explicitly added to the standalone bundle.",new Yt(F)}function Uu(C,k){if(!k)throw new Error("astFormat is required.");for(let Q=C.length-1;Q>=0;Q--){let X=C[Q];if(X.printers&&Object.prototype.hasOwnProperty.call(X.printers,k))return X}let F=`Couldn't find plugin for AST format "${k}".`;throw F+=" Plugins must be explicitly added to the standalone bundle.",new Yt(F)}function Ts({plugins:C,parser:k}){let F=Cr(C,k);return $f(F,k)}function $f(C,k){let F=C.parsers[k];return typeof F=="function"?F():F}function a1(C,k){let F=C.printers[k];return typeof F=="function"?F():F}var Nf={astFormat:"estree",printer:{},originalText:void 0,locStart:null,locEnd:null};async function l1(C,k={}){var F;let Q={...C};if(!Q.parser)if(Q.filepath){if(Q.parser=O(Q,{physicalFile:Q.filepath}),!Q.parser)throw new Es(`No parser could be inferred for file "${Q.filepath}".`)}else throw new Es("No parser and no file path given, couldn't infer a parser.");let X=Hr({plugins:C.plugins,showDeprecated:!0}).options,W={...Nf,...Object.fromEntries(X.filter(we=>we.default!==void 0).map(we=>[we.name,we.default]))},ee=Cr(Q.plugins,Q.parser),le=await $f(ee,Q.parser);Q.astFormat=le.astFormat,Q.locEnd=le.locEnd,Q.locStart=le.locStart;let de=(F=ee.printers)!=null&&F[le.astFormat]?ee:Uu(Q.plugins,le.astFormat),Se=await a1(de,le.astFormat);Q.printer=Se;let Le=de.defaultOptions?Object.fromEntries(Object.entries(de.defaultOptions).filter(([,we])=>we!==void 0)):{},Ue={...W,...Le};for(let[we,Ye]of Object.entries(Ue))(Q[we]===null||Q[we]===void 0)&&(Q[we]=Ye);return Q.parser==="json"&&(Q.trailingComma="none"),vn(Q,X,{passThrough:Object.keys(Nf),...k})}var Is=l1,Rf=new Set(["tokens","comments","parent","enclosingNode","precedingNode","followingNode"]),u1=C=>Object.keys(C).filter(k=>!Rf.has(k));function h1(C){return C?k=>C(k,Rf):u1}var Ma=h1;function c1(C,k){let{printer:{massageAstNode:F,getVisitorKeys:Q}}=k;if(!F)return C;let X=Ma(Q),W=F.ignoredProperties??new Set;return ee(C);function ee(le,de){if(!(le!==null&&typeof le=="object"))return le;if(Array.isArray(le))return le.map(we=>ee(we,de)).filter(Boolean);let Se={},Le=new Set(X(le));for(let we in le)!Object.prototype.hasOwnProperty.call(le,we)||W.has(we)||(Le.has(we)?Se[we]=ee(le[we],le):Se[we]=le[we]);let Ue=F(le,Se,de);if(Ue!==null)return Ue??Se}}var f1=c1,d1=d(ae(),1);async function p1(C,k){let F=await Ts(k),Q=F.preprocess?F.preprocess(C,k):C;k.originalText=Q;let X;try{X=await F.parse(Q,k,k)}catch(W){m1(W,C)}return{text:Q,ast:X}}function m1(C,k){let{loc:F}=C;if(F){let Q=(0,d1.codeFrameColumns)(k,F,{highlightCode:!0});throw C.message+=`
`+Q,C.codeFrame=Q,C}throw C}var Eo=p1,Ba,zu,_o,$a,g1=class{constructor(C){m(this,Ba),m(this,_o),this.stack=[C]}get key(){let{stack:C,siblings:k}=this;return st(!1,C,k===null?-2:-4)??null}get index(){return this.siblings===null?null:st(!1,this.stack,-2)}get node(){return st(!1,this.stack,-1)}get parent(){return this.getNode(1)}get grandparent(){return this.getNode(2)}get isInArray(){return this.siblings!==null}get siblings(){let{stack:C}=this,k=st(!1,C,-3);return Array.isArray(k)?k:null}get next(){let{siblings:C}=this;return C===null?null:C[this.index+1]}get previous(){let{siblings:C}=this;return C===null?null:C[this.index-1]}get isFirst(){return this.index===0}get isLast(){let{siblings:C,index:k}=this;return C!==null&&k===C.length-1}get isRoot(){return this.stack.length===1}get root(){return this.stack[0]}get ancestors(){return[...y(this,_o,$a).call(this)]}getName(){let{stack:C}=this,{length:k}=C;return k>1?st(!1,C,-2):null}getValue(){return st(!1,this.stack,-1)}getNode(C=0){let k=y(this,Ba,zu).call(this,C);return k===-1?null:this.stack[k]}getParentNode(C=0){return this.getNode(C+1)}call(C,...k){let{stack:F}=this,{length:Q}=F,X=st(!1,F,-1);for(let W of k)X=X[W],F.push(W,X);try{return C(this)}finally{F.length=Q}}callParent(C,k=0){let F=y(this,Ba,zu).call(this,k+1),Q=this.stack.splice(F+1);try{return C(this)}finally{this.stack.push(...Q)}}each(C,...k){let{stack:F}=this,{length:Q}=F,X=st(!1,F,-1);for(let W of k)X=X[W],F.push(W,X);try{for(let W=0;W<X.length;++W)F.push(W,X[W]),C(this,W,X),F.length-=2}finally{F.length=Q}}map(C,...k){let F=[];return this.each((Q,X,W)=>{F[X]=C(Q,X,W)},...k),F}match(...C){let k=this.stack.length-1,F=null,Q=this.stack[k--];for(let X of C){if(Q===void 0)return!1;let W=null;if(typeof F=="number"&&(W=F,F=this.stack[k--],Q=this.stack[k--]),X&&!X(Q,F,W))return!1;F=this.stack[k--],Q=this.stack[k--]}return!0}findAncestor(C){for(let k of y(this,_o,$a).call(this))if(C(k))return k}hasAncestor(C){for(let k of y(this,_o,$a).call(this))if(C(k))return!0;return!1}};Ba=new WeakSet,zu=function(C){let{stack:k}=this;for(let F=k.length-1;F>=0;F-=2)if(!Array.isArray(k[F])&&--C<0)return F;return-1},_o=new WeakSet,$a=function*(){let{stack:C}=this;for(let k=C.length-3;k>=0;k-=2){let F=C[k];Array.isArray(F)||(yield F)}};var v1=g1,Xf=new Proxy(()=>{},{get:()=>Xf}),ju=Xf;function To(C){return(k,F,Q)=>{let X=!!(Q!=null&&Q.backwards);if(F===!1)return!1;let{length:W}=k,ee=F;for(;ee>=0&&ee<W;){let le=k.charAt(ee);if(C instanceof RegExp){if(!C.test(le))return ee}else if(!C.includes(le))return ee;X?ee--:ee++}return ee===-1||ee===W?ee:!1}}var y1=To(/\s/),br=To(" 	"),Wf=To(",; 	"),Yf=To(/[^\n\r]/);function O1(C,k,F){let Q=!!(F!=null&&F.backwards);if(k===!1)return!1;let X=C.charAt(k);if(Q){if(C.charAt(k-1)==="\r"&&X===`
`)return k-2;if(X===`
`||X==="\r"||X==="\u2028"||X==="\u2029")return k-1}else{if(X==="\r"&&C.charAt(k+1)===`
`)return k+2;if(X===`
`||X==="\r"||X==="\u2028"||X==="\u2029")return k+1}return k}var Kr=O1;function x1(C,k,F={}){let Q=br(C,F.backwards?k-1:k,F),X=Kr(C,Q,F);return Q!==X}var Sr=x1;function D1(C){return Array.isArray(C)&&C.length>0}var C1=D1;function b1(C){return C!==null&&typeof C=="object"}var S1=b1;function*Zf(C,k){let{getVisitorKeys:F,filter:Q=()=>!0}=k,X=W=>S1(W)&&Q(W);for(let W of F(C)){let ee=C[W];if(Array.isArray(ee))for(let le of ee)X(le)&&(yield le);else X(ee)&&(yield ee)}}function*w1(C,k){let F=[C];for(let Q=0;Q<F.length;Q++){let X=F[Q];for(let W of Zf(X,k))yield W,F.push(W)}}function P1(C){let k=C.type||C.kind||"(unknown type)",F=String(C.name||C.id&&(typeof C.id=="object"?C.id.name:C.id)||C.key&&(typeof C.key=="object"?C.key.name:C.key)||C.value&&(typeof C.value=="object"?"":String(C.value))||C.operator||"");return F.length>20&&(F=F.slice(0,19)+""),k+(F?" "+F:"")}function Gu(C,k){(C.comments??(C.comments=[])).push(k),k.printed=!1,k.nodeDescription=P1(C)}function Fs(C,k){k.leading=!0,k.trailing=!1,Gu(C,k)}function es(C,k,F){k.leading=!1,k.trailing=!1,F&&(k.marker=F),Gu(C,k)}function Qs(C,k){k.leading=!1,k.trailing=!0,Gu(C,k)}var Vu=new WeakMap;function qu(C,k){if(Vu.has(C))return Vu.get(C);let{printer:{getCommentChildNodes:F,canAttachComment:Q,getVisitorKeys:X},locStart:W,locEnd:ee}=k;if(!Q)return[];let le=((F==null?void 0:F(C,k))??[...Zf(C,{getVisitorKeys:Ma(X)})]).flatMap(de=>Q(de)?[de]:qu(de,k));return le.sort((de,Se)=>W(de)-W(Se)||ee(de)-ee(Se)),Vu.set(C,le),le}function Uf(C,k,F,Q){let{locStart:X,locEnd:W}=F,ee=X(k),le=W(k),de=qu(C,F),Se,Le,Ue=0,we=de.length;for(;Ue<we;){let Ye=Ue+we>>1,Fe=de[Ye],Je=X(Fe),ct=W(Fe);if(Je<=ee&&le<=ct)return Uf(Fe,k,F,Fe);if(ct<=ee){Se=Fe,Ue=Ye+1;continue}if(le<=Je){Le=Fe,we=Ye;continue}throw new Error("Comment location overlaps with node location")}if((Q==null?void 0:Q.type)==="TemplateLiteral"){let{quasis:Ye}=Q,Fe=Ju(Ye,k,F);Se&&Ju(Ye,Se,F)!==Fe&&(Se=null),Le&&Ju(Ye,Le,F)!==Fe&&(Le=null)}return{enclosingNode:Q,precedingNode:Se,followingNode:Le}}var Hu=()=>!1;function L1(C,k){let{comments:F}=C;if(delete C.comments,!C1(F)||!k.printer.canAttachComment)return;let Q=[],{locStart:X,locEnd:W,printer:{experimentalFeatures:{avoidAstMutation:ee=!1}={},handleComments:le={}},originalText:de}=k,{ownLine:Se=Hu,endOfLine:Le=Hu,remaining:Ue=Hu}=le,we=F.map((Ye,Fe)=>({...Uf(C,Ye,k),comment:Ye,text:de,options:k,ast:C,isLastComment:F.length-1===Fe}));for(let[Ye,Fe]of we.entries()){let{comment:Je,precedingNode:ct,enclosingNode:_t,followingNode:Lt,text:It,options:Bt,ast:zt,isLastComment:Ni}=Fe;if(Bt.parser==="json"||Bt.parser==="json5"||Bt.parser==="__js_expression"||Bt.parser==="__ts_expression"||Bt.parser==="__vue_expression"||Bt.parser==="__vue_ts_expression"){if(X(Je)-X(zt)<=0){Fs(zt,Je);continue}if(W(Je)-W(zt)>=0){Qs(zt,Je);continue}}let _i;if(ee?_i=[Fe]:(Je.enclosingNode=_t,Je.precedingNode=ct,Je.followingNode=Lt,_i=[Je,It,Bt,zt,Ni]),k1(It,Bt,we,Ye))Je.placement="ownLine",Se(..._i)||(Lt?Fs(Lt,Je):ct?Qs(ct,Je):es(_t||zt,Je));else if(A1(It,Bt,we,Ye))Je.placement="endOfLine",Le(..._i)||(ct?Qs(ct,Je):Lt?Fs(Lt,Je):es(_t||zt,Je));else if(Je.placement="remaining",!Ue(..._i))if(ct&&Lt){let Vi=Q.length;Vi>0&&Q[Vi-1].followingNode!==Lt&&jf(Q,Bt),Q.push(Fe)}else ct?Qs(ct,Je):Lt?Fs(Lt,Je):es(_t||zt,Je)}if(jf(Q,k),!ee)for(let Ye of F)delete Ye.precedingNode,delete Ye.enclosingNode,delete Ye.followingNode}var zf=C=>!/[\S\n\u2028\u2029]/.test(C);function k1(C,k,F,Q){let{comment:X,precedingNode:W}=F[Q],{locStart:ee,locEnd:le}=k,de=ee(X);if(W)for(let Se=Q-1;Se>=0;Se--){let{comment:Le,precedingNode:Ue}=F[Se];if(Ue!==W||!zf(C.slice(le(Le),de)))break;de=ee(Le)}return Sr(C,de,{backwards:!0})}function A1(C,k,F,Q){let{comment:X,followingNode:W}=F[Q],{locStart:ee,locEnd:le}=k,de=le(X);if(W)for(let Se=Q+1;Se<F.length;Se++){let{comment:Le,followingNode:Ue}=F[Se];if(Ue!==W||!zf(C.slice(de,ee(Le))))break;de=le(Le)}return Sr(C,de)}function jf(C,k){var F,Q;let X=C.length;if(X===0)return;let{precedingNode:W,followingNode:ee}=C[0],le=k.locStart(ee),de;for(de=X;de>0;--de){let{comment:Se,precedingNode:Le,followingNode:Ue}=C[de-1];ju.strictEqual(Le,W),ju.strictEqual(Ue,ee);let we=k.originalText.slice(k.locEnd(Se),le);if(((Q=(F=k.printer).isGap)==null?void 0:Q.call(F,we,k))??/^[\s(]*$/.test(we))le=k.locStart(Se);else break}for(let[Se,{comment:Le}]of C.entries())Se<de?Qs(W,Le):Fs(ee,Le);for(let Se of[W,ee])Se.comments&&Se.comments.length>1&&Se.comments.sort((Le,Ue)=>k.locStart(Le)-k.locStart(Ue));C.length=0}function Ju(C,k,F){let Q=F.locStart(k)-1;for(let X=1;X<C.length;++X)if(Q<F.locStart(C[X]))return X-1;return 0}function E1(C,k){let F=k-1;F=br(C,F,{backwards:!0}),F=Kr(C,F,{backwards:!0}),F=br(C,F,{backwards:!0});let Q=Kr(C,F,{backwards:!0});return F!==Q}var Ku=E1;function Gf(C,k){let F=C.node;return F.printed=!0,k.printer.printComment(C,k)}function _1(C,k){var F;let Q=C.node,X=[Gf(C,k)],{printer:W,originalText:ee,locStart:le,locEnd:de}=k;if((F=W.isBlockComment)!=null&&F.call(W,Q)){let Le=Sr(ee,de(Q))?Sr(ee,le(Q),{backwards:!0})?Wt:Vt:" ";X.push(Le)}else X.push(Wt);let Se=Kr(ee,br(ee,de(Q)));return Se!==!1&&Sr(ee,Se)&&X.push(Wt),X}function T1(C,k,F){var Q;let X=C.node,W=Gf(C,k),{printer:ee,originalText:le,locStart:de}=k,Se=(Q=ee.isBlockComment)==null?void 0:Q.call(ee,X);if(F!=null&&F.hasLineSuffix&&!(F!=null&&F.isBlock)||Sr(le,de(X),{backwards:!0})){let Le=Ku(le,de(X));return{doc:ji([Wt,Le?Wt:"",W]),isBlock:Se,hasLineSuffix:!0}}return!Se||F!=null&&F.hasLineSuffix?{doc:[ji([" ",W]),kt],isBlock:Se,hasLineSuffix:!0}:{doc:[" ",W],isBlock:Se,hasLineSuffix:!1}}function I1(C,k){let F=C.node;if(!F)return{};let Q=k[Symbol.for("printedComments")];if((F.comments||[]).filter(le=>!Q.has(le)).length===0)return{leading:"",trailing:""};let X=[],W=[],ee;return C.each(()=>{let le=C.node;if(Q!=null&&Q.has(le))return;let{leading:de,trailing:Se}=le;de?X.push(_1(C,k)):Se&&(ee=T1(C,k,ee),W.push(ee.doc))},"comments"),{leading:X,trailing:W}}function F1(C,k,F){let{leading:Q,trailing:X}=I1(C,F);return!Q&&!X?k:Ls(k,W=>[Q,W,X])}function Q1(C){let{[Symbol.for("comments")]:k,[Symbol.for("printedComments")]:F}=C;for(let Q of k){if(!Q.printed&&!F.has(Q))throw new Error('Comment "'+Q.value.trim()+'" was not printed. Please report this error!');delete Q.printed}}async function M1(C,k,F,Q,X){let{embeddedLanguageFormatting:W,printer:{embed:ee,hasPrettierIgnore:le=()=>!1,getVisitorKeys:de}}=F;if(!ee||W!=="auto")return;if(ee.length>2)throw new Error("printer.embed has too many parameters. The API changed in Prettier v3. Please update your plugin. See https://prettier.io/docs/en/plugins.html#optional-embed");let Se=Ma(ee.getVisitorKeys??de),Le=[];Ye();let Ue=C.stack;for(let{print:Fe,node:Je,pathStack:ct}of Le)try{C.stack=ct;let _t=await Fe(we,k,C,F);_t&&X.set(Je,_t)}catch(_t){if(globalThis.PRETTIER_DEBUG)throw _t}C.stack=Ue;function we(Fe,Je){return B1(Fe,Je,F,Q)}function Ye(){let{node:Fe}=C;if(Fe===null||typeof Fe!="object"||le(C))return;for(let ct of Se(Fe))Array.isArray(Fe[ct])?C.each(Ye,ct):C.call(Ye,ct);let Je=ee(C,F);if(Je){if(typeof Je=="function"){Le.push({print:Je,node:Fe,pathStack:[...C.stack]});return}X.set(Fe,Je)}}}async function B1(C,k,F,Q){let X=await Is({...F,...k,parentParser:F.parser,originalText:C},{passThrough:!0}),{ast:W}=await Eo(C,X),ee=await Q(W,X);return ws(ee)}function $1(C,k){let{originalText:F,[Symbol.for("comments")]:Q,locStart:X,locEnd:W,[Symbol.for("printedComments")]:ee}=k,{node:le}=C,de=X(le),Se=W(le);for(let Le of Q)X(Le)>=de&&W(Le)<=Se&&ee.add(Le);return F.slice(de,Se)}var N1=$1;async function Na(C,k){({ast:C}=await qf(C,k));let F=new Map,Q=new v1(C),X=new Map;await M1(Q,ee,k,Na,X);let W=await Vf(Q,k,ee,void 0,X);return Q1(k),W;function ee(de,Se){return de===void 0||de===Q?le(Se):Array.isArray(de)?Q.call(()=>le(Se),...de):Q.call(()=>le(Se),de)}function le(de){let Se=Q.node;if(Se==null)return"";let Le=Se&&typeof Se=="object"&&de===void 0;if(Le&&F.has(Se))return F.get(Se);let Ue=Vf(Q,k,ee,de,X);return Le&&F.set(Se,Ue),Ue}}function Vf(C,k,F,Q,X){var W;let{node:ee}=C,{printer:le}=k,de;return(W=le.hasPrettierIgnore)!=null&&W.call(le,C)?de=N1(C,k):X.has(ee)?de=X.get(ee):de=le.print(C,k,F,Q),ee===k.cursorNode&&(de=Ls(de,Se=>[ln,Se,ln])),le.printComment&&(!le.willPrintOwnComments||!le.willPrintOwnComments(C,k))&&(de=F1(C,de,k)),de}async function qf(C,k){let F=C.comments??[];k[Symbol.for("comments")]=F,k[Symbol.for("tokens")]=C.tokens??[],k[Symbol.for("printedComments")]=new Set,L1(C,k);let{printer:{preprocess:Q}}=k;return C=Q?await Q(C,k):C,{ast:C,comments:F}}var R1=({parser:C})=>C==="json"||C==="json5"||C==="json-stringify";function X1(C,k){let F=[C.node,...C.parentNodes],Q=new Set([k.node,...k.parentNodes]);return F.find(X=>Jf.has(X.type)&&Q.has(X))}function Hf(C){let k=C.length-1;for(;;){let F=C[k];if((F==null?void 0:F.type)==="Program"||(F==null?void 0:F.type)==="File")k--;else break}return C.slice(0,k+1)}function W1(C,k,{locStart:F,locEnd:Q}){let X=C.node,W=k.node;if(X===W)return{startNode:X,endNode:W};let ee=F(C.node);for(let de of Hf(k.parentNodes))if(F(de)>=ee)W=de;else break;let le=Q(k.node);for(let de of Hf(C.parentNodes)){if(Q(de)<=le)X=de;else break;if(X===W)break}return{startNode:X,endNode:W}}function eh(C,k,F,Q,X=[],W){let{locStart:ee,locEnd:le}=F,de=ee(C),Se=le(C);if(!(k>Se||k<de||W==="rangeEnd"&&k===de||W==="rangeStart"&&k===Se)){for(let Le of qu(C,F)){let Ue=eh(Le,k,F,Q,[C,...X],W);if(Ue)return Ue}if(!Q||Q(C,X[0]))return{node:C,parentNodes:X}}}function Y1(C,k){return k!=="DeclareExportDeclaration"&&C!=="TypeParameterDeclaration"&&(C==="Directive"||C==="TypeAlias"||C==="TSExportAssignment"||C.startsWith("Declare")||C.startsWith("TSDeclare")||C.endsWith("Statement")||C.endsWith("Declaration"))}var Jf=new Set(["JsonRoot","ObjectExpression","ArrayExpression","StringLiteral","NumericLiteral","BooleanLiteral","NullLiteral","UnaryExpression","TemplateLiteral"]),Z1=new Set(["OperationDefinition","FragmentDefinition","VariableDefinition","TypeExtensionDefinition","ObjectTypeDefinition","FieldDefinition","DirectiveDefinition","EnumTypeDefinition","EnumValueDefinition","InputValueDefinition","InputObjectTypeDefinition","SchemaDefinition","OperationTypeDefinition","InterfaceTypeDefinition","UnionTypeDefinition","ScalarTypeDefinition"]);function Kf(C,k,F){if(!k)return!1;switch(C.parser){case"flow":case"babel":case"babel-flow":case"babel-ts":case"typescript":case"acorn":case"espree":case"meriyah":case"__babel_estree":return Y1(k.type,F==null?void 0:F.type);case"json":case"json5":case"json-stringify":return Jf.has(k.type);case"graphql":return Z1.has(k.kind);case"vue":return k.tag!=="root"}return!1}function U1(C,k,F){let{rangeStart:Q,rangeEnd:X,locStart:W,locEnd:ee}=k;ju.ok(X>Q);let le=C.slice(Q,X).search(/\S/),de=le===-1;if(!de)for(Q+=le;X>Q&&!/\S/.test(C[X-1]);--X);let Se=eh(F,Q,k,(Ye,Fe)=>Kf(k,Ye,Fe),[],"rangeStart"),Le=de?Se:eh(F,X,k,Ye=>Kf(k,Ye),[],"rangeEnd");if(!Se||!Le)return{rangeStart:0,rangeEnd:0};let Ue,we;if(R1(k)){let Ye=X1(Se,Le);Ue=Ye,we=Ye}else({startNode:Ue,endNode:we}=W1(Se,Le,k));return{rangeStart:Math.min(W(Ue),W(we)),rangeEnd:Math.max(ee(Ue),ee(we))}}function z1(C,k){let{cursorOffset:F,locStart:Q,locEnd:X}=k,W=Ma(k.printer.getVisitorKeys),ee=de=>Q(de)<=F&&X(de)>=F,le=C;for(let de of w1(C,{getVisitorKeys:W,filter:ee}))le=de;return le}var j1=z1,ed="\uFEFF",td=Symbol("cursor");async function id(C,k,F=0){if(!C||C.trim().length===0)return{formatted:"",cursorOffset:-1,comments:[]};let{ast:Q,text:X}=await Eo(C,k);k.cursorOffset>=0&&(k.cursorNode=j1(Q,k));let W=await Na(Q,k);F>0&&(W=ye([Wt,W],F,k.tabWidth));let ee=xr(W,k);if(F>0){let de=ee.formatted.trim();ee.cursorNodeStart!==void 0&&(ee.cursorNodeStart-=ee.formatted.indexOf(de)),ee.formatted=de+An(k.endOfLine)}let le=k[Symbol.for("comments")];if(k.cursorOffset>=0){let de,Se,Le,Ue,we;if(k.cursorNode&&ee.cursorNodeText?(de=k.locStart(k.cursorNode),Se=X.slice(de,k.locEnd(k.cursorNode)),Le=k.cursorOffset-de,Ue=ee.cursorNodeStart,we=ee.cursorNodeText):(de=0,Se=X,Le=k.cursorOffset,Ue=0,we=ee.formatted),Se===we)return{formatted:ee.formatted,cursorOffset:Ue+Le,comments:le};let Ye=Se.split("");Ye.splice(Le,0,td);let Fe=we.split(""),Je=(0,U.diffArrays)(Ye,Fe),ct=Ue;for(let _t of Je)if(_t.removed){if(_t.value.includes(td))break}else ct+=_t.count;return{formatted:ee.formatted,cursorOffset:ct,comments:le}}return{formatted:ee.formatted,cursorOffset:-1,comments:le}}async function G1(C,k){let{ast:F,text:Q}=await Eo(C,k),{rangeStart:X,rangeEnd:W}=U1(Q,k,F),ee=Q.slice(X,W),le=Math.min(X,Q.lastIndexOf(`
`,X)+1),de=Q.slice(le,X).match(/^\s*/)[0],Se=nn(de,k.tabWidth),Le=await id(ee,{...k,rangeStart:0,rangeEnd:Number.POSITIVE_INFINITY,cursorOffset:k.cursorOffset>X&&k.cursorOffset<=W?k.cursorOffset-X:-1,endOfLine:"lf"},Se),Ue=Le.formatted.trimEnd(),{cursorOffset:we}=k;we>W?we+=Ue.length-ee.length:Le.cursorOffset>=0&&(we=Le.cursorOffset+X);let Ye=Q.slice(0,X)+Ue+Q.slice(W);if(k.endOfLine!=="lf"){let Fe=An(k.endOfLine);we>=0&&Fe===`\r
`&&(we+=un(Ye.slice(0,we),`
`)),Ye=fe(!1,Ye,`
`,Fe)}return{formatted:Ye,cursorOffset:we,comments:Le.comments}}function th(C,k,F){return typeof k!="number"||Number.isNaN(k)||k<0||k>C.length?F:k}function nd(C,k){let{cursorOffset:F,rangeStart:Q,rangeEnd:X}=k;return F=th(C,F,-1),Q=th(C,Q,0),X=th(C,X,C.length),{...k,cursorOffset:F,rangeStart:Q,rangeEnd:X}}function rd(C,k){let{cursorOffset:F,rangeStart:Q,rangeEnd:X,endOfLine:W}=nd(C,k),ee=C.charAt(0)===ed;if(ee&&(C=C.slice(1),F--,Q--,X--),W==="auto"&&(W=ui(C)),C.includes("\r")){let le=de=>un(C.slice(0,Math.max(de,0)),`\r
`);F-=le(F),Q-=le(Q),X-=le(X),C=zr(C)}return{hasBOM:ee,text:C,options:nd(C,{...k,cursorOffset:F,rangeStart:Q,rangeEnd:X,endOfLine:W})}}async function sd(C,k){let F=await Ts(k);return!F.hasPragma||F.hasPragma(C)}async function od(C,k){let{hasBOM:F,text:Q,options:X}=rd(C,await Is(k));if(X.rangeStart>=X.rangeEnd&&Q!==""||X.requirePragma&&!await sd(Q,X))return{formatted:C,cursorOffset:k.cursorOffset,comments:[]};let W;return X.rangeStart>0||X.rangeEnd<Q.length?W=await G1(Q,X):(!X.requirePragma&&X.insertPragma&&X.printer.insertPragma&&!await sd(Q,X)&&(Q=X.printer.insertPragma(Q)),W=await id(Q,X)),F&&(W.formatted=ed+W.formatted,W.cursorOffset>=0&&W.cursorOffset++),W}async function V1(C,k,F){let{text:Q,options:X}=rd(C,await Is(k)),W=await Eo(Q,X);return F&&(F.preprocessForPrint&&(W.ast=await qf(W.ast,X)),F.massage&&(W.ast=f1(W.ast,X))),W}async function q1(C,k){k=await Is(k);let F=await Na(C,k);return xr(F,k)}async function H1(C,k){let F=Lo(C),{formatted:Q}=await od(F,{...k,parser:"__js_expression"});return Q}async function J1(C,k){k=await Is(k);let{ast:F}=await Eo(C,k);return Na(F,k)}async function K1(C,k){return xr(C,await Is(k))}var ad={};c(ad,{addDanglingComment:()=>es,addLeadingComment:()=>Fs,addTrailingComment:()=>Qs,getAlignmentSize:()=>nn,getIndentSize:()=>lO,getMaxContinuousCount:()=>oO,getNextNonSpaceNonCommentCharacter:()=>pO,getNextNonSpaceNonCommentCharacterIndex:()=>yO,getStringWidth:()=>Mi,hasNewline:()=>Sr,hasNewlineInRange:()=>hO,hasSpaces:()=>fO,isNextLineEmpty:()=>CO,isNextLineEmptyAfterIndex:()=>sh,isPreviousLineEmpty:()=>xO,makeString:()=>gO,skip:()=>To,skipEverythingButNewLine:()=>Yf,skipInlineComment:()=>ih,skipNewline:()=>Kr,skipSpaces:()=>br,skipToLineEnd:()=>Wf,skipTrailingComment:()=>nh,skipWhitespace:()=>y1});function eO(C,k){if(k===!1)return!1;if(C.charAt(k)==="/"&&C.charAt(k+1)==="*"){for(let F=k+2;F<C.length;++F)if(C.charAt(F)==="*"&&C.charAt(F+1)==="/")return F+2}return k}var ih=eO;function tO(C,k){return k===!1?!1:C.charAt(k)==="/"&&C.charAt(k+1)==="/"?Yf(C,k):k}var nh=tO;function iO(C,k){let F=null,Q=k;for(;Q!==F;)F=Q,Q=br(C,Q),Q=ih(C,Q),Q=nh(C,Q),Q=Kr(C,Q);return Q}var rh=iO;function nO(C,k){let F=null,Q=k;for(;Q!==F;)F=Q,Q=Wf(C,Q),Q=ih(C,Q),Q=br(C,Q);return Q=nh(C,Q),Q=Kr(C,Q),Q!==!1&&Sr(C,Q)}var sh=nO;function rO(C){if(typeof C!="string")throw new TypeError("Expected a string");return C.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function sO(C,k){let F=C.match(new RegExp(`(${rO(k)})+`,"g"));return F===null?0:F.reduce((Q,X)=>Math.max(Q,X.length/k.length),0)}var oO=sO;function aO(C,k){let F=C.lastIndexOf(`
`);return F===-1?0:nn(C.slice(F+1).match(/^[\t ]*/)[0],k)}var lO=aO;function uO(C,k,F){for(let Q=k;Q<F;++Q)if(C.charAt(Q)===`
`)return!0;return!1}var hO=uO;function cO(C,k,F={}){return br(C,F.backwards?k-1:k,F)!==k}var fO=cO;function dO(C,k){let F=rh(C,k);return F===!1?"":C.charAt(F)}var pO=dO;function mO(C,k,F){let Q=k==='"'?"'":'"',X=fe(!1,C,/\\(.)|(["'])/gs,(W,ee,le)=>ee===Q?ee:le===k?"\\"+le:le||(F&&/^[^\n\r"'0-7\\bfnrt-vx\u2028\u2029]$/.test(ee)?ee:"\\"+ee));return k+X+k}var gO=mO;function vO(C,k,F){return rh(C,F(k))}function yO(C,k){return arguments.length===2||typeof k=="number"?rh(C,k):vO(...arguments)}function OO(C,k,F){return Ku(C,F(k))}function xO(C,k){return arguments.length===2||typeof k=="number"?Ku(C,k):OO(...arguments)}function DO(C,k,F){return sh(C,F(k))}function CO(C,k){return arguments.length===2||typeof k=="number"?sh(C,k):DO(...arguments)}var ld={};c(ld,{builders:()=>bO,printer:()=>SO,utils:()=>wO});var bO={join:kn,line:Vt,softline:Ln,hardline:Wt,literalline:gn,group:me,conditionalGroup:at,fill:mt,lineSuffix:ji,lineSuffixBoundary:pi,cursor:ln,breakParent:kt,ifBreak:Pt,trim:At,indent:Ie,indentIfBreak:li,align:Be,addAlignmentToDoc:ye,markAsRoot:Ke,dedentToRoot:Ze,dedent:Ne,hardlineWithoutBreakParent:Qt,literallineWithoutBreakParent:ei,label:be,concat:C=>C},SO={printDocToString:xr},wO={willBreak:Do,traverseDoc:J,findInDoc:yr,mapDoc:vr,removeLines:So,stripTrailingHardline:ws,replaceEndOfLine:Vr,canBreak:wo},PO="3.0.3";function ts(C,k=1){return async(...F)=>{let Q=F[k]??{},X=Q.plugins??[];return F[k]={...Q,plugins:Array.isArray(X)?X:Object.values(X)},C(...F)}}var ud=ts(od);async function hd(C,k){let{formatted:F}=await ud(C,{...k,cursorOffset:-1});return F}async function LO(C,k){return await hd(C,k)===C}var kO=ts(Hr,0),AO={parse:ts(V1),formatAST:ts(q1),formatDoc:ts(H1),printToDoc:ts(J1),printDocToString:ts(K1)};return v(K)})})(Hy);function $p(i){return Zi`
		${UL(i)}

		<div class="content">
			<div class="left-side">
				<div class="code-editor"></div>
				${i.error!==""?Zi`<div class="error-log">${i.error}</div>`:""}
			</div>
			<div class="right-side" @mousedown=${()=>rt("RUN",{flatten:!1})}>
				${_L(i)}
				${i.selectedPathIndex>=0?Zi`
						<div class="path-selected">
							<div
								class="clear-selected-path"
								@click=${Uy}>
								unselect path
							</div>
							<select
								.value=${i.cubicHandleManipulation}
								@input=${e=>{i.cubicHandleManipulation=e.target.value,rt("RENDER")}}>
							  <option value="symmetric">symmetric</option>
							  <option value="colinear">colinear</option>
							  <option value="broken">broken</option>
							</select>
							<div>hold z to toggle junction type</div>
							<div>hold x to delete point</div>
						</div>
						`:""}
				<div class="footprint-toolbox">
					${i.inputs.length>0?Zi`<div class="toolbox-title">Inputs:</div>`:""}
					<div class="input-panel">
						${i.inputs.map(e=>$L[e[0].type](...e,i))}
					</div>
					<div class="toolbox-title">Components:</div>
					<div class="import-button-container">
						<div class="import-button" @mousedown=${()=>{i.componentMenu=!0,rt("RENDER")}}>import</div>
		      </div>
					<div class="component-list">
						${Object.values(i.footprints).map(ML)}
					</div>
					${CL(i)}
					<div class="nub" @click=${()=>{document.querySelector(".footprint-toolbox").classList.toggle("footprint-toolbox-closed")}}></div>
				</div>
				${i.previewFootprint?SL(...i.previewFootprint):""}
			</div>
			<div id="vertical-bar"></div>
			${DL(lL)}
		</div>
		<div class="drop-modal hidden">
			<div class="drop-info">Upload JS file, KiCAD Component Module, SVG Component, or JSON Component</div>
		</div>
		${YL(i)}
		${ZL(i)}
	`}const UL=i=>Zi`
	<div class="top-menu">
		<div class="left">
			<img src=${BL} class="logo" alt="fab-circuit-logo" />
			<div
				class="menu-item"
				@click=${()=>rt("RUN")}>
				run (shift + enter)
			</div>
			<div class="menu-item" @click=${()=>rt("NEW_FILE")}>new</div>
			 <div class="menu-item dropdown-container">
				download
				<div class="dropdown-content">
					<div class="menu-item"
						@click=${()=>{rt("RUN",{flatten:!0}),yL(i)}}>
						svg
					</div class="menu-item">
					<div class="menu-item"
						@click=${()=>{rt("RUN",{flatten:!0}),OL(i)}}>
						png
					</div class="menu-item">
					<div class="menu-item"
						@click=${()=>$y(`${i.name===""?"anon":i.name}.js`,i.codemirror.view.state.doc.toString())}>
						js
					</div class="menu-item">
					<div class="menu-item"
						@click=${e=>{i.downloadGerberModal=!0,rt("RENDER")}}>
						gerber
					</div class="menu-item">
					<div class="menu-item"
						@click=${e=>{i.downloadKiCadModal=!0,rt("RENDER")}}>
						kicad
					</div>
					<input 
						class="input-item"
						style="margin: 3px;"
						.value=${i.name}
						placeholder="name-here"
						@input=${e=>{i.name=e.target.value}}/>
				</div>
			</div>
			<div
				class="menu-item center-button"
				@click=${()=>{i.panZoomParams.setScaleXY(i.limits)}}>
				center-view
			</div>
			<div
				class="menu-item center-button"
				@click=${async()=>{const e=i.codemirror.view.state.doc.toString();console.log(e);const t=await Hy.exports.format(e,{semi:!1,parser:"babel"});console.log(t)}}>
				pretty-code
			</div>
			<div class="menu-item dropdown-container">
				options
				<div class="dropdown-content">
					<div class="check-item">
						<span>handles</span>
						<input
							type="checkbox"
							checked=${i.viewHandles}
							@change=${e=>{i.viewHandles=e.target.checked,rt("RENDER")}}
							class="handles-checkbox">
						</input>
					</div>
					<div class="check-item">
						<span>grid</span>
						<input
							type="checkbox"
							.checked=${i.grid}
							@change=${e=>{i.grid=e.target.checked,rt("RENDER")}}
							>
						</input>
					</div>
					<div class="check-item">
						<span>adaptiveGrid</span>
						<input
							type="checkbox"
							.checked=${i.adaptiveGrid}
							@change=${e=>{i.adaptiveGrid=e.target.checked,rt("RENDER")}}
							>
						</input>
					</div>
					<div class="input-item">
						<span>grid size:</span>
						<input
							type="number"
							step="0.005"
							min="0"
							.value=${i.gridSize}
							@change=${e=>{i.gridSize=Number(e.target.value),rt("RENDER")}}>
						</input>
					</div>
					<div class="check-item">
						<span>snapToPad</span>
						<input
							type="checkbox"
							.checked=${i.snapToPad}
							@change=${e=>{i.snapToPad=e.target.checked,rt("RENDER")}}
							>
						</input>
					</div>
					<div class="check-item">
						<span>snapToPad Radius</span>
						<input
							type="number"
							step="0.005"
							min="0"
							.value=${i.snapToPadRadius}
							@change=${e=>{i.snapToPadRadius=Number(e.target.value),rt("RENDER")}}>
						</input>
					</div>
					<div class="check-item">
						<span>vim mode</span>
						<input
							type="checkbox"
							.checked=${i.vimMode}
							@change=${e=>{i.vimMode=e.target.checked;const t=document.querySelector(".code-editor"),n=i.codemirror.view.state.doc.toString();t.innerHTML="",i.codemirror=Ty(t,i.vimMode),i.codemirror.view.dispatch({changes:{from:0,insert:n}})}}
							>
						</input>
					</div>
				</div>
			</div>
		</div>
		<a class="github-logo" href="https://github.com/leomcelroy/svg-pcb">
			<i class="fa fa-github" style="font-size:24px"></i>
		</a>
	</div>
`;function zi(i){this._line=this._col=this._pos=0,this._stream=i}zi.not_whitespace_or_end=/^(\S|$)/;zi.space_quote_paren_escaped_or_end=/^(\s|\\|"|'|`|,|\(|\)|$)/;zi.string_or_escaped_or_end=/^(\\|"|$)/;zi.string_delimiters=/["]/;zi.quotes=/['`,]/;zi.quotes_map={"'":"quote","`":"quasiquote",",":"unquote"};zi.prototype={peek:GL,consume:VL,until:qL,error:jL,string:HL,atom:JL,quoted:KL,expr:ek,list:tk};function zL(i){var e=new zi(i),t=e.expr();return t instanceof Error?t:e.peek()!=""?e.error("Superfluous characters after expression: `"+e.peek()+"`"):t}function jL(i){var e=new Error("Syntax error: "+i);return e.line=this._line+1,e.col=this._col+1,e}function GL(){return this._stream.length==this._pos?"":this._stream[this._pos]}function VL(){if(this._stream.length==this._pos)return"";var i=this._stream[this._pos];return this._pos+=1,i=="\r"?(this.peek()==`
`&&(this._pos+=1,i+=`
`),this._line++,this._col=0):i==`
`?(this._line++,this._col=0):this._col++,i}function qL(i){for(var e="";!i.test(this.peek());)e+=this.consume();return e}function HL(){for(var i=this.consume(),e="";;){e+=this.until(zi.string_or_escaped_or_end);var t=this.peek();if(t=="")return this.error("Unterminated string literal");if(t==i){this.consume();break}if(t=="\\"){this.consume(),t=this.peek(),t=="r"?(this.consume(),e+="\r"):t=="t"?(this.consume(),e+="	"):t=="n"?(this.consume(),e+=`
`):t=="f"?(this.consume(),e+="\f"):t=="b"?(this.consume(),e+="\b"):e+=this.consume();continue}e+=this.consume()}return new String(e)}function JL(){if(zi.string_delimiters.test(this.peek()))return this.string();for(var i="";;){i+=this.until(zi.space_quote_paren_escaped_or_end);var e=this.peek();if(e=="\\"){this.consume(),i+=this.consume();continue}break}return i}function KL(){var i=this.consume(),e=zi.quotes_map[i];e=="unquote"&&this.peek()=="@"&&(this.consume(),e="unquote-splicing",i=",@"),this.until(zi.not_whitespace_or_end);var t=this.expr();return t instanceof Error?t:t===""?this.error("Unexpected `"+this.peek()+"` after `"+i+"`"):[e,t]}function ek(){if(this.until(zi.not_whitespace_or_end),zi.quotes.test(this.peek()))return this.quoted();var i=this.peek()=="("?this.list():this.atom();return this.until(zi.not_whitespace_or_end),i}function tk(){if(this.peek()!="(")return this.error("Expected `(` - saw `"+this.peek()+"` instead.");this.consume();var i=[],e=this.expr();if(e instanceof Error)return e;if(e!=="")for(i.push(e);(e=this.expr())!=="";){if(e instanceof Error)return e;i.push(e)}return this.peek()!=")"?this.error("Expected `)` - saw: `"+this.peek()+"`"):(this.consume(),i)}const ik=i=>i.reduce((e,t)=>{let n=t.split(".");return n.length===0?e:n[0]!=="*"?[...e,t]:[...e,`F.${n[1]}`,`B.${n[1]}`]},[]),Yo=(i,e)=>{const t=i.findIndex(r=>Array.isArray(r)&&r[0]===e),n=i[t];return n?n.slice(1):[]};function nk(i){let e=zL(i),t=1/Cs;const n={};for(const o of e){const s=o[0]==="pad",a=o[2]==="smd",l=o[2]==="thru_hole",h=o[3];if(s&&(a||l)){let c=o[1],p=Yo(o,"at").map(w=>Number(w)*t);p[1]=-p[1];let d=Yo(o,"layers");d=ik(d);let v=Yo(o,"size").map(w=>Number(w)*t);const D={rect:()=>Om(...v),roundrect:()=>{const w=Number(Yo(o,"roundrect_rratio")[0]);return[rk(0,0,...v,w)]},circle:()=>Il(...v.map(w=>w/2)),oval:()=>Il(...v.map(w=>w/2)),custom:()=>[Yo(o,"primitives")[0][1].slice(1).map(I=>[Number(I[1])*t,Number(I[2])*t])]};let m=h in D?D[h]():[];const y={pos:p,shape:m,layers:d},x=o.findIndex(w=>Array.isArray(w)&&w[0]==="drill");if(x!==-1){let w=Number(o[x][1])*t;y.drill={diameter:w,start:"F.Cu",end:"B.Cu",plated:!0}}n[c]===void 0?n[c]=[y]:n[c].push(y)}}let r=Object.entries(n).reduce((o,s)=>{const[a,l]=s;return l.length===1?o[a]=l[0]:l.forEach((h,c)=>{o[`${a}_${c+1}`]=h}),o},{});return Object.keys(r).forEach(o=>{let s="";r[o].shape.forEach(l=>{l.forEach((h,c)=>{const[p,d]=h;s+=`${c==0?"M":"L"} ${p} ${d} `})}),r[o].shape=s}),r}function rk(i,e,t,n,r,o=10){for(var s=Math.min(t,n)*r/2,a=[i-t/2+s,e-n/2+s],l=[i+t/2-s,e-n/2+s],h=[i+t/2-s,e+n/2-s],c=[i-t/2+s,e+n/2-s],p=[],d=0;d<o;d++){var v=Math.PI/2*d/(o-1);p.push([a[0]-s*Math.cos(v),a[1]-s*Math.sin(v)])}for(var d=0;d<o;d++){var v=Math.PI/2*d/(o-1);p.push([l[0]+s*Math.sin(v),l[1]-s*Math.cos(v)])}for(var d=0;d<o;d++){var v=Math.PI/2*d/(o-1);p.push([h[0]+s*Math.cos(v),h[1]+s*Math.sin(v)])}for(var d=0;d<o;d++){var v=Math.PI/2*d/(o-1);p.push([c[0]-s*Math.sin(v),c[1]+s*Math.cos(v)])}return p.push(p[0]),p}const Np=["pt","path","input","footprint","renderPCB"],sk=/(const|let|var)([^=]+)/,ok=/([^\(]+)/;function ak(i,e){var a,l;const t=[],n=e.cursor(),r=()=>i.slice(n.from,n.to);n.moveTo(0);const o=/(const|let|var)([^=]*)=\s*new\s+PCB\s*\(\s*\)/;let s=i.match(o);s=s?s[2].trim():null,s&&Np.push(`${s}.add`);do if(r(),n.name==="CallExpression"){const{name:h,args:c,from:p,to:d}=lk(n,i);if(Np.includes(h)){let v="";if(((l=(a=n.node)==null?void 0:a.parent)==null?void 0:l.name)==="VariableDeclaration"){const m=n.node.parent;v=i.slice(m.from,m.to).match(sk)[2].trim()}t.push({functionName:h===`${s}.add`?"component":h,from:p,to:d,snippet:c,variableName:v})}}while(n.next());return{inserts:t}}function lk(i,e){const t=i.node,r=e.slice(t.from,t.to).match(ok)[1],o=t.from+r.length,s=t.to,a=e.slice(o,s),l=r.trim(),h=a.trim();return{name:l,args:h,from:o,to:s}}function uk(i,e){let t=[],n=0;return e.sort((r,o)=>r.from-o.from),e.forEach(r=>{const{from:o,to:s,insert:a}=r;t.push(i.substr(n,o-n)),t.push(a),n=s!==void 0?s:o}),t.push(i.substr(n)),t.length>0&&(i=t.join("")),i}function Tl(i,e){const t=new RegExp(`\\/\\*\\s*--\\s*${i}\\s*--\\s*\\*\\/`,"g"),r=e.matchAll(t).next();return r.value!==void 0?r.value.index+r.value[0].length+1:null}const hk=(i,e,t=["F.Cu","B.Cu"])=>({via:{pos:[0,0],layers:t,shape:hr(Il(e/2)),drill:{diameter:i,start:t[0],end:t[1],plated:!0}}}),ck=([i,e],[t,n])=>[i+t,e+n],fk=([i,e],t)=>[i*Math.cos(t)-e*Math.sin(t),e*Math.cos(t)+i*Math.sin(t)];class dk{constructor({pads:e,layers:t,drills:n,footprint:r,pos:o,padShapes:s,id:a,rotation:l}){this.pads=e,this.layers=t,this.footprint=r,this.drills=n,this._pos=o,this.rotation=l,this.padShapes=s,this.id=a}pad(e){return this.pads[e]}padX(e){return this.pads[e][0]}padY(e){return this.pads[e][1]}get pos(){return this._pos}get posX(){return this._pos[0]}get posY(){return this._pos[1]}}const Nh={};function pk(i,e={}){let t=e.translate||[0,0],n=e.rotate||0,r=e.padLabelSize||.02,o=e.flip||!1,s=e.id||crypto.randomUUID();const a=n*Math.PI/180,l={},h={},c=[],p=[];let d={};for(const v in i){let _=function(oe){return oe.replace(/F\./g,"TEMP").replace(/B\./g,"F.").replace(/TEMP/g,"B.")},Y=function(oe,[fe,U],[H,B]){return[(oe[0]-H)*fe+H,(oe[1]-B)*U+B]},j=function(oe,fe,U){let H=fe/180*Math.PI,B=oe[0]-U[0],re=oe[1]-U[1];return[B*Math.cos(H)-re*Math.sin(H)+U[0],re*Math.cos(H)+B*Math.sin(H)+U[1]]},ae=function(oe,fe,U){const[H,B]=U,[re,Qe]=fe,De=re-H,Xe=Qe-B;return[oe[0]+De,oe[1]+Xe]},{pos:D,shape:m,layers:y,origin:x,drill:w}=i[v];if(w){let oe=D;o&&(oe=Y(oe,[-1,1],[0,0])),oe=ae(oe,t,[0,0]),oe=j(oe,n,t),p.push({pos:oe,...w})}o&&(y=y.map(oe=>_(oe))),typeof m=="string"&&(m in Nh||(Nh[m]=ba([],m)),m=Nh[m].slice());let I=[D[0],D[1]];x!==void 0&&(I[0]=x[0],I[1]=x[1]),Mr(m,I),o&&wu(m,[-1,1],[0,0]),Mr(m,t),Uc(m,n,t);let N=ck(fk(D,a),t);l[v]=N;let K=N;K=Y(K,[o?-1:1,1],t),K=j(K,o?2*n:0,t),y.some(oe=>["F.Cu","B.Cu"].includes(oe))&&c.push({type:"text",value:v,translate:K,size:r}),y.forEach(oe=>{oe in d?d[oe].push(m):d[oe]=[m]}),h[v]=m}return d.padLabels=c,new dk({pads:l,layers:d,footprint:i,drills:p,pos:t,padShapes:h,id:s,rotation:n})}class mk{constructor(){this.layers={},this.components=[],this.ids=[],this._netList=[]}add(e,t={}){const n=t.label||"",r={translate:t.translate||[0,0],rotate:t.rotate||0,padLabelSize:t.padLabelSize||.02,componentLabelSize:t.componentLabelSize||.025,flip:t.flip||!1,id:t.id||crypto.randomUUID()},o=pk(e,r);for(const s in o.layers)o.layers[s].forEach(a=>{this.addShape(s,a)});return n!==""&&this.addShape("componentLabels",{type:"text",value:n,translate:r.translate,rotate:0,size:r.componentLabelSize}),this.components.push(o),this.ids.push(r.id),o}addShape(e,t){return t[0]&&typeof t[0][0]=="number"&&(t=[t]),e in this.layers?this.layers[e].push(t):this.layers[e]=[t],this.layers[e]}getLayer(e,t=!1){if(!(e in this.layers))return[];const n=[],r=[],o=[];return this.layers[e].forEach(a=>{a.type==="wire"?o.push({type:"wire",data:hr(a.shape),thickness:a.thickness,shape:a.shape}):Array.isArray(a)?n.push(a):a.type==="text"&&r.push(a)}),t?[hr((()=>gm(...n,...o.map(a=>sm(JSON.parse(JSON.stringify(a.shape)),a.thickness/2,{endType:"etOpenRound",jointType:"jtRound"})))??[])()),...r]:[...n.map(hr),...r,...o]}netList(...e){return e.forEach(t=>{t.forEach(n=>{const[r,o]=n;r.constructor.name==="Component"&&(n[0]=r.id)})}),this._netList=e,e}wire(e,t,n="F.Cu"){if(e.length===0)return;const r={type:"wire",shape:[e],thickness:t};this.addShape(n,r)}}const Rp={0:{width:.5,d:"M0.25 0.11L0.25 0.11Q0.44 0.11 0.44 0.48L0.44 0.48Q0.44 0.85 0.25 0.85L0.25 0.85Q0.06 0.85 0.06 0.48L0.06 0.48Q0.06 0.11 0.25 0.11ZM0.15 0.65L0.15 0.65L0.33 0.25Q0.30 0.18 0.25 0.18L0.25 0.18Q0.14 0.18 0.14 0.48L0.14 0.48Q0.14 0.58 0.15 0.65ZM0.35 0.31L0.17 0.71Q0.20 0.78 0.25 0.78L0.25 0.78Q0.36 0.78 0.36 0.48L0.36 0.48Q0.36 0.38 0.35 0.31L0.35 0.31Z"},1:{width:.5,d:"M0.31 0.83L0.22 0.83L0.22 0.23Q0.19 0.26 0.12 0.28L0.12 0.28L0.12 0.20Q0.20 0.18 0.24 0.13L0.24 0.13L0.31 0.13L0.31 0.83Z"},2:{width:.5,d:"M0.45 0.75L0.45 0.83L0.04 0.83Q0.07 0.64 0.24 0.50L0.24 0.50Q0.31 0.44 0.33 0.41L0.33 0.41Q0.36 0.36 0.36 0.30L0.36 0.30Q0.36 0.25 0.34 0.22L0.34 0.22Q0.31 0.18 0.25 0.18L0.25 0.18Q0.14 0.18 0.13 0.35L0.13 0.35L0.05 0.35Q0.06 0.25 0.10 0.19L0.10 0.19Q0.15 0.11 0.26 0.11L0.26 0.11Q0.33 0.11 0.38 0.15L0.38 0.15Q0.44 0.21 0.44 0.30L0.44 0.30Q0.44 0.43 0.29 0.54L0.29 0.54Q0.17 0.64 0.14 0.75L0.14 0.75L0.45 0.75Z"},3:{width:.5,d:"M0.17 0.49L0.17 0.42L0.22 0.42Q0.29 0.42 0.31 0.40L0.31 0.40Q0.36 0.37 0.36 0.30L0.36 0.30Q0.36 0.18 0.24 0.18L0.24 0.18Q0.15 0.18 0.13 0.28L0.13 0.28L0.05 0.28Q0.06 0.22 0.10 0.17L0.10 0.17Q0.15 0.11 0.24 0.11L0.24 0.11Q0.32 0.11 0.37 0.15L0.37 0.15Q0.43 0.21 0.43 0.30L0.43 0.30Q0.43 0.42 0.32 0.46L0.32 0.46Q0.46 0.51 0.46 0.64L0.46 0.64Q0.46 0.73 0.41 0.78L0.41 0.78Q0.35 0.85 0.25 0.85L0.25 0.85Q0.15 0.85 0.09 0.78L0.09 0.78Q0.05 0.73 0.04 0.65L0.04 0.65L0.12 0.65Q0.13 0.78 0.25 0.78L0.25 0.78Q0.30 0.78 0.33 0.75L0.33 0.75Q0.38 0.71 0.38 0.64L0.38 0.64Q0.38 0.49 0.22 0.49L0.22 0.49L0.17 0.49Z"},4:{width:.5,d:"M0.02 0.59L0.31 0.13L0.39 0.13L0.39 0.59L0.48 0.59L0.48 0.66L0.39 0.66L0.39 0.83L0.32 0.83L0.32 0.66L0.02 0.66L0.02 0.59ZM0.32 0.59L0.32 0.24L0.10 0.59L0.32 0.59Z"},5:{width:.5,d:"M0.07 0.52L0.09 0.13L0.42 0.13L0.42 0.20L0.16 0.20L0.15 0.43Q0.20 0.37 0.27 0.37L0.27 0.37Q0.35 0.37 0.40 0.44L0.40 0.44Q0.45 0.51 0.45 0.60L0.45 0.60Q0.45 0.69 0.42 0.75L0.42 0.75Q0.37 0.85 0.25 0.85L0.25 0.85Q0.08 0.85 0.05 0.67L0.05 0.67L0.13 0.67Q0.15 0.78 0.25 0.78L0.25 0.78Q0.31 0.78 0.35 0.72L0.35 0.72Q0.38 0.68 0.38 0.60L0.38 0.60Q0.38 0.54 0.35 0.50L0.35 0.50Q0.32 0.44 0.26 0.44L0.26 0.44Q0.18 0.44 0.13 0.53L0.13 0.53L0.07 0.52Z"},6:{width:.5,d:"M0.44 0.28L0.36 0.28Q0.35 0.18 0.27 0.18L0.27 0.18Q0.20 0.18 0.16 0.26L0.16 0.26Q0.13 0.34 0.12 0.48L0.12 0.48Q0.18 0.39 0.27 0.39L0.27 0.39Q0.34 0.39 0.39 0.45L0.39 0.45Q0.45 0.51 0.45 0.61L0.45 0.61Q0.45 0.70 0.41 0.76L0.41 0.76Q0.36 0.85 0.26 0.85L0.26 0.85Q0.16 0.85 0.11 0.76L0.11 0.76Q0.05 0.67 0.05 0.51L0.05 0.51Q0.05 0.33 0.10 0.23L0.10 0.23Q0.16 0.11 0.27 0.11L0.27 0.11Q0.41 0.11 0.44 0.28L0.44 0.28ZM0.26 0.46L0.26 0.46Q0.20 0.46 0.16 0.51L0.16 0.51Q0.14 0.55 0.14 0.62L0.14 0.62Q0.14 0.67 0.16 0.71L0.16 0.71Q0.19 0.78 0.26 0.78L0.26 0.78Q0.31 0.78 0.35 0.73L0.35 0.73Q0.38 0.69 0.38 0.61L0.38 0.61Q0.38 0.55 0.35 0.51L0.35 0.51Q0.32 0.46 0.26 0.46Z"},7:{width:.5,d:"M0.05 0.21L0.05 0.13L0.45 0.13L0.45 0.19Q0.31 0.53 0.24 0.83L0.24 0.83L0.15 0.83Q0.22 0.56 0.36 0.21L0.36 0.21L0.05 0.21Z"},8:{width:.5,d:"M0.16 0.45L0.16 0.45Q0.06 0.40 0.06 0.29L0.06 0.29Q0.06 0.24 0.09 0.20L0.09 0.20Q0.14 0.11 0.25 0.11L0.25 0.11Q0.30 0.11 0.35 0.14L0.35 0.14Q0.44 0.19 0.44 0.29L0.44 0.29Q0.44 0.40 0.34 0.45L0.34 0.45Q0.47 0.50 0.47 0.64L0.47 0.64Q0.47 0.72 0.42 0.77L0.42 0.77Q0.36 0.85 0.25 0.85L0.25 0.85Q0.15 0.85 0.10 0.79L0.10 0.79Q0.04 0.74 0.04 0.64L0.04 0.64Q0.04 0.50 0.16 0.45ZM0.25 0.17L0.25 0.17Q0.20 0.17 0.17 0.21L0.17 0.21Q0.14 0.24 0.14 0.29L0.14 0.29Q0.14 0.33 0.15 0.35L0.15 0.35Q0.18 0.42 0.25 0.42L0.25 0.42Q0.29 0.42 0.32 0.39L0.32 0.39Q0.36 0.36 0.36 0.29L0.36 0.29Q0.36 0.23 0.32 0.20L0.32 0.20Q0.29 0.17 0.25 0.17ZM0.25 0.49L0.25 0.49Q0.18 0.49 0.15 0.54L0.15 0.54Q0.11 0.58 0.11 0.64L0.11 0.64Q0.11 0.70 0.14 0.74L0.14 0.74Q0.18 0.78 0.25 0.78L0.25 0.78Q0.32 0.78 0.36 0.74L0.36 0.74Q0.39 0.70 0.39 0.64L0.39 0.64Q0.39 0.56 0.34 0.52L0.34 0.52Q0.30 0.49 0.25 0.49Z"},9:{width:.5,d:"M0.06 0.67L0.14 0.67Q0.15 0.78 0.25 0.78L0.25 0.78Q0.38 0.78 0.38 0.49L0.38 0.49Q0.32 0.57 0.24 0.57L0.24 0.57Q0.13 0.57 0.08 0.48L0.08 0.48Q0.05 0.42 0.05 0.35L0.05 0.35Q0.05 0.25 0.10 0.18L0.10 0.18Q0.16 0.11 0.25 0.11L0.25 0.11Q0.45 0.11 0.45 0.46L0.45 0.46Q0.45 0.85 0.25 0.85L0.25 0.85Q0.15 0.85 0.10 0.77L0.10 0.77Q0.07 0.73 0.06 0.67L0.06 0.67ZM0.25 0.18L0.25 0.18Q0.13 0.18 0.13 0.34L0.13 0.34Q0.13 0.41 0.15 0.45L0.15 0.45Q0.18 0.51 0.25 0.51L0.25 0.51Q0.29 0.51 0.32 0.47L0.32 0.47Q0.37 0.42 0.37 0.34L0.37 0.34Q0.37 0.27 0.33 0.22L0.33 0.22Q0.30 0.18 0.25 0.18Z"}," ":{width:.5,d:""},"!":{width:.5,d:"M0.21 0.69L0.19 0.09L0.31 0.09L0.29 0.69L0.21 0.69ZM0.19 0.90L0.19 0.78L0.31 0.78L0.31 0.90L0.19 0.90Z"},'"':{width:.5,d:"M0.08 0.16L0.08 0.04L0.20 0.04L0.20 0.11Q0.20 0.23 0.11 0.31L0.11 0.31L0.05 0.31Q0.12 0.25 0.13 0.16L0.13 0.16L0.08 0.16ZM0.28 0.16L0.28 0.04L0.40 0.04L0.40 0.11Q0.40 0.23 0.31 0.31L0.31 0.31L0.25 0.31Q0.32 0.25 0.33 0.16L0.33 0.16L0.28 0.16Z"},"#":{width:.5,d:"M0.15 0.28L0.17 0.08L0.23 0.08L0.21 0.28L0.32 0.28L0.34 0.08L0.41 0.08L0.39 0.28L0.46 0.28L0.46 0.35L0.38 0.35L0.35 0.65L0.42 0.65L0.42 0.72L0.35 0.72L0.33 0.92L0.26 0.92L0.28 0.72L0.17 0.72L0.15 0.92L0.09 0.92L0.11 0.72L0.04 0.72L0.04 0.65L0.11 0.65L0.14 0.35L0.07 0.35L0.07 0.28L0.15 0.28ZM0.32 0.35L0.21 0.35L0.18 0.65L0.29 0.65L0.32 0.35Z"},$:{width:.5,d:"M0.22 0.11L0.22 0.05L0.28 0.05L0.28 0.11Q0.41 0.14 0.43 0.30L0.43 0.30L0.35 0.30Q0.35 0.21 0.28 0.18L0.28 0.18L0.28 0.44L0.30 0.45Q0.38 0.50 0.41 0.53L0.41 0.53Q0.46 0.59 0.46 0.65L0.46 0.65Q0.46 0.81 0.28 0.83L0.28 0.83L0.28 0.92L0.22 0.92L0.22 0.83Q0.05 0.81 0.04 0.61L0.04 0.61L0.12 0.61Q0.12 0.74 0.22 0.77L0.22 0.77L0.22 0.48Q0.06 0.40 0.06 0.29L0.06 0.29Q0.06 0.19 0.13 0.14L0.13 0.14Q0.17 0.12 0.22 0.11L0.22 0.11ZM0.28 0.51L0.28 0.51L0.28 0.77Q0.38 0.75 0.38 0.65L0.38 0.65Q0.38 0.58 0.28 0.51ZM0.22 0.41L0.22 0.18Q0.13 0.19 0.13 0.28L0.13 0.28Q0.13 0.35 0.22 0.41L0.22 0.41Z"},"%":{width:.5,d:"M0.02 0.95L0.42 0.05L0.48 0.05L0.08 0.95L0.02 0.95ZM0.14 0.08L0.14 0.08Q0.19 0.08 0.22 0.13L0.22 0.13Q0.25 0.18 0.25 0.28L0.25 0.28Q0.25 0.36 0.22 0.42L0.22 0.42Q0.19 0.48 0.14 0.48L0.14 0.48Q0.09 0.48 0.06 0.43L0.06 0.43Q0.03 0.37 0.03 0.28L0.03 0.28Q0.03 0.19 0.05 0.13L0.05 0.13Q0.08 0.08 0.14 0.08ZM0.14 0.13L0.14 0.13Q0.09 0.13 0.09 0.28L0.09 0.28Q0.09 0.42 0.14 0.42L0.14 0.42Q0.19 0.42 0.19 0.28L0.19 0.28Q0.19 0.13 0.14 0.13ZM0.36 0.52L0.36 0.52Q0.41 0.52 0.44 0.57L0.44 0.57Q0.47 0.63 0.47 0.72L0.47 0.72Q0.47 0.81 0.45 0.86L0.45 0.86Q0.42 0.92 0.36 0.92L0.36 0.92Q0.31 0.92 0.28 0.87L0.28 0.87Q0.25 0.82 0.25 0.72L0.25 0.72Q0.25 0.63 0.28 0.58L0.28 0.58Q0.31 0.52 0.36 0.52ZM0.36 0.58L0.36 0.58Q0.31 0.58 0.31 0.72L0.31 0.72Q0.31 0.87 0.36 0.87L0.36 0.87Q0.41 0.87 0.41 0.72L0.41 0.72Q0.41 0.58 0.36 0.58Z"},"&":{width:.5,d:"M0.48 0.83L0.40 0.83L0.36 0.78Q0.30 0.85 0.22 0.85L0.22 0.85Q0.14 0.85 0.09 0.79L0.09 0.79Q0.04 0.74 0.04 0.65L0.04 0.65Q0.04 0.54 0.16 0.44L0.16 0.44L0.15 0.43Q0.09 0.34 0.09 0.26L0.09 0.26Q0.09 0.19 0.13 0.15L0.13 0.15Q0.17 0.11 0.24 0.11L0.24 0.11Q0.31 0.11 0.35 0.16L0.35 0.16Q0.39 0.20 0.39 0.27L0.39 0.27Q0.39 0.34 0.34 0.39L0.34 0.39Q0.31 0.42 0.26 0.45L0.26 0.45L0.25 0.46L0.36 0.65Q0.38 0.58 0.39 0.49L0.39 0.49L0.46 0.49Q0.45 0.63 0.41 0.71L0.41 0.71L0.48 0.83ZM0.33 0.72L0.19 0.50Q0.12 0.57 0.12 0.65L0.12 0.65Q0.12 0.78 0.22 0.78L0.22 0.78Q0.28 0.78 0.33 0.72L0.33 0.72ZM0.21 0.40L0.21 0.41L0.24 0.39Q0.32 0.34 0.32 0.27L0.32 0.27Q0.32 0.17 0.25 0.17L0.25 0.17Q0.16 0.17 0.16 0.27L0.16 0.27Q0.16 0.32 0.21 0.40L0.21 0.40Z"},"'":{width:.5,d:"M0.08 0.16L0.08 0.04L0.20 0.04L0.20 0.11Q0.20 0.23 0.11 0.31L0.11 0.31L0.05 0.31Q0.12 0.25 0.13 0.16L0.13 0.16L0.08 0.16Z"},"(":{width:.5,d:"M0.42 0.95L0.35 0.95Q0.16 0.76 0.16 0.50L0.16 0.50Q0.16 0.24 0.35 0.05L0.35 0.05L0.42 0.05Q0.23 0.24 0.23 0.50L0.23 0.50Q0.23 0.76 0.42 0.95L0.42 0.95Z"},")":{width:.5,d:"M0.15 0.95L0.08 0.95Q0.27 0.76 0.27 0.50L0.27 0.50Q0.27 0.24 0.08 0.05L0.08 0.05L0.15 0.05Q0.34 0.24 0.34 0.50L0.34 0.50Q0.34 0.76 0.15 0.95L0.15 0.95Z"},"*":{width:.5,d:"M0.12 0.35L0.24 0.48L0.21 0.31Q0.21 0.30 0.21 0.29L0.21 0.29Q0.21 0.25 0.25 0.25L0.25 0.25Q0.29 0.25 0.29 0.29L0.29 0.29Q0.29 0.31 0.29 0.31L0.29 0.31L0.26 0.48L0.38 0.35Q0.40 0.33 0.42 0.33L0.42 0.33Q0.43 0.33 0.45 0.35L0.45 0.35Q0.46 0.37 0.46 0.38L0.46 0.38Q0.46 0.41 0.43 0.42L0.43 0.42L0.28 0.50L0.43 0.58Q0.46 0.59 0.46 0.62L0.46 0.62Q0.46 0.63 0.45 0.64L0.45 0.64Q0.44 0.67 0.42 0.67L0.42 0.67Q0.40 0.67 0.38 0.65L0.38 0.65L0.26 0.52L0.29 0.69Q0.29 0.69 0.29 0.71L0.29 0.71Q0.29 0.75 0.25 0.75L0.25 0.75Q0.21 0.75 0.21 0.71L0.21 0.71Q0.21 0.70 0.21 0.69L0.21 0.69L0.24 0.52L0.12 0.65Q0.10 0.67 0.08 0.67L0.08 0.67Q0.06 0.67 0.05 0.65L0.05 0.65Q0.04 0.63 0.04 0.62L0.04 0.62Q0.04 0.59 0.07 0.58L0.07 0.58L0.22 0.50L0.07 0.42Q0.04 0.41 0.04 0.38L0.04 0.38Q0.04 0.37 0.05 0.35L0.05 0.35Q0.06 0.33 0.08 0.33L0.08 0.33Q0.10 0.33 0.12 0.35L0.12 0.35Z"},"+":{width:.5,d:"M0.22 0.47L0.22 0.20L0.28 0.20L0.28 0.47L0.45 0.47L0.45 0.53L0.28 0.53L0.28 0.80L0.22 0.80L0.22 0.53L0.05 0.53L0.05 0.47L0.22 0.47Z"},",":{width:.5,d:"M0.11 0.71L0.23 0.71Q0.20 0.86 0.12 1.00L0.12 1.00L0.06 0.98Q0.10 0.85 0.11 0.71L0.11 0.71Z"},"-":{width:.5,d:"M0.05 0.54L0.05 0.46L0.45 0.46L0.45 0.54L0.05 0.54Z"},".":{width:.5,d:"M0.09 0.88L0.09 0.75L0.23 0.75L0.23 0.88L0.09 0.88Z"},"/":{width:.5,d:"M0.03 0.92L0.43 0.06L0.47 0.08L0.07 0.94L0.03 0.92Z"},":":{width:.5,d:"M0.19 0.47L0.19 0.35L0.31 0.35L0.31 0.47L0.19 0.47ZM0.19 0.83L0.19 0.71L0.31 0.71L0.31 0.83L0.19 0.83Z"},";":{width:.5,d:"M0.19 0.47L0.19 0.35L0.31 0.35L0.31 0.47L0.19 0.47ZM0.20 0.71L0.30 0.71Q0.28 0.85 0.21 0.98L0.21 0.98L0.14 0.97Q0.19 0.85 0.20 0.71L0.20 0.71Z"},"<":{width:.5,d:"M0.03 0.50L0.45 0.09L0.45 0.18L0.12 0.50L0.45 0.82L0.45 0.91L0.03 0.50Z"},"=":{width:.5,d:"M0.05 0.44L0.05 0.37L0.45 0.37L0.45 0.44L0.05 0.44ZM0.05 0.63L0.05 0.56L0.45 0.56L0.45 0.63L0.05 0.63Z"},">":{width:.5,d:"M0.05 0.18L0.05 0.09L0.47 0.50L0.05 0.91L0.05 0.82L0.38 0.50L0.05 0.18Z"},"?":{width:.5,d:"M0.13 0.34L0.05 0.34L0.05 0.32Q0.05 0.22 0.10 0.15L0.10 0.15Q0.16 0.08 0.26 0.08L0.26 0.08Q0.34 0.08 0.40 0.13L0.40 0.13Q0.45 0.18 0.45 0.26L0.45 0.26Q0.45 0.35 0.35 0.45L0.35 0.45Q0.31 0.50 0.30 0.53L0.30 0.53Q0.28 0.57 0.28 0.66L0.28 0.66Q0.28 0.68 0.28 0.69L0.28 0.69L0.20 0.69Q0.20 0.57 0.22 0.52L0.22 0.52Q0.24 0.47 0.29 0.42L0.29 0.42Q0.37 0.33 0.37 0.26L0.37 0.26Q0.37 0.22 0.35 0.20L0.35 0.20Q0.32 0.15 0.26 0.15L0.26 0.15Q0.13 0.15 0.13 0.33L0.13 0.33Q0.13 0.33 0.13 0.34L0.13 0.34ZM0.19 0.90L0.19 0.78L0.30 0.78L0.30 0.90L0.19 0.90Z"},"@":{width:.5,d:"M0.32 0.32L0.33 0.30L0.37 0.30Q0.35 0.45 0.35 0.57L0.35 0.57Q0.35 0.64 0.37 0.64L0.37 0.64Q0.39 0.64 0.40 0.62L0.40 0.62Q0.42 0.56 0.42 0.45L0.42 0.45Q0.42 0.34 0.38 0.26L0.38 0.26Q0.34 0.17 0.25 0.17L0.25 0.17Q0.17 0.17 0.13 0.25L0.13 0.25Q0.08 0.34 0.08 0.50L0.08 0.50Q0.08 0.66 0.12 0.74L0.12 0.74Q0.17 0.83 0.25 0.83L0.25 0.83Q0.35 0.83 0.40 0.73L0.40 0.73L0.45 0.76Q0.38 0.89 0.25 0.89L0.25 0.89Q0.14 0.89 0.08 0.79L0.08 0.79Q0.02 0.69 0.02 0.50L0.02 0.50Q0.02 0.33 0.07 0.23L0.07 0.23Q0.13 0.11 0.25 0.11L0.25 0.11Q0.36 0.11 0.42 0.21L0.42 0.21Q0.48 0.30 0.48 0.45L0.48 0.45Q0.48 0.58 0.44 0.65L0.44 0.65Q0.41 0.70 0.36 0.70L0.36 0.70Q0.32 0.70 0.31 0.65L0.31 0.65Q0.27 0.71 0.22 0.71L0.22 0.71Q0.13 0.71 0.13 0.55L0.13 0.55Q0.13 0.43 0.17 0.35L0.17 0.35Q0.20 0.28 0.25 0.28L0.25 0.28Q0.29 0.28 0.32 0.32L0.32 0.32ZM0.26 0.34L0.26 0.34Q0.23 0.34 0.21 0.38L0.21 0.38Q0.19 0.44 0.19 0.55L0.19 0.55Q0.19 0.65 0.23 0.65L0.23 0.65Q0.26 0.65 0.28 0.60L0.28 0.60Q0.30 0.54 0.30 0.44L0.30 0.44Q0.30 0.34 0.26 0.34Z"},A:{width:.5,d:"M0.02 0.83L0.20 0.13L0.30 0.13L0.48 0.83L0.39 0.83L0.34 0.60L0.16 0.60L0.11 0.83L0.02 0.83ZM0.32 0.53L0.25 0.20L0.18 0.53L0.32 0.53Z"},B:{width:.5,d:"M0.07 0.83L0.07 0.13L0.24 0.13Q0.32 0.13 0.37 0.17L0.37 0.17Q0.43 0.21 0.43 0.30L0.43 0.30Q0.43 0.41 0.31 0.46L0.31 0.46Q0.45 0.50 0.45 0.64L0.45 0.64Q0.45 0.73 0.39 0.78L0.39 0.78Q0.34 0.83 0.25 0.83L0.25 0.83L0.07 0.83ZM0.24 0.20L0.15 0.20L0.15 0.43L0.23 0.43Q0.27 0.43 0.30 0.41L0.30 0.41Q0.35 0.38 0.35 0.31L0.35 0.31Q0.35 0.20 0.24 0.20L0.24 0.20ZM0.24 0.50L0.15 0.50L0.15 0.75L0.24 0.75Q0.37 0.75 0.37 0.63L0.37 0.63Q0.37 0.50 0.24 0.50L0.24 0.50Z"},C:{width:.5,d:"M0.37 0.60L0.45 0.60Q0.43 0.85 0.25 0.85L0.25 0.85Q0.15 0.85 0.09 0.74L0.09 0.74Q0.05 0.65 0.05 0.48L0.05 0.48Q0.05 0.31 0.10 0.21L0.10 0.21Q0.15 0.11 0.25 0.11L0.25 0.11Q0.41 0.11 0.45 0.33L0.45 0.33L0.36 0.33Q0.34 0.18 0.25 0.18L0.25 0.18Q0.13 0.18 0.13 0.48L0.13 0.48Q0.13 0.77 0.25 0.77L0.25 0.77Q0.36 0.77 0.37 0.60L0.37 0.60Z"},D:{width:.5,d:"M0.21 0.83L0.03 0.83L0.03 0.75L0.08 0.75L0.08 0.20L0.03 0.20L0.03 0.13L0.21 0.13Q0.33 0.13 0.39 0.21L0.39 0.21Q0.45 0.29 0.45 0.47L0.45 0.47Q0.45 0.65 0.40 0.73L0.40 0.73Q0.33 0.83 0.21 0.83L0.21 0.83ZM0.20 0.20L0.16 0.20L0.16 0.75L0.21 0.75Q0.37 0.75 0.37 0.47L0.37 0.47Q0.37 0.33 0.33 0.26L0.33 0.26Q0.28 0.20 0.20 0.20L0.20 0.20Z"},E:{width:.5,d:"M0.07 0.83L0.07 0.13L0.42 0.13L0.42 0.21L0.15 0.21L0.15 0.43L0.38 0.43L0.38 0.50L0.15 0.50L0.15 0.75L0.44 0.75L0.44 0.83L0.07 0.83Z"},F:{width:.5,d:"M0.07 0.83L0.07 0.13L0.42 0.13L0.42 0.21L0.15 0.21L0.15 0.43L0.39 0.43L0.39 0.50L0.15 0.50L0.15 0.83L0.07 0.83Z"},G:{width:.5,d:"M0.45 0.83L0.39 0.83L0.39 0.73Q0.33 0.85 0.24 0.85L0.24 0.85Q0.15 0.85 0.10 0.76L0.10 0.76Q0.05 0.66 0.05 0.48L0.05 0.48Q0.05 0.31 0.10 0.21L0.10 0.21Q0.15 0.11 0.25 0.11L0.25 0.11Q0.41 0.11 0.45 0.33L0.45 0.33L0.36 0.33Q0.34 0.18 0.25 0.18L0.25 0.18Q0.13 0.18 0.13 0.48L0.13 0.48Q0.13 0.77 0.25 0.77L0.25 0.77Q0.36 0.77 0.38 0.57L0.38 0.57L0.27 0.57L0.27 0.50L0.45 0.50L0.45 0.83Z"},H:{width:.5,d:"M0.06 0.83L0.06 0.13L0.14 0.13L0.14 0.43L0.36 0.43L0.36 0.13L0.44 0.13L0.44 0.83L0.36 0.83L0.36 0.50L0.14 0.50L0.14 0.83L0.06 0.83Z"},I:{width:.5,d:"M0.39 0.20L0.29 0.20L0.29 0.75L0.39 0.75L0.39 0.83L0.11 0.83L0.11 0.75L0.21 0.75L0.21 0.20L0.11 0.20L0.11 0.13L0.39 0.13L0.39 0.20Z"},J:{width:.5,d:"M0.32 0.65L0.32 0.13L0.40 0.13L0.40 0.65Q0.40 0.85 0.23 0.85L0.23 0.85Q0.05 0.85 0.04 0.64L0.04 0.64L0.13 0.64Q0.13 0.77 0.23 0.77L0.23 0.77Q0.32 0.77 0.32 0.65L0.32 0.65Z"},K:{width:.5,d:"M0.06 0.83L0.06 0.13L0.14 0.13L0.14 0.46L0.34 0.13L0.44 0.13L0.27 0.40L0.47 0.83L0.37 0.83L0.22 0.46L0.14 0.59L0.14 0.83L0.06 0.83Z"},L:{width:.5,d:"M0.07 0.83L0.07 0.13L0.15 0.13L0.15 0.75L0.45 0.75L0.45 0.83L0.07 0.83Z"},M:{width:.5,d:"M0.05 0.83L0.05 0.13L0.15 0.13L0.25 0.70L0.35 0.13L0.45 0.13L0.45 0.83L0.38 0.83L0.38 0.29L0.29 0.83L0.21 0.83L0.12 0.29L0.12 0.83L0.05 0.83Z"},N:{width:.5,d:"M0.06 0.83L0.06 0.13L0.16 0.13L0.36 0.69L0.36 0.13L0.44 0.13L0.44 0.83L0.35 0.83L0.14 0.25L0.14 0.83L0.06 0.83Z"},O:{width:.5,d:"M0.25 0.11L0.25 0.11Q0.34 0.11 0.40 0.20L0.40 0.20Q0.45 0.30 0.45 0.48L0.45 0.48Q0.45 0.65 0.40 0.75L0.40 0.75Q0.35 0.85 0.25 0.85L0.25 0.85Q0.15 0.85 0.10 0.75L0.10 0.75Q0.05 0.65 0.05 0.48L0.05 0.48Q0.05 0.30 0.11 0.19L0.11 0.19Q0.16 0.11 0.25 0.11ZM0.25 0.18L0.25 0.18Q0.13 0.18 0.13 0.48L0.13 0.48Q0.13 0.78 0.25 0.78L0.25 0.78Q0.37 0.78 0.37 0.48L0.37 0.48Q0.37 0.18 0.25 0.18Z"},P:{width:.5,d:"M0.07 0.83L0.07 0.13L0.25 0.13Q0.33 0.13 0.39 0.17L0.39 0.17Q0.46 0.22 0.46 0.33L0.46 0.33Q0.46 0.45 0.36 0.50L0.36 0.50Q0.31 0.53 0.25 0.53L0.25 0.53L0.15 0.53L0.15 0.83L0.07 0.83ZM0.24 0.21L0.15 0.21L0.15 0.45L0.24 0.45Q0.37 0.45 0.37 0.33L0.37 0.33Q0.37 0.25 0.31 0.22L0.31 0.22Q0.28 0.21 0.24 0.21L0.24 0.21Z"},Q:{width:.5,d:"M0.40 0.86L0.34 0.91Q0.33 0.87 0.31 0.83L0.31 0.83Q0.28 0.85 0.25 0.85L0.25 0.85Q0.15 0.85 0.10 0.75L0.10 0.75Q0.05 0.65 0.05 0.48L0.05 0.48Q0.05 0.30 0.10 0.20L0.10 0.20Q0.16 0.11 0.25 0.11L0.25 0.11Q0.34 0.11 0.40 0.20L0.40 0.20Q0.45 0.31 0.45 0.48L0.45 0.48Q0.45 0.69 0.37 0.79L0.37 0.79Q0.40 0.85 0.40 0.86L0.40 0.86ZM0.22 0.65L0.27 0.61Q0.29 0.64 0.34 0.72L0.34 0.72Q0.37 0.65 0.37 0.48L0.37 0.48Q0.37 0.18 0.25 0.18L0.25 0.18Q0.13 0.18 0.13 0.48L0.13 0.48Q0.13 0.78 0.25 0.78L0.25 0.78Q0.27 0.78 0.29 0.77L0.29 0.77Q0.26 0.71 0.22 0.65L0.22 0.65Z"},R:{width:.5,d:"M0.07 0.83L0.07 0.13L0.24 0.13Q0.33 0.13 0.38 0.17L0.38 0.17Q0.45 0.22 0.45 0.31L0.45 0.31Q0.45 0.45 0.32 0.49L0.32 0.49L0.47 0.83L0.38 0.83L0.24 0.50L0.15 0.50L0.15 0.83L0.07 0.83ZM0.23 0.20L0.15 0.20L0.15 0.43L0.23 0.43Q0.28 0.43 0.31 0.41L0.31 0.41Q0.37 0.38 0.37 0.31L0.37 0.31Q0.37 0.20 0.23 0.20L0.23 0.20Z"},S:{width:.5,d:"M0.05 0.63L0.13 0.63Q0.14 0.78 0.26 0.78L0.26 0.78Q0.30 0.78 0.33 0.75L0.33 0.75Q0.37 0.72 0.37 0.67L0.37 0.67Q0.37 0.60 0.32 0.56L0.32 0.56Q0.29 0.53 0.20 0.48L0.20 0.48Q0.06 0.40 0.06 0.29L0.06 0.29Q0.06 0.22 0.11 0.17L0.11 0.17Q0.16 0.11 0.25 0.11L0.25 0.11Q0.42 0.11 0.44 0.31L0.44 0.31L0.36 0.31Q0.35 0.26 0.34 0.23L0.34 0.23Q0.31 0.18 0.25 0.18L0.25 0.18Q0.19 0.18 0.17 0.22L0.17 0.22Q0.15 0.25 0.15 0.28L0.15 0.28Q0.15 0.36 0.27 0.43L0.27 0.43Q0.35 0.48 0.40 0.52L0.40 0.52Q0.45 0.58 0.45 0.66L0.45 0.66Q0.45 0.74 0.40 0.79L0.40 0.79Q0.35 0.85 0.26 0.85L0.26 0.85Q0.15 0.85 0.09 0.77L0.09 0.77Q0.05 0.71 0.05 0.63L0.05 0.63Z"},T:{width:.5,d:"M0.04 0.21L0.04 0.13L0.46 0.13L0.46 0.21L0.29 0.21L0.29 0.83L0.21 0.83L0.21 0.21L0.04 0.21Z"},U:{width:.5,d:"M0.06 0.61L0.06 0.13L0.14 0.13L0.14 0.61Q0.14 0.77 0.25 0.77L0.25 0.77Q0.36 0.77 0.36 0.61L0.36 0.61L0.36 0.13L0.44 0.13L0.44 0.61Q0.44 0.72 0.40 0.78L0.40 0.78Q0.35 0.85 0.25 0.85L0.25 0.85Q0.06 0.85 0.06 0.61L0.06 0.61Z"},V:{width:.5,d:"M0.20 0.83L0.03 0.13L0.12 0.13L0.25 0.73L0.38 0.13L0.47 0.13L0.30 0.83L0.20 0.83Z"},W:{width:.5,d:"M0.10 0.83L0.02 0.13L0.10 0.13L0.14 0.66L0.21 0.13L0.29 0.13L0.36 0.66L0.40 0.13L0.48 0.13L0.40 0.83L0.32 0.83L0.25 0.27L0.18 0.83L0.10 0.83Z"},X:{width:.5,d:"M0.20 0.46L0.06 0.13L0.15 0.13L0.25 0.38L0.35 0.13L0.44 0.13L0.30 0.46L0.47 0.83L0.37 0.83L0.25 0.54L0.13 0.83L0.04 0.83L0.20 0.46Z"},Y:{width:.5,d:"M0.21 0.55L0.03 0.13L0.12 0.13L0.25 0.46L0.38 0.13L0.47 0.13L0.29 0.55L0.29 0.83L0.21 0.83L0.21 0.55Z"},Z:{width:.5,d:"M0.08 0.21L0.08 0.13L0.43 0.13L0.43 0.20L0.15 0.75L0.44 0.75L0.44 0.83L0.06 0.83L0.06 0.75L0.34 0.21L0.08 0.21Z"},"[":{width:.5,d:"M0.11 0.95L0.11 0.05L0.42 0.05L0.42 0.12L0.18 0.12L0.18 0.88L0.42 0.88L0.42 0.95L0.11 0.95Z"},"\\":{width:.5,d:"M0.20 0.42L0.02 0.13L0.11 0.13L0.25 0.37L0.39 0.13L0.47 0.13L0.30 0.42L0.45 0.42L0.45 0.48L0.29 0.48L0.29 0.57L0.45 0.57L0.45 0.64L0.29 0.64L0.29 0.83L0.21 0.83L0.21 0.64L0.05 0.64L0.05 0.57L0.21 0.57L0.21 0.48L0.05 0.48L0.05 0.42L0.20 0.42Z"},"]":{width:.5,d:"M0.08 0.12L0.08 0.05L0.39 0.05L0.39 0.95L0.08 0.95L0.08 0.88L0.32 0.88L0.32 0.12L0.08 0.12Z"},"^":{width:.5,d:"M0.07 0.24L0.20 0.12L0.30 0.12L0.43 0.24L0.36 0.24L0.25 0.16L0.14 0.24L0.07 0.24Z"},_:{width:.5,d:"M0 1L0 0.98L0.50 0.98L0.50 1L0 1Z"},"`":{width:.5,d:"M0.28 0.24L0.12 0.12L0.24 0.12L0.36 0.24L0.28 0.24Z"},a:{width:.5,d:"M0.15 0.49L0.07 0.49Q0.09 0.33 0.25 0.33L0.25 0.33Q0.41 0.33 0.41 0.51L0.41 0.51L0.41 0.75Q0.41 0.78 0.44 0.78L0.44 0.78Q0.45 0.78 0.46 0.77L0.46 0.77L0.46 0.84Q0.44 0.85 0.42 0.85L0.42 0.85Q0.35 0.85 0.34 0.77L0.34 0.77Q0.27 0.85 0.19 0.85L0.19 0.85Q0.14 0.85 0.10 0.82L0.10 0.82Q0.06 0.78 0.06 0.71L0.06 0.71Q0.06 0.55 0.34 0.53L0.34 0.53L0.34 0.51Q0.34 0.40 0.25 0.40L0.25 0.40Q0.16 0.40 0.15 0.49L0.15 0.49ZM0.34 0.66L0.34 0.59Q0.13 0.60 0.13 0.71L0.13 0.71Q0.13 0.78 0.20 0.78L0.20 0.78Q0.25 0.78 0.30 0.74L0.30 0.74Q0.34 0.71 0.34 0.66L0.34 0.66Z"},b:{width:.5,d:"M0.07 0.83L0.07 0.13L0.15 0.13L0.15 0.41Q0.21 0.33 0.28 0.33L0.28 0.33Q0.35 0.33 0.40 0.40L0.40 0.40Q0.45 0.47 0.45 0.59L0.45 0.59Q0.45 0.67 0.42 0.73L0.42 0.73Q0.38 0.85 0.28 0.85L0.28 0.85Q0.20 0.85 0.15 0.77L0.15 0.77L0.13 0.83L0.07 0.83ZM0.26 0.41L0.26 0.41Q0.21 0.41 0.17 0.46L0.17 0.46Q0.15 0.51 0.15 0.59L0.15 0.59Q0.15 0.67 0.17 0.72L0.17 0.72Q0.21 0.78 0.26 0.78L0.26 0.78Q0.31 0.78 0.34 0.73L0.34 0.73Q0.37 0.68 0.37 0.59L0.37 0.59Q0.37 0.50 0.34 0.45L0.34 0.45Q0.31 0.41 0.26 0.41Z"},c:{width:.5,d:"M0.36 0.67L0.44 0.67Q0.40 0.85 0.25 0.85L0.25 0.85Q0.16 0.85 0.11 0.77L0.11 0.77Q0.06 0.71 0.06 0.59L0.06 0.59Q0.06 0.48 0.10 0.42L0.10 0.42Q0.16 0.33 0.25 0.33L0.25 0.33Q0.39 0.33 0.43 0.50L0.43 0.50L0.35 0.50Q0.33 0.40 0.25 0.40L0.25 0.40Q0.20 0.40 0.17 0.45L0.17 0.45Q0.14 0.50 0.14 0.59L0.14 0.59Q0.14 0.67 0.16 0.71L0.16 0.71Q0.19 0.78 0.25 0.78L0.25 0.78Q0.34 0.78 0.36 0.67L0.36 0.67Z"},d:{width:.5,d:"M0.35 0.41L0.35 0.13L0.43 0.13L0.43 0.83L0.37 0.83L0.35 0.77Q0.30 0.85 0.22 0.85L0.22 0.85Q0.14 0.85 0.10 0.78L0.10 0.78Q0.05 0.70 0.05 0.59L0.05 0.59Q0.05 0.49 0.09 0.42L0.09 0.42Q0.13 0.33 0.22 0.33L0.22 0.33Q0.29 0.33 0.35 0.41L0.35 0.41ZM0.24 0.41L0.24 0.41Q0.19 0.41 0.15 0.46L0.15 0.46Q0.13 0.51 0.13 0.59L0.13 0.59Q0.13 0.67 0.15 0.72L0.15 0.72Q0.18 0.78 0.24 0.78L0.24 0.78Q0.29 0.78 0.32 0.73L0.32 0.73Q0.35 0.68 0.35 0.59L0.35 0.59Q0.35 0.51 0.33 0.47L0.33 0.47Q0.30 0.41 0.24 0.41Z"},e:{width:.5,d:"M0.36 0.68L0.44 0.68Q0.40 0.85 0.25 0.85L0.25 0.85Q0.16 0.85 0.11 0.77L0.11 0.77Q0.06 0.70 0.06 0.59L0.06 0.59Q0.06 0.48 0.10 0.42L0.10 0.42Q0.16 0.33 0.25 0.33L0.25 0.33Q0.43 0.33 0.44 0.61L0.44 0.61L0.14 0.61Q0.14 0.78 0.25 0.78L0.25 0.78Q0.34 0.78 0.36 0.68L0.36 0.68ZM0.14 0.54L0.36 0.54Q0.35 0.40 0.25 0.40L0.25 0.40Q0.16 0.40 0.14 0.54L0.14 0.54Z"},f:{width:.5,d:"M0.08 0.35L0.20 0.35L0.20 0.23Q0.20 0.13 0.30 0.13L0.30 0.13L0.41 0.13L0.41 0.20L0.32 0.20Q0.28 0.20 0.28 0.24L0.28 0.24L0.28 0.35L0.41 0.35L0.41 0.42L0.28 0.42L0.28 0.83L0.20 0.83L0.20 0.42L0.08 0.42L0.08 0.35Z"},g:{width:.5,d:"M0.38 0.35L0.43 0.35L0.43 0.77Q0.43 0.97 0.25 0.97L0.25 0.97Q0.09 0.97 0.06 0.82L0.06 0.82L0.14 0.82Q0.15 0.91 0.25 0.91L0.25 0.91Q0.36 0.91 0.36 0.78L0.36 0.78L0.36 0.70Q0.30 0.76 0.23 0.76L0.23 0.76Q0.15 0.76 0.10 0.70L0.10 0.70Q0.05 0.64 0.05 0.55L0.05 0.55Q0.05 0.49 0.07 0.44L0.07 0.44Q0.13 0.33 0.23 0.33L0.23 0.33Q0.31 0.33 0.36 0.40L0.36 0.40L0.38 0.35ZM0.24 0.40L0.24 0.40Q0.19 0.40 0.15 0.45L0.15 0.45Q0.13 0.49 0.13 0.55L0.13 0.55Q0.13 0.61 0.16 0.65L0.16 0.65Q0.19 0.69 0.24 0.69L0.24 0.69Q0.29 0.69 0.32 0.66L0.32 0.66Q0.36 0.62 0.36 0.55L0.36 0.55Q0.36 0.49 0.32 0.44L0.32 0.44Q0.29 0.40 0.24 0.40Z"},h:{width:.5,d:"M0.07 0.83L0.07 0.13L0.15 0.13L0.15 0.41Q0.22 0.33 0.29 0.33L0.29 0.33Q0.37 0.33 0.41 0.41L0.41 0.41Q0.43 0.45 0.43 0.50L0.43 0.50L0.43 0.83L0.36 0.83L0.36 0.53Q0.36 0.41 0.28 0.41L0.28 0.41Q0.23 0.41 0.19 0.44L0.19 0.44Q0.15 0.48 0.15 0.54L0.15 0.54L0.15 0.83L0.07 0.83Z"},i:{width:.5,d:"M0.21 0.22L0.21 0.13L0.29 0.13L0.29 0.22L0.21 0.22ZM0.21 0.83L0.21 0.35L0.29 0.35L0.29 0.83L0.21 0.83Z"},j:{width:.5,d:"M0.23 0.22L0.23 0.13L0.32 0.13L0.32 0.22L0.23 0.22ZM0.23 0.86L0.23 0.35L0.31 0.35L0.31 0.87Q0.31 0.97 0.21 0.97L0.21 0.97Q0.17 0.97 0.10 0.96L0.10 0.96L0.10 0.89Q0.14 0.90 0.19 0.90L0.19 0.90Q0.23 0.90 0.23 0.86L0.23 0.86Z"},k:{width:.5,d:"M0.08 0.83L0.08 0.13L0.15 0.13L0.15 0.56L0.33 0.35L0.42 0.35L0.27 0.52L0.46 0.83L0.37 0.83L0.22 0.58L0.15 0.65L0.15 0.83L0.08 0.83Z"},l:{width:.5,d:"M0.29 0.13L0.29 0.72Q0.29 0.76 0.33 0.76L0.33 0.76Q0.36 0.76 0.40 0.75L0.40 0.75L0.40 0.83Q0.34 0.84 0.32 0.84L0.32 0.84Q0.21 0.84 0.21 0.73L0.21 0.73L0.21 0.13L0.29 0.13Z"},m:{width:.5,d:"M0.05 0.35L0.10 0.35L0.11 0.39Q0.15 0.33 0.20 0.33L0.20 0.33Q0.25 0.33 0.27 0.39L0.27 0.39Q0.31 0.33 0.37 0.33L0.37 0.33Q0.45 0.33 0.45 0.46L0.45 0.46L0.45 0.83L0.38 0.83L0.38 0.47Q0.38 0.40 0.35 0.40L0.35 0.40Q0.32 0.40 0.30 0.43L0.30 0.43Q0.28 0.46 0.28 0.48L0.28 0.48L0.28 0.83L0.21 0.83L0.21 0.47Q0.21 0.40 0.18 0.40L0.18 0.40Q0.12 0.40 0.12 0.48L0.12 0.48L0.12 0.83L0.05 0.83L0.05 0.35Z"},n:{width:.5,d:"M0.07 0.35L0.13 0.35L0.14 0.42Q0.22 0.33 0.29 0.33L0.29 0.33Q0.37 0.33 0.41 0.41L0.41 0.41Q0.43 0.45 0.43 0.50L0.43 0.50L0.43 0.83L0.36 0.83L0.36 0.53Q0.36 0.41 0.28 0.41L0.28 0.41Q0.23 0.41 0.19 0.44L0.19 0.44Q0.15 0.48 0.15 0.54L0.15 0.54L0.15 0.83L0.07 0.83L0.07 0.35Z"},o:{width:.5,d:"M0.25 0.33L0.25 0.33Q0.34 0.33 0.40 0.42L0.40 0.42Q0.44 0.48 0.44 0.59L0.44 0.59Q0.44 0.67 0.41 0.73L0.41 0.73Q0.36 0.85 0.25 0.85L0.25 0.85Q0.16 0.85 0.11 0.77L0.11 0.77Q0.06 0.71 0.06 0.59L0.06 0.59Q0.06 0.47 0.12 0.40L0.12 0.40Q0.17 0.33 0.25 0.33ZM0.25 0.40L0.25 0.40Q0.20 0.40 0.17 0.46L0.17 0.46Q0.14 0.51 0.14 0.59L0.14 0.59Q0.14 0.67 0.16 0.71L0.16 0.71Q0.19 0.78 0.25 0.78L0.25 0.78Q0.30 0.78 0.33 0.72L0.33 0.72Q0.36 0.67 0.36 0.59L0.36 0.59Q0.36 0.51 0.33 0.46L0.33 0.46Q0.30 0.40 0.25 0.40Z"},p:{width:.5,d:"M0.07 0.35L0.13 0.35L0.14 0.42Q0.21 0.33 0.28 0.33L0.28 0.33Q0.35 0.33 0.40 0.40L0.40 0.40Q0.45 0.47 0.45 0.58L0.45 0.58Q0.45 0.68 0.41 0.75L0.41 0.75Q0.36 0.84 0.28 0.84L0.28 0.84Q0.21 0.84 0.15 0.77L0.15 0.77L0.15 0.97L0.07 0.97L0.07 0.35ZM0.26 0.41L0.26 0.41Q0.21 0.41 0.18 0.45L0.18 0.45Q0.15 0.50 0.15 0.58L0.15 0.58Q0.15 0.65 0.17 0.70L0.17 0.70Q0.20 0.76 0.26 0.76L0.26 0.76Q0.31 0.76 0.34 0.72L0.34 0.72Q0.37 0.67 0.37 0.58L0.37 0.58Q0.37 0.50 0.34 0.46L0.34 0.46Q0.31 0.41 0.26 0.41Z"},q:{width:.5,d:"M0.43 0.97L0.35 0.97L0.35 0.77Q0.29 0.84 0.22 0.84L0.22 0.84Q0.15 0.84 0.10 0.77L0.10 0.77Q0.05 0.70 0.05 0.58L0.05 0.58Q0.05 0.49 0.09 0.42L0.09 0.42Q0.13 0.33 0.22 0.33L0.22 0.33Q0.29 0.33 0.36 0.42L0.36 0.42L0.37 0.35L0.43 0.35L0.43 0.97ZM0.24 0.41L0.24 0.41Q0.18 0.41 0.16 0.46L0.16 0.46Q0.13 0.51 0.13 0.58L0.13 0.58Q0.13 0.76 0.24 0.76L0.24 0.76Q0.29 0.76 0.33 0.70L0.33 0.70Q0.35 0.66 0.35 0.58L0.35 0.58Q0.35 0.49 0.31 0.44L0.31 0.44Q0.28 0.41 0.24 0.41Z"},r:{width:.5,d:"M0.15 0.35L0.22 0.35L0.22 0.45Q0.31 0.36 0.41 0.33L0.41 0.33L0.41 0.42Q0.29 0.45 0.22 0.54L0.22 0.54L0.22 0.83L0.15 0.83L0.15 0.35Z"},s:{width:.5,d:"M0.06 0.68L0.14 0.68Q0.15 0.78 0.26 0.78L0.26 0.78Q0.36 0.78 0.36 0.71L0.36 0.71Q0.36 0.67 0.34 0.65L0.34 0.65Q0.31 0.63 0.25 0.61L0.25 0.61L0.23 0.60Q0.16 0.58 0.13 0.55L0.13 0.55Q0.08 0.52 0.08 0.47L0.08 0.47Q0.08 0.40 0.13 0.37L0.13 0.37Q0.18 0.33 0.25 0.33L0.25 0.33Q0.40 0.33 0.42 0.47L0.42 0.47L0.34 0.47Q0.33 0.40 0.25 0.40L0.25 0.40Q0.15 0.40 0.15 0.46L0.15 0.46Q0.15 0.51 0.28 0.55L0.28 0.55Q0.35 0.57 0.38 0.60L0.38 0.60Q0.44 0.64 0.44 0.71L0.44 0.71Q0.44 0.77 0.38 0.81L0.38 0.81Q0.33 0.85 0.25 0.85L0.25 0.85Q0.08 0.85 0.06 0.68L0.06 0.68Z"},t:{width:.5,d:"M0.19 0.35L0.19 0.23L0.27 0.23L0.27 0.35L0.39 0.35L0.39 0.43L0.27 0.43L0.27 0.73Q0.27 0.76 0.31 0.76L0.31 0.76Q0.35 0.76 0.40 0.75L0.40 0.75L0.40 0.83Q0.34 0.84 0.29 0.84L0.29 0.84Q0.19 0.84 0.19 0.74L0.19 0.74L0.19 0.43L0.10 0.43L0.10 0.35L0.19 0.35Z"},u:{width:.5,d:"M0.07 0.68L0.07 0.35L0.15 0.35L0.15 0.68Q0.15 0.78 0.23 0.78L0.23 0.78Q0.28 0.78 0.32 0.74L0.32 0.74Q0.36 0.71 0.36 0.65L0.36 0.65L0.36 0.35L0.43 0.35L0.43 0.83L0.38 0.83L0.36 0.77Q0.30 0.85 0.21 0.85L0.21 0.85Q0.14 0.85 0.10 0.79L0.10 0.79Q0.07 0.75 0.07 0.68L0.07 0.68Z"},v:{width:.5,d:"M0.21 0.83L0.05 0.35L0.13 0.35L0.25 0.74L0.36 0.35L0.45 0.35L0.29 0.83L0.21 0.83Z"},w:{width:.5,d:"M0.10 0.83L0.03 0.35L0.10 0.35L0.14 0.72L0.21 0.35L0.29 0.35L0.36 0.72L0.40 0.35L0.47 0.35L0.40 0.83L0.32 0.83L0.25 0.46L0.18 0.83L0.10 0.83Z"},x:{width:.5,d:"M0.21 0.57L0.07 0.35L0.17 0.35L0.25 0.51L0.33 0.35L0.43 0.35L0.29 0.57L0.46 0.83L0.36 0.83L0.25 0.63L0.14 0.83L0.04 0.83L0.21 0.57Z"},y:{width:.5,d:"M0.23 0.79L0.06 0.35L0.15 0.35L0.26 0.69L0.37 0.35L0.46 0.35L0.26 0.90Q0.24 0.95 0.20 0.97L0.20 0.97Q0.19 0.97 0.09 0.97L0.09 0.97L0.09 0.90L0.13 0.90Q0.14 0.90 0.15 0.90L0.15 0.90Q0.18 0.90 0.19 0.87L0.19 0.87L0.23 0.79Z"},z:{width:.5,d:"M0.09 0.42L0.09 0.35L0.42 0.35L0.42 0.42L0.16 0.76L0.43 0.76L0.43 0.83L0.07 0.83L0.07 0.76L0.32 0.42L0.09 0.42Z"},"{":{width:.5,d:"M0.17 0.53L0.17 0.47Q0.25 0.46 0.25 0.35L0.25 0.35L0.25 0.20Q0.25 0.05 0.42 0.05L0.42 0.05L0.42 0.12Q0.32 0.12 0.32 0.20L0.32 0.20L0.32 0.34Q0.32 0.47 0.26 0.50L0.26 0.50Q0.32 0.53 0.32 0.66L0.32 0.66L0.32 0.80Q0.32 0.88 0.42 0.88L0.42 0.88L0.42 0.95Q0.25 0.95 0.25 0.80L0.25 0.80L0.25 0.65Q0.25 0.59 0.23 0.56L0.23 0.56Q0.21 0.54 0.17 0.53L0.17 0.53Z"},"|":{width:.5,d:"M0.21 1L0.21 0L0.29 0L0.29 1L0.21 1Z"},"}":{width:.5,d:"M0.08 0.95L0.08 0.88Q0.17 0.88 0.17 0.80L0.17 0.80L0.17 0.66Q0.17 0.53 0.24 0.50L0.24 0.50Q0.17 0.47 0.17 0.34L0.17 0.34L0.17 0.20Q0.17 0.12 0.08 0.12L0.08 0.12L0.08 0.05Q0.24 0.05 0.24 0.20L0.24 0.20L0.24 0.35Q0.24 0.46 0.33 0.47L0.33 0.47L0.33 0.53Q0.24 0.54 0.24 0.65L0.24 0.65L0.24 0.80Q0.24 0.95 0.08 0.95L0.08 0.95Z"},"~":{width:.5,d:"M0.08 0.21L0.08 0.16Q0.13 0.12 0.17 0.12L0.17 0.12Q0.21 0.12 0.26 0.15L0.26 0.15Q0.29 0.17 0.33 0.17L0.33 0.17Q0.37 0.17 0.42 0.14L0.42 0.14L0.42 0.19Q0.37 0.22 0.33 0.22L0.33 0.22Q0.30 0.22 0.24 0.20L0.24 0.20Q0.21 0.18 0.17 0.18L0.17 0.18Q0.13 0.18 0.08 0.21L0.08 0.21Z"}},Bf=.04;let Xp=Bf;const Rc={};Jy(Bf);function Jy(i){for(const e in Rp){const{width:t,d:n}=Rp[e],r=ba([],n),o=i;wu(r,[o,-o],[0,0]),Mr(r,[0,i]),Rc[e]={width:t/1.3*o,d:r.length!==0?hr(r):""}}}function gk(i,e={}){const t=e.size??Bf;t!==Xp&&Jy(t),Xp=t;const n=e.layers??["F.Silkscreen"],r={};let o=0;return i.split("").forEach((s,a)=>{r[a]={pos:[o,0],shape:Rc[s].d,layers:n,index:a},o+=Number(Rc[s].width)}),r}const Rh={shapes:[],limits:{x:[0,1],y:[0,1]},mm_per_unit:Cs};function vk({shapes:i,limits:e,mm_per_unit:t}){i===void 0&&(i=Rh.shapes),e===void 0&&(e=Rh.limits),t===void 0&&(t=Rh.mm_per_unit),ut.shapes=i,ut.limits=e,ut.mm_per_unit=t}function yk(i){const e=hr(i.shape),t=i.stroke??"black",n=i.fill??"none",r=i.strokeWidth??.03,o=i.strokeLinecap??"round",s=i.strokeLinejoin??"round";ut.paths.push({d:e,stroke:t,fill:n,strokeWidth:r,strokeLinecap:o,strokeLinejoin:s})}const pl={pcb:null,layerColors:{"F.Cu":"#ff8c00cc"},limits:{x:[0,1],y:[0,1]},mm_per_unit:Cs,background:"#00000000"},Ok=i=>(...e)=>{let[[{pcb:t,layerColors:n,limits:r,mm_per_unit:o,background:s}],a]=e;t===void 0&&console.log("renderPCB must include pcb param"),n===void 0&&(n=pl.layerColors),r===void 0&&(r=pl.limits),o===void 0&&(o=pl.mm_per_unit),s===void 0&&(s=pl.background);const l=[];for(const p in n){const d=n[p];l.push({data:t.getLayer(p,i),color:d,groupId:p})}const h=xk(a),c=[];for(const p in t.layers){let d=Dk(h,p);d=d??"#000000ff";const v=n[p]??d,D=p in n,m={color:v,visible:D,name:p};c.push(m)}c.sort((p,d)=>(p=p.name,d=d.name,h.indexOf(p)-h.indexOf(d))),ut.pcb=t,ut.layers=c.flat(),ut.layersStaticInfo=a,ut.shapes=l,ut.limits=r,ut.mm_per_unit=o,ut.background=s},xk=i=>{const t=ut.codemirror.view.state.doc.toString().slice(i.from,i.to),n=Bn.exports.parse(t,{range:!0}),r=Ky(n,{type:"Identifier",name:"layerColors"}).getParent().value.range;return t.slice(...r)};function Ky(i,e,t=null){if(typeof i!="object"||i===null)return null;Object.defineProperty(i,"getParent",{value:function(){return t},enumerable:!1,writable:!1});let n=!0;for(const r in e)if(i[r]!==e[r]){n=!1;break}if(n)return i;for(const r in i){const o=Ky(i[r],e,i);if(o)return o}return null}function Dk(i,e){const t=i.indexOf(e);if(t===-1)return null;const n=i.indexOf(":",t),r=i.indexOf(",",n),o=i.substring(n+1,r).trim();return o.startsWith('"')&&o.endsWith('"')?o.slice(1,-1):o}function Ck(i){const e={};i.components.forEach(o=>{e[o.id]=JSON.parse(JSON.stringify(o.pads))});const t=i.getLayer("F.Cu",!0),n=Ik(t[0]),r={};n.forEach((o,s)=>{for(const a in e){const l=e[a];for(const h in l){const c=l[h];Ak(c,o)>0||(r[s]?r[s].push([a,h]):r[s]=[[a,h]])}}}),console.log(r)}const Xh=(i,e)=>[i[0]-e[0],i[1]-e[1]],bk=(i,e,t)=>Math.max(Math.min(i,Math.max(e,t)),Math.min(e,t)),Sk=i=>Math.sqrt(i[0]**2+i[1]**2),Wp=(i,e)=>i[0]*e[0]+i[1]*e[1],wk=(i,e)=>[i[0]*e,i[1]*e];function Pk(i,e,t){const n=Xh(i,e),r=Xh(t,e),o=bk(Wp(n,r)/Wp(r,r),0,1),s=Xh(n,wk(r,o));return Sk(s)}function Lk(i,e){return 1e-6>Math.abs(i[0]-e[0])+Math.abs(i[1]-e[1])}function kk(i){return Lk(i[0],i[i.length-1])}function Ak(i,e){let t=999999999999,n=e.length,r=0;for(let o=0,s=1;s<n;s++,o++){let a=Pk(i,e[o],e[s]);t=Math.min(t,a);let l=[e[o],e[s]];Tk(l,[i,[i[0],-999999999999]])&&r++}return kk(e)||(r=0),r%2===0?t:-t}function Ek(i,e){return i[0]*e[1]-e[0]*i[1]}function _k(i,e){return i.xMin<=e.xMax&&i.xMax>=e.xMin&&i.yMin<=e.yMax&&i.yMax>=e.yMin}function Yp(i,e){let t=[[0,0],[i[1][0]-i[0][0],i[1][1]-i[0][1]]],n=[e[0]-i[0][0],e[1]-i[0][1]];return Ek(t[1],n)<0}function Zp(i,e){return Yp(i,e[0])^Yp(i,e[1])}function Up(i){let e=Math.min(i[0][0],i[1][0]),t=Math.max(i[0][0],i[1][0]),n=Math.min(i[0][1],i[1][1]),r=Math.max(i[0][1],i[1][1]);return{xMin:e,xMax:t,yMin:n,yMax:r}}function Tk(i,e){let t=Up(i),n=Up(e);return _k(t,n)&&Zp(i,e)&&Zp(e,i)}function Ik(i){return i.replace(/\s/g,"").split("M").filter(e=>e.length>0).map(e=>e.split("L").map(t=>t.split(",").map(Number)))}function Fk(i){const e=[];for(const o in i){const s=i[o];if(!s.layers.includes("F.Cu"))continue;let a=[s.pos[0],s.pos[1]];s.origin!=null&&(a[0]=s.origin[0],a[1]=s.origin[1]),e.push(...Mr(ba([],s.shape),a))}const t=vm(e),n=ym(e);ds(e,"cc");const r=Math.max(t,n);return Mr(e,ds(e,"cc"),[-25,-25]),wu(e,[40/r,40/r],ds(e,"cc")),e}class Qk extends mk{constructor(...e){super(...e),ut.idToName={}}add(...e){if(Array.isArray(e[0])){const[[t,n],r]=e,o=super.add(t,n),{variableName:s}=r;return s!==""&&(ut.idToName[o.id]=s),o}else return super.add(...e)}}const Mk=i=>({geo:Wx,PCB:Qk,via:hk,createText:gk,renderShapes:vk,renderShape:yk,checkConnectivity:Ck,renderPCB:(...e)=>Ok(i)(...e),footprint:([e],t)=>{const n=ut.footprints,r=t.variableName,{snippet:o}=t;return r in n&&n[r].snippet===o||(n[r]={snippet:o,name:r,svgView:Fk(e)}),e},pt:([e,t],n)=>{const r=n.from||-1,o=n.to||-1,s=ut.pts.some(h=>h.start===r);if(r===-1||s)return[e,t];const a=n.snippet,l={pt:[e,t],start:r+1,end:o+1,text:a};return ut.pts.push(l),[e,t]},path:(e,t)=>{const n=dm(...e),r=ut.selectablePaths.length;return ut.selectablePaths.push([t.from,e]),ut.selectedPathIndex<0||ut.selectedPathIndex===r&&(ut.selectedPath={from:t.from,to:t.to,args:e}),n},input:([e],t)=>(e.type==="slider"?ut.inputs.push([e,t]):console.log("Unrecognized input type:",e),e.value),document:null,window:null,localStorage:null,Function:null,eval:null}),Bk=`// Name: New Board
// Designer: you
// Created: today

/*
Load existing SVG-PCB board design by dragging & dropping
a SVG-PCB .js file into this browser window
*/

/* -- DECLARE_COMPONENTS -- */
// List of imported component footprints

const SAMD11C = {"A05":{"shape":"M 0.03,0.015L -0.03,0.015L -0.0305,0.015L -0.031,0.015L -0.0321,0.0149L -0.0331,0.0147L -0.0336,0.0146L -0.0347,0.0142L -0.0356,0.0139L -0.0361,0.0137L -0.0366,0.0135L -0.0371,0.0132L -0.0375,0.013L -0.038,0.0127L -0.0384,0.0125L -0.0392,0.0118L -0.0396,0.0115L -0.0401,0.0112L -0.0412,0.0101L -0.0415,0.0096L -0.0418,0.0092L -0.0425,0.0084L -0.0427,0.008L -0.043,0.0075L -0.0432,0.0071L -0.0435,0.0066L -0.0437,0.0061L -0.0439,0.0056L -0.0442,0.0047L -0.0446,0.0036L -0.0447,0.0031L -0.0449,0.0021L -0.045,0.001L -0.045,-0.001L -0.0449,-0.0021L -0.0447,-0.0031L -0.0446,-0.0036L -0.0442,-0.0047L -0.0439,-0.0056L -0.0437,-0.0061L -0.0435,-0.0066L -0.0432,-0.0071L -0.043,-0.0075L -0.0427,-0.008L -0.0425,-0.0084L -0.0418,-0.0092L -0.0415,-0.0096L -0.0412,-0.0101L -0.0401,-0.0112L -0.0396,-0.0115L -0.0392,-0.0118L -0.0384,-0.0125L -0.038,-0.0127L -0.0375,-0.013L -0.0371,-0.0132L -0.0366,-0.0135L -0.0361,-0.0137L -0.0356,-0.0139L -0.0347,-0.0142L -0.0336,-0.0146L -0.0331,-0.0147L -0.0321,-0.0149L -0.031,-0.015L 0.03,-0.015L 0.03,0.015","pos":[-0.11,0.15],"layers":["F.Cu"],"index":1},"A08":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[-0.11,0.1],"layers":["F.Cu"],"index":2},"A09":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[-0.11,0.05],"layers":["F.Cu"],"index":3},"A14":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[-0.11,0],"layers":["F.Cu"],"index":4},"A15":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[-0.11,-0.05],"layers":["F.Cu"],"index":5},"RST":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[-0.11,-0.1],"layers":["F.Cu"],"index":6},"CLK":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[-0.11,-0.15],"layers":["F.Cu"],"index":7},"DIO":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,-0.15],"layers":["F.Cu"],"index":8},"24-":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,-0.1],"layers":["F.Cu"],"index":9},"25+":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,-0.05],"layers":["F.Cu"],"index":10},"GND":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,0],"layers":["F.Cu"],"index":11},"VDD":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,0.05],"layers":["F.Cu"],"index":12},"A02":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,0.1],"layers":["F.Cu"],"index":13},"A04":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,0.15],"layers":["F.Cu"],"index":14}};

// constants
const width = 1;
const height = 1;

/* -- DECLARE_PCB -- */
// Circuit board size and shape

let board = new PCB();

let interior = path(
  pt(-0.5, 0.5),
  pt(0.5, 0.5),
  pt(0.5, -0.5),
  pt(-0.5, -0.5),
);

board.addShape("interior", interior);

/* -- ADD_COMPONENTS -- */

/*
List of components dragged and dropped 
from component footprint list onto the board

Tip: If a component's location is dependent on 
another component's location...put the dependent 
component below the reference component 
*/

/* -- ADD_WIRES -- */

/*
List of wire traces on the board
Tip: Use component pad names to create constrained 
connections between component pads
*/

board.wire(path(), 0.03); //copy and paste this generic wire command to make a new wire connection

/* -- RENDER_PCB -- */
// Define the size and shape of the export boundary...should be slightly bigger than and fully enclose your PCB design

const limit0 = pt(-0.55, -0.55);
const limit1 = pt(0.55, 0.55);
const xMin = Math.min(limit0[0], limit1[0]);
const xMax = Math.max(limit0[0], limit1[0]);
const yMin = Math.min(limit0[1], limit1[1]);
const yMax = Math.max(limit0[1], limit1[1]);

renderPCB({
  pcb: board,
  layerColors: {
    "interior": "#002d00ff",
    "B.Cu": "#ff4c007f",
    "F.Cu": "#ff8c00cc",
    "B.Mask": "#00000000",
    "F.Mask": "#00000000",
    "padLabels": "#ffff99e5",
    "componentLabels": "#00e5e5e5",
  },
  limits: {
    x: [xMin, xMax],
    y: [yMin, yMax]
  },
  mm_per_unit: 25.4
});
`,$k=`/* 
@version: v0.1.0

a basic starter design 
*/

/* -- DECLARE_PCB -- */
const board = new PCB();

/* -- DECLARE_COMPONENTS -- */
const SAMD11C = footprint({"A05":{"shape":"M 0.03,0.015L -0.03,0.015L -0.0305,0.015L -0.031,0.015L -0.0321,0.0149L -0.0331,0.0147L -0.0336,0.0146L -0.0347,0.0142L -0.0356,0.0139L -0.0361,0.0137L -0.0366,0.0135L -0.0371,0.0132L -0.0375,0.013L -0.038,0.0127L -0.0384,0.0125L -0.0392,0.0118L -0.0396,0.0115L -0.0401,0.0112L -0.0412,0.0101L -0.0415,0.0096L -0.0418,0.0092L -0.0425,0.0084L -0.0427,0.008L -0.043,0.0075L -0.0432,0.0071L -0.0435,0.0066L -0.0437,0.0061L -0.0439,0.0056L -0.0442,0.0047L -0.0446,0.0036L -0.0447,0.0031L -0.0449,0.0021L -0.045,0.001L -0.045,-0.001L -0.0449,-0.0021L -0.0447,-0.0031L -0.0446,-0.0036L -0.0442,-0.0047L -0.0439,-0.0056L -0.0437,-0.0061L -0.0435,-0.0066L -0.0432,-0.0071L -0.043,-0.0075L -0.0427,-0.008L -0.0425,-0.0084L -0.0418,-0.0092L -0.0415,-0.0096L -0.0412,-0.0101L -0.0401,-0.0112L -0.0396,-0.0115L -0.0392,-0.0118L -0.0384,-0.0125L -0.038,-0.0127L -0.0375,-0.013L -0.0371,-0.0132L -0.0366,-0.0135L -0.0361,-0.0137L -0.0356,-0.0139L -0.0347,-0.0142L -0.0336,-0.0146L -0.0331,-0.0147L -0.0321,-0.0149L -0.031,-0.015L 0.03,-0.015L 0.03,0.015","pos":[-0.11,0.15],"layers":["F.Cu"],"index":1},"A08":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[-0.11,0.1],"layers":["F.Cu"],"index":2},"A09":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[-0.11,0.05],"layers":["F.Cu"],"index":3},"A14":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[-0.11,0],"layers":["F.Cu"],"index":4},"A15":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[-0.11,-0.05],"layers":["F.Cu"],"index":5},"RST":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[-0.11,-0.1],"layers":["F.Cu"],"index":6},"CLK":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[-0.11,-0.15],"layers":["F.Cu"],"index":7},"DIO":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,-0.15],"layers":["F.Cu"],"index":8},"24-":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,-0.1],"layers":["F.Cu"],"index":9},"25+":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,-0.05],"layers":["F.Cu"],"index":10},"GND":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,0],"layers":["F.Cu"],"index":11},"VDD":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,0.05],"layers":["F.Cu"],"index":12},"A02":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,0.1],"layers":["F.Cu"],"index":13},"A04":{"shape":"M -0.03,0.015L 0.03,0.015L 0.03,-0.015L -0.03,-0.015L -0.03,0.015","pos":[0.11,0.15],"layers":["F.Cu"],"index":14}});

/* -- CONSTANTS -- */
const width = 1;
const height = 1;

/* -- ADD_COMPONENTS -- */
const ic = board.add(SAMD11C, { translate: pt(-0.2, 0.050), rotate: 0, label: "SAMD11C" })

/* -- BOARD_SIZE_SHAPE -- */
const interior = path(
  [-0.5, 0.5],
  [0.5, 0.5],
  [0.5, -0.5],
  [-0.5, -0.5],
);

board.addShape("interior", interior);

/* -- ADD_WIRES -- */
board.wire(path(), 0.03);

/* -- RENDER_PCB -- */
const limit0 = pt(-0.55, -0.55);
const limit1 = pt(0.55, 0.55);
const xMin = Math.min(limit0[0], limit1[0]);
const xMax = Math.max(limit0[0], limit1[0]);
const yMin = Math.min(limit0[1], limit1[1]);
const yMax = Math.max(limit0[1], limit1[1]);

renderPCB({
  pcb: board,
  layerColors: {
    "interior": "#002d00ff",
    "B.Cu": "#ff4c007f",
    "F.Cu": "#ff8c00cc",
    "B.Mask": "#00000000",
    "F.Mask": "#00000000",
    "padLabels": "#ffff99e5",
    "componentLabels": "#00e5e5e5",
  },
  limits: {
    x: [xMin, xMax],
    y: [yMin, yMax]
  },
  mm_per_unit: 25.4
});

`;function Xc(i){ut.error=i,console.log(i),rt("RENDER")}const Nk={RUN({dragging:i=!1,flatten:e=!1}={},t){t.paths=[],t.selectablePaths=[],t.inputs=[],t.pts=[],t.error="";const n=t.codemirror.view.state.doc;let r=n.toString();const o=uf(t.codemirror.view.state,n.length,1e4);try{const{inserts:s,inputs:a}=ak(r,o);t.layers=[];const l=[],h=[];s.forEach(d=>{h.push({from:d.from+1,insert:"["}),h.push({from:d.to-1,insert:"]"});const v={pt:()=>{let D="";const m=d.snippet.slice(1,-1);for(let y=0;y<m.length;y++){const x=m[y];['"',"'","`"].includes(x)?D+=`\\${x}`:D+=x}h.push({from:d.to-1,insert:`,{from:${d.from}, to:${d.to}, snippet:\`${D}\`}`})},input:()=>{const y=Bn.exports.parse(d.snippet,{range:!0,comment:!0}).body[0].expression.properties.find(_=>_.key.name==="value"),x=y.value.range[0]+d.from,w=y.value.range[1]+d.from;h.push({from:d.to-1,insert:`,{from:${x}, to:${w}}`})},footprint:()=>{l.push(d.variableName),h.push({from:d.to-1,insert:`,{from:${d.from}, to:${d.to}, variableName:\`${d.variableName}\`, snippet:\`${d.snippet}\`}`})},component:()=>{let D=`,{from:${d.from}, to:${d.to}, variableName:\`${d.variableName}\`}`;h.push({from:d.to-1,insert:D})},path:()=>{h.push({from:d.to-1,insert:`,{from:${d.from}, to:${d.to}}`})},renderPCB:()=>{h.push({from:d.to-1,insert:`,{from:${d.from}, to:${d.to}}`})}};d.functionName in v?v[d.functionName]():console.log("Unknown insertion requested.")}),r=uk(r,h);for(const d in ut.footprints)l.includes(d)||delete ut.footprints[d];const c=Mk(e);new Function(...Object.keys(c),r)(...Object.values(c))}catch(s){Xc(s)}rt("RENDER")},NEW_FILE(i,e){rt("UPLOAD_JS",{text:$k})},UPLOAD_COMP({text:i,name:e},t){i=i.replaceAll("$",""),i=JSON.stringify(nk(i)),i=`const temp_name = footprint(${i});
`;const n=t.codemirror.view.state.doc.toString(),r=Tl("DECLARE_COMPONENTS",n)??0;t.codemirror.view.dispatch({changes:{from:r,insert:i}}),t.codemirror.foldRange(0,i.length),rt("RENDER")},UPLOAD_COMP_OBJ({obj:i},e){let t=JSON.stringify(i);t=`const temp_name = footprint(${t});
`;const n=e.codemirror.view.state.doc.toString(),r=Tl("DECLARE_COMPONENTS",n)??0;e.codemirror.view.dispatch({changes:{from:r,insert:t}}),e.codemirror.foldRange(0,t.length),rt("RENDER")},UPLOAD_JS({text:i},e){const t=e.codemirror.view.state.doc.toString().length;e.codemirror.view.dispatch({changes:{from:0,to:t,insert:i}}),e.selectedPathIndex=-1,e.selectedPath=null,rt("RUN"),document.querySelector(".center-button").click();const r=ut.codemirror.view.state.doc.toString().match(/@version\s*:\s*(v[\S]+)/);if(r){const o=r[1],s=ut.version;o!==s&&Xc(`Version mismatch:
File expects version ${o}.
Editor is version ${s}`)}},ADD_IMPORT({text:i,name:e},t){if(Object.keys(t.footprints).includes(e))return;const r=t.codemirror.view.state.doc.toString(),o=Tl("DECLARE_COMPONENTS",r)??0;i=`const ${e} = footprint(${i});
`,t.codemirror.view.dispatch({changes:{from:o,insert:i}}),rt("RUN")},TRANSLATE({x:i,y:e,index:t},n){n.transformUpdate(i,e),rt("RUN",{dragging:!0})},RENDER(){requestAnimationFrame(()=>Ld($p(ut),document.getElementById("root")))},HARD_RENDER(){Ld($p(ut),document.getElementById("root"))}};function rt(i,e={}){const t=Nk[i];if(t)return t(e,ut);console.log("Action not recongnized:",i)}function ml(i,e){var t=[i],n,r,o,s,a,l,h;for(n=0;n<t.length;n+=1)if(a=t[n],typeof a!="number"){e(a);for(o in a)if(o!=="parent")if(l=a[o],l instanceof Array)for(r=0,s=l.length;r<s;r+=1)h=l[r],h instanceof Object&&(h.parent=a),t.push(h);else l!=null&&typeof l.type=="string"&&(l.parent=a,t.push(l))}}const Rk=(i,e)=>Math.round(i/e)*e,zp=(i,e)=>Math.round(i*10**e)/10**e,Ir=i=>ut.gridSize===0||!ut.grid?zp(i,3):zp(Rk(i,ut.gridSize),3);function Xk(i,e){const t=document.querySelector("svg");let n=!1,r,o,s,a;e("mousedown",".draggable-pt",l=>{const h=t.panZoomParams.svgPoint;h({x:l.offsetX,y:l.offsetY}),n=!0,i.transforming=!0,r=Number(l.target.dataset.index),o=[Number(l.target.getAttribute("cx")),Number(l.target.getAttribute("cy"))];const[c,p]=l.target.dataset.text.split(",");s=[...o];const d=Bn.exports.parse(c,{range:!0,comment:!0}).body[0],v=Bn.exports.parse(p,{range:!0,comment:!0}).body[0],D=Gp(s,0);ml(d,y=>D(y));const m=Gp(s,1);ml(v,y=>m(y)),a=(y,x,w)=>{const _=i.pts[w],[I,N]=_.text.split(","),Y=Bn.exports.parse(I,{range:!0,comment:!0}).body[0],j=Bn.exports.parse(N,{range:!0,comment:!0}).body[0],ae=_.start,K=ae+I.length+1,oe=[],fe=Wk(oe),U=fe(ae);ml(Y,B=>U(B,y));const H=fe(K);ml(j,B=>H(B,x)),i.codemirror.view.dispatch({changes:oe}),rt("RUN",{dragging:!0})}}),e("mousemove","",l=>{if(!n)return;const h=t.panZoomParams.svgPoint,c=h({x:l.offsetX,y:l.offsetY}),p=o[0]-s[0],d=o[1]-s[1];let v={x:0,y:0};v.x=jp(Ir(c.x)-p,3),v.y=jp(Ir(c.y)-d,3),a(v.x,v.y,r)}),e("mouseup","",l=>{n=!1,i.transforming=!1}),e("mouseleave","",l=>{n=!1,i.transforming=!1})}const jp=(i,e)=>Math.round(i*10**e)/10**e,Wk=(i,e)=>t=>{let n=!1,r=!1;return(o,s)=>{if(!r&&o.type==="Literal"&&typeof o.value=="number"){let a=o.range[0];if(o.parent&&o.parent.operator==="/")return;o.parent&&o.parent.operator,o.parent&&o.parent.type==="BinaryExpression"&&(o.parent.operator==="+"||o.parent.operator==="-")&&o.parent.right==o&&(n=!0,a=o.parent.left.range[1]),o.parent&&o.parent.type==="UnaryExpression"&&o.parent.operator==="-"&&(a=o.parent.range[0]);let l=s,h=l<0,c;h?c=`-${Math.abs(l)}`:n?c=`+${l}`:c=`${l}`,i.push({from:a+t,to:o.range[1]+t,insert:c}),r=!0}}},Gp=(i,e)=>{let t=!1,n=!1;return r=>{let o=0;if(r.type==="Literal"&&typeof r.value=="number"){if(r.range[0],r.parent&&r.parent.operator==="/")return;r.parent&&r.parent.operator==="-"&&(n=!0),r.parent&&r.parent.type==="BinaryExpression"&&(r.parent.operator==="+"||r.parent.operator==="-")&&r.parent.right==r&&(t=!0,r.parent.left.range[1]),r.parent&&r.parent.type==="UnaryExpression"&&r.parent.operator==="-"&&r.parent.range[0];let s;n?s=-r.value:s=r.value,o=s,o<0?o=-Math.abs(o):o=o,i[e]=o}return o}};function Yk(i,e){let t=!1;e("mousedown","#vertical-bar",n=>{t=!0}),e("mousemove","",n=>{if(!t)return;let r=n.clientX/window.innerWidth*100;if(r===0)return;const o=1,s=99;r<o&&(r=o),r>s&&(r=s),document.documentElement.style.setProperty("--vertical-bar",`${r}%`),pauseEvent(n)}),e("mouseup","",n=>{t&&rt("RENDER"),t=!1})}function Zk(i,e){let t=!1,n=1,r=0,o=0,s={x:0,y:0};function a(p){p.style.transformOrigin=`${0}px ${0}px`,p.style.transform="translate("+r+"px, "+o+"px) scale("+n+")",i.gridSize>0&&rt("RENDER")}function l({x:p,y:d}){let v=(p-r)/n,D=(d-o)/n;return{x:v,y:D}}e("mousedown","",p=>{p.shiftKey||(t=!0,s={x:p.offsetX-r,y:p.offsetY-o},p.detail===2&&console.log(p.offsetX,p.offsetY,l({x:p.offsetX,y:p.offsetY})))}),e("mousemove","",p=>{if(!t||i.transforming)return;r=p.offsetX-s.x,o=p.offsetY-s.y;const d=document.querySelectorAll(".transform-group");for(const v of d)a(v)}),e("mouseup","",p=>{t=!1}),e("wheel","",p=>{let d=(p.offsetX-r)/n,v=(p.offsetY-o)/n;const D=1.05;Math.sign(p.deltaY)<0?n*=D:n/=D,r=p.offsetX-d*n,o=p.offsetY-v*n;const m=document.querySelectorAll(".transform-group");for(const y of m)a(y);p.preventDefault()});function h(p){const v=document.querySelector("svg").getBoundingClientRect(),D=p.x[1]-p.x[0],m=p.y[1]-p.y[0],y=v.width/D,x=v.height/m,w=Math.min(y,x)*.9;n=w;const _={x:(p.x[0]+p.x[1])/2*w-v.width/2,y:(p.y[0]+p.y[1])/2*w-v.height/2};r=-_.x,o=-_.y;const I=document.querySelectorAll(".transform-group");for(const N of I)a(N)}function c(){const p=document.querySelector("svg");if(p===null)return null;const{left:d,right:v,bottom:D,top:m,width:y,height:x}=p.getBoundingClientRect(),w=l({x:y,y:x}),_=l({x:0,y:x}),I=l({x:y,y:0}),N=l({x:0,y:0});return{rt:w,lt:_,rb:I,lb:N}}return{scale:()=>n,x:()=>r,y:()=>o,corners:c,svgPoint:l,setScaleXY:h}}var e1={},Yu={};// @license
const gl={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},t1=function(i){this._string=i,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()};t1.prototype={parseSegment:function(){var i=this._string[this._currentIndex],e=gl[i]?gl[i]:null;if(e===null){if(this._prevCommand===null||((i==="+"||i==="-"||i==="."||i>="0"&&i<="9")&&this._prevCommand!=="Z"?this._prevCommand==="M"?e="L":this._prevCommand==="m"?e="l":e=this._prevCommand:e=null,e===null))return null}else this._currentIndex+=1;this._prevCommand=e;var t=null,n=e.toUpperCase();return n==="H"||n==="V"?t=[this._parseNumber()]:n==="M"||n==="L"||n==="T"?t=[this._parseNumber(),this._parseNumber()]:n==="S"||n==="Q"?t=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:n==="C"?t=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:n==="A"?t=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:n==="Z"&&(this._skipOptionalSpaces(),t=[]),t===null||t.indexOf(null)>=0?null:{type:e,values:t}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var i=this._string[this._currentIndex];return gl[i]?gl[i]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var i=this.peekSegmentType();return i==="M"||i==="m"},_isCurrentSpace:function(){var i=this._string[this._currentIndex];return i<=" "&&(i===" "||i===`
`||i==="	"||i==="\r"||i==="\f")},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string[this._currentIndex]!==","?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string[this._currentIndex]===","&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var i=0,e=0,t=1,n=0,r=1,o=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,r=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")&&this._string[this._currentIndex]!==".")return null;for(var a=this._currentIndex;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==a)for(var l=this._currentIndex-1,h=1;l>=a;)e+=h*(this._string[l]-"0"),l-=1,h*=10;if(this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="."){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)t*=10,n+=(this._string.charAt(this._currentIndex)-"0")/t,this._currentIndex+=1}if(this._currentIndex!==s&&this._currentIndex+1<this._endIndex&&(this._string[this._currentIndex]==="e"||this._string[this._currentIndex]==="E")&&this._string[this._currentIndex+1]!=="x"&&this._string[this._currentIndex+1]!=="m"){if(this._currentIndex+=1,this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,o=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)i*=10,i+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var c=e+n;return c*=r,i&&(c*=Math.pow(10,o*i)),s===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),c)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var i=null,e=this._string[this._currentIndex];if(this._currentIndex+=1,e==="0")i=0;else if(e==="1")i=1;else return null;return this._skipOptionalSpacesOrDelimiter(),i}};const Vp=function(i){if(!i||i.length===0)return[];var e=new t1(i),t=[];if(e.initialCommandIsMoveTo())for(;e.hasMoreData();){var n=e.parseSegment();if(n===null)break;t.push(n)}return t},Rs=typeof Symbol<"u"?Symbol():"__cachedPathData",Wh=typeof Symbol<"u"?Symbol():"__cachedNormalizedPathData";var i1=function(i,e,t,n,r,o,s,a,l,h){var c=function(it){return Math.PI*it/180},p=function(it,Nt,yt){var $=it*Math.cos(yt)-Nt*Math.sin(yt),Pe=it*Math.sin(yt)+Nt*Math.cos(yt);return{x:$,y:Pe}},d=c(s),v=[],D,m,y,x;if(h)D=h[0],m=h[1],y=h[2],x=h[3];else{var w=p(i,e,-d);i=w.x,e=w.y;var _=p(t,n,-d);t=_.x,n=_.y;var I=(i-t)/2,N=(e-n)/2,Y=I*I/(r*r)+N*N/(o*o);Y>1&&(Y=Math.sqrt(Y),r=Y*r,o=Y*o);var j;a===l?j=-1:j=1;var ae=r*r,K=o*o,oe=ae*K-ae*N*N-K*I*I,fe=ae*N*N+K*I*I,U=j*Math.sqrt(Math.abs(oe/fe));y=U*r*N/o+(i+t)/2,x=U*-o*I/r+(e+n)/2,D=Math.asin(parseFloat(((e-x)/o).toFixed(9))),m=Math.asin(parseFloat(((n-x)/o).toFixed(9))),i<y&&(D=Math.PI-D),t<y&&(m=Math.PI-m),D<0&&(D=Math.PI*2+D),m<0&&(m=Math.PI*2+m),l&&D>m&&(D=D-Math.PI*2),!l&&m>D&&(m=m-Math.PI*2)}var H=m-D;if(Math.abs(H)>Math.PI*120/180){var B=m,re=t,Qe=n;l&&m>D?m=D+Math.PI*120/180*1:m=D+Math.PI*120/180*-1,t=y+r*Math.cos(m),n=x+o*Math.sin(m),v=i1(t,n,re,Qe,r,o,s,0,l,[m,B,y,x])}H=m-D;var De=Math.cos(D),Xe=Math.sin(D),ge=Math.cos(m),$e=Math.sin(m),ue=Math.tan(H/4),he=4/3*r*ue,je=4/3*o*ue,We=[i,e],Ae=[i+he*Xe,e-je*De],Me=[t+he*$e,n-je*ge],vt=[t,n];if(Ae[0]=2*We[0]-Ae[0],Ae[1]=2*We[1]-Ae[1],h)return[Ae,Me,vt].concat(v);v=[Ae,Me,vt].concat(v);for(var et=[],tt=0;tt<v.length;tt+=3){var r=p(v[tt][0],v[tt][1],d),o=p(v[tt+1][0],v[tt+1][1],d),Ot=p(v[tt+2][0],v[tt+2][1],d);et.push([r.x,r.y,o.x,o.y,Ot.x,Ot.y])}return et},Xs=function(i){return i.map(function(e){return{type:e.type,values:Array.prototype.slice.call(e.values)}})},Uk=function(i){var e=[],t=null,n=null,r=null,o=null;return i.forEach(function(s){var a=s.type;if(a==="M"){var l=s.values[0],h=s.values[1];e.push({type:"M",values:[l,h]}),r=l,o=h,t=l,n=h}else if(a==="m"){var l=t+s.values[0],h=n+s.values[1];e.push({type:"M",values:[l,h]}),r=l,o=h,t=l,n=h}else if(a==="L"){var l=s.values[0],h=s.values[1];e.push({type:"L",values:[l,h]}),t=l,n=h}else if(a==="l"){var l=t+s.values[0],h=n+s.values[1];e.push({type:"L",values:[l,h]}),t=l,n=h}else if(a==="C"){var c=s.values[0],p=s.values[1],d=s.values[2],v=s.values[3],l=s.values[4],h=s.values[5];e.push({type:"C",values:[c,p,d,v,l,h]}),t=l,n=h}else if(a==="c"){var c=t+s.values[0],p=n+s.values[1],d=t+s.values[2],v=n+s.values[3],l=t+s.values[4],h=n+s.values[5];e.push({type:"C",values:[c,p,d,v,l,h]}),t=l,n=h}else if(a==="Q"){var c=s.values[0],p=s.values[1],l=s.values[2],h=s.values[3];e.push({type:"Q",values:[c,p,l,h]}),t=l,n=h}else if(a==="q"){var c=t+s.values[0],p=n+s.values[1],l=t+s.values[2],h=n+s.values[3];e.push({type:"Q",values:[c,p,l,h]}),t=l,n=h}else if(a==="A"){var l=s.values[5],h=s.values[6];e.push({type:"A",values:[s.values[0],s.values[1],s.values[2],s.values[3],s.values[4],l,h]}),t=l,n=h}else if(a==="a"){var l=t+s.values[5],h=n+s.values[6];e.push({type:"A",values:[s.values[0],s.values[1],s.values[2],s.values[3],s.values[4],l,h]}),t=l,n=h}else if(a==="H"){var l=s.values[0];e.push({type:"H",values:[l]}),t=l}else if(a==="h"){var l=t+s.values[0];e.push({type:"H",values:[l]}),t=l}else if(a==="V"){var h=s.values[0];e.push({type:"V",values:[h]}),n=h}else if(a==="v"){var h=n+s.values[0];e.push({type:"V",values:[h]}),n=h}else if(a==="S"){var d=s.values[0],v=s.values[1],l=s.values[2],h=s.values[3];e.push({type:"S",values:[d,v,l,h]}),t=l,n=h}else if(a==="s"){var d=t+s.values[0],v=n+s.values[1],l=t+s.values[2],h=n+s.values[3];e.push({type:"S",values:[d,v,l,h]}),t=l,n=h}else if(a==="T"){var l=s.values[0],h=s.values[1];e.push({type:"T",values:[l,h]}),t=l,n=h}else if(a==="t"){var l=t+s.values[0],h=n+s.values[1];e.push({type:"T",values:[l,h]}),t=l,n=h}else(a==="Z"||a==="z")&&(e.push({type:"Z",values:[]}),t=r,n=o)}),e},Zu=function(i){var e=[],t=null,n=null,r=null,o=null,s=null,a=null,l=null;return i.forEach(function(h){if(h.type==="M"){var c=h.values[0],p=h.values[1];e.push({type:"M",values:[c,p]}),a=c,l=p,o=c,s=p}else if(h.type==="C"){var d=h.values[0],v=h.values[1],D=h.values[2],m=h.values[3],c=h.values[4],p=h.values[5];e.push({type:"C",values:[d,v,D,m,c,p]}),n=D,r=m,o=c,s=p}else if(h.type==="L"){var c=h.values[0],p=h.values[1];e.push({type:"L",values:[c,p]}),o=c,s=p}else if(h.type==="H"){var c=h.values[0];e.push({type:"L",values:[c,s]}),o=c}else if(h.type==="V"){var p=h.values[0];e.push({type:"L",values:[o,p]}),s=p}else if(h.type==="S"){var D=h.values[0],m=h.values[1],c=h.values[2],p=h.values[3],y,x;t==="C"||t==="S"?(y=o+(o-n),x=s+(s-r)):(y=o,x=s),e.push({type:"C",values:[y,x,D,m,c,p]}),n=D,r=m,o=c,s=p}else if(h.type==="T"){var c=h.values[0],p=h.values[1],d,v;t==="Q"||t==="T"?(d=o+(o-n),v=s+(s-r)):(d=o,v=s);var y=o+2*(d-o)/3,x=s+2*(v-s)/3,w=c+2*(d-c)/3,_=p+2*(v-p)/3;e.push({type:"C",values:[y,x,w,_,c,p]}),n=d,r=v,o=c,s=p}else if(h.type==="Q"){var d=h.values[0],v=h.values[1],c=h.values[2],p=h.values[3],y=o+2*(d-o)/3,x=s+2*(v-s)/3,w=c+2*(d-c)/3,_=p+2*(v-p)/3;e.push({type:"C",values:[y,x,w,_,c,p]}),n=d,r=v,o=c,s=p}else if(h.type==="A"){var I=Math.abs(h.values[0]),N=Math.abs(h.values[1]),Y=h.values[2],j=h.values[3],ae=h.values[4],c=h.values[5],p=h.values[6];if(I===0||N===0)e.push({type:"C",values:[o,s,c,p,c,p]}),o=c,s=p;else if(o!==c||s!==p){var K=i1(o,s,c,p,I,N,Y,j,ae);K.forEach(function(U){e.push({type:"C",values:U})}),o=c,s=p}}else h.type==="Z"&&(e.push(h),o=a,s=l);t=h.type}),e};const xi=(i,e)=>e in i&&"baseVal"in i[e]?i[e].baseVal.value:+i.getAttribute(e),zk=function(i){if(i&&i.normalize){if(this[Wh])return Xs(this[Wh]);var e;this[Rs]?e=Xs(this[Rs]):(e=Vp(this.getAttribute("d")||""),this[Rs]=Xs(e));var t=Zu(Uk(e));return this[Wh]=Xs(t),t}else{if(this[Rs])return Xs(this[Rs]);var e=Vp(this.getAttribute("d")||"");return this[Rs]=Xs(e),e}},jk=function(i){var e=xi(this,"x"),t=xi(this,"y"),n=xi(this,"width"),r=xi(this,"height"),o=this.hasAttribute("rx")?xi(this,"rx"):xi(this,"ry"),s=this.hasAttribute("ry")?xi(this,"ry"):xi(this,"rx");o>n/2&&(o=n/2),s>r/2&&(s=r/2);var a=[{type:"M",values:[e+o,t]},{type:"H",values:[e+n-o]},{type:"A",values:[o,s,0,0,1,e+n,t+s]},{type:"V",values:[t+r-s]},{type:"A",values:[o,s,0,0,1,e+n-o,t+r]},{type:"H",values:[e+o]},{type:"A",values:[o,s,0,0,1,e,t+r-s]},{type:"V",values:[t+s]},{type:"A",values:[o,s,0,0,1,e+o,t]},{type:"Z",values:[]}];return a=a.filter(function(l){return!(l.type==="A"&&(l.values[0]===0||l.values[1]===0))}),i&&i.normalize===!0&&(a=Zu(a)),a},Gk=function(i){var e=xi(this,"cx"),t=xi(this,"cy"),n=xi(this,"r"),r=[{type:"M",values:[e+n,t]},{type:"A",values:[n,n,0,0,1,e,t+n]},{type:"A",values:[n,n,0,0,1,e-n,t]},{type:"A",values:[n,n,0,0,1,e,t-n]},{type:"A",values:[n,n,0,0,1,e+n,t]},{type:"Z",values:[]}];return i&&i.normalize===!0&&(r=Zu(r)),r},Vk=function(i){var e=xi(this,"cx"),t=xi(this,"cy"),n=xi(this,"rx"),r=xi(this,"ry"),o=[{type:"M",values:[e+n,t]},{type:"A",values:[n,r,0,0,1,e,t+r]},{type:"A",values:[n,r,0,0,1,e-n,t]},{type:"A",values:[n,r,0,0,1,e,t-r]},{type:"A",values:[n,r,0,0,1,e+n,t]},{type:"Z",values:[]}];return i&&i.normalize===!0&&(o=Zu(o)),o},qk=function(){const i=xi(this,"x1"),e=xi(this,"x2"),t=xi(this,"y1"),n=xi(this,"y2");return[{type:"M",values:[i,t]},{type:"L",values:[e,n]}]},Hk=function(){for(var i=[],e=0;e<this.points.numberOfItems;e+=1){var t=this.points.getItem(e);i.push({type:e===0?"M":"L",values:[t.x,t.y]})}return i},Jk=function(){for(var i=[],e=0;e<this.points.numberOfItems;e+=1){var t=this.points.getItem(e);i.push({type:e===0?"M":"L",values:[t.x,t.y]})}return i.push({type:"Z",values:[]}),i},qp={circle:Gk,ellipse:Vk,path:zk,polygon:Jk,polyline:Hk,line:qk,rect:jk};function Kk(i,e){const t=i.nodeName.toLowerCase();if(t in qp)return qp[t].call(i,e);throw new Error(`Unsupported SVG element type: '${t}'`)}var eA={getPathData:Kk};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.flattenSVG=void 0;const tA=eA;function iA([i,e,t,n,r,o,s,a],l){const h=3*t-2*i-s,c=3*n-2*e-a,p=3*r-2*s-i,d=3*o-2*a-e;return Math.max(h*h,p*p)+Math.max(c*c,d*d)<=16*l*l}function nA([i,e,t,n,r,o,s,a],l){l===void 0&&(l=.5);let h=1-l,c=h*i+l*t,p=h*e+l*n,d=h*t+l*r,v=h*n+l*o,D=h*r+l*s,m=h*o+l*a,y=h*c+l*d,x=h*p+l*v,w=h*d+l*D,_=h*v+l*m,I=h*y+l*w,N=h*x+l*_;return[[i,e,c,p,y,x,I,N],[I,N,w,_,D,m,s,a]]}function rA(i,e,t=32){const n=1/t,r=[];function o(s,a,l){if(l-a>n&&!iA(s,e)){const h=nA(s,.5),c=(a+l)/2;o(h[0],a,c),o(h[1],c,l)}else{const h=s[6]-s[0],c=s[7]-s[1];Math.sqrt(h*h+c*c)>0&&r.push(s)}}return o(i,0,1),r}function*n1(i){switch(i.nodeName.toLowerCase()){case"svg":case"g":case"a":for(const e of i.children)yield*n1(e);break;case"rect":case"circle":case"ellipse":case"path":case"line":case"polyline":case"polygon":yield i;break}}function r1(i){if(!i)return null;const e=i.getAttribute("stroke")||i.style.stroke;return e||(i===i.ownerSVGElement||!i.ownerSVGElement?null:i.parentNode?r1(i.parentNode):null)}function s1(i){return i?i.id&&i.nodeName.toLowerCase()==="g"?i.id:i.parentNode?s1(i.parentNode):null:null}function Ws(i,e){const t=[i,e];return t.x=i,t.y=e,t}function sA(i,e={}){const{maxError:t=.1}=e,n=i.createSVGPoint(),r=[];for(const o of n1(i)){const s=o.getCTM(),a=s==null?([p,d])=>Ws(p,d):([p,d])=>{n.x=p,n.y=d;const v=n.matrixTransform(s);return Ws(v.x,v.y)},l=tA.getPathData(o,{normalize:!0});let h=null,c=null;for(const p of l)if(p.type==="M")h=a(p.values),c=h,r.push({points:[h],stroke:r1(o),groupId:s1(o)});else if(p.type==="L")h=a(p.values),r[r.length-1].points.push(h);else if(p.type==="C"){const[d,v,D,m,y,x]=p.values,[w,_]=h,[I,N]=a([d,v]),[Y,j]=a([D,m]),[ae,K]=a([y,x]),oe=rA([w,_,I,N,Y,j,ae,K],t);for(const fe of oe)r[r.length-1].points.push(Ws(fe[6],fe[7]));h=Ws(ae,K)}else if(p.type==="A"){const[d,v,D,m,y,x,w]=p.values,_=D,I=y,N=m,{cos:Y,sin:j,atan2:ae,sqrt:K,sign:oe,acos:fe,abs:U,ceil:H}=Math,B=(h[0]-x)/2,re=(h[1]-w)/2,Qe=Y(_)*B+j(_)*re,De=-j(_)*B+Y(_)*re,Xe=Qe*Qe,ge=De*De,$e=Xe/(d*d)+ge/(v*v),ue=$e<=1?K($e)*d:d,he=$e<=1?K($e)*v:v,je=ue*ue,We=he*he;let Ae=(je*We-je*ge-We*Xe)/(je*ge+We*Xe);if(U(Ae)<1e-4&&(Ae=0),Ae<0)throw new Error(`bad arc args ${Ae}`);const Me=(N===I?-1:1)*K(Ae),vt=Me*ue*De/he,et=Me*-he*Qe/ue,tt=Y(_)*vt-j(_)*et+(h[0]+x)/2,Ot=j(_)*vt+Y(_)*et+(h[1]+w)/2,it=(J,G,ce,Ie)=>ae(J*Ie-G*ce,J*ce+G*Ie),Nt=it(1,0,(Qe-vt)/ue,(De-et)/he),yt=it((Qe-vt)/ue,(De-et)/he,(-Qe-vt)/ue,(-De-et)/he)%(Math.PI*2),$=I===0&&yt>0?yt-Math.PI*2:I===1&&yt<0?yt+Math.PI*2:yt,Pe=t,Oe=H(U($)/fe(1-Pe/ue));for(let J=1;J<=Oe;J++){const G=Nt+$*J/Oe,ce=Y(_)*ue*Y(G)-j(_)*he*j(G)+tt,Ie=j(_)*ue*Y(G)+Y(_)*he*j(G)+Ot;r[r.length-1].points.push(Ws(ce,Ie))}h=Ws(x,w)}else if(p.type==="Z")c&&(h[0]!==c[0]||h[1]!==c[1])&&r[r.length-1].points.push(c);else throw Error(`Unexpected path command: "${p}"`)}return r}Yu.flattenSVG=sA;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Yu;Object.defineProperty(i,"flattenSVG",{enumerable:!0,get:function(){return e.flattenSVG}})})(e1);let Hp=0;function oA(i){var e=new FileReader;e.readAsText(i),e.onloadend=t=>{let n=e.result;rt("UPLOAD_COMP",{text:n,name:`component${Hp}`}),Hp++}}function aA(i){var e=new FileReader;e.readAsText(i),e.onloadend=t=>{let n=e.result;rt("UPLOAD_JS",{text:n})}}function lA(i,e=[]){let t=i[0],n=t.name.split(".");n[0];const r=n[n.length-1];if(r==="kicad_mod")oA(t);else if(r==="js")aA(t);else if(r==="svg")hA(t);else throw Error("Unknown extension:",r)}const vl=i=>Math.round(i*1e3)/1e3;function uA(i){let e="";return i.points.forEach((t,n)=>{n===0?e+=`M${vl(t[0])},${-vl(t[1])}`:e+=`L${vl(t[0])},${-vl(t[1])}`}),e}function hA(i){var e=new FileReader;e.readAsText(i),e.onloadend=t=>{let n=e.result;const s=new DOMParser().parseFromString(n,"image/svg+xml").querySelector("svg"),a=e1.flattenSVG(s,{maxError:.001}),l={};a.forEach((h,c)=>{l[c]={shape:uA(h),pos:[0,0],layers:["F.Cu"]}}),rt("UPLOAD_COMP_OBJ",{obj:l})}}function cA(i,e){e("drop","",function(t){let r=t.dataTransfer.files;document.querySelector(".drop-modal").classList.add("hidden"),lA(r),pauseEvent(t)}),e("dragover","",function(t){document.querySelector(".drop-modal").classList.remove("hidden"),pauseEvent(t)}),e("mouseleave","",function(t){document.querySelector(".drop-modal").classList.add("hidden")})}function fA(i,e){let t=null,n=null;const r=document.querySelector("svg");e("mousedown","",o=>{o.shiftKey&&(t=r.panZoomParams.svgPoint({x:o.offsetX,y:o.offsetY}))}),e("mousemove","",o=>{document.body.classList.add("no-select"),o.shiftKey&&t!==null&&(n=r.panZoomParams.svgPoint({x:o.offsetX,y:o.offsetY}),i.selectBox.start=t,i.selectBox.end=n,rt("RENDER"))}),e("mouseup","",o=>{o.shiftKey&&(document.body.classList.remove("no-select"),t=null,n=null,i.selectBox.start=t,i.selectBox.end=n,rt("RENDER"))})}const Jp=i=>/[0-9]/i.test(i)||i===".";function dA(i,e){let t=!1,n,r,o,s,a,l=null,h=!1,c=!1;e("mousedown",".d",p=>{const v=i.codemirror.view.state,D=v.doc,m=v.selection.main.head;D.lineAt(m);let{from:y,to:x,text:w}=D.lineAt(m),_=m,I=m;for(;_>y&&Jp(w[_-y-1]);)_--;for(;I<x&&Jp(w[I-y]);)I++;let N;if(_>y){let Y=_;for(;Y>y;)if(Y--,N=w[Y-y],N!==" ")if(N==="+")l=Y;else if(N==="-")l=Y,c=!0;else{if(["(","[",",","/","*",";","{","=",":"].includes(N))break;h=!0;break}}a=w.slice(_-y,I-y),n=Number(a),c&&(n=-n),t=!0,r=_,s=a.includes("."),o=a.includes(".")?a.split(".")[1].length:1}),e("mousemove","",p=>{if(!t)return;const d=i.codemirror;let v,D=a.length;if(0>p.movementX,s){let y=Math.round(n*10**o)+p.movementX;y=Math.round(y)/10**o,n=y,v=`${Math.abs(n).toFixed(o)}`}else n+=p.movementX,v=`${Math.abs(n)}`;h?(l==null&&(v=(n<0?"-":"+")+v),d.view.dispatch({changes:{from:r,to:r+D,insert:v}}),l!=null&&d.view.dispatch({changes:{from:l,to:l+1,insert:n<0?"-":"+"}})):l!=null?n<0?(d.view.dispatch({changes:{from:r,to:r+D,insert:v}}),d.view.dispatch({changes:{from:l,to:l+1,insert:"-"}})):(d.view.dispatch({changes:{from:l,to:r+D,insert:v}}),r=l,l=null):(n<0&&(v="-"+v),d.view.dispatch({changes:{from:r,to:r+D,insert:v}})),a=v,rt("RUN",{dragging:!0}),pauseEvent(p)}),e("mouseup","",p=>{t=!1,l=null,h=!1,c=!1})}function pA(i,e){const t=document.querySelector("svg");let n=!1,r=null;e("mousedown",".footprint-svg, .path-footprint",o=>{n=!0,o.target.dataset.index,r=o.target.dataset.key}),e("mousemove","",o=>{if(!n)return;const s=t.panZoomParams.svgPoint;s({x:o.offsetX,y:o.offsetY});var a=event.path||event.composedPath&&event.composedPath();if(!a)return;a.some(p=>p.matches&&p.matches("#viewer"));const l=document.querySelector("#viewer").getBoundingClientRect(),h=o.clientX-l.left,c=o.clientY-l.top;i.previewFootprint=[i.footprints[r],[h,c]],rt("RENDER")}),e("mouseup","",o=>{if(i.previewFootprint!==null){const s=document.querySelector("#viewer").getBoundingClientRect(),a=o.clientX-s.left,l=s.bottom-o.clientY,h=t.panZoomParams.svgPoint,c=h({x:a,y:l}),p=i.codemirror.view.state.doc.toString(),d=Tl("ADD_COMPONENTS",p);if(d!==null){const v=i.previewFootprint[0].name,D=`board.add(${v}, { translate: pt(${c.x}, ${c.y}), rotate: 0, label: "${v}" })
`;i.codemirror.view.dispatch({changes:{from:d,insert:D}}),rt("RUN")}}i.previewFootprint=null,n&&rt("RENDER"),n=!1}),e("mouseleave","",o=>{i.previewFootprint=null,n=!1})}function Wc(i){if(!ut.snapToPad||!ut.pcb)return i;i.snapped=!1;const e=ut.pcb.components,t=ut.pcb.ids;for(let n=0;n<e.length;n++){const r=e[n],o=t[n],s=ut.idToName[o]||"",a=r.pads;for(const l in a){const h=a[l],c=Math.abs(i.x-h[0]),p=Math.abs(i.y-h[1]);if(Math.sqrt(c**2+p**2)<ut.snapToPadRadius){i.x=h[0],i.y=h[1],i.snapped=!0,i.padRef=s!==""?`${s}.pad("${l}")`:`[${i.x.toFixed(3)}, ${i.y.toFixed(3)}]`;break}}}return i}function mA(i,e){let t=-1,n=[],r="";const o=document.querySelector("svg").panZoomParams.svgPoint;e("mousedown",".path-pt",s=>{i.heldKeys.size>0||(t=Number(s.target.dataset.index.split(",")[0]),n=s.target.dataset.index.split(",").map(Number),r=s.target.dataset.type,i.transforming=!0)}),e("mousemove","",s=>{if(t<0)return;const{from:a,to:l,args:h}=i.selectedPath,p=i.codemirror.view.state.doc.toString().slice(a,l),d=Bn.exports.parse(`hack${p}`,{range:!0,comment:!0}).body[0];let v=o({x:s.offsetX,y:s.offsetY});v=Wc(v),v.snapped||(v.x=Ir(v.x),v.y=Ir(v.y));const D={point(){const m=d.expression.arguments[t];m.range=[m.range[0]-4+a,m.range[1]-4+a];const y=v.snapped?`${v.padRef}`:`[${v.x}, ${v.y}]`;i.codemirror.view.dispatch({changes:[{from:m.range[0],to:m.range[1],insert:y}]}),rt("RUN")},cubic:vA,filletOrChamfer(){const m=d.expression.arguments[t].elements[2];m.range=[m.range[0]-4+a,m.range[1]-4+a];const y=v.snapped?`${v.padRef}`:`[${v.x}, ${v.y}]`;i.codemirror.view.dispatch({changes:[{from:m.range[0],to:m.range[1],insert:y}]}),rt("RUN")}}[r];D&&D({fullIndex:n,x:v.x,y:v.y,ast:d,args:h,state:i,from:a,handleMovement:i.cubicHandleManipulation})}),e("mouseup","",s=>{t=-1,i.transforming=!1}),e("mousedown",".path-pt",s=>{if(i.heldKeys.size!==1||!i.heldKeys.has("KeyZ"))return;const{from:a,to:l,args:h}=i.selectedPath,p=i.codemirror.view.state.doc.toString().slice(a,l),d=Bn.exports.parse(`hack${p}`,{range:!0,comment:!0}).body[0];let v=s.target.dataset.index.split(",").map(Number),D=s.target.dataset.type;const m=h[v[0]];if(D==="point"){const y=yA(h,v[0]),x=.3;let w=[m[0]-x*Math.cos(y),m[1]-x*Math.sin(y)],_=[m[0]+x*Math.cos(y),m[1]+x*Math.sin(y)];const I=[m[0]-x*Math.cos(y+Math.PI/2),m[1]-x*Math.sin(y+Math.PI/2)],N=(oe,fe,U)=>(fe[0]-oe[0])*(U[1]-oe[1])-(fe[1]-oe[1])*(U[0]-oe[0]),Y=v[0]>=1?lr(h,v[0]-1):lr(h,v[0]);if(!(N(m,I,w)*N(m,I,Y)>=0)){const oe=w;w=_,_=oe}const ae=`[ "cubic", [${w.join(",")}], [${m.join(",")}], [${_.join(",")}] ]`,K=d.expression.arguments[v[0]];K.range=[K.range[0]-4+a,K.range[1]-4+a],i.codemirror.view.dispatch({changes:[{from:K.range[0],to:K.range[1],insert:ae}]}),rt("RUN")}if(D==="cubic"){const y=d.expression.arguments[v[0]];y.range=[y.range[0]-4+a,y.range[1]-4+a],i.codemirror.view.dispatch({changes:[{from:y.range[0],to:y.range[1],insert:`["fillet", 0.1, [ ${m[2].join(",")} ] ]`}]}),rt("RUN")}if(D==="filletOrChamfer"){const y=d.expression.arguments[v[0]];y.range=[y.range[0]-4+a,y.range[1]-4+a],i.codemirror.view.dispatch({changes:[{from:y.range[0],to:y.range[1],insert:`[ ${m[2].join(",")} ]`}]}),rt("RUN")}}),e("mousedown",".path-pt",s=>{if(i.heldKeys.size!==1||!i.heldKeys.has("KeyX"))return;const{from:a,to:l,args:h}=i.selectedPath,c=i.codemirror.view.state.doc.toString(),p=c.slice(a,l),d=Bn.exports.parse(`hack${p}`,{range:!0,comment:!0}).body[0],v=s.target.dataset.index.split(",").map(Number),D=d.expression.arguments[v[0]];let m=D.range[0]-4+a,y=D.range[1]-4+a;for(;[" ",",","	",`
`].includes(c[y]);)y++;i.codemirror.view.dispatch({changes:[{from:m,to:y,insert:""}]}),rt("RUN")}),e("mousedown",".selectable-path",s=>{[...s.target.classList].find(l=>l.match(/pathStart-\d+/)).split("-")[1];const a=[...s.target.classList].find(l=>l.match(/pathIndex-\d+/)).split("-")[1];i.selectedPathIndex=Number(a),i.heldKeys=new Set,rt("RUN")}),gA(i,e)}function gA(i,e){let t=null;const r=document.querySelector("svg").panZoomParams.svgPoint;let o=!1,s=!1;e("mousedown","",a=>{s=!1,!(i.heldKeys.size>0)&&(a.target.classList.contains("selectable-path")||i.selectedPathIndex<0||i.selectedPath===null||(o=a.composedPath().some(l=>{var h;return(h=l.classList)==null?void 0:h.contains("draggable-pt")})||a.target.classList.contains("path-pt"),t={x:a.offsetX,y:a.offsetY},rt("RUN")))}),e("contextmenu",".path-pt",a=>{s=!0,a.preventDefault()}),e("mousemove","",a=>{o&&(s=!0);const l={x:a.offsetX,y:a.offsetY},h=r(l),c=Wc(h);c.snapped||(c.x=Ir(c.x),c.y=Ir(c.y)),i.preview=[c.x,c.y],rt("RENDER")}),e("mouseup","",a=>{const l={x:a.offsetX,y:a.offsetY};if(t===null||t.x!==l.x||t.y!==l.y||s)return t=null,null;const h=r(t),c=Wc(h);c.snapped||(c.x=Ir(c.x),c.y=Ir(c.y));const d=i.codemirror.view.state.doc.toString();let v=i.selectedPath.to-2;const D=[" ","	",`
`];let m=" ";for(;v>0&&(m=d[v],!!D.includes(m));)v--;const y=`${m===","||m==="("?"":","} `,x=c.snapped?`${y}${c.padRef},`:`${y}[${c.x}, ${c.y}],`;i.codemirror.view.dispatch({changes:{from:v+1,insert:x}}),rt("RUN")})}function vA({ast:i,args:e,x:t,y:n,fullIndex:r,state:o,from:s,handleMovement:a}){let[l,h,c,p]=JSON.parse(JSON.stringify(e[r[0]]));const d=r[1],v={1:h,2:c,3:p}[d],D=[...v];v[0]=t,v[1]=n;const m=v[0]-D[0],y=v[1]-D[1];if(a!=="broken"&&[1,3].includes(d)){const I=c;let N={1:p,3:h}[d];const Y=t-I[0],j=n-I[1],ae=Yc([t,n],I);if(a==="symmetric")N[0]=I[0]-Y,N[1]=I[1]-j;else if(a==="colinear"){const K=Math.sqrt((N[0]-I[0])**2+(N[1]-I[1])**2);N[0]=I[0]-K*Math.cos(ae),N[1]=I[1]-K*Math.sin(ae)}}d===2&&(h[0]+=m,h[1]+=y,p[0]+=m,p[1]+=y);const x=i.expression.arguments[r[0]].elements.slice(1),w=[h,c,p],_=x.map((I,N)=>{const[Y,j]=w[N],ae=[I.range[0]-4+s,I.range[1]-4+s];return{from:ae[0],to:ae[1],insert:`[${Y.toFixed(3)}, ${j.toFixed(3)}]`}});o.codemirror.view.dispatch({changes:_}),rt("RUN")}function Yc(i,e){const t=i[0]-e[0],n=i[1]-e[1];return Math.atan2(n,t)}function yA(i,e){if(i.length<=3)return 0;let t=e>=1?lr(i,e-1):lr(i,e),n=e<i.length-1?lr(i,e+1):lr(i,e);(e===0||e===i.length-1)&&(t=lr(i,1),n=lr(i,i.length-2));const r=lr(i,e),o=Yc(r,t),s=Yc(n,r);return(o+s)/2}function OA(i){return typeof i[0]=="number"?"point":i[0]}function lr(i,e){const t=i[e];return OA(t)==="point"?t:t[2]}function xA(i,e){e("click",".cm-path-button",t=>{i.selectedPathIndex>=0&&(i.selectedPathIndex=-1,rt("RENDER"));let{pathStart:n}=t.target.dataset;const r=document.querySelector(`.pathStart-${n}`);if(!r)return;const o=[...r.classList].find(s=>s.match(/pathIndex-\d+/)).split("-")[1];i.selectedPathIndex=Number(o),i.heldKeys=new Set,rt("RUN")})}function DA(i){return i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),i.cancelBubble=!0,i.returnValue=!1,!1}window.pauseEvent=DA;const o1=i=>i.composedPath()[0],CA=(i,e)=>o1(i).matches(e),Kp=i=>(e,t,n)=>{i.addEventListener(e,r=>{r.trigger=o1(r),(t===""||CA(r,t))&&n(r)})};function bA(i){const e=document.querySelector("svg"),t=Kp(e);e.panZoomParams=Zk(i,t),i.panZoomParams=e.panZoomParams,fA(i,t),Xk(i,t),mA(i,t);const n=document.querySelector("body"),r=Kp(n);pA(i,r),cA(i,r),dA(i,r),Yk(i,r),xA(i,r),window.addEventListener("keydown",o=>{const s=event.code;i.heldKeys.add(s),o.target.classList.contains("cm-content")&&Uy(),s==="Enter"&&event.shiftKey?(event.preventDefault(),rt("RUN")):s==="KeyT"&&event.shiftKey}),window.addEventListener("keyup",o=>{const s=event.code;i.heldKeys.delete(s)}),window.addEventListener("unload",()=>{const o=i.codemirror.view.state.doc.toString();window.localStorage.setItem("svg-pcb",o)}),window.addEventListener("wheel",()=>{function o(v,D){return Math.log(D)/Math.log(v)}if(!i.panZoomParams)return;const s=i.panZoomParams.corners(),a=[s.lt.x,s.rt.x],l=Math.abs(a[1]-a[0]),h=[s.lb.y,s.lt.y],c=Math.abs(h[1]-h[0]),p=Math.round(o(5,Math.max(l,c))),d=i.adaptiveGrid?5**p/20:i.gridSize;i.gridSize=d})}async function SA(i,e){const n=await(await fetch(i,{mode:"cors"})).text();e.codemirror.view.dispatch({changes:{from:0,insert:n}});const r=h=>h.includes("return kicadToObj("),s=e.codemirror.view.state.doc.toString().split(`
`);let a=0,l=0;for(;;){const h=s[a];if(!h||(l+=h.length,a>s.length)||s[a]==="`)})()"&&!r(s[a+1]))break;a++}e.codemirror.foldRange(0,l+a),rt("RUN"),document.querySelector(".center-button").click()}function wA(){rt("HARD_RENDER");const i=window.location.search,e=new URLSearchParams(i).get("neil")==="true";ut.vimMode=e;const t=document.querySelector(".code-editor");ut.codemirror=Ty(t,e),bA(ut),new URL(window.location.href);const n=new URLSearchParams(i).get("code"),r=new URLSearchParams(i).get("file"),o=new URLSearchParams(i).get("bezier")==="false",s=new URLSearchParams(i).get("grid")==="false",a=new URLSearchParams(i).get("run")==="false";if(o&&(ut.viewHandles=!1),s&&(ut.grid=!1),!n)if(r){let c=r;r.startsWith("http")||(c=`examples/${r}`),SA(c,ut)}else{const c=window.localStorage.getItem("svg-pcb");ut.codemirror.view.dispatch({changes:{from:0,insert:c??Bk}}),a||rt("RUN"),document.querySelector(".center-button").click()}const h=ut.codemirror.view.state.doc.toString().match(/@version\s*:\s*(v[\S]+)/);if(h){const c=h[1],p=ut.version;c!==p&&Xc(`Version mismatch:
File expects version ${c}.
Editor is version ${p}`)}rt("RENDER"),window.exportNet=PA}function PA(){if(!ut.pcb){console.log("No pcb in state.");return}const i=ut.pcb,e={};i.components.map(r=>{r.id===""&&console.log("Assign board.add(...) to variable or pass id in object parameters."),e[r.refDes]={pads:r.padShapes,pos:r._pos,padPositions:r.pads}});const t={components:e,netList:i._netList},n=JSON.stringify(t);console.log(t),$y("netList.json",n,!1)}window.addEventListener("load",async()=>{wA()});
