var i0=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var aS=i0((cS,Ur)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var co;const Gr=window,rn=Gr.trustedTypes,Ca=rn?rn.createPolicy("lit-html",{createHTML:i=>i}):void 0,si=`lit$${(Math.random()+"").slice(9)}$`,qu="?"+si,n0=`<${qu}>`,sn=document,Rn=(i="")=>sn.createComment(i),Yn=i=>i===null||typeof i!="object"&&typeof i!="function",zu=Array.isArray,r0=i=>zu(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",Cn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Sa=/-->/g,wa=/>/g,Ci=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ba=/'/g,Da=/"/g,Uu=/^(?:script|style|textarea|title)$/i,Gu=i=>(t,...e)=>({_$litType$:i,strings:t,values:e}),Ai=Gu(1),be=Gu(2),Wn=Symbol.for("lit-noChange"),Zt=Symbol.for("lit-nothing"),Ta=new WeakMap,Hi=sn.createTreeWalker(sn,129,null,!1),s0=(i,t)=>{const e=i.length-1,n=[];let r,o=t===2?"<svg>":"",s=Cn;for(let h=0;h<e;h++){const c=i[h];let p,d,m=-1,v=0;for(;v<c.length&&(s.lastIndex=v,d=s.exec(c),d!==null);)v=s.lastIndex,s===Cn?d[1]==="!--"?s=Sa:d[1]!==void 0?s=wa:d[2]!==void 0?(Uu.test(d[2])&&(r=RegExp("</"+d[2],"g")),s=Ci):d[3]!==void 0&&(s=Ci):s===Ci?d[0]===">"?(s=r!=null?r:Cn,m=-1):d[1]===void 0?m=-2:(m=s.lastIndex-d[2].length,p=d[1],s=d[3]===void 0?Ci:d[3]==='"'?Da:ba):s===Da||s===ba?s=Ci:s===Sa||s===wa?s=Cn:(s=Ci,r=void 0);const C=s===Ci&&i[h+1].startsWith("/>")?" ":"";o+=s===Cn?c+n0:m>=0?(n.push(p),c.slice(0,m)+"$lit$"+c.slice(m)+si+C):c+si+(m===-2?(n.push(void 0),h):C)}const l=o+(i[e]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[Ca!==void 0?Ca.createHTML(l):l,n]};class Zn{constructor({strings:t,_$litType$:e},n){let r;this.parts=[];let o=0,s=0;const l=t.length-1,h=this.parts,[c,p]=s0(t,e);if(this.el=Zn.createElement(c,n),Hi.currentNode=this.el.content,e===2){const d=this.el.content,m=d.firstChild;m.remove(),d.append(...m.childNodes)}for(;(r=Hi.nextNode())!==null&&h.length<l;){if(r.nodeType===1){if(r.hasAttributes()){const d=[];for(const m of r.getAttributeNames())if(m.endsWith("$lit$")||m.startsWith(si)){const v=p[s++];if(d.push(m),v!==void 0){const C=r.getAttribute(v.toLowerCase()+"$lit$").split(si),O=/([.?@])?(.*)/.exec(v);h.push({type:1,index:o,name:O[2],strings:C,ctor:O[1]==="."?l0:O[1]==="?"?h0:O[1]==="@"?u0:Ts})}else h.push({type:6,index:o})}for(const m of d)r.removeAttribute(m)}if(Uu.test(r.tagName)){const d=r.textContent.split(si),m=d.length-1;if(m>0){r.textContent=rn?rn.emptyScript:"";for(let v=0;v<m;v++)r.append(d[v],Rn()),Hi.nextNode(),h.push({type:2,index:++o});r.append(d[m],Rn())}}}else if(r.nodeType===8)if(r.data===qu)h.push({type:2,index:o});else{let d=-1;for(;(d=r.data.indexOf(si,d+1))!==-1;)h.push({type:7,index:o}),d+=si.length-1}o++}}static createElement(t,e){const n=sn.createElement("template");return n.innerHTML=t,n}}function on(i,t,e=i,n){var r,o,s,l;if(t===Wn)return t;let h=n!==void 0?(r=e._$Co)===null||r===void 0?void 0:r[n]:e._$Cl;const c=Yn(t)?void 0:t._$litDirective$;return(h==null?void 0:h.constructor)!==c&&((o=h==null?void 0:h._$AO)===null||o===void 0||o.call(h,!1),c===void 0?h=void 0:(h=new c(i),h._$AT(i,e,n)),n!==void 0?((s=(l=e)._$Co)!==null&&s!==void 0?s:l._$Co=[])[n]=h:e._$Cl=h),h!==void 0&&(t=on(i,h._$AS(i,t.values),h,n)),t}class o0{constructor(t,e){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var e;const{el:{content:n},parts:r}=this._$AD,o=((e=t==null?void 0:t.creationScope)!==null&&e!==void 0?e:sn).importNode(n,!0);Hi.currentNode=o;let s=Hi.nextNode(),l=0,h=0,c=r[0];for(;c!==void 0;){if(l===c.index){let p;c.type===2?p=new or(s,s.nextSibling,this,t):c.type===1?p=new c.ctor(s,c.name,c.strings,this,t):c.type===6&&(p=new c0(s,this,t)),this.u.push(p),c=r[++h]}l!==(c==null?void 0:c.index)&&(s=Hi.nextNode(),l++)}return o}p(t){let e=0;for(const n of this.u)n!==void 0&&(n.strings!==void 0?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class or{constructor(t,e,n,r){var o;this.type=2,this._$AH=Zt,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=r,this._$Cm=(o=r==null?void 0:r.isConnected)===null||o===void 0||o}get _$AU(){var t,e;return(e=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&e!==void 0?e:this._$Cm}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return e!==void 0&&t.nodeType===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=on(this,t,e),Yn(t)?t===Zt||t==null||t===""?(this._$AH!==Zt&&this._$AR(),this._$AH=Zt):t!==this._$AH&&t!==Wn&&this.g(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):r0(t)?this.k(t):this.g(t)}O(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}g(t){this._$AH!==Zt&&Yn(this._$AH)?this._$AA.nextSibling.data=t:this.T(sn.createTextNode(t)),this._$AH=t}$(t){var e;const{values:n,_$litType$:r}=t,o=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=Zn.createElement(r.h,this.options)),r);if(((e=this._$AH)===null||e===void 0?void 0:e._$AD)===o)this._$AH.p(n);else{const s=new o0(o,this),l=s.v(this.options);s.p(n),this.T(l),this._$AH=s}}_$AC(t){let e=Ta.get(t.strings);return e===void 0&&Ta.set(t.strings,e=new Zn(t)),e}k(t){zu(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,r=0;for(const o of t)r===e.length?e.push(n=new or(this.O(Rn()),this.O(Rn()),this,this.options)):n=e[r],n._$AI(o),r++;r<e.length&&(this._$AR(n&&n._$AB.nextSibling,r),e.length=r)}_$AR(t=this._$AA.nextSibling,e){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,e);t&&t!==this._$AB;){const r=t.nextSibling;t.remove(),t=r}}setConnected(t){var e;this._$AM===void 0&&(this._$Cm=t,(e=this._$AP)===null||e===void 0||e.call(this,t))}}class Ts{constructor(t,e,n,r,o){this.type=1,this._$AH=Zt,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Zt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,n,r){const o=this.strings;let s=!1;if(o===void 0)t=on(this,t,e,0),s=!Yn(t)||t!==this._$AH&&t!==Wn,s&&(this._$AH=t);else{const l=t;let h,c;for(t=o[0],h=0;h<o.length-1;h++)c=on(this,l[n+h],e,h),c===Wn&&(c=this._$AH[h]),s||(s=!Yn(c)||c!==this._$AH[h]),c===Zt?t=Zt:t!==Zt&&(t+=(c!=null?c:"")+o[h+1]),this._$AH[h]=c}s&&!r&&this.j(t)}j(t){t===Zt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t!=null?t:"")}}class l0 extends Ts{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===Zt?void 0:t}}const a0=rn?rn.emptyScript:"";class h0 extends Ts{constructor(){super(...arguments),this.type=4}j(t){t&&t!==Zt?this.element.setAttribute(this.name,a0):this.element.removeAttribute(this.name)}}class u0 extends Ts{constructor(t,e,n,r,o){super(t,e,n,r,o),this.type=5}_$AI(t,e=this){var n;if((t=(n=on(this,t,e,0))!==null&&n!==void 0?n:Zt)===Wn)return;const r=this._$AH,o=t===Zt&&r!==Zt||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,s=t!==Zt&&(r===Zt||o);o&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,n;typeof this._$AH=="function"?this._$AH.call((n=(e=this.options)===null||e===void 0?void 0:e.host)!==null&&n!==void 0?n:this.element,t):this._$AH.handleEvent(t)}}class c0{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){on(this,t)}}const Aa=Gr.litHtmlPolyfillSupport;Aa==null||Aa(Zn,or),((co=Gr.litHtmlVersions)!==null&&co!==void 0?co:Gr.litHtmlVersions=[]).push("2.4.0");const f0=(i,t,e)=>{var n,r;const o=(n=e==null?void 0:e.renderBefore)!==null&&n!==void 0?n:t;let s=o._$litPart$;if(s===void 0){const l=(r=e==null?void 0:e.renderBefore)!==null&&r!==void 0?r:null;o._$litPart$=s=new or(t.insertBefore(Rn(),l),l,void 0,e!=null?e:{})}return s._$AI(i),s};class mt{constructor(){}lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,n){let r=[];return this.decompose(0,t,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(e,this.length,r,1),Ze.from(r,this.length-(e-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){let n=[];return this.decompose(t,e,n,0),Ze.from(n,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),r=new Xn(this),o=new Xn(t);for(let s=e,l=e;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(l+=r.value.length,r.done||l>=n)return!0}}iter(t=1){return new Xn(this,t)}iterRange(t,e=this.length){return new Vu(this,t,e)}iterLines(t,e){let n;if(t==null)n=this.iter();else{e==null&&(e=this.lines+1);let r=this.line(t).from;n=this.iterRange(r,Math.max(r,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new Hu(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?mt.empty:t.length<=32?new Et(t):Ze.from(Et.split(t,[]))}}class Et extends mt{constructor(t,e=p0(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,r){for(let o=0;;o++){let s=this.text[o],l=r+s.length;if((e?n:l)>=t)return new d0(r,l,n,s);r=l+1,n++}}decompose(t,e,n,r){let o=t<=0&&e>=this.length?this:new Et(Ea(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(r&1){let s=n.pop(),l=Nr(o.text,s.text.slice(),0,o.length);if(l.length<=32)n.push(new Et(l,s.length+o.length));else{let h=l.length>>1;n.push(new Et(l.slice(0,h)),new Et(l.slice(h)))}}else n.push(o)}replace(t,e,n){if(!(n instanceof Et))return super.replace(t,e,n);let r=Nr(this.text,Nr(n.text,Ea(this.text,0,t)),e),o=this.length+n.length-(e-t);return r.length<=32?new Et(r,o):Ze.from(Et.split(r,[]),o)}sliceString(t,e=this.length,n=`
`){let r="";for(let o=0,s=0;o<=e&&s<this.text.length;s++){let l=this.text[s],h=o+l.length;o>t&&s&&(r+=n),t<h&&e>o&&(r+=l.slice(Math.max(0,t-o),e-o)),o=h+1}return r}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let n=[],r=-1;for(let o of t)n.push(o),r+=o.length+1,n.length==32&&(e.push(new Et(n,r)),n=[],r=-1);return r>-1&&e.push(new Et(n,r)),e}}class Ze extends mt{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let n of t)this.lines+=n.lines}lineInner(t,e,n,r){for(let o=0;;o++){let s=this.children[o],l=r+s.length,h=n+s.lines-1;if((e?h:l)>=t)return s.lineInner(t,e,n,r);r=l+1,n=h+1}}decompose(t,e,n,r){for(let o=0,s=0;s<=e&&o<this.children.length;o++){let l=this.children[o],h=s+l.length;if(t<=h&&e>=s){let c=r&((s<=t?1:0)|(h>=e?2:0));s>=t&&h<=e&&!c?n.push(l):l.decompose(t-s,e-s,n,c)}s=h+1}}replace(t,e,n){if(n.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.length;if(t>=o&&e<=l){let h=s.replace(t-o,e-o,n),c=this.lines-s.lines+h.lines;if(h.lines<c>>5-1&&h.lines>c>>5+1){let p=this.children.slice();return p[r]=h,new Ze(p,this.length-(e-t)+n.length)}return super.replace(o,l,h)}o=l+1}return super.replace(t,e,n)}sliceString(t,e=this.length,n=`
`){let r="";for(let o=0,s=0;o<this.children.length&&s<=e;o++){let l=this.children[o],h=s+l.length;s>t&&o&&(r+=n),t<h&&e>s&&(r+=l.sliceString(t-s,e-s,n)),s=h+1}return r}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof Ze))return 0;let n=0,[r,o,s,l]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;r+=e,o+=e){if(r==s||o==l)return n;let h=this.children[r],c=t.children[o];if(h!=c)return n+h.scanIdentical(c,e);n+=h.length+1}}static from(t,e=t.reduce((n,r)=>n+r.length+1,-1)){let n=0;for(let v of t)n+=v.lines;if(n<32){let v=[];for(let C of t)C.flatten(v);return new Et(v,e)}let r=Math.max(32,n>>5),o=r<<1,s=r>>1,l=[],h=0,c=-1,p=[];function d(v){let C;if(v.lines>o&&v instanceof Ze)for(let O of v.children)d(O);else v.lines>s&&(h>s||!h)?(m(),l.push(v)):v instanceof Et&&h&&(C=p[p.length-1])instanceof Et&&v.lines+C.lines<=32?(h+=v.lines,c+=v.length+1,p[p.length-1]=new Et(C.text.concat(v.text),C.length+1+v.length)):(h+v.lines>r&&m(),h+=v.lines,c+=v.length+1,p.push(v))}function m(){h!=0&&(l.push(p.length==1?p[0]:Ze.from(p,c)),c=-1,h=p.length=0)}for(let v of t)d(v);return m(),l.length==1?l[0]:new Ze(l,e)}}mt.empty=new Et([""],0);function p0(i){let t=-1;for(let e of i)t+=e.length+1;return t}function Nr(i,t,e=0,n=1e9){for(let r=0,o=0,s=!0;o<i.length&&r<=n;o++){let l=i[o],h=r+l.length;h>=e&&(h>n&&(l=l.slice(0,n-r)),r<e&&(l=l.slice(e-r)),s?(t[t.length-1]+=l,s=!1):t.push(l)),r=h+1}return t}function Ea(i,t,e){return Nr(i,[""],t,e)}class Xn{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof Et?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],o=this.offsets[n],s=o>>1,l=r instanceof Et?r.text.length:r.children.length;if(s==(e>0?l:0)){if(n==0)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(e>0?0:1)){if(this.offsets[n]+=e,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(r instanceof Et){let h=r.text[s+(e<0?-1:0)];if(this.offsets[n]+=e,h.length>Math.max(0,t))return this.value=t==0?h:e>0?h.slice(t):h.slice(0,h.length-t),this;t-=h.length}else{let h=r.children[s+(e<0?-1:0)];t>h.length?(t-=h.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(h),this.offsets.push(e>0?1:(h instanceof Et?h.text.length:h.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class Vu{constructor(t,e,n){this.value="",this.done=!1,this.cursor=new Xn(t,e>n?-1:1),this.pos=e>n?t.length:0,this.from=Math.min(e,n),this.to=Math.max(e,n)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:r}=this.cursor.next(t);return this.pos+=(r.length+t)*e,this.value=r.length<=n?r:e<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Hu{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:n,value:r}=this.inner.next(t);return e?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(mt.prototype[Symbol.iterator]=function(){return this.iter()},Xn.prototype[Symbol.iterator]=Vu.prototype[Symbol.iterator]=Hu.prototype[Symbol.iterator]=function(){return this});class d0{constructor(t,e,n,r){this.from=t,this.to=e,this.number=n,this.text=r}get length(){return this.to-this.from}}let Ji="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(i=>i?parseInt(i,36):1);for(let i=1;i<Ji.length;i++)Ji[i]+=Ji[i-1];function m0(i){for(let t=1;t<Ji.length;t+=2)if(Ji[t]>i)return Ji[t-1]<=i;return!1}function ka(i){return i>=127462&&i<=127487}const _a=8205;function se(i,t,e=!0,n=!0){return(e?Ju:O0)(i,t,n)}function Ju(i,t,e){if(t==i.length)return t;t&&Ku(i.charCodeAt(t))&&tc(i.charCodeAt(t-1))&&t--;let n=Ut(i,t);for(t+=ge(n);t<i.length;){let r=Ut(i,t);if(n==_a||r==_a||e&&m0(r))t+=ge(r),n=r;else if(ka(r)){let o=0,s=t-2;for(;s>=0&&ka(Ut(i,s));)o++,s-=2;if(o%2==0)break;t+=2}else break}return t}function O0(i,t,e){for(;t>0;){let n=Ju(i,t-2,e);if(n<t)return n;t--}return 0}function Ku(i){return i>=56320&&i<57344}function tc(i){return i>=55296&&i<56320}function Ut(i,t){let e=i.charCodeAt(t);if(!tc(e)||t+1==i.length)return e;let n=i.charCodeAt(t+1);return Ku(n)?(e-55296<<10)+(n-56320)+65536:e}function Ml(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function ge(i){return i<65536?1:2}const zo=/\r\n?|\n/;var Vt=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(Vt||(Vt={}));class Ue{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,r=0;e<this.sections.length;){let o=this.sections[e++],s=this.sections[e++];s<0?(t(n,r,o),r+=o):r+=s,n+=o}}iterChangedRanges(t,e=!1){Uo(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],r=this.sections[e++];r<0?t.push(n,r):t.push(r,n)}return new Ue(t)}composeDesc(t){return this.empty?t:t.empty?this:ec(this,t)}mapDesc(t,e=!1){return t.empty?this:Go(this,t,e)}mapPos(t,e=-1,n=Vt.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let l=this.sections[s++],h=this.sections[s++],c=r+l;if(h<0){if(c>t)return o+(t-r);o+=l}else{if(n!=Vt.Simple&&c>=t&&(n==Vt.TrackDel&&r<t&&c>t||n==Vt.TrackBefore&&r<t||n==Vt.TrackAfter&&c>t))return null;if(c>t||c==t&&e<0&&!l)return t==r||e<0?o:o+h;o+=h}r=c}if(t>r)throw new RangeError(`Position ${t} is out of range for changeset of length ${r}`);return o}touchesRange(t,e=t){for(let n=0,r=0;n<this.sections.length&&r<=e;){let o=this.sections[n++],s=this.sections[n++],l=r+o;if(s>=0&&r<=e&&l>=t)return r<t&&l>e?"cover":!0;r=l}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],r=this.sections[e++];t+=(t?" ":"")+n+(r>=0?":"+r:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(e=>typeof e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ue(t)}static create(t){return new Ue(t)}}class $t extends Ue{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Uo(this,(e,n,r,o,s)=>t=t.replace(r,r+(n-e),s),!1),t}mapDesc(t,e=!1){return Go(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let r=0,o=0;r<e.length;r+=2){let s=e[r],l=e[r+1];if(l>=0){e[r]=l,e[r+1]=s;let h=r>>1;for(;n.length<h;)n.push(mt.empty);n.push(s?t.slice(o,o+s):mt.empty)}o+=s}return new $t(e,n)}compose(t){return this.empty?t:t.empty?this:ec(this,t,!0)}map(t,e=!1){return t.empty?this:Go(this,t,e,!0)}iterChanges(t,e=!1){Uo(this,t,e)}get desc(){return Ue.create(this.sections)}filter(t){let e=[],n=[],r=[],o=new jn(this);t:for(let s=0,l=0;;){let h=s==t.length?1e9:t[s++];for(;l<h||l==h&&o.len==0;){if(o.done)break t;let p=Math.min(o.len,h-l);Jt(r,p,-1);let d=o.ins==-1?-1:o.off==0?o.ins:0;Jt(e,p,d),d>0&&li(n,e,o.text),o.forward(p),l+=p}let c=t[s++];for(;l<c;){if(o.done)break t;let p=Math.min(o.len,c-l);Jt(e,p,-1),Jt(r,p,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(p),l+=p}}return{changes:new $t(e,n),filtered:Ue.create(r)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e],r=this.sections[e+1];r<0?t.push(n):r==0?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,n){let r=[],o=[],s=0,l=null;function h(p=!1){if(!p&&!r.length)return;s<e&&Jt(r,e-s,-1);let d=new $t(r,o);l=l?l.compose(d.map(l)):d,r=[],o=[],s=0}function c(p){if(Array.isArray(p))for(let d of p)c(d);else if(p instanceof $t){if(p.length!=e)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${e})`);h(),l=l?l.compose(p.map(l)):p}else{let{from:d,to:m=d,insert:v}=p;if(d>m||d<0||m>e)throw new RangeError(`Invalid change range ${d} to ${m} (in doc of length ${e})`);let C=v?typeof v=="string"?mt.of(v.split(n||zo)):v:mt.empty,O=C.length;if(d==m&&O==0)return;d<s&&h(),d>s&&Jt(r,d-s,-1),Jt(r,m-d,O),li(o,r,C),s=m}}return c(t),h(!l),l}static empty(t){return new $t(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],n=[];for(let r=0;r<t.length;r++){let o=t[r];if(typeof o=="number")e.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,l)=>l&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)e.push(o[0],0);else{for(;n.length<r;)n.push(mt.empty);n[r]=mt.of(o.slice(1)),e.push(o[0],n[r].length)}}}return new $t(e,n)}static createSet(t,e){return new $t(t,e)}}function Jt(i,t,e,n=!1){if(t==0&&e<=0)return;let r=i.length-2;r>=0&&e<=0&&e==i[r+1]?i[r]+=t:t==0&&i[r]==0?i[r+1]+=e:n?(i[r]+=t,i[r+1]+=e):i.push(t,e)}function li(i,t,e){if(e.length==0)return;let n=t.length-2>>1;if(n<i.length)i[i.length-1]=i[i.length-1].append(e);else{for(;i.length<n;)i.push(mt.empty);i.push(e)}}function Uo(i,t,e){let n=i.inserted;for(let r=0,o=0,s=0;s<i.sections.length;){let l=i.sections[s++],h=i.sections[s++];if(h<0)r+=l,o+=l;else{let c=r,p=o,d=mt.empty;for(;c+=l,p+=h,h&&n&&(d=d.append(n[s-2>>1])),!(e||s==i.sections.length||i.sections[s+1]<0);)l=i.sections[s++],h=i.sections[s++];t(r,c,o,p,d),r=c,o=p}}}function Go(i,t,e,n=!1){let r=[],o=n?[]:null,s=new jn(i),l=new jn(t);for(let h=-1;;)if(s.ins==-1&&l.ins==-1){let c=Math.min(s.len,l.len);Jt(r,c,-1),s.forward(c),l.forward(c)}else if(l.ins>=0&&(s.ins<0||h==s.i||s.off==0&&(l.len<s.len||l.len==s.len&&!e))){let c=l.len;for(Jt(r,l.ins,-1);c;){let p=Math.min(s.len,c);s.ins>=0&&h<s.i&&s.len<=p&&(Jt(r,0,s.ins),o&&li(o,r,s.text),h=s.i),s.forward(p),c-=p}l.next()}else if(s.ins>=0){let c=0,p=s.len;for(;p;)if(l.ins==-1){let d=Math.min(p,l.len);c+=d,p-=d,l.forward(d)}else if(l.ins==0&&l.len<p)p-=l.len,l.next();else break;Jt(r,c,h<s.i?s.ins:0),o&&h<s.i&&li(o,r,s.text),h=s.i,s.forward(s.len-p)}else{if(s.done&&l.done)return o?$t.createSet(r,o):Ue.create(r);throw new Error("Mismatched change set lengths")}}function ec(i,t,e=!1){let n=[],r=e?[]:null,o=new jn(i),s=new jn(t);for(let l=!1;;){if(o.done&&s.done)return r?$t.createSet(n,r):Ue.create(n);if(o.ins==0)Jt(n,o.len,0,l),o.next();else if(s.len==0&&!s.done)Jt(n,0,s.ins,l),r&&li(r,n,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let h=Math.min(o.len2,s.len),c=n.length;if(o.ins==-1){let p=s.ins==-1?-1:s.off?0:s.ins;Jt(n,h,p,l),r&&p&&li(r,n,s.text)}else s.ins==-1?(Jt(n,o.off?0:o.len,h,l),r&&li(r,n,o.textBit(h))):(Jt(n,o.off?0:o.len,s.off?0:s.ins,l),r&&!s.off&&li(r,n,s.text));l=(o.ins>h||s.ins>=0&&s.len>h)&&(l||n.length>c),o.forward2(h),s.forward(h)}}}}class jn{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?mt.empty:t[e]}textBit(t){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length&&!t?mt.empty:e[n].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class Di{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let t=this.flags&3;return t==3?null:t}get goalColumn(){let t=this.flags>>5;return t==33554431?void 0:t}map(t,e=-1){let n,r;return this.empty?n=r=t.mapPos(this.from,e):(n=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new Di(n,r,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return Y.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return Y.range(this.anchor,n)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Y.range(t.anchor,t.head)}static create(t,e,n){return new Di(t,e,n)}}class Y{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:Y.create(this.ranges.map(n=>n.map(t,e)),this.mainIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let e=0;e<this.ranges.length;e++)if(!this.ranges[e].eq(t.ranges[e]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Y([this.main],0)}addRange(t,e=!0){return Y.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let n=this.ranges.slice();return n[e]=t,Y.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Y(t.ranges.map(e=>Di.fromJSON(e)),t.main)}static single(t,e=t){return new Y([Y.range(t,e)],0)}static create(t,e=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<t.length;r++){let o=t[r];if(o.empty?o.from<=n:o.from<n)return Y.normalized(t.slice(),e);n=o.to}return new Y(t,e)}static cursor(t,e=0,n,r){return Di.create(t,t,(e==0?0:e<0?4:8)|(n==null?3:Math.min(2,n))|(r!=null?r:33554431)<<5)}static range(t,e,n){let r=(n!=null?n:33554431)<<5;return e<t?Di.create(e,t,16|r|8):Di.create(t,e,r|(e>t?4:0))}static normalized(t,e=0){let n=t[e];t.sort((r,o)=>r.from-o.from),e=t.indexOf(n);for(let r=1;r<t.length;r++){let o=t[r],s=t[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let l=s.from,h=Math.max(o.to,s.to);r<=e&&e--,t.splice(--r,2,o.anchor>o.head?Y.range(h,l):Y.range(l,h))}}return new Y(t,e)}}function ic(i,t){for(let e of i.ranges)if(e.to>t)throw new RangeError("Selection points outside of document")}let Rl=0;class K{constructor(t,e,n,r,o){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=r,this.id=Rl++,this.default=t([]),this.extensions=typeof o=="function"?o(this):o}static define(t={}){return new K(t.combine||(e=>e),t.compareInput||((e,n)=>e===n),t.compare||(t.combine?(e,n)=>e===n:Yl),!!t.static,t.enables)}of(t){return new Mr([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Mr(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Mr(t,this,2,e)}from(t,e){return e||(e=n=>n),this.compute([t],n=>e(n.field(t)))}}function Yl(i,t){return i==t||i.length==t.length&&i.every((e,n)=>e===t[n])}class Mr{constructor(t,e,n,r){this.dependencies=t,this.facet=e,this.type=n,this.value=r,this.id=Rl++}dynamicSlot(t){var e;let n=this.value,r=this.facet.compareInput,o=this.id,s=t[o]>>1,l=this.type==2,h=!1,c=!1,p=[];for(let d of this.dependencies)d=="doc"?h=!0:d=="selection"?c=!0:(((e=t[d.id])!==null&&e!==void 0?e:1)&1)==0&&p.push(t[d.id]);return{create(d){return d.values[s]=n(d),1},update(d,m){if(h&&m.docChanged||c&&(m.docChanged||m.selection)||Vo(d,p)){let v=n(d);if(l?!Ia(v,d.values[s],r):!r(v,d.values[s]))return d.values[s]=v,1}return 0},reconfigure:(d,m)=>{let v=n(d),C=m.config.address[o];if(C!=null){let O=Hr(m,C);if(this.dependencies.every(y=>y instanceof K?m.facet(y)===d.facet(y):y instanceof Nt?m.field(y,!1)==d.field(y,!1):!0)||(l?Ia(v,O,r):r(v,O)))return d.values[s]=O,0}return d.values[s]=v,1}}}}function Ia(i,t,e){if(i.length!=t.length)return!1;for(let n=0;n<i.length;n++)if(!e(i[n],t[n]))return!1;return!0}function Vo(i,t){let e=!1;for(let n of t)Fn(i,n)&1&&(e=!0);return e}function g0(i,t,e){let n=e.map(h=>i[h.id]),r=e.map(h=>h.type),o=n.filter(h=>!(h&1)),s=i[t.id]>>1;function l(h){let c=[];for(let p=0;p<n.length;p++){let d=Hr(h,n[p]);if(r[p]==2)for(let m of d)c.push(m);else c.push(d)}return t.combine(c)}return{create(h){for(let c of n)Fn(h,c);return h.values[s]=l(h),1},update(h,c){if(!Vo(h,o))return 0;let p=l(h);return t.compare(p,h.values[s])?0:(h.values[s]=p,1)},reconfigure(h,c){let p=Vo(h,n),d=c.config.facets[t.id],m=c.facet(t);if(d&&!p&&Yl(e,d))return h.values[s]=m,0;let v=l(h);return t.compare(v,m)?(h.values[s]=m,0):(h.values[s]=v,1)}}}const La=K.define({static:!0});class Nt{constructor(t,e,n,r,o){this.id=t,this.createF=e,this.updateF=n,this.compareF=r,this.spec=o,this.provides=void 0}static define(t){let e=new Nt(Rl++,t.create,t.update,t.compare||((n,r)=>n===r),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(La).find(n=>n.field==this);return((e==null?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:n=>(n.values[e]=this.create(n),1),update:(n,r)=>{let o=n.values[e],s=this.updateF(o,r);return this.compareF(o,s)?0:(n.values[e]=s,1)},reconfigure:(n,r)=>r.config.address[this.id]!=null?(n.values[e]=r.field(this),0):(n.values[e]=this.create(n),1)}}init(t){return[this,La.of({field:this,create:t})]}get extension(){return this}}const wi={lowest:4,low:3,default:2,high:1,highest:0};function Sn(i){return t=>new nc(t,i)}const $i={highest:Sn(wi.highest),high:Sn(wi.high),default:Sn(wi.default),low:Sn(wi.low),lowest:Sn(wi.lowest)};class nc{constructor(t,e){this.inner=t,this.prec=e}}class As{of(t){return new Ho(this,t)}reconfigure(t){return As.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class Ho{constructor(t,e){this.compartment=t,this.inner=e}}class Vr{constructor(t,e,n,r,o,s){for(this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]}static resolve(t,e,n){let r=[],o=Object.create(null),s=new Map;for(let m of y0(t,e,s))m instanceof Nt?r.push(m):(o[m.facet.id]||(o[m.facet.id]=[])).push(m);let l=Object.create(null),h=[],c=[];for(let m of r)l[m.id]=c.length<<1,c.push(v=>m.slot(v));let p=n==null?void 0:n.config.facets;for(let m in o){let v=o[m],C=v[0].facet,O=p&&p[m]||[];if(v.every(y=>y.type==0))if(l[C.id]=h.length<<1|1,Yl(O,v))h.push(n.facet(C));else{let y=C.combine(v.map(P=>P.value));h.push(n&&C.compare(y,n.facet(C))?n.facet(C):y)}else{for(let y of v)y.type==0?(l[y.id]=h.length<<1|1,h.push(y.value)):(l[y.id]=c.length<<1,c.push(P=>y.dynamicSlot(P)));l[C.id]=c.length<<1,c.push(y=>g0(y,C,v))}}let d=c.map(m=>m(l));return new Vr(t,s,d,l,h,o)}}function y0(i,t,e){let n=[[],[],[],[],[]],r=new Map;function o(s,l){let h=r.get(s);if(h!=null){if(h<=l)return;let c=n[h].indexOf(s);c>-1&&n[h].splice(c,1),s instanceof Ho&&e.delete(s.compartment)}if(r.set(s,l),Array.isArray(s))for(let c of s)o(c,l);else if(s instanceof Ho){if(e.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=t.get(s.compartment)||s.inner;e.set(s.compartment,c),o(c,l)}else if(s instanceof nc)o(s.inner,s.prec);else if(s instanceof Nt)n[l].push(s),s.provides&&o(s.provides,l);else if(s instanceof Mr)n[l].push(s),s.facet.extensions&&o(s.facet.extensions,wi.default);else{let c=s.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(c,l)}}return o(i,wi.default),n.reduce((s,l)=>s.concat(l))}function Fn(i,t){if(t&1)return 2;let e=t>>1,n=i.status[e];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;i.status[e]=4;let r=i.computeSlot(i,i.config.dynamicSlots[e]);return i.status[e]=2|r}function Hr(i,t){return t&1?i.config.staticValues[t>>1]:i.values[t>>1]}const rc=K.define(),sc=K.define({combine:i=>i.some(t=>t),static:!0}),oc=K.define({combine:i=>i.length?i[0]:void 0,static:!0}),lc=K.define(),ac=K.define(),hc=K.define(),uc=K.define({combine:i=>i.length?i[0]:!1});class Bi{constructor(t,e){this.type=t,this.value=e}static define(){return new x0}}class x0{of(t){return new Bi(this,t)}}class v0{constructor(t){this.map=t}of(t){return new st(this,t)}}class st{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return e===void 0?void 0:e==this.value?this:new st(this.type,e)}is(t){return this.type==t}static define(t={}){return new v0(t.map||(e=>e))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let r of t){let o=r.map(e);o&&n.push(o)}return n}}st.reconfigure=st.define();st.appendConfig=st.define();class Bt{constructor(t,e,n,r,o,s){this.startState=t,this.changes=e,this.selection=n,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,n&&ic(n,e.newLength),o.some(l=>l.type==Bt.time)||(this.annotations=o.concat(Bt.time.of(Date.now())))}static create(t,e,n,r,o,s){return new Bt(t,e,n,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(Bt.userEvent);return!!(e&&(e==t||e.length>t.length&&e.slice(0,t.length)==t&&e[t.length]=="."))}}Bt.time=Bi.define();Bt.userEvent=Bi.define();Bt.addToHistory=Bi.define();Bt.remote=Bi.define();function P0(i,t){let e=[];for(let n=0,r=0;;){let o,s;if(n<i.length&&(r==t.length||t[r]>=i[n]))o=i[n++],s=i[n++];else if(r<t.length)o=t[r++],s=t[r++];else return e;!e.length||e[e.length-1]<o?e.push(o,s):e[e.length-1]<s&&(e[e.length-1]=s)}}function cc(i,t,e){var n;let r,o,s;return e?(r=t.changes,o=$t.empty(t.changes.length),s=i.changes.compose(t.changes)):(r=t.changes.map(i.changes),o=i.changes.mapDesc(t.changes,!0),s=i.changes.compose(r)),{changes:s,selection:t.selection?t.selection.map(o):(n=i.selection)===null||n===void 0?void 0:n.map(r),effects:st.mapEffects(i.effects,r).concat(st.mapEffects(t.effects,o)),annotations:i.annotations.length?i.annotations.concat(t.annotations):t.annotations,scrollIntoView:i.scrollIntoView||t.scrollIntoView}}function Jo(i,t,e){let n=t.selection,r=Ki(t.annotations);return t.userEvent&&(r=r.concat(Bt.userEvent.of(t.userEvent))),{changes:t.changes instanceof $t?t.changes:$t.of(t.changes||[],e,i.facet(oc)),selection:n&&(n instanceof Y?n:Y.single(n.anchor,n.head)),effects:Ki(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function fc(i,t,e){let n=Jo(i,t.length?t[0]:{},i.doc.length);t.length&&t[0].filter===!1&&(e=!1);for(let o=1;o<t.length;o++){t[o].filter===!1&&(e=!1);let s=!!t[o].sequential;n=cc(n,Jo(i,t[o],s?n.changes.newLength:i.doc.length),s)}let r=Bt.create(i,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return S0(e?C0(r):r)}function C0(i){let t=i.startState,e=!0;for(let r of t.facet(lc)){let o=r(i);if(o===!1){e=!1;break}Array.isArray(o)&&(e=e===!0?o:P0(e,o))}if(e!==!0){let r,o;if(e===!1)o=i.changes.invertedDesc,r=$t.empty(t.doc.length);else{let s=i.changes.filter(e);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}i=Bt.create(t,r,i.selection&&i.selection.map(o),st.mapEffects(i.effects,o),i.annotations,i.scrollIntoView)}let n=t.facet(ac);for(let r=n.length-1;r>=0;r--){let o=n[r](i);o instanceof Bt?i=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Bt?i=o[0]:i=fc(t,Ki(o),!1)}return i}function S0(i){let t=i.startState,e=t.facet(hc),n=i;for(let r=e.length-1;r>=0;r--){let o=e[r](i);o&&Object.keys(o).length&&(n=cc(n,Jo(t,o,i.changes.newLength),!0))}return n==i?i:Bt.create(t,i.changes,i.selection,n.effects,n.annotations,n.scrollIntoView)}const w0=[];function Ki(i){return i==null?w0:Array.isArray(i)?i:[i]}var bt=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(bt||(bt={}));const b0=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Ko;try{Ko=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function D0(i){if(Ko)return Ko.test(i);for(let t=0;t<i.length;t++){let e=i[t];if(/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||b0.test(e)))return!0}return!1}function T0(i){return t=>{if(!/\S/.test(t))return bt.Space;if(D0(t))return bt.Word;for(let e=0;e<i.length;e++)if(t.indexOf(i[e])>-1)return bt.Word;return bt.Other}}class dt{constructor(t,e,n,r,o,s){this.config=t,this.doc=e,this.selection=n,this.values=r,this.status=t.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Fn(this,l<<1);this.computeSlot=null}field(t,e=!0){let n=this.config.address[t.id];if(n==null){if(e)throw new RangeError("Field is not present in this state");return}return Fn(this,n),Hr(this,n)}update(...t){return fc(this,t,!0)}applyTransaction(t){let e=this.config,{base:n,compartments:r}=e;for(let s of t.effects)s.is(As.reconfigure)?(e&&(r=new Map,e.compartments.forEach((l,h)=>r.set(h,l)),e=null),r.set(s.value.compartment,s.value.extension)):s.is(st.reconfigure)?(e=null,n=s.value):s.is(st.appendConfig)&&(e=null,n=Ki(n).concat(s.value));let o;e?o=t.startState.values.slice():(e=Vr.resolve(n,r,this),o=new dt(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(l,h)=>h.reconfigure(l,this),null).values),new dt(e,t.newDoc,t.newSelection,o,(s,l)=>l.update(s,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:Y.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),r=this.changes(n.changes),o=[n.range],s=Ki(n.effects);for(let l=1;l<e.ranges.length;l++){let h=t(e.ranges[l]),c=this.changes(h.changes),p=c.map(r);for(let m=0;m<l;m++)o[m]=o[m].map(p);let d=r.mapDesc(c,!0);o.push(h.range.map(d)),r=r.compose(p),s=st.mapEffects(s,p).concat(st.mapEffects(Ki(h.effects),d))}return{changes:r,selection:Y.create(o,e.mainIndex),effects:s}}changes(t=[]){return t instanceof $t?t:$t.of(t,this.doc.length,this.facet(dt.lineSeparator))}toText(t){return mt.of(t.split(this.facet(dt.lineSeparator)||zo))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return e==null?t.default:(Fn(this,e),Hr(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let r=t[n];r instanceof Nt&&this.config.address[r.id]!=null&&(e[n]=r.spec.toJSON(this.field(t[n]),this))}return e}static fromJSON(t,e={},n){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n){for(let o in n)if(Object.prototype.hasOwnProperty.call(t,o)){let s=n[o],l=t[o];r.push(s.init(h=>s.spec.fromJSON(l,h)))}}return dt.create({doc:t.doc,selection:Y.fromJSON(t.selection),extensions:e.extensions?r.concat([e.extensions]):r})}static create(t={}){let e=Vr.resolve(t.extensions||[],new Map),n=t.doc instanceof mt?t.doc:mt.of((t.doc||"").split(e.staticFacet(dt.lineSeparator)||zo)),r=t.selection?t.selection instanceof Y?t.selection:Y.single(t.selection.anchor,t.selection.head):Y.single(0);return ic(r,n.length),e.staticFacet(sc)||(r=r.asSingle()),new dt(e,n,r,e.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(dt.tabSize)}get lineBreak(){return this.facet(dt.lineSeparator)||`
`}get readOnly(){return this.facet(uc)}phrase(t,...e){for(let n of this.facet(dt.phrases))if(Object.prototype.hasOwnProperty.call(n,t)){t=n[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,(n,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>e.length?n:e[o-1]})),t}languageDataAt(t,e,n=-1){let r=[];for(let o of this.facet(rc))for(let s of o(this,e,n))Object.prototype.hasOwnProperty.call(s,t)&&r.push(s[t]);return r}charCategorizer(t){return T0(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:e,from:n,length:r}=this.doc.lineAt(t),o=this.charCategorizer(t),s=t-n,l=t-n;for(;s>0;){let h=se(e,s,!1);if(o(e.slice(h,s))!=bt.Word)break;s=h}for(;l<r;){let h=se(e,l);if(o(e.slice(l,h))!=bt.Word)break;l=h}return s==l?null:Y.range(s+n,l+n)}}dt.allowMultipleSelections=sc;dt.tabSize=K.define({combine:i=>i.length?i[0]:4});dt.lineSeparator=oc;dt.readOnly=uc;dt.phrases=K.define({compare(i,t){let e=Object.keys(i),n=Object.keys(t);return e.length==n.length&&e.every(r=>i[r]==t[r])}});dt.languageData=rc;dt.changeFilter=lc;dt.transactionFilter=ac;dt.transactionExtender=hc;As.reconfigure=st.define();function Ve(i,t,e={}){let n={};for(let r of i)for(let o of Object.keys(r)){let s=r[o],l=n[o];if(l===void 0)n[o]=s;else if(!(l===s||s===void 0))if(Object.hasOwnProperty.call(e,o))n[o]=e[o](l,s);else throw new Error("Config merge conflict for field "+o)}for(let r in t)n[r]===void 0&&(n[r]=t[r]);return n}class Li{eq(t){return this==t}range(t,e=t){return qn.create(t,e,this)}}Li.prototype.startSide=Li.prototype.endSide=0;Li.prototype.point=!1;Li.prototype.mapMode=Vt.TrackDel;class qn{constructor(t,e,n){this.from=t,this.to=e,this.value=n}static create(t,e,n){return new qn(t,e,n)}}function tl(i,t){return i.from-t.from||i.value.startSide-t.value.startSide}class Wl{constructor(t,e,n,r){this.from=t,this.to=e,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(t,e,n,r=0){let o=n?this.to:this.from;for(let s=r,l=o.length;;){if(s==l)return s;let h=s+l>>1,c=o[h]-t||(n?this.value[h].endSide:this.value[h].startSide)-e;if(h==s)return c>=0?s:l;c>=0?l=h:s=h+1}}between(t,e,n,r){for(let o=this.findIndex(e,-1e9,!0),s=this.findIndex(n,1e9,!1,o);o<s;o++)if(r(this.from[o]+t,this.to[o]+t,this.value[o])===!1)return!1}map(t,e){let n=[],r=[],o=[],s=-1,l=-1;for(let h=0;h<this.value.length;h++){let c=this.value[h],p=this.from[h]+t,d=this.to[h]+t,m,v;if(p==d){let C=e.mapPos(p,c.startSide,c.mapMode);if(C==null||(m=v=C,c.startSide!=c.endSide&&(v=e.mapPos(p,c.endSide),v<m)))continue}else if(m=e.mapPos(p,c.startSide),v=e.mapPos(d,c.endSide),m>v||m==v&&c.startSide>0&&c.endSide<=0)continue;(v-m||c.endSide-c.startSide)<0||(s<0&&(s=m),c.point&&(l=Math.max(l,v-m)),n.push(c),r.push(m-s),o.push(v-s))}return{mapped:n.length?new Wl(r,o,n,l):null,pos:s}}}class gt{constructor(t,e,n,r){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=r}static create(t,e,n,r){return new gt(t,e,n,r)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filterFrom:r=0,filterTo:o=this.length}=t,s=t.filter;if(e.length==0&&!s)return this;if(n&&(e=e.slice().sort(tl)),this.isEmpty)return e.length?gt.of(e):this;let l=new pc(this,null,-1).goto(0),h=0,c=[],p=new mi;for(;l.value||h<e.length;)if(h<e.length&&(l.from-e[h].from||l.startSide-e[h].value.startSide)>=0){let d=e[h++];p.addInner(d.from,d.to,d.value)||c.push(d)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(h==e.length||this.chunkEnd(l.chunkIndex)<e[h].from)&&(!s||r>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&p.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!s||r>l.to||o<l.from||s(l.from,l.to,l.value))&&(p.addInner(l.from,l.to,l.value)||c.push(qn.create(l.from,l.to,l.value))),l.next());return p.finishInner(this.nextLayer.isEmpty&&!c.length?gt.empty:this.nextLayer.update({add:c,filter:s,filterFrom:r,filterTo:o}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],n=[],r=-1;for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],h=this.chunk[s],c=t.touchesRange(l,l+h.length);if(c===!1)r=Math.max(r,h.maxPoint),e.push(h),n.push(t.mapPos(l));else if(c===!0){let{mapped:p,pos:d}=h.map(l,t);p&&(r=Math.max(r,p.maxPoint),e.push(p),n.push(d))}}let o=this.nextLayer.map(t);return e.length==0?o:new gt(n,e,o||gt.empty,r)}between(t,e,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(e>=o&&t<=o+s.length&&s.between(o,t-o,e-o,n)===!1)return}this.nextLayer.between(t,e,n)}}iter(t=0){return zn.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return zn.from(t).goto(e)}static compare(t,e,n,r,o=-1){let s=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=o),l=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=o),h=Qa(s,l,n),c=new wn(s,h,o),p=new wn(l,h,o);n.iterGaps((d,m,v)=>Xa(c,d,p,m,v,r)),n.empty&&n.length==0&&Xa(c,0,p,0,0,r)}static eq(t,e,n=0,r){r==null&&(r=1e9);let o=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0),s=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let l=Qa(o,s),h=new wn(o,l,0).goto(n),c=new wn(s,l,0).goto(n);for(;;){if(h.to!=c.to||!el(h.active,c.active)||h.point&&(!c.point||!h.point.eq(c.point)))return!1;if(h.to>r)return!0;h.next(),c.next()}}static spans(t,e,n,r,o=-1){let s=new wn(t,null,o).goto(e),l=e,h=s.openStart;for(;;){let c=Math.min(s.to,n);if(s.point?(r.point(l,c,s.point,s.activeForPoint(s.to),h,s.pointRank),h=s.openEnd(c)+(s.to>c?1:0)):c>l&&(r.span(l,c,s.active,h),h=s.openEnd(c)),s.to>n)break;l=s.to,s.next()}return h}static of(t,e=!1){let n=new mi;for(let r of t instanceof qn?[t]:e?A0(t):t)n.add(r.from,r.to,r.value);return n.finish()}}gt.empty=new gt([],[],null,-1);function A0(i){if(i.length>1)for(let t=i[0],e=1;e<i.length;e++){let n=i[e];if(tl(t,n)>0)return i.slice().sort(tl);t=n}return i}gt.empty.nextLayer=gt.empty;class mi{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(t){this.chunks.push(new Wl(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new mi)).add(t,e,n)}addInner(t,e,n){let r=t-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(gt.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let e=gt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function Qa(i,t,e){let n=new Map;for(let o of i)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&n.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of t)for(let s=0;s<o.chunk.length;s++){let l=n.get(o.chunk[s]);l!=null&&(e?e.mapPos(l):l)==o.chunkPos[s]&&!(e!=null&&e.touchesRange(l,l+o.chunk[s].length))&&r.add(o.chunk[s])}return r}class pc{constructor(t,e,n,r=0){this.layer=t,this.skip=e,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<t||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class zn{constructor(t){this.heap=t}static from(t,e=null,n=-1){let r=[];for(let o=0;o<t.length;o++)for(let s=t[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=n&&r.push(new pc(s,e,n,o));return r.length==1?r[0]:new zn(r)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let n of this.heap)n.goto(t,e);for(let n=this.heap.length>>1;n>=0;n--)fo(this.heap,n);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let n=this.heap.length>>1;n>=0;n--)fo(this.heap,n);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),fo(this.heap,0)}}}function fo(i,t){for(let e=i[t];;){let n=(t<<1)+1;if(n>=i.length)break;let r=i[n];if(n+1<i.length&&r.compare(i[n+1])>=0&&(r=i[n+1],n++),e.compare(r)<0)break;i[n]=e,i[t]=r,t=n}}class wn{constructor(t,e,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=zn.from(t,e,n)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){Or(this.active,t),Or(this.activeTo,t),Or(this.activeRank,t),this.minActive=Fa(this.active,this.activeTo)}addActive(t){let e=0,{value:n,to:r,rank:o}=this.cursor;for(;e<this.activeRank.length&&this.activeRank[e]<=o;)e++;gr(this.active,e,n),gr(this.activeTo,e,r),gr(this.activeRank,e,o),t&&gr(t,e,this.cursor.from),this.minActive=Fa(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let n=this.openStart<0?[]:null,r=0;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>t){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),n&&Or(n,o)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(n),this.cursor.from<t&&this.cursor.to>t&&r++,this.cursor.next();else if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.from<t&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){let o=0;for(;o<n.length&&n[o]<t;)o++;this.openStart=o+r}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n]);return e.reverse()}openEnd(t){let e=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e}}function Xa(i,t,e,n,r,o){i.goto(t),e.goto(n);let s=n+r,l=n,h=n-t;for(;;){let c=i.to+h-e.to||i.endSide-e.endSide,p=c<0?i.to+h:e.to,d=Math.min(p,s);if(i.point||e.point?i.point&&e.point&&(i.point==e.point||i.point.eq(e.point))&&el(i.activeForPoint(i.to+h),e.activeForPoint(e.to))||o.comparePoint(l,d,i.point,e.point):d>l&&!el(i.active,e.active)&&o.compareRange(l,d,i.active,e.active),p>s)break;l=p,c<=0&&i.next(),c>=0&&e.next()}}function el(i,t){if(i.length!=t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!=t[e]&&!i[e].eq(t[e]))return!1;return!0}function Or(i,t){for(let e=t,n=i.length-1;e<n;e++)i[e]=i[e+1];i.pop()}function gr(i,t,e){for(let n=i.length-1;n>=t;n--)i[n+1]=i[n];i[t]=e}function Fa(i,t){let e=-1,n=1e9;for(let r=0;r<t.length;r++)(t[r]-n||i[r].endSide-i[e].endSide)<0&&(e=r,n=t[r]);return e}function lr(i,t,e=i.length){let n=0;for(let r=0;r<e;)i.charCodeAt(r)==9?(n+=t-n%t,r++):(n++,r=se(i,r));return n}function il(i,t,e,n){for(let r=0,o=0;;){if(o>=t)return r;if(r==i.length)break;o+=i.charCodeAt(r)==9?e-o%e:1,r=se(i,r)}return n===!0?-1:i.length}const nl="\u037C",$a=typeof Symbol>"u"?"__"+nl:Symbol.for(nl),rl=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Oi{constructor(t,e){this.rules=[];let{finish:n}=e||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,l,h,c){let p=[],d=/^@(\w+)\b/.exec(s[0]),m=d&&d[1]=="keyframes";if(d&&l==null)return h.push(s[0]+";");for(let v in l){let C=l[v];if(/&/.test(v))o(v.split(/,\s*/).map(O=>s.map(y=>O.replace(/&/,y))).reduce((O,y)=>O.concat(y)),C,h);else if(C&&typeof C=="object"){if(!d)throw new RangeError("The value of a property ("+v+") should be a primitive value.");o(r(v),C,p,m)}else C!=null&&p.push(v.replace(/_.*/,"").replace(/[A-Z]/g,O=>"-"+O.toLowerCase())+": "+C+";")}(p.length||m)&&h.push((n&&!d&&!c?s.map(n):s).join(", ")+" {"+p.join(" ")+"}")}for(let s in t)o(r(s),t[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=Ba[$a]||1;return Ba[$a]=t+1,nl+t.toString(36)}static mount(t,e){(t[rl]||new E0(t)).mount(Array.isArray(e)?e:[e])}}let yr=null;class E0{constructor(t){if(!t.head&&t.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(yr)return t.adoptedStyleSheets=[yr.sheet].concat(t.adoptedStyleSheets),t[rl]=yr;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),yr=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");let e=t.head||t;e.insertBefore(this.styleTag,e.firstChild)}this.modules=[],t[rl]=this}mount(t){let e=this.sheet,n=0,r=0;for(let o=0;o<t.length;o++){let s=t[o],l=this.modules.indexOf(s);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,s),e)for(let h=0;h<s.rules.length;h++)e.insertRule(s.rules[h],n++)}else{for(;r<l;)n+=this.modules[r++].rules.length;n+=s.rules.length,r++}}if(!e){let o="";for(let s=0;s<this.modules.length;s++)o+=this.modules[s].getRules()+`
`;this.styleTag.textContent=o}}}var gi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Un={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Na=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);var k0=typeof navigator<"u"&&/Mac/.test(navigator.platform),_0=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),I0=k0||Na&&+Na[1]<57;for(var Gt=0;Gt<10;Gt++)gi[48+Gt]=gi[96+Gt]=String(Gt);for(var Gt=1;Gt<=24;Gt++)gi[Gt+111]="F"+Gt;for(var Gt=65;Gt<=90;Gt++)gi[Gt]=String.fromCharCode(Gt+32),Un[Gt]=String.fromCharCode(Gt);for(var po in gi)Un.hasOwnProperty(po)||(Un[po]=gi[po]);function L0(i){var t=I0&&(i.ctrlKey||i.altKey||i.metaKey)||_0&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",e=!t&&i.key||(i.shiftKey?Un:gi)[i.keyCode]||i.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}function Jr(i){let t;return i.nodeType==11?t=i.getSelection?i:i.ownerDocument:t=i,t.getSelection()}function ln(i,t){return t?i==t||i.contains(t.nodeType!=1?t.parentNode:t):!1}function Q0(i){let t=i.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Rr(i,t){if(!t.anchorNode)return!1;try{return ln(i,t.anchorNode)}catch{return!1}}function Gn(i){return i.nodeType==3?an(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function Kr(i,t,e,n){return e?Ma(i,t,e,n,-1)||Ma(i,t,e,n,1):!1}function ts(i){for(var t=0;;t++)if(i=i.previousSibling,!i)return t}function Ma(i,t,e,n,r){for(;;){if(i==e&&t==n)return!0;if(t==(r<0?0:Vn(i))){if(i.nodeName=="DIV")return!1;let o=i.parentNode;if(!o||o.nodeType!=1)return!1;t=ts(i)+(r<0?0:1),i=o}else if(i.nodeType==1){if(i=i.childNodes[t+(r<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;t=r<0?Vn(i):0}else return!1}}function Vn(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}const dc={left:0,right:0,top:0,bottom:0};function Es(i,t){let e=t?i.left:i.right;return{left:e,right:e,top:i.top,bottom:i.bottom}}function X0(i){return{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function F0(i,t,e,n,r,o,s,l){let h=i.ownerDocument,c=h.defaultView||window;for(let p=i;p;)if(p.nodeType==1){let d,m=p==h.body;if(m)d=X0(c);else{if(p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let O=p.getBoundingClientRect();d={left:O.left,right:O.left+p.clientWidth,top:O.top,bottom:O.top+p.clientHeight}}let v=0,C=0;if(r=="nearest")t.top<d.top?(C=-(d.top-t.top+s),e>0&&t.bottom>d.bottom+C&&(C=t.bottom-d.bottom+C+s)):t.bottom>d.bottom&&(C=t.bottom-d.bottom+s,e<0&&t.top-C<d.top&&(C=-(d.top+C-t.top+s)));else{let O=t.bottom-t.top,y=d.bottom-d.top;C=(r=="center"&&O<=y?t.top+O/2-y/2:r=="start"||r=="center"&&e<0?t.top-s:t.bottom-y+s)-d.top}if(n=="nearest"?t.left<d.left?(v=-(d.left-t.left+o),e>0&&t.right>d.right+v&&(v=t.right-d.right+v+o)):t.right>d.right&&(v=t.right-d.right+o,e<0&&t.left<d.left+v&&(v=-(d.left+v-t.left+o))):v=(n=="center"?t.left+(t.right-t.left)/2-(d.right-d.left)/2:n=="start"==l?t.left-o:t.right-(d.right-d.left)+o)-d.left,v||C)if(m)c.scrollBy(v,C);else{let O=0,y=0;if(C){let P=p.scrollTop;p.scrollTop+=C,y=p.scrollTop-P}if(v){let P=p.scrollLeft;p.scrollLeft+=v,O=p.scrollLeft-P}t={left:t.left-O,top:t.top-y,right:t.right-O,bottom:t.bottom-y},O&&Math.abs(O-v)<1&&(n="nearest"),y&&Math.abs(y-C)<1&&(r="nearest")}if(m)break;p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}class $0{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)}set(t,e,n,r){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=r}}let Wi=null;function mc(i){if(i.setActive)return i.setActive();if(Wi)return i.focus(Wi);let t=[];for(let e=i;e&&(t.push(e,e.scrollTop,e.scrollLeft),e!=e.ownerDocument);e=e.parentNode);if(i.focus(Wi==null?{get preventScroll(){return Wi={preventScroll:!0},!0}}:void 0),!Wi){Wi=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],o=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=o&&(n.scrollLeft=o)}}}let Ra;function an(i,t,e=t){let n=Ra||(Ra=document.createRange());return n.setEnd(i,e),n.setStart(i,t),n}function $n(i,t,e){let n={key:t,code:t,keyCode:e,which:e,cancelable:!0},r=new KeyboardEvent("keydown",n);r.synthetic=!0,i.dispatchEvent(r);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,i.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function B0(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function Oc(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function N0(i,t){let e=t.focusNode,n=t.focusOffset;if(!e||t.anchorNode!=e||t.anchorOffset!=n)return!1;for(;;)if(n){if(e.nodeType!=1)return!1;let r=e.childNodes[n-1];r.contentEditable=="false"?n--:(e=r,n=Vn(e))}else{if(e==i)return!0;n=ts(e),e=e.parentNode}}class Kt{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new Kt(t.parentNode,ts(t),e)}static after(t,e){return new Kt(t.parentNode,ts(t)+1,e)}}const Zl=[];class wt{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t,e){return null}sync(t){if(this.dirty&2){let e=this.dom,n=null,r;for(let o of this.children){if(o.dirty){if(!o.dom&&(r=n?n.nextSibling:e.firstChild)){let s=wt.get(r);(!s||!s.parent&&s.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(t),o.dirty=0}if(r=n?n.nextSibling:e.firstChild,t&&!t.written&&t.node==e&&r!=o.dom&&(t.written=!0),o.dom.parentNode==e)for(;r&&r!=o.dom;)r=Ya(r);else e.insertBefore(o.dom,r);n=o.dom}for(r=n?n.nextSibling:e.firstChild,r&&t&&t.node==e&&(t.written=!0);r;)r=Ya(r)}else if(this.dirty&1)for(let e of this.children)e.dirty&&(e.sync(t),e.dirty=0)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let r=Vn(t)==0?0:e==0?-1:1;for(;;){let o=t.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(t==o.firstChild?r=-1:r=1),t=o}r<0?n=t:n=t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!wt.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,o=0;;r++){let s=this.children[r];if(s.dom==n)return o;o+=s.length+s.breakAfter}}domBoundsAround(t,e,n=0){let r=-1,o=-1,s=-1,l=-1;for(let h=0,c=n,p=n;h<this.children.length;h++){let d=this.children[h],m=c+d.length;if(c<t&&m>e)return d.domBoundsAround(t,e,c);if(m>=t&&r==-1&&(r=h,o=c),c>e&&d.dom.parentNode==this.dom){s=h,l=p;break}p=m,c=m+d.breakAfter}return{from:o,to:l<0?n+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(t=!1){this.dirty|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.dirty|=2),e.dirty&1)return;e.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=Zl){this.markDirty();for(let r=t;r<e;r++){let o=this.children[r];o.parent==this&&o.destroy()}this.children.splice(t,e-t,...n);for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new gc(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}merge(t,e,n,r,o,s){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}wt.prototype.breakAfter=0;function Ya(i){let t=i.nextSibling;return i.parentNode.removeChild(i),t}class gc{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function yc(i,t,e,n,r,o,s,l,h){let{children:c}=i,p=c.length?c[t]:null,d=o.length?o[o.length-1]:null,m=d?d.breakAfter:s;if(!(t==n&&p&&!s&&!m&&o.length<2&&p.merge(e,r,o.length?d:null,e==0,l,h))){if(n<c.length){let v=c[n];v&&r<v.length?(t==n&&(v=v.split(r),r=0),!m&&d&&v.merge(0,r,d,!0,0,h)?o[o.length-1]=v:(r&&v.merge(0,r,null,!1,0,h),o.push(v))):v!=null&&v.breakAfter&&(d?d.breakAfter=1:s=1),n++}for(p&&(p.breakAfter=s,e>0&&(!s&&o.length&&p.merge(e,p.length,o[0],!1,l,0)?p.breakAfter=o.shift().breakAfter:(e<p.length||p.children.length&&p.children[p.children.length-1].length==0)&&p.merge(e,p.length,null,!1,l,0),t++));t<n&&o.length;)if(c[n-1].become(o[o.length-1]))n--,o.pop(),h=o.length?0:l;else if(c[t].become(o[0]))t++,o.shift(),l=o.length?0:h;else break;!o.length&&t&&n<c.length&&!c[t-1].breakAfter&&c[n].merge(0,0,c[t-1],!1,l,h)&&t--,(t<n||o.length)&&i.replaceChildren(t,n,o)}}function xc(i,t,e,n,r,o){let s=i.childCursor(),{i:l,off:h}=s.findPos(e,1),{i:c,off:p}=s.findPos(t,-1),d=t-e;for(let m of n)d+=m.length;i.length+=d,yc(i,c,p,l,h,n,0,r,o)}let ye=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},sl=typeof document<"u"?document:{documentElement:{style:{}}};const ol=/Edge\/(\d+)/.exec(ye.userAgent),vc=/MSIE \d/.test(ye.userAgent),ll=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ye.userAgent),ks=!!(vc||ll||ol),Wa=!ks&&/gecko\/(\d+)/i.test(ye.userAgent),mo=!ks&&/Chrome\/(\d+)/.exec(ye.userAgent),Za="webkitFontSmoothing"in sl.documentElement.style,Pc=!ks&&/Apple Computer/.test(ye.vendor),ja=Pc&&(/Mobile\/\w+/.test(ye.userAgent)||ye.maxTouchPoints>2);var J={mac:ja||/Mac/.test(ye.platform),windows:/Win/.test(ye.platform),linux:/Linux|X11/.test(ye.platform),ie:ks,ie_version:vc?sl.documentMode||6:ll?+ll[1]:ol?+ol[1]:0,gecko:Wa,gecko_version:Wa?+(/Firefox\/(\d+)/.exec(ye.userAgent)||[0,0])[1]:0,chrome:!!mo,chrome_version:mo?+mo[1]:0,ios:ja,android:/Android\b/.test(ye.userAgent),webkit:Za,safari:Pc,webkit_version:Za?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:sl.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const M0=256;class yi extends wt{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,e,n){return n&&(!(n instanceof yi)||this.length-(e-t)+n.length>M0)?!1:(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new yi(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new Kt(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return al(this.dom,t,e)}}class Ge extends wt{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let r of e)r.setParent(this)}setAttrs(t){if(Oc(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}sync(t){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t)}merge(t,e,n,r,o,s){return n&&(!(n instanceof Ge&&n.mark.eq(this.mark))||t&&o<=0||e<this.length&&s<=0)?!1:(xc(this,t,e,n?n.children:[],o-1,s-1),this.markDirty(),!0)}split(t){let e=[],n=0,r=-1,o=0;for(let l of this.children){let h=n+l.length;h>t&&e.push(n<t?l.split(t-n):l),r<0&&n>=t&&(r=o),n=h,o++}let s=this.length-t;return this.length=t,r>-1&&(this.children.length=r,this.markDirty()),new Ge(this.mark,e,s)}domAtPos(t){return wc(this,t)}coordsAt(t,e){return Dc(this,t,e)}}function al(i,t,e){let n=i.nodeValue.length;t>n&&(t=n);let r=t,o=t,s=0;t==0&&e<0||t==n&&e>=0?J.chrome||J.gecko||(t?(r--,s=1):o<n&&(o++,s=-1)):e<0?r--:o<n&&o++;let l=an(i,r,o).getClientRects();if(!l.length)return dc;let h=l[(s?s<0:e>=0)?0:l.length-1];return J.safari&&!s&&h.width==0&&(h=Array.prototype.find.call(l,c=>c.width)||h),s?Es(h,s<0):h||null}class ai extends wt{constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}static create(t,e,n){return new(t.customView||ai)(t,e,n)}split(t){let e=ai.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,e,n,r,o,s){return n&&(!(n instanceof ai)||!this.widget.compare(n.widget)||t>0&&o<=0||e<this.length&&s<=0)?!1:(this.length=t+(n?n.length:0)+(this.length-e),!0)}become(t){return t.length==this.length&&t instanceof ai&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.eq(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return mt.empty;let t=this;for(;t.parent;)t=t.parent;let e=t.editorView,n=e&&e.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):mt.empty}domAtPos(t){return t==0?Kt.before(this.dom):Kt.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.dom.getClientRects(),r=null;if(!n.length)return dc;for(let o=t>0?n.length-1:0;r=n[o],!(t>0?o==0:o==n.length-1||r.top<r.bottom);o+=t>0?-1:1);return t==0&&e>0||t==this.length&&e<=0?r:Es(r,t==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Cc extends ai{domAtPos(t){let{topView:e,text:n}=this.widget;return e?hl(t,0,e,n,(r,o)=>r.domAtPos(o),r=>new Kt(n,Math.min(r,n.nodeValue.length))):new Kt(n,Math.min(t,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(t,e){let{topView:n,text:r}=this.widget;return n?Sc(t,e,n,r):Math.min(e,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,e){let{topView:n,text:r}=this.widget;return n?hl(t,e,n,r,(o,s,l)=>o.coordsAt(s,l),(o,s)=>al(r,o,s)):al(r,t,e)}destroy(){var t;super.destroy(),(t=this.widget.topView)===null||t===void 0||t.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function hl(i,t,e,n,r,o){if(e instanceof Ge){for(let s=e.dom.firstChild;s;s=s.nextSibling){let l=wt.get(s);if(!l)return o(i,t);let h=ln(s,n),c=l.length+(h?n.nodeValue.length:0);if(i<c||i==c&&l.getSide()<=0)return h?hl(i,t,l,n,r,o):r(l,i,t);i-=c}return r(e,e.length,-1)}else return e.dom==n?o(i,t):r(e,i,t)}function Sc(i,t,e,n){if(e instanceof Ge)for(let r of e.children){let o=0,s=ln(r.dom,n);if(ln(r.dom,i))return o+(s?Sc(i,t,r,n):r.localPosFromDOM(i,t));o+=s?n.nodeValue.length:r.length}else if(e.dom==n)return Math.min(t,n.nodeValue.length);return e.localPosFromDOM(i,t)}class hn extends wt{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof hn&&t.side==this.side}split(){return new hn(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return Kt.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){let e=this.dom.getBoundingClientRect(),n=R0(this,this.side>0?-1:1);return n&&n.top<e.bottom&&n.bottom>e.top?{left:e.left,right:e.right,top:n.top,bottom:n.bottom}:e}get overrideDOMText(){return mt.empty}}yi.prototype.children=ai.prototype.children=hn.prototype.children=Zl;function R0(i,t){let e=i.parent,n=e?e.children.indexOf(i):-1;for(;e&&n>=0;)if(t<0?n>0:n<e.children.length){let r=e.children[n+t];if(r instanceof yi){let o=r.coordsAt(t<0?r.length:0,t);if(o)return o}n+=t}else if(e instanceof Ge&&e.parent)n=e.parent.children.indexOf(e)+(t<0?0:1),e=e.parent;else{let r=e.dom.lastChild;if(r&&r.nodeName=="BR")return r.getClientRects()[0];break}}function wc(i,t){let e=i.dom,{children:n}=i,r=0;for(let o=0;r<n.length;r++){let s=n[r],l=o+s.length;if(!(l==o&&s.getSide()<=0)){if(t>o&&t<l&&s.dom.parentNode==e)return s.domAtPos(t-o);if(t<=o)break;o=l}}for(let o=r;o>0;o--){let s=n[o-1];if(s.dom.parentNode==e)return s.domAtPos(s.length)}for(let o=r;o<n.length;o++){let s=n[o];if(s.dom.parentNode==e)return s.domAtPos(0)}return new Kt(e,0)}function bc(i,t,e){let n,{children:r}=i;e>0&&t instanceof Ge&&r.length&&(n=r[r.length-1])instanceof Ge&&n.mark.eq(t.mark)?bc(n,t.children[0],e-1):(r.push(t),t.setParent(i)),i.length+=t.length}function Dc(i,t,e){for(let o=0,s=0;s<i.children.length;s++){let l=i.children[s],h=o+l.length,c;if((e<=0||h==i.length||l.getSide()>0?h>=t:h>t)&&(t<h||s+1==i.children.length||(c=i.children[s+1]).length||c.getSide()>0)){let p=0;if(h==o){if(l.getSide()<=0)continue;p=e=-l.getSide()}let d=l.coordsAt(Math.max(0,t-o),e);return p&&d?Es(d,e<0):d}o=h}let n=i.dom.lastChild;if(!n)return i.dom.getBoundingClientRect();let r=Gn(n);return r[r.length-1]||null}function ul(i,t){for(let e in i)e=="class"&&t.class?t.class+=" "+i.class:e=="style"&&t.style?t.style+=";"+i.style:t[e]=i[e];return t}function jl(i,t){if(i==t)return!0;if(!i||!t)return!1;let e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r of e)if(n.indexOf(r)==-1||i[r]!==t[r])return!1;return!0}function cl(i,t,e){let n=null;if(t)for(let r in t)e&&r in e||i.removeAttribute(n=r);if(e)for(let r in e)t&&t[r]==e[r]||i.setAttribute(n=r,e[r]);return!!n}class ii{eq(t){return!1}updateDOM(t){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}destroy(t){}}var Pt=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(Pt||(Pt={}));class et extends Li{constructor(t,e,n,r){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(t){return new _s(t)}static widget(t){let e=t.side||0,n=!!t.block;return e+=n?e>0?3e8:-4e8:e>0?1e8:-1e8,new Qi(t,e,e,n,t.widget||null,!1)}static replace(t){let e=!!t.block,n,r;if(t.isBlockGap)n=-5e8,r=4e8;else{let{start:o,end:s}=Tc(t,e);n=(o?e?-3e8:-1:5e8)-1,r=(s?e?2e8:1:-6e8)+1}return new Qi(t,n,r,e,t.widget||null,!0)}static line(t){return new ar(t)}static set(t,e=!1){return gt.of(t,e)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}et.none=gt.empty;class _s extends et{constructor(t){let{start:e,end:n}=Tc(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){return this==t||t instanceof _s&&this.tagName==t.tagName&&this.class==t.class&&jl(this.attrs,t.attrs)}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}_s.prototype.point=!1;class ar extends et{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof ar&&jl(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}ar.prototype.mapMode=Vt.TrackBefore;ar.prototype.point=!0;class Qi extends et{constructor(t,e,n,r,o,s){super(e,n,o,t),this.block=r,this.isReplace=s,this.mapMode=r?e<=0?Vt.TrackBefore:Vt.TrackAfter:Vt.TrackDel}get type(){return this.startSide<this.endSide?Pt.WidgetRange:this.startSide<=0?Pt.WidgetBefore:Pt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof Qi&&Y0(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}Qi.prototype.point=!0;function Tc(i,t=!1){let{inclusiveStart:e,inclusiveEnd:n}=i;return e==null&&(e=i.inclusive),n==null&&(n=i.inclusive),{start:e!=null?e:t,end:n!=null?n:t}}function Y0(i,t){return i==t||!!(i&&t&&i.compare(t))}function fl(i,t,e,n=0){let r=e.length-1;r>=0&&e[r]+n>=i?e[r]=Math.max(e[r],t):e.push(i,t)}class oe extends wt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,r,o,s){if(n){if(!(n instanceof oe))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),xc(this,t,e,n?n.children:[],o,s),!0}split(t){let e=new oe;if(e.breakAfter=this.breakAfter,this.length==0)return e;let{i:n,off:r}=this.childPos(t);r&&(e.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let o=n;o<this.children.length;o++)e.append(this.children[o],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){!this.dom||(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){jl(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){bc(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=ul(e,this.attrs||{})),n&&(this.attrs=ul({class:n},this.attrs||{}))}domAtPos(t){return wc(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.dirty|=6)}sync(t){var e;this.dom?this.dirty&4&&(Oc(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(cl(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t);let n=this.dom.lastChild;for(;n&&wt.get(n)instanceof Ge;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((e=wt.get(n))===null||e===void 0?void 0:e.isEditable)==!1&&(!J.ios||!this.children.some(r=>r instanceof yi))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0;for(let e of this.children){if(!(e instanceof yi)||/[^ -~]/.test(e.text))return null;let n=Gn(e.dom);if(n.length!=1)return null;t+=n[0].width}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}:null}coordsAt(t,e){return Dc(this,t,e)}become(t){return!1}get type(){return Pt.Text}static find(t,e){for(let n=0,r=0;n<t.children.length;n++){let o=t.children[n],s=r+o.length;if(s>=e){if(o instanceof oe)return o;if(s>e)break}r=s+o.breakAfter}return null}}class Ei extends wt{constructor(t,e,n){super(),this.widget=t,this.length=e,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,r,o,s){return n&&(!(n instanceof Ei)||!this.widget.compare(n.widget)||t>0&&o<=0||e<this.length&&s<=0)?!1:(this.length=t+(n?n.length:0)+(this.length-e),!0)}domAtPos(t){return t==0?Kt.before(this.dom):Kt.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new Ei(this.widget,e,this.type);return n.breakAfter=this.breakAfter,n}get children(){return Zl}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):mt.empty}domBoundsAround(){return null}become(t){return t instanceof Ei&&t.type==this.type&&t.widget.constructor==this.widget.constructor?(t.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ql{constructor(t,e,n,r){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!t.breakAfter&&!(t instanceof Ei&&t.type==Pt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new oe),this.atCursorPos=!0),this.curLine}flushBuffer(t){this.pendingBuffer&&(this.curLine.append(xr(new hn(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer([]),this.curLine=null,this.content.push(t)}finish(t){t?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,t--;continue}else this.text=o,this.textOff=0}let r=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(0,n)),this.getLine().append(xr(new yi(this.text.slice(this.textOff,this.textOff+r)),e),n),this.atCursorPos=!0,this.textOff+=r,t-=r,n=0}}span(t,e,n,r){this.buildText(e-t,n,r),this.pos=e,this.openStart<0&&(this.openStart=r)}point(t,e,n,r,o,s){if(this.disallowBlockEffectsFor[s]&&n instanceof Qi){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=e-t;if(n instanceof Qi)if(n.block){let{type:h}=n;h==Pt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ei(n.widget||new qa("div"),l,h))}else{let h=ai.create(n.widget||new qa("span"),l,n.startSide),c=this.atCursorPos&&!h.isEditable&&o<=r.length&&(t<e||n.startSide>0),p=!h.isEditable&&(t<e||n.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(xr(new hn(1),r),o),o=r.length+Math.max(0,o-r.length)),d.append(xr(h,r),o),this.atCursorPos=p,this.pendingBuffer=p?t<e?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=o)}static build(t,e,n,r,o){let s=new ql(t,e,n,o);return s.openEnd=gt.spans(r,e,n,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function xr(i,t){for(let e of t)i=new Ge(e,[i],i.length);return i}class qa extends ii{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}}const Ac=K.define(),Ec=K.define(),kc=K.define(),_c=K.define(),pl=K.define(),Ic=K.define(),Lc=K.define({combine:i=>i.some(t=>t)});class es{constructor(t,e="nearest",n="nearest",r=5,o=5){this.range=t,this.y=e,this.x=n,this.yMargin=r,this.xMargin=o}map(t){return t.empty?this:new es(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}const za=st.define({map:(i,t)=>i.map(t)});function ve(i,t,e){let n=i.facet(_c);n.length?n[0](t):window.onerror?window.onerror(String(t),e,void 0,void 0,t):e?console.error(e+":",t):console.error(t)}const Is=K.define({combine:i=>i.length?i[0]:!0});let W0=0;const kn=K.define();class Xt{constructor(t,e,n,r){this.id=t,this.create=e,this.domEventHandlers=n,this.extension=r(this)}static define(t,e){const{eventHandlers:n,provide:r,decorations:o}=e||{};return new Xt(W0++,t,n,s=>{let l=[kn.of(s)];return o&&l.push(Hn.of(h=>{let c=h.plugin(s);return c?o(c):et.none})),r&&l.push(r(s)),l})}static fromClass(t,e){return Xt.define(n=>new t(n),e)}}class Oo{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(n){if(ve(e.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){ve(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(!((e=this.value)===null||e===void 0)&&e.destroy)try{this.value.destroy()}catch(n){ve(t.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Qc=K.define(),Xc=K.define(),Hn=K.define(),Fc=K.define(),$c=K.define(),_n=K.define();class Ke{constructor(t,e,n,r){this.fromA=t,this.toA=e,this.fromB=n,this.toB=r}join(t){return new Ke(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let r=t[e-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(e.length==0)return t;let n=[];for(let r=0,o=0,s=0,l=0;;r++){let h=r==t.length?null:t[r],c=s-l,p=h?h.fromB:1e9;for(;o<e.length&&e[o]<p;){let d=e[o],m=e[o+1],v=Math.max(l,d),C=Math.min(p,m);if(v<=C&&new Ke(v+c,C+c,v,C).addToSet(n),m>p)break;o+=2}if(!h)return n;new Ke(h.fromA,h.toA,h.fromB,h.toB).addToSet(n),s=h.toA,l=h.toB}}}class is{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=$t.empty(this.startState.doc.length);for(let s of n)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,l,h,c)=>r.push(new Ke(s,l,h,c))),this.changedRanges=r;let o=t.hasFocus;o!=t.inputState.notifiedFocused&&(t.inputState.notifiedFocused=o,this.flags|=1)}static create(t,e,n){return new is(t,e,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var At=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(At||(At={}));const dl=At.LTR,Z0=At.RTL;function Bc(i){let t=[];for(let e=0;e<i.length;e++)t.push(1<<+i[e]);return t}const j0=Bc("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),q0=Bc("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ml=Object.create(null),Ne=[];for(let i of["()","[]","{}"]){let t=i.charCodeAt(0),e=i.charCodeAt(1);ml[t]=e,ml[e]=-t}function z0(i){return i<=247?j0[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?q0[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8203?256:64336<=i&&i<=65023?4:i==8204?256:1}const U0=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class tn{constructor(t,e,n){this.from=t,this.to=e,this.level=n}get dir(){return this.level%2?Z0:dl}side(t,e){return this.dir==e==t?this.to:this.from}static find(t,e,n,r){let o=-1;for(let s=0;s<t.length;s++){let l=t[s];if(l.from<=e&&l.to>=e){if(l.level==n)return s;(o<0||(r!=0?r<0?l.from<e:l.to>e:t[o].level>l.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}const Tt=[];function G0(i,t){let e=i.length,n=t==dl?1:2,r=t==dl?2:1;if(!i||n==1&&!U0.test(i))return Nc(e);for(let s=0,l=n,h=n;s<e;s++){let c=z0(i.charCodeAt(s));c==512?c=l:c==8&&h==4&&(c=16),Tt[s]=c==4?2:c,c&7&&(h=c),l=c}for(let s=0,l=n,h=n;s<e;s++){let c=Tt[s];if(c==128)s<e-1&&l==Tt[s+1]&&l&24?c=Tt[s]=l:Tt[s]=256;else if(c==64){let p=s+1;for(;p<e&&Tt[p]==64;)p++;let d=s&&l==8||p<e&&Tt[p]==8?h==1?1:8:256;for(let m=s;m<p;m++)Tt[m]=d;s=p-1}else c==8&&h==1&&(Tt[s]=1);l=c,c&7&&(h=c)}for(let s=0,l=0,h=0,c,p,d;s<e;s++)if(p=ml[c=i.charCodeAt(s)])if(p<0){for(let m=l-3;m>=0;m-=3)if(Ne[m+1]==-p){let v=Ne[m+2],C=v&2?n:v&4?v&1?r:n:0;C&&(Tt[s]=Tt[Ne[m]]=C),l=m;break}}else{if(Ne.length==189)break;Ne[l++]=s,Ne[l++]=c,Ne[l++]=h}else if((d=Tt[s])==2||d==1){let m=d==n;h=m?0:1;for(let v=l-3;v>=0;v-=3){let C=Ne[v+2];if(C&2)break;if(m)Ne[v+2]|=2;else{if(C&4)break;Ne[v+2]|=4}}}for(let s=0;s<e;s++)if(Tt[s]==256){let l=s+1;for(;l<e&&Tt[l]==256;)l++;let h=(s?Tt[s-1]:n)==1,c=(l<e?Tt[l]:n)==1,p=h==c?h?1:2:n;for(let d=s;d<l;d++)Tt[d]=p;s=l-1}let o=[];if(n==1)for(let s=0;s<e;){let l=s,h=Tt[s++]!=1;for(;s<e&&h==(Tt[s]!=1);)s++;if(h)for(let c=s;c>l;){let p=c,d=Tt[--c]!=2;for(;c>l&&d==(Tt[c-1]!=2);)c--;o.push(new tn(c,p,d?2:1))}else o.push(new tn(l,s,0))}else for(let s=0;s<e;){let l=s,h=Tt[s++]==2;for(;s<e&&h==(Tt[s]==2);)s++;o.push(new tn(l,s,h?1:2))}return o}function Nc(i){return[new tn(0,i,0)]}let Mc="";function V0(i,t,e,n,r){var o;let s=n.head-i.from,l=-1;if(s==0){if(!r||!i.length)return null;t[0].level!=e&&(s=t[0].side(!1,e),l=0)}else if(s==i.length){if(r)return null;let m=t[t.length-1];m.level!=e&&(s=m.side(!0,e),l=t.length-1)}l<0&&(l=tn.find(t,s,(o=n.bidiLevel)!==null&&o!==void 0?o:-1,n.assoc));let h=t[l];s==h.side(r,e)&&(h=t[l+=r?1:-1],s=h.side(!r,e));let c=r==(h.dir==e),p=se(i.text,s,c);if(Mc=i.text.slice(Math.min(s,p),Math.max(s,p)),p!=h.side(r,e))return Y.cursor(p+i.from,c?-1:1,h.level);let d=l==(r?t.length-1:0)?null:t[l+(r?1:-1)];return!d&&h.level!=e?Y.cursor(r?i.to:i.from,r?-1:1,e):d&&d.level<h.level?Y.cursor(d.side(!r,e)+i.from,r?1:-1,d.level):Y.cursor(p+i.from,r?-1:1,h.level)}const hi="\uFFFF";class Rc{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(dt.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=hi}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let r=t;;){this.findPointBefore(n,r),this.readNode(r);let o=r.nextSibling;if(o==e)break;let s=wt.get(r),l=wt.get(o);(s&&l?s.breakAfter:(s?s.breakAfter:Ua(r))||Ua(o)&&(r.nodeName!="BR"||r.cmIgnore))&&this.lineBreak(),r=o}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,l;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(l=r.exec(e))&&(o=l.index,s=l[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let h of this.points)h.node==t&&h.pos>this.text.length&&(h.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let e=wt.get(t),n=e&&e.overrideDOMText;if(n!=null){this.findPointInside(t,n.length);for(let r=n.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(t.nodeType==3?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+Math.min(e,n.offset))}}function Ua(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}class Ga{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class Va extends wt{constructor(t){super(),this.view=t,this.compositionDeco=et.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new oe],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ke(0,0,0,t.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(t){let e=t.changedRanges;this.minWidth>0&&e.length&&(e.every(({fromA:s,toA:l})=>l<this.minWidthFrom||s>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=et.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=J0(this.view,t.changes)),(J.ie||J.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let n=this.decorations,r=this.updateDeco(),o=im(n,r,t.changes);return e=Ke.extendWithRanges(e,o),this.dirty==0&&e.length==0?!1:(this.updateInner(e,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=J.chrome||J.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(o),this.dirty=0,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ei&&o.widget instanceof Ha&&r.push(o.dom);n.updateGaps(r)}updateChildren(t,e){let n=this.childCursor(e);for(let r=t.length-1;;r--){let o=r>=0?t[r]:null;if(!o)break;let{fromA:s,toA:l,fromB:h,toB:c}=o,{content:p,breakAtStart:d,openStart:m,openEnd:v}=ql.build(this.view.state.doc,h,c,this.decorations,this.dynamicDecorationMap),{i:C,off:O}=n.findPos(l,1),{i:y,off:P}=n.findPos(s,-1);yc(this,y,P,C,O,p,d,m,v)}}updateSelection(t=!1,e=!1){if((t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(e||this.mayControlSelection()))return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,o=this.domAtPos(r.anchor),s=r.empty?o:this.domAtPos(r.head);if(J.gecko&&r.empty&&H0(o)){let h=document.createTextNode("");this.view.observer.ignore(()=>o.node.insertBefore(h,o.node.childNodes[o.offset]||null)),o=s=new Kt(h,0),n=!0}let l=this.view.observer.selectionRange;(n||!l.focusNode||!Kr(o.node,o.offset,l.anchorNode,l.anchorOffset)||!Kr(s.node,s.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{J.android&&J.chrome&&this.dom.contains(l.focusNode)&&nm(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Jr(this.view.root);if(h)if(r.empty){if(J.gecko){let c=tm(o.node,o.offset);if(c&&c!=3){let p=Wc(o.node,o.offset,c==1?1:-1);p&&(o=new Kt(p,c==1?0:p.nodeValue.length))}}h.collapse(o.node,o.offset),r.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=r.bidiLevel)}else if(h.extend){h.collapse(o.node,o.offset);try{h.extend(s.node,s.offset)}catch{}}else{let c=document.createRange();r.anchor>r.head&&([o,s]=[s,o]),c.setEnd(s.node,s.offset),c.setStart(o.node,o.offset),h.removeAllRanges(),h.addRange(c)}}),this.view.observer.setSelectionRange(o,s)),this.impreciseAnchor=o.precise?null:new Kt(l.anchorNode,l.anchorOffset),this.impreciseHead=s.precise?null:new Kt(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let t=this.view.state.selection.main,e=Jr(this.view.root);if(!e||!t.empty||!t.assoc||!e.modify)return;let n=oe.find(this,t.head);if(!n)return;let r=n.posAtStart;if(t.head==r||t.head==r+n.length)return;let o=this.coordsAt(t.head,-1),s=this.coordsAt(t.head,1);if(!o||!s||o.bottom>s.top)return;let l=this.domAtPos(t.head+t.assoc);e.collapse(l.node,l.offset),e.modify("move",t.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let t=this.view.root.activeElement;return t==this.dom||Rr(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t))}nearest(t){for(let e=t;e;){let n=wt.get(e);if(n&&n.rootView==this)return n;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let r=this.children[e];if(n<r.length||r instanceof oe)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){for(let n=this.length,r=this.children.length-1;;r--){let o=this.children[r],s=n-o.breakAfter-o.length;if(t>s||t==s&&o.type!=Pt.WidgetBefore&&o.type!=Pt.WidgetAfter&&(!r||e==2||this.children[r-1].breakAfter||this.children[r-1].type==Pt.WidgetBefore&&e>-2))return o.coordsAt(t-s,e);n=s}}measureVisibleLineHeights(t){let e=[],{from:n,to:r}=t,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,h=this.view.textDirection==At.LTR;for(let c=0,p=0;p<this.children.length;p++){let d=this.children[p],m=c+d.length;if(m>r)break;if(c>=n){let v=d.dom.getBoundingClientRect();if(e.push(v.height),s){let C=d.dom.lastChild,O=C?Gn(C):[];if(O.length){let y=O[O.length-1],P=h?y.right-v.left:v.right-y.left;P>l&&(l=P,this.minWidth=o,this.minWidthFrom=c,this.minWidthTo=m)}}}c=m+d.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return getComputedStyle(this.children[e].dom).direction=="rtl"?At.RTL:At.LTR}measureTextSize(){for(let r of this.children)if(r instanceof oe){let o=r.measureTextSize();if(o)return o}let t=document.createElement("div"),e,n;return t.className="cm-line",t.style.width="99999px",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let r=Gn(t.firstChild)[0];e=t.getBoundingClientRect().height,n=r?r.width/27:7,t.remove()}),{lineHeight:e,charWidth:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new gc(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,r=0;;r++){let o=r==e.viewports.length?null:e.viewports[r],s=o?o.from-1:this.length;if(s>n){let l=e.lineBlockAt(s).bottom-e.lineBlockAt(n).top;t.push(et.replace({widget:new Ha(l),block:!0,inclusive:!0,isBlockGap:!0}).range(n,s))}if(!o)break;n=o.to+1}return et.set(t)}updateDeco(){let t=this.view.state.facet(Hn).map((e,n)=>(this.dynamicDecorationMap[n]=typeof e=="function")?e(this.view):e);for(let e=t.length;e<t.length+3;e++)this.dynamicDecorationMap[e]=!1;return this.decorations=[...t,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){let{range:e}=t,n=this.coordsAt(e.head,e.empty?e.assoc:e.head>e.anchor?-1:1),r;if(!n)return;!e.empty&&(r=this.coordsAt(e.anchor,e.anchor>e.head?-1:1))&&(n={left:Math.min(n.left,r.left),top:Math.min(n.top,r.top),right:Math.max(n.right,r.right),bottom:Math.max(n.bottom,r.bottom)});let o=0,s=0,l=0,h=0;for(let p of this.view.state.facet($c).map(d=>d(this.view)))if(p){let{left:d,right:m,top:v,bottom:C}=p;d!=null&&(o=Math.max(o,d)),m!=null&&(s=Math.max(s,m)),v!=null&&(l=Math.max(l,v)),C!=null&&(h=Math.max(h,C))}let c={left:n.left-o,top:n.top-l,right:n.right+s,bottom:n.bottom+h};F0(this.view.scrollDOM,c,e.head<e.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==At.LTR)}}function H0(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}class Ha extends ii{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Yc(i){let t=i.observer.selectionRange,e=t.focusNode&&Wc(t.focusNode,t.focusOffset,0);if(!e)return null;let n=i.docView.nearest(e);if(!n)return null;if(n instanceof oe){let r=e;for(;r.parentNode!=n.dom;)r=r.parentNode;let o=r.previousSibling;for(;o&&!wt.get(o);)o=o.previousSibling;let s=o?wt.get(o).posAtEnd:n.posAtStart;return{from:s,to:s,node:r,text:e}}else{for(;;){let{parent:o}=n;if(!o)return null;if(o instanceof oe)break;n=o}let r=n.posAtStart;return{from:r,to:r+n.length,node:n.dom,text:e}}}function J0(i,t){let e=Yc(i);if(!e)return et.none;let{from:n,to:r,node:o,text:s}=e,l=t.mapPos(n,1),h=Math.max(l,t.mapPos(r,-1)),{state:c}=i,p=o.nodeType==3?o.nodeValue:new Rc([],c).readRange(o.firstChild,null).text;if(h-l<p.length)if(c.doc.sliceString(l,Math.min(c.doc.length,l+p.length),hi)==p)h=l+p.length;else if(c.doc.sliceString(Math.max(0,h-p.length),h,hi)==p)l=h-p.length;else return et.none;else if(c.doc.sliceString(l,h,hi)!=p)return et.none;let d=wt.get(o);return d instanceof Cc?d=d.widget.topView:d&&(d.parent=null),et.set(et.replace({widget:new K0(o,s,d),inclusive:!0}).range(l,h))}class K0 extends ii{constructor(t,e,n){super(),this.top=t,this.text=e,this.topView=n}eq(t){return this.top==t.top&&this.text==t.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Cc}}function Wc(i,t,e){for(;;){if(i.nodeType==3)return i;if(i.nodeType==1&&t>0&&e<=0)i=i.childNodes[t-1],t=Vn(i);else if(i.nodeType==1&&t<i.childNodes.length&&e>=0)i=i.childNodes[t],t=0;else return null}}function tm(i,t){return i.nodeType!=1?0:(t&&i.childNodes[t-1].contentEditable=="false"?1:0)|(t<i.childNodes.length&&i.childNodes[t].contentEditable=="false"?2:0)}class em{constructor(){this.changes=[]}compareRange(t,e){fl(t,e,this.changes)}comparePoint(t,e){fl(t,e,this.changes)}}function im(i,t,e){let n=new em;return gt.compare(i,t,e,n),n.changes}function nm(i,t){for(let e=i;e&&e!=t;e=e.assignedSlot||e.parentNode)if(e.nodeType==1&&e.contentEditable=="false")return!0;return!1}function rm(i,t,e=1){let n=i.charCategorizer(t),r=i.doc.lineAt(t),o=t-r.from;if(r.length==0)return Y.cursor(t);o==0?e=1:o==r.length&&(e=-1);let s=o,l=o;e<0?s=se(r.text,o,!1):l=se(r.text,o);let h=n(r.text.slice(s,l));for(;s>0;){let c=se(r.text,s,!1);if(n(r.text.slice(c,s))!=h)break;s=c}for(;l<r.length;){let c=se(r.text,l);if(n(r.text.slice(l,c))!=h)break;l=c}return Y.range(s+r.from,l+r.from)}function sm(i,t){return t.left>i?t.left-i:Math.max(0,i-t.right)}function om(i,t){return t.top>i?t.top-i:Math.max(0,i-t.bottom)}function go(i,t){return i.top<t.bottom-1&&i.bottom>t.top+1}function Ja(i,t){return t<i.top?{top:t,left:i.left,right:i.right,bottom:i.bottom}:i}function Ka(i,t){return t>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:t}:i}function Ol(i,t,e){let n,r,o,s,l=!1,h,c,p,d;for(let C=i.firstChild;C;C=C.nextSibling){let O=Gn(C);for(let y=0;y<O.length;y++){let P=O[y];r&&go(r,P)&&(P=Ja(Ka(P,r.bottom),r.top));let w=sm(t,P),D=om(e,P);if(w==0&&D==0)return C.nodeType==3?th(C,t,e):Ol(C,t,e);(!n||s>D||s==D&&o>w)&&(n=C,r=P,o=w,s=D,l=!w||(w>0?y<O.length-1:y>0)),w==0?e>P.bottom&&(!p||p.bottom<P.bottom)?(h=C,p=P):e<P.top&&(!d||d.top>P.top)&&(c=C,d=P):p&&go(p,P)?p=Ka(p,P.bottom):d&&go(d,P)&&(d=Ja(d,P.top))}}if(p&&p.bottom>=e?(n=h,r=p):d&&d.top<=e&&(n=c,r=d),!n)return{node:i,offset:0};let m=Math.max(r.left,Math.min(r.right,t));if(n.nodeType==3)return th(n,m,e);if(l&&n.contentEditable!="false")return Ol(n,m,e);let v=Array.prototype.indexOf.call(i.childNodes,n)+(t>=(r.left+r.right)/2?1:0);return{node:i,offset:v}}function th(i,t,e){let n=i.nodeValue.length,r=-1,o=1e9,s=0;for(let l=0;l<n;l++){let h=an(i,l,l+1).getClientRects();for(let c=0;c<h.length;c++){let p=h[c];if(p.top==p.bottom)continue;s||(s=t-p.left);let d=(p.top>e?p.top-e:e-p.bottom)-1;if(p.left-1<=t&&p.right+1>=t&&d<o){let m=t>=(p.left+p.right)/2,v=m;if((J.chrome||J.gecko)&&an(i,l).getBoundingClientRect().left==p.right&&(v=!m),d<=0)return{node:i,offset:l+(v?1:0)};r=l+(v?1:0),o=d}}}return{node:i,offset:r>-1?r:s>0?i.nodeValue.length:0}}function Zc(i,{x:t,y:e},n,r=-1){var o;let s=i.contentDOM.getBoundingClientRect(),l=s.top+i.viewState.paddingTop,h,{docHeight:c}=i.viewState,p=e-l;if(p<0)return 0;if(p>c)return i.state.doc.length;for(let P=i.defaultLineHeight/2,w=!1;h=i.elementAtHeight(p),h.type!=Pt.Text;)for(;p=r>0?h.bottom+P:h.top-P,!(p>=0&&p<=c);){if(w)return n?null:0;w=!0,r=-r}e=l+p;let d=h.from;if(d<i.viewport.from)return i.viewport.from==0?0:n?null:eh(i,s,h,t,e);if(d>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:n?null:eh(i,s,h,t,e);let m=i.dom.ownerDocument,v=i.root.elementFromPoint?i.root:m,C=v.elementFromPoint(t,e);C&&!i.contentDOM.contains(C)&&(C=null),C||(t=Math.max(s.left+1,Math.min(s.right-1,t)),C=v.elementFromPoint(t,e),C&&!i.contentDOM.contains(C)&&(C=null));let O,y=-1;if(C&&((o=i.docView.nearest(C))===null||o===void 0?void 0:o.isEditable)!=!1){if(m.caretPositionFromPoint){let P=m.caretPositionFromPoint(t,e);P&&({offsetNode:O,offset:y}=P)}else if(m.caretRangeFromPoint){let P=m.caretRangeFromPoint(t,e);P&&({startContainer:O,startOffset:y}=P,(!i.contentDOM.contains(O)||J.safari&&lm(O,y,t)||J.chrome&&am(O,y,t))&&(O=void 0))}}if(!O||!i.docView.dom.contains(O)){let P=oe.find(i.docView,d);if(!P)return p>h.top+h.height/2?h.to:h.from;({node:O,offset:y}=Ol(P.dom,t,e))}return i.docView.posFromDOM(O,y)}function eh(i,t,e,n,r){let o=Math.round((n-t.left)*i.defaultCharacterWidth);i.lineWrapping&&e.height>i.defaultLineHeight*1.5&&(o+=Math.floor((r-e.top)/i.defaultLineHeight)*i.viewState.heightOracle.lineLength);let s=i.state.sliceDoc(e.from,e.to);return e.from+il(s,o,i.state.tabSize)}function lm(i,t,e){let n;if(i.nodeType!=3||t!=(n=i.nodeValue.length))return!1;for(let r=i.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return an(i,n-1,n).getBoundingClientRect().left>e}function am(i,t,e){if(t!=0)return!1;for(let r=i;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let n=i.nodeType==1?i.getBoundingClientRect():an(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return e-n.left>5}function hm(i,t,e,n){let r=i.state.doc.lineAt(t.head),o=!n||!i.lineWrapping?null:i.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head);if(o){let h=i.dom.getBoundingClientRect(),c=i.textDirectionAt(r.from),p=i.posAtCoords({x:e==(c==At.LTR)?h.right-1:h.left+1,y:(o.top+o.bottom)/2});if(p!=null)return Y.cursor(p,e?-1:1)}let s=oe.find(i.docView,t.head),l=s?e?s.posAtEnd:s.posAtStart:e?r.to:r.from;return Y.cursor(l,e?-1:1)}function ih(i,t,e,n){let r=i.state.doc.lineAt(t.head),o=i.bidiSpans(r),s=i.textDirectionAt(r.from);for(let l=t,h=null;;){let c=V0(r,o,s,l,e),p=Mc;if(!c){if(r.number==(e?i.state.doc.lines:1))return l;p=`
`,r=i.state.doc.line(r.number+(e?1:-1)),o=i.bidiSpans(r),c=Y.cursor(e?r.from:r.to)}if(h){if(!h(p))return l}else{if(!n)return c;h=n(p)}l=c}}function um(i,t,e){let n=i.state.charCategorizer(t),r=n(e);return o=>{let s=n(o);return r==bt.Space&&(r=s),r==s}}function cm(i,t,e,n){let r=t.head,o=e?1:-1;if(r==(e?i.state.doc.length:0))return Y.cursor(r,t.assoc);let s=t.goalColumn,l,h=i.contentDOM.getBoundingClientRect(),c=i.coordsAtPos(r),p=i.documentTop;if(c)s==null&&(s=c.left-h.left),l=o<0?c.top:c.bottom;else{let v=i.viewState.lineBlockAt(r);s==null&&(s=Math.min(h.right-h.left,i.defaultCharacterWidth*(r-v.from))),l=(o<0?v.top:v.bottom)+p}let d=h.left+s,m=n!=null?n:i.defaultLineHeight>>1;for(let v=0;;v+=10){let C=l+(m+v)*o,O=Zc(i,{x:d,y:C},!1,o);if(C<h.top||C>h.bottom||(o<0?O<r:O>r))return Y.cursor(O,t.assoc,void 0,s)}}function yo(i,t,e){let n=i.state.facet(Fc).map(r=>r(i));for(;;){let r=!1;for(let o of n)o.between(e.from-1,e.from+1,(s,l,h)=>{e.from>s&&e.from<l&&(e=t.head>e.from?Y.cursor(s,1):Y.cursor(l,-1),r=!0)});if(!r)return e}}class fm{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let e in qt){let n=qt[e];t.contentDOM.addEventListener(e,r=>{!nh(t,r)||this.ignoreDuringComposition(r)||e=="keydown"&&this.keydown(t,r)||(this.mustFlushObserver(r)&&t.observer.forceFlush(),this.runCustomHandlers(e,t,r)?r.preventDefault():n(t,r))},gl[e]),this.registeredEvents.push(e)}J.chrome&&J.chrome_version==102&&t.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=t.hasFocus,J.safari&&t.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t,e){var n;let r;this.customHandlers=[];for(let o of e)if(r=(n=o.update(t).spec)===null||n===void 0?void 0:n.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:r});for(let s in r)this.registeredEvents.indexOf(s)<0&&s!="scroll"&&(this.registeredEvents.push(s),t.contentDOM.addEventListener(s,l=>{!nh(t,l)||this.runCustomHandlers(s,t,l)&&l.preventDefault()}))}}runCustomHandlers(t,e,n){for(let r of this.customHandlers){let o=r.handlers[t];if(o)try{if(o.call(r.plugin,n,e)||n.defaultPrevented)return!0}catch(s){ve(e.state,s)}}return!1}runScrollHandlers(t,e){this.lastScrollTop=t.scrollDOM.scrollTop,this.lastScrollLeft=t.scrollDOM.scrollLeft;for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,e,t)}catch(o){ve(t.state,o)}}}keydown(t,e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(J.android&&J.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return t.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return J.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=jc.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||pm.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(t),250),!0):!1}flushIOSKey(t){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,$n(t.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(t){return/^key/.test(t.type)?this.composing>0?!0:J.safari&&!J.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(t){return t.type=="keydown"&&t.keyCode!=229}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const jc=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],pm="dthko",qc=[16,17,18,20,91,92,224,225];class dm{constructor(t,e,n,r){this.view=t,this.style=n,this.mustSelect=r,this.lastEvent=e;let o=t.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(dt.allowMultipleSelections)&&mm(t,e),this.dragMove=Om(t,e),this.dragging=gm(t,e)&&Vc(e)==1?null:!1,this.dragging===!1&&(e.preventDefault(),this.select(e))}move(t){if(t.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=t)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(t){let e=this.style.get(t,this.extend,this.multiple);(this.mustSelect||!e.eq(this.view.state.selection)||e.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:e,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function mm(i,t){let e=i.state.facet(Ac);return e.length?e[0](t):J.mac?t.metaKey:t.ctrlKey}function Om(i,t){let e=i.state.facet(Ec);return e.length?e[0](t):J.mac?!t.altKey:!t.ctrlKey}function gm(i,t){let{main:e}=i.state.selection;if(e.empty)return!1;let n=Jr(i.root);if(!n||n.rangeCount==0)return!0;let r=n.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=t.clientX&&s.right>=t.clientX&&s.top<=t.clientY&&s.bottom>=t.clientY)return!0}return!1}function nh(i,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target,n;e!=i.contentDOM;e=e.parentNode)if(!e||e.nodeType==11||(n=wt.get(e))&&n.ignoreEvent(t))return!1;return!0}const qt=Object.create(null),gl=Object.create(null),zc=J.ie&&J.ie_version<15||J.ios&&J.webkit_version<604;function ym(i){let t=i.dom.parentNode;if(!t)return;let e=t.appendChild(document.createElement("textarea"));e.style.cssText="position: fixed; left: -10000px; top: 10px",e.focus(),setTimeout(()=>{i.focus(),e.remove(),Uc(i,e.value)},50)}function Uc(i,t){let{state:e}=i,n,r=1,o=e.toText(t),s=o.lines==e.selection.ranges.length;if(yl!=null&&e.selection.ranges.every(h=>h.empty)&&yl==o.toString()){let h=-1;n=e.changeByRange(c=>{let p=e.doc.lineAt(c.from);if(p.from==h)return{range:c};h=p.from;let d=e.toText((s?o.line(r++).text:t)+e.lineBreak);return{changes:{from:p.from,insert:d},range:Y.cursor(c.from+d.length)}})}else s?n=e.changeByRange(h=>{let c=o.line(r++);return{changes:{from:h.from,to:h.to,insert:c.text},range:Y.cursor(h.from+c.length)}}):n=e.replaceSelection(o);i.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}qt.keydown=(i,t)=>{i.inputState.setSelectionOrigin("select"),t.keyCode==27?i.inputState.lastEscPress=Date.now():qc.indexOf(t.keyCode)<0&&(i.inputState.lastEscPress=0)};qt.touchstart=(i,t)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};qt.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};gl.touchstart=gl.touchmove={passive:!0};qt.mousedown=(i,t)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return;let e=null;for(let n of i.state.facet(kc))if(e=n(i,t),e)break;if(!e&&t.button==0&&(e=Pm(i,t)),e){let n=i.root.activeElement!=i.contentDOM;n&&i.observer.ignore(()=>mc(i.contentDOM)),i.inputState.startMouseSelection(new dm(i,t,e,n))}};function rh(i,t,e,n){if(n==1)return Y.cursor(t,e);if(n==2)return rm(i.state,t,e);{let r=oe.find(i.docView,t),o=i.state.doc.lineAt(r?r.posAtEnd:t),s=r?r.posAtStart:o.from,l=r?r.posAtEnd:o.to;return l<i.state.doc.length&&l==o.to&&l++,Y.range(s,l)}}let Gc=(i,t)=>i>=t.top&&i<=t.bottom,sh=(i,t,e)=>Gc(t,e)&&i>=e.left&&i<=e.right;function xm(i,t,e,n){let r=oe.find(i.docView,t);if(!r)return 1;let o=t-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&sh(e,n,s))return-1;let l=r.coordsAt(o,1);return l&&sh(e,n,l)?1:s&&Gc(n,s)?-1:1}function oh(i,t){let e=i.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:e,bias:xm(i,e,t.clientX,t.clientY)}}const vm=J.ie&&J.ie_version<=11;let lh=null,ah=0,hh=0;function Vc(i){if(!vm)return i.detail;let t=lh,e=hh;return lh=i,hh=Date.now(),ah=!t||e>Date.now()-400&&Math.abs(t.clientX-i.clientX)<2&&Math.abs(t.clientY-i.clientY)<2?(ah+1)%3:1}function Pm(i,t){let e=oh(i,t),n=Vc(t),r=i.state.selection,o=e,s=t;return{update(l){l.docChanged&&(e.pos=l.changes.mapPos(e.pos),r=r.map(l.changes),s=null)},get(l,h,c){let p;s&&l.clientX==s.clientX&&l.clientY==s.clientY?p=o:(p=o=oh(i,l),s=l);let d=rh(i,p.pos,p.bias,n);if(e.pos!=p.pos&&!h){let m=rh(i,e.pos,e.bias,n),v=Math.min(m.from,d.from),C=Math.max(m.to,d.to);d=v<d.from?Y.range(v,C):Y.range(C,v)}return h?r.replaceRange(r.main.extend(d.from,d.to)):c&&r.ranges.length>1&&r.ranges.some(m=>m.eq(d))?Cm(r,d):c?r.addRange(d):Y.create([d])}}}function Cm(i,t){for(let e=0;;e++)if(i.ranges[e].eq(t))return Y.create(i.ranges.slice(0,e).concat(i.ranges.slice(e+1)),i.mainIndex==e?0:i.mainIndex-(i.mainIndex>e?1:0))}qt.dragstart=(i,t)=>{let{selection:{main:e}}=i.state,{mouseSelection:n}=i.inputState;n&&(n.dragging=e),t.dataTransfer&&(t.dataTransfer.setData("Text",i.state.sliceDoc(e.from,e.to)),t.dataTransfer.effectAllowed="copyMove")};function uh(i,t,e,n){if(!e)return;let r=i.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:o}=i.inputState,s=n&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,l={from:r,insert:e},h=i.state.changes(s?[s,l]:l);i.focus(),i.dispatch({changes:h,selection:{anchor:h.mapPos(r,-1),head:h.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"})}qt.drop=(i,t)=>{if(!t.dataTransfer)return;if(i.state.readOnly)return t.preventDefault();let e=t.dataTransfer.files;if(e&&e.length){t.preventDefault();let n=Array(e.length),r=0,o=()=>{++r==e.length&&uh(i,t,n.filter(s=>s!=null).join(i.state.lineBreak),!1)};for(let s=0;s<e.length;s++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(n[s]=l.result),o()},l.readAsText(e[s])}}else uh(i,t,t.dataTransfer.getData("Text"),!0)};qt.paste=(i,t)=>{if(i.state.readOnly)return t.preventDefault();i.observer.flush();let e=zc?null:t.clipboardData;e?(Uc(i,e.getData("text/plain")),t.preventDefault()):ym(i)};function Sm(i,t){let e=i.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=t,n.focus(),n.selectionEnd=t.length,n.selectionStart=0,setTimeout(()=>{n.remove(),i.focus()},50)}function wm(i){let t=[],e=[],n=!1;for(let r of i.selection.ranges)r.empty||(t.push(i.sliceDoc(r.from,r.to)),e.push(r));if(!t.length){let r=-1;for(let{from:o}of i.selection.ranges){let s=i.doc.lineAt(o);s.number>r&&(t.push(s.text),e.push({from:s.from,to:Math.min(i.doc.length,s.to+1)})),r=s.number}n=!0}return{text:t.join(i.lineBreak),ranges:e,linewise:n}}let yl=null;qt.copy=qt.cut=(i,t)=>{let{text:e,ranges:n,linewise:r}=wm(i.state);if(!e&&!r)return;yl=r?e:null;let o=zc?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",e)):Sm(i,e),t.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"})};function Hc(i){setTimeout(()=>{i.hasFocus!=i.inputState.notifiedFocused&&i.update([])},10)}qt.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),Hc(i)};qt.blur=i=>{i.observer.clearSelectionRange(),Hc(i)};qt.compositionstart=qt.compositionupdate=i=>{i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0)};qt.compositionend=i=>{i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionFirstChange=null,J.chrome&&J.android&&i.observer.flushSoon(),setTimeout(()=>{i.inputState.composing<0&&i.docView.compositionDeco.size&&i.update([])},50)};qt.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};qt.beforeinput=(i,t)=>{var e;let n;if(J.chrome&&J.android&&(n=jc.find(r=>r.inputType==t.inputType))&&(i.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((e=window.visualViewport)===null||e===void 0?void 0:e.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}};const ch=["pre-wrap","normal","pre-line","break-spaces"];class bm{constructor(){this.doc=mt.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return ch.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let r=t[n];r<0?n++:this.heightSamples[Math.floor(r*10)]||(e=!0,this.heightSamples[Math.floor(r*10)]=!0)}return e}refresh(t,e,n,r,o){let s=ch.indexOf(t)>-1,l=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=e,this.charWidth=n,this.lineLength=r,l){this.heightSamples={};for(let h=0;h<o.length;h++){let c=o[h];c<0?h++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class Dm{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class ui{constructor(t,e,n,r,o){this.from=t,this.length=e,this.top=n,this.height=r,this.type=o}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let e=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new ui(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var St=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(St||(St={}));const Yr=.001;class fe{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t,e){this.height!=e&&(Math.abs(this.height-e)>Yr&&(t.heightChanged=!0),this.height=e)}replace(t,e,n){return fe.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,r){let o=this;for(let s=r.length-1;s>=0;s--){let{fromA:l,toA:h,fromB:c,toB:p}=r[s],d=o.lineAt(l,St.ByPosNoHeight,e,0,0),m=d.to>=h?d:o.lineAt(h,St.ByPosNoHeight,e,0,0);for(p+=m.to-h,h=m.to;s>0&&d.from<=r[s-1].toA;)l=r[s-1].fromA,c=r[s-1].fromB,s--,l<d.from&&(d=o.lineAt(l,St.ByPosNoHeight,e,0,0));c+=d.from-l,l=d.from;let v=zl.build(n,t,c,p);o=o.replace(l,h,v)}return o.updateHeight(n,0)}static empty(){return new Oe(0,0)}static of(t){if(t.length==1)return t[0];let e=0,n=t.length,r=0,o=0;for(;;)if(e==n)if(r>o*2){let l=t[e-1];l.break?t.splice(--e,1,l.left,null,l.right):t.splice(--e,1,l.left,l.right),n+=1+l.break,r-=l.size}else if(o>r*2){let l=t[n];l.break?t.splice(n,1,l.left,null,l.right):t.splice(n,1,l.left,l.right),n+=2+l.break,o-=l.size}else break;else if(r<o){let l=t[e++];l&&(r+=l.size)}else{let l=t[--n];l&&(o+=l.size)}let s=0;return t[e-1]==null?(s=1,e--):t[e]==null&&(s=1,n++),new Tm(fe.of(t.slice(0,e)),s,fe.of(t.slice(n)))}}fe.prototype.size=1;class Jc extends fe{constructor(t,e,n){super(t,e),this.type=n}blockAt(t,e,n,r){return new ui(r,this.length,n,this.height,this.type)}lineAt(t,e,n,r,o){return this.blockAt(0,n,r,o)}forEachLine(t,e,n,r,o,s){t<=o+this.length&&e>=o&&s(this.blockAt(0,n,r,o))}updateHeight(t,e=0,n=!1,r){return r&&r.from<=e&&r.more&&this.setHeight(t,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Oe extends Jc{constructor(t,e){super(t,e,Pt.Text),this.collapsed=0,this.widgetHeight=0}replace(t,e,n){let r=n[0];return n.length==1&&(r instanceof Oe||r instanceof zt&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof zt?r=new Oe(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):fe.of(n)}updateHeight(t,e=0,n=!1,r){return r&&r.from<=e&&r.more?this.setHeight(t,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class zt extends fe{constructor(t){super(t,0)}lines(t,e){let n=t.lineAt(e).number,r=t.lineAt(e+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(t,e,n,r){let{firstLine:o,lastLine:s,lineHeight:l}=this.lines(e,r),h=Math.max(0,Math.min(s-o,Math.floor((t-n)/l))),{from:c,length:p}=e.line(o+h);return new ui(c,p,n+l*h,l,Pt.Text)}lineAt(t,e,n,r,o){if(e==St.ByHeight)return this.blockAt(t,n,r,o);if(e==St.ByPosNoHeight){let{from:d,to:m}=n.lineAt(t);return new ui(d,m-d,0,0,Pt.Text)}let{firstLine:s,lineHeight:l}=this.lines(n,o),{from:h,length:c,number:p}=n.lineAt(t);return new ui(h,c,r+l*(p-s),l,Pt.Text)}forEachLine(t,e,n,r,o,s){let{firstLine:l,lineHeight:h}=this.lines(n,o);for(let c=Math.max(t,o),p=Math.min(o+this.length,e);c<=p;){let d=n.lineAt(c);c==t&&(r+=h*(d.number-l)),s(new ui(d.from,d.length,r,h,Pt.Text)),r+=h,c=d.to+1}}replace(t,e,n){let r=this.length-e;if(r>0){let o=n[n.length-1];o instanceof zt?n[n.length-1]=new zt(o.length+r):n.push(null,new zt(r-1))}if(t>0){let o=n[0];o instanceof zt?n[0]=new zt(t+o.length):n.unshift(new zt(t-1),null)}return fe.of(n)}decomposeLeft(t,e){e.push(new zt(t-1),null)}decomposeRight(t,e){e.push(null,new zt(this.length-t-1))}updateHeight(t,e=0,n=!1,r){let o=e+this.length;if(r&&r.from<=e+this.length&&r.more){let s=[],l=Math.max(e,r.from),h=-1,c=t.heightChanged;for(r.from>e&&s.push(new zt(r.from-e-1).updateHeight(t,e));l<=o&&r.more;){let d=t.doc.lineAt(l).length;s.length&&s.push(null);let m=r.heights[r.index++];h==-1?h=m:Math.abs(m-h)>=Yr&&(h=-2);let v=new Oe(d,m);v.outdated=!1,s.push(v),l+=d+1}l<=o&&s.push(null,new zt(o-l).updateHeight(t,l));let p=fe.of(s);return t.heightChanged=c||h<0||Math.abs(p.height-this.height)>=Yr||Math.abs(h-this.lines(t.doc,e).lineHeight)>=Yr,p}else(n||this.outdated)&&(this.setHeight(t,t.heightForGap(e,e+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Tm extends fe{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return this.flags&1}blockAt(t,e,n,r){let o=n+this.left.height;return t<o?this.left.blockAt(t,e,n,r):this.right.blockAt(t,e,o,r+this.left.length+this.break)}lineAt(t,e,n,r,o){let s=r+this.left.height,l=o+this.left.length+this.break,h=e==St.ByHeight?t<s:t<l,c=h?this.left.lineAt(t,e,n,r,o):this.right.lineAt(t,e,n,s,l);if(this.break||(h?c.to<l:c.from>l))return c;let p=e==St.ByPosNoHeight?St.ByPosNoHeight:St.ByPos;return h?c.join(this.right.lineAt(l,p,n,s,l)):this.left.lineAt(l,p,n,r,o).join(c)}forEachLine(t,e,n,r,o,s){let l=r+this.left.height,h=o+this.left.length+this.break;if(this.break)t<h&&this.left.forEachLine(t,e,n,r,o,s),e>=h&&this.right.forEachLine(t,e,n,l,h,s);else{let c=this.lineAt(h,St.ByPos,n,r,o);t<c.from&&this.left.forEachLine(t,c.from-1,n,r,o,s),c.to>=t&&c.from<=e&&s(c),e>c.to&&this.right.forEachLine(c.to+1,e,n,l,h,s)}}replace(t,e,n){let r=this.left.length+this.break;if(e<r)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,e-r,n));let o=[];t>0&&this.decomposeLeft(t,o);let s=o.length;for(let l of n)o.push(l);if(t>0&&fh(o,s-1),e<this.length){let l=o.length;this.decomposeRight(e,o),fh(o,l)}return fe.of(o)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,r=n+this.break;if(t>=r)return this.right.decomposeRight(t-r,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<r&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?fe.of(this.break?[t,null,e]:[t,e]):(this.left=t,this.right=e,this.height=t.height+e.height,this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,r){let{left:o,right:s}=this,l=e+o.length+this.break,h=null;return r&&r.from<=e+o.length&&r.more?h=o=o.updateHeight(t,e,n,r):o.updateHeight(t,e,n),r&&r.from<=l+s.length&&r.more?h=s=s.updateHeight(t,l,n,r):s.updateHeight(t,l,n),h?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function fh(i,t){let e,n;i[t]==null&&(e=i[t-1])instanceof zt&&(n=i[t+1])instanceof zt&&i.splice(t-1,3,new zt(e.length+1+n.length))}const Am=5;class zl{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let n=Math.min(e,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Oe?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Oe(n-this.pos,-1)),this.writtenTo=n,e>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let o=e-t;n.block?this.addBlock(new Jc(o,r,n.type)):(o||r>=Am)&&this.addLineDeco(r,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Oe(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new zt(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Oe)return t;let e=new Oe(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine(),t.type==Pt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=Pt.WidgetBefore&&(this.covering=t)}addLineDeco(t,e){let n=this.ensureLine();n.length+=e,n.collapsed+=e,n.widgetHeight=Math.max(n.widgetHeight,t),this.writtenTo=this.pos=this.pos+e}finish(t){let e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(e instanceof Oe)&&!this.isCovered?this.nodes.push(new Oe(0,-1)):(this.writtenTo<this.pos||e==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=t;for(let r of this.nodes)r instanceof Oe&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(t,e,n,r){let o=new zl(n,t);return gt.spans(e,n,r,o,0),o.finish(n)}}function Em(i,t,e){let n=new km;return gt.compare(i,t,e,n,0),n.changes}class km{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,r){(t<e||n&&n.heightRelevant||r&&r.heightRelevant)&&fl(t,e,this.changes,5)}}function _m(i,t){let e=i.getBoundingClientRect(),n=i.ownerDocument,r=n.defaultView||window,o=Math.max(0,e.left),s=Math.min(r.innerWidth,e.right),l=Math.max(0,e.top),h=Math.min(r.innerHeight,e.bottom);for(let c=i.parentNode;c&&c!=n.body;)if(c.nodeType==1){let p=c,d=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&d.overflow!="visible"){let m=p.getBoundingClientRect();o=Math.max(o,m.left),s=Math.min(s,m.right),l=Math.max(l,m.top),h=c==i.parentNode?m.bottom:Math.min(h,m.bottom)}c=d.position=="absolute"||d.position=="fixed"?p.offsetParent:p.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:o-e.left,right:Math.max(o,s)-e.left,top:l-(e.top+t),bottom:Math.max(l,h)-(e.top+t)}}function Im(i,t){let e=i.getBoundingClientRect();return{left:0,right:e.right-e.left,top:t,bottom:e.bottom-(e.top+t)}}class xo{constructor(t,e,n){this.from=t,this.to=e,this.size=n}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],o=e[n];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(t){return et.replace({widget:new Lm(this.size,t)}).range(this.from,this.to)}}class Lm extends ii{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class ph{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new bm,this.scaler=mh,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=At.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=t.facet(Hn).filter(e=>typeof e!="function"),this.heightMap=fe.empty().applyChanges(this.stateDeco,mt.empty,this.heightOracle.setDoc(t.doc),[new Ke(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=et.set(this.lineGaps.map(e=>e.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let r=n?e.head:e.anchor;if(!t.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);t.push(new vr(o,s))}}this.viewports=t.sort((n,r)=>n.from-r.from),this.scaler=this.heightMap.height<=7e6?mh:new Fm(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,t=>{this.viewportLines.push(this.scaler.scale==1?t:In(t,this.scaler))})}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Hn).filter(c=>typeof c!="function");let r=t.changedRanges,o=Ke.extendWithRanges(r,Em(n,this.stateDeco,t?t.changes:$t.empty(this.state.doc.length))),s=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=s&&(t.flags|=2);let l=o.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<l.from||e.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,e));let h=!t.changes.empty||t.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),h&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),r=this.heightOracle,o=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?At.RTL:At.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),l=s||this.mustMeasureContent||this.contentDOMHeight!=e.clientHeight;this.contentDOMHeight=e.clientHeight,this.mustMeasureContent=!1;let h=0,c=0,p=parseInt(n.paddingTop)||0,d=parseInt(n.paddingBottom)||0;(this.paddingTop!=p||this.paddingBottom!=d)&&(this.paddingTop=p,this.paddingBottom=d,h|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=t.scrollDOM.clientWidth,h|=8);let m=(this.printing?Im:_m)(e,this.paddingTop),v=m.top-this.pixelViewport.top,C=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let O=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(O!=this.inView&&(this.inView=O,O&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=e.clientWidth;if((this.contentDOMWidth!=y||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=y,this.editorHeight=t.scrollDOM.clientHeight,h|=8),l){let w=t.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(w)&&(s=!0),s||r.lineWrapping&&Math.abs(y-this.contentDOMWidth)>r.charWidth){let{lineHeight:D,charWidth:A}=t.docView.measureTextSize();s=r.refresh(o,D,A,y/A,w),s&&(t.docView.minWidth=0,h|=8)}v>0&&C>0?c=Math.max(v,C):v<0&&C<0&&(c=Math.min(v,C)),r.heightChanged=!1;for(let D of this.viewports){let A=D.from==this.viewport.from?w:t.docView.measureVisibleLineHeights(D);this.heightMap=this.heightMap.updateHeight(r,0,s,new Dm(D.from,A))}r.heightChanged&&(h|=2)}let P=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return P&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(h&2||P)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,t)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),r=this.heightMap,o=this.state.doc,{visibleTop:s,visibleBottom:l}=this,h=new vr(r.lineAt(s-n*1e3,St.ByHeight,o,0,0).from,r.lineAt(l+(1-n)*1e3,St.ByHeight,o,0,0).to);if(e){let{head:c}=e.range;if(c<h.from||c>h.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,St.ByPos,o,0,0),m;e.y=="center"?m=(d.top+d.bottom)/2-p/2:e.y=="start"||e.y=="nearest"&&c<h.from?m=d.top:m=d.bottom-p,h=new vr(r.lineAt(m-1e3/2,St.ByHeight,o,0,0).from,r.lineAt(m+p+1e3/2,St.ByHeight,o,0,0).to)}}return h}mapViewport(t,e){let n=e.mapPos(t.from,-1),r=e.mapPos(t.to,1);return new vr(this.heightMap.lineAt(n,St.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,St.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(t,St.ByPos,this.state.doc,0,0),{bottom:o}=this.heightMap.lineAt(e,St.ByPos,this.state.doc,0,0),{visibleTop:s,visibleBottom:l}=this;return(t==0||r<=s-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||o>=l+Math.max(10,Math.min(n,250)))&&r>s-2*1e3&&o<l+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let r of t)e.touchesRange(r.from,r.to)||n.push(new xo(e.mapPos(r.from),e.mapPos(r.to),r.size));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,o=r>>1,s=r<<1;if(this.defaultTextDirection!=At.LTR&&!n)return[];let l=[],h=(c,p,d,m)=>{if(p-c<o)return;let v=this.state.selection.main,C=[v.from];v.empty||C.push(v.to);for(let y of C)if(y>c&&y<p){h(c,y-10,d,m),h(y+10,p,d,m);return}let O=Xm(t,y=>y.from>=d.from&&y.to<=d.to&&Math.abs(y.from-c)<o&&Math.abs(y.to-p)<o&&!C.some(P=>y.from<P&&y.to>P));if(!O){if(p<d.to&&e&&n&&e.visibleRanges.some(y=>y.from<=p&&y.to>=p)){let y=e.moveToLineBoundary(Y.cursor(p),!1,!0).head;y>c&&(p=y)}O=new xo(c,p,this.gapSize(d,c,p,m))}l.push(O)};for(let c of this.viewportLines){if(c.length<s)continue;let p=Qm(c.from,c.to,this.stateDeco);if(p.total<s)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,m,v;if(n){let C=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,O,y;d!=null?(O=Math.max(c.from,d-r),y=Math.min(c.to,d+r)):(O=(this.visibleTop-c.top-C)/c.height,y=(this.visibleBottom-c.top+C)/c.height),m=Pr(p,O),v=Pr(p,y)}else{let C,O;if(d!=null)C=Math.max(c.from,d-s),O=Math.min(c.to,d+s);else{let y=p.total*this.heightOracle.charWidth,P=r*this.heightOracle.charWidth;C=(this.pixelViewport.left-P)/y,O=(this.pixelViewport.right+P)/y}m=Pr(p,C),v=Pr(p,O)}m>c.from&&h(c.from,m,c,p),v<c.to&&h(v,c.to,c,p)}return l}gapSize(t,e,n,r){let o=dh(r,n)-dh(r,e);return this.heightOracle.lineWrapping?t.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(t){xo.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=et.set(t.map(e=>e.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let e=[];gt.spans(t,this.viewport.from,this.viewport.to,{span(r,o){e.push({from:r,to:o})},point(){}},20);let n=e.length!=this.visibleRanges.length||this.visibleRanges.some((r,o)=>r.from!=e[o].from||r.to!=e[o].to);return this.visibleRanges=e,n?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(e=>e.from<=t&&e.to>=t)||In(this.heightMap.lineAt(t,St.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(t){return In(this.heightMap.lineAt(this.scaler.fromDOM(t),St.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(t){return In(this.heightMap.blockAt(this.scaler.fromDOM(t),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class vr{constructor(t,e){this.from=t,this.to=e}}function Qm(i,t,e){let n=[],r=i,o=0;return gt.spans(e,i,t,{span(){},point(s,l){s>r&&(n.push({from:r,to:s}),o+=s-r),r=l}},20),r<t&&(n.push({from:r,to:t}),o+=t-r),{total:o,ranges:n}}function Pr({total:i,ranges:t},e){if(e<=0)return t[0].from;if(e>=1)return t[t.length-1].to;let n=Math.floor(i*e);for(let r=0;;r++){let{from:o,to:s}=t[r],l=s-o;if(n<=l)return o+n;n-=l}}function dh(i,t){let e=0;for(let{from:n,to:r}of i.ranges){if(t<=r){e+=t-n;break}e+=r-n}return e/i.total}function Xm(i,t){for(let e of i)if(t(e))return e}const mh={toDOM(i){return i},fromDOM(i){return i},scale:1};class Fm{constructor(t,e,n){let r=0,o=0,s=0;this.viewports=n.map(({from:l,to:h})=>{let c=e.lineAt(l,St.ByPos,t,0,0).top,p=e.lineAt(h,St.ByPos,t,0,0).bottom;return r+=p-c,{from:l,to:h,top:c,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(e.height-r);for(let l of this.viewports)l.domTop=s+(l.top-o)*this.scale,s=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(t){for(let e=0,n=0,r=0;;e++){let o=e<this.viewports.length?this.viewports[e]:null;if(!o||t<o.top)return r+(t-n)*this.scale;if(t<=o.bottom)return o.domTop+(t-o.top);n=o.bottom,r=o.domBottom}}fromDOM(t){for(let e=0,n=0,r=0;;e++){let o=e<this.viewports.length?this.viewports[e]:null;if(!o||t<o.domTop)return n+(t-r)/this.scale;if(t<=o.domBottom)return o.top+(t-o.domTop);n=o.bottom,r=o.domBottom}}}function In(i,t){if(t.scale==1)return i;let e=t.toDOM(i.top),n=t.toDOM(i.bottom);return new ui(i.from,i.length,e,n-e,Array.isArray(i.type)?i.type.map(r=>In(r,t)):i.type)}const Cr=K.define({combine:i=>i.join(" ")}),xl=K.define({combine:i=>i.indexOf(!0)>-1}),vl=Oi.newName(),Kc=Oi.newName(),tf=Oi.newName(),ef={"&light":"."+Kc,"&dark":"."+tf};function Pl(i,t,e){return new Oi(t,{finish(n){return/&/.test(n)?n.replace(/&\w*/,r=>{if(r=="&")return i;if(!e||!e[r])throw new RangeError(`Unsupported selector: ${r}`);return e[r]}):i+" "+n}})}const $m=Pl("."+vl,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ef),Bm={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},vo=J.ie&&J.ie_version<=11;class Nm{constructor(t,e,n){this.view=t,this.onChange=e,this.onScrollChanged=n,this.active=!1,this.selectionRange=new $0,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(r=>{for(let o of r)this.queue.push(o);(J.ie&&J.ie_version<=11||J.ios&&t.composing)&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),vo&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((e,n)=>e!=t[n]))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(Is)?n.root.activeElement!=this.dom:!Rr(n.dom,r))return;let o=r.anchorNode&&n.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(t)){e||(this.selectionChanged=!1);return}(J.ie&&J.ie_version<=11||J.android&&J.chrome)&&!n.state.selection.main.empty&&r.focusNode&&Kr(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=J.safari&&t.root.nodeType==11&&Q0(this.dom.ownerDocument)==this.dom&&Mm(this.view)||Jr(t.root);if(!e||this.selectionRange.eq(e))return!1;let n=Rr(this.dom,e);return n&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&N0(this.dom,e)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(e),n&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(n.nodeType==1)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=e)n.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Bm),vo&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),vo&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;this.delayedAndroidKey||this.view.win.requestAnimationFrame(()=>{let r=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,!this.flush()&&r.force&&$n(this.dom,r.key,r.keyCode)}),(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let t=this.queue;for(let o of this.observer.takeRecords())t.push(o);t.length&&(this.queue=[]);let e=-1,n=-1,r=!1;for(let o of t){let s=this.readMutation(o);!s||(s.typeOver&&(r=!0),e==-1?{from:e,to:n}=s:(e=Math.min(s.from,e),n=Math.max(s.to,n)))}return{from:e,to:n,typeOver:r}}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let{from:e,to:n,typeOver:r}=this.processRecords(),o=this.selectionChanged&&Rr(this.dom,this.selectionRange);if(e<0&&!o)return!1;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=this.view.state,l=this.onChange(e,n,r);return this.view.state==s&&this.view.update([]),l}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty(t.type=="attributes"),t.type=="attributes"&&(e.dirty|=4),t.type=="childList"){let n=Oh(e,t.previousSibling||t.target.previousSibling,-1),r=Oh(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:r?e.posBefore(r):e.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,e,n;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(e=this.gapIntersection)===null||e===void 0||e.disconnect(),(n=this.resize)===null||n===void 0||n.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function Oh(i,t,e){for(;t;){let n=wt.get(t);if(n&&n.parent==i)return n;let r=t.parentNode;t=r!=i.dom?r:e>0?t.nextSibling:t.previousSibling}return null}function Mm(i){let t=null;function e(h){h.preventDefault(),h.stopImmediatePropagation(),t=h.getTargetRanges()[0]}if(i.contentDOM.addEventListener("beforeinput",e,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",e,!0),!t)return null;let n=t.startContainer,r=t.startOffset,o=t.endContainer,s=t.endOffset,l=i.docView.domAtPos(i.state.selection.main.anchor);return Kr(l.node,l.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function Rm(i,t,e,n){let r,o,s=i.state.selection.main;if(t>-1){let l=i.docView.domBoundsAround(t,e,0);if(!l||i.state.readOnly)return!1;let{from:h,to:c}=l,p=i.docView.impreciseHead||i.docView.impreciseAnchor?[]:Wm(i),d=new Rc(p,i.state);d.readRange(l.startDOM,l.endDOM);let m=s.from,v=null;(i.inputState.lastKeyCode===8&&i.inputState.lastKeyTime>Date.now()-100||J.android&&d.text.length<c-h)&&(m=s.to,v="end");let C=Ym(i.state.doc.sliceString(h,c,hi),d.text,m-h,v);C&&(J.chrome&&i.inputState.lastKeyCode==13&&C.toB==C.from+2&&d.text.slice(C.from,C.toB)==hi+hi&&C.toB--,r={from:h+C.from,to:h+C.toA,insert:mt.of(d.text.slice(C.from,C.toB).split(hi))}),o=Zm(p,h)}else if(i.hasFocus||!i.state.facet(Is)){let l=i.observer.selectionRange,{impreciseHead:h,impreciseAnchor:c}=i.docView,p=h&&h.node==l.focusNode&&h.offset==l.focusOffset||!ln(i.contentDOM,l.focusNode)?i.state.selection.main.head:i.docView.posFromDOM(l.focusNode,l.focusOffset),d=c&&c.node==l.anchorNode&&c.offset==l.anchorOffset||!ln(i.contentDOM,l.anchorNode)?i.state.selection.main.anchor:i.docView.posFromDOM(l.anchorNode,l.anchorOffset);(p!=s.head||d!=s.anchor)&&(o=Y.single(d,p))}if(!r&&!o)return!1;if(!r&&n&&!s.empty&&o&&o.main.empty?r={from:s.from,to:s.to,insert:i.state.doc.slice(s.from,s.to)}:r&&r.from>=s.from&&r.to<=s.to&&(r.from!=s.from||r.to!=s.to)&&s.to-s.from-(r.to-r.from)<=4?r={from:s.from,to:s.to,insert:i.state.doc.slice(s.from,r.from).append(r.insert).append(i.state.doc.slice(r.to,s.to))}:(J.mac||J.android)&&r&&r.from==r.to&&r.from==s.head-1&&/^\. ?$/.test(r.insert.toString())&&(o&&r.insert.length==2&&(o=Y.single(o.main.anchor-1,o.main.head-1)),r={from:s.from,to:s.to,insert:mt.of([" "])}),r){let l=i.state;if(J.ios&&i.inputState.flushIOSKey(i)||J.android&&(r.from==s.from&&r.to==s.to&&r.insert.length==1&&r.insert.lines==2&&$n(i.contentDOM,"Enter",13)||r.from==s.from-1&&r.to==s.to&&r.insert.length==0&&$n(i.contentDOM,"Backspace",8)||r.from==s.from&&r.to==s.to+1&&r.insert.length==0&&$n(i.contentDOM,"Delete",46)))return!0;let h=r.insert.toString();if(i.state.facet(Ic).some(d=>d(i,r.from,r.to,h)))return!0;i.inputState.composing>=0&&i.inputState.composing++;let c;if(r.from>=s.from&&r.to<=s.to&&r.to-r.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==r.from+r.insert.length)&&i.inputState.composing<0){let d=s.from<r.from?l.sliceDoc(s.from,r.from):"",m=s.to>r.to?l.sliceDoc(r.to,s.to):"";c=l.replaceSelection(i.state.toText(d+r.insert.sliceString(0,void 0,i.state.lineBreak)+m))}else{let d=l.changes(r),m=o&&!l.selection.main.eq(o.main)&&o.main.to<=d.newLength?o.main:void 0;if(l.selection.ranges.length>1&&i.inputState.composing>=0&&r.to<=s.to&&r.to>=s.to-10){let v=i.state.sliceDoc(r.from,r.to),C=Yc(i)||i.state.doc.lineAt(s.head),O=s.to-r.to,y=s.to-s.from;c=l.changeByRange(P=>{if(P.from==s.from&&P.to==s.to)return{changes:d,range:m||P.map(d)};let w=P.to-O,D=w-v.length;if(P.to-P.from!=y||i.state.sliceDoc(D,w)!=v||C&&P.to>=C.from&&P.from<=C.to)return{range:P};let A=l.changes({from:D,to:w,insert:r.insert}),_=P.to-s.to;return{changes:A,range:m?Y.range(Math.max(0,m.anchor+_),Math.max(0,m.head+_)):P.map(A)}})}else c={changes:d,selection:m&&l.selection.replaceRange(m)}}let p="input.type";return i.composing&&(p+=".compose",i.inputState.compositionFirstChange&&(p+=".start",i.inputState.compositionFirstChange=!1)),i.dispatch(c,{scrollIntoView:!0,userEvent:p}),!0}else if(o&&!o.main.eq(s)){let l=!1,h="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(l=!0),h=i.inputState.lastSelectionOrigin),i.dispatch({selection:o,scrollIntoView:l,userEvent:h}),!0}else return!1}function Ym(i,t,e,n){let r=Math.min(i.length,t.length),o=0;for(;o<r&&i.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==r&&i.length==t.length)return null;let s=i.length,l=t.length;for(;s>0&&l>0&&i.charCodeAt(s-1)==t.charCodeAt(l-1);)s--,l--;if(n=="end"){let h=Math.max(0,o-Math.min(s,l));e-=s+h-o}return s<o&&i.length<t.length?(o-=e<=o&&e>=s?o-e:0,l=o+(l-s),s=o):l<o&&(o-=e<=o&&e>=l?o-e:0,s=o+(s-l),l=o),{from:o,toA:s,toB:l}}function Wm(i){let t=[];if(i.root.activeElement!=i.contentDOM)return t;let{anchorNode:e,anchorOffset:n,focusNode:r,focusOffset:o}=i.observer.selectionRange;return e&&(t.push(new Ga(e,n)),(r!=e||o!=n)&&t.push(new Ga(r,o))),t}function Zm(i,t){if(i.length==0)return null;let e=i[0].pos,n=i.length==2?i[1].pos:e;return e>-1&&n>-1?Y.single(e+t,n+t):null}class tt{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this._root=t.root||B0(t.parent)||document,this.viewState=new ph(t.state||dt.create(t)),this.plugins=this.state.facet(kn).map(e=>new Oo(e));for(let e of this.plugins)e.update(this);this.observer=new Nm(this,(e,n,r)=>Rm(this,e,n,r),e=>{this.inputState.runScrollHandlers(this,e),this.observer.intersecting&&this.measure()}),this.inputState=new fm(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Va(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(t.length==1&&t[0]instanceof Bt?t[0]:this.state.update(...t))}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e=!1,n=!1,r,o=this.state;for(let l of t){if(l.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=l.state}if(this.destroyed){this.viewState.state=o;return}if(this.observer.clear(),o.facet(dt.phrases)!=this.state.facet(dt.phrases))return this.setState(o);r=is.create(this,o,t);let s=this.viewState.scrollTarget;try{this.updateState=2;for(let l of t){if(s&&(s=s.map(l.changes)),l.scrollIntoView){let{main:h}=l.state.selection;s=new es(h.empty?h:Y.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of l.effects)h.is(za)&&(s=h.value)}this.viewState.update(r,s),this.bidiCache=ns.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),e=this.docView.update(r),this.state.facet(_n)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(e,t.some(l=>l.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Cr)!=r.state.facet(Cr)&&(this.viewState.mustMeasureContent=!0),(e||n||s||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let l of this.state.facet(pl))l(r)}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let e=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new ph(t),this.plugins=t.facet(kn).map(n=>new Oo(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView=new Va(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(kn),n=t.state.facet(kn);if(e!=n){let r=[];for(let o of n){let s=e.indexOf(o);if(s<0)r.push(new Oo(o));else{let l=this.plugins[s];l.mustUpdate=t,r.push(l)}}for(let o of this.plugins)o.mustUpdate!=t&&o.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=t;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,{scrollHeight:n,scrollTop:r,clientHeight:o}=this.scrollDOM,s=r>n-o-4?n:r;try{for(let l=0;;l++){this.updateState=1;let h=this.viewport,c=this.viewState.lineBlockAtHeight(s),p=this.viewState.measure(this);if(!p&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];p&4||([this.measureRequests,d]=[d,this.measureRequests]);let m=d.map(y=>{try{return y.read(this)}catch(P){return ve(this.state,P),gh}}),v=is.create(this,this.state,[]),C=!1,O=!1;v.flags|=p,e?e.flags|=p:e=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),C=this.docView.update(v));for(let y=0;y<d.length;y++)if(m[y]!=gh)try{let P=d[y];P.write&&P.write(m[y],this)}catch(P){ve(this.state,P)}if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,O=!0;else{let y=this.viewState.lineBlockAt(c.from).top-c.top;(y>1||y<-1)&&(this.scrollDOM.scrollTop+=y,O=!0)}if(C&&this.docView.updateSelection(!0),this.viewport.from==h.from&&this.viewport.to==h.to&&!O&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let l of this.state.facet(pl))l(e)}get themeClasses(){return vl+" "+(this.state.facet(xl)?tf:Kc)+" "+this.state.facet(Cr)}updateAttrs(){let t=yh(this,Qc,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Is)?"true":"false",class:"cm-content",style:`${J.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),yh(this,Xc,e);let n=this.observer.ignore(()=>{let r=cl(this.contentDOM,this.contentAttrs,e),o=cl(this.dom,this.editorAttrs,t);return r||o});return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let r of n.effects)if(r.is(tt.announce)){e&&(this.announceDOM.textContent=""),e=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(_n),Oi.mount(this.root,this.styleModules.concat($m).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(t.key!=null){for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key){this.measureRequests[e]=t;return}}this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(e===void 0||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find(n=>n.spec==t)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return yo(this,t,ih(this,t,e,n))}moveByGroup(t,e){return yo(this,t,ih(this,t,e,n=>um(this,t.head,n)))}moveToLineBoundary(t,e,n=!0){return hm(this,t,e,n)}moveVertically(t,e,n){return yo(this,t,cm(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),Zc(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(t),o=this.bidiSpans(r),s=o[tn.find(o,t-r.from,-1,e)];return Es(n,s.dir==At.LTR==e>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(Lc)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>jm)return Nc(t.length);let e=this.textDirectionAt(t.from);for(let r of this.bidiCache)if(r.from==t.from&&r.dir==e)return r.order;let n=G0(t.text,e);return this.bidiCache.push(new ns(t.from,t.to,e,n)),n}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||J.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{mc(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return za.of(new es(typeof t=="number"?Y.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}static domEventHandlers(t){return Xt.define(()=>({}),{eventHandlers:t})}static theme(t,e){let n=Oi.newName(),r=[Cr.of(n),_n.of(Pl(`.${n}`,t))];return e&&e.dark&&r.push(xl.of(!0)),r}static baseTheme(t){return $i.lowest(_n.of(Pl("."+vl,t,ef)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),r=n&&wt.get(n)||wt.get(t);return((e=r==null?void 0:r.rootView)===null||e===void 0?void 0:e.view)||null}}tt.styleModule=_n;tt.inputHandler=Ic;tt.perLineTextDirection=Lc;tt.exceptionSink=_c;tt.updateListener=pl;tt.editable=Is;tt.mouseSelectionStyle=kc;tt.dragMovesSelection=Ec;tt.clickAddsSelectionRange=Ac;tt.decorations=Hn;tt.atomicRanges=Fc;tt.scrollMargins=$c;tt.darkTheme=xl;tt.contentAttributes=Xc;tt.editorAttributes=Qc;tt.lineWrapping=tt.contentAttributes.of({class:"cm-lineWrapping"});tt.announce=st.define();const jm=4096,gh={};class ns{constructor(t,e,n,r){this.from=t,this.to=e,this.dir=n,this.order=r}static update(t,e){if(e.empty)return t;let n=[],r=t.length?t[t.length-1].dir:At.LTR;for(let o=Math.max(0,t.length-10);o<t.length;o++){let s=t[o];s.dir==r&&!e.touchesRange(s.from,s.to)&&n.push(new ns(e.mapPos(s.from,1),e.mapPos(s.to,-1),s.dir,s.order))}return n}}function yh(i,t,e){for(let n=i.state.facet(t),r=n.length-1;r>=0;r--){let o=n[r],s=typeof o=="function"?o(i):o;s&&ul(s,e)}return e}const qm=J.mac?"mac":J.windows?"win":J.linux?"linux":"key";function zm(i,t){const e=i.split(/-(?!$)/);let n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,l;for(let h=0;h<e.length-1;++h){const c=e[h];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))t=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),l&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function Sr(i,t,e){return t.altKey&&(i="Alt-"+i),t.ctrlKey&&(i="Ctrl-"+i),t.metaKey&&(i="Meta-"+i),e!==!1&&t.shiftKey&&(i="Shift-"+i),i}const Um=$i.default(tt.domEventHandlers({keydown(i,t){return rf(nf(t.state),i,t,"editor")}})),hr=K.define({enables:Um}),xh=new WeakMap;function nf(i){let t=i.facet(hr),e=xh.get(t);return e||xh.set(t,e=Hm(t.reduce((n,r)=>n.concat(r),[]))),e}function Gm(i,t,e){return rf(nf(i.state),t,i,e)}let oi=null;const Vm=4e3;function Hm(i,t=qm){let e=Object.create(null),n=Object.create(null),r=(s,l)=>{let h=n[s];if(h==null)n[s]=l;else if(h!=l)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,l,h,c)=>{var p,d;let m=e[s]||(e[s]=Object.create(null)),v=l.split(/ (?!$)/).map(y=>zm(y,t));for(let y=1;y<v.length;y++){let P=v.slice(0,y).join(" ");r(P,!0),m[P]||(m[P]={preventDefault:!0,run:[w=>{let D=oi={view:w,prefix:P,scope:s};return setTimeout(()=>{oi==D&&(oi=null)},Vm),!0}]})}let C=v.join(" ");r(C,!1);let O=m[C]||(m[C]={preventDefault:!1,run:((d=(p=m._any)===null||p===void 0?void 0:p.run)===null||d===void 0?void 0:d.slice())||[]});h&&O.run.push(h),c&&(O.preventDefault=!0)};for(let s of i){let l=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let c of l){let p=e[c]||(e[c]=Object.create(null));p._any||(p._any={preventDefault:!1,run:[]});for(let d in p)p[d].run.push(s.any)}let h=s[t]||s.key;if(!!h)for(let c of l)o(c,h,s.run,s.preventDefault),s.shift&&o(c,"Shift-"+h,s.shift,s.preventDefault)}return e}function rf(i,t,e,n){let r=L0(t),o=Ut(r,0),s=ge(o)==r.length&&r!=" ",l="",h=!1;oi&&oi.view==e&&oi.scope==n&&(l=oi.prefix+" ",(h=qc.indexOf(t.keyCode)<0)&&(oi=null));let c=new Set,p=C=>{if(C){for(let O of C.run)if(!c.has(O)&&(c.add(O),O(e,t)))return!0;C.preventDefault&&(h=!0)}return!1},d=i[n],m,v;if(d){if(p(d[l+Sr(r,t,!s)]))return!0;if(s&&(t.shiftKey||t.altKey||t.metaKey||o>127)&&(m=gi[t.keyCode])&&m!=r){if(p(d[l+Sr(m,t,!0)]))return!0;if(t.shiftKey&&(v=Un[t.keyCode])!=r&&v!=m&&p(d[l+Sr(v,t,!1)]))return!0}else if(s&&t.shiftKey&&p(d[l+Sr(r,t,!0)]))return!0;if(p(d._any))return!0}return h}const sf=!J.ios,Ln=K.define({combine(i){return Ve(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})}});function Jm(i={}){return[Ln.of(i),Km,tO]}class of{constructor(t,e,n,r,o){this.left=t,this.top=e,this.width=n,this.height=r,this.className=o}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width>=0&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}}const Km=Xt.fromClass(class{constructor(i){this.view=i,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=i.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=i.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),i.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Ln).cursorBlinkRate+"ms"}update(i){let t=i.startState.facet(Ln)!=i.state.facet(Ln);(t||i.selectionSet||i.geometryChanged||i.viewportChanged)&&this.view.requestMeasure(this.measureReq),i.transactions.some(e=>e.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}readPos(){let{state:i}=this.view,t=i.facet(Ln),e=i.selection.ranges.map(r=>r.empty?[]:eO(this.view,r)).reduce((r,o)=>r.concat(o)),n=[];for(let r of i.selection.ranges){let o=r==i.selection.main;if(r.empty?!o||sf:t.drawRangeCursor){let s=iO(this.view,r,o);s&&n.push(s)}}return{rangePieces:e,cursors:n}}drawSel({rangePieces:i,cursors:t}){if(i.length!=this.rangePieces.length||i.some((e,n)=>!e.eq(this.rangePieces[n]))){this.selectionLayer.textContent="";for(let e of i)this.selectionLayer.appendChild(e.draw());this.rangePieces=i}if(t.length!=this.cursors.length||t.some((e,n)=>!e.eq(this.cursors[n]))){let e=this.cursorLayer.children;if(e.length!==t.length){this.cursorLayer.textContent="";for(const n of t)this.cursorLayer.appendChild(n.draw())}else t.forEach((n,r)=>n.adjust(e[r]));this.cursors=t}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),lf={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};sf&&(lf[".cm-line"].caretColor="transparent !important");const tO=$i.highest(tt.theme(lf));function af(i){let t=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==At.LTR?t.left:t.right-i.scrollDOM.clientWidth)-i.scrollDOM.scrollLeft,top:t.top-i.scrollDOM.scrollTop}}function vh(i,t,e){let n=Y.cursor(t);return{from:Math.max(e.from,i.moveToLineBoundary(n,!1,!0).from),to:Math.min(e.to,i.moveToLineBoundary(n,!0,!0).from),type:Pt.Text}}function Ph(i,t){let e=i.lineBlockAt(t);if(Array.isArray(e.type)){for(let n of e.type)if(n.to>t||n.to==t&&(n.to==e.to||n.type==Pt.Text))return n}return e}function eO(i,t){if(t.to<=i.viewport.from||t.from>=i.viewport.to)return[];let e=Math.max(t.from,i.viewport.from),n=Math.min(t.to,i.viewport.to),r=i.textDirection==At.LTR,o=i.contentDOM,s=o.getBoundingClientRect(),l=af(i),h=window.getComputedStyle(o.firstChild),c=s.left+parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)),p=s.right-parseInt(h.paddingRight),d=Ph(i,e),m=Ph(i,n),v=d.type==Pt.Text?d:null,C=m.type==Pt.Text?m:null;if(i.lineWrapping&&(v&&(v=vh(i,e,v)),C&&(C=vh(i,n,C))),v&&C&&v.from==C.from)return y(P(t.from,t.to,v));{let D=v?P(t.from,null,v):w(d,!1),A=C?P(null,t.to,C):w(m,!0),_=[];return(v||d).to<(C||m).from-1?_.push(O(c,D.bottom,p,A.top)):D.bottom<A.top&&i.elementAtHeight((D.bottom+A.top)/2).type==Pt.Text&&(D.bottom=A.top=(D.bottom+A.top)/2),y(D).concat(_).concat(y(A))}function O(D,A,_,I){return new of(D-l.left,A-l.top-.01,_-D,I-A+.01,"cm-selectionBackground")}function y({top:D,bottom:A,horizontal:_}){let I=[];for(let Q=0;Q<_.length;Q+=2)I.push(O(_[Q],D,_[Q+1],A));return I}function P(D,A,_){let I=1e9,Q=-1e9,U=[];function j(R,B,Z,G,nt){let ht=i.coordsAtPos(R,R==_.to?-2:2),ot=i.coordsAtPos(Z,Z==_.from?2:-2);I=Math.min(ht.top,ot.top,I),Q=Math.max(ht.bottom,ot.bottom,Q),nt==At.LTR?U.push(r&&B?c:ht.left,r&&G?p:ot.right):U.push(!r&&G?c:ot.left,!r&&B?p:ht.right)}let z=D!=null?D:_.from,N=A!=null?A:_.to;for(let R of i.visibleRanges)if(R.to>z&&R.from<N)for(let B=Math.max(R.from,z),Z=Math.min(R.to,N);;){let G=i.state.doc.lineAt(B);for(let nt of i.bidiSpans(G)){let ht=nt.from+G.from,ot=nt.to+G.from;if(ht>=Z)break;ot>B&&j(Math.max(ht,B),D==null&&ht<=z,Math.min(ot,Z),A==null&&ot>=N,nt.dir)}if(B=G.to+1,B>=Z)break}return U.length==0&&j(z,D==null,N,A==null,i.textDirection),{top:I,bottom:Q,horizontal:U}}function w(D,A){let _=s.top+(A?D.top:D.bottom);return{top:_,bottom:_,horizontal:[]}}}function iO(i,t,e){let n=i.coordsAtPos(t.head,t.assoc||1);if(!n)return null;let r=af(i);return new of(n.left-r.left,n.top-r.top,-1,n.bottom-n.top,e?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const hf=st.define({map(i,t){return i==null?null:t.mapPos(i)}}),Qn=Nt.define({create(){return null},update(i,t){return i!=null&&(i=t.changes.mapPos(i)),t.effects.reduce((e,n)=>n.is(hf)?n.value:e,i)}}),nO=Xt.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var t;let e=i.state.field(Qn);e==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(Qn)!=e||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let i=this.view.state.field(Qn),t=i!=null&&this.view.coordsAtPos(i);if(!t)return null;let e=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-e.left+this.view.scrollDOM.scrollLeft,top:t.top-e.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(i){this.cursor&&(i?(this.cursor.style.left=i.left+"px",this.cursor.style.top=i.top+"px",this.cursor.style.height=i.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(Qn)!=i&&this.view.dispatch({effects:hf.of(i)})}},{eventHandlers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function rO(){return[Qn,nO]}function Ch(i,t,e,n,r){t.lastIndex=0;for(let o=i.iterRange(e,n),s=e,l;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;l=t.exec(o.value);)r(s+l.index,l)}function sO(i,t){let e=i.visibleRanges;if(e.length==1&&e[0].from==i.viewport.from&&e[0].to==i.viewport.to)return e;let n=[];for(let{from:r,to:o}of e)r=Math.max(i.state.doc.lineAt(r).from,r-t),o=Math.min(i.state.doc.lineAt(o).to,o+t),n.length&&n[n.length-1].to>=r?n[n.length-1].to=o:n.push({from:r,to:o});return n}class oO{constructor(t){const{regexp:e,decoration:n,decorate:r,boundary:o,maxLength:s=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,r)this.addMatch=(l,h,c,p)=>r(p,c,c+l[0].length,l,h);else if(typeof n=="function")this.addMatch=(l,h,c,p)=>{let d=n(l,h,c);d&&p(c,c+l[0].length,d)};else if(n)this.addMatch=(l,h,c,p)=>p(c,c+l[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(t){let e=new mi,n=e.add.bind(e);for(let{from:r,to:o}of sO(t,this.maxLength))Ch(t.state.doc,this.regexp,r,o,(s,l)=>this.addMatch(l,t,s,n));return e.finish()}updateDeco(t,e){let n=1e9,r=-1;return t.docChanged&&t.changes.iterChanges((o,s,l,h)=>{h>t.view.viewport.from&&l<t.view.viewport.to&&(n=Math.min(l,n),r=Math.max(h,r))}),t.viewportChanged||r-n>1e3?this.createDeco(t.view):r>-1?this.updateRange(t.view,e.map(t.changes),n,r):e}updateRange(t,e,n,r){for(let o of t.visibleRanges){let s=Math.max(o.from,n),l=Math.min(o.to,r);if(l>s){let h=t.state.doc.lineAt(s),c=h.to<l?t.state.doc.lineAt(l):h,p=Math.max(o.from,h.from),d=Math.min(o.to,c.to);if(this.boundary){for(;s>h.from;s--)if(this.boundary.test(h.text[s-1-h.from])){p=s;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){d=l;break}}let m=[],v,C=(O,y,P)=>m.push(P.range(O,y));if(h==c)for(this.regexp.lastIndex=p-h.from;(v=this.regexp.exec(h.text))&&v.index<d-h.from;)this.addMatch(v,t,v.index+h.from,C);else Ch(t.state.doc,this.regexp,p,d,(O,y)=>this.addMatch(y,t,O,C));e=e.update({filterFrom:p,filterTo:d,filter:(O,y)=>O<p||y>d,add:m})}}return e}}const Cl=/x/.unicode!=null?"gu":"g",lO=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Cl),aO={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Po=null;function hO(){var i;if(Po==null&&typeof document<"u"&&document.body){let t=document.body.style;Po=((i=t.tabSize)!==null&&i!==void 0?i:t.MozTabSize)!=null}return Po||!1}const Wr=K.define({combine(i){let t=Ve(i,{render:null,specialChars:lO,addSpecialChars:null});return(t.replaceTabs=!hO())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,Cl)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Cl)),t}});function uO(i={}){return[Wr.of(i),cO()]}let Sh=null;function cO(){return Sh||(Sh=Xt.fromClass(class{constructor(i){this.view=i,this.decorations=et.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(Wr)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new oO({regexp:i.specialChars,decoration:(t,e,n)=>{let{doc:r}=e.state,o=Ut(t[0],0);if(o==9){let s=r.lineAt(n),l=e.state.tabSize,h=lr(s.text,l,n-s.from);return et.replace({widget:new mO((l-h%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=et.replace({widget:new dO(i,o)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let t=i.state.facet(Wr);i.startState.facet(Wr)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const fO="\u2022";function pO(i){return i>=32?fO:i==10?"\u2424":String.fromCharCode(9216+i)}class dO extends ii{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=pO(this.code),n=t.state.phrase("Control character")+" "+(aO[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,e);if(r)return r;let o=document.createElement("span");return o.textContent=e,o.title=n,o.setAttribute("aria-label",n),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class mO extends ii{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function OO(){return yO}const gO=et.line({class:"cm-activeLine"}),yO=Xt.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let t=-1,e=[];for(let n of i.state.selection.ranges){let r=i.lineBlockAt(n.head);r.from>t&&(e.push(gO.range(r.from)),t=r.from)}return et.set(e)}},{decorations:i=>i.decorations}),Sl=2e3;function xO(i,t,e){let n=Math.min(t.line,e.line),r=Math.max(t.line,e.line),o=[];if(t.off>Sl||e.off>Sl||t.col<0||e.col<0){let s=Math.min(t.off,e.off),l=Math.max(t.off,e.off);for(let h=n;h<=r;h++){let c=i.doc.line(h);c.length<=l&&o.push(Y.range(c.from+s,c.to+l))}}else{let s=Math.min(t.col,e.col),l=Math.max(t.col,e.col);for(let h=n;h<=r;h++){let c=i.doc.line(h),p=il(c.text,s,i.tabSize,!0);if(p>-1){let d=il(c.text,l,i.tabSize);o.push(Y.range(c.from+p,c.from+d))}}}return o}function vO(i,t){let e=i.coordsAtPos(i.viewport.from);return e?Math.round(Math.abs((e.left-t)/i.defaultCharacterWidth)):-1}function wh(i,t){let e=i.posAtCoords({x:t.clientX,y:t.clientY},!1),n=i.state.doc.lineAt(e),r=e-n.from,o=r>Sl?-1:r==n.length?vO(i,t.clientX):lr(n.text,i.state.tabSize,e-n.from);return{line:n.number,col:o,off:r}}function PO(i,t){let e=wh(i,t),n=i.state.selection;return e?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(e.line).from),s=r.state.doc.lineAt(o);e={line:s.number,col:e.col,off:Math.min(e.off,s.length)},n=n.map(r.changes)}},get(r,o,s){let l=wh(i,r);if(!l)return n;let h=xO(i.state,e,l);return h.length?s?Y.create(h.concat(n.ranges)):Y.create(h):n}}:null}function CO(i){let t=(i==null?void 0:i.eventFilter)||(e=>e.altKey&&e.button==0);return tt.mouseSelectionStyle.of((e,n)=>t(n)?PO(e,n):null)}const SO={Alt:[18,i=>i.altKey],Control:[17,i=>i.ctrlKey],Shift:[16,i=>i.shiftKey],Meta:[91,i=>i.metaKey]},wO={style:"cursor: crosshair"};function bO(i={}){let[t,e]=SO[i.key||"Alt"],n=Xt.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventHandlers:{keydown(r){this.set(r.keyCode==t||e(r))},keyup(r){(r.keyCode==t||!e(r))&&this.set(!1)}}});return[n,tt.contentAttributes.of(r=>{var o;return!((o=r.plugin(n))===null||o===void 0)&&o.isDown?wO:null})]}const Co="-10000px";class uf{constructor(t,e,n){this.facet=e,this.createTooltipView=n,this.input=t.state.facet(e),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(n)}update(t){let e=t.state.facet(this.facet),n=e.filter(o=>o);if(e===this.input){for(let o of this.tooltipViews)o.update&&o.update(t);return!1}let r=[];for(let o=0;o<n.length;o++){let s=n[o],l=-1;if(!!s){for(let h=0;h<this.tooltips.length;h++){let c=this.tooltips[h];c&&c.create==s.create&&(l=h)}if(l<0)r[o]=this.createTooltipView(s);else{let h=r[o]=this.tooltipViews[l];h.update&&h.update(t)}}}for(let o of this.tooltipViews)r.indexOf(o)<0&&o.dom.remove();return this.input=e,this.tooltips=n,this.tooltipViews=r,!0}}function DO(i){let{win:t}=i;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const So=K.define({combine:i=>{var t,e,n;return{position:J.ios?"absolute":((t=i.find(r=>r.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((e=i.find(r=>r.parent))===null||e===void 0?void 0:e.parent)||null,tooltipSpace:((n=i.find(r=>r.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||DO}}}),cf=Xt.fromClass(class{constructor(i){this.view=i,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=i.state.facet(So);this.position=t.position,this.parent=t.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new uf(i,Ul,e=>this.createTooltip(e)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(i);t&&this.observeIntersection();let e=t||i.geometryChanged,n=i.state.facet(So);if(n.position!=this.position){this.position=n.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;e=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);e=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);e&&this.maybeMeasure()}createTooltip(i){let t=i.create(this.view);if(t.dom.classList.add("cm-tooltip"),i.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=Co,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var i;this.view.win.removeEventListener("resize",this.measureSoon);for(let{dom:t}of this.manager.tooltipViews)t.remove();(i=this.intersectionObserver)===null||i===void 0||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=this.view.dom.getBoundingClientRect();return{editor:i,parent:this.parent?this.container.getBoundingClientRect():i,pos:this.manager.tooltips.map((t,e)=>{let n=this.manager.tooltipViews[e];return n.getCoords?n.getCoords(t.pos):this.view.coordsAtPos(t.pos)}),size:this.manager.tooltipViews.map(({dom:t})=>t.getBoundingClientRect()),space:this.view.state.facet(So).tooltipSpace(this.view)}}writeMeasure(i){let{editor:t,space:e}=i,n=[];for(let r=0;r<this.manager.tooltips.length;r++){let o=this.manager.tooltips[r],s=this.manager.tooltipViews[r],{dom:l}=s,h=i.pos[r],c=i.size[r];if(!h||h.bottom<=Math.max(t.top,e.top)||h.top>=Math.min(t.bottom,e.bottom)||h.right<Math.max(t.left,e.left)-.1||h.left>Math.min(t.right,e.right)+.1){l.style.top=Co;continue}let p=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,d=p?7:0,m=c.right-c.left,v=c.bottom-c.top,C=s.offset||AO,O=this.view.textDirection==At.LTR,y=c.width>e.right-e.left?O?e.left:e.right-c.width:O?Math.min(h.left-(p?14:0)+C.x,e.right-m):Math.max(e.left,h.left-m+(p?14:0)-C.x),P=!!o.above;!o.strictSide&&(P?h.top-(c.bottom-c.top)-C.y<e.top:h.bottom+(c.bottom-c.top)+C.y>e.bottom)&&P==e.bottom-h.bottom>h.top-e.top&&(P=!P);let w=P?h.top-v-d-C.y:h.bottom+d+C.y,D=y+m;if(s.overlap!==!0)for(let A of n)A.left<D&&A.right>y&&A.top<w+v&&A.bottom>w&&(w=P?A.top-v-2-d:A.bottom+d+2);this.position=="absolute"?(l.style.top=w-i.parent.top+"px",l.style.left=y-i.parent.left+"px"):(l.style.top=w+"px",l.style.left=y+"px"),p&&(p.style.left=`${h.left+(O?C.x:-C.x)-(y+14-7)}px`),s.overlap!==!0&&n.push({left:y,top:w,right:D,bottom:w+v}),l.classList.toggle("cm-tooltip-above",P),l.classList.toggle("cm-tooltip-below",!P),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=Co}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),TO=tt.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),AO={x:0,y:0},Ul=K.define({enables:[cf,TO]}),rs=K.define();class Gl{constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new uf(t,rs,e=>this.createHostedView(e))}static create(t){return new Gl(t)}createHostedView(t){let e=t.create(this.view);return e.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(e.dom),this.mounted&&e.mount&&e.mount(this.view),e}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned()}update(t){this.manager.update(t)}}const EO=Ul.compute([rs],i=>{let t=i.facet(rs).filter(e=>e);return t.length===0?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.filter(e=>e.end!=null).map(e=>e.end)),create:Gl.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class kO{constructor(t,e,n,r,o){this.view=t,this.source=e,this.field=n,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:t}=this,e=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(e==null)return;let n=this.view.coordsAtPos(e);if(n==null||t.y<n.top||t.y>n.bottom||t.x<n.left-this.view.defaultCharacterWidth||t.x>n.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(e)).find(l=>l.from<=e&&l.to>=e),o=r&&r.dir==At.RTL?-1:1,s=this.source(this.view,e,t.x<n.left?-o:o);if(s!=null&&s.then){let l=this.pending={pos:e};s.then(h=>{this.pending==l&&(this.pending=null,h&&this.view.dispatch({effects:this.setHover.of(h)}))},h=>ve(this.view.state,h,"hover tooltip"))}else s&&this.view.dispatch({effects:this.setHover.of(s)})}mousemove(t){var e;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!_O(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,o=(e=n==null?void 0:n.end)!==null&&e!==void 0?e:r;(r==o?this.view.posAtCoords(this.lastMove)!=r:!IO(this.view,r,o,t.clientX,t.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function _O(i){for(let t=i;t;t=t.parentNode)if(t.nodeType==1&&t.classList.contains("cm-tooltip"))return!0;return!1}function IO(i,t,e,n,r,o){let s=document.createRange(),l=i.domAtPos(t),h=i.domAtPos(e);s.setEnd(h.node,h.offset),s.setStart(l.node,l.offset);let c=s.getClientRects();s.detach();for(let p=0;p<c.length;p++){let d=c[p];if(Math.max(d.top-r,r-d.bottom,d.left-n,n-d.right)<=o)return!0}return!1}function LO(i,t={}){let e=st.define(),n=Nt.define({create(){return null},update(r,o){if(r&&(t.hideOnChange&&(o.docChanged||o.selection)||t.hideOn&&t.hideOn(o,r)))return null;if(r&&o.docChanged){let s=o.changes.mapPos(r.pos,-1,Vt.TrackDel);if(s==null)return null;let l=Object.assign(Object.create(null),r);l.pos=s,r.end!=null&&(l.end=o.changes.mapPos(r.end)),r=l}for(let s of o.effects)s.is(e)&&(r=s.value),s.is(XO)&&(r=null);return r},provide:r=>rs.from(r)});return[n,Xt.define(r=>new kO(r,i,n,e,t.hoverTime||300)),EO]}function QO(i,t){let e=i.plugin(cf);if(!e)return null;let n=e.manager.tooltips.indexOf(t);return n<0?null:e.manager.tooltipViews[n]}const XO=st.define(),bh=K.define({combine(i){let t,e;for(let n of i)t=t||n.topContainer,e=e||n.bottomContainer;return{topContainer:t,bottomContainer:e}}});function Jn(i,t){let e=i.plugin(ff),n=e?e.specs.indexOf(t):-1;return n>-1?e.panels[n]:null}const ff=Xt.fromClass(class{constructor(i){this.input=i.state.facet(Kn),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(e=>e(i));let t=i.state.facet(bh);this.top=new wr(i,!0,t.topContainer),this.bottom=new wr(i,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(i){let t=i.state.facet(bh);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new wr(i.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new wr(i.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let e=i.state.facet(Kn);if(e!=this.input){let n=e.filter(h=>h),r=[],o=[],s=[],l=[];for(let h of n){let c=this.specs.indexOf(h),p;c<0?(p=h(i.view),l.push(p)):(p=this.panels[c],p.update&&p.update(i)),r.push(p),(p.top?o:s).push(p)}this.specs=n,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let h of l)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let n of this.panels)n.update&&n.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>tt.scrollMargins.of(t=>{let e=t.plugin(i);return e&&{top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()}})});class wr{constructor(t,e,n){this.view=t,this.top=e,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=Dh(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=Dh(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function Dh(i){let t=i.nextSibling;return i.remove(),t}const Kn=K.define({enables:ff});class ei extends Li{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}ei.prototype.elementClass="";ei.prototype.toDOM=void 0;ei.prototype.mapMode=Vt.TrackBefore;ei.prototype.startSide=ei.prototype.endSide=-1;ei.prototype.point=!0;const Zr=K.define(),FO={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>gt.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Bn=K.define();function $O(i){return[pf(),Bn.of(Object.assign(Object.assign({},FO),i))]}const wl=K.define({combine:i=>i.some(t=>t)});function pf(i){let t=[BO];return i&&i.fixed===!1&&t.push(wl.of(!0)),t}const BO=Xt.fromClass(class{constructor(i){this.view=i,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=i.state.facet(Bn).map(t=>new Ah(i,t));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!i.state.facet(wl),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}update(i){if(this.updateGutters(i)){let t=this.prevViewport,e=i.view.viewport,n=Math.min(t.to,e.to)-Math.max(t.from,e.from);this.syncGutters(n<(e.to-e.from)*.8)}i.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(wl)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=i.view.viewport}syncGutters(i){let t=this.dom.nextSibling;i&&this.dom.remove();let e=gt.iter(this.view.state.facet(Zr),this.view.viewport.from),n=[],r=this.gutters.map(o=>new NO(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks){let s;if(Array.isArray(o.type)){for(let l of o.type)if(l.type==Pt.Text){s=l;break}}else s=o.type==Pt.Text?o:void 0;if(!!s){n.length&&(n=[]),df(e,n,o.from);for(let l of r)l.line(this.view,s,n)}}for(let o of r)o.finish();i&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(i){let t=i.startState.facet(Bn),e=i.state.facet(Bn),n=i.docChanged||i.heightChanged||i.viewportChanged||!gt.eq(i.startState.facet(Zr),i.state.facet(Zr),i.view.viewport.from,i.view.viewport.to);if(t==e)for(let r of this.gutters)r.update(i)&&(n=!0);else{n=!0;let r=[];for(let o of e){let s=t.indexOf(o);s<0?r.push(new Ah(this.view,o)):(this.gutters[s].update(i),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)this.dom.appendChild(o.dom);this.gutters=r}return n}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove()}},{provide:i=>tt.scrollMargins.of(t=>{let e=t.plugin(i);return!e||e.gutters.length==0||!e.fixed?null:t.textDirection==At.LTR?{left:e.dom.offsetWidth}:{right:e.dom.offsetWidth}})});function Th(i){return Array.isArray(i)?i:[i]}function df(i,t,e){for(;i.value&&i.from<=e;)i.from==e&&t.push(i.value),i.next()}class NO{constructor(t,e,n){this.gutter=t,this.height=n,this.localMarkers=[],this.i=0,this.cursor=gt.iter(t.markers,e.from)}line(t,e,n){this.localMarkers.length&&(this.localMarkers=[]),df(this.cursor,this.localMarkers,e.from);let r=n.length?this.localMarkers.concat(n):this.localMarkers,o=this.gutter.config.lineMarker(t,e,r);o&&r.unshift(o);let s=this.gutter;if(r.length==0&&!s.config.renderEmptyElements)return;let l=e.top-this.height;if(this.i==s.elements.length){let h=new mf(t,e.height,l,r);s.elements.push(h),s.dom.appendChild(h.dom)}else s.elements[this.i].update(t,e.height,l,r);this.height=e.bottom,this.i++}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class Ah{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in e.domEventHandlers)this.dom.addEventListener(n,r=>{let o=t.lineBlockAtHeight(r.clientY-t.documentTop);e.domEventHandlers[n](t,o,r)&&r.preventDefault()});this.markers=Th(e.markers(t)),e.initialSpacer&&(this.spacer=new mf(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=Th(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],t);r!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[r])}let n=t.view.viewport;return!gt.eq(this.markers,e,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class mf{constructor(t,e,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,n,r)}update(t,e,n,r){this.height!=e&&(this.dom.style.height=(this.height=e)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),MO(this.markers,r)||this.setMarkers(t,r)}setMarkers(t,e){let n="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let l=s,h=o<e.length?e[o++]:null,c=!1;if(h){let p=h.elementClass;p&&(n+=" "+p);for(let d=s;d<this.markers.length;d++)if(this.markers[d].compare(h)){l=d,c=!0;break}}else l=this.markers.length;for(;s<l;){let p=this.markers[s++];if(p.toDOM){p.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!h)break;h.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(h.toDOM(t),r)),c&&s++}this.dom.className=n,this.markers=e}destroy(){this.setMarkers(null,[])}}function MO(i,t){if(i.length!=t.length)return!1;for(let e=0;e<i.length;e++)if(!i[e].compare(t[e]))return!1;return!0}const RO=K.define(),Gi=K.define({combine(i){return Ve(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let n=Object.assign({},t);for(let r in e){let o=n[r],s=e[r];n[r]=o?(l,h,c)=>o(l,h,c)||s(l,h,c):s}return n}})}});class wo extends ei{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function bo(i,t){return i.state.facet(Gi).formatNumber(t,i.state)}const YO=Bn.compute([Gi],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(RO)},lineMarker(t,e,n){return n.some(r=>r.toDOM)?null:new wo(bo(t,t.state.doc.lineAt(e.from).number))},lineMarkerChange:t=>t.startState.facet(Gi)!=t.state.facet(Gi),initialSpacer(t){return new wo(bo(t,Eh(t.state.doc.lines)))},updateSpacer(t,e){let n=bo(e.view,Eh(e.view.state.doc.lines));return n==t.number?t:new wo(n)},domEventHandlers:i.facet(Gi).domEventHandlers}));function WO(i={}){return[Gi.of(i),pf(),YO]}function Eh(i){let t=9;for(;t<i;)t=t*10+9;return t}const ZO=new class extends ei{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},jO=Zr.compute(["selection"],i=>{let t=[],e=-1;for(let n of i.selection.ranges){let r=i.doc.lineAt(n.head).from;r>e&&(e=r,t.push(ZO.range(r)))}return gt.of(t)});function qO(){return jO}const Of=1024;let zO=0;class Do{constructor(t,e){this.from=t,this.to=e}}class ft{constructor(t={}){this.id=zO++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=pe.match(t)),e=>{let n=t(e);return n===void 0?null:[this,n]}}}ft.closedBy=new ft({deserialize:i=>i.split(" ")});ft.openedBy=new ft({deserialize:i=>i.split(" ")});ft.group=new ft({deserialize:i=>i.split(" ")});ft.contextHash=new ft({perNode:!0});ft.lookAhead=new ft({perNode:!0});ft.mounted=new ft({perNode:!0});const UO=Object.create(null);class pe{constructor(t,e,n,r=0){this.name=t,this.props=e,this.id=n,this.flags=r}static define(t){let e=t.props&&t.props.length?Object.create(null):UO,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),r=new pe(t.name||"",e,t.id,n);if(t.props){for(let o of t.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[o[0].id]=o[1]}}return r}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let e=this.prop(ft.group);return e?e.indexOf(t)>-1:!1}return this.id==t}static match(t){let e=Object.create(null);for(let n in t)for(let r of n.split(" "))e[r]=t[n];return n=>{for(let r=n.prop(ft.group),o=-1;o<(r?r.length:0);o++){let s=e[o<0?n.name:r[o]];if(s)return s}}}}pe.none=new pe("",Object.create(null),0,8);class Vl{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let n of this.types){let r=null;for(let o of t){let s=o(n);s&&(r||(r=Object.assign({},n.props)),r[s[0].id]=s[1])}e.push(r?new pe(n.name,r,n.id,n.flags):n)}return new Vl(e)}}const br=new WeakMap,kh=new WeakMap;var jt;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(jt||(jt={}));class Lt{constructor(t,e,n,r,o){if(this.type=t,this.children=e,this.positions=n,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,l]of o)this.props[typeof s=="number"?s:s.id]=l}}toString(){let t=this.prop(ft.mounted);if(t&&!t.overlay)return t.tree.toString();let e="";for(let n of this.children){let r=n.toString();r&&(e&&(e+=","),e+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new ls(this.topNode,t)}cursorAt(t,e=0,n=0){let r=br.get(this)||this.topNode,o=new ls(r);return o.moveTo(t,e),br.set(this,o._tree),o}get topNode(){return new Xe(this,0,0,null)}resolve(t,e=0){let n=un(br.get(this)||this.topNode,t,e,!1);return br.set(this,n),n}resolveInner(t,e=0){let n=un(kh.get(this)||this.topNode,t,e,!0);return kh.set(this,n),n}iterate(t){let{enter:e,leave:n,from:r=0,to:o=this.length}=t;for(let s=this.cursor((t.mode||0)|jt.IncludeAnonymous);;){let l=!1;if(s.from<=o&&s.to>=r&&(s.type.isAnonymous||e(s)!==!1)){if(s.firstChild())continue;l=!0}for(;l&&n&&!s.type.isAnonymous&&n(s),!s.nextSibling();){if(!s.parent())return;l=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:Kl(pe.none,this.children,this.positions,0,this.children.length,0,this.length,(e,n,r)=>new Lt(this.type,e,n,r,this.propValues),t.makeTree||((e,n,r)=>new Lt(pe.none,e,n,r)))}static build(t){return VO(t)}}Lt.empty=new Lt(pe.none,[],[],0);class Hl{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Hl(this.buffer,this.index)}}class Ni{constructor(t,e,n){this.buffer=t,this.length=e,this.set=n}get type(){return pe.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],n=this.buffer[t+3],r=this.set.types[e],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),t+=4,n==t)return o;let s=[];for(;t<n;)s.push(this.childString(t)),t=this.buffer[t+3];return o+"("+s.join(",")+")"}findChild(t,e,n,r,o){let{buffer:s}=this,l=-1;for(let h=t;h!=e&&!(gf(o,r,s[h+1],s[h+2])&&(l=h,n>0));h=s[h+3]);return l}slice(t,e,n,r){let o=this.buffer,s=new Uint16Array(e-t);for(let l=t,h=0;l<e;)s[h++]=o[l++],s[h++]=o[l++]-n,s[h++]=o[l++]-n,s[h++]=o[l++]-t;return new Ni(s,r-n,this.set)}}function gf(i,t,e,n){switch(i){case-2:return e<t;case-1:return n>=t&&e<t;case 0:return e<t&&n>t;case 1:return e<=t&&n>t;case 2:return n>t;case 4:return!0}}function yf(i,t){let e=i.childBefore(t);for(;e;){let n=e.lastChild;if(!n||n.to!=e.to)break;n.type.isError&&n.from==n.to?(i=e,e=n.prevSibling):e=n}return i}function un(i,t,e,n){for(var r;i.from==i.to||(e<1?i.from>=t:i.from>t)||(e>-1?i.to<=t:i.to<t);){let s=!n&&i instanceof Xe&&i.index<0?null:i.parent;if(!s)return i;i=s}let o=n?0:jt.IgnoreOverlays;if(n)for(let s=i,l=s.parent;l;s=l,l=s.parent)s instanceof Xe&&s.index<0&&((r=l.enter(t,e,o))===null||r===void 0?void 0:r.from)!=s.from&&(i=l);for(;;){let s=i.enter(t,e,o);if(!s)return i;i=s}}class Xe{constructor(t,e,n,r){this._tree=t,this.from=e,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,n,r,o=0){for(let s=this;;){for(let{children:l,positions:h}=s._tree,c=e>0?l.length:-1;t!=c;t+=e){let p=l[t],d=h[t]+s.from;if(!!gf(r,n,d,d+p.length)){if(p instanceof Ni){if(o&jt.ExcludeBuffers)continue;let m=p.findChild(0,p.buffer.length,e,n-d,r);if(m>-1)return new je(new GO(s,p,t,d),null,m)}else if(o&jt.IncludeAnonymous||!p.type.isAnonymous||Jl(p)){let m;if(!(o&jt.IgnoreMounts)&&p.props&&(m=p.prop(ft.mounted))&&!m.overlay)return new Xe(m.tree,d,t,s);let v=new Xe(p,d,t,s);return o&jt.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(e<0?p.children.length-1:0,e,n,r)}}}if(o&jt.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?t=s.index+e:t=e<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,n=0){let r;if(!(n&jt.IgnoreOverlays)&&(r=this._tree.prop(ft.mounted))&&r.overlay){let o=t-this.from;for(let{from:s,to:l}of r.overlay)if((e>0?s<=o:s<o)&&(e<0?l>=o:l>o))return new Xe(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,n)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(t=0){return new ls(this,t)}get tree(){return this._tree}toTree(){return this._tree}resolve(t,e=0){return un(this,t,e,!1)}resolveInner(t,e=0){return un(this,t,e,!0)}enterUnfinishedNodesBefore(t){return yf(this,t)}getChild(t,e=null,n=null){let r=ss(this,t,e,n);return r.length?r[0]:null}getChildren(t,e=null,n=null){return ss(this,t,e,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return os(this,t)}}function ss(i,t,e,n){let r=i.cursor(),o=[];if(!r.firstChild())return o;if(e!=null){for(;!r.type.is(e);)if(!r.nextSibling())return o}for(;;){if(n!=null&&r.type.is(n))return o;if(r.type.is(t)&&o.push(r.node),!r.nextSibling())return n==null?o:[]}}function os(i,t,e=t.length-1){for(let n=i.parent;e>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(t[e]&&t[e]!=n.name)return!1;e--}}return!0}class GO{constructor(t,e,n,r){this.parent=t,this.buffer=e,this.index=n,this.start=r}}class je{constructor(t,e,n){this.context=t,this._parent=e,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(t,e,n){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.context.start,n);return o<0?null:new je(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,n=0){if(n&jt.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return o<0?null:new je(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new je(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new je(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}cursor(t=0){return new ls(this,t)}get tree(){return null}toTree(){let t=[],e=[],{buffer:n}=this.context,r=this.index+4,o=n.buffer[this.index+3];if(o>r){let s=n.buffer[this.index+1],l=n.buffer[this.index+2];t.push(n.slice(r,o,s,l)),e.push(0)}return new Lt(this.type,t,e,this.to-this.from)}resolve(t,e=0){return un(this,t,e,!1)}resolveInner(t,e=0){return un(this,t,e,!0)}enterUnfinishedNodesBefore(t){return yf(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t,e=null,n=null){let r=ss(this,t,e,n);return r.length?r[0]:null}getChildren(t,e=null,n=null){return ss(this,t,e,n)}get node(){return this}matchContext(t){return os(this,t)}}class ls{constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Xe)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let n=t._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=t,this.yieldBuf(t.index)}}get name(){return this.type.name}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,e){this.index=t;let{start:n,buffer:r}=this.buffer;return this.type=e||r.set.types[r.buffer[t]],this.from=n+r.buffer[t+1],this.to=n+r.buffer[t+2],!0}yield(t){return t?t instanceof Xe?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,n,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.buffer.start,n);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,n=this.mode){return this.buffer?n&jt.ExcludeBuffers?!1:this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&jt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&jt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:e}=this.buffer,n=this.stack.length-1;if(t<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(e.findChild(r,this.index,-1,0,4))}else{let r=e.buffer[this.index+3];if(r<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,n,{buffer:r}=this;if(r){if(t>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:e,parent:n}=r)}else({index:e,_parent:n}=this._tree);for(;n;{index:e,_parent:n}=n)if(e>-1)for(let o=e+t,s=t<0?-1:n._tree.children.length;o!=s;o+=t){let l=n._tree.children[o];if(this.mode&jt.IncludeAnonymous||l instanceof Ni||!l.type.isAnonymous||Jl(l))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer){t:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=t;s;s=s._parent)if(s.index==r){if(r==this.index)return s;e=s,n=o+1;break t}r=this.stack[--o]}}for(let r=n;r<this.stack.length;r++)e=new je(this.buffer,e,this.stack[r]);return this.bufferNode=new je(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let n=0;;){let r=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&e&&e(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(t){if(!this.buffer)return os(this.node,t);let{buffer:e}=this.buffer,{types:n}=e.set;for(let r=t.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return os(this.node,t,r);let s=n[e.buffer[this.stack[o]]];if(!s.isAnonymous){if(t[r]&&t[r]!=s.name)return!1;r--}}return!0}}function Jl(i){return i.children.some(t=>t instanceof Ni||!t.type.isAnonymous||Jl(t))}function VO(i){var t;let{buffer:e,nodeSet:n,maxBufferLength:r=Of,reused:o=[],minRepeatType:s=n.types.length}=i,l=Array.isArray(e)?new Hl(e,e.length):e,h=n.types,c=0,p=0;function d(A,_,I,Q,U){let{id:j,start:z,end:N,size:R}=l,B=p;for(;R<0;)if(l.next(),R==-1){let ot=o[j];I.push(ot),Q.push(z-A);return}else if(R==-3){c=j;return}else if(R==-4){p=j;return}else throw new RangeError(`Unrecognized record size: ${R}`);let Z=h[j],G,nt,ht=z-A;if(N-z<=r&&(nt=O(l.pos-_,U))){let ot=new Uint16Array(nt.size-nt.skip),pt=l.pos-nt.size,Ot=ot.length;for(;l.pos>pt;)Ot=y(nt.start,ot,Ot);G=new Ni(ot,N-nt.start,n),ht=nt.start-A}else{let ot=l.pos-R;l.next();let pt=[],Ot=[],yt=j>=s?j:-1,Dt=0,Ct=N;for(;l.pos>ot;)yt>=0&&l.id==yt&&l.size>=0?(l.end<=Ct-r&&(v(pt,Ot,z,Dt,l.end,Ct,yt,B),Dt=pt.length,Ct=l.end),l.next()):d(z,ot,pt,Ot,yt);if(yt>=0&&Dt>0&&Dt<pt.length&&v(pt,Ot,z,Dt,z,Ct,yt,B),pt.reverse(),Ot.reverse(),yt>-1&&Dt>0){let Mt=m(Z);G=Kl(Z,pt,Ot,0,pt.length,0,N-z,Mt,Mt)}else G=C(Z,pt,Ot,N-z,B-N)}I.push(G),Q.push(ht)}function m(A){return(_,I,Q)=>{let U=0,j=_.length-1,z,N;if(j>=0&&(z=_[j])instanceof Lt){if(!j&&z.type==A&&z.length==Q)return z;(N=z.prop(ft.lookAhead))&&(U=I[j]+z.length+N)}return C(A,_,I,Q,U)}}function v(A,_,I,Q,U,j,z,N){let R=[],B=[];for(;A.length>Q;)R.push(A.pop()),B.push(_.pop()+I-U);A.push(C(n.types[z],R,B,j-U,N-j)),_.push(U-I)}function C(A,_,I,Q,U=0,j){if(c){let z=[ft.contextHash,c];j=j?[z].concat(j):[z]}if(U>25){let z=[ft.lookAhead,U];j=j?[z].concat(j):[z]}return new Lt(A,_,I,Q,j)}function O(A,_){let I=l.fork(),Q=0,U=0,j=0,z=I.end-r,N={size:0,start:0,skip:0};t:for(let R=I.pos-A;I.pos>R;){let B=I.size;if(I.id==_&&B>=0){N.size=Q,N.start=U,N.skip=j,j+=4,Q+=4,I.next();continue}let Z=I.pos-B;if(B<0||Z<R||I.start<z)break;let G=I.id>=s?4:0,nt=I.start;for(I.next();I.pos>Z;){if(I.size<0)if(I.size==-3)G+=4;else break t;else I.id>=s&&(G+=4);I.next()}U=nt,Q+=B,j+=G}return(_<0||Q==A)&&(N.size=Q,N.start=U,N.skip=j),N.size>4?N:void 0}function y(A,_,I){let{id:Q,start:U,end:j,size:z}=l;if(l.next(),z>=0&&Q<s){let N=I;if(z>4){let R=l.pos-(z-4);for(;l.pos>R;)I=y(A,_,I)}_[--I]=N,_[--I]=j-A,_[--I]=U-A,_[--I]=Q}else z==-3?c=Q:z==-4&&(p=Q);return I}let P=[],w=[];for(;l.pos>0;)d(i.start||0,i.bufferStart||0,P,w,-1);let D=(t=i.length)!==null&&t!==void 0?t:P.length?w[0]+P[0].length:0;return new Lt(h[i.topID],P.reverse(),w.reverse(),D)}const _h=new WeakMap;function jr(i,t){if(!i.isAnonymous||t instanceof Ni||t.type!=i)return 1;let e=_h.get(t);if(e==null){e=1;for(let n of t.children){if(n.type!=i||!(n instanceof Lt)){e=1;break}e+=jr(i,n)}_h.set(t,e)}return e}function Kl(i,t,e,n,r,o,s,l,h){let c=0;for(let C=n;C<r;C++)c+=jr(i,t[C]);let p=Math.ceil(c*1.5/8),d=[],m=[];function v(C,O,y,P,w){for(let D=y;D<P;){let A=D,_=O[D],I=jr(i,C[D]);for(D++;D<P;D++){let Q=jr(i,C[D]);if(I+Q>=p)break;I+=Q}if(D==A+1){if(I>p){let Q=C[A];v(Q.children,Q.positions,0,Q.children.length,O[A]+w);continue}d.push(C[A])}else{let Q=O[D-1]+C[D-1].length-_;d.push(Kl(i,C,O,A,D,_,Q,null,h))}m.push(_+w-o)}}return v(t,e,n,r,0),(l||h)(d,m,s)}class HO{constructor(){this.map=new WeakMap}setBuffer(t,e,n){let r=this.map.get(t);r||this.map.set(t,r=new Map),r.set(e,n)}getBuffer(t,e){let n=this.map.get(t);return n&&n.get(e)}set(t,e){t instanceof je?this.setBuffer(t.context.buffer,t.index,e):t instanceof Xe&&this.map.set(t.tree,e)}get(t){return t instanceof je?this.getBuffer(t.context.buffer,t.index):t instanceof Xe?this.map.get(t.tree):void 0}cursorSet(t,e){t.buffer?this.setBuffer(t.buffer.buffer,t.index,e):this.map.set(t.tree,e)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class ki{constructor(t,e,n,r,o=!1,s=!1){this.from=t,this.to=e,this.tree=n,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,e=[],n=!1){let r=[new ki(0,t.length,t,0,!1,n)];for(let o of e)o.to>t.length&&r.push(o);return r}static applyChanges(t,e,n=128){if(!e.length)return t;let r=[],o=1,s=t.length?t[0]:null;for(let l=0,h=0,c=0;;l++){let p=l<e.length?e[l]:null,d=p?p.fromA:1e9;if(d-h>=n)for(;s&&s.from<d;){let m=s;if(h>=m.from||d<=m.to||c){let v=Math.max(m.from,h)-c,C=Math.min(m.to,d)-c;m=v>=C?null:new ki(v,C,m.tree,m.offset+c,l>0,!!p)}if(m&&r.push(m),s.to>d)break;s=o<t.length?t[o++]:null}if(!p)break;h=p.toA,c=p.toA-p.toB}return r}}class xf{startParse(t,e,n){return typeof t=="string"&&(t=new JO(t)),n=n?n.length?n.map(r=>new Do(r.from,r.to)):[new Do(0,0)]:[new Do(0,t.length)],this.createParse(t,e||[],n)}parse(t,e,n){let r=this.startParse(t,e,n);for(;;){let o=r.advance();if(o)return o}}}class JO{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new ft({perNode:!0});let KO=0;class We{constructor(t,e,n){this.set=t,this.base=e,this.modified=n,this.id=KO++}static define(t){if(t!=null&&t.base)throw new Error("Can not derive from a modified tag");let e=new We([],null,[]);if(e.set.push(e),t)for(let n of t.set)e.set.push(n);return e}static defineModifier(){let t=new as;return e=>e.modified.indexOf(t)>-1?e:as.get(e.base||e,e.modified.concat(t).sort((n,r)=>n.id-r.id))}}let tg=0;class as{constructor(){this.instances=[],this.id=tg++}static get(t,e){if(!e.length)return t;let n=e[0].instances.find(l=>l.base==t&&eg(e,l.modified));if(n)return n;let r=[],o=new We(r,t,e);for(let l of e)l.instances.push(o);let s=vf(e);for(let l of t.set)for(let h of s)r.push(as.get(l,h));return o}}function eg(i,t){return i.length==t.length&&i.every((e,n)=>e==t[n])}function vf(i){let t=[i];for(let e=0;e<i.length;e++)for(let n of vf(i.slice(0,e).concat(i.slice(e+1))))t.push(n);return t}function Pf(i){let t=Object.create(null);for(let e in i){let n=i[e];Array.isArray(n)||(n=[n]);for(let r of e.split(" "))if(r){let o=[],s=2,l=r;for(let d=0;;){if(l=="..."&&d>0&&d+3==r.length){s=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!m)throw new RangeError("Invalid path: "+r);if(o.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),d+=m[0].length,d==r.length)break;let v=r[d++];if(d==r.length&&v=="!"){s=0;break}if(v!="/")throw new RangeError("Invalid path: "+r);l=r.slice(d)}let h=o.length-1,c=o[h];if(!c)throw new RangeError("Invalid path: "+r);let p=new hs(n,s,h>0?o.slice(0,h):null);t[c]=p.sort(t[c])}}return Cf.add(t)}const Cf=new ft;class hs{constructor(t,e,n,r){this.tags=t,this.mode=e,this.context=n,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}hs.empty=new hs([],2,null);function Sf(i,t){let e=Object.create(null);for(let o of i)if(!Array.isArray(o.tag))e[o.tag.id]=o.class;else for(let s of o.tag)e[s.id]=o.class;let{scope:n,all:r=null}=t||{};return{style:o=>{let s=r;for(let l of o)for(let h of l.set){let c=e[h.id];if(c){s=s?s+" "+c:c;break}}return s},scope:n}}function ig(i,t){let e=null;for(let n of i){let r=n.style(t);r&&(e=e?e+" "+r:r)}return e}function ng(i,t,e,n=0,r=i.length){let o=new rg(n,Array.isArray(t)?t:[t],e);o.highlightRange(i.cursor(),n,r,"",o.highlighters),o.flush(r)}class rg{constructor(t,e,n){this.at=t,this.highlighters=e,this.span=n,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,n,r,o){let{type:s,from:l,to:h}=t;if(l>=n||h<=e)return;s.isTop&&(o=this.highlighters.filter(v=>!v.scope||v.scope(s)));let c=r,p=sg(t)||hs.empty,d=ig(o,p.tags);if(d&&(c&&(c+=" "),c+=d,p.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(t.from,c),p.opaque)return;let m=t.tree&&t.tree.prop(ft.mounted);if(m&&m.overlay){let v=t.node.enter(m.overlay[0].from+l,1),C=this.highlighters.filter(y=>!y.scope||y.scope(m.tree.type)),O=t.firstChild();for(let y=0,P=l;;y++){let w=y<m.overlay.length?m.overlay[y]:null,D=w?w.from+l:h,A=Math.max(e,P),_=Math.min(n,D);if(A<_&&O)for(;t.from<_&&(this.highlightRange(t,A,_,r,o),this.startSpan(Math.min(n,t.to),c),!(t.to>=D||!t.nextSibling())););if(!w||D>n)break;P=w.to+l,P>e&&(this.highlightRange(v.cursor(),Math.max(e,w.from+l),Math.min(n,P),r,C),this.startSpan(P,c))}O&&t.parent()}else if(t.firstChild()){do if(!(t.to<=e)){if(t.from>=n)break;this.highlightRange(t,e,n,r,o),this.startSpan(Math.min(n,t.to),c)}while(t.nextSibling());t.parent()}}}function sg(i){let t=i.type.prop(Cf);for(;t&&t.context&&!i.matchContext(t.context);)t=t.next;return t||null}const H=We.define,Dr=H(),ni=H(),Ih=H(ni),Lh=H(ni),ri=H(),Tr=H(ri),To=H(ri),Ye=H(),Si=H(Ye),Me=H(),Re=H(),bl=H(),bn=H(bl),Ar=H(),$={comment:Dr,lineComment:H(Dr),blockComment:H(Dr),docComment:H(Dr),name:ni,variableName:H(ni),typeName:Ih,tagName:H(Ih),propertyName:Lh,attributeName:H(Lh),className:H(ni),labelName:H(ni),namespace:H(ni),macroName:H(ni),literal:ri,string:Tr,docString:H(Tr),character:H(Tr),attributeValue:H(Tr),number:To,integer:H(To),float:H(To),bool:H(ri),regexp:H(ri),escape:H(ri),color:H(ri),url:H(ri),keyword:Me,self:H(Me),null:H(Me),atom:H(Me),unit:H(Me),modifier:H(Me),operatorKeyword:H(Me),controlKeyword:H(Me),definitionKeyword:H(Me),moduleKeyword:H(Me),operator:Re,derefOperator:H(Re),arithmeticOperator:H(Re),logicOperator:H(Re),bitwiseOperator:H(Re),compareOperator:H(Re),updateOperator:H(Re),definitionOperator:H(Re),typeOperator:H(Re),controlOperator:H(Re),punctuation:bl,separator:H(bl),bracket:bn,angleBracket:H(bn),squareBracket:H(bn),paren:H(bn),brace:H(bn),content:Ye,heading:Si,heading1:H(Si),heading2:H(Si),heading3:H(Si),heading4:H(Si),heading5:H(Si),heading6:H(Si),contentSeparator:H(Ye),list:H(Ye),quote:H(Ye),emphasis:H(Ye),strong:H(Ye),link:H(Ye),monospace:H(Ye),strikethrough:H(Ye),inserted:H(),deleted:H(),changed:H(),invalid:H(),meta:Ar,documentMeta:H(Ar),annotation:H(Ar),processingInstruction:H(Ar),definition:We.defineModifier(),constant:We.defineModifier(),function:We.defineModifier(),standard:We.defineModifier(),local:We.defineModifier(),special:We.defineModifier()};Sf([{tag:$.link,class:"tok-link"},{tag:$.heading,class:"tok-heading"},{tag:$.emphasis,class:"tok-emphasis"},{tag:$.strong,class:"tok-strong"},{tag:$.keyword,class:"tok-keyword"},{tag:$.atom,class:"tok-atom"},{tag:$.bool,class:"tok-bool"},{tag:$.url,class:"tok-url"},{tag:$.labelName,class:"tok-labelName"},{tag:$.inserted,class:"tok-inserted"},{tag:$.deleted,class:"tok-deleted"},{tag:$.literal,class:"tok-literal"},{tag:$.string,class:"tok-string"},{tag:$.number,class:"tok-number"},{tag:[$.regexp,$.escape,$.special($.string)],class:"tok-string2"},{tag:$.variableName,class:"tok-variableName"},{tag:$.local($.variableName),class:"tok-variableName tok-local"},{tag:$.definition($.variableName),class:"tok-variableName tok-definition"},{tag:$.special($.variableName),class:"tok-variableName2"},{tag:$.definition($.propertyName),class:"tok-propertyName tok-definition"},{tag:$.typeName,class:"tok-typeName"},{tag:$.namespace,class:"tok-namespace"},{tag:$.className,class:"tok-className"},{tag:$.macroName,class:"tok-macroName"},{tag:$.propertyName,class:"tok-propertyName"},{tag:$.operator,class:"tok-operator"},{tag:$.comment,class:"tok-comment"},{tag:$.meta,class:"tok-meta"},{tag:$.invalid,class:"tok-invalid"},{tag:$.punctuation,class:"tok-punctuation"}]);var Ao;const tr=new ft;function og(i){return K.define({combine:i?t=>t.concat(i):void 0})}class De{constructor(t,e,n=[]){this.data=t,dt.prototype.hasOwnProperty("tree")||Object.defineProperty(dt.prototype,"tree",{get(){return kt(this)}}),this.parser=e,this.extension=[xi.of(this),dt.languageData.of((r,o,s)=>r.facet(Qh(r,o,s)))].concat(n)}isActiveAt(t,e,n=-1){return Qh(t,e,n)==this.data}findRegions(t){let e=t.facet(xi);if((e==null?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let n=[],r=(o,s)=>{if(o.prop(tr)==this.data){n.push({from:s,to:s+o.length});return}let l=o.prop(ft.mounted);if(l){if(l.tree.prop(tr)==this.data){if(l.overlay)for(let h of l.overlay)n.push({from:h.from+s,to:h.to+s});else n.push({from:s,to:s+o.length});return}else if(l.overlay){let h=n.length;if(r(l.tree,l.overlay[0].from+s),n.length>h)return}}for(let h=0;h<o.children.length;h++){let c=o.children[h];c instanceof Lt&&r(c,o.positions[h]+s)}};return r(kt(t),0),n}get allowsNesting(){return!0}}De.setState=st.define();function Qh(i,t,e){let n=i.facet(xi);if(!n)return null;let r=n.data;if(n.allowsNesting)for(let o=kt(i).topNode;o;o=o.enter(t,e,jt.ExcludeBuffers))r=o.type.prop(tr)||r;return r}class us extends De{constructor(t,e){super(t,e),this.parser=e}static define(t){let e=og(t.languageData);return new us(e,t.parser.configure({props:[tr.add(n=>n.isTop?e:void 0)]}))}configure(t){return new us(this.data,this.parser.configure(t))}get allowsNesting(){return this.parser.hasWrappers()}}function kt(i){let t=i.field(De.state,!1);return t?t.tree:Lt.empty}function wf(i,t,e=50){var n;let r=(n=i.field(De.state,!1))===null||n===void 0?void 0:n.context;return r&&(r.isDone(t)||r.work(e,t))?r.tree:null}class lg{constructor(t,e=t.length){this.doc=t,this.length=e,this.cursorPos=0,this.string="",this.cursor=t.iter()}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)}}let Dn=null;class cs{constructor(t,e,n=[],r,o,s,l,h){this.parser=t,this.state=e,this.fragments=n,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=l,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(t,e,n){return new cs(t,e,[],Lt.empty,0,n,[],null)}startParse(){return this.parser.startParse(new lg(this.state.doc),this.fragments)}work(t,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=Lt.empty&&this.isDone(e!=null?e:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof t=="number"){let r=Date.now()+t;t=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(ki.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(e!=null?e:this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(ki.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=Dn;Dn=this;try{return t()}finally{Dn=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=Xh(t,e.from,e.to);return t}changes(t,e){let{fragments:n,tree:r,treeLen:o,viewport:s,skipped:l}=this;if(this.takeTree(),!t.empty){let h=[];if(t.iterChangedRanges((c,p,d,m)=>h.push({fromA:c,toA:p,fromB:d,toB:m})),n=ki.applyChanges(n,h),r=Lt.empty,o=0,s={from:t.mapPos(s.from,-1),to:t.mapPos(s.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let p=t.mapPos(c.from,1),d=t.mapPos(c.to,-1);p<d&&l.push({from:p,to:d})}}}return new cs(this.parser,e,n,r,o,s,l,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:o}=this.skipped[n];r<t.to&&o>t.from&&(this.fragments=Xh(this.fragments,r,o),this.skipped.splice(n--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends xf{createParse(e,n,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let h=Dn;if(h){for(let c of r)h.tempSkipped.push(c);t&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,t]):t)}return this.parsedPos=s,new Lt(pe.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&e[0].from==0&&e[0].to>=t}static get(){return Dn}}function Xh(i,t,e){return ki.applyChanges(i,[{fromA:t,toA:e,fromB:t,toB:e}])}class cn{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),n=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,n)||e.takeTree(),new cn(e)}static init(t){let e=Math.min(3e3,t.doc.length),n=cs.create(t.facet(xi).parser,t,{from:0,to:e});return n.work(20,e)||n.takeTree(),new cn(n)}}De.state=Nt.define({create:cn.init,update(i,t){for(let e of t.effects)if(e.is(De.setState))return e.value;return t.startState.facet(xi)!=t.state.facet(xi)?cn.init(t.state):i.apply(t)}});let bf=i=>{let t=setTimeout(()=>i(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(bf=i=>{let t=-1,e=setTimeout(()=>{t=requestIdleCallback(i,{timeout:500-100})},100);return()=>t<0?clearTimeout(e):cancelIdleCallback(t)});const Eo=typeof navigator<"u"&&((Ao=navigator.scheduling)===null||Ao===void 0?void 0:Ao.isInputPending)?()=>navigator.scheduling.isInputPending():null,ag=Xt.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(De.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),t.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(De.state);(e.tree!=e.context.tree||!e.context.isDone(t.doc.length))&&(this.working=bf(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,o=n.field(De.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,t&&!Eo?Math.max(25,t.timeRemaining()-5):1e9),l=o.context.treeLen<r&&n.doc.length>r+1e3,h=o.context.work(()=>Eo&&Eo()||Date.now()>s,r+(l?0:1e5));this.chunkBudget-=Date.now()-e,(h||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:De.setState.of(new cn(o.context))})),this.chunkBudget>0&&!(h&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(e=>ve(this.view.state,e)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),xi=K.define({combine(i){return i.length?i[0]:null},enables:[De.state,ag]});class hg{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}}const ug=K.define(),ur=K.define({combine:i=>{if(!i.length)return"  ";if(!/^(?: +|\t+)$/.test(i[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return i[0]}});function fs(i){let t=i.facet(ur);return t.charCodeAt(0)==9?i.tabSize*t.length:t.length}function er(i,t){let e="",n=i.tabSize;if(i.facet(ur).charCodeAt(0)==9)for(;t>=n;)e+="	",t-=n;for(let r=0;r<t;r++)e+=" ";return e}function ta(i,t){i instanceof dt&&(i=new Ls(i));for(let n of i.state.facet(ug)){let r=n(i,t);if(r!=null)return r}let e=kt(i.state);return e?cg(i,e,t):null}class Ls{constructor(t,e={}){this.state=t,this.options=e,this.unit=fs(t)}lineAt(t,e=1){let n=this.state.doc.lineAt(t),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=n.from&&r<=n.to?o&&r==t?{text:"",from:t}:(e<0?r<t:r<=t)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(t,e);return n.slice(t-r,Math.min(n.length,t+100-r))}column(t,e=1){let{text:n,from:r}=this.lineAt(t,e),o=this.countColumn(n,t-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(n,n.search(/\S|$/))),o}countColumn(t,e=t.length){return lr(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:n,from:r}=this.lineAt(t,e),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Df=new ft;function cg(i,t,e){return Tf(t.resolveInner(e).enterUnfinishedNodesBefore(e),e,i)}function fg(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function pg(i){let t=i.type.prop(Df);if(t)return t;let e=i.firstChild,n;if(e&&(n=e.type.prop(ft.closedBy))){let r=i.lastChild,o=r&&n.indexOf(r.name)>-1;return s=>Af(s,!0,1,void 0,o&&!fg(s)?r.from:void 0)}return i.parent==null?dg:null}function Tf(i,t,e){for(;i;i=i.parent){let n=pg(i);if(n)return n(ea.create(e,t,i))}return null}function dg(){return 0}class ea extends Ls{constructor(t,e,n){super(t.state,t.options),this.base=t,this.pos=e,this.node=n}static create(t,e,n){return new ea(t,e,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let t=this.state.doc.lineAt(this.node.from);for(;;){let e=this.node.resolve(t.from);for(;e.parent&&e.parent.from==e.from;)e=e.parent;if(mg(e,this.node))break;t=this.state.doc.lineAt(e.from)}return this.lineIndent(t.from)}continue(){let t=this.node.parent;return t?Tf(t,this.pos,this.base):0}}function mg(i,t){for(let e=t;e;e=e.parent)if(i==e)return!0;return!1}function Og(i){let t=i.node,e=t.childAfter(t.from),n=t.lastChild;if(!e)return null;let r=i.options.simulateBreak,o=i.state.doc.lineAt(e.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let l=e.to;;){let h=t.childAfter(l);if(!h||h==n)return null;if(!h.type.isSkipped)return h.from<s?e:null;l=h.to}}function gg({closing:i,align:t=!0,units:e=1}){return n=>Af(n,t,e,i)}function Af(i,t,e,n,r){let o=i.textAfter,s=o.match(/^\s*/)[0].length,l=n&&o.slice(s,s+n.length)==n||r==i.pos+s,h=t?Og(i):null;return h?l?i.column(h.from):i.column(h.to):i.baseIndent+(l?0:i.unit*e)}const yg=i=>i.baseIndent;function ko({except:i,units:t=1}={}){return e=>{let n=i&&i.test(e.textAfter);return e.baseIndent+(n?0:t*e.unit)}}const xg=200;function vg(){return dt.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let t=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!t.length)return i;let e=i.newDoc,{head:n}=i.newSelection.main,r=e.lineAt(n);if(n>r.from+xg)return i;let o=e.sliceString(r.from,n);if(!t.some(c=>c.test(o)))return i;let{state:s}=i,l=-1,h=[];for(let{head:c}of s.selection.ranges){let p=s.doc.lineAt(c);if(p.from==l)continue;l=p.from;let d=ta(s,p.from);if(d==null)continue;let m=/^\s*/.exec(p.text)[0],v=er(s,d);m!=v&&h.push({from:p.from,to:p.from+m.length,insert:v})}return h.length?[i,{changes:h,sequential:!0}]:i})}const Pg=K.define(),Ef=new ft;function Cg(i){let t=i.firstChild,e=i.lastChild;return t&&t.to<e.from?{from:t.to,to:e.type.isError?i.to:e.from}:null}function Sg(i,t,e){let n=kt(i);if(n.length<e)return null;let r=n.resolveInner(e),o=null;for(let s=r;s;s=s.parent){if(s.to<=e||s.from>e)continue;if(o&&s.from<t)break;let l=s.type.prop(Ef);if(l&&(s.to<n.length-50||n.length==i.doc.length||!wg(s))){let h=l(s,i);h&&h.from<=e&&h.from>=t&&h.to>e&&(o=h)}}return o}function wg(i){let t=i.lastChild;return t&&t.to==i.to&&t.type.isError}function ps(i,t,e){for(let n of i.facet(Pg)){let r=n(i,t,e);if(r)return r}return Sg(i,t,e)}function kf(i,t){let e=t.mapPos(i.from,1),n=t.mapPos(i.to,-1);return e>=n?void 0:{from:e,to:n}}const Qs=st.define({map:kf}),cr=st.define({map:kf});function _f(i){let t=[];for(let{head:e}of i.state.selection.ranges)t.some(n=>n.from<=e&&n.to>=e)||t.push(i.lineBlockAt(e));return t}const Xi=Nt.define({create(){return et.none},update(i,t){i=i.map(t.changes);for(let e of t.effects)e.is(Qs)&&!bg(i,e.value.from,e.value.to)?i=i.update({add:[Fh.range(e.value.from,e.value.to)]}):e.is(cr)&&(i=i.update({filter:(n,r)=>e.value.from!=n||e.value.to!=r,filterFrom:e.value.from,filterTo:e.value.to}));if(t.selection){let e=!1,{head:n}=t.selection.main;i.between(n,n,(r,o)=>{r<n&&o>n&&(e=!0)}),e&&(i=i.update({filterFrom:n,filterTo:n,filter:(r,o)=>o<=n||r>=n}))}return i},provide:i=>tt.decorations.from(i),toJSON(i,t){let e=[];return i.between(0,t.doc.length,(n,r)=>{e.push(n,r)}),e},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let e=0;e<i.length;){let n=i[e++],r=i[e++];if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");t.push(Fh.range(n,r))}return et.set(t,!0)}});function ds(i,t,e){var n;let r=null;return(n=i.field(Xi,!1))===null||n===void 0||n.between(t,e,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function bg(i,t,e){let n=!1;return i.between(t,t,(r,o)=>{r==t&&o==e&&(n=!0)}),n}function If(i,t){return i.field(Xi,!1)?t:t.concat(st.appendConfig.of(Xf()))}const Dg=i=>{for(let t of _f(i)){let e=ps(i.state,t.from,t.to);if(e)return i.dispatch({effects:If(i.state,[Qs.of(e),Lf(i,e)])}),!0}return!1},Tg=i=>{if(!i.state.field(Xi,!1))return!1;let t=[];for(let e of _f(i)){let n=ds(i.state,e.from,e.to);n&&t.push(cr.of(n),Lf(i,n,!1))}return t.length&&i.dispatch({effects:t}),t.length>0};function Lf(i,t,e=!0){let n=i.state.doc.lineAt(t.from).number,r=i.state.doc.lineAt(t.to).number;return tt.announce.of(`${i.state.phrase(e?"Folded lines":"Unfolded lines")} ${n} ${i.state.phrase("to")} ${r}.`)}const Ag=i=>{let{state:t}=i,e=[];for(let n=0;n<t.doc.length;){let r=i.lineBlockAt(n),o=ps(t,r.from,r.to);o&&e.push(Qs.of(o)),n=(o?i.lineBlockAt(o.to):r).to+1}return e.length&&i.dispatch({effects:If(i.state,e)}),!!e.length},Eg=i=>{let t=i.state.field(Xi,!1);if(!t||!t.size)return!1;let e=[];return t.between(0,i.state.doc.length,(n,r)=>{e.push(cr.of({from:n,to:r}))}),i.dispatch({effects:e}),!0},kg=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Dg},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Tg},{key:"Ctrl-Alt-[",run:Ag},{key:"Ctrl-Alt-]",run:Eg}],_g={placeholderDOM:null,placeholderText:"\u2026"},Qf=K.define({combine(i){return Ve(i,_g)}});function Xf(i){let t=[Xi,Qg];return i&&t.push(Qf.of(i)),t}const Fh=et.replace({widget:new class extends ii{toDOM(i){let{state:t}=i,e=t.facet(Qf),n=o=>{let s=i.lineBlockAt(i.posAtDOM(o.target)),l=ds(i.state,s.from,s.to);l&&i.dispatch({effects:cr.of(l)}),o.preventDefault()};if(e.placeholderDOM)return e.placeholderDOM(i,n);let r=document.createElement("span");return r.textContent=e.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}}}),Ig={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class _o extends ei{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function Lg(i={}){let t=Object.assign(Object.assign({},Ig),i),e=new _o(t,!0),n=new _o(t,!1),r=Xt.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(xi)!=s.state.facet(xi)||s.startState.field(Xi,!1)!=s.state.field(Xi,!1)||kt(s.startState)!=kt(s.state)||t.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let l=new mi;for(let h of s.viewportLineBlocks){let c=ds(s.state,h.from,h.to)?n:ps(s.state,h.from,h.to)?e:null;c&&l.add(h.from,h.from,c)}return l.finish()}}),{domEventHandlers:o}=t;return[r,$O({class:"cm-foldGutter",markers(s){var l;return((l=s.plugin(r))===null||l===void 0?void 0:l.markers)||gt.empty},initialSpacer(){return new _o(t,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,l,h)=>{if(o.click&&o.click(s,l,h))return!0;let c=ds(s.state,l.from,l.to);if(c)return s.dispatch({effects:cr.of(c)}),!0;let p=ps(s.state,l.from,l.to);return p?(s.dispatch({effects:Qs.of(p)}),!0):!1}})}),Xf()]}const Qg=tt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Xs{constructor(t,e){let n;function r(l){let h=Oi.newName();return(n||(n=Object.create(null)))["."+h]=l,h}const o=typeof e.all=="string"?e.all:e.all?r(e.all):void 0,s=e.scope;this.scope=s instanceof De?l=>l.prop(tr)==s.data:s?l=>l==s:void 0,this.style=Sf(t.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=n?new Oi(n):null,this.themeType=e.themeType}static define(t,e){return new Xs(t,e||{})}}const Dl=K.define(),Ff=K.define({combine(i){return i.length?[i[0]]:null}});function Io(i){let t=i.facet(Dl);return t.length?t:i.facet(Ff)}function Xg(i,t){let e=[$g],n;return i instanceof Xs&&(i.module&&e.push(tt.styleModule.of(i.module)),n=i.themeType),t!=null&&t.fallback?e.push(Ff.of(i)):n?e.push(Dl.computeN([tt.darkTheme],r=>r.facet(tt.darkTheme)==(n=="dark")?[i]:[])):e.push(Dl.of(i)),e}class Fg{constructor(t){this.markCache=Object.create(null),this.tree=kt(t.state),this.decorations=this.buildDeco(t,Io(t.state))}update(t){let e=kt(t.state),n=Io(t.state),r=n!=Io(t.startState);e.length<t.view.viewport.to&&!r&&e.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(e!=this.tree||t.viewportChanged||r)&&(this.tree=e,this.decorations=this.buildDeco(t.view,n))}buildDeco(t,e){if(!e||!this.tree.length)return et.none;let n=new mi;for(let{from:r,to:o}of t.visibleRanges)ng(this.tree,e,(s,l,h)=>{n.add(s,l,this.markCache[h]||(this.markCache[h]=et.mark({class:h})))},r,o);return n.finish()}}const $g=$i.high(Xt.fromClass(Fg,{decorations:i=>i.decorations})),Bg=Xs.define([{tag:$.meta,color:"#7a757a"},{tag:$.link,textDecoration:"underline"},{tag:$.heading,textDecoration:"underline",fontWeight:"bold"},{tag:$.emphasis,fontStyle:"italic"},{tag:$.strong,fontWeight:"bold"},{tag:$.strikethrough,textDecoration:"line-through"},{tag:$.keyword,color:"#708"},{tag:[$.atom,$.bool,$.url,$.contentSeparator,$.labelName],color:"#219"},{tag:[$.literal,$.inserted],color:"#164"},{tag:[$.string,$.deleted],color:"#a11"},{tag:[$.regexp,$.escape,$.special($.string)],color:"#e40"},{tag:$.definition($.variableName),color:"#00f"},{tag:$.local($.variableName),color:"#30a"},{tag:[$.typeName,$.namespace],color:"#085"},{tag:$.className,color:"#167"},{tag:[$.special($.variableName),$.macroName],color:"#256"},{tag:$.definition($.propertyName),color:"#00c"},{tag:$.comment,color:"#940"},{tag:$.invalid,color:"#f00"}]),Ng=tt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),$f=1e4,Bf="()[]{}",Nf=K.define({combine(i){return Ve(i,{afterCursor:!0,brackets:Bf,maxScanDistance:$f,renderMatch:Yg})}}),Mg=et.mark({class:"cm-matchingBracket"}),Rg=et.mark({class:"cm-nonmatchingBracket"});function Yg(i){let t=[],e=i.matched?Mg:Rg;return t.push(e.range(i.start.from,i.start.to)),i.end&&t.push(e.range(i.end.from,i.end.to)),t}const Wg=Nt.define({create(){return et.none},update(i,t){if(!t.docChanged&&!t.selection)return i;let e=[],n=t.state.facet(Nf);for(let r of t.state.selection.ranges){if(!r.empty)continue;let o=qe(t.state,r.head,-1,n)||r.head>0&&qe(t.state,r.head-1,1,n)||n.afterCursor&&(qe(t.state,r.head,1,n)||r.head<t.state.doc.length&&qe(t.state,r.head+1,-1,n));o&&(e=e.concat(n.renderMatch(o,t.state)))}return et.set(e,!0)},provide:i=>tt.decorations.from(i)}),Zg=[Wg,Ng];function jg(i={}){return[Nf.of(i),Zg]}function Tl(i,t,e){let n=i.prop(t<0?ft.openedBy:ft.closedBy);if(n)return n;if(i.name.length==1){let r=e.indexOf(i.name);if(r>-1&&r%2==(t<0?1:0))return[e[r+t]]}return null}function qe(i,t,e,n={}){let r=n.maxScanDistance||$f,o=n.brackets||Bf,s=kt(i),l=s.resolveInner(t,e);for(let h=l;h;h=h.parent){let c=Tl(h.type,e,o);if(c&&h.from<h.to)return qg(i,t,e,h,c,o)}return zg(i,t,e,s,l.type,r,o)}function qg(i,t,e,n,r,o){let s=n.parent,l={from:n.from,to:n.to},h=0,c=s==null?void 0:s.cursor();if(c&&(e<0?c.childBefore(n.from):c.childAfter(n.to)))do if(e<0?c.to<=n.from:c.from>=n.to){if(h==0&&r.indexOf(c.type.name)>-1&&c.from<c.to)return{start:l,end:{from:c.from,to:c.to},matched:!0};if(Tl(c.type,e,o))h++;else if(Tl(c.type,-e,o)){if(h==0)return{start:l,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};h--}}while(e<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function zg(i,t,e,n,r,o,s){let l=e<0?i.sliceDoc(t-1,t):i.sliceDoc(t,t+1),h=s.indexOf(l);if(h<0||h%2==0!=e>0)return null;let c={from:e<0?t-1:t,to:e>0?t+1:t},p=i.doc.iterRange(t,e>0?i.doc.length:0),d=0;for(let m=0;!p.next().done&&m<=o;){let v=p.value;e<0&&(m+=v.length);let C=t+m*e;for(let O=e>0?0:v.length-1,y=e>0?v.length:-1;O!=y;O+=e){let P=s.indexOf(v[O]);if(!(P<0||n.resolveInner(C+O,1).type!=r))if(P%2==0==e>0)d++;else{if(d==1)return{start:c,end:{from:C+O,to:C+O+1},matched:P>>1==h>>1};d--}}e>0&&(m+=v.length)}return p.done?{start:c,matched:!1}:null}const Ug=Object.create(null),$h=[pe.none],Bh=[],Gg=Object.create(null);for(let[i,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Gg[i]=Vg(Ug,t);function Lo(i,t){Bh.indexOf(i)>-1||(Bh.push(i),console.warn(t))}function Vg(i,t){let e=null;for(let o of t.split(".")){let s=i[o]||$[o];s?typeof s=="function"?e?e=s(e):Lo(o,`Modifier ${o} used at start of tag`):e?Lo(o,`Tag ${o} used as modifier`):e=s:Lo(o,`Unknown highlighting tag ${o}`)}if(!e)return 0;let n=t.replace(/ /g,"_"),r=pe.define({id:$h.length,name:n,props:[Pf({[n]:e})]});return $h.push(r),r.id}const Hg=i=>{let t=na(i.state);return t.line?Jg(i):t.block?ty(i):!1};function ia(i,t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=i(t,e);return r?(n(e.update(r)),!0):!1}}const Jg=ia(ny,0),Kg=ia(Mf,0),ty=ia((i,t)=>Mf(i,t,iy(t)),0);function na(i,t=i.selection.main.head){let e=i.languageDataAt("commentTokens",t);return e.length?e[0]:{}}const Tn=50;function ey(i,{open:t,close:e},n,r){let o=i.sliceDoc(n-Tn,n),s=i.sliceDoc(r,r+Tn),l=/\s*$/.exec(o)[0].length,h=/^\s*/.exec(s)[0].length,c=o.length-l;if(o.slice(c-t.length,c)==t&&s.slice(h,h+e.length)==e)return{open:{pos:n-l,margin:l&&1},close:{pos:r+h,margin:h&&1}};let p,d;r-n<=2*Tn?p=d=i.sliceDoc(n,r):(p=i.sliceDoc(n,n+Tn),d=i.sliceDoc(r-Tn,r));let m=/^\s*/.exec(p)[0].length,v=/\s*$/.exec(d)[0].length,C=d.length-v-e.length;return p.slice(m,m+t.length)==t&&d.slice(C,C+e.length)==e?{open:{pos:n+m+t.length,margin:/\s/.test(p.charAt(m+t.length))?1:0},close:{pos:r-v-e.length,margin:/\s/.test(d.charAt(C-1))?1:0}}:null}function iy(i){let t=[];for(let e of i.selection.ranges){let n=i.doc.lineAt(e.from),r=e.to<=n.to?n:i.doc.lineAt(e.to),o=t.length-1;o>=0&&t[o].to>n.from?t[o].to=r.to:t.push({from:n.from,to:r.to})}return t}function Mf(i,t,e=t.selection.ranges){let n=e.map(o=>na(t,o.from).block);if(!n.every(o=>o))return null;let r=e.map((o,s)=>ey(t,n[s],o.from,o.to));if(i!=2&&!r.every(o=>o))return{changes:t.changes(e.map((o,s)=>r[s]?[]:[{from:o.from,insert:n[s].open+" "},{from:o.to,insert:" "+n[s].close}]))};if(i!=1&&r.some(o=>o)){let o=[];for(let s=0,l;s<r.length;s++)if(l=r[s]){let h=n[s],{open:c,close:p}=l;o.push({from:c.pos-h.open.length,to:c.pos+c.margin},{from:p.pos-p.margin,to:p.pos+h.close.length})}return{changes:o}}return null}function ny(i,t,e=t.selection.ranges){let n=[],r=-1;for(let{from:o,to:s}of e){let l=n.length,h=1e9;for(let c=o;c<=s;){let p=t.doc.lineAt(c);if(p.from>r&&(o==s||s>p.from)){r=p.from;let d=na(t,c).line;if(!d)continue;let m=/^\s*/.exec(p.text)[0].length,v=m==p.length,C=p.text.slice(m,m+d.length)==d?m:-1;m<p.text.length&&m<h&&(h=m),n.push({line:p,comment:C,token:d,indent:m,empty:v,single:!1})}c=p.to+1}if(h<1e9)for(let c=l;c<n.length;c++)n[c].indent<n[c].line.text.length&&(n[c].indent=h);n.length==l+1&&(n[l].single=!0)}if(i!=2&&n.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:h,indent:c,empty:p,single:d}of n)(d||!p)&&o.push({from:l.from+c,insert:h+" "});let s=t.changes(o);return{changes:s,selection:t.selection.map(s,1)}}else if(i!=1&&n.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:l,token:h}of n)if(l>=0){let c=s.from+l,p=c+h.length;s.text[p-s.from]==" "&&p++,o.push({from:c,to:p})}return{changes:o}}return null}const Al=Bi.define(),ry=Bi.define(),sy=K.define(),Rf=K.define({combine(i){return Ve(i,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function oy(i){let t=0;return i.iterChangedRanges((e,n)=>t=n),t}const Yf=Nt.define({create(){return ze.empty},update(i,t){let e=t.state.facet(Rf),n=t.annotation(Al);if(n){let h=t.docChanged?Y.single(oy(t.changes)):void 0,c=ce.fromTransaction(t,h),p=n.side,d=p==0?i.undone:i.done;return c?d=ms(d,d.length,e.minDepth,c):d=jf(d,t.startState.selection),new ze(p==0?n.rest:d,p==0?d:n.rest)}let r=t.annotation(ry);if((r=="full"||r=="before")&&(i=i.isolate()),t.annotation(Bt.addToHistory)===!1)return t.changes.empty?i:i.addMapping(t.changes.desc);let o=ce.fromTransaction(t),s=t.annotation(Bt.time),l=t.annotation(Bt.userEvent);return o?i=i.addChanges(o,s,l,e.newGroupDelay,e.minDepth):t.selection&&(i=i.addSelection(t.startState.selection,s,l,e.newGroupDelay)),(r=="full"||r=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(t=>t.toJSON()),undone:i.undone.map(t=>t.toJSON())}},fromJSON(i){return new ze(i.done.map(ce.fromJSON),i.undone.map(ce.fromJSON))}});function ly(i={}){return[Yf,Rf.of(i),tt.domEventHandlers({beforeinput(t,e){let n=t.inputType=="historyUndo"?Wf:t.inputType=="historyRedo"?El:null;return n?(t.preventDefault(),n(e)):!1}})]}function Fs(i,t){return function({state:e,dispatch:n}){if(!t&&e.readOnly)return!1;let r=e.field(Yf,!1);if(!r)return!1;let o=r.pop(i,e,t);return o?(n(o),!0):!1}}const Wf=Fs(0,!1),El=Fs(1,!1),ay=Fs(0,!0),hy=Fs(1,!0);class ce{constructor(t,e,n,r,o){this.changes=t,this.effects=e,this.mapped=n,this.startSelection=r,this.selectionsAfter=o}setSelAfter(t){return new ce(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,n;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(e=this.mapped)===null||e===void 0?void 0:e.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(t){return new ce(t.changes&&$t.fromJSON(t.changes),[],t.mapped&&Ue.fromJSON(t.mapped),t.startSelection&&Y.fromJSON(t.startSelection),t.selectionsAfter.map(Y.fromJSON))}static fromTransaction(t,e){let n=Te;for(let r of t.startState.facet(sy)){let o=r(t);o.length&&(n=n.concat(o))}return!n.length&&t.changes.empty?null:new ce(t.changes.invert(t.startState.doc),n,void 0,e||t.startState.selection,Te)}static selection(t){return new ce(void 0,Te,void 0,void 0,t)}}function ms(i,t,e,n){let r=t+1>e+20?t-e-1:0,o=i.slice(r,t);return o.push(n),o}function uy(i,t){let e=[],n=!1;return i.iterChangedRanges((r,o)=>e.push(r,o)),t.iterChangedRanges((r,o,s,l)=>{for(let h=0;h<e.length;){let c=e[h++],p=e[h++];l>=c&&s<=p&&(n=!0)}}),n}function cy(i,t){return i.ranges.length==t.ranges.length&&i.ranges.filter((e,n)=>e.empty!=t.ranges[n].empty).length===0}function Zf(i,t){return i.length?t.length?i.concat(t):i:t}const Te=[],fy=200;function jf(i,t){if(i.length){let e=i[i.length-1],n=e.selectionsAfter.slice(Math.max(0,e.selectionsAfter.length-fy));return n.length&&n[n.length-1].eq(t)?i:(n.push(t),ms(i,i.length-1,1e9,e.setSelAfter(n)))}else return[ce.selection([t])]}function py(i){let t=i[i.length-1],e=i.slice();return e[i.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),e}function Qo(i,t){if(!i.length)return i;let e=i.length,n=Te;for(;e;){let r=dy(i[e-1],t,n);if(r.changes&&!r.changes.empty||r.effects.length){let o=i.slice(0,e);return o[e-1]=r,o}else t=r.mapped,e--,n=r.selectionsAfter}return n.length?[ce.selection(n)]:Te}function dy(i,t,e){let n=Zf(i.selectionsAfter.length?i.selectionsAfter.map(l=>l.map(t)):Te,e);if(!i.changes)return ce.selection(n);let r=i.changes.map(t),o=t.mapDesc(i.changes,!0),s=i.mapped?i.mapped.composeDesc(o):o;return new ce(r,st.mapEffects(i.effects,t),s,i.startSelection.map(o),n)}const my=/^(input\.type|delete)($|\.)/;class ze{constructor(t,e,n=0,r=void 0){this.done=t,this.undone=e,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new ze(this.done,this.undone):this}addChanges(t,e,n,r,o){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&t.changes&&(!n||my.test(n))&&(!l.selectionsAfter.length&&e-this.prevTime<r&&uy(l.changes,t.changes)||n=="input.type.compose")?s=ms(s,s.length-1,o,new ce(t.changes.compose(l.changes),Zf(t.effects,l.effects),l.mapped,l.startSelection,Te)):s=ms(s,s.length,o,t),new ze(s,Te,e,n)}addSelection(t,e,n,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Te;return o.length>0&&e-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&cy(o[o.length-1],t)?this:new ze(jf(this.done,t),this.undone,e,n)}addMapping(t){return new ze(Qo(this.done,t),Qo(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,n){let r=t==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1];if(n&&o.selectionsAfter.length)return e.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Al.of({side:t,rest:py(r)}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let s=r.length==1?Te:r.slice(0,r.length-1);return o.mapped&&(s=Qo(s,o.mapped)),e.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Al.of({side:t,rest:s}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}ze.empty=new ze(Te,Te);const Oy=[{key:"Mod-z",run:Wf,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:El,preventDefault:!0},{linux:"Ctrl-Shift-z",run:El,preventDefault:!0},{key:"Mod-u",run:ay,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:hy,preventDefault:!0}];function dn(i,t){return Y.create(i.ranges.map(t),i.mainIndex)}function He(i,t){return i.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Fe({state:i,dispatch:t},e){let n=dn(i.selection,e);return n.eq(i.selection)?!1:(t(He(i,n)),!0)}function $s(i,t){return Y.cursor(t?i.to:i.from)}function qf(i,t){return Fe(i,e=>e.empty?i.moveByChar(e,t):$s(e,t))}function ee(i){return i.textDirectionAt(i.state.selection.main.head)==At.LTR}const zf=i=>qf(i,!ee(i)),Uf=i=>qf(i,ee(i));function Gf(i,t){return Fe(i,e=>e.empty?i.moveByGroup(e,t):$s(e,t))}const gy=i=>Gf(i,!ee(i)),yy=i=>Gf(i,ee(i));function xy(i,t,e){if(t.type.prop(e))return!0;let n=t.to-t.from;return n&&(n>2||/[^\s,.;:]/.test(i.sliceDoc(t.from,t.to)))||t.firstChild}function Bs(i,t,e){let n=kt(i).resolveInner(t.head),r=e?ft.closedBy:ft.openedBy;for(let h=t.head;;){let c=e?n.childAfter(h):n.childBefore(h);if(!c)break;xy(i,c,r)?n=c:h=e?c.to:c.from}let o=n.type.prop(r),s,l;return o&&(s=e?qe(i,n.from,1):qe(i,n.to,-1))&&s.matched?l=e?s.end.to:s.end.from:l=e?n.to:n.from,Y.cursor(l,e?-1:1)}const vy=i=>Fe(i,t=>Bs(i.state,t,!ee(i))),Py=i=>Fe(i,t=>Bs(i.state,t,ee(i)));function Vf(i,t){return Fe(i,e=>{if(!e.empty)return $s(e,t);let n=i.moveVertically(e,t);return n.head!=e.head?n:i.moveToLineBoundary(e,t)})}const Hf=i=>Vf(i,!1),Jf=i=>Vf(i,!0);function Kf(i){return Math.max(i.defaultLineHeight,Math.min(i.dom.clientHeight,innerHeight)-5)}function tp(i,t){let{state:e}=i,n=dn(e.selection,l=>l.empty?i.moveVertically(l,t,Kf(i)):$s(l,t));if(n.eq(e.selection))return!1;let r=i.coordsAtPos(e.selection.main.head),o=i.scrollDOM.getBoundingClientRect(),s;return r&&r.top>o.top&&r.bottom<o.bottom&&r.top-o.top<=i.scrollDOM.scrollHeight-i.scrollDOM.scrollTop-i.scrollDOM.clientHeight&&(s=tt.scrollIntoView(n.main.head,{y:"start",yMargin:r.top-o.top})),i.dispatch(He(e,n),{effects:s}),!0}const Nh=i=>tp(i,!1),kl=i=>tp(i,!0);function vi(i,t,e){let n=i.lineBlockAt(t.head),r=i.moveToLineBoundary(t,e);if(r.head==t.head&&r.head!=(e?n.to:n.from)&&(r=i.moveToLineBoundary(t,e,!1)),!e&&r.head==n.from&&n.length){let o=/^\s*/.exec(i.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;o&&t.head!=n.from+o&&(r=Y.cursor(n.from+o))}return r}const Cy=i=>Fe(i,t=>vi(i,t,!0)),Sy=i=>Fe(i,t=>vi(i,t,!1)),wy=i=>Fe(i,t=>vi(i,t,!ee(i))),by=i=>Fe(i,t=>vi(i,t,ee(i))),Dy=i=>Fe(i,t=>Y.cursor(i.lineBlockAt(t.head).from,1)),Ty=i=>Fe(i,t=>Y.cursor(i.lineBlockAt(t.head).to,-1));function Ay(i,t,e){let n=!1,r=dn(i.selection,o=>{let s=qe(i,o.head,-1)||qe(i,o.head,1)||o.head>0&&qe(i,o.head-1,1)||o.head<i.doc.length&&qe(i,o.head+1,-1);if(!s||!s.end)return o;n=!0;let l=s.start.from==o.head?s.end.to:s.end.from;return e?Y.range(o.anchor,l):Y.cursor(l)});return n?(t(He(i,r)),!0):!1}const Ey=({state:i,dispatch:t})=>Ay(i,t,!1);function Ee(i,t){let e=dn(i.state.selection,n=>{let r=t(n);return Y.range(n.anchor,r.head,r.goalColumn)});return e.eq(i.state.selection)?!1:(i.dispatch(He(i.state,e)),!0)}function ep(i,t){return Ee(i,e=>i.moveByChar(e,t))}const ip=i=>ep(i,!ee(i)),np=i=>ep(i,ee(i));function rp(i,t){return Ee(i,e=>i.moveByGroup(e,t))}const ky=i=>rp(i,!ee(i)),_y=i=>rp(i,ee(i)),Iy=i=>Ee(i,t=>Bs(i.state,t,!ee(i))),Ly=i=>Ee(i,t=>Bs(i.state,t,ee(i)));function sp(i,t){return Ee(i,e=>i.moveVertically(e,t))}const op=i=>sp(i,!1),lp=i=>sp(i,!0);function ap(i,t){return Ee(i,e=>i.moveVertically(e,t,Kf(i)))}const Mh=i=>ap(i,!1),Rh=i=>ap(i,!0),Qy=i=>Ee(i,t=>vi(i,t,!0)),Xy=i=>Ee(i,t=>vi(i,t,!1)),Fy=i=>Ee(i,t=>vi(i,t,!ee(i))),$y=i=>Ee(i,t=>vi(i,t,ee(i))),By=i=>Ee(i,t=>Y.cursor(i.lineBlockAt(t.head).from)),Ny=i=>Ee(i,t=>Y.cursor(i.lineBlockAt(t.head).to)),Yh=({state:i,dispatch:t})=>(t(He(i,{anchor:0})),!0),Wh=({state:i,dispatch:t})=>(t(He(i,{anchor:i.doc.length})),!0),Zh=({state:i,dispatch:t})=>(t(He(i,{anchor:i.selection.main.anchor,head:0})),!0),jh=({state:i,dispatch:t})=>(t(He(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),My=({state:i,dispatch:t})=>(t(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),Ry=({state:i,dispatch:t})=>{let e=Ms(i).map(({from:n,to:r})=>Y.range(n,Math.min(r+1,i.doc.length)));return t(i.update({selection:Y.create(e),userEvent:"select"})),!0},Yy=({state:i,dispatch:t})=>{let e=dn(i.selection,n=>{var r;let o=kt(i).resolveInner(n.head,1);for(;!(o.from<n.from&&o.to>=n.to||o.to>n.to&&o.from<=n.from||!(!((r=o.parent)===null||r===void 0)&&r.parent));)o=o.parent;return Y.range(o.to,o.from)});return t(He(i,e)),!0},Wy=({state:i,dispatch:t})=>{let e=i.selection,n=null;return e.ranges.length>1?n=Y.create([e.main]):e.main.empty||(n=Y.create([Y.cursor(e.main.head)])),n?(t(He(i,n)),!0):!1};function Ns(i,t){if(i.state.readOnly)return!1;let e="delete.selection",{state:n}=i,r=n.changeByRange(o=>{let{from:s,to:l}=o;if(s==l){let h=t(s);h<s?(e="delete.backward",h=Er(i,h,!1)):h>s&&(e="delete.forward",h=Er(i,h,!0)),s=Math.min(s,h),l=Math.max(l,h)}else s=Er(i,s,!1),l=Er(i,s,!0);return s==l?{range:o}:{changes:{from:s,to:l},range:Y.cursor(s)}});return r.changes.empty?!1:(i.dispatch(n.update(r,{scrollIntoView:!0,userEvent:e,effects:e=="delete.selection"?tt.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Er(i,t,e){if(i instanceof tt)for(let n of i.state.facet(tt.atomicRanges).map(r=>r(i)))n.between(t,t,(r,o)=>{r<t&&o>t&&(t=e?o:r)});return t}const hp=(i,t)=>Ns(i,e=>{let{state:n}=i,r=n.doc.lineAt(e),o,s;if(!t&&e>r.from&&e<r.from+200&&!/[^ \t]/.test(o=r.text.slice(0,e-r.from))){if(o[o.length-1]=="	")return e-1;let l=lr(o,n.tabSize),h=l%fs(n)||fs(n);for(let c=0;c<h&&o[o.length-1-c]==" ";c++)e--;s=e}else s=se(r.text,e-r.from,t,t)+r.from,s==e&&r.number!=(t?n.doc.lines:1)&&(s+=t?1:-1);return s}),_l=i=>hp(i,!1),up=i=>hp(i,!0),cp=(i,t)=>Ns(i,e=>{let n=e,{state:r}=i,o=r.doc.lineAt(n),s=r.charCategorizer(n);for(let l=null;;){if(n==(t?o.to:o.from)){n==e&&o.number!=(t?r.doc.lines:1)&&(n+=t?1:-1);break}let h=se(o.text,n-o.from,t)+o.from,c=o.text.slice(Math.min(n,h)-o.from,Math.max(n,h)-o.from),p=s(c);if(l!=null&&p!=l)break;(c!=" "||n!=e)&&(l=p),n=h}return n}),fp=i=>cp(i,!1),Zy=i=>cp(i,!0),pp=i=>Ns(i,t=>{let e=i.lineBlockAt(t).to;return t<e?e:Math.min(i.state.doc.length,t+1)}),jy=i=>Ns(i,t=>{let e=i.lineBlockAt(t).from;return t>e?e:Math.max(0,t-1)}),qy=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let e=i.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:mt.of(["",""])},range:Y.cursor(n.from)}));return t(i.update(e,{scrollIntoView:!0,userEvent:"input"})),!0},zy=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let e=i.changeByRange(n=>{if(!n.empty||n.from==0||n.from==i.doc.length)return{range:n};let r=n.from,o=i.doc.lineAt(r),s=r==o.from?r-1:se(o.text,r-o.from,!1)+o.from,l=r==o.to?r+1:se(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:l,insert:i.doc.slice(r,l).append(i.doc.slice(s,r))},range:Y.cursor(l)}});return e.changes.empty?!1:(t(i.update(e,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ms(i){let t=[],e=-1;for(let n of i.selection.ranges){let r=i.doc.lineAt(n.from),o=i.doc.lineAt(n.to);if(!n.empty&&n.to==o.from&&(o=i.doc.lineAt(n.to-1)),e>=r.number){let s=t[t.length-1];s.to=o.to,s.ranges.push(n)}else t.push({from:r.from,to:o.to,ranges:[n]});e=o.number+1}return t}function dp(i,t,e){if(i.readOnly)return!1;let n=[],r=[];for(let o of Ms(i)){if(e?o.to==i.doc.length:o.from==0)continue;let s=i.doc.lineAt(e?o.to+1:o.from-1),l=s.length+1;if(e){n.push({from:o.to,to:s.to},{from:o.from,insert:s.text+i.lineBreak});for(let h of o.ranges)r.push(Y.range(Math.min(i.doc.length,h.anchor+l),Math.min(i.doc.length,h.head+l)))}else{n.push({from:s.from,to:o.from},{from:o.to,insert:i.lineBreak+s.text});for(let h of o.ranges)r.push(Y.range(h.anchor-l,h.head-l))}}return n.length?(t(i.update({changes:n,scrollIntoView:!0,selection:Y.create(r,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Uy=({state:i,dispatch:t})=>dp(i,t,!1),Gy=({state:i,dispatch:t})=>dp(i,t,!0);function mp(i,t,e){if(i.readOnly)return!1;let n=[];for(let r of Ms(i))e?n.push({from:r.from,insert:i.doc.slice(r.from,r.to)+i.lineBreak}):n.push({from:r.to,insert:i.lineBreak+i.doc.slice(r.from,r.to)});return t(i.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Vy=({state:i,dispatch:t})=>mp(i,t,!1),Hy=({state:i,dispatch:t})=>mp(i,t,!0),Jy=i=>{if(i.state.readOnly)return!1;let{state:t}=i,e=t.changes(Ms(t).map(({from:r,to:o})=>(r>0?r--:o<t.doc.length&&o++,{from:r,to:o}))),n=dn(t.selection,r=>i.moveVertically(r,!0)).map(e);return i.dispatch({changes:e,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Ky(i,t){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(t-1,t+1)))return{from:t,to:t};let e=kt(i).resolveInner(t),n=e.childBefore(t),r=e.childAfter(t),o;return n&&r&&n.to<=t&&r.from>=t&&(o=n.type.prop(ft.closedBy))&&o.indexOf(r.name)>-1&&i.doc.lineAt(n.to).from==i.doc.lineAt(r.from).from?{from:n.to,to:r.from}:null}const tx=Op(!1),ex=Op(!0);function Op(i){return({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{let{from:o,to:s}=r,l=t.doc.lineAt(o),h=!i&&o==s&&Ky(t,o);i&&(o=s=(s<=l.to?l:t.doc.lineAt(s)).to);let c=new Ls(t,{simulateBreak:o,simulateDoubleBreak:!!h}),p=ta(c,o);for(p==null&&(p=/^\s*/.exec(t.doc.lineAt(o).text)[0].length);s<l.to&&/\s/.test(l.text[s-l.from]);)s++;h?{from:o,to:s}=h:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let d=["",er(t,p)];return h&&d.push(er(t,c.lineIndent(l.from,-1))),{changes:{from:o,to:s,insert:mt.of(d)},range:Y.cursor(o+1+d[1].length)}});return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function ra(i,t){let e=-1;return i.changeByRange(n=>{let r=[];for(let s=n.from;s<=n.to;){let l=i.doc.lineAt(s);l.number>e&&(n.empty||n.to>l.from)&&(t(l,r,n),e=l.number),s=l.to+1}let o=i.changes(r);return{changes:r,range:Y.range(o.mapPos(n.anchor,1),o.mapPos(n.head,1))}})}const ix=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let e=Object.create(null),n=new Ls(i,{overrideIndentation:o=>{let s=e[o];return s==null?-1:s}}),r=ra(i,(o,s,l)=>{let h=ta(n,o.from);if(h==null)return;/\S/.test(o.text)||(h=0);let c=/^\s*/.exec(o.text)[0],p=er(i,h);(c!=p||l.from<o.from+c.length)&&(e[o.from]=h,s.push({from:o.from,to:o.from+c.length,insert:p}))});return r.changes.empty||t(i.update(r,{userEvent:"indent"})),!0},gp=({state:i,dispatch:t})=>i.readOnly?!1:(t(i.update(ra(i,(e,n)=>{n.push({from:e.from,insert:i.facet(ur)})}),{userEvent:"input.indent"})),!0),yp=({state:i,dispatch:t})=>i.readOnly?!1:(t(i.update(ra(i,(e,n)=>{let r=/^\s*/.exec(e.text)[0];if(!r)return;let o=lr(r,i.tabSize),s=0,l=er(i,Math.max(0,o-fs(i)));for(;s<r.length&&s<l.length&&r.charCodeAt(s)==l.charCodeAt(s);)s++;n.push({from:e.from+s,to:e.from+r.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),nx=[{key:"Ctrl-b",run:zf,shift:ip,preventDefault:!0},{key:"Ctrl-f",run:Uf,shift:np},{key:"Ctrl-p",run:Hf,shift:op},{key:"Ctrl-n",run:Jf,shift:lp},{key:"Ctrl-a",run:Dy,shift:By},{key:"Ctrl-e",run:Ty,shift:Ny},{key:"Ctrl-d",run:up},{key:"Ctrl-h",run:_l},{key:"Ctrl-k",run:pp},{key:"Ctrl-Alt-h",run:fp},{key:"Ctrl-o",run:qy},{key:"Ctrl-t",run:zy},{key:"Ctrl-v",run:kl}],rx=[{key:"ArrowLeft",run:zf,shift:ip,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:gy,shift:ky,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:wy,shift:Fy,preventDefault:!0},{key:"ArrowRight",run:Uf,shift:np,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:yy,shift:_y,preventDefault:!0},{mac:"Cmd-ArrowRight",run:by,shift:$y,preventDefault:!0},{key:"ArrowUp",run:Hf,shift:op,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Yh,shift:Zh},{mac:"Ctrl-ArrowUp",run:Nh,shift:Mh},{key:"ArrowDown",run:Jf,shift:lp,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Wh,shift:jh},{mac:"Ctrl-ArrowDown",run:kl,shift:Rh},{key:"PageUp",run:Nh,shift:Mh},{key:"PageDown",run:kl,shift:Rh},{key:"Home",run:Sy,shift:Xy,preventDefault:!0},{key:"Mod-Home",run:Yh,shift:Zh},{key:"End",run:Cy,shift:Qy,preventDefault:!0},{key:"Mod-End",run:Wh,shift:jh},{key:"Enter",run:tx},{key:"Mod-a",run:My},{key:"Backspace",run:_l,shift:_l},{key:"Delete",run:up},{key:"Mod-Backspace",mac:"Alt-Backspace",run:fp},{key:"Mod-Delete",mac:"Alt-Delete",run:Zy},{mac:"Mod-Backspace",run:jy},{mac:"Mod-Delete",run:pp}].concat(nx.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),sx=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:vy,shift:Iy},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Py,shift:Ly},{key:"Alt-ArrowUp",run:Uy},{key:"Shift-Alt-ArrowUp",run:Vy},{key:"Alt-ArrowDown",run:Gy},{key:"Shift-Alt-ArrowDown",run:Hy},{key:"Escape",run:Wy},{key:"Mod-Enter",run:ex},{key:"Alt-l",mac:"Ctrl-l",run:Ry},{key:"Mod-i",run:Yy,preventDefault:!0},{key:"Mod-[",run:yp},{key:"Mod-]",run:gp},{key:"Mod-Alt-\\",run:ix},{key:"Shift-Mod-k",run:Jy},{key:"Shift-Mod-\\",run:Ey},{key:"Mod-/",run:Hg},{key:"Alt-A",run:Kg}].concat(rx),ox={key:"Tab",run:gp,shift:yp};function vt(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var t=1,e=arguments[1];if(e&&typeof e=="object"&&e.nodeType==null&&!Array.isArray(e)){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];typeof r=="string"?i.setAttribute(n,r):r!=null&&(i[n]=r)}t++}for(;t<arguments.length;t++)xp(i,arguments[t]);return i}function xp(i,t){if(typeof t=="string")i.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)i.appendChild(t);else if(Array.isArray(t))for(var e=0;e<t.length;e++)xp(i,t[e]);else throw new RangeError("Unsupported child node: "+t)}const qh=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i;class fn{constructor(t,e,n=0,r=t.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,r),this.bufferStart=n,this.normalize=o?l=>o(qh(l)):qh,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ut(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=Ml(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=ge(t);let r=this.normalize(e);for(let o=0,s=n;;o++){let l=r.charCodeAt(o),h=this.match(l,s);if(h)return this.value=h,this;if(o==r.length-1)break;s==n&&o<e.length&&e.charCodeAt(o)==l&&s++}}}match(t,e){let n=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],s=!1;this.query.charCodeAt(o)==t&&(o==this.query.length-1?n={from:this.matches[r+1],to:e+1}:(this.matches[r]++,s=!0)),s||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?n={from:e,to:e+1}:this.matches.push(1,e)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferPos)&&(n=null),n}}typeof Symbol<"u"&&(fn.prototype[Symbol.iterator]=function(){return this});const vp={from:-1,to:-1,match:/.*/.exec("")},sa="gm"+(/x/.unicode==null?"":"u");class Pp{constructor(t,e,n,r=0,o=t.length){if(this.text=t,this.to=o,this.curLine="",this.done=!1,this.value=vp,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new Cp(t,e,n,r,o);this.re=new RegExp(e,sa+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=t.iter();let s=t.lineAt(r);this.curLineStart=s.from,this.matchPos=Os(t,r),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let n=this.curLineStart+e.index,r=n+e[0].length;if(this.matchPos=Os(this.text,r+(n==r?1:0)),n==this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,e)))return this.value={from:n,to:r,match:e},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const Xo=new WeakMap;class en{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,n){let r=Xo.get(t);if(!r||r.from>=n||r.to<=e){let l=new en(e,t.sliceString(e,n));return Xo.set(t,l),l}if(r.from==e&&r.to==n)return r;let{text:o,from:s}=r;return s>e&&(o=t.sliceString(e,s)+o,s=e),r.to<n&&(o+=t.sliceString(r.to,n)),Xo.set(t,new en(s,o)),new en(e,o.slice(e-s,n-s))}}class Cp{constructor(t,e,n,r,o){this.text=t,this.to=o,this.done=!1,this.value=vp,this.matchPos=Os(t,r),this.re=new RegExp(e,sa+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=en.get(t,r,this.chunkEnd(r+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let n=this.flat.from+e.index,r=n+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,r,e)))return this.value={from:n,to:r,match:e},this.matchPos=Os(this.text,r+(n==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=en.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Pp.prototype[Symbol.iterator]=Cp.prototype[Symbol.iterator]=function(){return this});function lx(i){try{return new RegExp(i,sa),!0}catch{return!1}}function Os(i,t){if(t>=i.length)return t;let e=i.lineAt(t),n;for(;t<e.to&&(n=e.text.charCodeAt(t-e.from))>=56320&&n<57344;)t++;return t}function Il(i){let t=vt("input",{class:"cm-textfield",name:"line"}),e=vt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),i.dispatch({effects:gs.of(!1)}),i.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},vt("label",i.state.phrase("Go to line"),": ",t)," ",vt("button",{class:"cm-button",type:"submit"},i.state.phrase("go")));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:o}=i,s=o.doc.lineAt(o.selection.main.head),[,l,h,c,p]=r,d=c?+c.slice(1):0,m=h?+h:s.number;if(h&&p){let C=m/100;l&&(C=C*(l=="-"?-1:1)+s.number/o.doc.lines),m=Math.round(o.doc.lines*C)}else h&&l&&(m=m*(l=="-"?-1:1)+s.number);let v=o.doc.line(Math.max(1,Math.min(o.doc.lines,m)));i.dispatch({effects:gs.of(!1),selection:Y.cursor(v.from+Math.max(0,Math.min(d,v.length))),scrollIntoView:!0}),i.focus()}return{dom:e}}const gs=st.define(),zh=Nt.define({create(){return!0},update(i,t){for(let e of t.effects)e.is(gs)&&(i=e.value);return i},provide:i=>Kn.from(i,t=>t?Il:null)}),ax=i=>{let t=Jn(i,Il);if(!t){let e=[gs.of(!0)];i.state.field(zh,!1)==null&&e.push(st.appendConfig.of([zh,hx])),i.dispatch({effects:e}),t=Jn(i,Il)}return t&&t.dom.querySelector("input").focus(),!0},hx=tt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),ux={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Sp=K.define({combine(i){return Ve(i,ux,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})}});function cx(i){let t=[Ox,mx];return i&&t.push(Sp.of(i)),t}const fx=et.mark({class:"cm-selectionMatch"}),px=et.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Uh(i,t,e,n){return(e==0||i(t.sliceDoc(e-1,e))!=bt.Word)&&(n==t.doc.length||i(t.sliceDoc(n,n+1))!=bt.Word)}function dx(i,t,e,n){return i(t.sliceDoc(e,e+1))==bt.Word&&i(t.sliceDoc(n-1,n))==bt.Word}const mx=Xt.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.selectionSet||i.docChanged||i.viewportChanged)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let t=i.state.facet(Sp),{state:e}=i,n=e.selection;if(n.ranges.length>1)return et.none;let r=n.main,o,s=null;if(r.empty){if(!t.highlightWordAroundCursor)return et.none;let h=e.wordAt(r.head);if(!h)return et.none;s=e.charCategorizer(r.head),o=e.sliceDoc(h.from,h.to)}else{let h=r.to-r.from;if(h<t.minSelectionLength||h>200)return et.none;if(t.wholeWords){if(o=e.sliceDoc(r.from,r.to),s=e.charCategorizer(r.head),!(Uh(s,e,r.from,r.to)&&dx(s,e,r.from,r.to)))return et.none}else if(o=e.sliceDoc(r.from,r.to).trim(),!o)return et.none}let l=[];for(let h of i.visibleRanges){let c=new fn(e.doc,o,h.from,h.to);for(;!c.next().done;){let{from:p,to:d}=c.value;if((!s||Uh(s,e,p,d))&&(r.empty&&p<=r.from&&d>=r.to?l.push(px.range(p,d)):(p>=r.to||d<=r.from)&&l.push(fx.range(p,d)),l.length>t.maxMatches))return et.none}}return et.set(l)}},{decorations:i=>i.decorations}),Ox=tt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),gx=({state:i,dispatch:t})=>{let{selection:e}=i,n=Y.create(e.ranges.map(r=>i.wordAt(r.head)||Y.cursor(r.head)),e.mainIndex);return n.eq(e)?!1:(t(i.update({selection:n})),!0)};function yx(i,t){let{main:e,ranges:n}=i.selection,r=i.wordAt(e.head),o=r&&r.from==e.from&&r.to==e.to;for(let s=!1,l=new fn(i.doc,t,n[n.length-1].to);;)if(l.next(),l.done){if(s)return null;l=new fn(i.doc,t,0,Math.max(0,n[n.length-1].from-1)),s=!0}else{if(s&&n.some(h=>h.from==l.value.from))continue;if(o){let h=i.wordAt(l.value.from);if(!h||h.from!=l.value.from||h.to!=l.value.to)continue}return l.value}}const xx=({state:i,dispatch:t})=>{let{ranges:e}=i.selection;if(e.some(o=>o.from===o.to))return gx({state:i,dispatch:t});let n=i.sliceDoc(e[0].from,e[0].to);if(i.selection.ranges.some(o=>i.sliceDoc(o.from,o.to)!=n))return!1;let r=yx(i,n);return r?(t(i.update({selection:i.selection.addRange(Y.range(r.from,r.to),!1),effects:tt.scrollIntoView(r.to)})),!0):!1},oa=K.define({combine(i){return Ve(i,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:t=>new _x(t)})}});class wp{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||lx(this.search)),this.unquoted=this.literal?this.search:this.search.replace(/\\([nrt\\])/g,(e,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\"),this.wholeWord=!!t.wholeWord}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new Sx(this):new Px(this)}getCursor(t,e=0,n){let r=t.doc?t:dt.create({doc:t});return n==null&&(n=r.doc.length),this.regexp?Ui(this,r,e,n):zi(this,r,e,n)}}class bp{constructor(t){this.spec=t}}function zi(i,t,e,n){return new fn(t.doc,i.unquoted,e,n,i.caseSensitive?void 0:r=>r.toLowerCase(),i.wholeWord?vx(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function vx(i,t){return(e,n,r,o)=>((o>e||o+r.length<n)&&(o=Math.max(0,e-2),r=i.sliceString(o,Math.min(i.length,n+2))),(t(ys(r,e-o))!=bt.Word||t(xs(r,e-o))!=bt.Word)&&(t(xs(r,n-o))!=bt.Word||t(ys(r,n-o))!=bt.Word))}class Px extends bp{constructor(t){super(t)}nextMatch(t,e,n){let r=zi(this.spec,t,n,t.doc.length).nextOverlapping();return r.done&&(r=zi(this.spec,t,0,e).nextOverlapping()),r.done?null:r.value}prevMatchInRange(t,e,n){for(let r=n;;){let o=Math.max(e,r-1e4-this.spec.unquoted.length),s=zi(this.spec,t,o,r),l=null;for(;!s.nextOverlapping().done;)l=s.value;if(l)return l;if(o==e)return null;r-=1e4}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.replace}matchAll(t,e){let n=zi(this.spec,t,0,t.doc.length),r=[];for(;!n.next().done;){if(r.length>=e)return null;r.push(n.value)}return r}highlight(t,e,n,r){let o=zi(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,t.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function Ui(i,t,e,n){return new Pp(t.doc,i.search,{ignoreCase:!i.caseSensitive,test:i.wholeWord?Cx(t.charCategorizer(t.selection.main.head)):void 0},e,n)}function ys(i,t){return i.slice(se(i,t,!1),t)}function xs(i,t){return i.slice(t,se(i,t))}function Cx(i){return(t,e,n)=>!n[0].length||(i(ys(n.input,n.index))!=bt.Word||i(xs(n.input,n.index))!=bt.Word)&&(i(xs(n.input,n.index+n[0].length))!=bt.Word||i(ys(n.input,n.index+n[0].length))!=bt.Word)}class Sx extends bp{nextMatch(t,e,n){let r=Ui(this.spec,t,n,t.doc.length).next();return r.done&&(r=Ui(this.spec,t,0,e).next()),r.done?null:r.value}prevMatchInRange(t,e,n){for(let r=1;;r++){let o=Math.max(e,n-r*1e4),s=Ui(this.spec,t,o,n),l=null;for(;!s.next().done;)l=s.value;if(l&&(o==e||l.from>o+10))return l;if(o==e)return null}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.replace.replace(/\$([$&\d+])/g,(e,n)=>n=="$"?"$":n=="&"?t.match[0]:n!="0"&&+n<t.match.length?t.match[n]:e)}matchAll(t,e){let n=Ui(this.spec,t,0,t.doc.length),r=[];for(;!n.next().done;){if(r.length>=e)return null;r.push(n.value)}return r}highlight(t,e,n,r){let o=Ui(this.spec,t,Math.max(0,e-250),Math.min(n+250,t.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const ir=st.define(),la=st.define(),pi=Nt.define({create(i){return new Fo(Ll(i).create(),null)},update(i,t){for(let e of t.effects)e.is(ir)?i=new Fo(e.value.create(),i.panel):e.is(la)&&(i=new Fo(i.query,e.value?aa:null));return i},provide:i=>Kn.from(i,t=>t.panel)});class Fo{constructor(t,e){this.query=t,this.panel=e}}const wx=et.mark({class:"cm-searchMatch"}),bx=et.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Dx=Xt.fromClass(class{constructor(i){this.view=i,this.decorations=this.highlight(i.state.field(pi))}update(i){let t=i.state.field(pi);(t!=i.startState.field(pi)||i.docChanged||i.selectionSet||i.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:i,panel:t}){if(!t||!i.spec.valid)return et.none;let{view:e}=this,n=new mi;for(let r=0,o=e.visibleRanges,s=o.length;r<s;r++){let{from:l,to:h}=o[r];for(;r<s-1&&h>o[r+1].from-2*250;)h=o[++r].to;i.highlight(e.state,l,h,(c,p)=>{let d=e.state.selection.ranges.some(m=>m.from==c&&m.to==p);n.add(c,p,d?bx:wx)})}return n.finish()}},{decorations:i=>i.decorations});function fr(i){return t=>{let e=t.state.field(pi,!1);return e&&e.query.spec.valid?i(t,e):Dp(t)}}const vs=fr((i,{query:t})=>{let{to:e}=i.state.selection.main,n=t.nextMatch(i.state,e,e);return n?(i.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:ha(i,n),userEvent:"select.search"}),!0):!1}),Ps=fr((i,{query:t})=>{let{state:e}=i,{from:n}=e.selection.main,r=t.prevMatch(e,n,n);return r?(i.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:ha(i,r),userEvent:"select.search"}),!0):!1}),Tx=fr((i,{query:t})=>{let e=t.matchAll(i.state,1e3);return!e||!e.length?!1:(i.dispatch({selection:Y.create(e.map(n=>Y.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),Ax=({state:i,dispatch:t})=>{let e=i.selection;if(e.ranges.length>1||e.main.empty)return!1;let{from:n,to:r}=e.main,o=[],s=0;for(let l=new fn(i.doc,i.sliceDoc(n,r));!l.next().done;){if(o.length>1e3)return!1;l.value.from==n&&(s=o.length),o.push(Y.range(l.value.from,l.value.to))}return t(i.update({selection:Y.create(o,s),userEvent:"select.search.matches"})),!0},Gh=fr((i,{query:t})=>{let{state:e}=i,{from:n,to:r}=e.selection.main;if(e.readOnly)return!1;let o=t.nextMatch(e,n,n);if(!o)return!1;let s=[],l,h,c=[];if(o.from==n&&o.to==r&&(h=e.toText(t.getReplacement(o)),s.push({from:o.from,to:o.to,insert:h}),o=t.nextMatch(e,o.from,o.to),c.push(tt.announce.of(e.phrase("replaced match on line $",e.doc.lineAt(n).number)+"."))),o){let p=s.length==0||s[0].from>=o.to?0:o.to-o.from-h.length;l={anchor:o.from-p,head:o.to-p},c.push(ha(i,o))}return i.dispatch({changes:s,selection:l,scrollIntoView:!!l,effects:c,userEvent:"input.replace"}),!0}),Ex=fr((i,{query:t})=>{if(i.state.readOnly)return!1;let e=t.matchAll(i.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:t.getReplacement(r)}});if(!e.length)return!1;let n=i.state.phrase("replaced $ matches",e.length)+".";return i.dispatch({changes:e,effects:tt.announce.of(n),userEvent:"input.replace.all"}),!0});function aa(i){return i.state.facet(oa).createPanel(i)}function Ll(i,t){var e,n,r,o;let s=i.selection.main,l=s.empty||s.to>s.from+100?"":i.sliceDoc(s.from,s.to);if(t&&!l)return t;let h=i.facet(oa);return new wp({search:((e=t==null?void 0:t.literal)!==null&&e!==void 0?e:h.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=t==null?void 0:t.caseSensitive)!==null&&n!==void 0?n:h.caseSensitive,literal:(r=t==null?void 0:t.literal)!==null&&r!==void 0?r:h.literal,wholeWord:(o=t==null?void 0:t.wholeWord)!==null&&o!==void 0?o:h.wholeWord})}const Dp=i=>{let t=i.state.field(pi,!1);if(t&&t.panel){let e=Jn(i,aa);if(!e)return!1;let n=e.dom.querySelector("[main-field]");if(n&&n!=i.root.activeElement){let r=Ll(i.state,t.query.spec);r.valid&&i.dispatch({effects:ir.of(r)}),n.focus(),n.select()}}else i.dispatch({effects:[la.of(!0),t?ir.of(Ll(i.state,t.query.spec)):st.appendConfig.of(Lx)]});return!0},Tp=i=>{let t=i.state.field(pi,!1);if(!t||!t.panel)return!1;let e=Jn(i,aa);return e&&e.dom.contains(i.root.activeElement)&&i.focus(),i.dispatch({effects:la.of(!1)}),!0},kx=[{key:"Mod-f",run:Dp,scope:"editor search-panel"},{key:"F3",run:vs,shift:Ps,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:vs,shift:Ps,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Tp,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Ax},{key:"Alt-g",run:ax},{key:"Mod-d",run:xx,preventDefault:!0}];class _x{constructor(t){this.view=t;let e=this.query=t.state.field(pi).query.spec;this.commit=this.commit.bind(this),this.searchField=vt("input",{value:e.search,placeholder:me(t,"Find"),"aria-label":me(t,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=vt("input",{value:e.replace,placeholder:me(t,"Replace"),"aria-label":me(t,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=vt("input",{type:"checkbox",name:"case",checked:e.caseSensitive,onchange:this.commit}),this.reField=vt("input",{type:"checkbox",name:"re",checked:e.regexp,onchange:this.commit}),this.wordField=vt("input",{type:"checkbox",name:"word",checked:e.wholeWord,onchange:this.commit});function n(r,o,s){return vt("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=vt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,n("next",()=>vs(t),[me(t,"next")]),n("prev",()=>Ps(t),[me(t,"previous")]),n("select",()=>Tx(t),[me(t,"all")]),vt("label",null,[this.caseField,me(t,"match case")]),vt("label",null,[this.reField,me(t,"regexp")]),vt("label",null,[this.wordField,me(t,"by word")]),...t.state.readOnly?[]:[vt("br"),this.replaceField,n("replace",()=>Gh(t),[me(t,"replace")]),n("replaceAll",()=>Ex(t),[me(t,"replace all")]),vt("button",{name:"close",onclick:()=>Tp(t),"aria-label":me(t,"close"),type:"button"},["\xD7"])]])}commit(){let t=new wp({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:ir.of(t)}))}keydown(t){Gm(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Ps:vs)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),Gh(this.view))}update(t){for(let e of t.transactions)for(let n of e.effects)n.is(ir)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(oa).top}}function me(i,t){return i.state.phrase(t)}const kr=30,_r=/[\s\.,:;?!]/;function ha(i,{from:t,to:e}){let n=i.state.doc.lineAt(t),r=i.state.doc.lineAt(e).to,o=Math.max(n.from,t-kr),s=Math.min(r,e+kr),l=i.state.sliceDoc(o,s);if(o!=n.from){for(let h=0;h<kr;h++)if(!_r.test(l[h+1])&&_r.test(l[h])){l=l.slice(h);break}}if(s!=r){for(let h=l.length-1;h>l.length-kr;h--)if(!_r.test(l[h-1])&&_r.test(l[h])){l=l.slice(0,h);break}}return tt.announce.of(`${i.state.phrase("current match")}. ${l} ${i.state.phrase("on line")} ${n.number}.`)}const Ix=tt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Lx=[pi,$i.lowest(Dx),Ix];class Ap{constructor(t,e,n){this.state=t,this.pos=e,this.explicit=n,this.abortListeners=[]}tokenBefore(t){let e=kt(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),r=e.text.slice(n-e.from,this.pos-e.from),o=r.search(kp(t,!1));return o<0?null:{from:n+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(t,e){t=="abort"&&this.abortListeners&&this.abortListeners.push(e)}}function Vh(i){let t=Object.keys(i).join(""),e=/\w/.test(t);return e&&(t=t.replace(/\w/g,"")),`[${e?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function Qx(i){let t=Object.create(null),e=Object.create(null);for(let{label:r}of i){t[r[0]]=!0;for(let o=1;o<r.length;o++)e[r[o]]=!0}let n=Vh(t)+Vh(e)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function Ep(i){let t=i.map(r=>typeof r=="string"?{label:r}:r),[e,n]=t.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Qx(t);return r=>{let o=r.matchBefore(n);return o||r.explicit?{from:o?o.from:r.pos,options:t,validFor:e}:null}}function Xx(i,t){return e=>{for(let n=kt(e.state).resolveInner(e.pos,-1);n;n=n.parent)if(i.indexOf(n.name)>-1)return null;return t(e)}}class Hh{constructor(t,e,n){this.completion=t,this.source=e,this.match=n}}function di(i){return i.selection.main.head}function kp(i,t){var e;let{source:n}=i,r=t&&n[0]!="^",o=n[n.length-1]!="$";return!r&&!o?i:new RegExp(`${r?"^":""}(?:${n})${o?"$":""}`,(e=i.flags)!==null&&e!==void 0?e:i.ignoreCase?"i":"")}function Fx(i,t,e,n){return Object.assign(Object.assign({},i.changeByRange(r=>{if(r==i.selection.main)return{changes:{from:e,to:n,insert:t},range:Y.cursor(e+t.length)};let o=n-e;return!r.empty||o&&i.sliceDoc(r.from-o,r.from)!=i.sliceDoc(e,n)?{range:r}:{changes:{from:r.from-o,to:r.from,insert:t},range:Y.cursor(r.from-o+t.length)}})),{userEvent:"input.complete"})}function _p(i,t){const e=t.completion.apply||t.completion.label;let n=t.source;typeof e=="string"?i.dispatch(Fx(i.state,e,n.from,n.to)):e(i,t.completion,n.from,n.to)}const Jh=new WeakMap;function $x(i){if(!Array.isArray(i))return i;let t=Jh.get(i);return t||Jh.set(i,t=Ep(i)),t}class Bx{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let e=0;e<t.length;){let n=Ut(t,e),r=ge(n);this.chars.push(n);let o=t.slice(e,e+r),s=o.toUpperCase();this.folded.push(Ut(s==o?o.toLowerCase():s,0)),e+=r}this.astral=t.length!=this.chars.length}match(t){if(this.pattern.length==0)return[0];if(t.length<this.pattern.length)return null;let{chars:e,folded:n,any:r,precise:o,byWord:s}=this;if(e.length==1){let w=Ut(t,0);return w==e[0]?[0,0,ge(w)]:w==n[0]?[-200,0,ge(w)]:null}let l=t.indexOf(this.pattern);if(l==0)return[0,0,this.pattern.length];let h=e.length,c=0;if(l<0){for(let w=0,D=Math.min(t.length,200);w<D&&c<h;){let A=Ut(t,w);(A==e[c]||A==n[c])&&(r[c++]=w),w+=ge(A)}if(c<h)return null}let p=0,d=0,m=!1,v=0,C=-1,O=-1,y=/[a-z]/.test(t),P=!0;for(let w=0,D=Math.min(t.length,200),A=0;w<D&&d<h;){let _=Ut(t,w);l<0&&(p<h&&_==e[p]&&(o[p++]=w),v<h&&(_==e[v]||_==n[v]?(v==0&&(C=w),O=w+1,v++):v=0));let I,Q=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(I=Ml(_))!=I.toLowerCase()?1:I!=I.toUpperCase()?2:0;(!w||Q==1&&y||A==0&&Q!=0)&&(e[d]==_||n[d]==_&&(m=!0)?s[d++]=w:s.length&&(P=!1)),A=Q,w+=ge(_)}return d==h&&s[0]==0&&P?this.result(-100+(m?-200:0),s,t):v==h&&C==0?[-200-t.length,0,O]:l>-1?[-700-t.length,l,l+this.pattern.length]:v==h?[-200+-700-t.length,C,O]:d==h?this.result(-100+(m?-200:0)+-700+(P?0:-1100),s,t):e.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,t)}result(t,e,n){let r=[t-n.length],o=1;for(let s of e){let l=s+(this.astral?ge(Ut(n,s)):1);o>1&&r[o-1]==s?r[o-1]=l:(r[o++]=s,r[o++]=l)}return r}}const Ae=K.define({combine(i){return Ve(i,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,optionClass:(t,e)=>n=>Nx(t(n),e(n)),addToOptions:(t,e)=>t.concat(e)})}});function Nx(i,t){return i?t?i+" "+t:i:t}function Mx(i){let t=i.addToOptions.slice();return i.icons&&t.push({render(e){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),e.type&&n.classList.add(...e.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),n.setAttribute("aria-hidden","true"),n},position:20}),t.push({render(e,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let{label:s}=e,l=0;for(let h=1;h<r.length;){let c=r[h++],p=r[h++];c>l&&o.appendChild(document.createTextNode(s.slice(l,c)));let d=o.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(s.slice(c,p))),d.className="cm-completionMatchedText",l=p}return l<s.length&&o.appendChild(document.createTextNode(s.slice(l))),o},position:50},{render(e){if(!e.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=e.detail,n},position:80}),t.sort((e,n)=>e.position-n.position).map(e=>e.render)}function Kh(i,t,e){if(i<=e)return{from:0,to:i};if(t<0&&(t=0),t<=i>>1){let r=Math.floor(t/e);return{from:r*e,to:(r+1)*e}}let n=Math.floor((i-t)/e);return{from:i-(n+1)*e,to:i-n*e}}class Rx{constructor(t,e){this.view=t,this.stateField=e,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this};let n=t.state.field(e),{options:r,selected:o}=n.open,s=t.state.facet(Ae);this.optionContent=Mx(s),this.optionClass=s.optionClass,this.range=Kh(r.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",l=>{for(let h=l.target,c;h&&h!=this.dom;h=h.parentNode)if(h.nodeName=="LI"&&(c=/-(\d+)$/.exec(h.id))&&+c[1]<r.length){_p(t,r[+c[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(t){t.state.field(this.stateField)!=t.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=Kh(e.options.length,e.selected,this.view.state.facet(Ae).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e.options,t.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(e.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=e.options[e.selected],{info:r}=n;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(s)}).catch(s=>ve(this.view.state,s,"completion info")):this.addInfoPane(o)}}addInfoPane(t){let e=this.info=document.createElement("div");e.className="cm-tooltip cm-completionInfo",e.appendChild(t),this.dom.appendChild(e),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(t){let e=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),e=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return e&&Wx(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.ownerDocument.defaultView||window,n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),o=t.getBoundingClientRect();if(o.top>Math.min(e.innerHeight,n.bottom)-10||o.bottom<Math.max(0,n.top)+10)return null;let s=this.view.textDirection==At.RTL,l=s,h=!1,c,p="",d="",m=n.left,v=e.innerWidth-n.right;if(l&&m<Math.min(r.width,v)?l=!1:!l&&v<Math.min(r.width,m)&&(l=!0),r.width<=(l?m:v))p=Math.max(0,Math.min(o.top,e.innerHeight-r.height))-n.top+"px",c=Math.min(400,l?m:v)+"px";else{h=!0,c=Math.min(400,(s?n.right:e.innerWidth-n.left)-30)+"px";let C=e.innerHeight-n.bottom;C>=r.height||C>n.top?p=o.bottom-n.top+"px":d=n.bottom-o.top+"px"}return{top:p,bottom:d,maxWidth:c,class:h?s?"left-narrow":"right-narrow":l?"left":"right"}}positionInfo(t){this.info&&(t?(this.info.style.top=t.top,this.info.style.bottom=t.bottom,this.info.style.maxWidth=t.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+t.class):this.info.style.top="-1e6px")}createListBox(t,e,n){const r=document.createElement("ul");r.id=e,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let o=n.from;o<n.to;o++){let{completion:s,match:l}=t[o];const h=r.appendChild(document.createElement("li"));h.id=e+"-"+o,h.setAttribute("role","option");let c=this.optionClass(s);c&&(h.className=c);for(let p of this.optionContent){let d=p(s,this.view.state,l);d&&h.appendChild(d)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function Yx(i){return t=>new Rx(t,i)}function Wx(i,t){let e=i.getBoundingClientRect(),n=t.getBoundingClientRect();n.top<e.top?i.scrollTop-=e.top-n.top:n.bottom>e.bottom&&(i.scrollTop+=n.bottom-e.bottom)}function tu(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function Zx(i,t){let e=[],n=0;for(let l of i)if(l.hasResult())if(l.result.filter===!1){let h=l.result.getMatch;for(let c of l.result.options){let p=[1e9-n++];if(h)for(let d of h(c))p.push(d);e.push(new Hh(c,l,p))}}else{let h=new Bx(t.sliceDoc(l.from,l.to)),c;for(let p of l.result.options)(c=h.match(p.label))&&(p.boost!=null&&(c[0]+=p.boost),e.push(new Hh(p,l,c)))}let r=[],o=null,s=t.facet(Ae).compareCompletions;for(let l of e.sort((h,c)=>c.match[0]-h.match[0]||s(h.completion,c.completion)))!o||o.label!=l.completion.label||o.detail!=l.completion.detail||o.type!=null&&l.completion.type!=null&&o.type!=l.completion.type||o.apply!=l.completion.apply?r.push(l):tu(l.completion)>tu(o)&&(r[r.length-1]=l),o=l.completion;return r}class Nn{constructor(t,e,n,r,o){this.options=t,this.attrs=e,this.tooltip=n,this.timestamp=r,this.selected=o}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new Nn(this.options,eu(e,t),this.tooltip,this.timestamp,t)}static build(t,e,n,r,o){let s=Zx(t,e);if(!s.length)return null;let l=e.facet(Ae).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let h=r.options[r.selected].completion;for(let c=0;c<s.length;c++)if(s[c].completion==h){l=c;break}}return new Nn(s,eu(n,l),{pos:t.reduce((h,c)=>c.hasResult()?Math.min(h,c.from):h,1e8),create:Yx(we),above:o.aboveCursor},r?r.timestamp:Date.now(),l)}map(t){return new Nn(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class Cs{constructor(t,e,n){this.active=t,this.id=e,this.open=n}static start(){return new Cs(zx,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:e}=t,n=e.facet(Ae),o=(n.override||e.languageDataAt("autocomplete",di(e)).map($x)).map(l=>(this.active.find(c=>c.source==l)||new ue(l,this.active.some(c=>c.state!=0)?1:0)).update(t,n));o.length==this.active.length&&o.every((l,h)=>l==this.active[h])&&(o=this.active);let s=t.selection||o.some(l=>l.hasResult()&&t.changes.touchesRange(l.from,l.to))||!jx(o,this.active)?Nn.build(o,e,this.id,this.open,n):this.open&&t.docChanged?this.open.map(t.changes):this.open;!s&&o.every(l=>l.state!=1)&&o.some(l=>l.hasResult())&&(o=o.map(l=>l.hasResult()?new ue(l.source,0):l));for(let l of t.effects)l.is(Lp)&&(s=s&&s.setSelected(l.value,this.id));return o==this.active&&s==this.open?this:new Cs(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:qx}}function jx(i,t){if(i==t)return!0;for(let e=0,n=0;;){for(;e<i.length&&!i[e].hasResult;)e++;for(;n<t.length&&!t[n].hasResult;)n++;let r=e==i.length,o=n==t.length;if(r||o)return r==o;if(i[e++].result!=t[n++].result)return!1}}const qx={"aria-autocomplete":"list"};function eu(i,t){let e={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return t>-1&&(e["aria-activedescendant"]=i+"-"+t),e}const zx=[];function Ql(i){return i.isUserEvent("input.type")?"input":i.isUserEvent("delete.backward")?"delete":null}class ue{constructor(t,e,n=-1){this.source=t,this.state=e,this.explicitPos=n}hasResult(){return!1}update(t,e){let n=Ql(t),r=this;n?r=r.handleUserEvent(t,n,e):t.docChanged?r=r.handleChange(t):t.selection&&r.state!=0&&(r=new ue(r.source,0));for(let o of t.effects)if(o.is(ua))r=new ue(r.source,1,o.value?di(t.state):-1);else if(o.is(Ss))r=new ue(r.source,0);else if(o.is(Ip))for(let s of o.value)s.source==r.source&&(r=s);return r}handleUserEvent(t,e,n){return e=="delete"||!n.activateOnTyping?this.map(t.changes):new ue(this.source,1)}handleChange(t){return t.changes.touchesRange(di(t.startState))?new ue(this.source,0):this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new ue(this.source,this.state,t.mapPos(this.explicitPos))}}class Mn extends ue{constructor(t,e,n,r,o){super(t,2,e),this.result=n,this.from=r,this.to=o}hasResult(){return!0}handleUserEvent(t,e,n){var r;let o=t.changes.mapPos(this.from),s=t.changes.mapPos(this.to,1),l=di(t.state);if((this.explicitPos<0?l<=o:l<this.from)||l>s||e=="delete"&&di(t.startState)==this.from)return new ue(this.source,e=="input"&&n.activateOnTyping?1:0);let h=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos),c;return Ux(this.result.validFor,t.state,o,s)?new Mn(this.source,h,this.result,o,s):this.result.update&&(c=this.result.update(this.result,o,s,new Ap(t.state,l,h>=0)))?new Mn(this.source,h,c,c.from,(r=c.to)!==null&&r!==void 0?r:di(t.state)):new ue(this.source,1,h)}handleChange(t){return t.changes.touchesRange(this.from,this.to)?new ue(this.source,0):this.map(t.changes)}map(t){return t.empty?this:new Mn(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1))}}function Ux(i,t,e,n){if(!i)return!1;let r=t.sliceDoc(e,n);return typeof i=="function"?i(r,e,n,t):kp(i,!0).test(r)}const ua=st.define(),Ss=st.define(),Ip=st.define({map(i,t){return i.map(e=>e.map(t))}}),Lp=st.define(),we=Nt.define({create(){return Cs.start()},update(i,t){return i.update(t)},provide:i=>[Ul.from(i,t=>t.tooltip),tt.contentAttributes.from(i,t=>t.attrs)]});function Ir(i,t="option"){return e=>{let n=e.state.field(we,!1);if(!n||!n.open||Date.now()-n.open.timestamp<e.state.facet(Ae).interactionDelay)return!1;let r=1,o;t=="page"&&(o=QO(e,n.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=n.open.options,l=n.open.selected>-1?n.open.selected+r*(i?1:-1):i?0:s-1;return l<0?l=t=="page"?0:s-1:l>=s&&(l=t=="page"?s-1:0),e.dispatch({effects:Lp.of(l)}),!0}}const Gx=i=>{let t=i.state.field(we,!1);return i.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<i.state.facet(Ae).interactionDelay?!1:(_p(i,t.open.options[t.open.selected]),!0)},Vx=i=>i.state.field(we,!1)?(i.dispatch({effects:ua.of(!0)}),!0):!1,Hx=i=>{let t=i.state.field(we,!1);return!t||!t.active.some(e=>e.state!=0)?!1:(i.dispatch({effects:Ss.of(null)}),!0)};class Jx{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const iu=50,Kx=50,tv=1e3,ev=Xt.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of i.state.field(we).active)t.state==1&&this.startQuery(t)}update(i){let t=i.state.field(we);if(!i.selectionSet&&!i.docChanged&&i.startState.field(we)==t)return;let e=i.transactions.some(n=>(n.selection||n.docChanged)&&!Ql(n));for(let n=0;n<this.running.length;n++){let r=this.running[n];if(e||r.updates.length+i.transactions.length>Kx&&Date.now()-r.time>tv){for(let o of r.context.abortListeners)try{o()}catch(s){ve(this.view.state,s)}r.context.abortListeners=null,this.running.splice(n--,1)}else r.updates.push(...i.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some(n=>n.state==1&&!this.running.some(r=>r.active.source==n.source))?setTimeout(()=>this.startUpdate(),iu):-1,this.composing!=0)for(let n of i.transactions)Ql(n)=="input"?this.composing=2:this.composing==2&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:i}=this.view,t=i.field(we);for(let e of t.active)e.state==1&&!this.running.some(n=>n.active.source==e.source)&&this.startQuery(e)}startQuery(i){let{state:t}=this.view,e=di(t),n=new Ap(t,e,i.explicitPos==e),r=new Jx(i,n);this.running.push(r),Promise.resolve(i.source(n)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Ss.of(null)}),ve(this.view.state,o)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),iu))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],e=this.view.state.facet(Ae);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let s=new Mn(r.active.source,r.active.explicitPos,r.done,r.done.from,(i=r.done.to)!==null&&i!==void 0?i:di(r.updates.length?r.updates[0].startState:this.view.state));for(let l of r.updates)s=s.update(l,e);if(s.hasResult()){t.push(s);continue}}let o=this.view.state.field(we).active.find(s=>s.source==r.active.source);if(o&&o.state==1)if(r.done==null){let s=new ue(r.active.source,0);for(let l of r.updates)s=s.update(l,e);s.state!=1&&t.push(s)}else this.startQuery(o)}t.length&&this.view.dispatch({effects:Ip.of(t)})}},{eventHandlers:{blur(){let i=this.view.state.field(we,!1);i&&i.tooltip&&this.view.state.facet(Ae).closeOnBlur&&this.view.dispatch({effects:Ss.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:ua.of(!1)}),20),this.composing=0}}}),Qp=tt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class iv{constructor(t,e,n,r){this.field=t,this.line=e,this.from=n,this.to=r}}class ca{constructor(t,e,n){this.field=t,this.from=e,this.to=n}map(t){let e=t.mapPos(this.from,-1,Vt.TrackDel),n=t.mapPos(this.to,1,Vt.TrackDel);return e==null||n==null?null:new ca(this.field,e,n)}}class fa{constructor(t,e){this.lines=t,this.fieldPositions=e}instantiate(t,e){let n=[],r=[e],o=t.doc.lineAt(e),s=/^\s*/.exec(o.text)[0];for(let h of this.lines){if(n.length){let c=s,p=/^\t*/.exec(h)[0].length;for(let d=0;d<p;d++)c+=t.facet(ur);r.push(e+c.length-p),h=c+h.slice(p)}n.push(h),e+=h.length+1}let l=this.fieldPositions.map(h=>new ca(h.field,r[h.line]+h.from,r[h.line]+h.to));return{text:n,ranges:l}}static parse(t){let e=[],n=[],r=[],o;for(let s of t.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(s);){let l=o[1]?+o[1]:null,h=o[2]||o[3]||"",c=-1;for(let p=0;p<e.length;p++)(l!=null?e[p].seq==l:h?e[p].name==h:!1)&&(c=p);if(c<0){let p=0;for(;p<e.length&&(l==null||e[p].seq!=null&&e[p].seq<l);)p++;e.splice(p,0,{seq:l,name:h}),c=p;for(let d of r)d.field>=c&&d.field++}r.push(new iv(c,n.length,o.index,o.index+h.length)),s=s.slice(0,o.index)+h+s.slice(o.index+o[0].length)}for(let l;l=/([$#])\\{/.exec(s);){s=s.slice(0,l.index)+l[1]+"{"+s.slice(l.index+l[0].length);for(let h of r)h.line==n.length&&h.from>l.index&&(h.from--,h.to--)}n.push(s)}return new fa(n,r)}}let nv=et.widget({widget:new class extends ii{toDOM(){let i=document.createElement("span");return i.className="cm-snippetFieldPosition",i}ignoreEvent(){return!1}}}),rv=et.mark({class:"cm-snippetField"});class mn{constructor(t,e){this.ranges=t,this.active=e,this.deco=et.set(t.map(n=>(n.from==n.to?nv:rv).range(n.from,n.to)))}map(t){let e=[];for(let n of this.ranges){let r=n.map(t);if(!r)return null;e.push(r)}return new mn(e,this.active)}selectionInsideField(t){return t.ranges.every(e=>this.ranges.some(n=>n.field==this.active&&n.from<=e.from&&n.to>=e.to))}}const pr=st.define({map(i,t){return i&&i.map(t)}}),sv=st.define(),nr=Nt.define({create(){return null},update(i,t){for(let e of t.effects){if(e.is(pr))return e.value;if(e.is(sv)&&i)return new mn(i.ranges,e.value)}return i&&t.docChanged&&(i=i.map(t.changes)),i&&t.selection&&!i.selectionInsideField(t.selection)&&(i=null),i},provide:i=>tt.decorations.from(i,t=>t?t.deco:et.none)});function pa(i,t){return Y.create(i.filter(e=>e.field==t).map(e=>Y.range(e.from,e.to)))}function ov(i){let t=fa.parse(i);return(e,n,r,o)=>{let{text:s,ranges:l}=t.instantiate(e.state,r),h={changes:{from:r,to:o,insert:mt.of(s)},scrollIntoView:!0};if(l.length&&(h.selection=pa(l,0)),l.length>1){let c=new mn(l,0),p=h.effects=[pr.of(c)];e.state.field(nr,!1)===void 0&&p.push(st.appendConfig.of([nr,cv,fv,Qp]))}e.dispatch(e.state.update(h))}}function Xp(i){return({state:t,dispatch:e})=>{let n=t.field(nr,!1);if(!n||i<0&&n.active==0)return!1;let r=n.active+i,o=i>0&&!n.ranges.some(s=>s.field==r+i);return e(t.update({selection:pa(n.ranges,r),effects:pr.of(o?null:new mn(n.ranges,r))})),!0}}const lv=({state:i,dispatch:t})=>i.field(nr,!1)?(t(i.update({effects:pr.of(null)})),!0):!1,av=Xp(1),hv=Xp(-1),uv=[{key:"Tab",run:av,shift:hv},{key:"Escape",run:lv}],nu=K.define({combine(i){return i.length?i[0]:uv}}),cv=$i.highest(hr.compute([nu],i=>i.facet(nu)));function Ie(i,t){return Object.assign(Object.assign({},t),{apply:ov(i)})}const fv=tt.domEventHandlers({mousedown(i,t){let e=t.state.field(nr,!1),n;if(!e||(n=t.posAtCoords({x:i.clientX,y:i.clientY}))==null)return!1;let r=e.ranges.find(o=>o.from<=n&&o.to>=n);return!r||r.field==e.active?!1:(t.dispatch({selection:pa(e.ranges,r.field),effects:pr.of(e.ranges.some(o=>o.field>r.field)?new mn(e.ranges,r.field):null)}),!0)}}),rr={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ti=st.define({map(i,t){let e=t.mapPos(i,-1,Vt.TrackAfter);return e==null?void 0:e}}),da=st.define({map(i,t){return t.mapPos(i)}}),ma=new class extends Li{};ma.startSide=1;ma.endSide=-1;const Fp=Nt.define({create(){return gt.empty},update(i,t){if(t.selection){let e=t.state.doc.lineAt(t.selection.main.head).from,n=t.startState.doc.lineAt(t.startState.selection.main.head).from;e!=t.changes.mapPos(n,-1)&&(i=gt.empty)}i=i.map(t.changes);for(let e of t.effects)e.is(Ti)?i=i.update({add:[ma.range(e.value,e.value+1)]}):e.is(da)&&(i=i.update({filter:n=>n!=e.value}));return i}});function pv(){return[mv,Fp]}const $o="()[]{}<>";function $p(i){for(let t=0;t<$o.length;t+=2)if($o.charCodeAt(t)==i)return $o.charAt(t+1);return Ml(i<128?i:i+1)}function Bp(i,t){return i.languageDataAt("closeBrackets",t)[0]||rr}const dv=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),mv=tt.inputHandler.of((i,t,e,n)=>{if((dv?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let r=i.state.selection.main;if(n.length>2||n.length==2&&ge(Ut(n,0))==1||t!=r.from||e!=r.to)return!1;let o=yv(i.state,n);return o?(i.dispatch(o),!0):!1}),Ov=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let n=Bp(i,i.selection.main.head).brackets||rr.brackets,r=null,o=i.changeByRange(s=>{if(s.empty){let l=xv(i.doc,s.head);for(let h of n)if(h==l&&Rs(i.doc,s.head)==$p(Ut(h,0)))return{changes:{from:s.head-h.length,to:s.head+h.length},range:Y.cursor(s.head-h.length)}}return{range:r=s}});return r||t(i.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},gv=[{key:"Backspace",run:Ov}];function yv(i,t){let e=Bp(i,i.selection.main.head),n=e.brackets||rr.brackets;for(let r of n){let o=$p(Ut(r,0));if(t==r)return o==r?Cv(i,r,n.indexOf(r+r+r)>-1,e):vv(i,r,o,e.before||rr.before);if(t==o&&Np(i,i.selection.main.from))return Pv(i,r,o)}return null}function Np(i,t){let e=!1;return i.field(Fp).between(0,i.doc.length,n=>{n==t&&(e=!0)}),e}function Rs(i,t){let e=i.sliceString(t,t+2);return e.slice(0,ge(Ut(e,0)))}function xv(i,t){let e=i.sliceString(t-2,t);return ge(Ut(e,0))==e.length?e:e.slice(1)}function vv(i,t,e,n){let r=null,o=i.changeByRange(s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:e,from:s.to}],effects:Ti.of(s.to+t.length),range:Y.range(s.anchor+t.length,s.head+t.length)};let l=Rs(i.doc,s.head);return!l||/\s/.test(l)||n.indexOf(l)>-1?{changes:{insert:t+e,from:s.head},effects:Ti.of(s.head+t.length),range:Y.cursor(s.head+t.length)}:{range:r=s}});return r?null:i.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Pv(i,t,e){let n=null,r=i.selection.ranges.map(o=>o.empty&&Rs(i.doc,o.head)==e?Y.cursor(o.head+e.length):n=o);return n?null:i.update({selection:Y.create(r,i.selection.mainIndex),scrollIntoView:!0,effects:i.selection.ranges.map(({from:o})=>da.of(o))})}function Cv(i,t,e,n){let r=n.stringPrefixes||rr.stringPrefixes,o=null,s=i.changeByRange(l=>{if(!l.empty)return{changes:[{insert:t,from:l.from},{insert:t,from:l.to}],effects:Ti.of(l.to+t.length),range:Y.range(l.anchor+t.length,l.head+t.length)};let h=l.head,c=Rs(i.doc,h),p;if(c==t){if(ru(i,h))return{changes:{insert:t+t,from:h},effects:Ti.of(h+t.length),range:Y.cursor(h+t.length)};if(Np(i,h)){let d=e&&i.sliceDoc(h,h+t.length*3)==t+t+t;return{range:Y.cursor(h+t.length*(d?3:1)),effects:da.of(h)}}}else{if(e&&i.sliceDoc(h-2*t.length,h)==t+t&&(p=su(i,h-2*t.length,r))>-1&&ru(i,p))return{changes:{insert:t+t+t+t,from:h},effects:Ti.of(h+t.length),range:Y.cursor(h+t.length)};if(i.charCategorizer(h)(c)!=bt.Word&&su(i,h,r)>-1&&!Sv(i,h,t,r))return{changes:{insert:t+t,from:h},effects:Ti.of(h+t.length),range:Y.cursor(h+t.length)}}return{range:o=l}});return o?null:i.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function ru(i,t){let e=kt(i).resolveInner(t+1);return e.parent&&e.from==t}function Sv(i,t,e,n){let r=kt(i).resolveInner(t,-1),o=n.reduce((s,l)=>Math.max(s,l.length),0);for(let s=0;s<5;s++){let l=i.sliceDoc(r.from,Math.min(r.to,r.from+e.length+o)),h=l.indexOf(e);if(!h||h>-1&&n.indexOf(l.slice(0,h))>-1){let p=r.firstChild;for(;p&&p.from==r.from&&p.to-p.from>e.length+h;){if(i.sliceDoc(p.to-e.length,p.to)==e)return!1;p=p.firstChild}return!0}let c=r.to==t&&r.parent;if(!c)break;r=c}return!1}function su(i,t,e){let n=i.charCategorizer(t);if(n(i.sliceDoc(t-1,t))!=bt.Word)return t;for(let r of e){let o=t-r.length;if(i.sliceDoc(o,t)==r&&n(i.sliceDoc(o-1,o))!=bt.Word)return o}return-1}function wv(i={}){return[we,Ae.of(i),ev,bv,Qp]}const Mp=[{key:"Ctrl-Space",run:Vx},{key:"Escape",run:Hx},{key:"ArrowDown",run:Ir(!0)},{key:"ArrowUp",run:Ir(!1)},{key:"PageDown",run:Ir(!0,"page")},{key:"PageUp",run:Ir(!1,"page")},{key:"Enter",run:Gx}],bv=$i.highest(hr.computeN([Ae],i=>i.facet(Ae).defaultKeymap?[Mp]:[]));class Dv{constructor(t,e,n){this.from=t,this.to=e,this.diagnostic=n}}class bi{constructor(t,e,n){this.diagnostics=t,this.panel=e,this.selected=n}static init(t,e,n){let r=t,o=n.facet(Vi).markerFilter;o&&(r=o(r));let s=et.set(r.map(l=>l.from==l.to||l.from==l.to-1&&n.doc.lineAt(l.from).to==l.from?et.widget({widget:new Fv(l),diagnostic:l}).range(l.from):et.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new bi(s,e,pn(s))}}function pn(i,t=null,e=0){let n=null;return i.between(e,1e9,(r,o,{spec:s})=>{if(!(t&&s.diagnostic!=t))return n=new Dv(r,o,s.diagnostic),!1}),n}function Tv(i,t){return!!(i.effects.some(e=>e.is(Oa))||i.changes.touchesRange(t.pos))}function Rp(i,t){return i.field(xe,!1)?t:t.concat(st.appendConfig.of([xe,tt.decorations.compute([xe],e=>{let{selected:n,panel:r}=e.field(xe);return!n||!r||n.from==n.to?et.none:et.set([Ev.range(n.from,n.to)])}),LO(kv,{hideOn:Tv}),Bv]))}function Av(i,t){return{effects:Rp(i,[Oa.of(t)])}}const Oa=st.define(),ga=st.define(),Yp=st.define(),xe=Nt.define({create(){return new bi(et.none,null,null)},update(i,t){if(t.docChanged){let e=i.diagnostics.map(t.changes),n=null;if(i.selected){let r=t.changes.mapPos(i.selected.from,1);n=pn(e,i.selected.diagnostic,r)||pn(e,null,r)}i=new bi(e,i.panel,n)}for(let e of t.effects)e.is(Oa)?i=bi.init(e.value,i.panel,t.state):e.is(ga)?i=new bi(i.diagnostics,e.value?Ys.open:null,i.selected):e.is(Yp)&&(i=new bi(i.diagnostics,i.panel,e.value));return i},provide:i=>[Kn.from(i,t=>t.panel),tt.decorations.from(i,t=>t.diagnostics)]}),Ev=et.mark({class:"cm-lintRange cm-lintRange-active"});function kv(i,t,e){let{diagnostics:n}=i.state.field(xe),r=[],o=2e8,s=0;n.between(t-(e<0?1:0),t+(e>0?1:0),(h,c,{spec:p})=>{t>=h&&t<=c&&(h==c||(t>h||e>0)&&(t<c||e<0))&&(r.push(p.diagnostic),o=Math.min(h,o),s=Math.max(c,s))});let l=i.state.facet(Vi).tooltipFilter;return l&&(r=l(r)),r.length?{pos:o,end:s,above:i.state.doc.lineAt(o).to<s,create(){return{dom:_v(i,r)}}}:null}function _v(i,t){return vt("ul",{class:"cm-tooltip-lint"},t.map(e=>Zp(i,e,!1)))}const Iv=i=>{let t=i.state.field(xe,!1);(!t||!t.panel)&&i.dispatch({effects:Rp(i.state,[ga.of(!0)])});let e=Jn(i,Ys.open);return e&&e.dom.querySelector(".cm-panel-lint ul").focus(),!0},ou=i=>{let t=i.state.field(xe,!1);return!t||!t.panel?!1:(i.dispatch({effects:ga.of(!1)}),!0)},Lv=i=>{let t=i.state.field(xe,!1);if(!t)return!1;let e=i.state.selection.main,n=t.diagnostics.iter(e.to+1);return!n.value&&(n=t.diagnostics.iter(0),!n.value||n.from==e.from&&n.to==e.to)?!1:(i.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},Qv=[{key:"Mod-Shift-m",run:Iv},{key:"F8",run:Lv}],Xv=Xt.fromClass(class{constructor(i){this.view=i,this.timeout=-1,this.set=!0;let{delay:t}=i.state.facet(Vi);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let i=Date.now();if(i<this.lintTime-10)setTimeout(this.run,this.lintTime-i);else{this.set=!1;let{state:t}=this.view,{sources:e}=t.facet(Vi);Promise.all(e.map(n=>Promise.resolve(n(this.view)))).then(n=>{let r=n.reduce((o,s)=>o.concat(s));this.view.state.doc==t.doc&&this.view.dispatch(Av(this.view.state,r))},n=>{ve(this.view.state,n)})}}update(i){let t=i.state.facet(Vi);(i.docChanged||t!=i.startState.facet(Vi))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Vi=K.define({combine(i){return Object.assign({sources:i.map(t=>t.source)},Ve(i.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:Xv});function Wp(i){let t=[];if(i)t:for(let{name:e}of i){for(let n=0;n<e.length;n++){let r=e[n];if(/[a-zA-Z]/.test(r)&&!t.some(o=>o.toLowerCase()==r.toLowerCase())){t.push(r);continue t}}t.push("")}return t}function Zp(i,t,e){var n;let r=e?Wp(t.actions):[];return vt("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},vt("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),(n=t.actions)===null||n===void 0?void 0:n.map((o,s)=>{let l=d=>{d.preventDefault();let m=pn(i.state.field(xe).diagnostics,t);m&&o.apply(i,m.from,m.to)},{name:h}=o,c=r[s]?h.indexOf(r[s]):-1,p=c<0?h:[h.slice(0,c),vt("u",h.slice(c,c+1)),h.slice(c+1)];return vt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${h}${c<0?"":` (access key "${r[s]})"`}.`},p)}),t.source&&vt("div",{class:"cm-diagnosticSource"},t.source))}class Fv extends ii{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return vt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class lu{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Zp(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ys{constructor(t){this.view=t,this.items=[];let e=r=>{if(r.keyCode==27)ou(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=Wp(o.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==r.keyCode){let h=pn(this.view.state.field(xe).diagnostics,o);h&&o.actions[l].apply(t,h.from,h.to)}}else return;r.preventDefault()},n=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=vt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e,onclick:n}),this.dom=vt("div",{class:"cm-panel-lint"},this.list,vt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ou(this.view)},"\xD7")),this.update()}get selectedIndex(){let t=this.view.state.field(xe).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(xe),n=0,r=!1,o=null;for(t.between(0,this.view.state.doc.length,(s,l,{spec:h})=>{let c=-1,p;for(let d=n;d<this.items.length;d++)if(this.items[d].diagnostic==h.diagnostic){c=d;break}c<0?(p=new lu(this.view,h.diagnostic),this.items.splice(n,0,p),r=!0):(p=this.items[c],c>n&&(this.items.splice(n,c-n),r=!0)),e&&p.diagnostic==e.diagnostic?p.dom.hasAttribute("aria-selected")||(p.dom.setAttribute("aria-selected","true"),o=p):p.dom.hasAttribute("aria-selected")&&p.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new lu(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:l})=>{s.top<l.top?this.list.scrollTop-=l.top-s.top:s.bottom>l.bottom&&(this.list.scrollTop+=s.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let t=this.list.firstChild;function e(){let n=t;t=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;t!=n.dom;)e();t=n.dom.nextSibling}else this.list.insertBefore(n.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=this.view.state.field(xe),n=pn(e.diagnostics,this.items[t].diagnostic);!n||this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:Yp.of(n)})}static open(t){return new Ys(t)}}function $v(i,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(i)}</svg>')`}function Bo(i){return $v(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Bv=tt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Bo("#d11")},".cm-lintRange-warning":{backgroundImage:Bo("orange")},".cm-lintRange-info":{backgroundImage:Bo("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Nv=(()=>[WO(),qO(),uO(),ly(),Lg(),Jm(),rO(),dt.allowMultipleSelections.of(!0),vg(),Xg(Bg,{fallback:!0}),jg(),pv(),wv(),CO(),bO(),OO(),cx(),hr.of([...gv,...sx,...kx,...Oy,...kg,...Mp,...Qv])])();class ws{constructor(t,e,n,r,o,s,l,h,c,p=0,d){this.p=t,this.stack=e,this.state=n,this.reducePos=r,this.pos=o,this.score=s,this.buffer=l,this.bufferBase=h,this.curContext=c,this.lookAhead=p,this.parent=d}toString(){return`[${this.stack.filter((t,e)=>e%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,n=0){let r=t.parser.context;return new ws(t,[],e,n,n,0,[],0,r?new au(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){let e=t>>19,n=t&65535,{parser:r}=this.p,o=r.dynamicPrecedence(n);if(o&&(this.score+=o),e==0){this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),this.reduceContext(n,this.reducePos);return}let s=this.stack.length-(e-1)*3-(t&262144?6:0),l=this.stack[s-2],h=this.stack[s-1],c=this.bufferBase+this.buffer.length-h;if(n<r.minRepeatTerm||t&131072){let p=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,l,p,c+4,!0)}if(t&262144)this.state=this.stack[s];else{let p=this.stack[s-3];this.state=r.getGoto(p,n,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(n,l)}storeNode(t,e,n,r=4,o=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,l=this.buffer.length;if(l==0&&s.parent&&(l=s.bufferBase-s.parent.bufferBase,s=s.parent),l>0&&s.buffer[l-4]==0&&s.buffer[l-1]>-1){if(e==n)return;if(s.buffer[l-2]>=e){s.buffer[l-2]=n;return}}}if(!o||this.pos==n)this.buffer.push(t,e,n,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0)for(;s>0&&this.buffer[s-2]>n;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4);this.buffer[s]=t,this.buffer[s+1]=e,this.buffer[s+2]=n,this.buffer[s+3]=r}}shift(t,e,n){let r=this.pos;if(t&131072)this.pushState(t&65535,this.pos);else if((t&262144)==0){let o=t,{parser:s}=this.p;(n>this.pos||e<=s.maxNode)&&(this.pos=n,s.stateFlag(o,1)||(this.reducePos=n)),this.pushState(o,r),this.shiftContext(e,r),e<=s.maxNode&&this.buffer.push(e,r,n,4)}else this.pos=n,this.shiftContext(e,r),e<=this.p.parser.maxNode&&this.buffer.push(e,r,n,4)}apply(t,e,n){t&65536?this.reduce(t):this.shift(t,e,n)}useNode(t,e){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=t)&&(this.p.reused.push(t),n++);let r=this.pos;this.reducePos=this.pos=r+t.length,this.pushState(e,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let n=t.buffer.slice(e),r=t.bufferBase+e;for(;t&&r==t.bufferBase;)t=t.parent;return new ws(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let n=t<=this.p.parser.maxNode;n&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,n?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new Mv(this);;){let n=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if((n&65536)==0)return!0;if(n==0)return!1;e.reduce(n)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>4<<1||this.stack.length>=120){let r=[];for(let o=0,s;o<e.length;o+=2)(s=e[o+1])!=this.state&&this.p.parser.hasAction(s,t)&&r.push(e[o],s);if(this.stack.length<120)for(let o=0;r.length<4<<1&&o<e.length;o+=2){let s=e[o+1];r.some((l,h)=>h&1&&l==s)||r.push(e[o],s)}e=r}let n=[];for(let r=0;r<e.length&&n.length<4;r+=2){let o=e[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(e[r],this.pos),s.score-=200,n.push(s)}return n}forceReduce(){let t=this.p.parser.stateSlot(this.state,5);if((t&65536)==0)return!1;let{parser:e}=this.p;if(!e.validAction(this.state,t)){let n=t>>19,r=t&65535,o=this.stack.length-n*3;if(o<0||e.getGoto(this.stack[o],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new au(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class au{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}var hu;(function(i){i[i.Insert=200]="Insert",i[i.Delete=190]="Delete",i[i.Reduce=100]="Reduce",i[i.MaxNext=4]="MaxNext",i[i.MaxInsertStackDepth=300]="MaxInsertStackDepth",i[i.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(hu||(hu={}));class Mv{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=t&65535,n=t>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=r}}class bs{constructor(t,e,n){this.stack=t,this.pos=e,this.index=n,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new bs(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new bs(this.stack,this.pos,this.index)}}class qr{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const uu=new qr;class Rv{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=uu,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let n=this.range,r=this.rangeIndex,o=this.pos+t;for(;o<n.from;){if(!r)return null;let s=this.ranges[--r];o-=n.from-s.to,n=s}for(;e<0?o>n.to:o>=n.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-n.to,n=s}return o}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e=this.chunkOff+t,n,r;if(e>=0&&e<this.chunk.length)n=this.pos+t,r=this.chunk.charCodeAt(e);else{let o=this.resolveOffset(t,1);if(o==null)return-1;if(n=o,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let s=this.rangeIndex,l=this.range;for(;l.to<=n;)l=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-n)),r=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),r}acceptToken(t,e=0){let n=e?this.resolveOffset(e,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=uu,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let n="";for(let r of this.ranges){if(r.from>=e)break;r.to>t&&(n+=this.input.read(Math.max(r.from,t),Math.min(r.to,e)))}return n}}class zr{constructor(t,e){this.data=t,this.id=e}token(t,e){Yv(this.data,t,e,this.id)}}zr.prototype.contextual=zr.prototype.fallback=zr.prototype.extend=!1;class dr{constructor(t,e={}){this.token=t,this.contextual=!!e.contextual,this.fallback=!!e.fallback,this.extend=!!e.extend}}function Yv(i,t,e,n){let r=0,o=1<<n,{parser:s}=e.p,{dialect:l}=s;t:for(;(o&i[r])!=0;){let h=i[r+1];for(let m=r+3;m<h;m+=2)if((i[m+1]&o)>0){let v=i[m];if(l.allows(v)&&(t.token.value==-1||t.token.value==v||s.overrides(v,t.token.value))){t.acceptToken(v);break}}let c=t.next,p=0,d=i[r+2];if(t.next<0&&d>p&&i[h+d*3-3]==65535){r=i[h+d*3-1];continue t}for(;p<d;){let m=p+d>>1,v=h+m+(m<<1),C=i[v],O=i[v+1];if(c<C)d=m;else if(c>=O)p=m+1;else{r=i[v+2],t.advance();continue t}}break}}function Lr(i,t=Uint16Array){if(typeof i!="string")return i;let e=null;for(let n=0,r=0;n<i.length;){let o=0;for(;;){let s=i.charCodeAt(n++),l=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let h=s-32;if(h>=46&&(h-=46,l=!0),o+=h,l)break;o*=46}e?e[r++]=o:e=new t(o)}return e}const Le=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let No=null;var cu;(function(i){i[i.Margin=25]="Margin"})(cu||(cu={}));function fu(i,t,e){let n=i.cursor(jt.IncludeAnonymous);for(n.moveTo(t);;)if(!(e<0?n.childBefore(t):n.childAfter(t)))for(;;){if((e<0?n.to<t:n.from>t)&&!n.type.isError)return e<0?Math.max(0,Math.min(n.to-1,t-25)):Math.min(i.length,Math.max(n.from+1,t+25));if(e<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return e<0?0:i.length}}class Wv{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?fu(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?fu(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let n=this.trees[e],r=this.index[e];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=n.children[r],s=this.start[e]+n.positions[r];if(s>t)return this.nextStart=s,null;if(o instanceof Lt){if(s==t){if(s<this.safeFrom)return null;let l=s+o.length;if(l<=this.safeTo){let h=o.prop(ft.lookAhead);if(!h||l+h<this.fragment.to)return o}}this.index[e]++,s+o.length>=Math.max(this.safeFrom,t)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[e]++,this.nextStart=s+o.length}}}class Zv{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(n=>new qr)}getActions(t){let e=0,n=null,{parser:r}=t.p,{tokenizers:o}=r,s=r.stateSlot(t.state,3),l=t.curContext?t.curContext.hash:0,h=0;for(let c=0;c<o.length;c++){if((1<<c&s)==0)continue;let p=o[c],d=this.tokens[c];if(!(n&&!p.fallback)&&((p.contextual||d.start!=t.pos||d.mask!=s||d.context!=l)&&(this.updateCachedToken(d,p,t),d.mask=s,d.context=l),d.lookAhead>d.end+25&&(h=Math.max(d.lookAhead,h)),d.value!=0)){let m=e;if(d.extended>-1&&(e=this.addActions(t,d.extended,d.end,e)),e=this.addActions(t,d.value,d.end,e),!p.extend&&(n=d,e>m))break}}for(;this.actions.length>e;)this.actions.pop();return h&&t.setLookAhead(h),!n&&t.pos==this.stream.end&&(n=new qr,n.value=t.p.parser.eofTerm,n.start=n.end=t.pos,e=this.addActions(t,n.value,n.end,e)),this.mainToken=n,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new qr,{pos:n,p:r}=t;return e.start=n,e.end=Math.min(n+1,r.stream.end),e.value=n==r.stream.end?r.parser.eofTerm:0,e}updateCachedToken(t,e,n){let r=this.stream.clipPos(n.pos);if(e.token(this.stream.reset(r,t),n),t.value>-1){let{parser:o}=n.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==t.value){let l=o.specializers[s](this.stream.read(t.start,t.end),n);if(l>=0&&n.p.parser.dialect.allows(l>>1)){(l&1)==0?t.value=l>>1:t.extended=l>>1;break}}}else t.value=0,t.end=this.stream.clipPos(r+1)}putAction(t,e,n,r){for(let o=0;o<r;o+=3)if(this.actions[o]==t)return r;return this.actions[r++]=t,this.actions[r++]=e,this.actions[r++]=n,r}addActions(t,e,n,r){let{state:o}=t,{parser:s}=t.p,{data:l}=s;for(let h=0;h<2;h++)for(let c=s.stateSlot(o,h?2:1);;c+=3){if(l[c]==65535)if(l[c+1]==1)c=Je(l,c+2);else{r==0&&l[c+1]==2&&(r=this.putAction(Je(l,c+2),e,n,r));break}l[c]==e&&(r=this.putAction(Je(l,c+1),e,n,r))}return r}}var pu;(function(i){i[i.Distance=5]="Distance",i[i.MaxRemainingPerStep=3]="MaxRemainingPerStep",i[i.MinBufferLengthPrune=500]="MinBufferLengthPrune",i[i.ForceReduceLimit=10]="ForceReduceLimit",i[i.CutDepth=15e3]="CutDepth",i[i.CutTo=9e3]="CutTo"})(pu||(pu={}));class jv{constructor(t,e,n,r){this.parser=t,this.input=e,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new Rv(e,r),this.tokens=new Zv(t,this.stream),this.topTerm=t.top[1];let{from:o}=r[0];this.stacks=[ws.start(this,t.top[0],o)],this.fragments=n.length&&this.stream.end-o>t.bufferLength*4?new Wv(n,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,e=this.minStackPos,n=this.stacks=[],r,o;for(let s=0;s<t.length;s++){let l=t[s];for(;;){if(this.tokens.mainToken=null,l.pos>e)n.push(l);else{if(this.advanceStack(l,n,t))continue;{r||(r=[],o=[]),r.push(l);let h=this.tokens.getMainToken(l);o.push(h.value,h.end)}}break}}if(!n.length){let s=r&&Uv(r);if(s)return this.stackToTree(s);if(this.parser.strict)throw Le&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+e);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,n);if(s)return this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(n.length>s)for(n.sort((l,h)=>h.score-l.score);n.length>s;)n.pop();n.some(l=>l.reducePos>e)&&this.recovering--}else if(n.length>1){t:for(let s=0;s<n.length-1;s++){let l=n[s];for(let h=s+1;h<n.length;h++){let c=n[h];if(l.sameState(c)||l.buffer.length>500&&c.buffer.length>500)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)n.splice(h--,1);else{n.splice(s--,1);continue t}}}}this.minStackPos=n[0].pos;for(let s=1;s<n.length;s++)n[s].pos<this.minStackPos&&(this.minStackPos=n[s].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,n){let r=t.pos,{parser:o}=this,s=Le?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let c=t.curContext&&t.curContext.tracker.strict,p=c?t.curContext.hash:0;for(let d=this.fragments.nodeAt(r);d;){let m=this.parser.nodeSet.types[d.type.id]==d.type?o.getGoto(t.state,d.type.id):-1;if(m>-1&&d.length&&(!c||(d.prop(ft.contextHash)||0)==p))return t.useNode(d,m),Le&&console.log(s+this.stackID(t)+` (via reuse of ${o.getName(d.type.id)})`),!0;if(!(d instanceof Lt)||d.children.length==0||d.positions[0]>0)break;let v=d.children[0];if(v instanceof Lt&&d.positions[0]==0)d=v;else break}}let l=o.stateSlot(t.state,4);if(l>0)return t.reduce(l),Le&&console.log(s+this.stackID(t)+` (via always-reduce ${o.getName(l&65535)})`),!0;if(t.stack.length>=15e3)for(;t.stack.length>9e3&&t.forceReduce(););let h=this.tokens.getActions(t);for(let c=0;c<h.length;){let p=h[c++],d=h[c++],m=h[c++],v=c==h.length||!n,C=v?t:t.split();if(C.apply(p,d,m),Le&&console.log(s+this.stackID(C)+` (via ${(p&65536)==0?"shift":`reduce of ${o.getName(p&65535)}`} for ${o.getName(d)} @ ${r}${C==t?"":", split"})`),v)return!0;C.pos>r?e.push(C):n.push(C)}return!1}advanceFully(t,e){let n=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>n)return du(t,e),!0}}runRecovery(t,e,n){let r=null,o=!1;for(let s=0;s<t.length;s++){let l=t[s],h=e[s<<1],c=e[(s<<1)+1],p=Le?this.stackID(l)+" -> ":"";if(l.deadEnd&&(o||(o=!0,l.restart(),Le&&console.log(p+this.stackID(l)+" (restarted)"),this.advanceFully(l,n))))continue;let d=l.split(),m=p;for(let v=0;d.forceReduce()&&v<10&&(Le&&console.log(m+this.stackID(d)+" (via force-reduce)"),!this.advanceFully(d,n));v++)Le&&(m=this.stackID(d)+" -> ");for(let v of l.recoverByInsert(h))Le&&console.log(p+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,n);this.stream.end>l.pos?(c==l.pos&&(c++,h=0),l.recoverByDelete(h,c),Le&&console.log(p+this.stackID(l)+` (via recover-delete ${this.parser.getName(h)})`),du(l,n)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(t){return t.close(),Lt.build({buffer:bs.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(No||(No=new WeakMap)).get(t);return e||No.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function du(i,t){for(let e=0;e<t.length;e++){let n=t[e];if(n.pos==i.pos&&n.sameState(i)){t[e].score<i.score&&(t[e]=i);return}}t.push(i)}class qv{constructor(t,e,n){this.source=t,this.flags=e,this.disabled=n}allows(t){return!this.disabled||this.disabled[t]==0}}const Mo=i=>i;class zv{constructor(t){this.start=t.start,this.shift=t.shift||Mo,this.reduce=t.reduce||Mo,this.reuse=t.reuse||Mo,this.hash=t.hash||(()=>0),this.strict=t.strict!==!1}}class Ds extends xf{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (${14})`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let l=0;l<t.repeatNodeCount;l++)e.push("");let n=Object.keys(t.topRules).map(l=>t.topRules[l][1]),r=[];for(let l=0;l<e.length;l++)r.push([]);function o(l,h,c){r[l].push([h,h.deserialize(String(c))])}if(t.nodeProps)for(let l of t.nodeProps){let h=l[0];typeof h=="string"&&(h=ft[h]);for(let c=1;c<l.length;){let p=l[c++];if(p>=0)o(p,h,l[c++]);else{let d=l[c+-p];for(let m=-p;m>0;m--)o(l[c++],h,d);c++}}}this.nodeSet=new Vl(e.map((l,h)=>pe.define({name:h>=this.minRepeatTerm?void 0:l,id:h,props:r[h],top:n.indexOf(h)>-1,error:h==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(h)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=Of;let s=Lr(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(Ou),this.states=Lr(t.states,Uint32Array),this.data=Lr(t.stateData),this.goto=Lr(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(l=>typeof l=="number"?new zr(s,l):l),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,n){let r=new jv(this,t,e,n);for(let o of this.wrappers)r=o(r,t,e,n);return r}getGoto(t,e,n=!1){let r=this.goto;if(e>=r[0])return-1;for(let o=r[e+1];;){let s=r[o++],l=s&1,h=r[o++];if(l&&n)return h;for(let c=o+(s>>1);o<c;o++)if(r[o]==t)return h;if(l)return-1}}hasAction(t,e){let n=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(t,r?2:1),s;;o+=3){if((s=n[o])==65535)if(n[o+1]==1)s=n[o=Je(n,o+2)];else{if(n[o+1]==2)return Je(n,o+2);break}if(s==e||s==0)return Je(n,o+1)}return 0}stateSlot(t,e){return this.states[t*6+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){if(e==this.stateSlot(t,4))return!0;for(let n=this.stateSlot(t,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=Je(this.data,n+2);else return!1;if(e==Je(this.data,n+1))return!0}}nextStates(t){let e=[];for(let n=this.stateSlot(t,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=Je(this.data,n+2);else break;if((this.data[n+2]&1)==0){let r=this.data[n+1];e.some((o,s)=>s&1&&o==r)||e.push(this.data[n],r)}}return e}overrides(t,e){let n=mu(this.data,this.tokenPrecTable,e);return n<0||mu(this.data,this.tokenPrecTable,t)<n}configure(t){let e=Object.assign(Object.create(Ds.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let n=this.topRules[t.top];if(!n)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=n}return t.tokenizers&&(e.tokenizers=this.tokenizers.map(n=>{let r=t.tokenizers.find(o=>o.from==n);return r?r.to:n})),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map((n,r)=>{let o=t.specializers.find(l=>l.from==n.external);if(!o)return n;let s=Object.assign(Object.assign({},n),{external:o.to});return e.specializers[r]=Ou(s),s})),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),t.bufferLength!=null&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return e==null?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),n=e.map(()=>!1);if(t)for(let o of t.split(" ")){let s=e.indexOf(o);s>=0&&(n[s]=!0)}let r=null;for(let o=0;o<e.length;o++)if(!n[o])for(let s=this.dialects[e[o]],l;(l=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new qv(t,n,r)}static deserialize(t){return new Ds(t)}}function Je(i,t){return i[t]|i[t+1]<<16}function mu(i,t,e){for(let n=t,r;(r=i[n])!=65535;n++)if(r==e)return n-t;return-1}function Uv(i){let t=null;for(let e of i){let n=e.p.stoppedAt;(e.pos==e.p.stream.end||n!=null&&e.pos>n)&&e.p.parser.stateFlag(e.state,2)&&(!t||t.score<e.score)&&(t=e)}return t}function Ou(i){if(i.external){let t=i.extend?1:0;return(e,n)=>i.external(e,n)<<1|t}return i.get}const Gv=1,gu=281,yu=2,Vv=3,Qr=282,Hv=4,Jv=283,xu=284,Kv=286,t1=287,e1=5,i1=6,n1=1,r1=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],jp=125,s1=123,o1=59,vu=47,l1=42,a1=43,h1=45,u1=36,c1=96,f1=92,p1=new zv({start:!1,shift(i,t){return t==e1||t==i1||t==Kv?i:t==t1},strict:!1}),d1=new dr((i,t)=>{let{next:e}=i;(e==jp||e==-1||t.context)&&t.canShift(xu)&&i.acceptToken(xu)},{contextual:!0,fallback:!0}),m1=new dr((i,t)=>{let{next:e}=i,n;r1.indexOf(e)>-1||e==vu&&((n=i.peek(1))==vu||n==l1)||e!=jp&&e!=o1&&e!=-1&&!t.context&&t.canShift(gu)&&i.acceptToken(gu)},{contextual:!0}),O1=new dr((i,t)=>{let{next:e}=i;if((e==a1||e==h1)&&(i.advance(),e==i.next)){i.advance();let n=!t.context&&t.canShift(yu);i.acceptToken(n?yu:Vv)}},{contextual:!0}),g1=new dr(i=>{for(let t=!1,e=0;;e++){let{next:n}=i;if(n<0){e&&i.acceptToken(Qr);break}else if(n==c1){e?i.acceptToken(Qr):i.acceptToken(Jv,1);break}else if(n==s1&&t){e==1?i.acceptToken(Hv,1):i.acceptToken(Qr,-1);break}else if(n==10&&e){i.advance(),i.acceptToken(Qr);break}else n==f1&&i.advance();t=n==u1,i.advance()}}),y1=new dr((i,t)=>{if(!(i.next!=101||!t.dialectEnabled(n1))){i.advance();for(let e=0;e<6;e++){if(i.next!="xtends".charCodeAt(e))return;i.advance()}i.next>=57&&i.next<=65||i.next>=48&&i.next<=90||i.next==95||i.next>=97&&i.next<=122||i.next>160||i.acceptToken(Gv)}}),x1=Pf({"get set async static":$.modifier,"for while do if else switch try catch finally return throw break continue default case":$.controlKeyword,"in of await yield void typeof delete instanceof":$.operatorKeyword,"let var const function class extends":$.definitionKeyword,"import export from":$.moduleKeyword,"with debugger as new":$.keyword,TemplateString:$.special($.string),super:$.atom,BooleanLiteral:$.bool,this:$.self,null:$.null,Star:$.modifier,VariableName:$.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":$.function($.variableName),VariableDefinition:$.definition($.variableName),Label:$.labelName,PropertyName:$.propertyName,PrivatePropertyName:$.special($.propertyName),"CallExpression/MemberExpression/PropertyName":$.function($.propertyName),"FunctionDeclaration/VariableDefinition":$.function($.definition($.variableName)),"ClassDeclaration/VariableDefinition":$.definition($.className),PropertyDefinition:$.definition($.propertyName),PrivatePropertyDefinition:$.definition($.special($.propertyName)),UpdateOp:$.updateOperator,LineComment:$.lineComment,BlockComment:$.blockComment,Number:$.number,String:$.string,ArithOp:$.arithmeticOperator,LogicOp:$.logicOperator,BitOp:$.bitwiseOperator,CompareOp:$.compareOperator,RegExp:$.regexp,Equals:$.definitionOperator,Arrow:$.function($.punctuation),": Spread":$.punctuation,"( )":$.paren,"[ ]":$.squareBracket,"{ }":$.brace,"InterpolationStart InterpolationEnd":$.special($.brace),".":$.derefOperator,", ;":$.separator,TypeName:$.typeName,TypeDefinition:$.definition($.typeName),"type enum interface implements namespace module declare":$.definitionKeyword,"abstract global Privacy readonly override":$.modifier,"is keyof unique infer":$.operatorKeyword,JSXAttributeValue:$.attributeValue,JSXText:$.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":$.angleBracket,"JSXIdentifier JSXNameSpacedName":$.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":$.attributeName}),v1={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},P1={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},C1={__proto__:null,"<":129},S1=Ds.deserialize({version:14,states:"$8SO`QdOOO'QQ(C|O'#ChO'XOWO'#DVO)dQdO'#D]O)tQdO'#DhO){QdO'#DrO-xQdO'#DxOOQO'#E]'#E]O.]Q`O'#E[O.bQ`O'#E[OOQ(C['#Ef'#EfO0aQ(C|O'#ItO2wQ(C|O'#IuO3eQ`O'#EzO3jQ!bO'#FaOOQ(C['#FS'#FSO3rO#tO'#FSO4QQ&jO'#FhO5bQ`O'#FgOOQ(C['#Iu'#IuOOQ(CW'#It'#ItOOQS'#J^'#J^O5gQ`O'#HpO5lQ(ChO'#HqOOQS'#Ih'#IhOOQS'#Hr'#HrQ`QdOOO){QdO'#DjO5tQ`O'#G[O5yQ&jO'#CmO6XQ`O'#EZO6dQ`O'#EgO6iQ,UO'#FRO7TQ`O'#G[O7YQ`O'#G`O7eQ`O'#G`O7sQ`O'#GcO7sQ`O'#GdO7sQ`O'#GfO5tQ`O'#GiO8dQ`O'#GlO9rQ`O'#CdO:SQ`O'#GyO:[Q`O'#HPO:[Q`O'#HRO`QdO'#HTO:[Q`O'#HVO:[Q`O'#HYO:aQ`O'#H`O:fQ(CjO'#HfO){QdO'#HhO:qQ(CjO'#HjO:|Q(CjO'#HlO5lQ(ChO'#HnO){QdO'#DWOOOW'#Ht'#HtO;XOWO,59qOOQ(C[,59q,59qO=jQtO'#ChO=tQdO'#HuO>XQ`O'#IvO@WQtO'#IvO'dQdO'#IvO@_Q`O,59wO@uQ7[O'#DbOAnQ`O'#E]OA{Q`O'#JROBWQ`O'#JQOBWQ`O'#JQOB`Q`O,5:yOBeQ`O'#JPOBlQaO'#DyO5yQ&jO'#EZOBzQ`O'#EZOCVQpO'#FROOQ(C[,5:S,5:SOC_QdO,5:SOE]Q(C|O,5:^OEyQ`O,5:dOFdQ(ChO'#JOO7YQ`O'#I}OFkQ`O'#I}OFsQ`O,5:xOFxQ`O'#I}OGWQdO,5:vOIWQ&jO'#EWOJeQ`O,5:vOKwQ&jO'#DlOLOQdO'#DqOLYQ7[O,5;PO){QdO,5;POOQS'#Er'#ErOOQS'#Et'#EtO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;ROOQS'#Ex'#ExOLbQdO,5;cOOQ(C[,5;h,5;hOOQ(C[,5;i,5;iONbQ`O,5;iOOQ(C[,5;j,5;jO){QdO'#IPONgQ(ChO,5<TO! RQ&jO,5;RO){QdO,5;fO! kQ!bO'#JVO! YQ!bO'#JVO! rQ!bO'#JVO!!TQ!bO,5;qOOOO,5;{,5;{O!!cQdO'#FcOOOO'#IO'#IOO3rO#tO,5;nO!!jQ!bO'#FeOOQ(C[,5;n,5;nO!#WQ,VO'#CrOOQ(C]'#Cu'#CuO!#kQ`O'#CuO!#pOWO'#CyO!$^Q,VO,5<QO!$eQ`O,5<SO!%tQ&jO'#FrO!&RQ`O'#FsO!&WQ`O'#FsO!&]Q&jO'#FwO!'[Q7[O'#F{O!'}Q,VO'#IqOOQ(C]'#Iq'#IqO!(XQaO'#IpO!(gQ`O'#IoO!(oQ`O'#CqOOQ(C]'#Cs'#CsOOQ(C]'#C|'#C|O!(wQ`O'#DOOJjQ&jO'#FjOJjQ&jO'#FlO!(|Q`O'#FnO!)RQ`O'#FoO!&WQ`O'#FuOJjQ&jO'#FzO!)WQ`O'#E^O!)oQ`O,5<RO`QdO,5>[OOQS'#Ik'#IkOOQS,5>],5>]OOQS-E;p-E;pO!+kQ(C|O,5:UOOQ(CX'#Cp'#CpO!,[Q&kO,5<vOOQO'#Cf'#CfO!,mQ(ChO'#IlO5bQ`O'#IlO:aQ`O,59XO!-OQ!bO,59XO!-WQ&jO,59XO5yQ&jO,59XO!-cQ`O,5:vO!-kQ`O'#GxO!-yQ`O'#JbO){QdO,5;kO!.RQ7[O,5;mO!.WQ`O,5=cO!.]Q`O,5=cO!.bQ`O,5=cO5lQ(ChO,5=cO5tQ`O,5<vO!.pQ`O'#E_O!/UQ7[O'#E`OOQ(CW'#JP'#JPO!/gQ(ChO'#J_O5lQ(ChO,5<zO7sQ`O,5=QOOQP'#Cr'#CrO!/rQ!bO,5<}O!/zQ!cO,5=OO!0VQ`O,5=QO!0[QpO,5=TO:aQ`O'#GnO5tQ`O'#GpO!0dQ`O'#GpO5yQ&jO'#GsO!0iQ`O'#GsOOQS,5=W,5=WO!0nQ`O'#GtO!0vQ`O'#CmO!0{Q`O,59OO!1VQ`O,59OO!3XQdO,59OOOQS,59O,59OO!3fQ(ChO,59OO){QdO,59OO!3qQdO'#G{OOQS'#G|'#G|OOQS'#G}'#G}O`QdO,5=eO!4RQ`O,5=eO){QdO'#DxO`QdO,5=kO`QdO,5=mO!4WQ`O,5=oO`QdO,5=qO!4]Q`O,5=tO!4bQdO,5=zOOQS,5>Q,5>QO){QdO,5>QO5lQ(ChO,5>SOOQS,5>U,5>UO!8cQ`O,5>UOOQS,5>W,5>WO!8cQ`O,5>WOOQS,5>Y,5>YO!8hQpO,59rOOOW-E;r-E;rOOQ(C[1G/]1G/]O!8mQtO,5>aO'dQdO,5>aOOQO,5>f,5>fO!8wQdO'#HuOOQO-E;s-E;sO!9UQ`O,5?bO!9^QtO,5?bO!9eQ`O,5?lOOQ(C[1G/c1G/cO!9mQ!bO'#DTOOQO'#Ix'#IxO){QdO'#IxO!:[Q!bO'#IxO!:yQ!bO'#DcO!;[Q7[O'#DcO!=gQdO'#DcO!=nQ`O'#IwO!=vQ`O,59|O!={Q`O'#EaO!>ZQ`O'#JSO!>cQ`O,5:zO!>yQ7[O'#DcO){QdO,5?mO!?TQ`O'#HzOOQO-E;x-E;xO!9eQ`O,5?lOOQ(CW1G0e1G0eO!@aQ7[O'#D|OOQ(C[,5:e,5:eO){QdO,5:eOIWQ&jO,5:eO!@hQaO,5:eO:aQ`O,5:uO!-OQ!bO,5:uO!-WQ&jO,5:uO5yQ&jO,5:uOOQ(C[1G/n1G/nOOQ(C[1G0O1G0OOOQ(CW'#EV'#EVO){QdO,5?jO!@sQ(ChO,5?jO!AUQ(ChO,5?jO!A]Q`O,5?iO!AeQ`O'#H|O!A]Q`O,5?iOOQ(CW1G0d1G0dO7YQ`O,5?iOOQ(C[1G0b1G0bO!BPQ(C|O1G0bO!CRQ(CyO,5:rOOQ(C]'#Fq'#FqO!CoQ(C}O'#IqOGWQdO1G0bO!EqQ,VO'#IyO!E{Q`O,5:WO!FQQtO'#IzO){QdO'#IzO!F[Q`O,5:]OOQ(C]'#DT'#DTOOQ(C[1G0k1G0kO!FaQ`O1G0kO!HrQ(C|O1G0mO!HyQ(C|O1G0mO!K^Q(C|O1G0mO!KeQ(C|O1G0mO!MlQ(C|O1G0mO!NPQ(C|O1G0mO#!pQ(C|O1G0mO#!wQ(C|O1G0mO#%[Q(C|O1G0mO#%cQ(C|O1G0mO#'WQ(C|O1G0mO#*QQMlO'#ChO#+{QMlO1G0}O#-vQMlO'#IuOOQ(C[1G1T1G1TO#.ZQ(C|O,5>kOOQ(CW-E;}-E;}O#.zQ(C}O1G0mOOQ(C[1G0m1G0mO#1PQ(C|O1G1QO#1pQ!bO,5;sO#1uQ!bO,5;tO#1zQ!bO'#F[O#2`Q`O'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#2eQ!bO1G1]OOQ(C[1G1]1G1]OOOO1G1f1G1fO#2sQMlO'#ItO#2}Q`O,5;}OLbQdO,5;}OOOO-E;|-E;|OOQ(C[1G1Y1G1YOOQ(C[,5<P,5<PO#3SQ!bO,5<POOQ(C],59a,59aOIWQ&jO'#C{OOOW'#Hs'#HsO#3XOWO,59eOOQ(C],59e,59eO){QdO1G1lO!)RQ`O'#IRO#3dQ`O,5<eOOQ(C],5<b,5<bOOQO'#GV'#GVOJjQ&jO,5<pOOQO'#GX'#GXOJjQ&jO,5<rOIWQ&jO,5<tOOQO1G1n1G1nO#3oQqO'#CpO#4SQqO,5<^O#4ZQ`O'#JZO5tQ`O'#JZO#4iQ`O,5<`OJjQ&jO,5<_O#4nQ`O'#FtO#4yQ`O,5<_O#5OQqO'#FqO#5]QqO'#J[O#5gQ`O'#J[OIWQ&jO'#J[O#5lQ`O,5<cOOQ(CW'#Dg'#DgO#5qQ!bO'#F|O!'VQ7[O'#F|O!'VQ7[O'#GOO#6SQ`O'#GPO!&WQ`O'#GSO#6XQ(ChO'#ITO#6dQ7[O,5<gOOQ(C],5<g,5<gO#6kQ7[O'#F|O#6yQ7[O'#F}O#7RQ7[O'#F}OOQ(C],5<u,5<uOJjQ&jO,5?[OJjQ&jO,5?[O#7WQ`O'#IUO#7cQ`O,5?ZO#7kQ`O,59]OOQ(C]'#Ch'#ChO#8[Q,VO,59jOOQ(C],59j,59jO#8}Q,VO,5<UO#9pQ,VO,5<WO#9zQ`O,5<YOOQ(C],5<Z,5<ZO#:PQ`O,5<aO#:UQ,VO,5<fOGWQdO1G1mO#:fQ`O1G1mOOQS1G3v1G3vOOQ(C[1G/p1G/pONbQ`O1G/pOOQS1G2b1G2bOIWQ&jO1G2bO){QdO1G2bOIWQ&jO1G2bO#:kQaO1G2bO#<QQ&jO'#EWOOQ(CW,5?W,5?WO#<[Q(ChO,5?WOOQS1G.s1G.sO:aQ`O1G.sO!-OQ!bO1G.sO!-WQ&jO1G.sO#<mQ`O1G0bO#<rQ`O'#ChO#<}Q`O'#JcO#=VQ`O,5=dO#=[Q`O'#JcO#=aQ`O'#JcO#=iQ`O'#I^O#=wQ`O,5?|O#>PQtO1G1VOOQ(C[1G1X1G1XO5tQ`O1G2}O#>WQ`O1G2}O#>]Q`O1G2}O#>bQ`O1G2}OOQS1G2}1G2}O#>gQ&kO1G2bO7YQ`O'#JQO7YQ`O'#EaO7YQ`O'#IWO#>xQ(ChO,5?yOOQS1G2f1G2fO!0VQ`O1G2lOIWQ&jO1G2iO#?TQ`O1G2iOOQS1G2j1G2jOIWQ&jO1G2jO#?YQaO1G2jO#?bQ7[O'#GhOOQS1G2l1G2lO!'VQ7[O'#IYO!0[QpO1G2oOOQS1G2o1G2oOOQS,5=Y,5=YO#?jQ&kO,5=[O5tQ`O,5=[O#6SQ`O,5=_O5bQ`O,5=_O!-OQ!bO,5=_O!-WQ&jO,5=_O5yQ&jO,5=_O#?{Q`O'#JaO#@WQ`O,5=`OOQS1G.j1G.jO#@]Q(ChO1G.jO#@hQ`O1G.jO#@mQ`O1G.jO5lQ(ChO1G.jO#@uQtO,5@OO#APQ`O,5@OO#A[QdO,5=gO#AcQ`O,5=gO7YQ`O,5@OOOQS1G3P1G3PO`QdO1G3POOQS1G3V1G3VOOQS1G3X1G3XO:[Q`O1G3ZO#AhQdO1G3]O#EcQdO'#H[OOQS1G3`1G3`O#EpQ`O'#HbO:aQ`O'#HdOOQS1G3f1G3fO#ExQdO1G3fO5lQ(ChO1G3lOOQS1G3n1G3nOOQ(CW'#Fx'#FxO5lQ(ChO1G3pO5lQ(ChO1G3rOOOW1G/^1G/^O#IvQpO,5<TO#JOQtO1G3{OOQO1G4Q1G4QO){QdO,5>aO#JYQ`O1G4|O#JbQ`O1G5WO#JjQ`O,5?dOLbQdO,5:{O7YQ`O,5:{O:aQ`O,59}OLbQdO,59}O!-OQ!bO,59}O#JoQMlO,59}OOQO,5:{,5:{O#JyQ7[O'#HvO#KaQ`O,5?cOOQ(C[1G/h1G/hO#KiQ7[O'#H{O#K}Q`O,5?nOOQ(CW1G0f1G0fO!;[Q7[O,59}O#LVQtO1G5XO7YQ`O,5>fOOQ(CW'#ES'#ESO#LaQ(DjO'#ETO!@XQ7[O'#D}OOQO'#Hy'#HyO#L{Q7[O,5:hOOQ(C[,5:h,5:hO#MSQ7[O'#D}O#MeQ7[O'#D}O#MlQ7[O'#EYO#MoQ7[O'#ETO#M|Q7[O'#ETO!@XQ7[O'#ETO#NaQ`O1G0PO#NfQqO1G0POOQ(C[1G0P1G0PO){QdO1G0POIWQ&jO1G0POOQ(C[1G0a1G0aO:aQ`O1G0aO!-OQ!bO1G0aO!-WQ&jO1G0aO#NmQ(C|O1G5UO){QdO1G5UO#N}Q(ChO1G5UO$ `Q`O1G5TO7YQ`O,5>hOOQO,5>h,5>hO$ hQ`O,5>hOOQO-E;z-E;zO$ `Q`O1G5TO$ vQ(C}O,59jO$#xQ(C}O,5<UO$%}Q(C}O,5<WO$(SQ(C}O,5<fOOQ(C[7+%|7+%|O$*_Q(C|O7+%|O$+OQ&jO'#HwO$+YQ`O,5?eOOQ(C]1G/r1G/rO$+bQdO'#HxO$+oQ`O,5?fO$+wQtO,5?fOOQ(C[1G/w1G/wOOQ(C[7+&V7+&VO$,RQMlO,5:^O){QdO7+&iO$,]QMlO,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$,jQ!LQO,5;vOLbQdO,5;uOOQO-E;{-E;{OOQ(C[7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$,uQ`O1G1iOOQ(C[1G1k1G1kO$,zQqO,59gOOOW-E;q-E;qOOQ(C]1G/P1G/PO$-RQ(C|O7+'WOOQ(C],5>m,5>mO$-rQ`O,5>mOOQ(C]1G2P1G2PP$-wQ`O'#IRPOQ(C]-E<P-E<PO$.hQ,VO1G2[O$/ZQ,VO1G2^O$/eQqO1G2`OOQ(C]1G1x1G1xO$/lQ`O'#IQO$/zQ`O,5?uO$/zQ`O,5?uO$0SQ`O,5?uO$0_Q`O,5?uOOQO1G1z1G1zO$0mQ,VO1G1yOJjQ&jO1G1yO$0}Q&jO'#ISO$1_Q`O,5?vOIWQ&jO,5?vO$1gQqO,5?vOOQ(C]1G1}1G1}OOQ(CW,5<h,5<hOOQ(CW,5<i,5<iO$1qQ`O,5<iO#5}Q`O,5<iO!-OQ!bO,5<hO$1vQ`O,5<jOOQ(CW,5<k,5<kO$1qQ`O,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ(C]1G2R1G2RO!'VQ7[O,5<hO$2OQ`O,5<iO!'VQ7[O,5<jO!'VQ7[O,5<iO$2ZQ,VO1G4vO$2eQ,VO1G4vOOQO,5>p,5>pOOQO-E<S-E<SOOQP1G.w1G.wO!.RQ7[O,59lO){QdO,59lO$2rQ`O1G1tOJjQ&jO1G1{O$2wQ(C|O7+'XOOQ(C[7+'X7+'XOGWQdO7+'XOOQ(C[7+%[7+%[O$3hQqO'#J]O#NaQ`O7+'|O$3rQ`O7+'|O$3zQqO7+'|OOQS7+'|7+'|OIWQ&jO7+'|O){QdO7+'|OIWQ&jO7+'|O$4UQ(CyO'#ChO$4iQ(CyO,5<lO$5ZQ`O,5<lOOQ(CW1G4r1G4rOOQS7+$_7+$_O:aQ`O7+$_O!-OQ!bO7+$_OGWQdO7+%|O$5`Q`O'#I]O$5qQ`O,5?}OOQO1G3O1G3OO5tQ`O,5?}O$5qQ`O,5?}O$5yQ`O,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ(C[7+&q7+&qO$6OQ`O7+(iO5lQ(ChO7+(iO5tQ`O7+(iO$6TQ`O7+(iO$6YQaO7+'|OOQ(CW,5>r,5>rOOQ(CW-E<U-E<UOOQS7+(W7+(WO$6hQ(CyO7+(TOIWQ&jO7+(TO$6rQqO7+(UOOQS7+(U7+(UOIWQ&jO7+(UO$6yQ`O'#J`O$7UQ`O,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQS7+(Z7+(ZO$8OQ7[O'#GqOOQS1G2v1G2vOIWQ&jO1G2vO){QdO1G2vOIWQ&jO1G2vO$8VQaO1G2vO$8eQ&kO1G2vO5lQ(ChO1G2yO#6SQ`O1G2yO5bQ`O1G2yO!-OQ!bO1G2yO!-WQ&jO1G2yO$8vQ`O'#I[O$9RQ`O,5?{O$9ZQ7[O,5?{OOQ(CW1G2z1G2zOOQS7+$U7+$UO$9cQ`O7+$UO5lQ(ChO7+$UO$9hQ`O7+$UO){QdO1G5jO){QdO1G5kO$9mQdO1G3RO$9tQ`O1G3RO$9yQdO1G3RO$:QQ(ChO1G5jOOQS7+(k7+(kO5lQ(ChO7+(uO`QdO7+(wOOQS'#Jf'#JfOOQS'#I_'#I_O$:[QdO,5=vOOQS,5=v,5=vO){QdO'#H]O$:iQ`O'#H_OOQS,5=|,5=|O7YQ`O,5=|OOQS,5>O,5>OOOQS7+)Q7+)QOOQS7+)W7+)WOOQS7+)[7+)[OOQS7+)^7+)^OOQO1G5O1G5OO$:nQMlO1G0gO$:xQ`O1G0gOOQO1G/i1G/iO$;TQMlO1G/iO:aQ`O1G/iOLbQdO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!-OQ!bO1G/iO:aQ`O,5:iOOQO,5:o,5:oO){QdO,5:oO$;_Q(ChO,5:oO$;jQ(ChO,5:oO!-OQ!bO,5:iOOQO-E;w-E;wOOQ(C[1G0S1G0SO!@XQ7[O,5:iO$;xQ7[O,5:iO$<ZQ(DjO,5:oO$<uQ7[O,5:iO!@XQ7[O,5:oOOQO,5:t,5:tO$<|Q7[O,5:oO$=ZQ(ChO,5:oOOQ(C[7+%k7+%kO#NaQ`O7+%kO#NfQqO7+%kOOQ(C[7+%{7+%{O:aQ`O7+%{O!-OQ!bO7+%{O$=oQ(C|O7+*pO){QdO7+*pOOQO1G4S1G4SO7YQ`O1G4SO$>PQ`O7+*oO$>XQ(C}O1G2[O$@^Q(C}O1G2^O$BcQ(C}O1G1yO$DnQ,VO,5>cOOQO-E;u-E;uO$DxQtO,5>dO){QdO,5>dOOQO-E;v-E;vO$ESQ`O1G5QO$E[QMlO1G0bO$GcQMlO1G0mO$GjQMlO1G0mO$IkQMlO1G0mO$IrQMlO1G0mO$KgQMlO1G0mO$KzQMlO1G0mO$NXQMlO1G0mO$N`QMlO1G0mO%!aQMlO1G0mO%!hQMlO1G0mO%$]QMlO1G0mO%$pQ(C|O<<JTO%%rQMmO1G0mO%'|QMmO'#IqO%)iQMlO1G1QOLbQdO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%)vQ`O1G1aO%){QMlO,5>kOOOO7+'T7+'TOOOW1G/R1G/ROOQ(C]1G4X1G4XOJjQ&jO7+'zO%*VQ`O,5>lO5tQ`O,5>lOOQO-E<O-E<OO%*eQ`O1G5aO%*eQ`O1G5aO%*mQ`O1G5aO%*xQ,VO7+'eO%+YQqO,5>nO%+dQ`O,5>nOIWQ&jO,5>nOOQO-E<Q-E<QO%+iQqO1G5bO%+sQ`O1G5bOOQ(CW1G2T1G2TO$1qQ`O1G2TOOQ(CW1G2S1G2SO%+{Q`O1G2UOIWQ&jO1G2UOOQ(CW1G2Y1G2YO!-OQ!bO1G2SO#5}Q`O1G2TO%,QQ`O1G2UO%,YQ`O1G2TOJjQ&jO7+*bOOQ(C]1G/W1G/WO%,eQ`O1G/WOOQ(C]7+'`7+'`O%,jQ,VO7+'gO%,zQ(C|O<<JsOOQ(C[<<Js<<JsOIWQ&jO'#IVO%-kQ`O,5?wOOQS<<Kh<<KhOIWQ&jO<<KhO#NaQ`O<<KhO%-sQ`O<<KhO%-{QqO<<KhOIWQ&jO1G2WOOQS<<Gy<<GyO:aQ`O<<GyO%.VQ(C|O<<IhOOQ(C[<<Ih<<IhOOQO,5>w,5>wO%.vQ`O,5>wO%.{Q`O,5>wOOQO-E<Z-E<ZO%/TQ`O1G5iO%/TQ`O1G5iO5tQ`O1G5iO%/]Q`O<<LTOOQS<<LT<<LTO%/bQ`O<<LTO5lQ(ChO<<LTO){QdO<<KhOIWQ&jO<<KhOOQS<<Ko<<KoO$6hQ(CyO<<KoOOQS<<Kp<<KpO$6rQqO<<KpO%/gQ7[O'#IXO%/rQ`O,5?zOLbQdO,5?zOOQS1G2n1G2nO#LaQ(DjO'#ETO!@XQ7[O'#GrOOQO'#IZ'#IZO%/zQ7[O,5=]OOQS,5=],5=]O%0RQ7[O'#ETO%0^Q7[O'#ETO%0uQ7[O'#ETO%1PQ7[O'#GrO%1bQ`O7+(bO%1gQ`O7+(bO%1oQqO7+(bOOQS7+(b7+(bOIWQ&jO7+(bO){QdO7+(bOIWQ&jO7+(bO%1yQaO7+(bOOQS7+(e7+(eO5lQ(ChO7+(eO#6SQ`O7+(eO5bQ`O7+(eO!-OQ!bO7+(eO%2XQ`O,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%2dQ`O1G5gO5lQ(ChO<<GpOOQS<<Gp<<GpO%2lQ`O<<GpO%2qQ`O7++UO%2vQ`O7++VOOQS7+(m7+(mO%2{Q`O7+(mO%3QQdO7+(mO%3XQ`O7+(mO){QdO7++UO){QdO7++VOOQS<<La<<LaOOQS<<Lc<<LcOOQS-E<]-E<]OOQS1G3b1G3bO%3^Q`O,5=wOOQS,5=y,5=yO%3cQ`O1G3hOLbQdO7+&ROOQO7+%T7+%TO%3hQMlO1G5XO:aQ`O7+%TOOQO1G0T1G0TO%3rQ(C|O1G0ZOOQO1G0Z1G0ZO){QdO1G0ZO%3|Q(ChO1G0ZO:aQ`O1G0TO!-OQ!bO1G0TO!@XQ7[O1G0TO%4XQ(ChO1G0ZO%4gQ7[O1G0TO%4xQ(ChO1G0ZO%5^Q(DjO1G0ZO%5hQ7[O1G0TO!@XQ7[O1G0ZOOQ(C[<<IV<<IVOOQ(C[<<Ig<<IgO:aQ`O<<IgO%5oQ(C|O<<N[OOQO7+)n7+)nO%6PQ(C}O7+'eO%8[Q(C}O7+'gO%:gQtO1G4OO%:qQMlO7+%|O%;gQMmO,59jO%=hQMmO,5<UO%?lQMmO,5<WO%A[QMmO,5<fO%B}QMlO7+'WO%C[QMlO7+'XO%CiQ`O,5;xOOQO7+&{7+&{O%CnQ,VO<<KfOOQO1G4W1G4WO%CuQ`O1G4WO%DQQ`O1G4WO%D`Q`O7+*{O%D`Q`O7+*{OIWQ&jO1G4YO%DhQqO1G4YO%DrQ`O7+*|OOQ(CW7+'o7+'oO$1qQ`O7+'pO%DzQqO7+'pOOQ(CW7+'n7+'nO$1qQ`O7+'oO%ERQ`O7+'pOIWQ&jO7+'pO#5}Q`O7+'oO%EWQ,VO<<M|OOQ(C]7+$r7+$rO%EbQqO,5>qOOQO-E<T-E<TO#NaQ`OANASOOQSANASANASOIWQ&jOANASO%ElQ(CyO7+'rOOQSAN=eAN=eO5tQ`O1G4cOOQO1G4c1G4cO%E|Q`O1G4cO%FRQ`O7++TO%FRQ`O7++TO5lQ(ChOANAoO%FZQ`OANAoOOQSANAoANAoO%F`Q`OANASO%FhQqOANASOOQSANAZANAZOOQSANA[ANA[O%FrQ`O,5>sOOQO-E<V-E<VO%F}QMlO1G5fO#6SQ`O,5=^O5bQ`O,5=^O!-OQ!bO,5=^OOQO-E<X-E<XOOQS1G2w1G2wO$<ZQ(DjO,5:oO!@XQ7[O,5=^O%GXQ7[O,5=^O%GjQ7[O,5:oOOQS<<K|<<K|OIWQ&jO<<K|O%1bQ`O<<K|O%GtQ`O<<K|O%G|QqO<<K|O){QdO<<K|OIWQ&jO<<K|OOQS<<LP<<LPO5lQ(ChO<<LPO#6SQ`O<<LPO5bQ`O<<LPO%HWQ7[O1G4bO%H`Q`O7++ROOQSAN=[AN=[O5lQ(ChOAN=[OOQS<<Np<<NpOOQS<<Nq<<NqOOQS<<LX<<LXO%HhQ`O<<LXO%HmQdO<<LXO%HtQ`O<<NpO%HyQ`O<<NqOOQS1G3c1G3cO:aQ`O7+)SO%IOQMlO<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%3rQ(C|O7+%uO){QdO7+%uOOQO7+%o7+%oO:aQ`O7+%oO!-OQ!bO7+%oO%IYQ(ChO7+%uO!@XQ7[O7+%oO%IeQ(ChO7+%uO%IsQ7[O7+%oO%JUQ(ChO7+%uOOQ(C[AN?RAN?RO%JjQMlO<<JTO%JwQMmO1G1yO%MOQMmO1G2[O& SQMmO1G2^O&!rQMlO<<JsO&#PQMlO<<IhOOQO1G1d1G1dOJjQ&jOANAQOOQO7+)r7+)rO&#^Q`O7+)rO&#iQ`O<<NgO&#qQqO7+)tOOQ(CW<<K[<<K[O$1qQ`O<<K[OOQ(CW<<KZ<<KZO&#{QqO<<K[O$1qQ`O<<KZOOQSG26nG26nO#NaQ`OG26nOOQO7+)}7+)}O5tQ`O7+)}O&$SQ`O<<NoOOQSG27ZG27ZO5lQ(ChOG27ZOIWQ&jOG26nOLbQdO1G4_O&$[Q`O7++QO5lQ(ChO1G2xO#6SQ`O1G2xO5bQ`O1G2xO!-OQ!bO1G2xO!@XQ7[O1G2xO%5^Q(DjO1G0ZO&$dQ7[O1G2xO%1bQ`OANAhOOQSANAhANAhOIWQ&jOANAhO&$uQ`OANAhO&$}QqOANAhOOQSANAkANAkO5lQ(ChOANAkO#6SQ`OANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQSG22vG22vOOQSANAsANAsO&%XQ`OANAsOOQSAND[AND[OOQSAND]AND]OOQS<<Ln<<LnOOQO<<Ia<<IaO%3rQ(C|O<<IaOOQO<<IZ<<IZO:aQ`O<<IZO){QdO<<IaO!-OQ!bO<<IZO&%^Q(ChO<<IaO!@XQ7[O<<IZO&%iQ(ChO<<IaO&%wQMmO7+'eO&'jQMmO7+'gO&)]Q,VOG26lOOQO<<M^<<M^OOQ(CWAN@vAN@vO$1qQ`OAN@vOOQ(CWAN@uAN@uOOQSLD,YLD,YOOQO<<Mi<<MiOOQSLD,uLD,uO#NaQ`OLD,YO&)mQMlO7+)yOOQO7+(d7+(dO5lQ(ChO7+(dO#6SQ`O7+(dO5bQ`O7+(dO!-OQ!bO7+(dO!@XQ7[O7+(dOOQSG27SG27SO%1bQ`OG27SOIWQ&jOG27SOOQSG27VG27VO5lQ(ChOG27VOOQSG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%3rQ(C|OAN>{O:aQ`OAN>uO){QdOAN>{O!-OQ!bOAN>uO&)wQ(ChOAN>{O&*SQ(C}OG26lOOQ(CWG26bG26bOOQS!$( t!$( tOOQO<<LO<<LOO5lQ(ChO<<LOO#6SQ`O<<LOO5bQ`O<<LOO!-OQ!bO<<LOOOQSLD,nLD,nO%1bQ`OLD,nOOQSLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%3rQ(C|OG24gO:aQ`OG24aO){QdOG24gO&,pQ!LRO,5:rO&-gQ$ITO'#IqOOQOANAjANAjO5lQ(ChOANAjO#6SQ`OANAjO5bQ`OANAjOOQS!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%3rQ(C|OLD*RO&.ZQMmOG26lO&/|Q!LRO,59jO&0pQ!LRO,5<UO&1dQ!LRO,5<WO&2WQ!LRO,5<fOOQOG27UG27UO5lQ(ChOG27UO#6SQ`OG27UOOQO!$'Mm!$'MmO&2}Q!LRO1G2[O&3qQ!LRO1G2^O&4eQ!LRO1G1yOOQOLD,pLD,pO5lQ(ChOLD,pO&5[Q!LRO7+'eO&6RQ!LRO7+'gOOQO!$(![!$(![O&6xQ!LROG26lOLbQdO'#DrO&7oQtO'#ItOLbQdO'#DjO&7vQ(C|O'#ChO&8aQtO'#ChO&8qQdO,5:vO&:qQ&jO'#EWOLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO'#IPO&<OQ`O,5<TO&=eQ&jO,5;ROLbQdO,5;fO!(wQ`O'#DOO!(wQ`O'#DOO!(wQ`O'#DOOIWQ&jO'#FjO&:qQ&jO'#FjO&<WQ&jO'#FjOIWQ&jO'#FlO&:qQ&jO'#FlO&<WQ&jO'#FlOIWQ&jO'#FzO&:qQ&jO'#FzO&<WQ&jO'#FzOLbQdO,5?mO&8qQdO1G0bO&=lQMlO'#ChOLbQdO1G1lOIWQ&jO,5<pO&:qQ&jO,5<pO&<WQ&jO,5<pOIWQ&jO,5<rO&:qQ&jO,5<rO&<WQ&jO,5<rOIWQ&jO,5<_O&:qQ&jO,5<_O&<WQ&jO,5<_O&8qQdO1G1mOLbQdO7+&iOIWQ&jO1G1yO&:qQ&jO1G1yO&<WQ&jO1G1yOIWQ&jO1G1{O&:qQ&jO1G1{O&<WQ&jO1G1{O&8qQdO7+'XO&8qQdO7+%|O&=vQ`O7+'pOIWQ&jOANAQO&:qQ&jOANAQO&<WQ&jOANAQO&=vQ`O<<K[O&=vQ`OAN@vO&={Q`O'#E[O&>QQ`O'#E[O&>YQ`O'#EzO&>_Q`O'#EgO&>dQ`O'#JRO&>oQ`O'#JPO&>zQ`O,5:vO&?PQ,VO,5<QO&?WQ`O'#FsO&?]Q`O'#FsO&?bQ`O'#FsO&?gQ`O,5<RO&?oQ`O,5:vO&?wQMlO1G0}O&@OQ`O,5<_O&@TQ`O,5<_O&@YQ`O,5<_O&@_Q`O,5<aO&@dQ`O,5<aO&@iQ`O,5<aO&@nQ`O1G1mO&@sQ`O1G0bO&@xQ`O1G2UO&@}Q,VO<<KfO&AUQ,VO<<KfO&A]Q,VO<<KfO&AdQqO7+'pO&AkQ`O7+'pO&ApQqO<<K[O4QQ&jO'#FhO5bQ`O'#FgOBzQ`O'#EZOLbQdO,5;cO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FuO!&WQ`O'#FuO!&WQ`O'#FuO&AwQ`O,5<jOJjQ&jO7+'zOJjQ&jO7+'zOJjQ&jO7+'zOIWQ&jO1G2UO&BPQ`O1G2UOIWQ&jO7+'pO!'VQ7[O'#GOO$/eQqO1G2`O$/eQqO1G2`O$/eQqO1G2`O!'VQ7[O,5<jOIWQ&jO,5<tOIWQ&jO,5<tOIWQ&jO,5<t",stateData:"&B}~O'YOS'ZOSTOSUOS~OQTORTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OQ[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOS!WO'U!XO'V!ZO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9bO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOQ'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']#pO'b$PO'f#sO'a'cP~O!d$ZO~O!]$]O~O_$^O'W$^O~O']$bO~O!d$ZO']$bO'^$dO'b$PO~Oc$jO!d$ZO']$bO~O#c#TO~O]$sOu$oO!T$lO!d$nO%R$rO']$bO'^$dO^(UP~O!n$tO~Ox$uO!T$vO']$bO~Ox$uO!T$vO%Z$zO']$bO~O']${O~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%UOc%TO!n%RO%P%SO%c%QO~P7xOb%XOcmO!T%WO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%[O!{%_O%R%YO'^$dO~P8wO!d%`O!g%dO~O!d%eO~O!TSO~O_$^O'T%mO'W$^O~O_$^O'T%pO'W$^O~O_$^O'T%rO'W$^O~OS!WO'U!XO'V%vO~OQ[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;dO!Q%xO!O&iX!O&nX!R&iX!R&nX~P'dO!R%zO!O'jX~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R%zO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>aO!O&PO~Ox&SO!W&^O!X&VO!Y&VO'^$dO~O]&TOk&TO!Q&WO'g&QO!S'kP!S'vP~P@dO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PA]O!{&_O!O'uX!R'uX~O!R&`O!O'tX~O!O&cO~O!{#eO~PA]OP&gO!T&dO!o&fO']$bO~Oc&lO!d$ZO']$bO~Ou$oO!d$nO~O!S&mO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOQ!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCfO!c&nO~O!]!wO!{&pO'p&oO!R'rX_'rX'W'rX~O!c'rX~PFOO!R&tO!c'qX~O!c&vO~Ox$uO!T$vO#V&wO']$bO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO']&{O'b$PO'f#sO~O#W&}O~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']&{O'b$PO'f#sO~O'a'mP~PJjO!Q'RO!c'nP~P){O'g'TO'oYO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'jO~PIWO!]'lO!T'yX#w'yX#z'yX$R'yX~Ou'mO~P! YOu'mO!T'yX#w'yX#z'yX$R'yX~O!T'oO#w'sO#z'nO$R'tO~O!Q'wO~PLbO#z#fO$R'zO~OP$eXu$eXx$eX!b$eX'w$eX'x$eX~OPfX!RfX!{fX'afX'a$eX~P!!rOk'|O~OS'}O'U(OO'V(QO~OP(ZOu(SOx(TO'w(VO'x(XO~O'a(RO~P!#{O'a([O~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~O!Q(`O'](]O!c'}P~P!$jO#W(bO~O!d(cO~O!Q(hO'](eO!O(OP~P!$jOj(uOx(mO!W(sO!X(lO!Y(lO!d(cO!x(tO$w(oO'^$dO'g(jO~O!S(rO~P!&jO!b!yOP'eXu'eXx'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'cOP(xO!{(wO!R'dX'a'dX~O!R(yO'a'cX~O']${O'a'cP~O'](|O~O!d)RO~O']&{O~Ox$uO!Q!rO!T$vO#U!uO#V!rO']$bO!c'qP~O!]!wO#W)VO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)wOP)_O!T&dO!o)^O%Q)]O'b$PO~O!])aO!T'`X_'`X!R'`X'W'`X~O!d$ZO'b$PO~O!d$ZO']$bO'b$PO~O!]!wO#W&}O~O])lO%R)mO'])iO!S(VP~O!R)nO^(UX~O'g'TO~OZ)rO~O^)sO~O!T$lO']$bO'^$dO^(UP~Ox$uO!Q)xO!R&`O!T$vO']$bO!O'tP~O]&ZOk&ZO!Q)yO'g'TO!S'vP~O!R)zO_(RX'W(RX~O!{*OO'b$PO~OP*RO!T#zO'b$PO~O!T*TO~Ou*VO!TSO~O!n*[O~Oc*aO~O'](|O!S(TP~Oc$jO~O%RtO']${O~P8wOZ*gO^*fO~OQTORTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9aO~P!1_O^*fO_$^O'W$^O~O_*kO#d*mO%T*mO%U*mO~P){O!d%`O~O%t*rO~O!T*tO~O&V*vO&X*wOQ&SaR&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*|O~On+PO~O!O&ia!R&ia~P!)wO!Q+TO!O&iX!R&iX~P){O!R%zO!O'ja~O!O'ja~P>aO!R&`O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+YO!{+XO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+[O!d$ZO'b$PO!R!VX!S!VX~O]&ROk&ROx&SO'g(jO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O'fQO'oYO'|;^O~O']:SO~P!;jO!R+`O!S'kX~O!S+bO~O!]+YO!{+XO!R#TX!S#TX~O!R+cO!S'vX~O!S+eO~O]&ROk&ROx&SO'^$dO'g(jO~O!X+fO!Y+fO~P!>hOx$uO!Q+hO!T$vO']$bO!O&nX!R&nX~O_+lO!W+oO!X+kO!Y+kO!r+sO!s+qO!t+rO!u+pO!x+tO'^$dO'g(jO'o+iO~O!S+nO~P!?iOP+yO!T&dO!o+xO~O!{,PO!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@sO!R&tO!c'qa~Ox$uO!Q,SO!T$vO#U,UO#V,SO']$bO!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)wOP;tOu(SOx(TO'w(VO'x(XO~O#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!BpO#W'eXQ'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX'p'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'cO!R,_O'a'mX~P!#{O'a,aO~O!R,bO!c'nX~P!)wO!c,eO~O!O,fO~OQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!FfO#[#PO~P!FfOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!IQOj#RO~P!IQOQ#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!KlOZ#dO!a#TO#a#TO#b#TO#c#TO~P!KlOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!NdO'w!}O~P!NdOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P##OO'x#OO~P##OOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#%jOQ[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#'}OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO#j9oO'fQO'p#[O'w!}O'x#OO~O#m,hO~P#*XOQ'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9sO#o9sO#c'iX#m'iX!S'iX~P#,SO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)wOQ#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!BpO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)wO#z,jO~O#z,kO~O!]'lO!{,lO!T$OX#w$OX#z$OX$R$OX~O!Q,mO~O!T'oO#w,oO#z'nO$R,pO~O!R9pO!S'hX~P#*XO!S,qO~O$R,sO~OS'}O'U(OO'V,vO~O],yOk,yO!O,zO~O!RdX!]dX!cdX!c$eX'pdX~P!!rO!c-QO~P!BpO!R-RO!]!wO'p&oO!c'}X~O!c-WO~O!Q(`O']$bO!c'}P~O#W-YO~O!O$eX!R$eX!]$lX~P!!rO!R-ZO!O(OX~P!BpO!]-]O~O!O-_O~Oj-cO!]!wO!d$ZO'b$PO'p&oO~O!])aO~O_$^O!R-hO'W$^O~O!S-jO~P!&jO!X-kO!Y-kO'^$dO'g(jO~Ox-mO'g(jO~O!x-nO~O']${O!R&xX'a&xX~O!R(yO'a'ca~O'a-sO~Ou-tOv-tOx-uOPra'wra'xra!Rra!{ra~O'ara#mra~P#7pOu(SOx(TOP$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#8fOu(SOx(TOP$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#9XO]-vO~O#W-wO~O'a$na!R$na!{$na#m$na~P!#{O#W-zO~OP.TO!T&dO!o.SO%Q.RO~O]#qOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~Oh.VO'].UO~P#:yO!])aO!T'`a_'`a!R'`a'W'`a~O#W.]O~OZ[X!RdX!SdX~O!R.^O!S(VX~O!S.`O~OZ.aO~O].cO'])iO~O!T$lO']$bO^'QX!R'QX~O!R)nO^(Ua~O!c.fO~P!)wO].hO~OZ.iO~O^.jO~OP.TO!T&dO!o.SO%Q.RO'b$PO~O!R)zO_(Ra'W(Ra~O!{.pO~OP.sO!T#zO~O'g'TO!S(SP~OP.}O!T.yO!o.|O%Q.{O'b$PO~OZ/XO!R/VO!S(TX~O!S/YO~O^/[O_$^O'W$^O~O]/]O~O]/^O'](|O~O#c/_O%r/`O~P0zO!{#eO#c/_O%r/`O~O_/aO~P){O_/cO~O%{/gOQ%yiR%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/mO!S/kO&Q/lO~P`O!TSO!d/oO~O&X*wOQ&SiR&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)wO!R%zO!O'ji~O!R&`O!O'ti~O!O/uO~O!R!Va!S!Va~P#*XO]&ROk&RO!Q/{O'g(jO!R&jX!S&jX~P@dO!R+`O!S'ka~O]&ZOk&ZO!Q)yO'g'TO!R&oX!S&oX~O!R+cO!S'va~O!O'ui!R'ui~P!)wO_$^O!]!wO!d$ZO!j0VO!{0TO'W$^O'b$PO'p&oO~O!S0YO~P!?iO!X0ZO!Y0ZO'^$dO'g(jO'o+iO~O!W0[O~P#MSO!TSO!W0[O!u0^O!x0_O~P#MSO!W0[O!s0aO!t0aO!u0^O!x0_O~P#MSO!T&dO~O!T&dO~P!BpO!R'ri!c'ri_'ri'W'ri~P!)wO!{0jO!R'ri!c'ri_'ri'W'ri~O!R&tO!c'qi~Ox$uO!T$vO#V0lO']$bO~O#WraQraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra'pra!cra!Ora!Tranra%Qra!]ra~P#7pO#W$^aQ$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a'p$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#8fO#W$`aQ$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a'p$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#9XO#W$naQ$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na'p$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!BpO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)wO!R&kX'a&kX~PJjO!R,_O'a'ma~O!Q0tO!R&lX!c&lX~P){O!R,bO!c'na~O!R,bO!c'na~P!)wO#m!fa!S!fa~PCfO#m!^a!R!^a!S!^a~P#*XO!T1XO#x^O$P1YO~O!S1^O~On1_O~P!BpO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)wO!O1`O~O],yOk,yO~Ou(SOx(TO'x(XOP$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$.POu(SOx(TOP$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$.rO'p#[O~P!BpO!Q1cO']$bO!R&tX!c&tX~O!R-RO!c'}a~O!R-RO!]!wO!c'}a~O!R-RO!]!wO'p&oO!c'}a~O'a$gi!R$gi!{$gi#m$gi~P!#{O!Q1kO'](eO!O&vX!R&vX~P!$jO!R-ZO!O(Oa~O!R-ZO!O(Oa~P!BpO!]!wO~O!]!wO#c1sO~Oj1vO!]!wO'p&oO~O!R'di'a'di~P!#{O!{1yO!R'di'a'di~P!#{O!c1|O~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)wO!R2QO!T(PX~P!BpO!T&dO%Q2TO~O!T&dO%Q2TO~P!BpO!T$eX$u[X_$eX!R$eX'W$eX~P!!rO$u2XOPgXugXxgX!TgX'wgX'xgX_gX!RgX'WgX~O$u2XO~O]2_O%R2`O'])iO!R'PX!S'PX~O!R.^O!S(Va~OZ2dO~O^2eO~O]2hO~OP2jO!T&dO!o2iO%Q2TO~O_$^O'W$^O~P!BpO!T#zO~P!BpO!R2oO!{2qO!S(SX~O!S2rO~Ox;oO!W2{O!X2tO!Y2tO!r2zO!s2yO!t2yO!x2xO'^$dO'g(jO'o+iO~O!S2wO~P$7ZOP3SO!T.yO!o3RO%Q3QO~OP3SO!T.yO!o3RO%Q3QO'b$PO~O'](|O!R'OX!S'OX~O!R/VO!S(Ta~O]3^O'g3]O~O]3_O~O^3aO~O!c3dO~P){O_3fO~O_3fO~P){O#c3hO%r3iO~PFOO`/mO!S3mO&Q/lO~P`O!]3oO~O!R#Ti!S#Ti~P#*XO!{3qO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#*XO_$^O!{3xO'W$^O~O_$^O!]!wO!{3xO'W$^O~O!X3|O!Y3|O'^$dO'g(jO'o+iO~O_$^O!]!wO!d$ZO!j3}O!{3xO'W$^O'b$PO'p&oO~O!W4OO~P$;xO!W4OO!u4RO!x4SO~P$;xO_$^O!]!wO!j3}O!{3xO'W$^O'p&oO~O!R'rq!c'rq_'rq'W'rq~P!)wO!R&tO!c'qq~O#W$xiQ$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi'p$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$.PO#W$ziQ$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi'p$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$.rO#W$giQ$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi'p$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!BpO!R&ka'a&ka~P!#{O!R&la!c&la~P!)wO!R,bO!c'ni~O#m#Oi!R#Oi!S#Oi~P#*XOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$EiO#[9eO~P$EiOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$GqOj9gO~P$GqOQ#^Oj9gOu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$IyOZ9rO!a9iO#a9iO#b9iO#c9iO~P$IyOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$L_O'w!}O~P$L_OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$NgO'x#OO~P$NgOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P%!oO_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)wOP;vOu(SOx(TO'w(VO'x(XO~OQ#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi'p#Zi!R#Zi!S#Zi~P%%aO!b!yOP'eXu'eXx'eX'w'eX'x'eX!S'eX~OQ'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX'p'eX!R'eX~P%'eO#m#ni!R#ni!S#ni~P#*XO!S4eO~O!R&sa!S&sa~P#*XO!]!wO'p&oO!R&ta!c&ta~O!R-RO!c'}i~O!R-RO!]!wO!c'}i~O'a$gq!R$gq!{$gq#m$gq~P!#{O!O&va!R&va~P!BpO!]4lO~O!R-ZO!O(Oi~P!BpO!R-ZO!O(Oi~O!O4pO~O!]!wO#c4uO~Oj4vO!]!wO'p&oO~O!O4xO~O'a$iq!R$iq!{$iq#m$iq~P!#{O_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)wO!R2QO!T(Pa~O!T&dO%Q4}O~O!T&dO%Q4}O~P!BpO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)wOZ5QO~O]5SO'])iO~O!R.^O!S(Vi~O]5VO~O^5WO~O'g'TO!R&{X!S&{X~O!R2oO!S(Sa~O!S5eO~P$7ZOx;sO'g(jO'o+iO~O!W5hO!X5gO!Y5gO!x0_O'^$dO'g(jO'o+iO~O!s5iO!t5iO~P%0^O!X5gO!Y5gO'^$dO'g(jO'o+iO~O!T.yO~O!T.yO%Q5kO~O!T.yO%Q5kO~P!BpOP5pO!T.yO!o5oO%Q5kO~OZ5uO!R'Oa!S'Oa~O!R/VO!S(Ti~O]5xO~O!c5yO~O!c5zO~O!c5{O~O!c5{O~P){O_5}O~O!]6QO~O!c6RO~O!R'ui!S'ui~P#*XO_$^O'W$^O~P!)wO_$^O!{6WO'W$^O~O_$^O!]!wO!{6WO'W$^O~O!X6]O!Y6]O'^$dO'g(jO'o+iO~O_$^O!]!wO!j6^O!{6WO'W$^O'p&oO~O!d$ZO'b$PO~P%4xO!W6_O~P%4gO!R'ry!c'ry_'ry'W'ry~P!)wO#W$gqQ$gqZ$gq_$gqj$gqv$gq!R$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq'W$gq'f$gq'p$gq!c$gq!O$gq!T$gq!{$gqn$gq%Q$gq!]$gq~P!BpO#W$iqQ$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq'p$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!BpO!R&li!c&li~P!)wO#m#Oq!R#Oq!S#Oq~P#*XOu-tOv-tOx-uOPra'wra'xra!Sra~OQraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra'pra!Rra~P%;OOu(SOx(TOP$^a'w$^a'x$^a!S$^a~OQ$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a'p$^a!R$^a~P%=SOu(SOx(TOP$`a'w$`a'x$`a!S$`a~OQ$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a'p$`a!R$`a~P%?WOQ$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na'p$na!R$na!S$na~P%%aO#m$Yq!R$Yq!S$Yq~P#*XO#m$Zq!R$Zq!S$Zq~P#*XO!S6hO~O#m6iO~P!#{O!]!wO!R&ti!c&ti~O!]!wO'p&oO!R&ti!c&ti~O!R-RO!c'}q~O!O&vi!R&vi~P!BpO!R-ZO!O(Oq~O!O6oO~P!BpO!O6oO~O!R'dy'a'dy~P!#{O!R&ya!T&ya~P!BpO!T$tq_$tq!R$tq'W$tq~P!BpOZ6vO~O!R.^O!S(Vq~O]6yO~O!T&dO%Q6zO~O!T&dO%Q6zO~P!BpO!{6{O!R&{a!S&{a~O!R2oO!S(Si~P#*XO!X7RO!Y7RO'^$dO'g(jO'o+iO~O!W7TO!x4SO~P%GXO!T.yO%Q7WO~O!T.yO%Q7WO~P!BpO]7_O'g7^O~O!R/VO!S(Tq~O!c7aO~O!c7aO~P){O!c7cO~O!c7dO~O!R#Ty!S#Ty~P#*XO_$^O!{7jO'W$^O~O_$^O!]!wO!{7jO'W$^O~O!X7mO!Y7mO'^$dO'g(jO'o+iO~O_$^O!]!wO!j7nO!{7jO'W$^O'p&oO~O#m#ky!R#ky!S#ky~P#*XOQ$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi'p$gi!R$gi!S$gi~P%%aOu(SOx(TO'x(XOP$xi'w$xi!S$xi~OQ$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi'p$xi!R$xi~P%LjOu(SOx(TOP$zi'w$zi'x$zi!S$zi~OQ$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi'p$zi!R$zi~P%NnO#m$Zy!R$Zy!S$Zy~P#*XO#m#Oy!R#Oy!S#Oy~P#*XO!]!wO!R&tq!c&tq~O!R-RO!c'}y~O!O&vq!R&vq~P!BpO!O7tO~P!BpO!R.^O!S(Vy~O!R2oO!S(Sq~O!X8QO!Y8QO'^$dO'g(jO'o+iO~O!T.yO%Q8TO~O!T.yO%Q8TO~P!BpO!c8WO~O_$^O!{8]O'W$^O~O_$^O!]!wO!{8]O'W$^O~OQ$gqZ$gqj$gqv$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq#m$gq'f$gq'p$gq!R$gq!S$gq~P%%aOQ$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq'p$iq!R$iq!S$iq~P%%aO'a$|!Z!R$|!Z!{$|!Z#m$|!Z~P!#{O!R&{q!S&{q~P#*XO_$^O!{8oO'W$^O~O#W$|!ZQ$|!ZZ$|!Z_$|!Zj$|!Zv$|!Z!R$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z'W$|!Z'f$|!Z'p$|!Z!c$|!Z!O$|!Z!T$|!Z!{$|!Zn$|!Z%Q$|!Z!]$|!Z~P!BpOP;uOu(SOx(TO'w(VO'x(XO~O!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P&,_O!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%'eOQ$|!ZZ$|!Zj$|!Zv$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z#m$|!Z'f$|!Z'p$|!Z!R$|!Z!S$|!Z~P%%aO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%;OO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%=SO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%?WO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P&,_O!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%LjO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%NnO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P&,_O!S$gq!W$gq!X$gq!Y$gq!r$gq!s$gq!t$gq!x$gq'^$gq'g$gq'o$gq~P&,_O!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P&,_O!S$|!Z!W$|!Z!X$|!Z!Y$|!Z!r$|!Z!s$|!Z!t$|!Z!x$|!Z'^$|!Z'g$|!Z'o$|!Z~P&,_On'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;dOQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!TSO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O]#qOh$QOj#rOk#qOl#qOq$ROs9uOx#yO!T#zO!_;fO!d#vO#V:OO#t$VO$_9xO$a9{O$d$WO']&{O'b$PO'f#sO~O!R9pO!S$]a~O]#qOh$QOj#rOk#qOl#qOq$ROs9vOx#yO!T#zO!_;gO!d#vO#V:PO#t$VO$_9yO$a9|O$d$WO']&{O'b$PO'f#sO~O#d'jO~P&<WO!S[X!SdX~P;dO!]9dO~O#W9cO~O!]!wO#W9cO~O!{9sO~O#c9iO~O!{:QO!R'uX!S'uX~O!{9sO!R'sX!S'sX~O#W:RO~O'a:TO~P!#{O#W:[O~O#W:]O~O#W:^O~O!]!wO#W:_O~O!]!wO#W:RO~O#m:`O~P#*XO#W:aO~O#W:bO~O#W:cO~O#W:dO~O#W:eO~O#W:fO~O#W:gO~O#W:hO~O!O:iO~O#m:jO~P!#{O#m:kO~P!#{O#m:lO~P!#{O!O:mO~P!BpO!O:mO~O!O:nO~P!BpO!]!wO#c;lO~O!]!wO#c;nO~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Kk(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s7o8SP8SPPP8SP:U8SP8SP:YPP:`P:t?VPPPP?ZPPPP?ZA{PPPBRDdP?ZPFwPPPPHp?ZPPPPPJi?ZPPMjNgPPPPNk!!TP!!]!#^PNg?Z?Z!&n!)i!.[!.[!1kPPP!1r!4h?ZPPPPPPPPPP!7_P!8pPP?Z!9}P?ZP?Z?Z?Z?ZP?Z!;dPP!>]P!AQ!AY!A^!A^P!>YP!Ab!AbP!DVP!DZ?Z?Z!Da!GT8SP8SP8S8SP!HW8S8S!Jf8S!M_8S# g8S8S#!T#$c#$c#$g#$c#$oP#$cP8S#%k8S#'X8S8S-zPPP#(yPP#)c#)cP#)cP#)x#)cPP#*OP#)uP#)u#*b!!X#)u#+P#+V#+Y([#+]([P#+d#+d#+dP([P([P([P([PP([P#+j#+mP#+m([P#+qP#+tP([P([P([P([P([P([([#+z#,U#,[#,b#,p#,v#,|#-W#-^#-m#-s#.R#.X#._#.m#/S#0z#1Y#1`#1f#1l#1r#1|#2S#2Y#2d#2v#2|PPPPPPPP#3SPP#3v#7OPP#8f#8m#8uPP#>a#@t#Fp#Fs#Fv#GR#GUPP#GX#G]#Gz#Hq#Hu#IZPP#I_#Ie#IiP#Il#Ip#Is#Jc#Jy#KO#KR#KU#K[#K_#Kc#KgmhOSj}!n$]%c%f%g%i*o*t/g/jQ$imQ$ppQ%ZyS&V!b+`Q&k!jS(l#z(qQ)g$jQ)t$rQ*`%TQ+f&^S+k&d+mQ+}&lQ-k(sQ/U*aY0Z+o+p+q+r+sS2t.y2vU3|0[0^0aU5g2y2z2{S6]4O4RS7R5h5iQ7m6_R8Q7T$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ(}$SQ)l$lQ*b%WQ*i%`Q,X9tQ.W)aQ.c)mQ/^*gQ2_.^Q3Z/VQ4^9vQ5S2`R8{9upeOSjy}!n$]%Y%c%f%g%i*o*t/g/jR*d%[&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%z&S&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;`;a[!cRU!]!`%x&WQ$clQ$hmS$mp$rv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ%PwQ&h!iQ&j!jS(_#v(cS)f$i$jQ)j$lQ)w$tQ*Z%RQ*_%TS+|&k&lQ-V(`Q.[)gQ.b)mQ.d)nQ.g)rQ/P*[S/T*`*aQ0h+}Q1b-RQ2^.^Q2b.aQ2g.iQ3Y/UQ4i1cQ5R2`Q5U2dQ6u5QR7w6vx#xa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k!Y$fm!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^Q)`$cQ*P$|Q*S$}Q*^%TQ.k)wQ/O*ZU/S*_*`*aQ3T/PS3X/T/UQ5b2sQ5t3YS7P5c5fS8O7Q7SQ8f8PQ8u8g#[;b!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd;c9d9x9{:O:V:Y:]:b:e:ke;d9r9y9|:P:W:Z:^:c:f:lW#}a$P(y;^S$|t%YQ$}uQ%OvR)}$z%P#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vT(O#s(PX)O$S9t9u9vU&Z!b$v+cQ'U!{Q)q$oQ.t*TQ1z-tR5^2o&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a$]#aZ!_!o$a%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,i,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|T!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ&X!bR/|+`Y&R!b&V&^+`+fS(k#z(qS+j&d+mS-d(l(sQ-e(mQ-l(tQ.v*VU0W+k+o+pU0]+q+r+sS0b+t2xQ1u-kQ1w-mQ1x-nS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mQ8g8QQ;h;oR;m;slhOSj}!n$]%c%f%g%i*o*t/g/jQ%k!QS&x!v9cQ)d$gQ*X%PQ*Y%QQ+z&iS,]&}:RS-y)V:_Q.Y)eQ.x*WQ/n*vQ/p*wQ/x+ZQ0`+qQ0f+{S2P-z:gQ2Y.ZS2].]:hQ3r/zQ3u0RQ4U0gQ5P2ZQ6T3tQ6X3zQ6a4VQ7e6RQ7h6YQ8Y7iQ8l8[R8x8n$W#`Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|W(v#{&|1V8qT)Z$a,i$W#_Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|Q'f#`S)Y$a,iR-{)Z&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ%f{Q%g|Q%i!OQ%j!PR/f*rQ&e!iQ)[$cQ+w&hS.Q)`)wS0c+u+vW2S-}.O.P.kS4T0d0eU4|2U2V2WU6s4{5Y5ZQ7v6tR8b7yT+l&d+mS+j&d+mU0W+k+o+pU0]+q+r+sS0b+t2xS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mR8g8QS+l&d+mT2u.y2vS&r!q/dQ-U(_Q-b(kS0V+j2sQ1g-VS1p-c-lU3}0]0b5fQ4h1bS4s1v1xU6^4P4Q7SQ6k4iQ6r4vR7n6`Q!xXS&q!q/dQ)W$[Q)b$eQ)h$kQ,Q&rQ-T(_Q-a(kQ-f(nQ.X)cQ/Q*]S0U+j2sS1f-U-VS1o-b-lQ1r-eQ1t-gQ3V/RW3y0V0]0b5fQ4g1bQ4k1gS4o1p1xQ4t1wQ5r3WW6[3}4P4Q7SS6j4h4iS6n4p:iQ6p4sQ6}5aQ7[5sS7l6^6`Q7r6kS7s6o:mQ7u6rQ7|7OQ8V7]Q8_7nS8a7t:nQ8d7}Q8s8eQ9Q8tQ9X9RQ:u:pQ;T:zQ;U:{Q;V;hR;[;m$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oS!xn!k!j:o#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:u;`$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ$[b!Y$em!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^S$kn!kQ)c$fQ*]%TW/R*^*_*`*aU3W/S/T/UQ5a2sS5s3X3YU7O5b5c5fQ7]5tU7}7P7Q7SS8e8O8PS8t8f8gQ9R8u!j:p#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ:z;_R:{;`$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oY!hRU!]!`%xv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ*j%`!h:q#]#k'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:t&WS&[!b$vR0O+c$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR*i%`$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ'U!{!k:r#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a!h#VZ!_$a%w%}&y'Q'_'`'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_!R9k'd'u+^,i/v/y0w1P1Q1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!d#XZ!_$a%w%}&y'Q'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_}9m'd'u+^,i/v/y0w1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!`#]Z!_$a%w%}&y'Q'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_Q1a-Px;a'd'u+^,i/v/y0w1W1]3s4]4b4c5`6S6b6f6g7z:|Q;i;pQ;j;qR;k;r&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#l`#mR1Y,l&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#g^#nT'n#i'rT#h^#nT'p#i'r&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aT#l`#mQ#o`R'y#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!k;_#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a#RdOSUj}!S!W!n!|#k$]%[%_%`%c%e%f%g%i%m&S&f'w)^*k*o*t+x,m-u.S.|/_/`/a/c/g/j/l1X2i3R3f3h3i5o5}x#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vQ)S$WQ,x(Sd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:kx#wa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;kQ(d#xS(n#z(qQ)T$XQ-g(o#[:w!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd:x9d9x9{:O:V:Y:]:b:e:kd:y9r9y9|:P:W:Z:^:c:f:lQ:};bQ;O;cQ;P;dQ;Q;eQ;R;fR;S;gx#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:klfOSj}!n$]%c%f%g%i*o*t/g/jQ(g#yQ*}%pQ+O%rR1j-Z%O#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vQ*Q$}Q.r*SQ2m.qR5]2nT(p#z(qS(p#z(qT2u.y2vQ)b$eQ-f(nQ.X)cQ/Q*]Q3V/RQ5r3WQ6}5aQ7[5sQ7|7OQ8V7]Q8d7}Q8s8eQ9Q8tR9X9Rp(W#t'O)U-X-o-p0q1h1}4f4w7q:v;W;X;Y!n:U&z'i(^(f+v,[,t-P-^-|.P.o.q0e0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r[:V8p9O9V9Y9Z9]]:W1U4a6c7o7p8zr(Y#t'O)U,}-X-o-p0q1h1}4f4w7q:v;W;X;Y!p:X&z'i(^(f+v,[,t-P-^-|.P.o.q0e0n0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r^:Y8p9O9T9V9Y9Z9]_:Z1U4a6c6d7o7p8zpeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ%VxR*k%`peOSjy}!n$]%Y%c%f%g%i*o*t/g/jR%VxQ*U%OR.n)}qeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ.z*ZS3P/O/PW5j2|2}3O3TU7V5l5m5nU8R7U7X7YQ8h8SR8v8iQ%^yR*e%YR3^/XR7_5uS$mp$rR.d)nQ%czR*o%dR*u%jT/h*t/jR*y%kQ*x%kR/q*yQjOQ!nST$`j!nQ(P#sR,u(PQ!YQR%u!YQ!^RU%{!^%|+UQ%|!_R+U%}Q+a&XR/}+aQ,`'OR0r,`Q,c'QS0u,c0vR0v,dQ+m&dR0X+mS!eR$uU&a!e&b+VQ&b!fR+V&OQ+d&[R0P+dQ&u!sQ,R&sU,V&u,R0mR0m,WQ'r#iR,n'rQ#m`R'x#mQ#cZU'h#c+Q9qQ+Q9_R9q'uQ-S(_W1d-S1e4j6lU1e-T-U-VS4j1f1gR6l4k$k(U#t&z'O'i(^(f)P)Q)U+v,Y,Z,[,t,}-O-P-X-^-o-p-|.P.o.q0e0n0o0p0q1U1h1i1m1}2W2l2n3O4Y4Z4_4`4a4f4m4q4w4y5O5Z5n6c6d6e6m6q7Y7o7p7q8`8p8z8|8}9O9T9U9V9Y9Z9]:v;W;X;Y;Z;];p;q;rQ-[(fU1l-[1n4nQ1n-^R4n1mQ(q#zR-i(qQ(z$OR-r(zQ2R-|R4z2RQ){$xR.m){Q2p.tS5_2p6|R6|5`Q*W%PR.w*WQ2v.yR5d2vQ/W*bS3[/W5vR5v3^Q._)jW2a._2c5T6wQ2c.bQ5T2bR6w5UQ)o$mR.e)oQ/j*tR3l/jWiOSj!nQ%h}Q)X$]Q*n%cQ*p%fQ*q%gQ*s%iQ/e*oS/h*t/jR3k/gQ$_gQ%l!RQ%o!TQ%q!UQ%s!VQ)v$sQ)|$yQ*d%^Q*{%nQ-h(pS/Z*e*hQ/r*zQ/s*}Q/t+OS0S+j2sQ2f.hQ2k.oQ3U/QQ3`/]Q3j/fY3w0U0V0]0b5fQ5X2hQ5[2lQ5q3VQ5w3_[6U3v3y3}4P4Q7SQ6x5VQ7Z5rQ7`5xW7f6V6[6^6`Q7x6yQ7{6}Q8U7[U8X7g7l7nQ8c7|Q8j8VS8k8Z8_Q8r8dQ8w8mQ9P8sQ9S8yQ9W9QR9[9XQ$gmQ&i!jU)e$h$i$jQ+Z&UU+{&j&k&lQ-`(kS.Z)f)gQ/z+]Q0R+jS0g+|+}Q1q-dQ2Z.[Q3t0QS3z0W0]Q4V0hQ4r1uS6Y3{4QQ7i6ZQ8[7kR8n8^S#ua;^R({$PU$Oa$P;^R-q(yQ#taS&z!w)aQ'O!yQ'i#dQ(^#vQ(f#yQ)P$TQ)Q$UQ)U$YQ+v&gQ,Y9wQ,Z9zQ,[9}Q,t'}Q,}(WQ-O(YQ-P(ZQ-X(bQ-^(hQ-o(wQ-p(xd-|)].R.{2T3Q4}5k6z7W8TQ.P)_Q.o*OQ.q*RQ0e+yQ0n:UQ0o:XQ0p:[Q0q,_Q1U9rQ1h-YQ1i-ZQ1m-]Q1}-wQ2W.TQ2l.pQ2n.sQ3O.}Q4Y:aQ4Z:dQ4_9yQ4`9|Q4a:PQ4f1aQ4m1kQ4q1sQ4w1yQ4y2QQ5O2XQ5Z2jQ5n3SQ6c:^Q6d:WQ6e:ZQ6m4lQ6q4uQ7Y5pQ7o:cQ7p:fQ7q6iQ8`:jQ8p9dQ8z:lQ8|9xQ8}9{Q9O:OQ9T:VQ9U:YQ9V:]Q9Y:bQ9Z:eQ9]:kQ:v;^Q;W;iQ;X;jQ;Y;kQ;Z;lQ;];nQ;p;tQ;q;uR;r;vlgOSj}!n$]%c%f%g%i*o*t/g/jS!pU%eQ%n!SQ%t!WQ'V!|Q'v#kS*h%[%_Q*l%`Q*z%mQ+W&SQ+u&fQ,r'wQ.O)^Q/b*kQ0d+xQ1[,mQ1{-uQ2V.SQ2}.|Q3b/_Q3c/`Q3e/aQ3g/cQ3n/lQ4d1XQ5Y2iQ5m3RQ5|3fQ6O3hQ6P3iQ7X5oR7b5}!vZOSUj}!S!n!|$]%[%_%`%c%e%f%g%i%m&S&f)^*k*o*t+x-u.S.|/_/`/a/c/g/j/l2i3R3f3h3i5o5}Q!_RQ!oTQ$akS%w!]%zQ%}!`Q&y!vQ'Q!zQ'W#PQ'X#QQ'Y#RQ'Z#SQ'[#TQ']#UQ'^#VQ'_#WQ'`#XQ'a#YQ'b#ZQ'd#]Q'g#bQ'k#eW'u#k'w,m1XQ)p$nS+R%x+TS+^&W/{Q+g&_Q,O&pQ,^&}Q,d'RQ,g9^Q,i9`Q,w(RQ-x)VQ/v+XQ/y+[Q0i,PQ0s,bQ0w9cQ0x9eQ0y9fQ0z9gQ0{9hQ0|9iQ0}9jQ1O9kQ1P9lQ1Q9mQ1R9nQ1S9oQ1T,hQ1W9sQ1]9pQ2O-zQ2[.]Q3s:QQ3v0TQ4W0jQ4[0tQ4]:RQ4b:TQ4c:_Q5`2qQ6S3qQ6V3xQ6b:`Q6f:gQ6g:hQ7g6WQ7z6{Q8Z7jQ8m8]Q8y8oQ9_!WR:|;aR!aRR&Y!bS&U!b+`S+]&V&^R0Q+fR'P!yR'S!zT!tU$ZS!sU$ZU$xrs*mS&s!r!uQ,T&tQ,W&wQ.l)zS0k,S,UR4X0l`!dR!]!`$u%x&`)x+hh!qUrs!r!u$Z&t&w)z,S,U0lQ/d*mQ/w+YQ3p/oT:s&W)yT!gR$uS!fR$uS%y!]&`S&O!`)xS+S%x+hT+_&W)yT&]!b$vQ#i^R'{#nT'q#i'rR1Z,lT(a#v(cR(i#yQ-})]Q2U.RQ2|.{Q4{2TQ5l3QQ6t4}Q7U5kQ7y6zQ8S7WR8i8TlhOSj}!n$]%c%f%g%i*o*t/g/jQ%]yR*d%YV$yrs*mR.u*TR*c%WQ$qpR)u$rR)k$lT%az%dT%bz%dT/i*t/j",nodeNames:"\u26A0 extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:p1,nodeProps:[["closedBy",4,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[x1],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T)X(rZ$UW]#eOY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j)X*{R$P&j$UW]#eO!^%T!_#o%T#p~%T)P+ZV]#eOY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U)P+wO$P&j]#e)P+zROr+Urs,Ts~+U)P,[U$P&j]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e,sU]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e-[O]#e#e-_PO~,n)X-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k)X.VZ$P&j$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/PZ$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/yR$UW]#eO!^%T!_#o%T#p~%T#m0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x3]0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`3]1g]$UW'o3TOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T5b5lU'x5Y$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T)X6jZ$UW]#eOY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w)P8YV]#eOY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T)P8rROw8Twx8{x~8T)P9SU$P&j]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e9kU]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e:QPO~9f)X:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c)X:xZ$P&j$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m;rZ$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k&i=QR!d&a$UWO!^%T!_#o%T#p~%Tk=bR!cc$UWO!^%T!_#o%T#p~%T7V=tU'^4V#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T%w>rSj%o$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu5^$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%T!{@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%T!{@iR!Q!s$UWO!^%T!_#o%T#p~%T!{@yZ$UWk!sO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%T!{AqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{BiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{CVV$UWk!sO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du!{!0cd$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%T!{!1x_$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%T!{!3OR$UWk!sO!^%T!_#o%T#p~%T!{!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%T!{!3}Y$UWk!sO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%T!{!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%T!{!5`X$UWk!sO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%T!{!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%T!{!6z]$UWk!sO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T$u!7|R!]V$UW#m$fO!^%T!_#o%T#p~%T!q!8^R_!i$UWO!^%T!_#o%T#p~%T5w!8rR'bd!a/n#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v$u!9kT!{$m$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%V!:gT'a!R#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T*a!<YV'p#{$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T*[!<vRv*S$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%Tk!={R!Oc$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$a!>pR$UW'f$XO!^%T!_#o%T#p~%T~!?OO!T~5b!?VT'w5Y$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T6X!?oR!S5}nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']$y'g3SOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[y1,m1,O1,g1,0,1,2,3,4,5,6,7,8,9,d1],topRules:{Script:[0,7]},dialects:{jsx:12107,ts:12109},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:i=>v1[i]||-1},{term:299,get:i=>P1[i]||-1},{term:63,get:i=>C1[i]||-1}],tokenPrec:12130}),w1=[Ie("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Ie("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Ie("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Ie("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Ie("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Ie(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Ie("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Ie(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Ie(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Ie('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Ie('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Pu=new HO,qp=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function An(i){return(t,e)=>{let n=t.node.getChild("VariableDefinition");return n&&e(n,i),!0}}const b1=["FunctionDeclaration"],D1={FunctionDeclaration:An("function"),ClassDeclaration:An("class"),ClassExpression:()=>!0,EnumDeclaration:An("constant"),TypeAliasDeclaration:An("type"),NamespaceDeclaration:An("namespace"),VariableDefinition(i,t){i.matchContext(b1)||t(i,"variable")},TypeDefinition(i,t){t(i,"type")},__proto__:null};function zp(i,t){let e=Pu.get(t);if(e)return e;let n=[],r=!0;function o(s,l){let h=i.sliceString(s.from,s.to);n.push({label:h,type:l})}return t.cursor(jt.IncludeAnonymous).iterate(s=>{if(r)r=!1;else if(s.name){let l=D1[s.name];if(l&&l(s,o)||qp.has(s.name))return!1}else if(s.to-s.from>8192){for(let l of zp(i,s.node))n.push(l);return!1}}),Pu.set(t,n),n}const Cu=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,Up=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function T1(i){let t=kt(i.state).resolveInner(i.pos,-1);if(Up.indexOf(t.name)>-1)return null;let e=t.name=="VariableName"||t.to-t.from<20&&Cu.test(i.state.sliceDoc(t.from,t.to));if(!e&&!i.explicit)return null;let n=[];for(let r=t;r;r=r.parent)qp.has(r.name)&&(n=n.concat(zp(i.state.doc,r)));return{options:n,from:e?t.from:i.pos,validFor:Cu}}const _i=us.define({parser:S1.configure({props:[Df.add({IfStatement:ko({except:/^\s*({|else\b)/}),TryStatement:ko({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:yg,SwitchBody:i=>{let t=i.textAfter,e=/^\s*\}/.test(t),n=/^\s*(case|default)\b/.test(t);return i.baseIndent+(e?0:n?1:2)*i.unit},Block:gg({closing:"}"}),ArrowFunction:i=>i.baseIndent+i.unit,"TemplateString BlockComment":()=>null,"Statement Property":ko({except:/^{/}),JSXElement(i){let t=/^\s*<\//.test(i.textAfter);return i.lineIndent(i.node.from)+(t?0:i.unit)},JSXEscape(i){let t=/\s*\}/.test(i.textAfter);return i.lineIndent(i.node.from)+(t?0:i.unit)},"JSXOpenTag JSXSelfClosingTag"(i){return i.column(i.node.from)+i.unit}}),Ef.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":Cg,BlockComment(i){return{from:i.from+2,to:i.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),A1=_i.configure({dialect:"ts"}),E1=_i.configure({dialect:"jsx"}),k1=_i.configure({dialect:"jsx ts"}),_1="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(i=>({label:i,type:"keyword"}));function I1(i={}){let t=i.jsx?i.typescript?k1:E1:i.typescript?A1:_i;return new hg(t,[_i.data.of({autocomplete:Xx(Up,Ep(w1.concat(_1)))}),_i.data.of({autocomplete:T1}),i.jsx?Q1:[]])}function Su(i,t,e=i.length){if(!t)return"";let n=t.getChild("JSXIdentifier");return n?i.sliceString(n.from,Math.min(n.to,e)):""}const L1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Q1=tt.inputHandler.of((i,t,e,n)=>{if((L1?i.composing:i.compositionStarted)||i.state.readOnly||t!=e||n!=">"&&n!="/"||!_i.isActiveAt(i.state,t,-1))return!1;let{state:r}=i,o=r.changeByRange(s=>{var l,h,c;let{head:p}=s,d=kt(r).resolveInner(p,-1),m;if(d.name=="JSXStartTag"&&(d=d.parent),n==">"&&d.name=="JSXFragmentTag")return{range:Y.cursor(p+1),changes:{from:p,insert:"><>"}};if(n==">"&&d.name=="JSXIdentifier"){if(((h=(l=d.parent)===null||l===void 0?void 0:l.lastChild)===null||h===void 0?void 0:h.name)!="JSXEndTag"&&(m=Su(r.doc,d.parent,p)))return{range:Y.cursor(p+1),changes:{from:p,insert:`></${m}>`}}}else if(n=="/"&&d.name=="JSXFragmentTag"){let v=d.parent,C=v==null?void 0:v.parent;if(v.from==p-1&&((c=C.lastChild)===null||c===void 0?void 0:c.name)!="JSXEndTag"&&(m=Su(r.doc,C==null?void 0:C.firstChild,p))){let O=`/${m}>`;return{range:Y.cursor(p+O.length),changes:{from:p,insert:O}}}}return{range:s}});return o.changes.empty?!1:(i.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)});Nt.define({create(i){return 0},update(i,t){if(t.docChanged){const{state:e}=t;return kt(e),i+1}else return i},provide(i){return[]}});class X1 extends HTMLElement{constructor(){super(),this.view=void 0,this.state=void 0}foldRange(){}connectedCallback(){const t=[Nv,I1(),hr.of([ox]),ur.of("  ")],e=dt.create({extensions:t});this.view=new tt({state:e,parent:this})}}window.customElements.define("codemirror-2",X1);const F1=["./library/connectors/ESP8266_12E.json","./library/connectors/header_FTDI.json","./library/connectors/power_65mm.json","./library/connectors/ESP32_CAM.json","./library/connectors/USB_A_plug.json","./library/connectors/header_i0.json","./library/connectors/header_serial_reverse.json","./library/connectors/header_4.json","./library/connectors/header_signal.json","./library/connectors/MTA_i0.json","./library/connectors/HM11.json","./library/connectors/header_MFRC522.json","./library/connectors/header_serial_reverse_5V.json","./library/connectors/USB_mini_B.json","./library/connectors/ESC.json","./library/connectors/MTA_PS2.json","./library/connectors/header_APA.json","./library/connectors/MTA_ICP.json","./library/connectors/stereo_2_5mm.json","./library/connectors/header_VL53L1X_3415.json","./library/connectors/Molex_serial.json","./library/connectors/header_SWD_4_1.json","./library/connectors/ESP_01.json","./library/connectors/HCSR04.json","./library/connectors/header_SWD_4_05.json","./library/connectors/ESP32_WROOM.json","./library/connectors/header_serial.json","./library/connectors/header_PDI.json","./library/connectors/I2C4x1v.json","./library/connectors/header_power.json","./library/connectors/MTA_serial.json","./library/connectors/header_LSM6DS33_2736.json","./library/connectors/MTA_2.json","./library/connectors/MTA_3.json","./library/connectors/header_LCD.json","./library/connectors/screw_terminal_2.json","./library/connectors/HCSR501.json","./library/connectors/screw_terminal_i0.json","./library/connectors/header_unipolar_stepper.json","./library/connectors/screw_terminal_power.json","./library/connectors/header_nRF24L01.json","./library/connectors/header_serial_reverse_3V3.json","./library/connectors/MTA_power.json","./library/connectors/MTA_4.json","./library/connectors/RCWL0516.json","./library/connectors/ESP_WROOM_02D.json","./library/connectors/RN4871.json","./library/connectors/header_I2C.json","./library/connectors/header_SWD.json","./library/connectors/header_servo.json","./library/connectors/microSD.json","./library/connectors/header_4H.json","./library/connectors/header_UPDI.json","./library/connectors/I2C4x1i.json","./library/connectors/I2C4x1h.json","./library/connectors/header_ISP.json","./library/connectors/header_NEO_6M.json","./library/connectors/MTA_5.json","./library/connectors/header_6.json","./library/connectors/header_UPDI_reverse.json","./library/connectors/header_bus.json","./library/connectors/TFT8x1v.json","./library/connectors/header_2H.json","./library/connectors/header_ATP.json","./library/switches/button_6mm.json","./library/switches/slide_switch.json","./library/diodes_transistors_regulators_sensors/D_1206.json","./library/diodes_transistors_regulators_sensors/mic_SPM1437.json","./library/diodes_transistors_regulators_sensors/LED_1206.json","./library/diodes_transistors_regulators_sensors/NMOSFET_TO252AA.json","./library/diodes_transistors_regulators_sensors/regulator_SOT223.json","./library/diodes_transistors_regulators_sensors/regulator_SOT23.json","./library/diodes_transistors_regulators_sensors/VL53L1X.json","./library/diodes_transistors_regulators_sensors/H_bridge_SM8.json","./library/diodes_transistors_regulators_sensors/SPG08P4HM4H.json","./library/diodes_transistors_regulators_sensors/Hall_SOT23.json","./library/diodes_transistors_regulators_sensors/VEML6040.json","./library/diodes_transistors_regulators_sensors/phototransistor_1206.json","./library/diodes_transistors_regulators_sensors/LED_RGB.json","./library/diodes_transistors_regulators_sensors/accel_MXD6235M.json","./library/diodes_transistors_regulators_sensors/ADXL343.json","./library/diodes_transistors_regulators_sensors/mic_SPU0414HR5H.json","./library/diodes_transistors_regulators_sensors/D_SOD_123.json","./library/diodes_transistors_regulators_sensors/LED_3014_1100.json","./library/diodes_transistors_regulators_sensors/A4953_SOICN.json","./library/diodes_transistors_regulators_sensors/NMOSFET_SOT23.json","./library/diodes_transistors_regulators_sensors/phototransistor_PLCC2.json","./library/diodes_transistors_regulators_sensors/PMOSFET_SOT23.json","./library/diodes_transistors_regulators_sensors/DRV8428_HTSSOP.json","./library/diodes_transistors_regulators_sensors/CMM4030D261I2STR.json","./library/crystals_and_resonators/XTAL_CSM_7.json","./library/crystals_and_resonators/XTAL_NX5032GA.json","./library/crystals_and_resonators/XTAL_EFOBM.json","./library/discretes/R_0402.json","./library/discretes/ST4EB.json","./library/discretes/C_1206.json","./library/discretes/R_1206.json","./library/discretes/choke.json","./library/discretes/L_1210.json","./library/discretes/C_FND.json","./library/ICs/CBA.json","./library/ICs/SAMD21E.json","./library/ICs/AVRDB28.json","./library/ICs/FT230XS.json","./library/ICs/ATtiny1614.json","./library/ICs/fab.json","./library/ICs/ATtiny44_SOICN.json","./library/ICs/ATxmegaE5_TQFP.json","./library/ICs/op_amp_SOICN.json","./library/ICs/ATtiny45_SOIC.json","./library/ICs/ATmega88_TQFP.json","./library/ICs/SAMD11D.json","./library/ICs/TRC102.json","./library/ICs/ATtiny412.json","./library/ICs/ATmega644_TQFP.json","./library/ICs/op_amp_SOT23_5.json","./library/ICs/SAMD11C.json","./library/ICs/ATtiny3216.json"];function $1(i){const t=Gp(i),e=document.createElement("a");e.href=t,e.download=`${i.name===""?"anon":i.name}.svg`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}function Gp(i){const t=new XMLSerializer,e=document.querySelector("svg").cloneNode(!0),n=e.querySelectorAll(".no-download");for(const c of n)c.remove();const r=e.querySelector(".transform-group");r.style.transformOrigin="",r.style.transform="";const o=i.limits.x[1]-i.limits.x[0],s=i.limits.y[1]-i.limits.y[0];r.setAttribute("transform",`scale(1, -1) translate(0, ${-(i.limits.y[0]+i.limits.y[1])})`),e.setAttribute("style",""),e.setAttribute("width",`${o*i.mm_per_unit}mm`),e.setAttribute("height",`${s*i.mm_per_unit}mm`),e.setAttribute("viewBox",`${i.limits.x[0]} ${i.limits.y[0]} ${o} ${s}`),e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");const l=t.serializeToString(e);return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(l)}function B1(i,t){const e=new Blob([t],{type:"text/plain"});var n=document.createElement("a");n.href=URL.createObjectURL(e),n.download=`${i}`,n.click(),URL.revokeObjectURL(n)}function N1(i,t=1e3){const e=Gp(i);var n=25.4;const r=(i.limits.x[1]-i.limits.x[0])*i.mm_per_unit,o=(i.limits.y[1]-i.limits.y[0])*i.mm_per_unit;var s=t*r/n,l=t*o/n,h=new Image;h.width=s,h.height=l,h.setAttribute("src",e),h.onload=function(){const c=document.createElement("canvas");(s/t).toFixed(3)+""+(l/t).toFixed(3),(25.4*s/t).toFixed(3)+""+(25.4*l/t).toFixed(3),c.width=s,c.height=l;var p=c.getContext("2d");p.clearRect(0,0,s,l),p.drawImage(h,0,0,s,l),p.getImageData(0,0,s,l),M1(c,`${i.name===""?"anon":i.name}`)}}function M1(i,t){var e=i.toDataURL(),n=document.createElement("a");n.download=`${t}.png`,n.href=e,n.click()}const R1=i=>i.map(t=>t.slice(10)).map(t=>Ai`
  <div class="menu-item" @mousedown=${async e=>{const r=await(await fetch(`components/${t}`)).text();ct("ADD_IMPORT",{text:r,name:e.target.innerText.split("/")[1].split(".")[0]})}}>${t}</div>
`);var x={};x.version="6.4.2.2";x.use_lines=!0;x.use_xyz=!1;var Vp=!1;typeof Ur<"u"&&Ur.exports?(Ur.exports=x,Vp=!0):typeof document<"u"?window.ClipperLib=x:self.ClipperLib=x;if(Vp)var Ht="chrome";else var Ht=navigator.userAgent.toString().toLowerCase();Ht.indexOf("chrome")!=-1&&Ht.indexOf("chromium")==-1;Ht.indexOf("chromium")!=-1;Ht.indexOf("safari")!=-1&&Ht.indexOf("chrome")==-1&&Ht.indexOf("chromium")==-1;Ht.indexOf("firefox")!=-1;Ht.indexOf("firefox/17")!=-1;Ht.indexOf("firefox/15")!=-1;Ht.indexOf("firefox/3")!=-1;Ht.indexOf("opera")!=-1;Ht.indexOf("msie 10")!=-1;Ht.indexOf("msie 9")!=-1;Ht.indexOf("msie 8")!=-1;Ht.indexOf("msie 7")!=-1;Ht.indexOf("msie ")!=-1;var Hp=function(i,t){var e;if(typeof Object.getOwnPropertyNames>"u"){for(e in t.prototype)(typeof i.prototype[e]>"u"||i.prototype[e]===Object.prototype[e])&&(i.prototype[e]=t.prototype[e]);for(e in t)typeof i[e]>"u"&&(i[e]=t[e]);i.$baseCtor=t}else{for(var n=Object.getOwnPropertyNames(t.prototype),r=0;r<n.length;r++)typeof Object.getOwnPropertyDescriptor(i.prototype,n[r])>"u"&&Object.defineProperty(i.prototype,n[r],Object.getOwnPropertyDescriptor(t.prototype,n[r]));for(e in t)typeof i[e]>"u"&&(i[e]=t[e]);i.$baseCtor=t}};x.Path=function(){return[]};x.Path.prototype.push=Array.prototype.push;x.Paths=function(){return[]};x.Paths.prototype.push=Array.prototype.push;x.PolyNode=function(){this.m_Parent=null,this.m_polygon=new x.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1};x.PolyNode.prototype.IsHoleNode=function(){for(var i=!0,t=this.m_Parent;t!==null;)i=!i,t=t.m_Parent;return i};x.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length};x.PolyNode.prototype.Contour=function(){return this.m_polygon};x.PolyNode.prototype.AddChild=function(i){var t=this.m_Childs.length;this.m_Childs.push(i),i.m_Parent=this,i.m_Index=t};x.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()};x.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]};x.PolyNode.prototype.Childs=function(){return this.m_Childs};x.PolyNode.prototype.Parent=function(){return this.m_Parent};x.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()};x.PolyTree=function(){this.m_AllPolys=[],x.PolyNode.call(this)};x.PolyTree.prototype.Clear=function(){for(var i=0,t=this.m_AllPolys.length;i<t;i++)this.m_AllPolys[i]=null;this.m_AllPolys.length=0,this.m_Childs.length=0};x.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null};x.PolyTree.prototype.Total=function(){var i=this.m_AllPolys.length;return i>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&i--,i};Hp(x.PolyTree,x.PolyNode);x.Clear=function(i){i.length=0};x.PI=3.141592653589793;x.PI2=2*3.141592653589793;x.FPoint=function(){var i=arguments,t=i.length;if(this.X=0,this.Y=0,x.use_xyz)if(this.Z=0,t===3)this.X=i[0],this.Y=i[1],this.Z=i[2];else if(t===2)this.X=i[0],this.Y=i[1],this.Z=0;else if(t===1)if(i[0]instanceof x.FPoint){var e=i[0];this.X=e.X,this.Y=e.Y,this.Z=0}else{var n=i[0];typeof n.Z>"u"&&(n.Z=0),this.X=n.X,this.Y=n.Y,this.Z=n.Z}else this.X=0,this.Y=0,this.Z=0;else if(t===2)this.X=i[0],this.Y=i[1];else if(t===1)if(i[0]instanceof x.FPoint){var e=i[0];this.X=e.X,this.Y=e.Y}else{var n=i[0];this.X=n.X,this.Y=n.Y}else this.X=0,this.Y=0};x.FPoint.op_Equality=function(i,t){return i.X===t.X&&i.Y===t.Y};x.FPoint.op_Inequality=function(i,t){return i.X!==t.X||i.Y!==t.Y};x.FPoint0=function(){this.X=0,this.Y=0,x.use_xyz&&(this.Z=0)};x.FPoint0.prototype=x.FPoint.prototype;x.FPoint1=function(i){this.X=i.X,this.Y=i.Y,x.use_xyz&&(typeof i.Z>"u"?this.Z=0:this.Z=i.Z)};x.FPoint1.prototype=x.FPoint.prototype;x.FPoint1dp=function(i){this.X=i.X,this.Y=i.Y,x.use_xyz&&(this.Z=0)};x.FPoint1dp.prototype=x.FPoint.prototype;x.FPoint2=function(i,t,e){this.X=i,this.Y=t,x.use_xyz&&(typeof e>"u"?this.Z=0:this.Z=e)};x.FPoint2.prototype=x.FPoint.prototype;x.FRect=function(){var i=arguments,t=i.length;if(t===4)this.left=i[0],this.top=i[1],this.right=i[2],this.bottom=i[3];else if(t===1){var e=i[0];this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0};x.FRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0};x.FRect0.prototype=x.FRect.prototype;x.FRect1=function(i){this.left=i.left,this.top=i.top,this.right=i.right,this.bottom=i.bottom};x.FRect1.prototype=x.FRect.prototype;x.FRect4=function(i,t,e,n){this.left=i,this.top=t,this.right=e,this.bottom=n};x.FRect4.prototype=x.FRect.prototype;x.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3};x.PolyType={ptSubject:0,ptClip:1};x.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3};x.JoinType={jtSquare:0,jtRound:1,jtMiter:2};x.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4};x.EdgeSide={esLeft:0,esRight:1};x.Direction={dRightToLeft:0,dLeftToRight:1};x.TEdge=function(){this.Bot=new x.FPoint0,this.Curr=new x.FPoint0,this.Top=new x.FPoint0,this.Delta=new x.FPoint0,this.Dx=0,this.PolyTyp=x.PolyType.ptSubject,this.Side=x.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null};x.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new x.FPoint0};x.MyIntersectNodeSort=function(){};x.MyIntersectNodeSort.Compare=function(i,t){var e=t.Pt.Y-i.Pt.Y;return e>0?1:e<0?-1:0};x.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null};x.Scanbeam=function(){this.Y=0,this.Next=null};x.Maxima=function(){this.X=0,this.Next=null,this.Prev=null};x.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null};x.OutPt=function(){this.Idx=0,this.Pt=new x.FPoint0,this.Next=null,this.Prev=null};x.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new x.FPoint0};x.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null};x.ClipperBase.horizontal=-34e37;x.ClipperBase.Skip=-2;x.ClipperBase.Unassigned=-1;x.ClipperBase.tolerance=1e-20;x.ClipperBase.maxValue=Math.sqrt(Number.MAX_VALUE);x.ClipperBase.minValue=Math.sqrt(Number.MIN_VALUE);x.ClipperBase.near_zero=function(i){return i>-x.ClipperBase.tolerance&&i<x.ClipperBase.tolerance};x.ClipperBase.IsHorizontal=function(i){return i.Delta.Y===0};x.ClipperBase.prototype.PointIsVertex=function(i,t){var e=t;do{if(x.FPoint.op_Equality(e.Pt,i))return!0;e=e.Next}while(e!==t);return!1};x.ClipperBase.prototype.PointOnLineSegment=function(i,t,e){return i.X===t.X&&i.Y===t.Y||i.X===e.X&&i.Y===e.Y||i.X>t.X==i.X<e.X&&i.Y>t.Y==i.Y<e.Y&&(i.X-t.X)*(e.Y-t.Y)===(e.X-t.X)*(i.Y-t.Y)};x.ClipperBase.prototype.PointOnPolygon=function(i,t){for(var e=t;;){if(this.PointOnLineSegment(i,e.Pt,e.Next.Pt))return!0;if(e=e.Next,e===t)break}return!1};x.ClipperBase.prototype.SlopesEqual=x.ClipperBase.SlopesEqual=function(){var i=arguments,t=i.length,e,n,r,o,s,l;return t===2?(e=i[0],n=i[1],e.Delta.Y*n.Delta.X===e.Delta.X*n.Delta.Y):t===3?(r=i[0],o=i[1],s=i[2],(r.Y-o.Y)*(o.X-s.X)-(r.X-o.X)*(o.Y-s.Y)===0):(r=i[0],o=i[1],s=i[2],l=i[3],(r.Y-o.Y)*(s.X-l.X)-(r.X-o.X)*(s.Y-l.Y)===0)};x.ClipperBase.SlopesEqual3=function(i,t){return i.Delta.Y*t.Delta.X===i.Delta.X*t.Delta.Y};x.ClipperBase.SlopesEqual4=function(i,t,e){return(i.Y-t.Y)*(t.X-e.X)-(i.X-t.X)*(t.Y-e.Y)===0};x.ClipperBase.SlopesEqual5=function(i,t,e,n){return(i.Y-t.Y)*(e.X-n.X)-(i.X-t.X)*(e.Y-n.Y)===0};x.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var i=0,t=this.m_edges.length;i<t;++i){for(var e=0,n=this.m_edges[i].length;e<n;++e)this.m_edges[i][e]=null;x.Clear(this.m_edges[i])}x.Clear(this.m_edges),this.m_HasOpenPaths=!1};x.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var i=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=i}this.m_CurrentLM=null};x.ClipperBase.prototype.RangeTest=function(i){(i.X>x.ClipperBase.maxValue||i.X<-x.ClipperBase.maxValue||i.Y>x.ClipperBase.maxValue||i.Y<-x.ClipperBase.maxValue||i.X>0&&i.X<x.ClipperBase.minValue||i.Y>0&&i.Y<x.ClipperBase.minValue||i.X<0&&i.X>-x.ClipperBase.minValue||i.Y<0&&i.Y>-x.ClipperBase.minValue)&&x.Error("Coordinate outside allowed range in RangeTest().")};x.ClipperBase.prototype.InitEdge=function(i,t,e,n){i.Next=t,i.Prev=e,i.Curr.X=n.X,i.Curr.Y=n.Y,x.use_xyz&&(i.Curr.Z=n.Z),i.OutIdx=-1};x.ClipperBase.prototype.InitEdge2=function(i,t){i.Curr.Y>=i.Next.Curr.Y?(i.Bot.X=i.Curr.X,i.Bot.Y=i.Curr.Y,x.use_xyz&&(i.Bot.Z=i.Curr.Z),i.Top.X=i.Next.Curr.X,i.Top.Y=i.Next.Curr.Y,x.use_xyz&&(i.Top.Z=i.Next.Curr.Z)):(i.Top.X=i.Curr.X,i.Top.Y=i.Curr.Y,x.use_xyz&&(i.Top.Z=i.Curr.Z),i.Bot.X=i.Next.Curr.X,i.Bot.Y=i.Next.Curr.Y,x.use_xyz&&(i.Bot.Z=i.Next.Curr.Z)),this.SetDx(i),i.PolyTyp=t};x.ClipperBase.prototype.FindNextLocMin=function(i){for(var t;;){for(;x.FPoint.op_Inequality(i.Bot,i.Prev.Bot)||x.FPoint.op_Equality(i.Curr,i.Top);)i=i.Next;if(i.Dx!==x.ClipperBase.horizontal&&i.Prev.Dx!==x.ClipperBase.horizontal)break;for(;i.Prev.Dx===x.ClipperBase.horizontal;)i=i.Prev;for(t=i;i.Dx===x.ClipperBase.horizontal;)i=i.Next;if(i.Top.Y!==i.Prev.Bot.Y){t.Prev.Bot.X<i.Bot.X&&(i=t);break}}return i};x.ClipperBase.prototype.ProcessBound=function(i,t){var e,n=i,r;if(n.OutIdx===x.ClipperBase.Skip){if(i=n,t){for(;i.Top.Y===i.Next.Bot.Y;)i=i.Next;for(;i!==n&&i.Dx===x.ClipperBase.horizontal;)i=i.Prev}else{for(;i.Top.Y===i.Prev.Bot.Y;)i=i.Prev;for(;i!==n&&i.Dx===x.ClipperBase.horizontal;)i=i.Next}if(i===n)t?n=i.Next:n=i.Prev;else{t?i=n.Next:i=n.Prev;var o=new x.LocalMinima;o.Next=null,o.Y=i.Bot.Y,o.LeftBound=null,o.RightBound=i,i.WindDelta=0,n=this.ProcessBound(i,t),this.InsertLocalMinima(o)}return n}if(i.Dx===x.ClipperBase.horizontal&&(t?e=i.Prev:e=i.Next,e.Dx===x.ClipperBase.horizontal?e.Bot.X!==i.Bot.X&&e.Top.X!==i.Bot.X&&this.ReverseHorizontal(i):e.Bot.X!==i.Bot.X&&this.ReverseHorizontal(i)),e=i,t){for(;n.Top.Y===n.Next.Bot.Y&&n.Next.OutIdx!==x.ClipperBase.Skip;)n=n.Next;if(n.Dx===x.ClipperBase.horizontal&&n.Next.OutIdx!==x.ClipperBase.Skip){for(r=n;r.Prev.Dx===x.ClipperBase.horizontal;)r=r.Prev;r.Prev.Top.X>n.Next.Top.X&&(n=r.Prev)}for(;i!==n;)i.NextInLML=i.Next,i.Dx===x.ClipperBase.horizontal&&i!==e&&i.Bot.X!==i.Prev.Top.X&&this.ReverseHorizontal(i),i=i.Next;i.Dx===x.ClipperBase.horizontal&&i!==e&&i.Bot.X!==i.Prev.Top.X&&this.ReverseHorizontal(i),n=n.Next}else{for(;n.Top.Y===n.Prev.Bot.Y&&n.Prev.OutIdx!==x.ClipperBase.Skip;)n=n.Prev;if(n.Dx===x.ClipperBase.horizontal&&n.Prev.OutIdx!==x.ClipperBase.Skip){for(r=n;r.Next.Dx===x.ClipperBase.horizontal;)r=r.Next;(r.Next.Top.X===n.Prev.Top.X||r.Next.Top.X>n.Prev.Top.X)&&(n=r.Next)}for(;i!==n;)i.NextInLML=i.Prev,i.Dx===x.ClipperBase.horizontal&&i!==e&&i.Bot.X!==i.Next.Top.X&&this.ReverseHorizontal(i),i=i.Prev;i.Dx===x.ClipperBase.horizontal&&i!==e&&i.Bot.X!==i.Next.Top.X&&this.ReverseHorizontal(i),n=n.Prev}return n};x.ClipperBase.prototype.AddPath=function(i,t,e){x.use_lines?!e&&t===x.PolyType.ptClip&&x.Error("AddPath: Open paths must be subject."):e||x.Error("AddPath: Open paths have been disabled.");var n=i.length-1;if(e)for(;n>0&&x.FPoint.op_Equality(i[n],i[0]);)--n;for(;n>0&&x.FPoint.op_Equality(i[n],i[n-1]);)--n;if(e&&n<2||!e&&n<1)return!1;for(var r=new Array,o=0;o<=n;o++)r.push(new x.TEdge);var s=!0;r[1].Curr.X=i[1].X,r[1].Curr.Y=i[1].Y,x.use_xyz&&(r[1].Curr.Z=i[1].Z),this.RangeTest(i[0]),this.RangeTest(i[n]),this.InitEdge(r[0],r[1],r[n],i[0]),this.InitEdge(r[n],r[0],r[n-1],i[n]);for(var o=n-1;o>=1;--o)this.RangeTest(i[o]),this.InitEdge(r[o],r[o+1],r[o-1],i[o]);for(var l=r[0],h=l,c=l;;){if(h.Curr===h.Next.Curr&&(e||h.Next!==l)){if(h===h.Next)break;h===l&&(l=h.Next),h=this.RemoveEdge(h),c=h;continue}if(h.Prev===h.Next)break;if(e&&x.ClipperBase.SlopesEqual4(h.Prev.Curr,h.Curr,h.Next.Curr)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(h.Prev.Curr,h.Curr,h.Next.Curr))){h===l&&(l=h.Next),h=this.RemoveEdge(h),h=h.Prev,c=h;continue}if(h=h.Next,h===c||!e&&h.Next===l)break}if(!e&&h===h.Next||e&&h.Prev===h.Next)return!1;e||(this.m_HasOpenPaths=!0,l.Prev.OutIdx=x.ClipperBase.Skip),h=l;do this.InitEdge2(h,t),h=h.Next,s&&h.Curr.Y!==l.Curr.Y&&(s=!1);while(h!==l);if(s){if(e)return!1;h.Prev.OutIdx=x.ClipperBase.Skip;var p=new x.LocalMinima;for(p.Next=null,p.Y=h.Bot.Y,p.LeftBound=null,p.RightBound=h,p.RightBound.Side=x.EdgeSide.esRight,p.RightBound.WindDelta=0;h.Bot.X!==h.Prev.Top.X&&this.ReverseHorizontal(h),h.Next.OutIdx!==x.ClipperBase.Skip;)h.NextInLML=h.Next,h=h.Next;return this.InsertLocalMinima(p),this.m_edges.push(r),!0}this.m_edges.push(r);var d,m=null;for(x.FPoint.op_Equality(h.Prev.Bot,h.Prev.Top)&&(h=h.Next);h=this.FindNextLocMin(h),h!==m;){m===null&&(m=h);var p=new x.LocalMinima;p.Next=null,p.Y=h.Bot.Y,h.Dx<h.Prev.Dx?(p.LeftBound=h.Prev,p.RightBound=h,d=!1):(p.LeftBound=h,p.RightBound=h.Prev,d=!0),p.LeftBound.Side=x.EdgeSide.esLeft,p.RightBound.Side=x.EdgeSide.esRight,e?p.LeftBound.Next===p.RightBound?p.LeftBound.WindDelta=-1:p.LeftBound.WindDelta=1:p.LeftBound.WindDelta=0,p.RightBound.WindDelta=-p.LeftBound.WindDelta,h=this.ProcessBound(p.LeftBound,d),h.OutIdx===x.ClipperBase.Skip&&(h=this.ProcessBound(h,d));var v=this.ProcessBound(p.RightBound,!d);v.OutIdx===x.ClipperBase.Skip&&(v=this.ProcessBound(v,!d)),p.LeftBound.OutIdx===x.ClipperBase.Skip?p.LeftBound=null:p.RightBound.OutIdx===x.ClipperBase.Skip&&(p.RightBound=null),this.InsertLocalMinima(p),d||(h=v)}return!0};x.ClipperBase.prototype.AddPaths=function(i,t,e){for(var n=!1,r=0,o=i.length;r<o;++r)this.AddPath(i[r],t,e)&&(n=!0);return n};x.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(i,t,e){return x.FPoint.op_Equality(i,e)||x.FPoint.op_Equality(i,t)||x.FPoint.op_Equality(e,t)?!1:i.X!==e.X?t.X>i.X==t.X<e.X:t.Y>i.Y==t.Y<e.Y};x.ClipperBase.prototype.RemoveEdge=function(i){i.Prev.Next=i.Next,i.Next.Prev=i.Prev;var t=i.Next;return i.Prev=null,t};x.ClipperBase.prototype.SetDx=function(i){i.Delta.X=i.Top.X-i.Bot.X,i.Delta.Y=i.Top.Y-i.Bot.Y,i.Delta.Y===0?i.Dx=x.ClipperBase.horizontal:i.Dx=i.Delta.X/i.Delta.Y};x.ClipperBase.prototype.InsertLocalMinima=function(i){if(this.m_MinimaList===null)this.m_MinimaList=i;else if(i.Y>=this.m_MinimaList.Y)i.Next=this.m_MinimaList,this.m_MinimaList=i;else{for(var t=this.m_MinimaList;t.Next!==null&&i.Y<t.Next.Y;)t=t.Next;i.Next=t.Next,t.Next=i}};x.ClipperBase.prototype.PopLocalMinima=function(i,t){return t.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===i?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1};x.ClipperBase.prototype.ReverseHorizontal=function(i){var t=i.Top.X;i.Top.X=i.Bot.X,i.Bot.X=t,x.use_xyz&&(t=i.Top.Z,i.Top.Z=i.Bot.Z,i.Bot.Z=t)};x.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var i=this.m_MinimaList;i!==null;){this.InsertScanbeam(i.Y);var t=i.LeftBound;t!==null&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,x.use_xyz&&(t.Curr.Z=t.Bot.Z),t.OutIdx=x.ClipperBase.Unassigned),t=i.RightBound,t!==null&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,x.use_xyz&&(t.Curr.Z=t.Bot.Z),t.OutIdx=x.ClipperBase.Unassigned),i=i.Next}this.m_ActiveEdges=null}};x.ClipperBase.prototype.InsertScanbeam=function(i){if(this.m_Scanbeam===null)this.m_Scanbeam=new x.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=i;else if(i>this.m_Scanbeam.Y){var t=new x.Scanbeam;t.Y=i,t.Next=this.m_Scanbeam,this.m_Scanbeam=t}else{for(var e=this.m_Scanbeam;e.Next!==null&&i<=e.Next.Y;)e=e.Next;if(i===e.Y)return;var n=new x.Scanbeam;n.Y=i,n.Next=e.Next,e.Next=n}};x.ClipperBase.prototype.PopScanbeam=function(i){return this.m_Scanbeam===null?(i.v=0,!1):(i.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)};x.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null};x.ClipperBase.prototype.CreateOutRec=function(){var i=new x.OutRec;return i.Idx=x.ClipperBase.Unassigned,i.IsHole=!1,i.IsOpen=!1,i.FirstLeft=null,i.Pts=null,i.BottomPt=null,i.PolyNode=null,this.m_PolyOuts.push(i),i.Idx=this.m_PolyOuts.length-1,i};x.ClipperBase.prototype.DisposeOutRec=function(i){var t=this.m_PolyOuts[i];t.Pts=null,t=null,this.m_PolyOuts[i]=null};x.ClipperBase.prototype.UpdateEdgeIntoAEL=function(i){i.NextInLML===null&&x.Error("UpdateEdgeIntoAEL: invalid call");var t=i.PrevInAEL,e=i.NextInAEL;return i.NextInLML.OutIdx=i.OutIdx,t!==null?t.NextInAEL=i.NextInLML:this.m_ActiveEdges=i.NextInLML,e!==null&&(e.PrevInAEL=i.NextInLML),i.NextInLML.Side=i.Side,i.NextInLML.WindDelta=i.WindDelta,i.NextInLML.WindCnt=i.WindCnt,i.NextInLML.WindCnt2=i.WindCnt2,i=i.NextInLML,i.Curr.X=i.Bot.X,i.Curr.Y=i.Bot.Y,i.PrevInAEL=t,i.NextInAEL=e,x.ClipperBase.IsHorizontal(i)||this.InsertScanbeam(i.Top.Y),i};x.ClipperBase.prototype.SwapPositionsInAEL=function(i,t){if(!(i.NextInAEL===i.PrevInAEL||t.NextInAEL===t.PrevInAEL)){if(i.NextInAEL===t){var e=t.NextInAEL;e!==null&&(e.PrevInAEL=i);var n=i.PrevInAEL;n!==null&&(n.NextInAEL=t),t.PrevInAEL=n,t.NextInAEL=i,i.PrevInAEL=t,i.NextInAEL=e}else if(t.NextInAEL===i){var r=i.NextInAEL;r!==null&&(r.PrevInAEL=t);var o=t.PrevInAEL;o!==null&&(o.NextInAEL=i),i.PrevInAEL=o,i.NextInAEL=t,t.PrevInAEL=i,t.NextInAEL=r}else{var s=i.NextInAEL,l=i.PrevInAEL;i.NextInAEL=t.NextInAEL,i.NextInAEL!==null&&(i.NextInAEL.PrevInAEL=i),i.PrevInAEL=t.PrevInAEL,i.PrevInAEL!==null&&(i.PrevInAEL.NextInAEL=i),t.NextInAEL=s,t.NextInAEL!==null&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=l,t.PrevInAEL!==null&&(t.PrevInAEL.NextInAEL=t)}i.PrevInAEL===null?this.m_ActiveEdges=i:t.PrevInAEL===null&&(this.m_ActiveEdges=t)}};x.ClipperBase.prototype.DeleteFromAEL=function(i){var t=i.PrevInAEL,e=i.NextInAEL;t===null&&e===null&&i!==this.m_ActiveEdges||(t!==null?t.NextInAEL=e:this.m_ActiveEdges=e,e!==null&&(e.PrevInAEL=t),i.NextInAEL=null,i.PrevInAEL=null)};x.Clipper=function(i){typeof i>"u"&&(i=0),this.m_PolyOuts=null,this.m_ClipType=x.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=x.PolyFillType.pftEvenOdd,this.m_SubjFillType=x.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,x.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=x.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&i)!==0,this.StrictlySimple=(2&i)!==0,this.PreserveCollinear=(4&i)!==0,x.use_xyz&&(this.ZFillFunction=null)};x.Clipper.ioReverseSolution=1;x.Clipper.ioStrictlySimple=2;x.Clipper.ioPreserveCollinear=4;x.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),x.ClipperBase.prototype.Clear.call(this))};x.Clipper.prototype.InsertMaxima=function(i){var t=new x.Maxima;if(t.X=i,this.m_Maxima===null)this.m_Maxima=t,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(i<this.m_Maxima.X)t.Next=this.m_Maxima,t.Prev=null,this.m_Maxima=t;else{for(var e=this.m_Maxima;e.Next!==null&&i>=e.Next.X;)e=e.Next;if(i===e.X)return;t.Next=e.Next,t.Prev=e,e.Next!==null&&(e.Next.Prev=t),e.Next=t}};x.Clipper.prototype.Execute=function(){var i=arguments,t=i.length,e=i[1]instanceof x.PolyTree;if(t===4&&!e){var n=i[0],r=i[1],o=i[2],s=i[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&x.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,x.Clear(r),this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=n,this.m_UsingPolyTree=!1;try{var l=this.ExecuteInternal();l&&this.BuildResult(r)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}else if(t===4&&e){var n=i[0],h=i[1],o=i[2],s=i[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=n,this.m_UsingPolyTree=!0;try{var l=this.ExecuteInternal();l&&this.BuildResult2(h)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}else if(t===2&&!e){var n=i[0],r=i[1];return this.Execute(n,r,x.PolyFillType.pftEvenOdd,x.PolyFillType.pftEvenOdd)}else if(t===2&&e){var n=i[0],h=i[1];return this.Execute(n,h,x.PolyFillType.pftEvenOdd,x.PolyFillType.pftEvenOdd)}};x.Clipper.prototype.FixHoleLinkage=function(i){if(!(i.FirstLeft===null||i.IsHole!==i.FirstLeft.IsHole&&i.FirstLeft.Pts!==null)){for(var t=i.FirstLeft;t!==null&&(t.IsHole===i.IsHole||t.Pts===null);)t=t.FirstLeft;i.FirstLeft=t}};x.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var i={},t={};if(!this.PopScanbeam(i))return!1;for(this.InsertLocalMinimaIntoAEL(i.v);this.PopScanbeam(t)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(t.v))return!1;this.ProcessEdgesAtTopOfScanbeam(t.v),i.v=t.v,this.InsertLocalMinimaIntoAEL(i.v)}var e,n,r;for(n=0,r=this.m_PolyOuts.length;n<r;n++)e=this.m_PolyOuts[n],!(e.Pts===null||e.IsOpen)&&(e.IsHole^this.ReverseSolution)==this.Area$1(e)>0&&this.ReversePolyPtLinks(e.Pts);for(this.JoinCommonEdges(),n=0,r=this.m_PolyOuts.length;n<r;n++)e=this.m_PolyOuts[n],e.Pts!==null&&(e.IsOpen?this.FixupOutPolyline(e):this.FixupOutPolygon(e));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}};x.Clipper.prototype.DisposeAllPolyPts=function(){for(var i=0,t=this.m_PolyOuts.length;i<t;++i)this.DisposeOutRec(i);x.Clear(this.m_PolyOuts)};x.Clipper.prototype.AddJoin=function(i,t,e){var n=new x.Join;n.OutPt1=i,n.OutPt2=t,n.OffPt.X=e.X,n.OffPt.Y=e.Y,x.use_xyz&&(n.OffPt.Z=e.Z),this.m_Joins.push(n)};x.Clipper.prototype.AddGhostJoin=function(i,t){var e=new x.Join;e.OutPt1=i,e.OffPt.X=t.X,e.OffPt.Y=t.Y,x.use_xyz&&(e.OffPt.Z=t.Z),this.m_GhostJoins.push(e)};x.Clipper.prototype.SetZ=function(i,t,e){if(this.ZFillFunction!==null){if(i.Z!==0||this.ZFillFunction===null)return;x.FPoint.op_Equality(i,t.Bot)?i.Z=t.Bot.Z:x.FPoint.op_Equality(i,t.Top)?i.Z=t.Top.Z:x.FPoint.op_Equality(i,e.Bot)?i.Z=e.Bot.Z:x.FPoint.op_Equality(i,e.Top)?i.Z=e.Top.Z:this.ZFillFunction(t.Bot,t.Top,e.Bot,e.Top,i)}};x.Clipper.prototype.InsertLocalMinimaIntoAEL=function(i){for(var t={},e,n;this.PopLocalMinima(i,t);){e=t.v.LeftBound,n=t.v.RightBound;var r=null;if(e===null?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(r=this.AddOutPt(n,n.Bot))):n===null?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(r=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(n,e),this.SetWindingCount(e),n.WindCnt=e.WindCnt,n.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(r=this.AddLocalMinPoly(e,n,e.Bot)),this.InsertScanbeam(e.Top.Y)),n!==null&&(x.ClipperBase.IsHorizontal(n)?(n.NextInLML!==null&&this.InsertScanbeam(n.NextInLML.Top.Y),this.AddEdgeToSEL(n)):this.InsertScanbeam(n.Top.Y)),!(e===null||n===null)){if(r!==null&&x.ClipperBase.IsHorizontal(n)&&this.m_GhostJoins.length>0&&n.WindDelta!==0)for(var o=0,s=this.m_GhostJoins.length;o<s;o++){var l=this.m_GhostJoins[o];this.HorzSegmentsOverlap(l.OutPt1.Pt.X,l.OffPt.X,n.Bot.X,n.Top.X)&&this.AddJoin(l.OutPt1,r,l.OffPt)}if(e.OutIdx>=0&&e.PrevInAEL!==null&&e.PrevInAEL.Curr.X===e.Bot.X&&e.PrevInAEL.OutIdx>=0&&x.ClipperBase.SlopesEqual5(e.PrevInAEL.Curr,e.PrevInAEL.Top,e.Curr,e.Top)&&e.WindDelta!==0&&e.PrevInAEL.WindDelta!==0){var h=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(r,h,e.Top)}if(e.NextInAEL!==n){if(n.OutIdx>=0&&n.PrevInAEL.OutIdx>=0&&x.ClipperBase.SlopesEqual5(n.PrevInAEL.Curr,n.PrevInAEL.Top,n.Curr,n.Top)&&n.WindDelta!==0&&n.PrevInAEL.WindDelta!==0){var h=this.AddOutPt(n.PrevInAEL,n.Bot);this.AddJoin(r,h,n.Top)}var c=e.NextInAEL;if(c!==null)for(;c!==n;)this.IntersectEdges(n,c,e.Curr),c=c.NextInAEL}}}};x.Clipper.prototype.InsertEdgeIntoAEL=function(i,t){if(this.m_ActiveEdges===null)i.PrevInAEL=null,i.NextInAEL=null,this.m_ActiveEdges=i;else if(t===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,i))i.PrevInAEL=null,i.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=i,this.m_ActiveEdges=i;else{for(t===null&&(t=this.m_ActiveEdges);t.NextInAEL!==null&&!this.E2InsertsBeforeE1(t.NextInAEL,i);)t=t.NextInAEL;i.NextInAEL=t.NextInAEL,t.NextInAEL!==null&&(t.NextInAEL.PrevInAEL=i),i.PrevInAEL=t,t.NextInAEL=i}};x.Clipper.prototype.E2InsertsBeforeE1=function(i,t){return t.Curr.X===i.Curr.X?t.Top.Y>i.Top.Y?t.Top.X<x.Clipper.TopX(i,t.Top.Y):i.Top.X>x.Clipper.TopX(t,i.Top.Y):t.Curr.X<i.Curr.X};x.Clipper.prototype.IsEvenOddFillType=function(i){return i.PolyTyp===x.PolyType.ptSubject?this.m_SubjFillType===x.PolyFillType.pftEvenOdd:this.m_ClipFillType===x.PolyFillType.pftEvenOdd};x.Clipper.prototype.IsEvenOddAltFillType=function(i){return i.PolyTyp===x.PolyType.ptSubject?this.m_ClipFillType===x.PolyFillType.pftEvenOdd:this.m_SubjFillType===x.PolyFillType.pftEvenOdd};x.Clipper.prototype.IsContributing=function(i){var t,e;switch(i.PolyTyp===x.PolyType.ptSubject?(t=this.m_SubjFillType,e=this.m_ClipFillType):(t=this.m_ClipFillType,e=this.m_SubjFillType),t){case x.PolyFillType.pftEvenOdd:if(i.WindDelta===0&&i.WindCnt!==1)return!1;break;case x.PolyFillType.pftNonZero:if(Math.abs(i.WindCnt)!==1)return!1;break;case x.PolyFillType.pftPositive:if(i.WindCnt!==1)return!1;break;default:if(i.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case x.ClipType.ctIntersection:switch(e){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return i.WindCnt2!==0;case x.PolyFillType.pftPositive:return i.WindCnt2>0;default:return i.WindCnt2<0}case x.ClipType.ctUnion:switch(e){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return i.WindCnt2===0;case x.PolyFillType.pftPositive:return i.WindCnt2<=0;default:return i.WindCnt2>=0}case x.ClipType.ctDifference:if(i.PolyTyp===x.PolyType.ptSubject)switch(e){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return i.WindCnt2===0;case x.PolyFillType.pftPositive:return i.WindCnt2<=0;default:return i.WindCnt2>=0}else switch(e){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return i.WindCnt2!==0;case x.PolyFillType.pftPositive:return i.WindCnt2>0;default:return i.WindCnt2<0}case x.ClipType.ctXor:if(i.WindDelta===0)switch(e){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return i.WindCnt2===0;case x.PolyFillType.pftPositive:return i.WindCnt2<=0;default:return i.WindCnt2>=0}else return!0}return!0};x.Clipper.prototype.SetWindingCount=function(i){for(var t=i.PrevInAEL;t!==null&&(t.PolyTyp!==i.PolyTyp||t.WindDelta===0);)t=t.PrevInAEL;if(t===null){var e=i.PolyTyp===x.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;i.WindDelta===0?i.WindCnt=e===x.PolyFillType.pftNegative?-1:1:i.WindCnt=i.WindDelta,i.WindCnt2=0,t=this.m_ActiveEdges}else if(i.WindDelta===0&&this.m_ClipType!==x.ClipType.ctUnion)i.WindCnt=1,i.WindCnt2=t.WindCnt2,t=t.NextInAEL;else if(this.IsEvenOddFillType(i)){if(i.WindDelta===0){for(var n=!0,r=t.PrevInAEL;r!==null;)r.PolyTyp===t.PolyTyp&&r.WindDelta!==0&&(n=!n),r=r.PrevInAEL;i.WindCnt=n?0:1}else i.WindCnt=i.WindDelta;i.WindCnt2=t.WindCnt2,t=t.NextInAEL}else t.WindCnt*t.WindDelta<0?Math.abs(t.WindCnt)>1?t.WindDelta*i.WindDelta<0?i.WindCnt=t.WindCnt:i.WindCnt=t.WindCnt+i.WindDelta:i.WindCnt=i.WindDelta===0?1:i.WindDelta:i.WindDelta===0?i.WindCnt=t.WindCnt<0?t.WindCnt-1:t.WindCnt+1:t.WindDelta*i.WindDelta<0?i.WindCnt=t.WindCnt:i.WindCnt=t.WindCnt+i.WindDelta,i.WindCnt2=t.WindCnt2,t=t.NextInAEL;if(this.IsEvenOddAltFillType(i))for(;t!==i;)t.WindDelta!==0&&(i.WindCnt2=i.WindCnt2===0?1:0),t=t.NextInAEL;else for(;t!==i;)i.WindCnt2+=t.WindDelta,t=t.NextInAEL};x.Clipper.prototype.AddEdgeToSEL=function(i){this.m_SortedEdges===null?(this.m_SortedEdges=i,i.PrevInSEL=null,i.NextInSEL=null):(i.NextInSEL=this.m_SortedEdges,i.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=i,this.m_SortedEdges=i)};x.Clipper.prototype.PopEdgeFromSEL=function(i){if(i.v=this.m_SortedEdges,i.v===null)return!1;var t=i.v;return this.m_SortedEdges=i.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),t.NextInSEL=null,t.PrevInSEL=null,!0};x.Clipper.prototype.CopyAELToSEL=function(){var i=this.m_ActiveEdges;for(this.m_SortedEdges=i;i!==null;)i.PrevInSEL=i.PrevInAEL,i.NextInSEL=i.NextInAEL,i=i.NextInAEL};x.Clipper.prototype.SwapPositionsInSEL=function(i,t){if(!(i.NextInSEL===null&&i.PrevInSEL===null)&&!(t.NextInSEL===null&&t.PrevInSEL===null)){if(i.NextInSEL===t){var e=t.NextInSEL;e!==null&&(e.PrevInSEL=i);var n=i.PrevInSEL;n!==null&&(n.NextInSEL=t),t.PrevInSEL=n,t.NextInSEL=i,i.PrevInSEL=t,i.NextInSEL=e}else if(t.NextInSEL===i){var e=i.NextInSEL;e!==null&&(e.PrevInSEL=t);var n=t.PrevInSEL;n!==null&&(n.NextInSEL=i),i.PrevInSEL=n,i.NextInSEL=t,t.PrevInSEL=i,t.NextInSEL=e}else{var e=i.NextInSEL,n=i.PrevInSEL;i.NextInSEL=t.NextInSEL,i.NextInSEL!==null&&(i.NextInSEL.PrevInSEL=i),i.PrevInSEL=t.PrevInSEL,i.PrevInSEL!==null&&(i.PrevInSEL.NextInSEL=i),t.NextInSEL=e,t.NextInSEL!==null&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=n,t.PrevInSEL!==null&&(t.PrevInSEL.NextInSEL=t)}i.PrevInSEL===null?this.m_SortedEdges=i:t.PrevInSEL===null&&(this.m_SortedEdges=t)}};x.Clipper.prototype.AddLocalMaxPoly=function(i,t,e){this.AddOutPt(i,e),t.WindDelta===0&&this.AddOutPt(t,e),i.OutIdx===t.OutIdx?(i.OutIdx=-1,t.OutIdx=-1):i.OutIdx<t.OutIdx?this.AppendPolygon(i,t):this.AppendPolygon(t,i)};x.Clipper.prototype.AddLocalMinPoly=function(i,t,e){var n,r,o;if(x.ClipperBase.IsHorizontal(t)||i.Dx>t.Dx?(n=this.AddOutPt(i,e),t.OutIdx=i.OutIdx,i.Side=x.EdgeSide.esLeft,t.Side=x.EdgeSide.esRight,r=i,r.PrevInAEL===t?o=t.PrevInAEL:o=r.PrevInAEL):(n=this.AddOutPt(t,e),i.OutIdx=t.OutIdx,i.Side=x.EdgeSide.esRight,t.Side=x.EdgeSide.esLeft,r=t,r.PrevInAEL===i?o=i.PrevInAEL:o=r.PrevInAEL),o!==null&&o.OutIdx>=0&&o.Top.Y<e.Y&&r.Top.Y<e.Y){var s=x.Clipper.TopX(o,e.Y),l=x.Clipper.TopX(r,e.Y);if(s===l&&r.WindDelta!==0&&o.WindDelta!==0&&x.ClipperBase.SlopesEqual5(new x.FPoint2(s,e.Y),o.Top,new x.FPoint2(l,e.Y),r.Top)){var h=this.AddOutPt(o,e);this.AddJoin(n,h,r.Top)}}return n};x.Clipper.prototype.AddOutPt=function(i,t){if(i.OutIdx<0){var e=this.CreateOutRec();e.IsOpen=i.WindDelta===0;var n=new x.OutPt;return e.Pts=n,n.Idx=e.Idx,n.Pt.X=t.X,n.Pt.Y=t.Y,x.use_xyz&&(n.Pt.Z=t.Z),n.Next=n,n.Prev=n,e.IsOpen||this.SetHoleState(i,e),i.OutIdx=e.Idx,n}else{var e=this.m_PolyOuts[i.OutIdx],r=e.Pts,o=i.Side===x.EdgeSide.esLeft;if(o&&x.FPoint.op_Equality(t,r.Pt))return r;if(!o&&x.FPoint.op_Equality(t,r.Prev.Pt))return r.Prev;var n=new x.OutPt;return n.Idx=e.Idx,n.Pt.X=t.X,n.Pt.Y=t.Y,x.use_xyz&&(n.Pt.Z=t.Z),n.Next=r,n.Prev=r.Prev,n.Prev.Next=n,r.Prev=n,o&&(e.Pts=n),n}};x.Clipper.prototype.GetLastOutPt=function(i){var t=this.m_PolyOuts[i.OutIdx];return i.Side===x.EdgeSide.esLeft?t.Pts:t.Pts.Prev};x.Clipper.prototype.SwapPoints=function(i,t){var e=new x.FPoint1(i.Value);i.Value.X=t.Value.X,i.Value.Y=t.Value.Y,x.use_xyz&&(i.Value.Z=t.Value.Z),t.Value.X=e.X,t.Value.Y=e.Y,x.use_xyz&&(t.Value.Z=e.Z)};x.Clipper.prototype.HorzSegmentsOverlap=function(i,t,e,n){var r;return i>t&&(r=i,i=t,t=r),e>n&&(r=e,e=n,n=r),i<n&&e<t};x.Clipper.prototype.SetHoleState=function(i,t){for(var e=i.PrevInAEL,n=null;e!==null;)e.OutIdx>=0&&e.WindDelta!==0&&(n===null?n=e:n.OutIdx===e.OutIdx&&(n=null)),e=e.PrevInAEL;n===null?(t.FirstLeft=null,t.IsHole=!1):(t.FirstLeft=this.m_PolyOuts[n.OutIdx],t.IsHole=!t.FirstLeft.IsHole)};x.Clipper.prototype.GetDx=function(i,t){return i.Y===t.Y?x.ClipperBase.horizontal:(t.X-i.X)/(t.Y-i.Y)};x.Clipper.prototype.FirstIsBottomPt=function(i,t){for(var e=i.Prev;x.FPoint.op_Equality(e.Pt,i.Pt)&&e!==i;)e=e.Prev;var n=Math.abs(this.GetDx(i.Pt,e.Pt));for(e=i.Next;x.FPoint.op_Equality(e.Pt,i.Pt)&&e!==i;)e=e.Next;var r=Math.abs(this.GetDx(i.Pt,e.Pt));for(e=t.Prev;x.FPoint.op_Equality(e.Pt,t.Pt)&&e!==t;)e=e.Prev;var o=Math.abs(this.GetDx(t.Pt,e.Pt));for(e=t.Next;x.FPoint.op_Equality(e.Pt,t.Pt)&&e!==t;)e=e.Next;var s=Math.abs(this.GetDx(t.Pt,e.Pt));return Math.max(n,r)===Math.max(o,s)&&Math.min(n,r)===Math.min(o,s)?this.Area(i)>0:n>=o&&n>=s||r>=o&&r>=s};x.Clipper.prototype.GetBottomPt=function(i){for(var t=null,e=i.Next;e!==i;)e.Pt.Y>i.Pt.Y?(i=e,t=null):e.Pt.Y===i.Pt.Y&&e.Pt.X<=i.Pt.X&&(e.Pt.X<i.Pt.X?(t=null,i=e):e.Next!==i&&e.Prev!==i&&(t=e)),e=e.Next;if(t!==null)for(;t!==e;)for(this.FirstIsBottomPt(e,t)||(i=t),t=t.Next;x.FPoint.op_Inequality(t.Pt,i.Pt);)t=t.Next;return i};x.Clipper.prototype.GetLowermostRec=function(i,t){i.BottomPt===null&&(i.BottomPt=this.GetBottomPt(i.Pts)),t.BottomPt===null&&(t.BottomPt=this.GetBottomPt(t.Pts));var e=i.BottomPt,n=t.BottomPt;return e.Pt.Y>n.Pt.Y?i:e.Pt.Y<n.Pt.Y?t:e.Pt.X<n.Pt.X?i:e.Pt.X>n.Pt.X||e.Next===e?t:n.Next===n||this.FirstIsBottomPt(e,n)?i:t};x.Clipper.prototype.OutRec1RightOfOutRec2=function(i,t){do if(i=i.FirstLeft,i===t)return!0;while(i!==null);return!1};x.Clipper.prototype.GetOutRec=function(i){for(var t=this.m_PolyOuts[i];t!==this.m_PolyOuts[t.Idx];)t=this.m_PolyOuts[t.Idx];return t};x.Clipper.prototype.AppendPolygon=function(i,t){var e=this.m_PolyOuts[i.OutIdx],n=this.m_PolyOuts[t.OutIdx],r;this.OutRec1RightOfOutRec2(e,n)?r=n:this.OutRec1RightOfOutRec2(n,e)?r=e:r=this.GetLowermostRec(e,n);var o=e.Pts,s=o.Prev,l=n.Pts,h=l.Prev;i.Side===x.EdgeSide.esLeft?t.Side===x.EdgeSide.esLeft?(this.ReversePolyPtLinks(l),l.Next=o,o.Prev=l,s.Next=h,h.Prev=s,e.Pts=h):(h.Next=o,o.Prev=h,l.Prev=s,s.Next=l,e.Pts=l):t.Side===x.EdgeSide.esRight?(this.ReversePolyPtLinks(l),s.Next=h,h.Prev=s,l.Next=o,o.Prev=l):(s.Next=l,l.Prev=s,o.Prev=h,h.Next=o),e.BottomPt=null,r===n&&(n.FirstLeft!==e&&(e.FirstLeft=n.FirstLeft),e.IsHole=n.IsHole),n.Pts=null,n.BottomPt=null,n.FirstLeft=e;var c=i.OutIdx,p=t.OutIdx;i.OutIdx=-1,t.OutIdx=-1;for(var d=this.m_ActiveEdges;d!==null;){if(d.OutIdx===p){d.OutIdx=c,d.Side=i.Side;break}d=d.NextInAEL}n.Idx=e.Idx};x.Clipper.prototype.ReversePolyPtLinks=function(i){if(i!==null){var t,e;t=i;do e=t.Next,t.Next=t.Prev,t.Prev=e,t=e;while(t!==i)}};x.Clipper.SwapSides=function(i,t){var e=i.Side;i.Side=t.Side,t.Side=e};x.Clipper.SwapPolyIndexes=function(i,t){var e=i.OutIdx;i.OutIdx=t.OutIdx,t.OutIdx=e};x.Clipper.prototype.IntersectEdges=function(i,t,e){var n=i.OutIdx>=0,r=t.OutIdx>=0;if(x.use_xyz&&this.SetZ(e,i,t),x.use_lines&&(i.WindDelta===0||t.WindDelta===0)){if(i.WindDelta===0&&t.WindDelta===0)return;i.PolyTyp===t.PolyTyp&&i.WindDelta!==t.WindDelta&&this.m_ClipType===x.ClipType.ctUnion?i.WindDelta===0?r&&(this.AddOutPt(i,e),n&&(i.OutIdx=-1)):n&&(this.AddOutPt(t,e),r&&(t.OutIdx=-1)):i.PolyTyp!==t.PolyTyp&&(i.WindDelta===0&&Math.abs(t.WindCnt)===1&&(this.m_ClipType!==x.ClipType.ctUnion||t.WindCnt2===0)?(this.AddOutPt(i,e),n&&(i.OutIdx=-1)):t.WindDelta===0&&Math.abs(i.WindCnt)===1&&(this.m_ClipType!==x.ClipType.ctUnion||i.WindCnt2===0)&&(this.AddOutPt(t,e),r&&(t.OutIdx=-1)));return}if(i.PolyTyp===t.PolyTyp)if(this.IsEvenOddFillType(i)){var o=i.WindCnt;i.WindCnt=t.WindCnt,t.WindCnt=o}else i.WindCnt+t.WindDelta===0?i.WindCnt=-i.WindCnt:i.WindCnt+=t.WindDelta,t.WindCnt-i.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt-=i.WindDelta;else this.IsEvenOddFillType(t)?i.WindCnt2=i.WindCnt2===0?1:0:i.WindCnt2+=t.WindDelta,this.IsEvenOddFillType(i)?t.WindCnt2=t.WindCnt2===0?1:0:t.WindCnt2-=i.WindDelta;var s,l,h,c;i.PolyTyp===x.PolyType.ptSubject?(s=this.m_SubjFillType,h=this.m_ClipFillType):(s=this.m_ClipFillType,h=this.m_SubjFillType),t.PolyTyp===x.PolyType.ptSubject?(l=this.m_SubjFillType,c=this.m_ClipFillType):(l=this.m_ClipFillType,c=this.m_SubjFillType);var p,d;switch(s){case x.PolyFillType.pftPositive:p=i.WindCnt;break;case x.PolyFillType.pftNegative:p=-i.WindCnt;break;default:p=Math.abs(i.WindCnt);break}switch(l){case x.PolyFillType.pftPositive:d=t.WindCnt;break;case x.PolyFillType.pftNegative:d=-t.WindCnt;break;default:d=Math.abs(t.WindCnt);break}if(n&&r)p!==0&&p!==1||d!==0&&d!==1||i.PolyTyp!==t.PolyTyp&&this.m_ClipType!==x.ClipType.ctXor?this.AddLocalMaxPoly(i,t,e):(this.AddOutPt(i,e),this.AddOutPt(t,e),x.Clipper.SwapSides(i,t),x.Clipper.SwapPolyIndexes(i,t));else if(n)(d===0||d===1)&&(this.AddOutPt(i,e),x.Clipper.SwapSides(i,t),x.Clipper.SwapPolyIndexes(i,t));else if(r)(p===0||p===1)&&(this.AddOutPt(t,e),x.Clipper.SwapSides(i,t),x.Clipper.SwapPolyIndexes(i,t));else if((p===0||p===1)&&(d===0||d===1)){var m,v;switch(h){case x.PolyFillType.pftPositive:m=i.WindCnt2;break;case x.PolyFillType.pftNegative:m=-i.WindCnt2;break;default:m=Math.abs(i.WindCnt2);break}switch(c){case x.PolyFillType.pftPositive:v=t.WindCnt2;break;case x.PolyFillType.pftNegative:v=-t.WindCnt2;break;default:v=Math.abs(t.WindCnt2);break}if(i.PolyTyp!==t.PolyTyp)this.AddLocalMinPoly(i,t,e);else if(p===1&&d===1)switch(this.m_ClipType){case x.ClipType.ctIntersection:m>0&&v>0&&this.AddLocalMinPoly(i,t,e);break;case x.ClipType.ctUnion:m<=0&&v<=0&&this.AddLocalMinPoly(i,t,e);break;case x.ClipType.ctDifference:(i.PolyTyp===x.PolyType.ptClip&&m>0&&v>0||i.PolyTyp===x.PolyType.ptSubject&&m<=0&&v<=0)&&this.AddLocalMinPoly(i,t,e);break;case x.ClipType.ctXor:this.AddLocalMinPoly(i,t,e);break}else x.Clipper.SwapSides(i,t)}};x.Clipper.prototype.DeleteFromSEL=function(i){var t=i.PrevInSEL,e=i.NextInSEL;t===null&&e===null&&i!==this.m_SortedEdges||(t!==null?t.NextInSEL=e:this.m_SortedEdges=e,e!==null&&(e.PrevInSEL=t),i.NextInSEL=null,i.PrevInSEL=null)};x.Clipper.prototype.ProcessHorizontals=function(){for(var i={};this.PopEdgeFromSEL(i);)this.ProcessHorizontal(i.v)};x.Clipper.prototype.GetHorzDirection=function(i,t){i.Bot.X<i.Top.X?(t.Left=i.Bot.X,t.Right=i.Top.X,t.Dir=x.Direction.dLeftToRight):(t.Left=i.Top.X,t.Right=i.Bot.X,t.Dir=x.Direction.dRightToLeft)};x.Clipper.prototype.ProcessHorizontal=function(i){var t={Dir:null,Left:null,Right:null};this.GetHorzDirection(i,t);for(var e=t.Dir,n=t.Left,r=t.Right,o=i.WindDelta===0,s=i,l=null;s.NextInLML!==null&&x.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;s.NextInLML===null&&(l=this.GetMaximaPair(s));var h=this.m_Maxima;if(h!==null)if(e===x.Direction.dLeftToRight){for(;h!==null&&h.X<=i.Bot.X;)h=h.Next;h!==null&&h.X>=s.Top.X&&(h=null)}else{for(;h.Next!==null&&h.Next.X<i.Bot.X;)h=h.Next;h.X<=s.Top.X&&(h=null)}for(var c=null;;){for(var p=i===s,d=this.GetNextInAEL(i,e);d!==null;){if(h!==null)if(e===x.Direction.dLeftToRight)for(;h!==null&&h.X<d.Curr.X;)i.OutIdx>=0&&!o&&this.AddOutPt(i,new x.FPoint2(h.X,i.Bot.Y)),h=h.Next;else for(;h!==null&&h.X>d.Curr.X;)i.OutIdx>=0&&!o&&this.AddOutPt(i,new x.FPoint2(h.X,i.Bot.Y)),h=h.Prev;if(e===x.Direction.dLeftToRight&&d.Curr.X>r||e===x.Direction.dRightToLeft&&d.Curr.X<n||d.Curr.X===i.Top.X&&i.NextInLML!==null&&d.Dx<i.NextInLML.Dx)break;if(i.OutIdx>=0&&!o){x.use_xyz&&(e===x.Direction.dLeftToRight?this.SetZ(d.Curr,i,d):this.SetZ(d.Curr,d,i)),c=this.AddOutPt(i,d.Curr);for(var m=this.m_SortedEdges;m!==null;){if(m.OutIdx>=0&&this.HorzSegmentsOverlap(i.Bot.X,i.Top.X,m.Bot.X,m.Top.X)){var v=this.GetLastOutPt(m);this.AddJoin(v,c,m.Top)}m=m.NextInSEL}this.AddGhostJoin(c,i.Bot)}if(d===l&&p){i.OutIdx>=0&&this.AddLocalMaxPoly(i,l,i.Top),this.DeleteFromAEL(i),this.DeleteFromAEL(l);return}if(e===x.Direction.dLeftToRight){var C=new x.FPoint2(d.Curr.X,i.Curr.Y);this.IntersectEdges(i,d,C)}else{var C=new x.FPoint2(d.Curr.X,i.Curr.Y);this.IntersectEdges(d,i,C)}var O=this.GetNextInAEL(d,e);this.SwapPositionsInAEL(i,d),d=O}if(i.NextInLML===null||!x.ClipperBase.IsHorizontal(i.NextInLML))break;i=this.UpdateEdgeIntoAEL(i),i.OutIdx>=0&&this.AddOutPt(i,i.Bot),t={Dir:e,Left:n,Right:r},this.GetHorzDirection(i,t),e=t.Dir,n=t.Left,r=t.Right}if(i.OutIdx>=0&&c===null){c=this.GetLastOutPt(i);for(var m=this.m_SortedEdges;m!==null;){if(m.OutIdx>=0&&this.HorzSegmentsOverlap(i.Bot.X,i.Top.X,m.Bot.X,m.Top.X)){var v=this.GetLastOutPt(m);this.AddJoin(v,c,m.Top)}m=m.NextInSEL}this.AddGhostJoin(c,i.Top)}if(i.NextInLML!==null)if(i.OutIdx>=0){if(c=this.AddOutPt(i,i.Top),i=this.UpdateEdgeIntoAEL(i),i.WindDelta===0)return;var y=i.PrevInAEL,O=i.NextInAEL;if(y!==null&&y.Curr.X===i.Bot.X&&y.Curr.Y===i.Bot.Y&&y.WindDelta===0&&y.OutIdx>=0&&y.Curr.Y>y.Top.Y&&x.ClipperBase.SlopesEqual3(i,y)){var v=this.AddOutPt(y,i.Bot);this.AddJoin(c,v,i.Top)}else if(O!==null&&O.Curr.X===i.Bot.X&&O.Curr.Y===i.Bot.Y&&O.WindDelta!==0&&O.OutIdx>=0&&O.Curr.Y>O.Top.Y&&x.ClipperBase.SlopesEqual3(i,O)){var v=this.AddOutPt(O,i.Bot);this.AddJoin(c,v,i.Top)}}else i=this.UpdateEdgeIntoAEL(i);else i.OutIdx>=0&&this.AddOutPt(i,i.Top),this.DeleteFromAEL(i)};x.Clipper.prototype.GetNextInAEL=function(i,t){return t===x.Direction.dLeftToRight?i.NextInAEL:i.PrevInAEL};x.Clipper.prototype.IsMinima=function(i){return i!==null&&i.Prev.NextInLML!==i&&i.Next.NextInLML!==i};x.Clipper.prototype.IsMaxima=function(i,t){return i!==null&&i.Top.Y===t&&i.NextInLML===null};x.Clipper.prototype.IsIntermediate=function(i,t){return i.Top.Y===t&&i.NextInLML!==null};x.Clipper.prototype.GetMaximaPair=function(i){return x.FPoint.op_Equality(i.Next.Top,i.Top)&&i.Next.NextInLML===null?i.Next:x.FPoint.op_Equality(i.Prev.Top,i.Top)&&i.Prev.NextInLML===null?i.Prev:null};x.Clipper.prototype.GetMaximaPairEx=function(i){var t=this.GetMaximaPair(i);return t===null||t.OutIdx===x.ClipperBase.Skip||t.NextInAEL===t.PrevInAEL&&!x.ClipperBase.IsHorizontal(t)?null:t};x.Clipper.prototype.ProcessIntersections=function(i){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(i),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,x.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0};x.Clipper.prototype.BuildIntersectList=function(i){if(this.m_ActiveEdges!==null){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;t!==null;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t.Curr.X=x.Clipper.TopX(t,i),t=t.NextInAEL;for(var e=!0;e&&this.m_SortedEdges!==null;){for(e=!1,t=this.m_SortedEdges;t.NextInSEL!==null;){var n=t.NextInSEL,r=new x.FPoint0;if(t.Curr.X>n.Curr.X){this.IntersectPoint(t,n,r),r.Y<i&&(r=new x.FPoint2(x.Clipper.TopX(t,i),i));var o=new x.IntersectNode;o.Edge1=t,o.Edge2=n,o.Pt.X=r.X,o.Pt.Y=r.Y,x.use_xyz&&(o.Pt.Z=r.Z),this.m_IntersectList.push(o),this.SwapPositionsInSEL(t,n),e=!0}else t=n}if(t.PrevInSEL!==null)t.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}};x.Clipper.prototype.EdgesAdjacent=function(i){return i.Edge1.NextInSEL===i.Edge2||i.Edge1.PrevInSEL===i.Edge2};x.Clipper.IntersectNodeSort=function(i,t){return t.Pt.Y-i.Pt.Y};x.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var i=this.m_IntersectList.length,t=0;t<i;t++){if(!this.EdgesAdjacent(this.m_IntersectList[t])){for(var e=t+1;e<i&&!this.EdgesAdjacent(this.m_IntersectList[e]);)e++;if(e===i)return!1;var n=this.m_IntersectList[t];this.m_IntersectList[t]=this.m_IntersectList[e],this.m_IntersectList[e]=n}this.SwapPositionsInSEL(this.m_IntersectList[t].Edge1,this.m_IntersectList[t].Edge2)}return!0};x.Clipper.prototype.ProcessIntersectList=function(){for(var i=0,t=this.m_IntersectList.length;i<t;i++){var e=this.m_IntersectList[i];this.IntersectEdges(e.Edge1,e.Edge2,e.Pt),this.SwapPositionsInAEL(e.Edge1,e.Edge2)}this.m_IntersectList.length=0};x.Clipper.TopX=function(i,t){return t===i.Top.Y?i.Top.X:i.Bot.X+i.Dx*(t-i.Bot.Y)};x.Clipper.prototype.IntersectPoint=function(i,t,e){e.X=0,e.Y=0;var n,r;if(i.Dx===t.Dx){e.Y=i.Curr.Y,e.X=x.Clipper.TopX(i,e.Y);return}if(i.Delta.X===0)e.X=i.Bot.X,x.ClipperBase.IsHorizontal(t)?e.Y=t.Bot.Y:(r=t.Bot.Y-t.Bot.X/t.Dx,e.Y=e.X/t.Dx+r);else if(t.Delta.X===0)e.X=t.Bot.X,x.ClipperBase.IsHorizontal(i)?e.Y=i.Bot.Y:(n=i.Bot.Y-i.Bot.X/i.Dx,e.Y=e.X/i.Dx+n);else{n=i.Bot.X-i.Bot.Y*i.Dx,r=t.Bot.X-t.Bot.Y*t.Dx;var o=(r-n)/(i.Dx-t.Dx);e.Y=o,Math.abs(i.Dx)<Math.abs(t.Dx)?e.X=i.Dx*o+n:e.X=t.Dx*o+r}if(e.Y<i.Top.Y||e.Y<t.Top.Y){if(i.Top.Y>t.Top.Y)return e.Y=i.Top.Y,e.X=x.Clipper.TopX(t,i.Top.Y),e.X<i.Top.X;e.Y=t.Top.Y,Math.abs(i.Dx)<Math.abs(t.Dx)?e.X=x.Clipper.TopX(i,e.Y):e.X=x.Clipper.TopX(t,e.Y)}e.Y>i.Curr.Y&&(e.Y=i.Curr.Y,Math.abs(i.Dx)>Math.abs(t.Dx)?e.X=x.Clipper.TopX(t,e.Y):e.X=x.Clipper.TopX(i,e.Y))};x.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(i){for(var t=this.m_ActiveEdges;t!==null;){var e=this.IsMaxima(t,i);if(e){var n=this.GetMaximaPairEx(t);e=n===null||!x.ClipperBase.IsHorizontal(n)}if(e){this.StrictlySimple&&this.InsertMaxima(t.Top.X);var r=t.PrevInAEL;this.DoMaxima(t),r===null?t=this.m_ActiveEdges:t=r.NextInAEL}else{if(this.IsIntermediate(t,i)&&x.ClipperBase.IsHorizontal(t.NextInLML)?(t=this.UpdateEdgeIntoAEL(t),t.OutIdx>=0&&this.AddOutPt(t,t.Bot),this.AddEdgeToSEL(t)):(t.Curr.X=x.Clipper.TopX(t,i),t.Curr.Y=i),x.use_xyz&&(t.Top.Y===i?t.Curr.Z=t.Top.Z:t.Bot.Y===i?t.Curr.Z=t.Bot.Z:t.Curr.Z=0),this.StrictlySimple){var r=t.PrevInAEL;if(t.OutIdx>=0&&t.WindDelta!==0&&r!==null&&r.OutIdx>=0&&r.Curr.X===t.Curr.X&&r.WindDelta!==0){var o=new x.FPoint1(t.Curr);x.use_xyz&&this.SetZ(o,r,t);var s=this.AddOutPt(r,o),l=this.AddOutPt(t,o);this.AddJoin(s,l,o)}}t=t.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,t=this.m_ActiveEdges;t!==null;){if(this.IsIntermediate(t,i)){var s=null;t.OutIdx>=0&&(s=this.AddOutPt(t,t.Top)),t=this.UpdateEdgeIntoAEL(t);var r=t.PrevInAEL,h=t.NextInAEL;if(r!==null&&r.Curr.X===t.Bot.X&&r.Curr.Y===t.Bot.Y&&s!==null&&r.OutIdx>=0&&r.Curr.Y===r.Top.Y&&x.ClipperBase.SlopesEqual5(t.Curr,t.Top,r.Curr,r.Top)&&t.WindDelta!==0&&r.WindDelta!==0){var l=this.AddOutPt(ePrev2,t.Bot);this.AddJoin(s,l,t.Top)}else if(h!==null&&h.Curr.X===t.Bot.X&&h.Curr.Y===t.Bot.Y&&s!==null&&h.OutIdx>=0&&h.Curr.Y===h.Top.Y&&x.ClipperBase.SlopesEqual5(t.Curr,t.Top,h.Curr,h.Top)&&t.WindDelta!==0&&h.WindDelta!==0){var l=this.AddOutPt(h,t.Bot);this.AddJoin(s,l,t.Top)}}t=t.NextInAEL}};x.Clipper.prototype.DoMaxima=function(i){var t=this.GetMaximaPairEx(i);if(t===null){i.OutIdx>=0&&this.AddOutPt(i,i.Top),this.DeleteFromAEL(i);return}for(var e=i.NextInAEL;e!==null&&e!==t;)this.IntersectEdges(i,e,i.Top),this.SwapPositionsInAEL(i,e),e=i.NextInAEL;i.OutIdx===-1&&t.OutIdx===-1?(this.DeleteFromAEL(i),this.DeleteFromAEL(t)):i.OutIdx>=0&&t.OutIdx>=0?(i.OutIdx>=0&&this.AddLocalMaxPoly(i,t,i.Top),this.DeleteFromAEL(i),this.DeleteFromAEL(t)):x.use_lines&&i.WindDelta===0?(i.OutIdx>=0&&(this.AddOutPt(i,i.Top),i.OutIdx=x.ClipperBase.Unassigned),this.DeleteFromAEL(i),t.OutIdx>=0&&(this.AddOutPt(t,i.Top),t.OutIdx=x.ClipperBase.Unassigned),this.DeleteFromAEL(t)):x.Error("DoMaxima error")};x.Clipper.ReversePaths=function(i){for(var t=0,e=i.length;t<e;t++)i[t].reverse()};x.Clipper.Orientation=function(i){return x.Clipper.Area(i)>=0};x.Clipper.prototype.PointCount=function(i){if(i===null)return 0;var t=0,e=i;do t++,e=e.Next;while(e!==i);return t};x.Clipper.prototype.BuildResult=function(i){x.Clear(i);for(var t=0,e=this.m_PolyOuts.length;t<e;t++){var n=this.m_PolyOuts[t];if(n.Pts!==null){var r=n.Pts.Prev,o=this.PointCount(r);if(!(o<2)){for(var s=new Array(o),l=0;l<o;l++)s[l]=r.Pt,r=r.Prev;i.push(s)}}}};x.Clipper.prototype.BuildResult2=function(i){i.Clear();for(var t=0,e=this.m_PolyOuts.length;t<e;t++){var n=this.m_PolyOuts[t],r=this.PointCount(n.Pts);if(!(n.IsOpen&&r<2||!n.IsOpen&&r<3)){this.FixHoleLinkage(n);var o=new x.PolyNode;i.m_AllPolys.push(o),n.PolyNode=o,o.m_polygon.length=r;for(var s=n.Pts.Prev,l=0;l<r;l++)o.m_polygon[l]=s.Pt,s=s.Prev}}for(var t=0,e=this.m_PolyOuts.length;t<e;t++){var n=this.m_PolyOuts[t];n.PolyNode!==null&&(n.IsOpen?(n.PolyNode.IsOpen=!0,i.AddChild(n.PolyNode)):n.FirstLeft!==null&&n.FirstLeft.PolyNode!==null?n.FirstLeft.PolyNode.AddChild(n.PolyNode):i.AddChild(n.PolyNode))}};x.Clipper.prototype.FixupOutPolyline=function(i){for(var t=i.Pts,e=t.Prev;t!==e;)if(t=t.Next,x.FPoint.op_Equality(t.Pt,t.Prev.Pt)){t===e&&(e=t.Prev);var n=t.Prev;n.Next=t.Next,t.Next.Prev=n,t=n}t===t.Prev&&(i.Pts=null)};x.Clipper.prototype.FixupOutPolygon=function(i){var t=null;i.BottomPt=null;for(var e=i.Pts,n=this.PreserveCollinear||this.StrictlySimple;;){if(e.Prev===e||e.Prev===e.Next){i.Pts=null;return}if(x.FPoint.op_Equality(e.Pt,e.Next.Pt)||x.FPoint.op_Equality(e.Pt,e.Prev.Pt)||x.ClipperBase.SlopesEqual4(e.Prev.Pt,e.Pt,e.Next.Pt)&&(!n||!this.Pt2IsBetweenPt1AndPt3(e.Prev.Pt,e.Pt,e.Next.Pt)))t=null,e.Prev.Next=e.Next,e.Next.Prev=e.Prev,e=e.Prev;else{if(e===t)break;t===null&&(t=e),e=e.Next}}i.Pts=e};x.Clipper.prototype.DupOutPt=function(i,t){var e=new x.OutPt;return e.Pt.X=i.Pt.X,e.Pt.Y=i.Pt.Y,x.use_xyz&&(e.Pt.Z=i.Pt.Z),e.Idx=i.Idx,t?(e.Next=i.Next,e.Prev=i,i.Next.Prev=e,i.Next=e):(e.Prev=i.Prev,e.Next=i,i.Prev.Next=e,i.Prev=e),e};x.Clipper.prototype.GetOverlap=function(i,t,e,n,r){return i<t?e<n?(r.Left=Math.max(i,e),r.Right=Math.min(t,n)):(r.Left=Math.max(i,n),r.Right=Math.min(t,e)):e<n?(r.Left=Math.max(t,e),r.Right=Math.min(i,n)):(r.Left=Math.max(t,n),r.Right=Math.min(i,e)),r.Left<r.Right};x.Clipper.prototype.JoinHorz=function(i,t,e,n,r,o){var s=i.Pt.X>t.Pt.X?x.Direction.dRightToLeft:x.Direction.dLeftToRight,l=e.Pt.X>n.Pt.X?x.Direction.dRightToLeft:x.Direction.dLeftToRight;if(s===l)return!1;if(s===x.Direction.dLeftToRight){for(;i.Next.Pt.X<=r.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y===r.Y;)i=i.Next;o&&i.Pt.X!==r.X&&(i=i.Next),t=this.DupOutPt(i,!o),x.FPoint.op_Inequality(t.Pt,r)&&(i=t,i.Pt.X=r.X,i.Pt.Y=r.Y,x.use_xyz&&(i.Pt.Z=r.Z),t=this.DupOutPt(i,!o))}else{for(;i.Next.Pt.X>=r.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y===r.Y;)i=i.Next;!o&&i.Pt.X!==r.X&&(i=i.Next),t=this.DupOutPt(i,o),x.FPoint.op_Inequality(t.Pt,r)&&(i=t,i.Pt.X=r.X,i.Pt.Y=r.Y,x.use_xyz&&(i.Pt.Z=r.Z),t=this.DupOutPt(i,o))}if(l===x.Direction.dLeftToRight){for(;e.Next.Pt.X<=r.X&&e.Next.Pt.X>=e.Pt.X&&e.Next.Pt.Y===r.Y;)e=e.Next;o&&e.Pt.X!==r.X&&(e=e.Next),n=this.DupOutPt(e,!o),x.FPoint.op_Inequality(n.Pt,r)&&(e=n,e.Pt.X=r.X,e.Pt.Y=r.Y,x.use_xyz&&(e.Pt.Z=r.Z),n=this.DupOutPt(e,!o))}else{for(;e.Next.Pt.X>=r.X&&e.Next.Pt.X<=e.Pt.X&&e.Next.Pt.Y===r.Y;)e=e.Next;!o&&e.Pt.X!==r.X&&(e=e.Next),n=this.DupOutPt(e,o),x.FPoint.op_Inequality(n.Pt,r)&&(e=n,e.Pt.X=r.X,e.Pt.Y=r.Y,x.use_xyz&&(e.Pt.Z=r.Z),n=this.DupOutPt(e,o))}return s===x.Direction.dLeftToRight===o?(i.Prev=e,e.Next=i,t.Next=n,n.Prev=t):(i.Next=e,e.Prev=i,t.Prev=n,n.Next=t),!0};x.Clipper.prototype.JoinPoints=function(i,t,e){var n=i.OutPt1,r=new x.OutPt,o=i.OutPt2,s=new x.OutPt,l=i.OutPt1.Pt.Y===i.OffPt.Y;if(l&&x.FPoint.op_Equality(i.OffPt,i.OutPt1.Pt)&&x.FPoint.op_Equality(i.OffPt,i.OutPt2.Pt)){if(t!==e)return!1;for(r=i.OutPt1.Next;r!==n&&x.FPoint.op_Equality(r.Pt,i.OffPt);)r=r.Next;var h=r.Pt.Y>i.OffPt.Y;for(s=i.OutPt2.Next;s!==o&&x.FPoint.op_Equality(s.Pt,i.OffPt);)s=s.Next;var c=s.Pt.Y>i.OffPt.Y;return h===c?!1:h?(r=this.DupOutPt(n,!1),s=this.DupOutPt(o,!0),n.Prev=o,o.Next=n,r.Next=s,s.Prev=r,i.OutPt1=n,i.OutPt2=r,!0):(r=this.DupOutPt(n,!0),s=this.DupOutPt(o,!1),n.Next=o,o.Prev=n,r.Prev=s,s.Next=r,i.OutPt1=n,i.OutPt2=r,!0)}else if(l){for(r=n;n.Prev.Pt.Y===n.Pt.Y&&n.Prev!==r&&n.Prev!==o;)n=n.Prev;for(;r.Next.Pt.Y===r.Pt.Y&&r.Next!==n&&r.Next!==o;)r=r.Next;if(r.Next===n||r.Next===o)return!1;for(s=o;o.Prev.Pt.Y===o.Pt.Y&&o.Prev!==s&&o.Prev!==r;)o=o.Prev;for(;s.Next.Pt.Y===s.Pt.Y&&s.Next!==o&&s.Next!==n;)s=s.Next;if(s.Next===o||s.Next===n)return!1;var p={Left:null,Right:null};if(!this.GetOverlap(n.Pt.X,r.Pt.X,o.Pt.X,s.Pt.X,p))return!1;var d=p.Left,m=p.Right,v=new x.FPoint0,C;return n.Pt.X>=d&&n.Pt.X<=m?(v.X=n.Pt.X,v.Y=n.Pt.Y,x.use_xyz&&(v.Z=n.Pt.Z),C=n.Pt.X>r.Pt.X):o.Pt.X>=d&&o.Pt.X<=m?(v.X=o.Pt.X,v.Y=o.Pt.Y,x.use_xyz&&(v.Z=o.Pt.Z),C=o.Pt.X>s.Pt.X):r.Pt.X>=d&&r.Pt.X<=m?(v.X=r.Pt.X,v.Y=r.Pt.Y,x.use_xyz&&(v.Z=r.Pt.Z),C=r.Pt.X>n.Pt.X):(v.X=s.Pt.X,v.Y=s.Pt.Y,x.use_xyz&&(v.Z=s.Pt.Z),C=s.Pt.X>o.Pt.X),i.OutPt1=n,i.OutPt2=o,this.JoinHorz(n,r,o,s,v,C)}else{for(r=n.Next;x.FPoint.op_Equality(r.Pt,n.Pt)&&r!==n;)r=r.Next;var O=r.Pt.Y>n.Pt.Y||!x.ClipperBase.SlopesEqual4(n.Pt,r.Pt,i.OffPt);if(O){for(r=n.Prev;x.FPoint.op_Equality(r.Pt,n.Pt)&&r!==n;)r=r.Prev;if(r.Pt.Y>n.Pt.Y||!x.ClipperBase.SlopesEqual4(n.Pt,r.Pt,i.OffPt))return!1}for(s=o.Next;x.FPoint.op_Equality(s.Pt,o.Pt)&&s!==o;)s=s.Next;var y=s.Pt.Y>o.Pt.Y||!x.ClipperBase.SlopesEqual4(o.Pt,s.Pt,i.OffPt);if(y){for(s=o.Prev;x.FPoint.op_Equality(s.Pt,o.Pt)&&s!==o;)s=s.Prev;if(s.Pt.Y>o.Pt.Y||!x.ClipperBase.SlopesEqual4(o.Pt,s.Pt,i.OffPt))return!1}return r===n||s===o||r===s||t===e&&O===y?!1:O?(r=this.DupOutPt(n,!1),s=this.DupOutPt(o,!0),n.Prev=o,o.Next=n,r.Next=s,s.Prev=r,i.OutPt1=n,i.OutPt2=r,!0):(r=this.DupOutPt(n,!0),s=this.DupOutPt(o,!1),n.Next=o,o.Prev=n,r.Prev=s,s.Next=r,i.OutPt1=n,i.OutPt2=r,!0)}};x.Clipper.GetBounds=function(i){for(var t=0,e=i.length;t<e&&i[t].length===0;)t++;if(t===e)return new x.FRect(0,0,0,0);var n=new x.FRect;for(n.left=i[t][0].X,n.right=n.left,n.top=i[t][0].Y,n.bottom=n.top;t<e;t++)for(var r=0,o=i[t].length;r<o;r++)i[t][r].X<n.left?n.left=i[t][r].X:i[t][r].X>n.right&&(n.right=i[t][r].X),i[t][r].Y<n.top?n.top=i[t][r].Y:i[t][r].Y>n.bottom&&(n.bottom=i[t][r].Y);return n};x.Clipper.prototype.GetBounds2=function(i){var t=i,e=new x.FRect;for(e.left=i.Pt.X,e.right=i.Pt.X,e.top=i.Pt.Y,e.bottom=i.Pt.Y,i=i.Next;i!==t;)i.Pt.X<e.left&&(e.left=i.Pt.X),i.Pt.X>e.right&&(e.right=i.Pt.X),i.Pt.Y<e.top&&(e.top=i.Pt.Y),i.Pt.Y>e.bottom&&(e.bottom=i.Pt.Y),i=i.Next;return e};x.Clipper.PointInPolygon=function(i,t){var e=0,n=t.length;if(n<3)return 0;for(var r=t[0],o=1;o<=n;++o){var s=o===n?t[0]:t[o];if(s.Y===i.Y&&(s.X===i.X||r.Y===i.Y&&s.X>i.X==r.X<i.X))return-1;if(r.Y<i.Y!=s.Y<i.Y){if(r.X>=i.X)if(s.X>i.X)e=1-e;else{var l=(r.X-i.X)*(s.Y-i.Y)-(s.X-i.X)*(r.Y-i.Y);if(l===0)return-1;l>0==s.Y>r.Y&&(e=1-e)}else if(s.X>i.X){var l=(r.X-i.X)*(s.Y-i.Y)-(s.X-i.X)*(r.Y-i.Y);if(l===0)return-1;l>0==s.Y>r.Y&&(e=1-e)}}r=s}return e};x.Clipper.prototype.PointInPolygon=function(i,t){var e=0,n=t,r=i.X,o=i.Y,s=t.Pt.X,l=t.Pt.Y;do{t=t.Next;var h=t.Pt.X,c=t.Pt.Y;if(c===o&&(h===r||l===o&&h>r==s<r))return-1;if(l<o!=c<o){if(s>=r)if(h>r)e=1-e;else{var p=(s-r)*(c-o)-(h-r)*(l-o);if(p===0)return-1;p>0==c>l&&(e=1-e)}else if(h>r){var p=(s-r)*(c-o)-(h-r)*(l-o);if(p===0)return-1;p>0==c>l&&(e=1-e)}}s=h,l=c}while(n!==t);return e};x.Clipper.prototype.Poly2ContainsPoly1=function(i,t){var e=i;do{var n=this.PointInPolygon(e.Pt,t);if(n>=0)return n>0;e=e.Next}while(e!==i);return!0};x.Clipper.prototype.FixupFirstLefts1=function(i,t){for(var e,n,r=0,o=this.m_PolyOuts.length;r<o;r++)e=this.m_PolyOuts[r],n=x.Clipper.ParseFirstLeft(e.FirstLeft),e.Pts!==null&&n===i&&this.Poly2ContainsPoly1(e.Pts,t.Pts)&&(e.FirstLeft=t)};x.Clipper.prototype.FixupFirstLefts2=function(i,t){for(var e=t.FirstLeft,n,r,o=0,s=this.m_PolyOuts.length;o<s;o++)n=this.m_PolyOuts[o],!(n.Pts===null||n===t||n===i)&&(r=x.Clipper.ParseFirstLeft(n.FirstLeft),!(r!==e&&r!==i&&r!==t)&&(this.Poly2ContainsPoly1(n.Pts,i.Pts)?n.FirstLeft=i:this.Poly2ContainsPoly1(n.Pts,t.Pts)?n.FirstLeft=t:(n.FirstLeft===i||n.FirstLeft===t)&&(n.FirstLeft=e)))};x.Clipper.prototype.FixupFirstLefts3=function(i,t){for(var e,n,r=0,o=this.m_PolyOuts.length;r<o;r++)e=this.m_PolyOuts[r],n=x.Clipper.ParseFirstLeft(e.FirstLeft),e.Pts!==null&&n===i&&(e.FirstLeft=t)};x.Clipper.ParseFirstLeft=function(i){for(;i!==null&&i.Pts===null;)i=i.FirstLeft;return i};x.Clipper.prototype.JoinCommonEdges=function(){for(var i=0,t=this.m_Joins.length;i<t;i++){var e=this.m_Joins[i],n=this.GetOutRec(e.OutPt1.Idx),r=this.GetOutRec(e.OutPt2.Idx);if(!(n.Pts===null||r.Pts===null)&&!(n.IsOpen||r.IsOpen)){var o;n===r?o=n:this.OutRec1RightOfOutRec2(n,r)?o=r:this.OutRec1RightOfOutRec2(r,n)?o=n:o=this.GetLowermostRec(n,r),this.JoinPoints(e,n,r)&&(n===r?(n.Pts=e.OutPt1,n.BottomPt=null,r=this.CreateOutRec(),r.Pts=e.OutPt2,this.UpdateOutPtIdxs(r),this.Poly2ContainsPoly1(r.Pts,n.Pts)?(r.IsHole=!n.IsHole,r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,n),(r.IsHole^this.ReverseSolution)==this.Area$1(r)>0&&this.ReversePolyPtLinks(r.Pts)):this.Poly2ContainsPoly1(n.Pts,r.Pts)?(r.IsHole=n.IsHole,n.IsHole=!r.IsHole,r.FirstLeft=n.FirstLeft,n.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,r),(n.IsHole^this.ReverseSolution)==this.Area$1(n)>0&&this.ReversePolyPtLinks(n.Pts)):(r.IsHole=n.IsHole,r.FirstLeft=n.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(n,r))):(r.Pts=null,r.BottomPt=null,r.Idx=n.Idx,n.IsHole=o.IsHole,o===r&&(n.FirstLeft=r.FirstLeft),r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts3(r,n)))}}};x.Clipper.prototype.UpdateOutPtIdxs=function(i){var t=i.Pts;do t.Idx=i.Idx,t=t.Prev;while(t!==i.Pts)};x.Clipper.prototype.DoSimplePolygons=function(){for(var i=0;i<this.m_PolyOuts.length;){var t=this.m_PolyOuts[i++],e=t.Pts;if(!(e===null||t.IsOpen))do{for(var n=e.Next;n!==t.Pts;){if(x.FPoint.op_Equality(e.Pt,n.Pt)&&n.Next!==e&&n.Prev!==e){var r=e.Prev,o=n.Prev;e.Prev=o,o.Next=e,n.Prev=r,r.Next=n,t.Pts=e;var s=this.CreateOutRec();s.Pts=n,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,t.Pts)?(s.IsHole=!t.IsHole,s.FirstLeft=t,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,t)):this.Poly2ContainsPoly1(t.Pts,s.Pts)?(s.IsHole=t.IsHole,t.IsHole=!s.IsHole,s.FirstLeft=t.FirstLeft,t.FirstLeft=s,this.m_UsingPolyTree&&this.FixupFirstLefts2(t,s)):(s.IsHole=t.IsHole,s.FirstLeft=t.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(t,s)),n=e}n=n.Next}e=e.Next}while(e!==t.Pts)}};x.Clipper.Area=function(i){if(!Array.isArray(i))return 0;var t=i.length;if(t<3)return 0;for(var e=0,n=0,r=t-1;n<t;++n)e+=(i[r].X+i[n].X)*(i[r].Y-i[n].Y),r=n;return-e*.5};x.Clipper.prototype.Area=function(i){var t=i;if(i===null)return 0;var e=0;do e=e+(i.Prev.Pt.X+i.Pt.X)*(i.Prev.Pt.Y-i.Pt.Y),i=i.Next;while(i!==t);return e*.5};x.Clipper.prototype.Area$1=function(i){return this.Area(i.Pts)};x.Clipper.SimplifyPolygon=function(i,t){var e=new Array,n=new x.Clipper(0);return n.StrictlySimple=!0,n.AddPath(i,x.PolyType.ptSubject,!0),n.Execute(x.ClipType.ctUnion,e,t,t),e};x.Clipper.SimplifyPolygons=function(i,t){typeof t>"u"&&(t=x.PolyFillType.pftEvenOdd);var e=new Array,n=new x.Clipper(0);return n.StrictlySimple=!0,n.AddPaths(i,x.PolyType.ptSubject,!0),n.Execute(x.ClipType.ctUnion,e,t,t),e};x.Clipper.DistanceSqrd=function(i,t){var e=i.X-t.X,n=i.Y-t.Y;return e*e+n*n};x.Clipper.DistanceFromLineSqrd=function(i,t,e){var n=t.Y-e.Y,r=e.X-t.X,o=n*t.X+r*t.Y;return o=n*i.X+r*i.Y-o,o*o/(n*n+r*r)};x.Clipper.SlopesNearCollinear=function(i,t,e,n){return Math.abs(i.X-t.X)>Math.abs(i.Y-t.Y)?i.X>t.X==i.X<e.X?x.Clipper.DistanceFromLineSqrd(i,t,e)<n:t.X>i.X==t.X<e.X?x.Clipper.DistanceFromLineSqrd(t,i,e)<n:x.Clipper.DistanceFromLineSqrd(e,i,t)<n:i.Y>t.Y==i.Y<e.Y?x.Clipper.DistanceFromLineSqrd(i,t,e)<n:t.Y>i.Y==t.Y<e.Y?x.Clipper.DistanceFromLineSqrd(t,i,e)<n:x.Clipper.DistanceFromLineSqrd(e,i,t)<n};x.Clipper.PointsAreClose=function(i,t,e){var n=i.X-t.X,r=i.Y-t.Y;return n*n+r*r<=e};x.Clipper.ExcludeOp=function(i){var t=i.Prev;return t.Next=i.Next,i.Next.Prev=t,t.Idx=0,t};x.Clipper.CleanPolygon=function(i,t){typeof t>"u"&&(t=1.415);var e=i.length;if(e===0)return new Array;for(var n=new Array(e),r=0;r<e;++r)n[r]=new x.OutPt;for(var r=0;r<e;++r)n[r].Pt=i[r],n[r].Next=n[(r+1)%e],n[r].Next.Prev=n[r],n[r].Idx=0;for(var o=t*t,s=n[0];s.Idx===0&&s.Next!==s.Prev;)x.Clipper.PointsAreClose(s.Pt,s.Prev.Pt,o)?(s=x.Clipper.ExcludeOp(s),e--):x.Clipper.PointsAreClose(s.Prev.Pt,s.Next.Pt,o)?(x.Clipper.ExcludeOp(s.Next),s=x.Clipper.ExcludeOp(s),e-=2):x.Clipper.SlopesNearCollinear(s.Prev.Pt,s.Pt,s.Next.Pt,o)?(s=x.Clipper.ExcludeOp(s),e--):(s.Idx=1,s=s.Next);e<3&&(e=0);for(var l=new Array(e),r=0;r<e;++r)l[r]=new x.FPoint1(s.Pt),s=s.Next;return n=null,l};x.Clipper.CleanPolygons=function(i,t){for(var e=new Array(i.length),n=0,r=i.length;n<r;n++)e[n]=x.Clipper.CleanPolygon(i[n],t);return e};x.Clipper.Minkowski=function(i,t,e,n){var r=n?1:0,o=i.length,s=t.length,l=new Array;if(e)for(var h=0;h<s;h++){for(var c=new Array(o),p=0,d=i.length,m=i[p];p<d;p++,m=i[p])c[p]=new x.FPoint2(t[h].X+m.X,t[h].Y+m.Y);l.push(c)}else for(var h=0;h<s;h++){for(var c=new Array(o),p=0,d=i.length,m=i[p];p<d;p++,m=i[p])c[p]=new x.FPoint2(t[h].X-m.X,t[h].Y-m.Y);l.push(c)}for(var v=new Array,h=0;h<s-1+r;h++)for(var p=0;p<o;p++){var C=new Array;C.push(l[h%s][p%o]),C.push(l[(h+1)%s][p%o]),C.push(l[(h+1)%s][(p+1)%o]),C.push(l[h%s][(p+1)%o]),x.Clipper.Orientation(C)||C.reverse(),v.push(C)}return v};x.Clipper.MinkowskiSum=function(i,t,e){if(t[0]instanceof Array){for(var r=t,s=new x.Paths,o=new x.Clipper,l=0;l<r.length;++l){var h=x.Clipper.Minkowski(i,r[l],!0,e);if(o.AddPaths(h,x.PolyType.ptSubject,!0),e){var n=x.Clipper.TranslatePath(r[l],i[0]);o.AddPath(n,x.PolyType.ptClip,!0)}}return o.Execute(x.ClipType.ctUnion,s,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),s}else{var n=t,r=x.Clipper.Minkowski(i,n,!0,e),o=new x.Clipper;return o.AddPaths(r,x.PolyType.ptSubject,!0),o.Execute(x.ClipType.ctUnion,r,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),r}};x.Clipper.TranslatePath=function(i,t){for(var e=new x.Path,n=0;n<i.length;n++)e.push(new x.FPoint2(i[n].X+t.X,i[n].Y+t.Y));return e};x.Clipper.MinkowskiDiff=function(i,t){var e=x.Clipper.Minkowski(i,t,!1,!0),n=new x.Clipper;return n.AddPaths(e,x.PolyType.ptSubject,!0),n.Execute(x.ClipType.ctUnion,e,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),e};x.Clipper.PolyTreeToPaths=function(i){var t=new Array;return x.Clipper.AddPolyNodeToPaths(i,x.Clipper.NodeType.ntAny,t),t};x.Clipper.AddPolyNodeToPaths=function(i,t,e){var n=!0;switch(t){case x.Clipper.NodeType.ntOpen:return;case x.Clipper.NodeType.ntClosed:n=!i.IsOpen;break}i.m_polygon.length>0&&n&&e.push(i.m_polygon);for(var r=0,o=i.Childs(),s=o.length,l=o[r];r<s;r++,l=o[r])x.Clipper.AddPolyNodeToPaths(l,t,e)};x.Clipper.OpenPathsFromPolyTree=function(i){for(var t=new x.Paths,e=0,n=i.ChildCount();e<n;e++)i.Childs()[e].IsOpen&&t.push(i.Childs()[e].m_polygon);return t};x.Clipper.ClosedPathsFromPolyTree=function(i){var t=new x.Paths;return x.Clipper.AddPolyNodeToPaths(i,x.Clipper.NodeType.ntClosed,t),t};Hp(x.Clipper,x.ClipperBase);x.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2};x.ClipperOffset=function(i,t){typeof i>"u"&&(i=2),typeof t>"u"&&(t=x.ClipperOffset.def_arc_tolerance),this.m_destPolys=new x.Paths,this.m_srcPoly=new x.Path,this.m_destPoly=new x.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new x.FPoint0,this.m_polyNodes=new x.PolyNode,this.MiterLimit=i,this.ArcTolerance=t,this.m_lowest.X=-1};x.ClipperOffset.two_pi=6.28318530717959;x.ClipperOffset.def_arc_tolerance=.25;x.ClipperOffset.prototype.Clear=function(){x.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1};x.ClipperOffset.prototype.AddPath=function(i,t,e){var n=i.length-1;if(!(n<0)){var r=new x.PolyNode;if(r.m_jointype=t,r.m_endtype=e,e===x.EndType.etClosedLine||e===x.EndType.etClosedPolygon)for(;n>0&&x.FPoint.op_Equality(i[0],i[n]);)n--;r.m_polygon.push(i[0]);for(var o=0,s=0,l=1;l<=n;l++)x.FPoint.op_Inequality(r.m_polygon[o],i[l])&&(o++,r.m_polygon.push(i[l]),(i[l].Y>r.m_polygon[s].Y||i[l].Y===r.m_polygon[s].Y&&i[l].X<r.m_polygon[s].X)&&(s=o));if(!(e===x.EndType.etClosedPolygon&&o<2)&&(this.m_polyNodes.AddChild(r),e===x.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new x.FPoint2(this.m_polyNodes.ChildCount()-1,s);else{var h=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(r.m_polygon[s].Y>h.Y||r.m_polygon[s].Y===h.Y&&r.m_polygon[s].X<h.X)&&(this.m_lowest=new x.FPoint2(this.m_polyNodes.ChildCount()-1,s))}}};x.ClipperOffset.prototype.AddPaths=function(i,t,e){for(var n=0,r=i.length;n<r;n++)this.AddPath(i[n],t,e)};x.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!x.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var i=0;i<this.m_polyNodes.ChildCount();i++){var t=this.m_polyNodes.Childs()[i];(t.m_endtype===x.EndType.etClosedPolygon||t.m_endtype===x.EndType.etClosedLine&&x.Clipper.Orientation(t.m_polygon))&&t.m_polygon.reverse()}else for(var i=0;i<this.m_polyNodes.ChildCount();i++){var t=this.m_polyNodes.Childs()[i];t.m_endtype===x.EndType.etClosedLine&&!x.Clipper.Orientation(t.m_polygon)&&t.m_polygon.reverse()}};x.ClipperOffset.GetUnitNormal=function(i,t){var e=t.X-i.X,n=t.Y-i.Y;if(e===0&&n===0)return new x.FPoint2(0,0);var r=1/Math.sqrt(e*e+n*n);return e*=r,n*=r,new x.FPoint2(n,-e)};x.ClipperOffset.prototype.DoOffset=function(i){if(this.m_destPolys=new Array,this.m_delta=i,x.ClipperBase.near_zero(i)){for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];e.m_endtype===x.EndType.etClosedPolygon&&this.m_destPolys.push(e.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var n;this.ArcTolerance<=0?n=x.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(i)*x.ClipperOffset.def_arc_tolerance?n=Math.abs(i)*x.ClipperOffset.def_arc_tolerance:n=this.ArcTolerance;var r=3.14159265358979/Math.acos(1-n/Math.abs(i));this.m_sin=Math.sin(x.ClipperOffset.two_pi/r),this.m_cos=Math.cos(x.ClipperOffset.two_pi/r),this.m_StepsPerRad=r/x.ClipperOffset.two_pi,i<0&&(this.m_sin=-this.m_sin);for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];this.m_srcPoly=e.m_polygon;var o=this.m_srcPoly.length;if(!(o===0||i<=0&&(o<3||e.m_endtype!==x.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,o===1){if(e.m_jointype===x.JoinType.jtRound)for(var s=1,l=0,h=1;h<=r;h++){this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[0].X+s*i,this.m_srcPoly[0].Y+l*i));var c=s;s=s*this.m_cos-this.m_sin*l,l=c*this.m_sin+l*this.m_cos}else for(var s=-1,l=-1,h=0;h<4;++h)this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[0].X+s*i,this.m_srcPoly[0].Y+l*i)),s<0?s=1:l<0?l=1:s=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var h=0;h<o-1;h++)this.m_normals.push(x.ClipperOffset.GetUnitNormal(this.m_srcPoly[h],this.m_srcPoly[h+1]));if(e.m_endtype===x.EndType.etClosedLine||e.m_endtype===x.EndType.etClosedPolygon?this.m_normals.push(x.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new x.FPoint1(this.m_normals[o-2])),e.m_endtype===x.EndType.etClosedPolygon){for(var p=o-1,h=0;h<o;h++)p=this.OffsetPoint(h,p,e.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(e.m_endtype===x.EndType.etClosedLine){for(var p=o-1,h=0;h<o;h++)p=this.OffsetPoint(h,p,e.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var d=this.m_normals[o-1],h=o-1;h>0;h--)this.m_normals[h]=new x.FPoint2(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);this.m_normals[0]=new x.FPoint2(-d.X,-d.Y),p=0;for(var h=o-1;h>=0;h--)p=this.OffsetPoint(h,p,e.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var p=0,h=1;h<o-1;++h)p=this.OffsetPoint(h,p,e.m_jointype);var m;if(e.m_endtype===x.EndType.etOpenButt){var h=o-1;m=new x.FPoint2(this.m_srcPoly[h].X+this.m_normals[h].X*i,this.m_srcPoly[h].Y+this.m_normals[h].Y*i),this.m_destPoly.push(m),m=new x.FPoint2(this.m_srcPoly[h].X-this.m_normals[h].X*i,this.m_srcPoly[h].Y-this.m_normals[h].Y*i),this.m_destPoly.push(m)}else{var h=o-1;p=o-2,this.m_sinA=0,this.m_normals[h]=new x.FPoint2(-this.m_normals[h].X,-this.m_normals[h].Y),e.m_endtype===x.EndType.etOpenSquare?this.DoSquare(h,p):this.DoRound(h,p)}for(var h=o-1;h>0;h--)this.m_normals[h]=new x.FPoint2(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);this.m_normals[0]=new x.FPoint2(-this.m_normals[1].X,-this.m_normals[1].Y),p=o-1;for(var h=p-1;h>0;--h)p=this.OffsetPoint(h,p,e.m_jointype);e.m_endtype===x.EndType.etOpenButt?(m=new x.FPoint2(this.m_srcPoly[0].X-this.m_normals[0].X*i,this.m_srcPoly[0].Y-this.m_normals[0].Y*i),this.m_destPoly.push(m),m=new x.FPoint2(this.m_srcPoly[0].X+this.m_normals[0].X*i,this.m_srcPoly[0].Y+this.m_normals[0].Y*i),this.m_destPoly.push(m)):(p=1,this.m_sinA=0,e.m_endtype===x.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}};x.ClipperOffset.prototype.Execute=function(){var i=arguments,t=i[0]instanceof x.PolyTree;if(t){var e=i[0],n=i[1];e.Clear(),this.FixOrientations(),this.DoOffset(n);var r=new x.Clipper(0);if(r.AddPaths(this.m_destPolys,x.PolyType.ptSubject,!0),n>0)r.Execute(x.ClipType.ctUnion,e,x.PolyFillType.pftPositive,x.PolyFillType.pftPositive);else{var o=x.Clipper.GetBounds(this.m_destPolys),s=new x.Path;if(s.push(new x.FPoint2(o.left-10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.top-10)),s.push(new x.FPoint2(o.left-10,o.top-10)),r.AddPath(s,x.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(x.ClipType.ctUnion,e,x.PolyFillType.pftNegative,x.PolyFillType.pftNegative),e.ChildCount()===1&&e.Childs()[0].ChildCount()>0){var l=e.Childs()[0];e.Childs()[0]=l.Childs()[0],e.Childs()[0].m_Parent=e;for(var h=1;h<l.ChildCount();h++)e.AddChild(l.Childs()[h])}else e.Clear()}}else{var e=i[0],n=i[1];x.Clear(e),this.FixOrientations(),this.DoOffset(n);var r=new x.Clipper(0);if(r.AddPaths(this.m_destPolys,x.PolyType.ptSubject,!0),n>0)r.Execute(x.ClipType.ctUnion,e,x.PolyFillType.pftPositive,x.PolyFillType.pftPositive);else{var o=x.Clipper.GetBounds(this.m_destPolys),s=new x.Path;s.push(new x.FPoint2(o.left-10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.top-10)),s.push(new x.FPoint2(o.left-10,o.top-10)),r.AddPath(s,x.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(x.ClipType.ctUnion,e,x.PolyFillType.pftNegative,x.PolyFillType.pftNegative),e.length>0&&e.splice(0,1)}}};x.ClipperOffset.prototype.OffsetPoint=function(i,t,e){if(this.m_sinA=this.m_normals[t].X*this.m_normals[i].Y-this.m_normals[i].X*this.m_normals[t].Y,this.m_sinA===0)return t;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[i].X+this.m_normals[t].X*this.m_delta,this.m_srcPoly[i].Y+this.m_normals[t].Y*this.m_delta)),this.m_destPoly.push(new x.FPoint1(this.m_srcPoly[i])),this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[i].X+this.m_normals[i].X*this.m_delta,this.m_srcPoly[i].Y+this.m_normals[i].Y*this.m_delta));else switch(e){case x.JoinType.jtMiter:{var n=1+(this.m_normals[i].X*this.m_normals[t].X+this.m_normals[i].Y*this.m_normals[t].Y);n>=this.m_miterLim?this.DoMiter(i,t,n):this.DoSquare(i,t);break}case x.JoinType.jtSquare:this.DoSquare(i,t);break;case x.JoinType.jtRound:this.DoRound(i,t);break}return t=i,t};x.ClipperOffset.prototype.DoSquare=function(i,t){var e=Math.tan(Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[i].X+this.m_normals[t].Y*this.m_normals[i].Y)/4);this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[i].X+this.m_delta*(this.m_normals[t].X-this.m_normals[t].Y*e),this.m_srcPoly[i].Y+this.m_delta*(this.m_normals[t].Y+this.m_normals[t].X*e))),this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[i].X+this.m_delta*(this.m_normals[i].X+this.m_normals[i].Y*e),this.m_srcPoly[i].Y+this.m_delta*(this.m_normals[i].Y-this.m_normals[i].X*e)))};x.ClipperOffset.prototype.DoMiter=function(i,t,e){var n=this.m_delta/e;this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[i].X+(this.m_normals[t].X+this.m_normals[i].X)*n,this.m_srcPoly[i].Y+(this.m_normals[t].Y+this.m_normals[i].Y)*n))};x.ClipperOffset.prototype.DoRound=function(i,t){for(var e=Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[i].X+this.m_normals[t].Y*this.m_normals[i].Y),n=Math.max(Math.round(this.m_StepsPerRad*Math.abs(e)),1),r=this.m_normals[t].X,o=this.m_normals[t].Y,s,l=0;l<n;++l)this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[i].X+r*this.m_delta,this.m_srcPoly[i].Y+o*this.m_delta)),s=r,r=r*this.m_cos-this.m_sin*o,o=s*this.m_sin+o*this.m_cos;this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[i].X+this.m_normals[i].X*this.m_delta,this.m_srcPoly[i].Y+this.m_normals[i].Y*this.m_delta))};x.Error=function(i){try{throw new Error(i)}catch(t){alert(t.message)}};x.JS={};x.JS.AreaOfPolygon=function(i){return x.Clipper.Area(i)};x.JS.AreaOfPolygons=function(i){for(var t=0,e=0;e<i.length;e++)t+=x.Clipper.Area(i[e]);return t};x.JS.BoundsOfPath=function(i){return x.JS.BoundsOfPaths([i])};x.JS.BoundsOfPaths=function(i){var t=x.Clipper.GetBounds(i);return t};x.JS.Clean=function(n,t){if(!(n instanceof Array))return[];var e=n[0]instanceof Array,n=x.JS.Clone(n);if(typeof t!="number"||t===null)return x.Error("Delta is not a number in Clean()."),n;if(n.length===0||n.length===1&&n[0].length===0||t<0)return n;e||(n=[n]);for(var r=n.length,o,s,l,h,c,p,d,m=[],v=0;v<r;v++)if(s=n[v],o=s.length,o!==0){if(o<3){l=s,m.push(l);continue}for(l=s,h=t*t,c=s[0],p=1,d=1;d<o;d++)(s[d].X-c.X)*(s[d].X-c.X)+(s[d].Y-c.Y)*(s[d].Y-c.Y)<=h||(l[p]=s[d],c=s[d],p++);c=s[p-1],(s[0].X-c.X)*(s[0].X-c.X)+(s[0].Y-c.Y)*(s[0].Y-c.Y)<=h&&p--,p<o&&l.splice(p,o-p),l.length&&m.push(l)}return!e&&m.length?m=m[0]:!e&&m.length===0?m=[]:e&&m.length===0&&(m=[[]]),m};x.JS.Clone=function(i){if(!(i instanceof Array))return[];if(i.length===0)return[];if(i.length===1&&i[0].length===0)return[[]];var t=i[0]instanceof Array;t||(i=[i]);var e=i.length,n,r,o,s,l=new Array(e);for(r=0;r<e;r++){for(n=i[r].length,s=new Array(n),o=0;o<n;o++)s[o]={X:i[r][o].X,Y:i[r][o].Y};l[r]=s}return t||(l=l[0]),l};x.JS.Lighten=function(i,t){if(!(i instanceof Array))return[];if(typeof t!="number"||t===null)return x.Error("Tolerance is not a number in Lighten()."),x.JS.Clone(i);if(i.length===0||i.length===1&&i[0].length===0||t<0)return x.JS.Clone(i);var e=i[0]instanceof Array;e||(i=[i]);var n,r,o,s,l,h,c,p,d,m,v,C,O,y,P,w,D,A=i.length,_=t*t,I=[];for(n=0;n<A;n++)if(o=i[n],h=o.length,h!==0){for(s=0;s<1e6;s++){for(l=[],h=o.length,o[h-1].X!==o[0].X||o[h-1].Y!==o[0].Y?(C=1,o.push({X:o[0].X,Y:o[0].Y}),h=o.length):C=0,v=[],r=0;r<h-2;r++)c=o[r],d=o[r+1],p=o[r+2],w=c.X,D=c.Y,O=p.X-w,y=p.Y-D,(O!==0||y!==0)&&(P=((d.X-w)*O+(d.Y-D)*y)/(O*O+y*y),P>1?(w=p.X,D=p.Y):P>0&&(w+=O*P,D+=y*P)),O=d.X-w,y=d.Y-D,m=O*O+y*y,m<=_&&(v[r+1]=1,r++);for(l.push({X:o[0].X,Y:o[0].Y}),r=1;r<h-1;r++)v[r]||l.push({X:o[r].X,Y:o[r].Y});if(l.push({X:o[h-1].X,Y:o[h-1].Y}),C&&o.pop(),v.length)o=l;else break}h=l.length,l[h-1].X===l[0].X&&l[h-1].Y===l[0].Y&&l.pop(),l.length>2&&I.push(l)}return e||(I=I[0]),typeof I>"u"&&(I=[]),I};x.JS.PerimeterOfPath=function(i,t){if(typeof i>"u")return 0;var e=Math.sqrt,n=0,r,o,s=0,l=0,h=0,c=0,p=i.length;if(p<2)return 0;for(t&&(i[p]=i[0],p++);--p;)r=i[p],s=r.X,l=r.Y,o=i[p-1],h=o.X,c=o.Y,n+=e((s-h)*(s-h)+(l-c)*(l-c));return t&&i.pop(),n};x.JS.PerimeterOfPaths=function(i,t){for(var e=0,n=0;n<i.length;n++)e+=x.JS.PerimeterOfPath(i[n],t);return e};x.ExPolygons=function(){return[]};x.ExPolygon=function(){this.outer=null,this.holes=null};x.JS.AddOuterPolyNodeToExPolygons=function(i,t){var e=new x.ExPolygon;e.outer=i.Contour();var n=i.Childs(),r=n.length;e.holes=new Array(r);var o,s,l,h,c,p;for(l=0;l<r;l++)for(o=n[l],e.holes[l]=o.Contour(),h=0,c=o.Childs(),p=c.length;h<p;h++)s=c[h],x.JS.AddOuterPolyNodeToExPolygons(s,t);t.push(e)};x.JS.ExPolygonsToPaths=function(i){var t,e,n,r,o=new x.Paths;for(t=0,n=i.length;t<n;t++)for(o.push(i[t].outer),e=0,r=i[t].holes.length;e<r;e++)o.push(i[t].holes[e]);return o};x.JS.PolyTreeToExPolygons=function(i){var t=new x.ExPolygons,e,n,r,o;for(n=0,r=i.Childs(),o=r.length;n<o;n++)e=r[n],x.JS.AddOuterPolyNodeToExPolygons(e,t);return t};const Y1=(i,t)=>1e-8>Math.abs(i.x-t.x)+Math.abs(i.y-t.y),W1=i=>{if(i.length===0)return!0;const t=i[0][0],e=i.at(-1).at(-1);return Y1(t,e)};function Ws(i,t,e={}){const n={openSquare:0,openRound:1,openButt:2,closedLine:3,closedPolygon:4},r={square:0,round:1,miter:2};let o=e.endType;o in n||(o="closedPolygon");let s=e.joinType;s in r||(s="round");const l=e.miterLimit||2,h=e.arcTolerance||.1,c=n[o],p=r[s],d=P=>P.map(({x:w,y:D})=>({X:w,Y:D})),m=P=>P.map(({X:w,Y:D})=>({x:w,y:D}));W1(i);const v=i.map(d),C=new x.ClipperOffset(l,h);C.AddPaths(v,p,c);const O=new x.Paths;C.Execute(O,t);const y=O.map(m);for(;i.length>y.length;)i.pop();return y.forEach((P,w)=>{i[w]=P,i[w].push({x:P[0].x,y:P[0].y})}),i}const Z1="modulepreload",j1=function(i){return"/"+i},wu={},q1=function(t,e,n){return!e||e.length===0?t():Promise.all(e.map(r=>{if(r=j1(r),r in wu)return;wu[r]=!0;const o=r.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":Z1,o||(l.as="script",l.crossOrigin=""),l.href=r,document.head.appendChild(l),o)return new Promise((h,c)=>{l.addEventListener("load",h),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};let sr,Xl;(()=>{const i=new Map;sr={register(l,h,c){i.set(l,{d:h,f:c,exp:{}})}};async function t(l,h){let c=l.replace(/\.\w+$/i,"");if(c.includes("./")){const[p,...d]=c.split("/").reverse(),[,...m]=h.split("/").reverse(),v=[p];let C=0,O;for(;O=d.shift();)if(O==="..")C++;else{if(O===".")break;v.push(O)}C<m.length&&v.push(...m.slice(C)),c=v.reverse().join("/")}return i.has(c)?o(c):q1(()=>import(l),[])}function e(l,h){return{id:l,import:c=>t(c,l),meta:{url:l,main:h}}}function n(l){return(h,c)=>{c=typeof h=="string"?{[h]:c}:h;for(const[p,d]of Object.entries(c))Object.defineProperty(l,p,{value:d,writable:!0,enumerable:!0})}}function r(l){for(const[h,c]of i.entries()){const{f:p,exp:d}=c,{execute:m,setters:v}=p(n(d),e(h,h===l));delete c.f,c.e=m,c.s=v}}async function o(l){if(!i.has(l))return;const h=i.get(l);if(h.s){const{d:c,e:p,s:d}=h;delete h.s,delete h.e;for(let v=0;v<d.length;v++)d[v](await o(c[v]));const m=p();m&&await m}return h.exp}function s(l){if(!i.has(l))return;const h=i.get(l);if(h.s){const{d:c,e:p,s:d}=h;delete h.s,delete h.e;for(let m=0;m<d.length;m++)d[m](s(c[m]));p()}return h.exp}Xl=l=>(sr=Xl=void 0,r(l),s(l))})();sr.register("-/clipper-lib@v6.4.2-JisZmmhC7gDAFmHQLYDu/dist=es2020/clipper-lib",[],function(i,t){var e;t&&t.id;function n(o,s,l){return l={path:s,exports:{},require:function(h,c){return r(h,c==null?l.path:c)}},o(l,l.exports),l.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}return{setters:[],execute:function(){e=n(function(o){(function(){var s={};s.version="6.4.2.2",s.use_lines=!0,s.use_xyz=!1;var l=!1;o.exports?(o.exports=s,l=!0):typeof document<"u"?window.ClipperLib=s:self.ClipperLib=s;var h;if(l){var c="chrome";h="Netscape"}else{var c=navigator.userAgent.toString().toLowerCase();h=navigator.appName}var p={};c.indexOf("chrome")!=-1&&c.indexOf("chromium")==-1?p.chrome=1:p.chrome=0,c.indexOf("chromium")!=-1?p.chromium=1:p.chromium=0,c.indexOf("safari")!=-1&&c.indexOf("chrome")==-1&&c.indexOf("chromium")==-1?p.safari=1:p.safari=0,c.indexOf("firefox")!=-1?p.firefox=1:p.firefox=0,c.indexOf("firefox/17")!=-1?p.firefox17=1:p.firefox17=0,c.indexOf("firefox/15")!=-1?p.firefox15=1:p.firefox15=0,c.indexOf("firefox/3")!=-1?p.firefox3=1:p.firefox3=0,c.indexOf("opera")!=-1?p.opera=1:p.opera=0,c.indexOf("msie 10")!=-1?p.msie10=1:p.msie10=0,c.indexOf("msie 9")!=-1?p.msie9=1:p.msie9=0,c.indexOf("msie 8")!=-1?p.msie8=1:p.msie8=0,c.indexOf("msie 7")!=-1?p.msie7=1:p.msie7=0,c.indexOf("msie ")!=-1?p.msie=1:p.msie=0,s.biginteger_used=null;var d;function m(a,u,f){s.biginteger_used=1,a!=null&&(typeof a=="number"&&typeof u>"u"?this.fromInt(a):typeof a=="number"?this.fromNumber(a,u,f):u==null&&typeof a!="string"?this.fromString(a,256):this.fromString(a,u))}function v(){return new m(null,void 0,void 0)}function C(a,u,f,g,S,b){for(;--b>=0;){var T=u*this[a++]+f[g]+S;S=Math.floor(T/67108864),f[g++]=T&67108863}return S}function O(a,u,f,g,S,b){for(var T=u&32767,E=u>>15;--b>=0;){var k=this[a]&32767,L=this[a++]>>15,W=E*k+L*T;k=T*k+((W&32767)<<15)+f[g]+(S&1073741823),S=(k>>>30)+(W>>>15)+E*L+(S>>>30),f[g++]=k&1073741823}return S}function y(a,u,f,g,S,b){for(var T=u&16383,E=u>>14;--b>=0;){var k=this[a]&16383,L=this[a++]>>14,W=E*k+L*T;k=T*k+((W&16383)<<14)+f[g]+S,S=(k>>28)+(W>>14)+E*L,f[g++]=k&268435455}return S}h=="Microsoft Internet Explorer"?(m.prototype.am=O,d=30):h!="Netscape"?(m.prototype.am=C,d=26):(m.prototype.am=y,d=28),m.prototype.DB=d,m.prototype.DM=(1<<d)-1,m.prototype.DV=1<<d;var P=52;m.prototype.FV=Math.pow(2,P),m.prototype.F1=P-d,m.prototype.F2=2*d-P;var w="0123456789abcdefghijklmnopqrstuvwxyz",D=new Array,A,_;for(A="0".charCodeAt(0),_=0;_<=9;++_)D[A++]=_;for(A="a".charCodeAt(0),_=10;_<36;++_)D[A++]=_;for(A="A".charCodeAt(0),_=10;_<36;++_)D[A++]=_;function I(a){return w.charAt(a)}function Q(a,u){var f=D[a.charCodeAt(u)];return f==null?-1:f}function U(a){for(var u=this.t-1;u>=0;--u)a[u]=this[u];a.t=this.t,a.s=this.s}function j(a){this.t=1,this.s=a<0?-1:0,a>0?this[0]=a:a<-1?this[0]=a+this.DV:this.t=0}function z(a){var u=v();return u.fromInt(a),u}function N(a,u){var f;if(u==16)f=4;else if(u==8)f=3;else if(u==256)f=8;else if(u==2)f=1;else if(u==32)f=5;else if(u==4)f=2;else{this.fromRadix(a,u);return}this.t=0,this.s=0;for(var g=a.length,S=!1,b=0;--g>=0;){var T=f==8?a[g]&255:Q(a,g);if(T<0){a.charAt(g)=="-"&&(S=!0);continue}S=!1,b==0?this[this.t++]=T:b+f>this.DB?(this[this.t-1]|=(T&(1<<this.DB-b)-1)<<b,this[this.t++]=T>>this.DB-b):this[this.t-1]|=T<<b,b+=f,b>=this.DB&&(b-=this.DB)}f==8&&(a[0]&128)!=0&&(this.s=-1,b>0&&(this[this.t-1]|=(1<<this.DB-b)-1<<b)),this.clamp(),S&&m.ZERO.subTo(this,this)}function R(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t}function B(a){if(this.s<0)return"-"+this.negate().toString(a);var u;if(a==16)u=4;else if(a==8)u=3;else if(a==2)u=1;else if(a==32)u=5;else if(a==4)u=2;else return this.toRadix(a);var f=(1<<u)-1,g,S=!1,b="",T=this.t,E=this.DB-T*this.DB%u;if(T-- >0)for(E<this.DB&&(g=this[T]>>E)>0&&(S=!0,b=I(g));T>=0;)E<u?(g=(this[T]&(1<<E)-1)<<u-E,g|=this[--T]>>(E+=this.DB-u)):(g=this[T]>>(E-=u)&f,E<=0&&(E+=this.DB,--T)),g>0&&(S=!0),S&&(b+=I(g));return S?b:"0"}function Z(){var a=v();return m.ZERO.subTo(this,a),a}function G(){return this.s<0?this.negate():this}function nt(a){var u=this.s-a.s;if(u!=0)return u;var f=this.t;if(u=f-a.t,u!=0)return this.s<0?-u:u;for(;--f>=0;)if((u=this[f]-a[f])!=0)return u;return 0}function ht(a){var u=1,f;return(f=a>>>16)!=0&&(a=f,u+=16),(f=a>>8)!=0&&(a=f,u+=8),(f=a>>4)!=0&&(a=f,u+=4),(f=a>>2)!=0&&(a=f,u+=2),(f=a>>1)!=0&&(a=f,u+=1),u}function ot(){return this.t<=0?0:this.DB*(this.t-1)+ht(this[this.t-1]^this.s&this.DM)}function pt(a,u){var f;for(f=this.t-1;f>=0;--f)u[f+a]=this[f];for(f=a-1;f>=0;--f)u[f]=0;u.t=this.t+a,u.s=this.s}function Ot(a,u){for(var f=a;f<this.t;++f)u[f-a]=this[f];u.t=Math.max(this.t-a,0),u.s=this.s}function yt(a,u){var f=a%this.DB,g=this.DB-f,S=(1<<g)-1,b=Math.floor(a/this.DB),T=this.s<<f&this.DM,E;for(E=this.t-1;E>=0;--E)u[E+b+1]=this[E]>>g|T,T=(this[E]&S)<<f;for(E=b-1;E>=0;--E)u[E]=0;u[b]=T,u.t=this.t+b+1,u.s=this.s,u.clamp()}function Dt(a,u){u.s=this.s;var f=Math.floor(a/this.DB);if(f>=this.t){u.t=0;return}var g=a%this.DB,S=this.DB-g,b=(1<<g)-1;u[0]=this[f]>>g;for(var T=f+1;T<this.t;++T)u[T-f-1]|=(this[T]&b)<<S,u[T-f]=this[T]>>g;g>0&&(u[this.t-f-1]|=(this.s&b)<<S),u.t=this.t-f,u.clamp()}function Ct(a,u){for(var f=0,g=0,S=Math.min(a.t,this.t);f<S;)g+=this[f]-a[f],u[f++]=g&this.DM,g>>=this.DB;if(a.t<this.t){for(g-=a.s;f<this.t;)g+=this[f],u[f++]=g&this.DM,g>>=this.DB;g+=this.s}else{for(g+=this.s;f<a.t;)g-=a[f],u[f++]=g&this.DM,g>>=this.DB;g-=a.s}u.s=g<0?-1:0,g<-1?u[f++]=this.DV+g:g>0&&(u[f++]=g),u.t=f,u.clamp()}function Mt(a,u){var f=this.abs(),g=a.abs(),S=f.t;for(u.t=S+g.t;--S>=0;)u[S]=0;for(S=0;S<g.t;++S)u[S+f.t]=f.am(0,g[S],u,S,0,f.t);u.s=0,u.clamp(),this.s!=a.s&&m.ZERO.subTo(u,u)}function _t(a){for(var u=this.abs(),f=a.t=2*u.t;--f>=0;)a[f]=0;for(f=0;f<u.t-1;++f){var g=u.am(f,u[f],a,2*f,0,1);(a[f+u.t]+=u.am(f+1,2*u[f],a,2*f+1,g,u.t-f-1))>=u.DV&&(a[f+u.t]-=u.DV,a[f+u.t+1]=1)}a.t>0&&(a[a.t-1]+=u.am(f,u[f],a,2*f,0,1)),a.s=0,a.clamp()}function le(a,u,f){var g=a.abs();if(!(g.t<=0)){var S=this.abs();if(S.t<g.t){u!=null&&u.fromInt(0),f!=null&&this.copyTo(f);return}f==null&&(f=v());var b=v(),T=this.s,E=a.s,k=this.DB-ht(g[g.t-1]);k>0?(g.lShiftTo(k,b),S.lShiftTo(k,f)):(g.copyTo(b),S.copyTo(f));var L=b.t,W=b[L-1];if(W!=0){var M=W*(1<<this.F1)+(L>1?b[L-2]>>this.F2:0),V=this.FV/M,it=(1<<this.F1)/M,at=1<<this.F2,ut=f.t,xt=ut-L,he=u==null?v():u;for(b.dlShiftTo(xt,he),f.compareTo(he)>=0&&(f[f.t++]=1,f.subTo(he,f)),m.ONE.dlShiftTo(L,he),he.subTo(b,b);b.t<L;)b[b.t++]=0;for(;--xt>=0;){var Be=f[--ut]==W?this.DM:Math.floor(f[ut]*V+(f[ut-1]+at)*it);if((f[ut]+=b.am(0,Be,f,xt,0,L))<Be)for(b.dlShiftTo(xt,he),f.subTo(he,f);f[ut]<--Be;)f.subTo(he,f)}u!=null&&(f.drShiftTo(L,u),T!=E&&m.ZERO.subTo(u,u)),f.t=L,f.clamp(),k>0&&f.rShiftTo(k,f),T<0&&m.ZERO.subTo(f,f)}}}function $e(a){var u=v();return this.abs().divRemTo(a,null,u),this.s<0&&u.compareTo(m.ZERO)>0&&a.subTo(u,u),u}function Rt(a){this.m=a}function Yt(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a}function ke(a){return a}function Wt(a){a.divRemTo(this.m,null,a)}function Pe(a,u,f){a.multiplyTo(u,f),this.reduce(f)}function de(a,u){a.squareTo(u),this.reduce(u)}Rt.prototype.convert=Yt,Rt.prototype.revert=ke,Rt.prototype.reduce=Wt,Rt.prototype.mulTo=Pe,Rt.prototype.sqrTo=de;function _e(){if(this.t<1)return 0;var a=this[0];if((a&1)==0)return 0;var u=a&3;return u=u*(2-(a&15)*u)&15,u=u*(2-(a&255)*u)&255,u=u*(2-((a&65535)*u&65535))&65535,u=u*(2-a*u%this.DV)%this.DV,u>0?this.DV-u:-u}function It(a){this.m=a,this.mp=a.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function ae(a){var u=v();return a.abs().dlShiftTo(this.m.t,u),u.divRemTo(this.m,null,u),a.s<0&&u.compareTo(m.ZERO)>0&&this.m.subTo(u,u),u}function Ce(a){var u=v();return a.copyTo(u),this.reduce(u),u}function Se(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var u=0;u<this.m.t;++u){var f=a[u]&32767,g=f*this.mpl+((f*this.mph+(a[u]>>15)*this.mpl&this.um)<<15)&a.DM;for(f=u+this.m.t,a[f]+=this.m.am(0,g,a,u,0,this.m.t);a[f]>=a.DV;)a[f]-=a.DV,a[++f]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)}function On(a,u){a.squareTo(u),this.reduce(u)}function gn(a,u,f){a.multiplyTo(u,f),this.reduce(f)}It.prototype.convert=ae,It.prototype.revert=Ce,It.prototype.reduce=Se,It.prototype.mulTo=gn,It.prototype.sqrTo=On;function Pi(){return(this.t>0?this[0]&1:this.s)==0}function yn(a,u){if(a>4294967295||a<1)return m.ONE;var f=v(),g=v(),S=u.convert(this),b=ht(a)-1;for(S.copyTo(f);--b>=0;)if(u.sqrTo(f,g),(a&1<<b)>0)u.mulTo(g,S,f);else{var T=f;f=g,g=T}return u.revert(f)}function qs(a,u){var f;return a<256||u.isEven()?f=new Rt(u):f=new It(u),this.exp(a,f)}m.prototype.copyTo=U,m.prototype.fromInt=j,m.prototype.fromString=N,m.prototype.clamp=R,m.prototype.dlShiftTo=pt,m.prototype.drShiftTo=Ot,m.prototype.lShiftTo=yt,m.prototype.rShiftTo=Dt,m.prototype.subTo=Ct,m.prototype.multiplyTo=Mt,m.prototype.squareTo=_t,m.prototype.divRemTo=le,m.prototype.invDigit=_e,m.prototype.isEven=Pi,m.prototype.exp=yn,m.prototype.toString=B,m.prototype.negate=Z,m.prototype.abs=G,m.prototype.compareTo=nt,m.prototype.bitLength=ot,m.prototype.mod=$e,m.prototype.modPowInt=qs,m.ZERO=z(0),m.ONE=z(1);function zs(){var a=v();return this.copyTo(a),a}function Us(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Gs(){return this.t==0?this.s:this[0]<<24>>24}function Vs(){return this.t==0?this.s:this[0]<<16>>16}function Hs(a){return Math.floor(Math.LN2*this.DB/Math.log(a))}function Js(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Ks(a){if(a==null&&(a=10),this.signum()==0||a<2||a>36)return"0";var u=this.chunkSize(a),f=Math.pow(a,u),g=z(f),S=v(),b=v(),T="";for(this.divRemTo(g,S,b);S.signum()>0;)T=(f+b.intValue()).toString(a).substr(1)+T,S.divRemTo(g,S,b);return b.intValue().toString(a)+T}function to(a,u){this.fromInt(0),u==null&&(u=10);for(var f=this.chunkSize(u),g=Math.pow(u,f),S=!1,b=0,T=0,E=0;E<a.length;++E){var k=Q(a,E);if(k<0){a.charAt(E)=="-"&&this.signum()==0&&(S=!0);continue}T=u*T+k,++b>=f&&(this.dMultiply(g),this.dAddOffset(T,0),b=0,T=0)}b>0&&(this.dMultiply(Math.pow(u,b)),this.dAddOffset(T,0)),S&&m.ZERO.subTo(this,this)}function eo(a,u,f){if(typeof u=="number")if(a<2)this.fromInt(1);else for(this.fromNumber(a,f),this.testBit(a-1)||this.bitwiseTo(m.ONE.shiftLeft(a-1),xn,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(u);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(m.ONE.shiftLeft(a-1),this);else{var g=new Array,S=a&7;g.length=(a>>3)+1,u.nextBytes(g),S>0?g[0]&=(1<<S)-1:g[0]=0,this.fromString(g,256)}}function io(){var a=this.t,u=new Array;u[0]=this.s;var f=this.DB-a*this.DB%8,g,S=0;if(a-- >0)for(f<this.DB&&(g=this[a]>>f)!=(this.s&this.DM)>>f&&(u[S++]=g|this.s<<this.DB-f);a>=0;)f<8?(g=(this[a]&(1<<f)-1)<<8-f,g|=this[--a]>>(f+=this.DB-8)):(g=this[a]>>(f-=8)&255,f<=0&&(f+=this.DB,--a)),(g&128)!=0&&(g|=-256),S==0&&(this.s&128)!=(g&128)&&++S,(S>0||g!=this.s)&&(u[S++]=g);return u}function no(a){return this.compareTo(a)==0}function ro(a){return this.compareTo(a)<0?this:a}function so(a){return this.compareTo(a)>0?this:a}function oo(a,u,f){var g,S,b=Math.min(a.t,this.t);for(g=0;g<b;++g)f[g]=u(this[g],a[g]);if(a.t<this.t){for(S=a.s&this.DM,g=b;g<this.t;++g)f[g]=u(this[g],S);f.t=this.t}else{for(S=this.s&this.DM,g=b;g<a.t;++g)f[g]=u(S,a[g]);f.t=a.t}f.s=u(this.s,a.s),f.clamp()}function lo(a,u){return a&u}function ao(a){var u=v();return this.bitwiseTo(a,lo,u),u}function xn(a,u){return a|u}function ho(a){var u=v();return this.bitwiseTo(a,xn,u),u}function X(a,u){return a^u}function F(a){var u=v();return this.bitwiseTo(a,X,u),u}function q(a,u){return a&~u}function rt(a){var u=v();return this.bitwiseTo(a,q,u),u}function ie(){for(var a=v(),u=0;u<this.t;++u)a[u]=this.DM&~this[u];return a.t=this.t,a.s=~this.s,a}function vn(a){var u=v();return a<0?this.rShiftTo(-a,u):this.lShiftTo(a,u),u}function uo(a){var u=v();return a<0?this.lShiftTo(-a,u):this.rShiftTo(a,u),u}function dd(a){if(a==0)return-1;var u=0;return(a&65535)==0&&(a>>=16,u+=16),(a&255)==0&&(a>>=8,u+=8),(a&15)==0&&(a>>=4,u+=4),(a&3)==0&&(a>>=2,u+=2),(a&1)==0&&++u,u}function md(){for(var a=0;a<this.t;++a)if(this[a]!=0)return a*this.DB+dd(this[a]);return this.s<0?this.t*this.DB:-1}function Od(a){for(var u=0;a!=0;)a&=a-1,++u;return u}function gd(){for(var a=0,u=this.s&this.DM,f=0;f<this.t;++f)a+=Od(this[f]^u);return a}function yd(a){var u=Math.floor(a/this.DB);return u>=this.t?this.s!=0:(this[u]&1<<a%this.DB)!=0}function xd(a,u){var f=m.ONE.shiftLeft(a);return this.bitwiseTo(f,u,f),f}function vd(a){return this.changeBit(a,xn)}function Pd(a){return this.changeBit(a,q)}function Cd(a){return this.changeBit(a,X)}function Sd(a,u){for(var f=0,g=0,S=Math.min(a.t,this.t);f<S;)g+=this[f]+a[f],u[f++]=g&this.DM,g>>=this.DB;if(a.t<this.t){for(g+=a.s;f<this.t;)g+=this[f],u[f++]=g&this.DM,g>>=this.DB;g+=this.s}else{for(g+=this.s;f<a.t;)g+=a[f],u[f++]=g&this.DM,g>>=this.DB;g+=a.s}u.s=g<0?-1:0,g>0?u[f++]=g:g<-1&&(u[f++]=this.DV+g),u.t=f,u.clamp()}function wd(a){var u=v();return this.addTo(a,u),u}function bd(a){var u=v();return this.subTo(a,u),u}function Dd(a){var u=v();return this.multiplyTo(a,u),u}function Td(){var a=v();return this.squareTo(a),a}function Ad(a){var u=v();return this.divRemTo(a,u,null),u}function Ed(a){var u=v();return this.divRemTo(a,null,u),u}function kd(a){var u=v(),f=v();return this.divRemTo(a,u,f),new Array(u,f)}function _d(a){this[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()}function Id(a,u){if(a!=0){for(;this.t<=u;)this[this.t++]=0;for(this[u]+=a;this[u]>=this.DV;)this[u]-=this.DV,++u>=this.t&&(this[this.t++]=0),++this[u]}}function Pn(){}function va(a){return a}function Ld(a,u,f){a.multiplyTo(u,f)}function Qd(a,u){a.squareTo(u)}Pn.prototype.convert=va,Pn.prototype.revert=va,Pn.prototype.mulTo=Ld,Pn.prototype.sqrTo=Qd;function Xd(a){return this.exp(a,new Pn)}function Fd(a,u,f){var g=Math.min(this.t+a.t,u);for(f.s=0,f.t=g;g>0;)f[--g]=0;var S;for(S=f.t-this.t;g<S;++g)f[g+this.t]=this.am(0,a[g],f,g,0,this.t);for(S=Math.min(a.t,u);g<S;++g)this.am(0,a[g],f,g,0,u-g);f.clamp()}function $d(a,u,f){--u;var g=f.t=this.t+a.t-u;for(f.s=0;--g>=0;)f[g]=0;for(g=Math.max(u-this.t,0);g<a.t;++g)f[this.t+g-u]=this.am(u-g,a[g],f,0,0,this.t+g-u);f.clamp(),f.drShiftTo(1,f)}function Mi(a){this.r2=v(),this.q3=v(),m.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}function Bd(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var u=v();return a.copyTo(u),this.reduce(u),u}function Nd(a){return a}function Md(a){for(a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);a.compareTo(this.r2)<0;)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)}function Rd(a,u){a.squareTo(u),this.reduce(u)}function Yd(a,u,f){a.multiplyTo(u,f),this.reduce(f)}Mi.prototype.convert=Bd,Mi.prototype.revert=Nd,Mi.prototype.reduce=Md,Mi.prototype.mulTo=Yd,Mi.prototype.sqrTo=Rd;function Wd(a,u){var f=a.bitLength(),g,S=z(1),b;if(f<=0)return S;f<18?g=1:f<48?g=3:f<144?g=4:f<768?g=5:g=6,f<8?b=new Rt(u):u.isEven()?b=new Mi(u):b=new It(u);var T=new Array,E=3,k=g-1,L=(1<<g)-1;if(T[1]=b.convert(this),g>1){var W=v();for(b.sqrTo(T[1],W);E<=L;)T[E]=v(),b.mulTo(W,T[E-2],T[E]),E+=2}var M=a.t-1,V,it=!0,at=v(),ut;for(f=ht(a[M])-1;M>=0;){for(f>=k?V=a[M]>>f-k&L:(V=(a[M]&(1<<f+1)-1)<<k-f,M>0&&(V|=a[M-1]>>this.DB+f-k)),E=g;(V&1)==0;)V>>=1,--E;if((f-=E)<0&&(f+=this.DB,--M),it)T[V].copyTo(S),it=!1;else{for(;E>1;)b.sqrTo(S,at),b.sqrTo(at,S),E-=2;E>0?b.sqrTo(S,at):(ut=S,S=at,at=ut),b.mulTo(at,T[V],S)}for(;M>=0&&(a[M]&1<<f)==0;)b.sqrTo(S,at),ut=S,S=at,at=ut,--f<0&&(f=this.DB-1,--M)}return b.revert(S)}function Zd(a){var u=this.s<0?this.negate():this.clone(),f=a.s<0?a.negate():a.clone();if(u.compareTo(f)<0){var g=u;u=f,f=g}var S=u.getLowestSetBit(),b=f.getLowestSetBit();if(b<0)return u;for(S<b&&(b=S),b>0&&(u.rShiftTo(b,u),f.rShiftTo(b,f));u.signum()>0;)(S=u.getLowestSetBit())>0&&u.rShiftTo(S,u),(S=f.getLowestSetBit())>0&&f.rShiftTo(S,f),u.compareTo(f)>=0?(u.subTo(f,u),u.rShiftTo(1,u)):(f.subTo(u,f),f.rShiftTo(1,f));return b>0&&f.lShiftTo(b,f),f}function jd(a){if(a<=0)return 0;var u=this.DV%a,f=this.s<0?a-1:0;if(this.t>0)if(u==0)f=this[0]%a;else for(var g=this.t-1;g>=0;--g)f=(u*f+this[g])%a;return f}function qd(a){var u=a.isEven();if(this.isEven()&&u||a.signum()==0)return m.ZERO;for(var f=a.clone(),g=this.clone(),S=z(1),b=z(0),T=z(0),E=z(1);f.signum()!=0;){for(;f.isEven();)f.rShiftTo(1,f),u?((!S.isEven()||!b.isEven())&&(S.addTo(this,S),b.subTo(a,b)),S.rShiftTo(1,S)):b.isEven()||b.subTo(a,b),b.rShiftTo(1,b);for(;g.isEven();)g.rShiftTo(1,g),u?((!T.isEven()||!E.isEven())&&(T.addTo(this,T),E.subTo(a,E)),T.rShiftTo(1,T)):E.isEven()||E.subTo(a,E),E.rShiftTo(1,E);f.compareTo(g)>=0?(f.subTo(g,f),u&&S.subTo(T,S),b.subTo(E,b)):(g.subTo(f,g),u&&T.subTo(S,T),E.subTo(b,E))}if(g.compareTo(m.ONE)!=0)return m.ZERO;if(E.compareTo(a)>=0)return E.subtract(a);if(E.signum()<0)E.addTo(a,E);else return E;return E.signum()<0?E.add(a):E}var ne=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],zd=(1<<26)/ne[ne.length-1];function Ud(a){var u,f=this.abs();if(f.t==1&&f[0]<=ne[ne.length-1]){for(u=0;u<ne.length;++u)if(f[0]==ne[u])return!0;return!1}if(f.isEven())return!1;for(u=1;u<ne.length;){for(var g=ne[u],S=u+1;S<ne.length&&g<zd;)g*=ne[S++];for(g=f.modInt(g);u<S;)if(g%ne[u++]==0)return!1}return f.millerRabin(a)}function Gd(a){var u=this.subtract(m.ONE),f=u.getLowestSetBit();if(f<=0)return!1;var g=u.shiftRight(f);a=a+1>>1,a>ne.length&&(a=ne.length);for(var S=v(),b=0;b<a;++b){S.fromInt(ne[Math.floor(Math.random()*ne.length)]);var T=S.modPow(g,this);if(T.compareTo(m.ONE)!=0&&T.compareTo(u)!=0){for(var E=1;E++<f&&T.compareTo(u)!=0;)if(T=T.modPowInt(2,this),T.compareTo(m.ONE)==0)return!1;if(T.compareTo(u)!=0)return!1}}return!0}m.prototype.chunkSize=Hs,m.prototype.toRadix=Ks,m.prototype.fromRadix=to,m.prototype.fromNumber=eo,m.prototype.bitwiseTo=oo,m.prototype.changeBit=xd,m.prototype.addTo=Sd,m.prototype.dMultiply=_d,m.prototype.dAddOffset=Id,m.prototype.multiplyLowerTo=Fd,m.prototype.multiplyUpperTo=$d,m.prototype.modInt=jd,m.prototype.millerRabin=Gd,m.prototype.clone=zs,m.prototype.intValue=Us,m.prototype.byteValue=Gs,m.prototype.shortValue=Vs,m.prototype.signum=Js,m.prototype.toByteArray=io,m.prototype.equals=no,m.prototype.min=ro,m.prototype.max=so,m.prototype.and=ao,m.prototype.or=ho,m.prototype.xor=F,m.prototype.andNot=rt,m.prototype.not=ie,m.prototype.shiftLeft=vn,m.prototype.shiftRight=uo,m.prototype.getLowestSetBit=md,m.prototype.bitCount=gd,m.prototype.testBit=yd,m.prototype.setBit=vd,m.prototype.clearBit=Pd,m.prototype.flipBit=Cd,m.prototype.add=wd,m.prototype.subtract=bd,m.prototype.multiply=Dd,m.prototype.divide=Ad,m.prototype.remainder=Ed,m.prototype.divideAndRemainder=kd,m.prototype.modPow=Wd,m.prototype.modInverse=qd,m.prototype.pow=Xd,m.prototype.gcd=Zd,m.prototype.isProbablePrime=Ud,m.prototype.square=Td;var lt=m;lt.prototype.IsNegative=function(){return this.compareTo(lt.ZERO)==-1},lt.op_Equality=function(a,u){return a.compareTo(u)==0},lt.op_Inequality=function(a,u){return a.compareTo(u)!=0},lt.op_GreaterThan=function(a,u){return a.compareTo(u)>0},lt.op_LessThan=function(a,u){return a.compareTo(u)<0},lt.op_Addition=function(a,u){return new lt(a,void 0,void 0).add(new lt(u,void 0,void 0))},lt.op_Subtraction=function(a,u){return new lt(a,void 0,void 0).subtract(new lt(u,void 0,void 0))},lt.Int128Mul=function(a,u){return new lt(a,void 0,void 0).multiply(new lt(u,void 0,void 0))},lt.op_Division=function(a,u){return a.divide(u)},lt.prototype.ToDouble=function(){return parseFloat(this.toString())};var Pa=function(a,u){var f;if(typeof Object.getOwnPropertyNames>"u"){for(f in u.prototype)(typeof a.prototype[f]>"u"||a.prototype[f]===Object.prototype[f])&&(a.prototype[f]=u.prototype[f]);for(f in u)typeof a[f]>"u"&&(a[f]=u[f]);a.$baseCtor=u}else{for(var g=Object.getOwnPropertyNames(u.prototype),S=0;S<g.length;S++)typeof Object.getOwnPropertyDescriptor(a.prototype,g[S])>"u"&&Object.defineProperty(a.prototype,g[S],Object.getOwnPropertyDescriptor(u.prototype,g[S]));for(f in u)typeof a[f]>"u"&&(a[f]=u[f]);a.$baseCtor=u}};s.Path=function(){return[]},s.Path.prototype.push=Array.prototype.push,s.Paths=function(){return[]},s.Paths.prototype.push=Array.prototype.push,s.DoublePoint=function(){var a=arguments;this.X=0,this.Y=0,a.length===1?(this.X=a[0].X,this.Y=a[0].Y):a.length===2&&(this.X=a[0],this.Y=a[1])},s.DoublePoint0=function(){this.X=0,this.Y=0},s.DoublePoint0.prototype=s.DoublePoint.prototype,s.DoublePoint1=function(a){this.X=a.X,this.Y=a.Y},s.DoublePoint1.prototype=s.DoublePoint.prototype,s.DoublePoint2=function(a,u){this.X=a,this.Y=u},s.DoublePoint2.prototype=s.DoublePoint.prototype,s.PolyNode=function(){this.m_Parent=null,this.m_polygon=new s.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},s.PolyNode.prototype.IsHoleNode=function(){for(var a=!0,u=this.m_Parent;u!==null;)a=!a,u=u.m_Parent;return a},s.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},s.PolyNode.prototype.Contour=function(){return this.m_polygon},s.PolyNode.prototype.AddChild=function(a){var u=this.m_Childs.length;this.m_Childs.push(a),a.m_Parent=this,a.m_Index=u},s.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},s.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},s.PolyNode.prototype.Childs=function(){return this.m_Childs},s.PolyNode.prototype.Parent=function(){return this.m_Parent},s.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},s.PolyTree=function(){this.m_AllPolys=[],s.PolyNode.call(this)},s.PolyTree.prototype.Clear=function(){for(var a=0,u=this.m_AllPolys.length;a<u;a++)this.m_AllPolys[a]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},s.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},s.PolyTree.prototype.Total=function(){var a=this.m_AllPolys.length;return a>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&a--,a},Pa(s.PolyTree,s.PolyNode),s.Math_Abs_Int64=s.Math_Abs_Int32=s.Math_Abs_Double=function(a){return Math.abs(a)},s.Math_Max_Int32_Int32=function(a,u){return Math.max(a,u)},p.msie||p.opera||p.safari?s.Cast_Int32=function(a){return a|0}:s.Cast_Int32=function(a){return~~a},typeof Number.toInteger>"u"&&(Number.toInteger=null),p.chrome?s.Cast_Int64=function(a){return a<-2147483648||a>2147483647?a<0?Math.ceil(a):Math.floor(a):~~a}:p.firefox&&typeof Number.toInteger=="function"?s.Cast_Int64=function(a){return Number.toInteger(a)}:p.msie7||p.msie8?s.Cast_Int64=function(a){return parseInt(a,10)}:p.msie?s.Cast_Int64=function(a){return a<-2147483648||a>2147483647?a<0?Math.ceil(a):Math.floor(a):a|0}:s.Cast_Int64=function(a){return a<0?Math.ceil(a):Math.floor(a)},s.Clear=function(a){a.length=0},s.PI=3.141592653589793,s.PI2=2*3.141592653589793,s.IntPoint=function(){var a=arguments,u=a.length;if(this.X=0,this.Y=0,s.use_xyz)if(this.Z=0,u===3)this.X=a[0],this.Y=a[1],this.Z=a[2];else if(u===2)this.X=a[0],this.Y=a[1],this.Z=0;else if(u===1)if(a[0]instanceof s.DoublePoint){var f=a[0];this.X=s.Clipper.Round(f.X),this.Y=s.Clipper.Round(f.Y),this.Z=0}else{var g=a[0];typeof g.Z>"u"&&(g.Z=0),this.X=g.X,this.Y=g.Y,this.Z=g.Z}else this.X=0,this.Y=0,this.Z=0;else if(u===2)this.X=a[0],this.Y=a[1];else if(u===1)if(a[0]instanceof s.DoublePoint){var f=a[0];this.X=s.Clipper.Round(f.X),this.Y=s.Clipper.Round(f.Y)}else{var g=a[0];this.X=g.X,this.Y=g.Y}else this.X=0,this.Y=0},s.IntPoint.op_Equality=function(a,u){return a.X===u.X&&a.Y===u.Y},s.IntPoint.op_Inequality=function(a,u){return a.X!==u.X||a.Y!==u.Y},s.IntPoint0=function(){this.X=0,this.Y=0,s.use_xyz&&(this.Z=0)},s.IntPoint0.prototype=s.IntPoint.prototype,s.IntPoint1=function(a){this.X=a.X,this.Y=a.Y,s.use_xyz&&(typeof a.Z>"u"?this.Z=0:this.Z=a.Z)},s.IntPoint1.prototype=s.IntPoint.prototype,s.IntPoint1dp=function(a){this.X=s.Clipper.Round(a.X),this.Y=s.Clipper.Round(a.Y),s.use_xyz&&(this.Z=0)},s.IntPoint1dp.prototype=s.IntPoint.prototype,s.IntPoint2=function(a,u,f){this.X=a,this.Y=u,s.use_xyz&&(typeof f>"u"?this.Z=0:this.Z=f)},s.IntPoint2.prototype=s.IntPoint.prototype,s.IntRect=function(){var a=arguments,u=a.length;if(u===4)this.left=a[0],this.top=a[1],this.right=a[2],this.bottom=a[3];else if(u===1){var f=a[0];this.left=f.left,this.top=f.top,this.right=f.right,this.bottom=f.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0.prototype=s.IntRect.prototype,s.IntRect1=function(a){this.left=a.left,this.top=a.top,this.right=a.right,this.bottom=a.bottom},s.IntRect1.prototype=s.IntRect.prototype,s.IntRect4=function(a,u,f,g){this.left=a,this.top=u,this.right=f,this.bottom=g},s.IntRect4.prototype=s.IntRect.prototype,s.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},s.PolyType={ptSubject:0,ptClip:1},s.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},s.JoinType={jtSquare:0,jtRound:1,jtMiter:2},s.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},s.EdgeSide={esLeft:0,esRight:1},s.Direction={dRightToLeft:0,dLeftToRight:1},s.TEdge=function(){this.Bot=new s.IntPoint0,this.Curr=new s.IntPoint0,this.Top=new s.IntPoint0,this.Delta=new s.IntPoint0,this.Dx=0,this.PolyTyp=s.PolyType.ptSubject,this.Side=s.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},s.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new s.IntPoint0},s.MyIntersectNodeSort=function(){},s.MyIntersectNodeSort.Compare=function(a,u){var f=u.Pt.Y-a.Pt.Y;return f>0?1:f<0?-1:0},s.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},s.Scanbeam=function(){this.Y=0,this.Next=null},s.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},s.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},s.OutPt=function(){this.Idx=0,this.Pt=new s.IntPoint0,this.Next=null,this.Prev=null},s.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new s.IntPoint0},s.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},s.ClipperBase.horizontal=-9007199254740992,s.ClipperBase.Skip=-2,s.ClipperBase.Unassigned=-1,s.ClipperBase.tolerance=1e-20,s.ClipperBase.loRange=47453132,s.ClipperBase.hiRange=0xfffffffffffff,s.ClipperBase.near_zero=function(a){return a>-s.ClipperBase.tolerance&&a<s.ClipperBase.tolerance},s.ClipperBase.IsHorizontal=function(a){return a.Delta.Y===0},s.ClipperBase.prototype.PointIsVertex=function(a,u){var f=u;do{if(s.IntPoint.op_Equality(f.Pt,a))return!0;f=f.Next}while(f!==u);return!1},s.ClipperBase.prototype.PointOnLineSegment=function(a,u,f,g){return g?a.X===u.X&&a.Y===u.Y||a.X===f.X&&a.Y===f.Y||a.X>u.X==a.X<f.X&&a.Y>u.Y==a.Y<f.Y&&lt.op_Equality(lt.Int128Mul(a.X-u.X,f.Y-u.Y),lt.Int128Mul(f.X-u.X,a.Y-u.Y)):a.X===u.X&&a.Y===u.Y||a.X===f.X&&a.Y===f.Y||a.X>u.X==a.X<f.X&&a.Y>u.Y==a.Y<f.Y&&(a.X-u.X)*(f.Y-u.Y)===(f.X-u.X)*(a.Y-u.Y)},s.ClipperBase.prototype.PointOnPolygon=function(a,u,f){for(var g=u;;){if(this.PointOnLineSegment(a,g.Pt,g.Next.Pt,f))return!0;if(g=g.Next,g===u)break}return!1},s.ClipperBase.prototype.SlopesEqual=s.ClipperBase.SlopesEqual=function(){var a=arguments,u=a.length,f,g,S,b,T,E,k;return u===3?(f=a[0],g=a[1],k=a[2],k?lt.op_Equality(lt.Int128Mul(f.Delta.Y,g.Delta.X),lt.Int128Mul(f.Delta.X,g.Delta.Y)):s.Cast_Int64(f.Delta.Y*g.Delta.X)===s.Cast_Int64(f.Delta.X*g.Delta.Y)):u===4?(S=a[0],b=a[1],T=a[2],k=a[3],k?lt.op_Equality(lt.Int128Mul(S.Y-b.Y,b.X-T.X),lt.Int128Mul(S.X-b.X,b.Y-T.Y)):s.Cast_Int64((S.Y-b.Y)*(b.X-T.X))-s.Cast_Int64((S.X-b.X)*(b.Y-T.Y))===0):(S=a[0],b=a[1],T=a[2],E=a[3],k=a[4],k?lt.op_Equality(lt.Int128Mul(S.Y-b.Y,T.X-E.X),lt.Int128Mul(S.X-b.X,T.Y-E.Y)):s.Cast_Int64((S.Y-b.Y)*(T.X-E.X))-s.Cast_Int64((S.X-b.X)*(T.Y-E.Y))===0)},s.ClipperBase.SlopesEqual3=function(a,u,f){return f?lt.op_Equality(lt.Int128Mul(a.Delta.Y,u.Delta.X),lt.Int128Mul(a.Delta.X,u.Delta.Y)):s.Cast_Int64(a.Delta.Y*u.Delta.X)===s.Cast_Int64(a.Delta.X*u.Delta.Y)},s.ClipperBase.SlopesEqual4=function(a,u,f,g){return g?lt.op_Equality(lt.Int128Mul(a.Y-u.Y,u.X-f.X),lt.Int128Mul(a.X-u.X,u.Y-f.Y)):s.Cast_Int64((a.Y-u.Y)*(u.X-f.X))-s.Cast_Int64((a.X-u.X)*(u.Y-f.Y))===0},s.ClipperBase.SlopesEqual5=function(a,u,f,g,S){return S?lt.op_Equality(lt.Int128Mul(a.Y-u.Y,f.X-g.X),lt.Int128Mul(a.X-u.X,f.Y-g.Y)):s.Cast_Int64((a.Y-u.Y)*(f.X-g.X))-s.Cast_Int64((a.X-u.X)*(f.Y-g.Y))===0},s.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var a=0,u=this.m_edges.length;a<u;++a){for(var f=0,g=this.m_edges[a].length;f<g;++f)this.m_edges[a][f]=null;s.Clear(this.m_edges[a])}s.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},s.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var a=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=a}this.m_CurrentLM=null},s.ClipperBase.prototype.RangeTest=function(a,u){u.Value?(a.X>s.ClipperBase.hiRange||a.Y>s.ClipperBase.hiRange||-a.X>s.ClipperBase.hiRange||-a.Y>s.ClipperBase.hiRange)&&s.Error("Coordinate outside allowed range in RangeTest()."):(a.X>s.ClipperBase.loRange||a.Y>s.ClipperBase.loRange||-a.X>s.ClipperBase.loRange||-a.Y>s.ClipperBase.loRange)&&(u.Value=!0,this.RangeTest(a,u))},s.ClipperBase.prototype.InitEdge=function(a,u,f,g){a.Next=u,a.Prev=f,a.Curr.X=g.X,a.Curr.Y=g.Y,s.use_xyz&&(a.Curr.Z=g.Z),a.OutIdx=-1},s.ClipperBase.prototype.InitEdge2=function(a,u){a.Curr.Y>=a.Next.Curr.Y?(a.Bot.X=a.Curr.X,a.Bot.Y=a.Curr.Y,s.use_xyz&&(a.Bot.Z=a.Curr.Z),a.Top.X=a.Next.Curr.X,a.Top.Y=a.Next.Curr.Y,s.use_xyz&&(a.Top.Z=a.Next.Curr.Z)):(a.Top.X=a.Curr.X,a.Top.Y=a.Curr.Y,s.use_xyz&&(a.Top.Z=a.Curr.Z),a.Bot.X=a.Next.Curr.X,a.Bot.Y=a.Next.Curr.Y,s.use_xyz&&(a.Bot.Z=a.Next.Curr.Z)),this.SetDx(a),a.PolyTyp=u},s.ClipperBase.prototype.FindNextLocMin=function(a){for(var u;;){for(;s.IntPoint.op_Inequality(a.Bot,a.Prev.Bot)||s.IntPoint.op_Equality(a.Curr,a.Top);)a=a.Next;if(a.Dx!==s.ClipperBase.horizontal&&a.Prev.Dx!==s.ClipperBase.horizontal)break;for(;a.Prev.Dx===s.ClipperBase.horizontal;)a=a.Prev;for(u=a;a.Dx===s.ClipperBase.horizontal;)a=a.Next;if(a.Top.Y!==a.Prev.Bot.Y){u.Prev.Bot.X<a.Bot.X&&(a=u);break}}return a},s.ClipperBase.prototype.ProcessBound=function(a,u){var f,g=a,S;if(g.OutIdx===s.ClipperBase.Skip){if(a=g,u){for(;a.Top.Y===a.Next.Bot.Y;)a=a.Next;for(;a!==g&&a.Dx===s.ClipperBase.horizontal;)a=a.Prev}else{for(;a.Top.Y===a.Prev.Bot.Y;)a=a.Prev;for(;a!==g&&a.Dx===s.ClipperBase.horizontal;)a=a.Next}if(a===g)u?g=a.Next:g=a.Prev;else{u?a=g.Next:a=g.Prev;var b=new s.LocalMinima;b.Next=null,b.Y=a.Bot.Y,b.LeftBound=null,b.RightBound=a,a.WindDelta=0,g=this.ProcessBound(a,u),this.InsertLocalMinima(b)}return g}if(a.Dx===s.ClipperBase.horizontal&&(u?f=a.Prev:f=a.Next,f.Dx===s.ClipperBase.horizontal?f.Bot.X!==a.Bot.X&&f.Top.X!==a.Bot.X&&this.ReverseHorizontal(a):f.Bot.X!==a.Bot.X&&this.ReverseHorizontal(a)),f=a,u){for(;g.Top.Y===g.Next.Bot.Y&&g.Next.OutIdx!==s.ClipperBase.Skip;)g=g.Next;if(g.Dx===s.ClipperBase.horizontal&&g.Next.OutIdx!==s.ClipperBase.Skip){for(S=g;S.Prev.Dx===s.ClipperBase.horizontal;)S=S.Prev;S.Prev.Top.X>g.Next.Top.X&&(g=S.Prev)}for(;a!==g;)a.NextInLML=a.Next,a.Dx===s.ClipperBase.horizontal&&a!==f&&a.Bot.X!==a.Prev.Top.X&&this.ReverseHorizontal(a),a=a.Next;a.Dx===s.ClipperBase.horizontal&&a!==f&&a.Bot.X!==a.Prev.Top.X&&this.ReverseHorizontal(a),g=g.Next}else{for(;g.Top.Y===g.Prev.Bot.Y&&g.Prev.OutIdx!==s.ClipperBase.Skip;)g=g.Prev;if(g.Dx===s.ClipperBase.horizontal&&g.Prev.OutIdx!==s.ClipperBase.Skip){for(S=g;S.Next.Dx===s.ClipperBase.horizontal;)S=S.Next;(S.Next.Top.X===g.Prev.Top.X||S.Next.Top.X>g.Prev.Top.X)&&(g=S.Next)}for(;a!==g;)a.NextInLML=a.Prev,a.Dx===s.ClipperBase.horizontal&&a!==f&&a.Bot.X!==a.Next.Top.X&&this.ReverseHorizontal(a),a=a.Prev;a.Dx===s.ClipperBase.horizontal&&a!==f&&a.Bot.X!==a.Next.Top.X&&this.ReverseHorizontal(a),g=g.Prev}return g},s.ClipperBase.prototype.AddPath=function(a,u,f){s.use_lines?!f&&u===s.PolyType.ptClip&&s.Error("AddPath: Open paths must be subject."):f||s.Error("AddPath: Open paths have been disabled.");var g=a.length-1;if(f)for(;g>0&&s.IntPoint.op_Equality(a[g],a[0]);)--g;for(;g>0&&s.IntPoint.op_Equality(a[g],a[g-1]);)--g;if(f&&g<2||!f&&g<1)return!1;for(var S=new Array,b=0;b<=g;b++)S.push(new s.TEdge);var T=!0;S[1].Curr.X=a[1].X,S[1].Curr.Y=a[1].Y,s.use_xyz&&(S[1].Curr.Z=a[1].Z);var E={Value:this.m_UseFullRange};this.RangeTest(a[0],E),this.m_UseFullRange=E.Value,E.Value=this.m_UseFullRange,this.RangeTest(a[g],E),this.m_UseFullRange=E.Value,this.InitEdge(S[0],S[1],S[g],a[0]),this.InitEdge(S[g],S[0],S[g-1],a[g]);for(var b=g-1;b>=1;--b)E.Value=this.m_UseFullRange,this.RangeTest(a[b],E),this.m_UseFullRange=E.Value,this.InitEdge(S[b],S[b+1],S[b-1],a[b]);for(var k=S[0],L=k,W=k;;){if(L.Curr===L.Next.Curr&&(f||L.Next!==k)){if(L===L.Next)break;L===k&&(k=L.Next),L=this.RemoveEdge(L),W=L;continue}if(L.Prev===L.Next)break;if(f&&s.ClipperBase.SlopesEqual4(L.Prev.Curr,L.Curr,L.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(L.Prev.Curr,L.Curr,L.Next.Curr))){L===k&&(k=L.Next),L=this.RemoveEdge(L),L=L.Prev,W=L;continue}if(L=L.Next,L===W||!f&&L.Next===k)break}if(!f&&L===L.Next||f&&L.Prev===L.Next)return!1;f||(this.m_HasOpenPaths=!0,k.Prev.OutIdx=s.ClipperBase.Skip),L=k;do this.InitEdge2(L,u),L=L.Next,T&&L.Curr.Y!==k.Curr.Y&&(T=!1);while(L!==k);if(T){if(f)return!1;L.Prev.OutIdx=s.ClipperBase.Skip;var M=new s.LocalMinima;for(M.Next=null,M.Y=L.Bot.Y,M.LeftBound=null,M.RightBound=L,M.RightBound.Side=s.EdgeSide.esRight,M.RightBound.WindDelta=0;L.Bot.X!==L.Prev.Top.X&&this.ReverseHorizontal(L),L.Next.OutIdx!==s.ClipperBase.Skip;)L.NextInLML=L.Next,L=L.Next;return this.InsertLocalMinima(M),this.m_edges.push(S),!0}this.m_edges.push(S);var V,it=null;for(s.IntPoint.op_Equality(L.Prev.Bot,L.Prev.Top)&&(L=L.Next);L=this.FindNextLocMin(L),L!==it;){it===null&&(it=L);var M=new s.LocalMinima;M.Next=null,M.Y=L.Bot.Y,L.Dx<L.Prev.Dx?(M.LeftBound=L.Prev,M.RightBound=L,V=!1):(M.LeftBound=L,M.RightBound=L.Prev,V=!0),M.LeftBound.Side=s.EdgeSide.esLeft,M.RightBound.Side=s.EdgeSide.esRight,f?M.LeftBound.Next===M.RightBound?M.LeftBound.WindDelta=-1:M.LeftBound.WindDelta=1:M.LeftBound.WindDelta=0,M.RightBound.WindDelta=-M.LeftBound.WindDelta,L=this.ProcessBound(M.LeftBound,V),L.OutIdx===s.ClipperBase.Skip&&(L=this.ProcessBound(L,V));var at=this.ProcessBound(M.RightBound,!V);at.OutIdx===s.ClipperBase.Skip&&(at=this.ProcessBound(at,!V)),M.LeftBound.OutIdx===s.ClipperBase.Skip?M.LeftBound=null:M.RightBound.OutIdx===s.ClipperBase.Skip&&(M.RightBound=null),this.InsertLocalMinima(M),V||(L=at)}return!0},s.ClipperBase.prototype.AddPaths=function(a,u,f){for(var g=!1,S=0,b=a.length;S<b;++S)this.AddPath(a[S],u,f)&&(g=!0);return g},s.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(a,u,f){return s.IntPoint.op_Equality(a,f)||s.IntPoint.op_Equality(a,u)||s.IntPoint.op_Equality(f,u)?!1:a.X!==f.X?u.X>a.X==u.X<f.X:u.Y>a.Y==u.Y<f.Y},s.ClipperBase.prototype.RemoveEdge=function(a){a.Prev.Next=a.Next,a.Next.Prev=a.Prev;var u=a.Next;return a.Prev=null,u},s.ClipperBase.prototype.SetDx=function(a){a.Delta.X=a.Top.X-a.Bot.X,a.Delta.Y=a.Top.Y-a.Bot.Y,a.Delta.Y===0?a.Dx=s.ClipperBase.horizontal:a.Dx=a.Delta.X/a.Delta.Y},s.ClipperBase.prototype.InsertLocalMinima=function(a){if(this.m_MinimaList===null)this.m_MinimaList=a;else if(a.Y>=this.m_MinimaList.Y)a.Next=this.m_MinimaList,this.m_MinimaList=a;else{for(var u=this.m_MinimaList;u.Next!==null&&a.Y<u.Next.Y;)u=u.Next;a.Next=u.Next,u.Next=a}},s.ClipperBase.prototype.PopLocalMinima=function(a,u){return u.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===a?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},s.ClipperBase.prototype.ReverseHorizontal=function(a){var u=a.Top.X;a.Top.X=a.Bot.X,a.Bot.X=u,s.use_xyz&&(u=a.Top.Z,a.Top.Z=a.Bot.Z,a.Bot.Z=u)},s.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var a=this.m_MinimaList;a!==null;){this.InsertScanbeam(a.Y);var u=a.LeftBound;u!==null&&(u.Curr.X=u.Bot.X,u.Curr.Y=u.Bot.Y,s.use_xyz&&(u.Curr.Z=u.Bot.Z),u.OutIdx=s.ClipperBase.Unassigned),u=a.RightBound,u!==null&&(u.Curr.X=u.Bot.X,u.Curr.Y=u.Bot.Y,s.use_xyz&&(u.Curr.Z=u.Bot.Z),u.OutIdx=s.ClipperBase.Unassigned),a=a.Next}this.m_ActiveEdges=null}},s.ClipperBase.prototype.InsertScanbeam=function(a){if(this.m_Scanbeam===null)this.m_Scanbeam=new s.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=a;else if(a>this.m_Scanbeam.Y){var u=new s.Scanbeam;u.Y=a,u.Next=this.m_Scanbeam,this.m_Scanbeam=u}else{for(var f=this.m_Scanbeam;f.Next!==null&&a<=f.Next.Y;)f=f.Next;if(a===f.Y)return;var g=new s.Scanbeam;g.Y=a,g.Next=f.Next,f.Next=g}},s.ClipperBase.prototype.PopScanbeam=function(a){return this.m_Scanbeam===null?(a.v=0,!1):(a.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},s.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},s.ClipperBase.prototype.CreateOutRec=function(){var a=new s.OutRec;return a.Idx=s.ClipperBase.Unassigned,a.IsHole=!1,a.IsOpen=!1,a.FirstLeft=null,a.Pts=null,a.BottomPt=null,a.PolyNode=null,this.m_PolyOuts.push(a),a.Idx=this.m_PolyOuts.length-1,a},s.ClipperBase.prototype.DisposeOutRec=function(a){var u=this.m_PolyOuts[a];u.Pts=null,u=null,this.m_PolyOuts[a]=null},s.ClipperBase.prototype.UpdateEdgeIntoAEL=function(a){a.NextInLML===null&&s.Error("UpdateEdgeIntoAEL: invalid call");var u=a.PrevInAEL,f=a.NextInAEL;return a.NextInLML.OutIdx=a.OutIdx,u!==null?u.NextInAEL=a.NextInLML:this.m_ActiveEdges=a.NextInLML,f!==null&&(f.PrevInAEL=a.NextInLML),a.NextInLML.Side=a.Side,a.NextInLML.WindDelta=a.WindDelta,a.NextInLML.WindCnt=a.WindCnt,a.NextInLML.WindCnt2=a.WindCnt2,a=a.NextInLML,a.Curr.X=a.Bot.X,a.Curr.Y=a.Bot.Y,a.PrevInAEL=u,a.NextInAEL=f,s.ClipperBase.IsHorizontal(a)||this.InsertScanbeam(a.Top.Y),a},s.ClipperBase.prototype.SwapPositionsInAEL=function(a,u){if(!(a.NextInAEL===a.PrevInAEL||u.NextInAEL===u.PrevInAEL)){if(a.NextInAEL===u){var f=u.NextInAEL;f!==null&&(f.PrevInAEL=a);var g=a.PrevInAEL;g!==null&&(g.NextInAEL=u),u.PrevInAEL=g,u.NextInAEL=a,a.PrevInAEL=u,a.NextInAEL=f}else if(u.NextInAEL===a){var S=a.NextInAEL;S!==null&&(S.PrevInAEL=u);var b=u.PrevInAEL;b!==null&&(b.NextInAEL=a),a.PrevInAEL=b,a.NextInAEL=u,u.PrevInAEL=a,u.NextInAEL=S}else{var T=a.NextInAEL,E=a.PrevInAEL;a.NextInAEL=u.NextInAEL,a.NextInAEL!==null&&(a.NextInAEL.PrevInAEL=a),a.PrevInAEL=u.PrevInAEL,a.PrevInAEL!==null&&(a.PrevInAEL.NextInAEL=a),u.NextInAEL=T,u.NextInAEL!==null&&(u.NextInAEL.PrevInAEL=u),u.PrevInAEL=E,u.PrevInAEL!==null&&(u.PrevInAEL.NextInAEL=u)}a.PrevInAEL===null?this.m_ActiveEdges=a:u.PrevInAEL===null&&(this.m_ActiveEdges=u)}},s.ClipperBase.prototype.DeleteFromAEL=function(a){var u=a.PrevInAEL,f=a.NextInAEL;u===null&&f===null&&a!==this.m_ActiveEdges||(u!==null?u.NextInAEL=f:this.m_ActiveEdges=f,f!==null&&(f.PrevInAEL=u),a.NextInAEL=null,a.PrevInAEL=null)},s.Clipper=function(a){typeof a>"u"&&(a=0),this.m_PolyOuts=null,this.m_ClipType=s.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=s.PolyFillType.pftEvenOdd,this.m_SubjFillType=s.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,s.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=s.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&a)!==0,this.StrictlySimple=(2&a)!==0,this.PreserveCollinear=(4&a)!==0,s.use_xyz&&(this.ZFillFunction=null)},s.Clipper.ioReverseSolution=1,s.Clipper.ioStrictlySimple=2,s.Clipper.ioPreserveCollinear=4,s.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),s.ClipperBase.prototype.Clear.call(this))},s.Clipper.prototype.InsertMaxima=function(a){var u=new s.Maxima;if(u.X=a,this.m_Maxima===null)this.m_Maxima=u,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(a<this.m_Maxima.X)u.Next=this.m_Maxima,u.Prev=null,this.m_Maxima=u;else{for(var f=this.m_Maxima;f.Next!==null&&a>=f.Next.X;)f=f.Next;if(a===f.X)return;u.Next=f.Next,u.Prev=f,f.Next!==null&&(f.Next.Prev=u),f.Next=u}},s.Clipper.prototype.Execute=function(){var a=arguments,u=a.length,f=a[1]instanceof s.PolyTree;if(u===4&&!f){var g=a[0],S=a[1],b=a[2],T=a[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&s.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,s.Clear(S),this.m_SubjFillType=b,this.m_ClipFillType=T,this.m_ClipType=g,this.m_UsingPolyTree=!1;try{var E=this.ExecuteInternal();E&&this.BuildResult(S)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return E}else if(u===4&&f){var g=a[0],k=a[1],b=a[2],T=a[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=b,this.m_ClipFillType=T,this.m_ClipType=g,this.m_UsingPolyTree=!0;try{var E=this.ExecuteInternal();E&&this.BuildResult2(k)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return E}else if(u===2&&!f){var g=a[0],S=a[1];return this.Execute(g,S,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)}else if(u===2&&f){var g=a[0],k=a[1];return this.Execute(g,k,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)}},s.Clipper.prototype.FixHoleLinkage=function(a){if(!(a.FirstLeft===null||a.IsHole!==a.FirstLeft.IsHole&&a.FirstLeft.Pts!==null)){for(var u=a.FirstLeft;u!==null&&(u.IsHole===a.IsHole||u.Pts===null);)u=u.FirstLeft;a.FirstLeft=u}},s.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var a={},u={};if(!this.PopScanbeam(a))return!1;for(this.InsertLocalMinimaIntoAEL(a.v);this.PopScanbeam(u)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(u.v))return!1;this.ProcessEdgesAtTopOfScanbeam(u.v),a.v=u.v,this.InsertLocalMinimaIntoAEL(a.v)}var f,g,S;for(g=0,S=this.m_PolyOuts.length;g<S;g++)f=this.m_PolyOuts[g],!(f.Pts===null||f.IsOpen)&&(f.IsHole^this.ReverseSolution)==this.Area$1(f)>0&&this.ReversePolyPtLinks(f.Pts);for(this.JoinCommonEdges(),g=0,S=this.m_PolyOuts.length;g<S;g++)f=this.m_PolyOuts[g],f.Pts!==null&&(f.IsOpen?this.FixupOutPolyline(f):this.FixupOutPolygon(f));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},s.Clipper.prototype.DisposeAllPolyPts=function(){for(var a=0,u=this.m_PolyOuts.length;a<u;++a)this.DisposeOutRec(a);s.Clear(this.m_PolyOuts)},s.Clipper.prototype.AddJoin=function(a,u,f){var g=new s.Join;g.OutPt1=a,g.OutPt2=u,g.OffPt.X=f.X,g.OffPt.Y=f.Y,s.use_xyz&&(g.OffPt.Z=f.Z),this.m_Joins.push(g)},s.Clipper.prototype.AddGhostJoin=function(a,u){var f=new s.Join;f.OutPt1=a,f.OffPt.X=u.X,f.OffPt.Y=u.Y,s.use_xyz&&(f.OffPt.Z=u.Z),this.m_GhostJoins.push(f)},s.Clipper.prototype.SetZ=function(a,u,f){if(this.ZFillFunction!==null){if(a.Z!==0||this.ZFillFunction===null)return;s.IntPoint.op_Equality(a,u.Bot)?a.Z=u.Bot.Z:s.IntPoint.op_Equality(a,u.Top)?a.Z=u.Top.Z:s.IntPoint.op_Equality(a,f.Bot)?a.Z=f.Bot.Z:s.IntPoint.op_Equality(a,f.Top)?a.Z=f.Top.Z:this.ZFillFunction(u.Bot,u.Top,f.Bot,f.Top,a)}},s.Clipper.prototype.InsertLocalMinimaIntoAEL=function(a){for(var u={},f,g;this.PopLocalMinima(a,u);){f=u.v.LeftBound,g=u.v.RightBound;var S=null;if(f===null?(this.InsertEdgeIntoAEL(g,null),this.SetWindingCount(g),this.IsContributing(g)&&(S=this.AddOutPt(g,g.Bot))):g===null?(this.InsertEdgeIntoAEL(f,null),this.SetWindingCount(f),this.IsContributing(f)&&(S=this.AddOutPt(f,f.Bot)),this.InsertScanbeam(f.Top.Y)):(this.InsertEdgeIntoAEL(f,null),this.InsertEdgeIntoAEL(g,f),this.SetWindingCount(f),g.WindCnt=f.WindCnt,g.WindCnt2=f.WindCnt2,this.IsContributing(f)&&(S=this.AddLocalMinPoly(f,g,f.Bot)),this.InsertScanbeam(f.Top.Y)),g!==null&&(s.ClipperBase.IsHorizontal(g)?(g.NextInLML!==null&&this.InsertScanbeam(g.NextInLML.Top.Y),this.AddEdgeToSEL(g)):this.InsertScanbeam(g.Top.Y)),!(f===null||g===null)){if(S!==null&&s.ClipperBase.IsHorizontal(g)&&this.m_GhostJoins.length>0&&g.WindDelta!==0)for(var b=0,T=this.m_GhostJoins.length;b<T;b++){var E=this.m_GhostJoins[b];this.HorzSegmentsOverlap(E.OutPt1.Pt.X,E.OffPt.X,g.Bot.X,g.Top.X)&&this.AddJoin(E.OutPt1,S,E.OffPt)}if(f.OutIdx>=0&&f.PrevInAEL!==null&&f.PrevInAEL.Curr.X===f.Bot.X&&f.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(f.PrevInAEL.Curr,f.PrevInAEL.Top,f.Curr,f.Top,this.m_UseFullRange)&&f.WindDelta!==0&&f.PrevInAEL.WindDelta!==0){var k=this.AddOutPt(f.PrevInAEL,f.Bot);this.AddJoin(S,k,f.Top)}if(f.NextInAEL!==g){if(g.OutIdx>=0&&g.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(g.PrevInAEL.Curr,g.PrevInAEL.Top,g.Curr,g.Top,this.m_UseFullRange)&&g.WindDelta!==0&&g.PrevInAEL.WindDelta!==0){var k=this.AddOutPt(g.PrevInAEL,g.Bot);this.AddJoin(S,k,g.Top)}var L=f.NextInAEL;if(L!==null)for(;L!==g;)this.IntersectEdges(g,L,f.Curr),L=L.NextInAEL}}}},s.Clipper.prototype.InsertEdgeIntoAEL=function(a,u){if(this.m_ActiveEdges===null)a.PrevInAEL=null,a.NextInAEL=null,this.m_ActiveEdges=a;else if(u===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,a))a.PrevInAEL=null,a.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=a,this.m_ActiveEdges=a;else{for(u===null&&(u=this.m_ActiveEdges);u.NextInAEL!==null&&!this.E2InsertsBeforeE1(u.NextInAEL,a);)u=u.NextInAEL;a.NextInAEL=u.NextInAEL,u.NextInAEL!==null&&(u.NextInAEL.PrevInAEL=a),a.PrevInAEL=u,u.NextInAEL=a}},s.Clipper.prototype.E2InsertsBeforeE1=function(a,u){return u.Curr.X===a.Curr.X?u.Top.Y>a.Top.Y?u.Top.X<s.Clipper.TopX(a,u.Top.Y):a.Top.X>s.Clipper.TopX(u,a.Top.Y):u.Curr.X<a.Curr.X},s.Clipper.prototype.IsEvenOddFillType=function(a){return a.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType===s.PolyFillType.pftEvenOdd:this.m_ClipFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsEvenOddAltFillType=function(a){return a.PolyTyp===s.PolyType.ptSubject?this.m_ClipFillType===s.PolyFillType.pftEvenOdd:this.m_SubjFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsContributing=function(a){var u,f;switch(a.PolyTyp===s.PolyType.ptSubject?(u=this.m_SubjFillType,f=this.m_ClipFillType):(u=this.m_ClipFillType,f=this.m_SubjFillType),u){case s.PolyFillType.pftEvenOdd:if(a.WindDelta===0&&a.WindCnt!==1)return!1;break;case s.PolyFillType.pftNonZero:if(Math.abs(a.WindCnt)!==1)return!1;break;case s.PolyFillType.pftPositive:if(a.WindCnt!==1)return!1;break;default:if(a.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case s.ClipType.ctIntersection:switch(f){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return a.WindCnt2!==0;case s.PolyFillType.pftPositive:return a.WindCnt2>0;default:return a.WindCnt2<0}case s.ClipType.ctUnion:switch(f){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return a.WindCnt2===0;case s.PolyFillType.pftPositive:return a.WindCnt2<=0;default:return a.WindCnt2>=0}case s.ClipType.ctDifference:if(a.PolyTyp===s.PolyType.ptSubject)switch(f){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return a.WindCnt2===0;case s.PolyFillType.pftPositive:return a.WindCnt2<=0;default:return a.WindCnt2>=0}else switch(f){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return a.WindCnt2!==0;case s.PolyFillType.pftPositive:return a.WindCnt2>0;default:return a.WindCnt2<0}case s.ClipType.ctXor:if(a.WindDelta===0)switch(f){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return a.WindCnt2===0;case s.PolyFillType.pftPositive:return a.WindCnt2<=0;default:return a.WindCnt2>=0}else return!0}return!0},s.Clipper.prototype.SetWindingCount=function(a){for(var u=a.PrevInAEL;u!==null&&(u.PolyTyp!==a.PolyTyp||u.WindDelta===0);)u=u.PrevInAEL;if(u===null){var f=a.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;a.WindDelta===0?a.WindCnt=f===s.PolyFillType.pftNegative?-1:1:a.WindCnt=a.WindDelta,a.WindCnt2=0,u=this.m_ActiveEdges}else if(a.WindDelta===0&&this.m_ClipType!==s.ClipType.ctUnion)a.WindCnt=1,a.WindCnt2=u.WindCnt2,u=u.NextInAEL;else if(this.IsEvenOddFillType(a)){if(a.WindDelta===0){for(var g=!0,S=u.PrevInAEL;S!==null;)S.PolyTyp===u.PolyTyp&&S.WindDelta!==0&&(g=!g),S=S.PrevInAEL;a.WindCnt=g?0:1}else a.WindCnt=a.WindDelta;a.WindCnt2=u.WindCnt2,u=u.NextInAEL}else u.WindCnt*u.WindDelta<0?Math.abs(u.WindCnt)>1?u.WindDelta*a.WindDelta<0?a.WindCnt=u.WindCnt:a.WindCnt=u.WindCnt+a.WindDelta:a.WindCnt=a.WindDelta===0?1:a.WindDelta:a.WindDelta===0?a.WindCnt=u.WindCnt<0?u.WindCnt-1:u.WindCnt+1:u.WindDelta*a.WindDelta<0?a.WindCnt=u.WindCnt:a.WindCnt=u.WindCnt+a.WindDelta,a.WindCnt2=u.WindCnt2,u=u.NextInAEL;if(this.IsEvenOddAltFillType(a))for(;u!==a;)u.WindDelta!==0&&(a.WindCnt2=a.WindCnt2===0?1:0),u=u.NextInAEL;else for(;u!==a;)a.WindCnt2+=u.WindDelta,u=u.NextInAEL},s.Clipper.prototype.AddEdgeToSEL=function(a){this.m_SortedEdges===null?(this.m_SortedEdges=a,a.PrevInSEL=null,a.NextInSEL=null):(a.NextInSEL=this.m_SortedEdges,a.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=a,this.m_SortedEdges=a)},s.Clipper.prototype.PopEdgeFromSEL=function(a){if(a.v=this.m_SortedEdges,a.v===null)return!1;var u=a.v;return this.m_SortedEdges=a.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),u.NextInSEL=null,u.PrevInSEL=null,!0},s.Clipper.prototype.CopyAELToSEL=function(){var a=this.m_ActiveEdges;for(this.m_SortedEdges=a;a!==null;)a.PrevInSEL=a.PrevInAEL,a.NextInSEL=a.NextInAEL,a=a.NextInAEL},s.Clipper.prototype.SwapPositionsInSEL=function(a,u){if(!(a.NextInSEL===null&&a.PrevInSEL===null)&&!(u.NextInSEL===null&&u.PrevInSEL===null)){if(a.NextInSEL===u){var f=u.NextInSEL;f!==null&&(f.PrevInSEL=a);var g=a.PrevInSEL;g!==null&&(g.NextInSEL=u),u.PrevInSEL=g,u.NextInSEL=a,a.PrevInSEL=u,a.NextInSEL=f}else if(u.NextInSEL===a){var f=a.NextInSEL;f!==null&&(f.PrevInSEL=u);var g=u.PrevInSEL;g!==null&&(g.NextInSEL=a),a.PrevInSEL=g,a.NextInSEL=u,u.PrevInSEL=a,u.NextInSEL=f}else{var f=a.NextInSEL,g=a.PrevInSEL;a.NextInSEL=u.NextInSEL,a.NextInSEL!==null&&(a.NextInSEL.PrevInSEL=a),a.PrevInSEL=u.PrevInSEL,a.PrevInSEL!==null&&(a.PrevInSEL.NextInSEL=a),u.NextInSEL=f,u.NextInSEL!==null&&(u.NextInSEL.PrevInSEL=u),u.PrevInSEL=g,u.PrevInSEL!==null&&(u.PrevInSEL.NextInSEL=u)}a.PrevInSEL===null?this.m_SortedEdges=a:u.PrevInSEL===null&&(this.m_SortedEdges=u)}},s.Clipper.prototype.AddLocalMaxPoly=function(a,u,f){this.AddOutPt(a,f),u.WindDelta===0&&this.AddOutPt(u,f),a.OutIdx===u.OutIdx?(a.OutIdx=-1,u.OutIdx=-1):a.OutIdx<u.OutIdx?this.AppendPolygon(a,u):this.AppendPolygon(u,a)},s.Clipper.prototype.AddLocalMinPoly=function(a,u,f){var g,S,b;if(s.ClipperBase.IsHorizontal(u)||a.Dx>u.Dx?(g=this.AddOutPt(a,f),u.OutIdx=a.OutIdx,a.Side=s.EdgeSide.esLeft,u.Side=s.EdgeSide.esRight,S=a,S.PrevInAEL===u?b=u.PrevInAEL:b=S.PrevInAEL):(g=this.AddOutPt(u,f),a.OutIdx=u.OutIdx,a.Side=s.EdgeSide.esRight,u.Side=s.EdgeSide.esLeft,S=u,S.PrevInAEL===a?b=a.PrevInAEL:b=S.PrevInAEL),b!==null&&b.OutIdx>=0&&b.Top.Y<f.Y&&S.Top.Y<f.Y){var T=s.Clipper.TopX(b,f.Y),E=s.Clipper.TopX(S,f.Y);if(T===E&&S.WindDelta!==0&&b.WindDelta!==0&&s.ClipperBase.SlopesEqual5(new s.IntPoint2(T,f.Y),b.Top,new s.IntPoint2(E,f.Y),S.Top,this.m_UseFullRange)){var k=this.AddOutPt(b,f);this.AddJoin(g,k,S.Top)}}return g},s.Clipper.prototype.AddOutPt=function(a,u){if(a.OutIdx<0){var f=this.CreateOutRec();f.IsOpen=a.WindDelta===0;var g=new s.OutPt;return f.Pts=g,g.Idx=f.Idx,g.Pt.X=u.X,g.Pt.Y=u.Y,s.use_xyz&&(g.Pt.Z=u.Z),g.Next=g,g.Prev=g,f.IsOpen||this.SetHoleState(a,f),a.OutIdx=f.Idx,g}else{var f=this.m_PolyOuts[a.OutIdx],S=f.Pts,b=a.Side===s.EdgeSide.esLeft;if(b&&s.IntPoint.op_Equality(u,S.Pt))return S;if(!b&&s.IntPoint.op_Equality(u,S.Prev.Pt))return S.Prev;var g=new s.OutPt;return g.Idx=f.Idx,g.Pt.X=u.X,g.Pt.Y=u.Y,s.use_xyz&&(g.Pt.Z=u.Z),g.Next=S,g.Prev=S.Prev,g.Prev.Next=g,S.Prev=g,b&&(f.Pts=g),g}},s.Clipper.prototype.GetLastOutPt=function(a){var u=this.m_PolyOuts[a.OutIdx];return a.Side===s.EdgeSide.esLeft?u.Pts:u.Pts.Prev},s.Clipper.prototype.SwapPoints=function(a,u){var f=new s.IntPoint1(a.Value);a.Value.X=u.Value.X,a.Value.Y=u.Value.Y,s.use_xyz&&(a.Value.Z=u.Value.Z),u.Value.X=f.X,u.Value.Y=f.Y,s.use_xyz&&(u.Value.Z=f.Z)},s.Clipper.prototype.HorzSegmentsOverlap=function(a,u,f,g){var S;return a>u&&(S=a,a=u,u=S),f>g&&(S=f,f=g,g=S),a<g&&f<u},s.Clipper.prototype.SetHoleState=function(a,u){for(var f=a.PrevInAEL,g=null;f!==null;)f.OutIdx>=0&&f.WindDelta!==0&&(g===null?g=f:g.OutIdx===f.OutIdx&&(g=null)),f=f.PrevInAEL;g===null?(u.FirstLeft=null,u.IsHole=!1):(u.FirstLeft=this.m_PolyOuts[g.OutIdx],u.IsHole=!u.FirstLeft.IsHole)},s.Clipper.prototype.GetDx=function(a,u){return a.Y===u.Y?s.ClipperBase.horizontal:(u.X-a.X)/(u.Y-a.Y)},s.Clipper.prototype.FirstIsBottomPt=function(a,u){for(var f=a.Prev;s.IntPoint.op_Equality(f.Pt,a.Pt)&&f!==a;)f=f.Prev;var g=Math.abs(this.GetDx(a.Pt,f.Pt));for(f=a.Next;s.IntPoint.op_Equality(f.Pt,a.Pt)&&f!==a;)f=f.Next;var S=Math.abs(this.GetDx(a.Pt,f.Pt));for(f=u.Prev;s.IntPoint.op_Equality(f.Pt,u.Pt)&&f!==u;)f=f.Prev;var b=Math.abs(this.GetDx(u.Pt,f.Pt));for(f=u.Next;s.IntPoint.op_Equality(f.Pt,u.Pt)&&f!==u;)f=f.Next;var T=Math.abs(this.GetDx(u.Pt,f.Pt));return Math.max(g,S)===Math.max(b,T)&&Math.min(g,S)===Math.min(b,T)?this.Area(a)>0:g>=b&&g>=T||S>=b&&S>=T},s.Clipper.prototype.GetBottomPt=function(a){for(var u=null,f=a.Next;f!==a;)f.Pt.Y>a.Pt.Y?(a=f,u=null):f.Pt.Y===a.Pt.Y&&f.Pt.X<=a.Pt.X&&(f.Pt.X<a.Pt.X?(u=null,a=f):f.Next!==a&&f.Prev!==a&&(u=f)),f=f.Next;if(u!==null)for(;u!==f;)for(this.FirstIsBottomPt(f,u)||(a=u),u=u.Next;s.IntPoint.op_Inequality(u.Pt,a.Pt);)u=u.Next;return a},s.Clipper.prototype.GetLowermostRec=function(a,u){a.BottomPt===null&&(a.BottomPt=this.GetBottomPt(a.Pts)),u.BottomPt===null&&(u.BottomPt=this.GetBottomPt(u.Pts));var f=a.BottomPt,g=u.BottomPt;return f.Pt.Y>g.Pt.Y?a:f.Pt.Y<g.Pt.Y?u:f.Pt.X<g.Pt.X?a:f.Pt.X>g.Pt.X||f.Next===f?u:g.Next===g||this.FirstIsBottomPt(f,g)?a:u},s.Clipper.prototype.OutRec1RightOfOutRec2=function(a,u){do if(a=a.FirstLeft,a===u)return!0;while(a!==null);return!1},s.Clipper.prototype.GetOutRec=function(a){for(var u=this.m_PolyOuts[a];u!==this.m_PolyOuts[u.Idx];)u=this.m_PolyOuts[u.Idx];return u},s.Clipper.prototype.AppendPolygon=function(a,u){var f=this.m_PolyOuts[a.OutIdx],g=this.m_PolyOuts[u.OutIdx],S;this.OutRec1RightOfOutRec2(f,g)?S=g:this.OutRec1RightOfOutRec2(g,f)?S=f:S=this.GetLowermostRec(f,g);var b=f.Pts,T=b.Prev,E=g.Pts,k=E.Prev;a.Side===s.EdgeSide.esLeft?u.Side===s.EdgeSide.esLeft?(this.ReversePolyPtLinks(E),E.Next=b,b.Prev=E,T.Next=k,k.Prev=T,f.Pts=k):(k.Next=b,b.Prev=k,E.Prev=T,T.Next=E,f.Pts=E):u.Side===s.EdgeSide.esRight?(this.ReversePolyPtLinks(E),T.Next=k,k.Prev=T,E.Next=b,b.Prev=E):(T.Next=E,E.Prev=T,b.Prev=k,k.Next=b),f.BottomPt=null,S===g&&(g.FirstLeft!==f&&(f.FirstLeft=g.FirstLeft),f.IsHole=g.IsHole),g.Pts=null,g.BottomPt=null,g.FirstLeft=f;var L=a.OutIdx,W=u.OutIdx;a.OutIdx=-1,u.OutIdx=-1;for(var M=this.m_ActiveEdges;M!==null;){if(M.OutIdx===W){M.OutIdx=L,M.Side=a.Side;break}M=M.NextInAEL}g.Idx=f.Idx},s.Clipper.prototype.ReversePolyPtLinks=function(a){if(a!==null){var u,f;u=a;do f=u.Next,u.Next=u.Prev,u.Prev=f,u=f;while(u!==a)}},s.Clipper.SwapSides=function(a,u){var f=a.Side;a.Side=u.Side,u.Side=f},s.Clipper.SwapPolyIndexes=function(a,u){var f=a.OutIdx;a.OutIdx=u.OutIdx,u.OutIdx=f},s.Clipper.prototype.IntersectEdges=function(a,u,f){var g=a.OutIdx>=0,S=u.OutIdx>=0;if(s.use_xyz&&this.SetZ(f,a,u),s.use_lines&&(a.WindDelta===0||u.WindDelta===0)){if(a.WindDelta===0&&u.WindDelta===0)return;a.PolyTyp===u.PolyTyp&&a.WindDelta!==u.WindDelta&&this.m_ClipType===s.ClipType.ctUnion?a.WindDelta===0?S&&(this.AddOutPt(a,f),g&&(a.OutIdx=-1)):g&&(this.AddOutPt(u,f),S&&(u.OutIdx=-1)):a.PolyTyp!==u.PolyTyp&&(a.WindDelta===0&&Math.abs(u.WindCnt)===1&&(this.m_ClipType!==s.ClipType.ctUnion||u.WindCnt2===0)?(this.AddOutPt(a,f),g&&(a.OutIdx=-1)):u.WindDelta===0&&Math.abs(a.WindCnt)===1&&(this.m_ClipType!==s.ClipType.ctUnion||a.WindCnt2===0)&&(this.AddOutPt(u,f),S&&(u.OutIdx=-1)));return}if(a.PolyTyp===u.PolyTyp)if(this.IsEvenOddFillType(a)){var b=a.WindCnt;a.WindCnt=u.WindCnt,u.WindCnt=b}else a.WindCnt+u.WindDelta===0?a.WindCnt=-a.WindCnt:a.WindCnt+=u.WindDelta,u.WindCnt-a.WindDelta===0?u.WindCnt=-u.WindCnt:u.WindCnt-=a.WindDelta;else this.IsEvenOddFillType(u)?a.WindCnt2=a.WindCnt2===0?1:0:a.WindCnt2+=u.WindDelta,this.IsEvenOddFillType(a)?u.WindCnt2=u.WindCnt2===0?1:0:u.WindCnt2-=a.WindDelta;var T,E,k,L;a.PolyTyp===s.PolyType.ptSubject?(T=this.m_SubjFillType,k=this.m_ClipFillType):(T=this.m_ClipFillType,k=this.m_SubjFillType),u.PolyTyp===s.PolyType.ptSubject?(E=this.m_SubjFillType,L=this.m_ClipFillType):(E=this.m_ClipFillType,L=this.m_SubjFillType);var W,M;switch(T){case s.PolyFillType.pftPositive:W=a.WindCnt;break;case s.PolyFillType.pftNegative:W=-a.WindCnt;break;default:W=Math.abs(a.WindCnt);break}switch(E){case s.PolyFillType.pftPositive:M=u.WindCnt;break;case s.PolyFillType.pftNegative:M=-u.WindCnt;break;default:M=Math.abs(u.WindCnt);break}if(g&&S)W!==0&&W!==1||M!==0&&M!==1||a.PolyTyp!==u.PolyTyp&&this.m_ClipType!==s.ClipType.ctXor?this.AddLocalMaxPoly(a,u,f):(this.AddOutPt(a,f),this.AddOutPt(u,f),s.Clipper.SwapSides(a,u),s.Clipper.SwapPolyIndexes(a,u));else if(g)(M===0||M===1)&&(this.AddOutPt(a,f),s.Clipper.SwapSides(a,u),s.Clipper.SwapPolyIndexes(a,u));else if(S)(W===0||W===1)&&(this.AddOutPt(u,f),s.Clipper.SwapSides(a,u),s.Clipper.SwapPolyIndexes(a,u));else if((W===0||W===1)&&(M===0||M===1)){var V,it;switch(k){case s.PolyFillType.pftPositive:V=a.WindCnt2;break;case s.PolyFillType.pftNegative:V=-a.WindCnt2;break;default:V=Math.abs(a.WindCnt2);break}switch(L){case s.PolyFillType.pftPositive:it=u.WindCnt2;break;case s.PolyFillType.pftNegative:it=-u.WindCnt2;break;default:it=Math.abs(u.WindCnt2);break}if(a.PolyTyp!==u.PolyTyp)this.AddLocalMinPoly(a,u,f);else if(W===1&&M===1)switch(this.m_ClipType){case s.ClipType.ctIntersection:V>0&&it>0&&this.AddLocalMinPoly(a,u,f);break;case s.ClipType.ctUnion:V<=0&&it<=0&&this.AddLocalMinPoly(a,u,f);break;case s.ClipType.ctDifference:(a.PolyTyp===s.PolyType.ptClip&&V>0&&it>0||a.PolyTyp===s.PolyType.ptSubject&&V<=0&&it<=0)&&this.AddLocalMinPoly(a,u,f);break;case s.ClipType.ctXor:this.AddLocalMinPoly(a,u,f);break}else s.Clipper.SwapSides(a,u)}},s.Clipper.prototype.DeleteFromSEL=function(a){var u=a.PrevInSEL,f=a.NextInSEL;u===null&&f===null&&a!==this.m_SortedEdges||(u!==null?u.NextInSEL=f:this.m_SortedEdges=f,f!==null&&(f.PrevInSEL=u),a.NextInSEL=null,a.PrevInSEL=null)},s.Clipper.prototype.ProcessHorizontals=function(){for(var a={};this.PopEdgeFromSEL(a);)this.ProcessHorizontal(a.v)},s.Clipper.prototype.GetHorzDirection=function(a,u){a.Bot.X<a.Top.X?(u.Left=a.Bot.X,u.Right=a.Top.X,u.Dir=s.Direction.dLeftToRight):(u.Left=a.Top.X,u.Right=a.Bot.X,u.Dir=s.Direction.dRightToLeft)},s.Clipper.prototype.ProcessHorizontal=function(a){var u={Dir:null,Left:null,Right:null};this.GetHorzDirection(a,u);for(var f=u.Dir,g=u.Left,S=u.Right,b=a.WindDelta===0,T=a,E=null;T.NextInLML!==null&&s.ClipperBase.IsHorizontal(T.NextInLML);)T=T.NextInLML;T.NextInLML===null&&(E=this.GetMaximaPair(T));var k=this.m_Maxima;if(k!==null)if(f===s.Direction.dLeftToRight){for(;k!==null&&k.X<=a.Bot.X;)k=k.Next;k!==null&&k.X>=T.Top.X&&(k=null)}else{for(;k.Next!==null&&k.Next.X<a.Bot.X;)k=k.Next;k.X<=T.Top.X&&(k=null)}for(var L=null;;){for(var W=a===T,M=this.GetNextInAEL(a,f);M!==null;){if(k!==null)if(f===s.Direction.dLeftToRight)for(;k!==null&&k.X<M.Curr.X;)a.OutIdx>=0&&!b&&this.AddOutPt(a,new s.IntPoint2(k.X,a.Bot.Y)),k=k.Next;else for(;k!==null&&k.X>M.Curr.X;)a.OutIdx>=0&&!b&&this.AddOutPt(a,new s.IntPoint2(k.X,a.Bot.Y)),k=k.Prev;if(f===s.Direction.dLeftToRight&&M.Curr.X>S||f===s.Direction.dRightToLeft&&M.Curr.X<g||M.Curr.X===a.Top.X&&a.NextInLML!==null&&M.Dx<a.NextInLML.Dx)break;if(a.OutIdx>=0&&!b){s.use_xyz&&(f===s.Direction.dLeftToRight?this.SetZ(M.Curr,a,M):this.SetZ(M.Curr,M,a)),L=this.AddOutPt(a,M.Curr);for(var V=this.m_SortedEdges;V!==null;){if(V.OutIdx>=0&&this.HorzSegmentsOverlap(a.Bot.X,a.Top.X,V.Bot.X,V.Top.X)){var it=this.GetLastOutPt(V);this.AddJoin(it,L,V.Top)}V=V.NextInSEL}this.AddGhostJoin(L,a.Bot)}if(M===E&&W){a.OutIdx>=0&&this.AddLocalMaxPoly(a,E,a.Top),this.DeleteFromAEL(a),this.DeleteFromAEL(E);return}if(f===s.Direction.dLeftToRight){var at=new s.IntPoint2(M.Curr.X,a.Curr.Y);this.IntersectEdges(a,M,at)}else{var at=new s.IntPoint2(M.Curr.X,a.Curr.Y);this.IntersectEdges(M,a,at)}var ut=this.GetNextInAEL(M,f);this.SwapPositionsInAEL(a,M),M=ut}if(a.NextInLML===null||!s.ClipperBase.IsHorizontal(a.NextInLML))break;a=this.UpdateEdgeIntoAEL(a),a.OutIdx>=0&&this.AddOutPt(a,a.Bot),u={Dir:f,Left:g,Right:S},this.GetHorzDirection(a,u),f=u.Dir,g=u.Left,S=u.Right}if(a.OutIdx>=0&&L===null){L=this.GetLastOutPt(a);for(var V=this.m_SortedEdges;V!==null;){if(V.OutIdx>=0&&this.HorzSegmentsOverlap(a.Bot.X,a.Top.X,V.Bot.X,V.Top.X)){var it=this.GetLastOutPt(V);this.AddJoin(it,L,V.Top)}V=V.NextInSEL}this.AddGhostJoin(L,a.Top)}if(a.NextInLML!==null)if(a.OutIdx>=0){if(L=this.AddOutPt(a,a.Top),a=this.UpdateEdgeIntoAEL(a),a.WindDelta===0)return;var xt=a.PrevInAEL,ut=a.NextInAEL;if(xt!==null&&xt.Curr.X===a.Bot.X&&xt.Curr.Y===a.Bot.Y&&xt.WindDelta===0&&xt.OutIdx>=0&&xt.Curr.Y>xt.Top.Y&&s.ClipperBase.SlopesEqual3(a,xt,this.m_UseFullRange)){var it=this.AddOutPt(xt,a.Bot);this.AddJoin(L,it,a.Top)}else if(ut!==null&&ut.Curr.X===a.Bot.X&&ut.Curr.Y===a.Bot.Y&&ut.WindDelta!==0&&ut.OutIdx>=0&&ut.Curr.Y>ut.Top.Y&&s.ClipperBase.SlopesEqual3(a,ut,this.m_UseFullRange)){var it=this.AddOutPt(ut,a.Bot);this.AddJoin(L,it,a.Top)}}else a=this.UpdateEdgeIntoAEL(a);else a.OutIdx>=0&&this.AddOutPt(a,a.Top),this.DeleteFromAEL(a)},s.Clipper.prototype.GetNextInAEL=function(a,u){return u===s.Direction.dLeftToRight?a.NextInAEL:a.PrevInAEL},s.Clipper.prototype.IsMinima=function(a){return a!==null&&a.Prev.NextInLML!==a&&a.Next.NextInLML!==a},s.Clipper.prototype.IsMaxima=function(a,u){return a!==null&&a.Top.Y===u&&a.NextInLML===null},s.Clipper.prototype.IsIntermediate=function(a,u){return a.Top.Y===u&&a.NextInLML!==null},s.Clipper.prototype.GetMaximaPair=function(a){return s.IntPoint.op_Equality(a.Next.Top,a.Top)&&a.Next.NextInLML===null?a.Next:s.IntPoint.op_Equality(a.Prev.Top,a.Top)&&a.Prev.NextInLML===null?a.Prev:null},s.Clipper.prototype.GetMaximaPairEx=function(a){var u=this.GetMaximaPair(a);return u===null||u.OutIdx===s.ClipperBase.Skip||u.NextInAEL===u.PrevInAEL&&!s.ClipperBase.IsHorizontal(u)?null:u},s.Clipper.prototype.ProcessIntersections=function(a){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(a),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,s.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},s.Clipper.prototype.BuildIntersectList=function(a){if(this.m_ActiveEdges!==null){var u=this.m_ActiveEdges;for(this.m_SortedEdges=u;u!==null;)u.PrevInSEL=u.PrevInAEL,u.NextInSEL=u.NextInAEL,u.Curr.X=s.Clipper.TopX(u,a),u=u.NextInAEL;for(var f=!0;f&&this.m_SortedEdges!==null;){for(f=!1,u=this.m_SortedEdges;u.NextInSEL!==null;){var g=u.NextInSEL,S=new s.IntPoint0;if(u.Curr.X>g.Curr.X){this.IntersectPoint(u,g,S),S.Y<a&&(S=new s.IntPoint2(s.Clipper.TopX(u,a),a));var b=new s.IntersectNode;b.Edge1=u,b.Edge2=g,b.Pt.X=S.X,b.Pt.Y=S.Y,s.use_xyz&&(b.Pt.Z=S.Z),this.m_IntersectList.push(b),this.SwapPositionsInSEL(u,g),f=!0}else u=g}if(u.PrevInSEL!==null)u.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},s.Clipper.prototype.EdgesAdjacent=function(a){return a.Edge1.NextInSEL===a.Edge2||a.Edge1.PrevInSEL===a.Edge2},s.Clipper.IntersectNodeSort=function(a,u){return u.Pt.Y-a.Pt.Y},s.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var a=this.m_IntersectList.length,u=0;u<a;u++){if(!this.EdgesAdjacent(this.m_IntersectList[u])){for(var f=u+1;f<a&&!this.EdgesAdjacent(this.m_IntersectList[f]);)f++;if(f===a)return!1;var g=this.m_IntersectList[u];this.m_IntersectList[u]=this.m_IntersectList[f],this.m_IntersectList[f]=g}this.SwapPositionsInSEL(this.m_IntersectList[u].Edge1,this.m_IntersectList[u].Edge2)}return!0},s.Clipper.prototype.ProcessIntersectList=function(){for(var a=0,u=this.m_IntersectList.length;a<u;a++){var f=this.m_IntersectList[a];this.IntersectEdges(f.Edge1,f.Edge2,f.Pt),this.SwapPositionsInAEL(f.Edge1,f.Edge2)}this.m_IntersectList.length=0};var Vd=function(a){return a<0?Math.ceil(a-.5):Math.round(a)},Hd=function(a){return a<0?Math.ceil(a-.5):Math.floor(a+.5)},Jd=function(a){return a<0?-Math.round(Math.abs(a)):Math.round(a)},Kd=function(a){return a<0?(a-=.5,a<-2147483648?Math.ceil(a):a|0):(a+=.5,a>2147483647?Math.floor(a):a|0)};p.msie?s.Clipper.Round=Vd:p.chromium?s.Clipper.Round=Jd:p.safari?s.Clipper.Round=Kd:s.Clipper.Round=Hd,s.Clipper.TopX=function(a,u){return u===a.Top.Y?a.Top.X:a.Bot.X+s.Clipper.Round(a.Dx*(u-a.Bot.Y))},s.Clipper.prototype.IntersectPoint=function(a,u,f){f.X=0,f.Y=0;var g,S;if(a.Dx===u.Dx){f.Y=a.Curr.Y,f.X=s.Clipper.TopX(a,f.Y);return}if(a.Delta.X===0)f.X=a.Bot.X,s.ClipperBase.IsHorizontal(u)?f.Y=u.Bot.Y:(S=u.Bot.Y-u.Bot.X/u.Dx,f.Y=s.Clipper.Round(f.X/u.Dx+S));else if(u.Delta.X===0)f.X=u.Bot.X,s.ClipperBase.IsHorizontal(a)?f.Y=a.Bot.Y:(g=a.Bot.Y-a.Bot.X/a.Dx,f.Y=s.Clipper.Round(f.X/a.Dx+g));else{g=a.Bot.X-a.Bot.Y*a.Dx,S=u.Bot.X-u.Bot.Y*u.Dx;var b=(S-g)/(a.Dx-u.Dx);f.Y=s.Clipper.Round(b),Math.abs(a.Dx)<Math.abs(u.Dx)?f.X=s.Clipper.Round(a.Dx*b+g):f.X=s.Clipper.Round(u.Dx*b+S)}if(f.Y<a.Top.Y||f.Y<u.Top.Y){if(a.Top.Y>u.Top.Y)return f.Y=a.Top.Y,f.X=s.Clipper.TopX(u,a.Top.Y),f.X<a.Top.X;f.Y=u.Top.Y,Math.abs(a.Dx)<Math.abs(u.Dx)?f.X=s.Clipper.TopX(a,f.Y):f.X=s.Clipper.TopX(u,f.Y)}f.Y>a.Curr.Y&&(f.Y=a.Curr.Y,Math.abs(a.Dx)>Math.abs(u.Dx)?f.X=s.Clipper.TopX(u,f.Y):f.X=s.Clipper.TopX(a,f.Y))},s.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(a){for(var u=this.m_ActiveEdges;u!==null;){var f=this.IsMaxima(u,a);if(f){var g=this.GetMaximaPairEx(u);f=g===null||!s.ClipperBase.IsHorizontal(g)}if(f){this.StrictlySimple&&this.InsertMaxima(u.Top.X);var S=u.PrevInAEL;this.DoMaxima(u),S===null?u=this.m_ActiveEdges:u=S.NextInAEL}else{if(this.IsIntermediate(u,a)&&s.ClipperBase.IsHorizontal(u.NextInLML)?(u=this.UpdateEdgeIntoAEL(u),u.OutIdx>=0&&this.AddOutPt(u,u.Bot),this.AddEdgeToSEL(u)):(u.Curr.X=s.Clipper.TopX(u,a),u.Curr.Y=a),s.use_xyz&&(u.Top.Y===a?u.Curr.Z=u.Top.Z:u.Bot.Y===a?u.Curr.Z=u.Bot.Z:u.Curr.Z=0),this.StrictlySimple){var S=u.PrevInAEL;if(u.OutIdx>=0&&u.WindDelta!==0&&S!==null&&S.OutIdx>=0&&S.Curr.X===u.Curr.X&&S.WindDelta!==0){var b=new s.IntPoint1(u.Curr);s.use_xyz&&this.SetZ(b,S,u);var T=this.AddOutPt(S,b),E=this.AddOutPt(u,b);this.AddJoin(T,E,b)}}u=u.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,u=this.m_ActiveEdges;u!==null;){if(this.IsIntermediate(u,a)){var T=null;u.OutIdx>=0&&(T=this.AddOutPt(u,u.Top)),u=this.UpdateEdgeIntoAEL(u);var S=u.PrevInAEL,k=u.NextInAEL;if(S!==null&&S.Curr.X===u.Bot.X&&S.Curr.Y===u.Bot.Y&&T!==null&&S.OutIdx>=0&&S.Curr.Y===S.Top.Y&&s.ClipperBase.SlopesEqual5(u.Curr,u.Top,S.Curr,S.Top,this.m_UseFullRange)&&u.WindDelta!==0&&S.WindDelta!==0){var E=this.AddOutPt(ePrev2,u.Bot);this.AddJoin(T,E,u.Top)}else if(k!==null&&k.Curr.X===u.Bot.X&&k.Curr.Y===u.Bot.Y&&T!==null&&k.OutIdx>=0&&k.Curr.Y===k.Top.Y&&s.ClipperBase.SlopesEqual5(u.Curr,u.Top,k.Curr,k.Top,this.m_UseFullRange)&&u.WindDelta!==0&&k.WindDelta!==0){var E=this.AddOutPt(k,u.Bot);this.AddJoin(T,E,u.Top)}}u=u.NextInAEL}},s.Clipper.prototype.DoMaxima=function(a){var u=this.GetMaximaPairEx(a);if(u===null){a.OutIdx>=0&&this.AddOutPt(a,a.Top),this.DeleteFromAEL(a);return}for(var f=a.NextInAEL;f!==null&&f!==u;)this.IntersectEdges(a,f,a.Top),this.SwapPositionsInAEL(a,f),f=a.NextInAEL;a.OutIdx===-1&&u.OutIdx===-1?(this.DeleteFromAEL(a),this.DeleteFromAEL(u)):a.OutIdx>=0&&u.OutIdx>=0?(a.OutIdx>=0&&this.AddLocalMaxPoly(a,u,a.Top),this.DeleteFromAEL(a),this.DeleteFromAEL(u)):s.use_lines&&a.WindDelta===0?(a.OutIdx>=0&&(this.AddOutPt(a,a.Top),a.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(a),u.OutIdx>=0&&(this.AddOutPt(u,a.Top),u.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(u)):s.Error("DoMaxima error")},s.Clipper.ReversePaths=function(a){for(var u=0,f=a.length;u<f;u++)a[u].reverse()},s.Clipper.Orientation=function(a){return s.Clipper.Area(a)>=0},s.Clipper.prototype.PointCount=function(a){if(a===null)return 0;var u=0,f=a;do u++,f=f.Next;while(f!==a);return u},s.Clipper.prototype.BuildResult=function(a){s.Clear(a);for(var u=0,f=this.m_PolyOuts.length;u<f;u++){var g=this.m_PolyOuts[u];if(g.Pts!==null){var S=g.Pts.Prev,b=this.PointCount(S);if(!(b<2)){for(var T=new Array(b),E=0;E<b;E++)T[E]=S.Pt,S=S.Prev;a.push(T)}}}},s.Clipper.prototype.BuildResult2=function(a){a.Clear();for(var u=0,f=this.m_PolyOuts.length;u<f;u++){var g=this.m_PolyOuts[u],S=this.PointCount(g.Pts);if(!(g.IsOpen&&S<2||!g.IsOpen&&S<3)){this.FixHoleLinkage(g);var b=new s.PolyNode;a.m_AllPolys.push(b),g.PolyNode=b,b.m_polygon.length=S;for(var T=g.Pts.Prev,E=0;E<S;E++)b.m_polygon[E]=T.Pt,T=T.Prev}}for(var u=0,f=this.m_PolyOuts.length;u<f;u++){var g=this.m_PolyOuts[u];g.PolyNode!==null&&(g.IsOpen?(g.PolyNode.IsOpen=!0,a.AddChild(g.PolyNode)):g.FirstLeft!==null&&g.FirstLeft.PolyNode!==null?g.FirstLeft.PolyNode.AddChild(g.PolyNode):a.AddChild(g.PolyNode))}},s.Clipper.prototype.FixupOutPolyline=function(a){for(var u=a.Pts,f=u.Prev;u!==f;)if(u=u.Next,s.IntPoint.op_Equality(u.Pt,u.Prev.Pt)){u===f&&(f=u.Prev);var g=u.Prev;g.Next=u.Next,u.Next.Prev=g,u=g}u===u.Prev&&(a.Pts=null)},s.Clipper.prototype.FixupOutPolygon=function(a){var u=null;a.BottomPt=null;for(var f=a.Pts,g=this.PreserveCollinear||this.StrictlySimple;;){if(f.Prev===f||f.Prev===f.Next){a.Pts=null;return}if(s.IntPoint.op_Equality(f.Pt,f.Next.Pt)||s.IntPoint.op_Equality(f.Pt,f.Prev.Pt)||s.ClipperBase.SlopesEqual4(f.Prev.Pt,f.Pt,f.Next.Pt,this.m_UseFullRange)&&(!g||!this.Pt2IsBetweenPt1AndPt3(f.Prev.Pt,f.Pt,f.Next.Pt)))u=null,f.Prev.Next=f.Next,f.Next.Prev=f.Prev,f=f.Prev;else{if(f===u)break;u===null&&(u=f),f=f.Next}}a.Pts=f},s.Clipper.prototype.DupOutPt=function(a,u){var f=new s.OutPt;return f.Pt.X=a.Pt.X,f.Pt.Y=a.Pt.Y,s.use_xyz&&(f.Pt.Z=a.Pt.Z),f.Idx=a.Idx,u?(f.Next=a.Next,f.Prev=a,a.Next.Prev=f,a.Next=f):(f.Prev=a.Prev,f.Next=a,a.Prev.Next=f,a.Prev=f),f},s.Clipper.prototype.GetOverlap=function(a,u,f,g,S){return a<u?f<g?(S.Left=Math.max(a,f),S.Right=Math.min(u,g)):(S.Left=Math.max(a,g),S.Right=Math.min(u,f)):f<g?(S.Left=Math.max(u,f),S.Right=Math.min(a,g)):(S.Left=Math.max(u,g),S.Right=Math.min(a,f)),S.Left<S.Right},s.Clipper.prototype.JoinHorz=function(a,u,f,g,S,b){var T=a.Pt.X>u.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight,E=f.Pt.X>g.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight;if(T===E)return!1;if(T===s.Direction.dLeftToRight){for(;a.Next.Pt.X<=S.X&&a.Next.Pt.X>=a.Pt.X&&a.Next.Pt.Y===S.Y;)a=a.Next;b&&a.Pt.X!==S.X&&(a=a.Next),u=this.DupOutPt(a,!b),s.IntPoint.op_Inequality(u.Pt,S)&&(a=u,a.Pt.X=S.X,a.Pt.Y=S.Y,s.use_xyz&&(a.Pt.Z=S.Z),u=this.DupOutPt(a,!b))}else{for(;a.Next.Pt.X>=S.X&&a.Next.Pt.X<=a.Pt.X&&a.Next.Pt.Y===S.Y;)a=a.Next;!b&&a.Pt.X!==S.X&&(a=a.Next),u=this.DupOutPt(a,b),s.IntPoint.op_Inequality(u.Pt,S)&&(a=u,a.Pt.X=S.X,a.Pt.Y=S.Y,s.use_xyz&&(a.Pt.Z=S.Z),u=this.DupOutPt(a,b))}if(E===s.Direction.dLeftToRight){for(;f.Next.Pt.X<=S.X&&f.Next.Pt.X>=f.Pt.X&&f.Next.Pt.Y===S.Y;)f=f.Next;b&&f.Pt.X!==S.X&&(f=f.Next),g=this.DupOutPt(f,!b),s.IntPoint.op_Inequality(g.Pt,S)&&(f=g,f.Pt.X=S.X,f.Pt.Y=S.Y,s.use_xyz&&(f.Pt.Z=S.Z),g=this.DupOutPt(f,!b))}else{for(;f.Next.Pt.X>=S.X&&f.Next.Pt.X<=f.Pt.X&&f.Next.Pt.Y===S.Y;)f=f.Next;!b&&f.Pt.X!==S.X&&(f=f.Next),g=this.DupOutPt(f,b),s.IntPoint.op_Inequality(g.Pt,S)&&(f=g,f.Pt.X=S.X,f.Pt.Y=S.Y,s.use_xyz&&(f.Pt.Z=S.Z),g=this.DupOutPt(f,b))}return T===s.Direction.dLeftToRight===b?(a.Prev=f,f.Next=a,u.Next=g,g.Prev=u):(a.Next=f,f.Prev=a,u.Prev=g,g.Next=u),!0},s.Clipper.prototype.JoinPoints=function(a,u,f){var g=a.OutPt1,S=new s.OutPt,b=a.OutPt2,T=new s.OutPt,E=a.OutPt1.Pt.Y===a.OffPt.Y;if(E&&s.IntPoint.op_Equality(a.OffPt,a.OutPt1.Pt)&&s.IntPoint.op_Equality(a.OffPt,a.OutPt2.Pt)){if(u!==f)return!1;for(S=a.OutPt1.Next;S!==g&&s.IntPoint.op_Equality(S.Pt,a.OffPt);)S=S.Next;var k=S.Pt.Y>a.OffPt.Y;for(T=a.OutPt2.Next;T!==b&&s.IntPoint.op_Equality(T.Pt,a.OffPt);)T=T.Next;var L=T.Pt.Y>a.OffPt.Y;return k===L?!1:k?(S=this.DupOutPt(g,!1),T=this.DupOutPt(b,!0),g.Prev=b,b.Next=g,S.Next=T,T.Prev=S,a.OutPt1=g,a.OutPt2=S,!0):(S=this.DupOutPt(g,!0),T=this.DupOutPt(b,!1),g.Next=b,b.Prev=g,S.Prev=T,T.Next=S,a.OutPt1=g,a.OutPt2=S,!0)}else if(E){for(S=g;g.Prev.Pt.Y===g.Pt.Y&&g.Prev!==S&&g.Prev!==b;)g=g.Prev;for(;S.Next.Pt.Y===S.Pt.Y&&S.Next!==g&&S.Next!==b;)S=S.Next;if(S.Next===g||S.Next===b)return!1;for(T=b;b.Prev.Pt.Y===b.Pt.Y&&b.Prev!==T&&b.Prev!==S;)b=b.Prev;for(;T.Next.Pt.Y===T.Pt.Y&&T.Next!==b&&T.Next!==g;)T=T.Next;if(T.Next===b||T.Next===g)return!1;var W={Left:null,Right:null};if(!this.GetOverlap(g.Pt.X,S.Pt.X,b.Pt.X,T.Pt.X,W))return!1;var M=W.Left,V=W.Right,it=new s.IntPoint0,at;return g.Pt.X>=M&&g.Pt.X<=V?(it.X=g.Pt.X,it.Y=g.Pt.Y,s.use_xyz&&(it.Z=g.Pt.Z),at=g.Pt.X>S.Pt.X):b.Pt.X>=M&&b.Pt.X<=V?(it.X=b.Pt.X,it.Y=b.Pt.Y,s.use_xyz&&(it.Z=b.Pt.Z),at=b.Pt.X>T.Pt.X):S.Pt.X>=M&&S.Pt.X<=V?(it.X=S.Pt.X,it.Y=S.Pt.Y,s.use_xyz&&(it.Z=S.Pt.Z),at=S.Pt.X>g.Pt.X):(it.X=T.Pt.X,it.Y=T.Pt.Y,s.use_xyz&&(it.Z=T.Pt.Z),at=T.Pt.X>b.Pt.X),a.OutPt1=g,a.OutPt2=b,this.JoinHorz(g,S,b,T,it,at)}else{for(S=g.Next;s.IntPoint.op_Equality(S.Pt,g.Pt)&&S!==g;)S=S.Next;var ut=S.Pt.Y>g.Pt.Y||!s.ClipperBase.SlopesEqual4(g.Pt,S.Pt,a.OffPt,this.m_UseFullRange);if(ut){for(S=g.Prev;s.IntPoint.op_Equality(S.Pt,g.Pt)&&S!==g;)S=S.Prev;if(S.Pt.Y>g.Pt.Y||!s.ClipperBase.SlopesEqual4(g.Pt,S.Pt,a.OffPt,this.m_UseFullRange))return!1}for(T=b.Next;s.IntPoint.op_Equality(T.Pt,b.Pt)&&T!==b;)T=T.Next;var xt=T.Pt.Y>b.Pt.Y||!s.ClipperBase.SlopesEqual4(b.Pt,T.Pt,a.OffPt,this.m_UseFullRange);if(xt){for(T=b.Prev;s.IntPoint.op_Equality(T.Pt,b.Pt)&&T!==b;)T=T.Prev;if(T.Pt.Y>b.Pt.Y||!s.ClipperBase.SlopesEqual4(b.Pt,T.Pt,a.OffPt,this.m_UseFullRange))return!1}return S===g||T===b||S===T||u===f&&ut===xt?!1:ut?(S=this.DupOutPt(g,!1),T=this.DupOutPt(b,!0),g.Prev=b,b.Next=g,S.Next=T,T.Prev=S,a.OutPt1=g,a.OutPt2=S,!0):(S=this.DupOutPt(g,!0),T=this.DupOutPt(b,!1),g.Next=b,b.Prev=g,S.Prev=T,T.Next=S,a.OutPt1=g,a.OutPt2=S,!0)}},s.Clipper.GetBounds=function(a){for(var u=0,f=a.length;u<f&&a[u].length===0;)u++;if(u===f)return new s.IntRect(0,0,0,0);var g=new s.IntRect;for(g.left=a[u][0].X,g.right=g.left,g.top=a[u][0].Y,g.bottom=g.top;u<f;u++)for(var S=0,b=a[u].length;S<b;S++)a[u][S].X<g.left?g.left=a[u][S].X:a[u][S].X>g.right&&(g.right=a[u][S].X),a[u][S].Y<g.top?g.top=a[u][S].Y:a[u][S].Y>g.bottom&&(g.bottom=a[u][S].Y);return g},s.Clipper.prototype.GetBounds2=function(a){var u=a,f=new s.IntRect;for(f.left=a.Pt.X,f.right=a.Pt.X,f.top=a.Pt.Y,f.bottom=a.Pt.Y,a=a.Next;a!==u;)a.Pt.X<f.left&&(f.left=a.Pt.X),a.Pt.X>f.right&&(f.right=a.Pt.X),a.Pt.Y<f.top&&(f.top=a.Pt.Y),a.Pt.Y>f.bottom&&(f.bottom=a.Pt.Y),a=a.Next;return f},s.Clipper.PointInPolygon=function(a,u){var f=0,g=u.length;if(g<3)return 0;for(var S=u[0],b=1;b<=g;++b){var T=b===g?u[0]:u[b];if(T.Y===a.Y&&(T.X===a.X||S.Y===a.Y&&T.X>a.X==S.X<a.X))return-1;if(S.Y<a.Y!=T.Y<a.Y){if(S.X>=a.X)if(T.X>a.X)f=1-f;else{var E=(S.X-a.X)*(T.Y-a.Y)-(T.X-a.X)*(S.Y-a.Y);if(E===0)return-1;E>0==T.Y>S.Y&&(f=1-f)}else if(T.X>a.X){var E=(S.X-a.X)*(T.Y-a.Y)-(T.X-a.X)*(S.Y-a.Y);if(E===0)return-1;E>0==T.Y>S.Y&&(f=1-f)}}S=T}return f},s.Clipper.prototype.PointInPolygon=function(a,u){var f=0,g=u,S=a.X,b=a.Y,T=u.Pt.X,E=u.Pt.Y;do{u=u.Next;var k=u.Pt.X,L=u.Pt.Y;if(L===b&&(k===S||E===b&&k>S==T<S))return-1;if(E<b!=L<b){if(T>=S)if(k>S)f=1-f;else{var W=(T-S)*(L-b)-(k-S)*(E-b);if(W===0)return-1;W>0==L>E&&(f=1-f)}else if(k>S){var W=(T-S)*(L-b)-(k-S)*(E-b);if(W===0)return-1;W>0==L>E&&(f=1-f)}}T=k,E=L}while(g!==u);return f},s.Clipper.prototype.Poly2ContainsPoly1=function(a,u){var f=a;do{var g=this.PointInPolygon(f.Pt,u);if(g>=0)return g>0;f=f.Next}while(f!==a);return!0},s.Clipper.prototype.FixupFirstLefts1=function(a,u){for(var f,g,S=0,b=this.m_PolyOuts.length;S<b;S++)f=this.m_PolyOuts[S],g=s.Clipper.ParseFirstLeft(f.FirstLeft),f.Pts!==null&&g===a&&this.Poly2ContainsPoly1(f.Pts,u.Pts)&&(f.FirstLeft=u)},s.Clipper.prototype.FixupFirstLefts2=function(a,u){for(var f=u.FirstLeft,g,S,b=0,T=this.m_PolyOuts.length;b<T;b++)g=this.m_PolyOuts[b],!(g.Pts===null||g===u||g===a)&&(S=s.Clipper.ParseFirstLeft(g.FirstLeft),!(S!==f&&S!==a&&S!==u)&&(this.Poly2ContainsPoly1(g.Pts,a.Pts)?g.FirstLeft=a:this.Poly2ContainsPoly1(g.Pts,u.Pts)?g.FirstLeft=u:(g.FirstLeft===a||g.FirstLeft===u)&&(g.FirstLeft=f)))},s.Clipper.prototype.FixupFirstLefts3=function(a,u){for(var f,g,S=0,b=this.m_PolyOuts.length;S<b;S++)f=this.m_PolyOuts[S],g=s.Clipper.ParseFirstLeft(f.FirstLeft),f.Pts!==null&&g===a&&(f.FirstLeft=u)},s.Clipper.ParseFirstLeft=function(a){for(;a!==null&&a.Pts===null;)a=a.FirstLeft;return a},s.Clipper.prototype.JoinCommonEdges=function(){for(var a=0,u=this.m_Joins.length;a<u;a++){var f=this.m_Joins[a],g=this.GetOutRec(f.OutPt1.Idx),S=this.GetOutRec(f.OutPt2.Idx);if(!(g.Pts===null||S.Pts===null)&&!(g.IsOpen||S.IsOpen)){var b;g===S?b=g:this.OutRec1RightOfOutRec2(g,S)?b=S:this.OutRec1RightOfOutRec2(S,g)?b=g:b=this.GetLowermostRec(g,S),this.JoinPoints(f,g,S)&&(g===S?(g.Pts=f.OutPt1,g.BottomPt=null,S=this.CreateOutRec(),S.Pts=f.OutPt2,this.UpdateOutPtIdxs(S),this.Poly2ContainsPoly1(S.Pts,g.Pts)?(S.IsHole=!g.IsHole,S.FirstLeft=g,this.m_UsingPolyTree&&this.FixupFirstLefts2(S,g),(S.IsHole^this.ReverseSolution)==this.Area$1(S)>0&&this.ReversePolyPtLinks(S.Pts)):this.Poly2ContainsPoly1(g.Pts,S.Pts)?(S.IsHole=g.IsHole,g.IsHole=!S.IsHole,S.FirstLeft=g.FirstLeft,g.FirstLeft=S,this.m_UsingPolyTree&&this.FixupFirstLefts2(g,S),(g.IsHole^this.ReverseSolution)==this.Area$1(g)>0&&this.ReversePolyPtLinks(g.Pts)):(S.IsHole=g.IsHole,S.FirstLeft=g.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(g,S))):(S.Pts=null,S.BottomPt=null,S.Idx=g.Idx,g.IsHole=b.IsHole,b===S&&(g.FirstLeft=S.FirstLeft),S.FirstLeft=g,this.m_UsingPolyTree&&this.FixupFirstLefts3(S,g)))}}},s.Clipper.prototype.UpdateOutPtIdxs=function(a){var u=a.Pts;do u.Idx=a.Idx,u=u.Prev;while(u!==a.Pts)},s.Clipper.prototype.DoSimplePolygons=function(){for(var a=0;a<this.m_PolyOuts.length;){var u=this.m_PolyOuts[a++],f=u.Pts;if(!(f===null||u.IsOpen))do{for(var g=f.Next;g!==u.Pts;){if(s.IntPoint.op_Equality(f.Pt,g.Pt)&&g.Next!==f&&g.Prev!==f){var S=f.Prev,b=g.Prev;f.Prev=b,b.Next=f,g.Prev=S,S.Next=g,u.Pts=f;var T=this.CreateOutRec();T.Pts=g,this.UpdateOutPtIdxs(T),this.Poly2ContainsPoly1(T.Pts,u.Pts)?(T.IsHole=!u.IsHole,T.FirstLeft=u,this.m_UsingPolyTree&&this.FixupFirstLefts2(T,u)):this.Poly2ContainsPoly1(u.Pts,T.Pts)?(T.IsHole=u.IsHole,u.IsHole=!T.IsHole,T.FirstLeft=u.FirstLeft,u.FirstLeft=T,this.m_UsingPolyTree&&this.FixupFirstLefts2(u,T)):(T.IsHole=u.IsHole,T.FirstLeft=u.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(u,T)),g=f}g=g.Next}f=f.Next}while(f!==u.Pts)}},s.Clipper.Area=function(a){if(!Array.isArray(a))return 0;var u=a.length;if(u<3)return 0;for(var f=0,g=0,S=u-1;g<u;++g)f+=(a[S].X+a[g].X)*(a[S].Y-a[g].Y),S=g;return-f*.5},s.Clipper.prototype.Area=function(a){var u=a;if(a===null)return 0;var f=0;do f=f+(a.Prev.Pt.X+a.Pt.X)*(a.Prev.Pt.Y-a.Pt.Y),a=a.Next;while(a!==u);return f*.5},s.Clipper.prototype.Area$1=function(a){return this.Area(a.Pts)},s.Clipper.SimplifyPolygon=function(a,u){var f=new Array,g=new s.Clipper(0);return g.StrictlySimple=!0,g.AddPath(a,s.PolyType.ptSubject,!0),g.Execute(s.ClipType.ctUnion,f,u,u),f},s.Clipper.SimplifyPolygons=function(a,u){typeof u>"u"&&(u=s.PolyFillType.pftEvenOdd);var f=new Array,g=new s.Clipper(0);return g.StrictlySimple=!0,g.AddPaths(a,s.PolyType.ptSubject,!0),g.Execute(s.ClipType.ctUnion,f,u,u),f},s.Clipper.DistanceSqrd=function(a,u){var f=a.X-u.X,g=a.Y-u.Y;return f*f+g*g},s.Clipper.DistanceFromLineSqrd=function(a,u,f){var g=u.Y-f.Y,S=f.X-u.X,b=g*u.X+S*u.Y;return b=g*a.X+S*a.Y-b,b*b/(g*g+S*S)},s.Clipper.SlopesNearCollinear=function(a,u,f,g){return Math.abs(a.X-u.X)>Math.abs(a.Y-u.Y)?a.X>u.X==a.X<f.X?s.Clipper.DistanceFromLineSqrd(a,u,f)<g:u.X>a.X==u.X<f.X?s.Clipper.DistanceFromLineSqrd(u,a,f)<g:s.Clipper.DistanceFromLineSqrd(f,a,u)<g:a.Y>u.Y==a.Y<f.Y?s.Clipper.DistanceFromLineSqrd(a,u,f)<g:u.Y>a.Y==u.Y<f.Y?s.Clipper.DistanceFromLineSqrd(u,a,f)<g:s.Clipper.DistanceFromLineSqrd(f,a,u)<g},s.Clipper.PointsAreClose=function(a,u,f){var g=a.X-u.X,S=a.Y-u.Y;return g*g+S*S<=f},s.Clipper.ExcludeOp=function(a){var u=a.Prev;return u.Next=a.Next,a.Next.Prev=u,u.Idx=0,u},s.Clipper.CleanPolygon=function(a,u){typeof u>"u"&&(u=1.415);var f=a.length;if(f===0)return new Array;for(var g=new Array(f),S=0;S<f;++S)g[S]=new s.OutPt;for(var S=0;S<f;++S)g[S].Pt=a[S],g[S].Next=g[(S+1)%f],g[S].Next.Prev=g[S],g[S].Idx=0;for(var b=u*u,T=g[0];T.Idx===0&&T.Next!==T.Prev;)s.Clipper.PointsAreClose(T.Pt,T.Prev.Pt,b)?(T=s.Clipper.ExcludeOp(T),f--):s.Clipper.PointsAreClose(T.Prev.Pt,T.Next.Pt,b)?(s.Clipper.ExcludeOp(T.Next),T=s.Clipper.ExcludeOp(T),f-=2):s.Clipper.SlopesNearCollinear(T.Prev.Pt,T.Pt,T.Next.Pt,b)?(T=s.Clipper.ExcludeOp(T),f--):(T.Idx=1,T=T.Next);f<3&&(f=0);for(var E=new Array(f),S=0;S<f;++S)E[S]=new s.IntPoint1(T.Pt),T=T.Next;return g=null,E},s.Clipper.CleanPolygons=function(a,u){for(var f=new Array(a.length),g=0,S=a.length;g<S;g++)f[g]=s.Clipper.CleanPolygon(a[g],u);return f},s.Clipper.Minkowski=function(a,u,f,g){var S=g?1:0,b=a.length,T=u.length,E=new Array;if(f)for(var k=0;k<T;k++){for(var L=new Array(b),W=0,M=a.length,V=a[W];W<M;W++,V=a[W])L[W]=new s.IntPoint2(u[k].X+V.X,u[k].Y+V.Y);E.push(L)}else for(var k=0;k<T;k++){for(var L=new Array(b),W=0,M=a.length,V=a[W];W<M;W++,V=a[W])L[W]=new s.IntPoint2(u[k].X-V.X,u[k].Y-V.Y);E.push(L)}for(var it=new Array,k=0;k<T-1+S;k++)for(var W=0;W<b;W++){var at=new Array;at.push(E[k%T][W%b]),at.push(E[(k+1)%T][W%b]),at.push(E[(k+1)%T][(W+1)%b]),at.push(E[k%T][(W+1)%b]),s.Clipper.Orientation(at)||at.reverse(),it.push(at)}return it},s.Clipper.MinkowskiSum=function(a,u,f){if(u[0]instanceof Array){for(var S=u,T=new s.Paths,b=new s.Clipper,E=0;E<S.length;++E){var k=s.Clipper.Minkowski(a,S[E],!0,f);if(b.AddPaths(k,s.PolyType.ptSubject,!0),f){var g=s.Clipper.TranslatePath(S[E],a[0]);b.AddPath(g,s.PolyType.ptClip,!0)}}return b.Execute(s.ClipType.ctUnion,T,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),T}else{var g=u,S=s.Clipper.Minkowski(a,g,!0,f),b=new s.Clipper;return b.AddPaths(S,s.PolyType.ptSubject,!0),b.Execute(s.ClipType.ctUnion,S,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),S}},s.Clipper.TranslatePath=function(a,u){for(var f=new s.Path,g=0;g<a.length;g++)f.push(new s.IntPoint2(a[g].X+u.X,a[g].Y+u.Y));return f},s.Clipper.MinkowskiDiff=function(a,u){var f=s.Clipper.Minkowski(a,u,!1,!0),g=new s.Clipper;return g.AddPaths(f,s.PolyType.ptSubject,!0),g.Execute(s.ClipType.ctUnion,f,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),f},s.Clipper.PolyTreeToPaths=function(a){var u=new Array;return s.Clipper.AddPolyNodeToPaths(a,s.Clipper.NodeType.ntAny,u),u},s.Clipper.AddPolyNodeToPaths=function(a,u,f){var g=!0;switch(u){case s.Clipper.NodeType.ntOpen:return;case s.Clipper.NodeType.ntClosed:g=!a.IsOpen;break}a.m_polygon.length>0&&g&&f.push(a.m_polygon);for(var S=0,b=a.Childs(),T=b.length,E=b[S];S<T;S++,E=b[S])s.Clipper.AddPolyNodeToPaths(E,u,f)},s.Clipper.OpenPathsFromPolyTree=function(a){for(var u=new s.Paths,f=0,g=a.ChildCount();f<g;f++)a.Childs()[f].IsOpen&&u.push(a.Childs()[f].m_polygon);return u},s.Clipper.ClosedPathsFromPolyTree=function(a){var u=new s.Paths;return s.Clipper.AddPolyNodeToPaths(a,s.Clipper.NodeType.ntClosed,u),u},Pa(s.Clipper,s.ClipperBase),s.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},s.ClipperOffset=function(a,u){typeof a>"u"&&(a=2),typeof u>"u"&&(u=s.ClipperOffset.def_arc_tolerance),this.m_destPolys=new s.Paths,this.m_srcPoly=new s.Path,this.m_destPoly=new s.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new s.IntPoint0,this.m_polyNodes=new s.PolyNode,this.MiterLimit=a,this.ArcTolerance=u,this.m_lowest.X=-1},s.ClipperOffset.two_pi=6.28318530717959,s.ClipperOffset.def_arc_tolerance=.25,s.ClipperOffset.prototype.Clear=function(){s.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},s.ClipperOffset.Round=s.Clipper.Round,s.ClipperOffset.prototype.AddPath=function(a,u,f){var g=a.length-1;if(!(g<0)){var S=new s.PolyNode;if(S.m_jointype=u,S.m_endtype=f,f===s.EndType.etClosedLine||f===s.EndType.etClosedPolygon)for(;g>0&&s.IntPoint.op_Equality(a[0],a[g]);)g--;S.m_polygon.push(a[0]);for(var b=0,T=0,E=1;E<=g;E++)s.IntPoint.op_Inequality(S.m_polygon[b],a[E])&&(b++,S.m_polygon.push(a[E]),(a[E].Y>S.m_polygon[T].Y||a[E].Y===S.m_polygon[T].Y&&a[E].X<S.m_polygon[T].X)&&(T=b));if(!(f===s.EndType.etClosedPolygon&&b<2)&&(this.m_polyNodes.AddChild(S),f===s.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,T);else{var k=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(S.m_polygon[T].Y>k.Y||S.m_polygon[T].Y===k.Y&&S.m_polygon[T].X<k.X)&&(this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,T))}}},s.ClipperOffset.prototype.AddPaths=function(a,u,f){for(var g=0,S=a.length;g<S;g++)this.AddPath(a[g],u,f)},s.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!s.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var a=0;a<this.m_polyNodes.ChildCount();a++){var u=this.m_polyNodes.Childs()[a];(u.m_endtype===s.EndType.etClosedPolygon||u.m_endtype===s.EndType.etClosedLine&&s.Clipper.Orientation(u.m_polygon))&&u.m_polygon.reverse()}else for(var a=0;a<this.m_polyNodes.ChildCount();a++){var u=this.m_polyNodes.Childs()[a];u.m_endtype===s.EndType.etClosedLine&&!s.Clipper.Orientation(u.m_polygon)&&u.m_polygon.reverse()}},s.ClipperOffset.GetUnitNormal=function(a,u){var f=u.X-a.X,g=u.Y-a.Y;if(f===0&&g===0)return new s.DoublePoint2(0,0);var S=1/Math.sqrt(f*f+g*g);return f*=S,g*=S,new s.DoublePoint2(g,-f)},s.ClipperOffset.prototype.DoOffset=function(a){if(this.m_destPolys=new Array,this.m_delta=a,s.ClipperBase.near_zero(a)){for(var u=0;u<this.m_polyNodes.ChildCount();u++){var f=this.m_polyNodes.Childs()[u];f.m_endtype===s.EndType.etClosedPolygon&&this.m_destPolys.push(f.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var g;this.ArcTolerance<=0?g=s.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(a)*s.ClipperOffset.def_arc_tolerance?g=Math.abs(a)*s.ClipperOffset.def_arc_tolerance:g=this.ArcTolerance;var S=3.14159265358979/Math.acos(1-g/Math.abs(a));this.m_sin=Math.sin(s.ClipperOffset.two_pi/S),this.m_cos=Math.cos(s.ClipperOffset.two_pi/S),this.m_StepsPerRad=S/s.ClipperOffset.two_pi,a<0&&(this.m_sin=-this.m_sin);for(var u=0;u<this.m_polyNodes.ChildCount();u++){var f=this.m_polyNodes.Childs()[u];this.m_srcPoly=f.m_polygon;var b=this.m_srcPoly.length;if(!(b===0||a<=0&&(b<3||f.m_endtype!==s.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,b===1){if(f.m_jointype===s.JoinType.jtRound)for(var T=1,E=0,k=1;k<=S;k++){this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+T*a),s.ClipperOffset.Round(this.m_srcPoly[0].Y+E*a)));var L=T;T=T*this.m_cos-this.m_sin*E,E=L*this.m_sin+E*this.m_cos}else for(var T=-1,E=-1,k=0;k<4;++k)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+T*a),s.ClipperOffset.Round(this.m_srcPoly[0].Y+E*a))),T<0?T=1:E<0?E=1:T=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var k=0;k<b-1;k++)this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[k],this.m_srcPoly[k+1]));if(f.m_endtype===s.EndType.etClosedLine||f.m_endtype===s.EndType.etClosedPolygon?this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[b-1],this.m_srcPoly[0])):this.m_normals.push(new s.DoublePoint1(this.m_normals[b-2])),f.m_endtype===s.EndType.etClosedPolygon){for(var W=b-1,k=0;k<b;k++)W=this.OffsetPoint(k,W,f.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(f.m_endtype===s.EndType.etClosedLine){for(var W=b-1,k=0;k<b;k++)W=this.OffsetPoint(k,W,f.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var M=this.m_normals[b-1],k=b-1;k>0;k--)this.m_normals[k]=new s.DoublePoint2(-this.m_normals[k-1].X,-this.m_normals[k-1].Y);this.m_normals[0]=new s.DoublePoint2(-M.X,-M.Y),W=0;for(var k=b-1;k>=0;k--)W=this.OffsetPoint(k,W,f.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var W=0,k=1;k<b-1;++k)W=this.OffsetPoint(k,W,f.m_jointype);var V;if(f.m_endtype===s.EndType.etOpenButt){var k=b-1;V=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[k].X+this.m_normals[k].X*a),s.ClipperOffset.Round(this.m_srcPoly[k].Y+this.m_normals[k].Y*a)),this.m_destPoly.push(V),V=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[k].X-this.m_normals[k].X*a),s.ClipperOffset.Round(this.m_srcPoly[k].Y-this.m_normals[k].Y*a)),this.m_destPoly.push(V)}else{var k=b-1;W=b-2,this.m_sinA=0,this.m_normals[k]=new s.DoublePoint2(-this.m_normals[k].X,-this.m_normals[k].Y),f.m_endtype===s.EndType.etOpenSquare?this.DoSquare(k,W):this.DoRound(k,W)}for(var k=b-1;k>0;k--)this.m_normals[k]=new s.DoublePoint2(-this.m_normals[k-1].X,-this.m_normals[k-1].Y);this.m_normals[0]=new s.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),W=b-1;for(var k=W-1;k>0;--k)W=this.OffsetPoint(k,W,f.m_jointype);f.m_endtype===s.EndType.etOpenButt?(V=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*a),s.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*a)),this.m_destPoly.push(V),V=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*a),s.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*a)),this.m_destPoly.push(V)):(W=1,this.m_sinA=0,f.m_endtype===s.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},s.ClipperOffset.prototype.Execute=function(){var a=arguments,u=a[0]instanceof s.PolyTree;if(u){var f=a[0],g=a[1];f.Clear(),this.FixOrientations(),this.DoOffset(g);var S=new s.Clipper(0);if(S.AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),g>0)S.Execute(s.ClipType.ctUnion,f,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var b=s.Clipper.GetBounds(this.m_destPolys),T=new s.Path;if(T.push(new s.IntPoint2(b.left-10,b.bottom+10)),T.push(new s.IntPoint2(b.right+10,b.bottom+10)),T.push(new s.IntPoint2(b.right+10,b.top-10)),T.push(new s.IntPoint2(b.left-10,b.top-10)),S.AddPath(T,s.PolyType.ptSubject,!0),S.ReverseSolution=!0,S.Execute(s.ClipType.ctUnion,f,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),f.ChildCount()===1&&f.Childs()[0].ChildCount()>0){var E=f.Childs()[0];f.Childs()[0]=E.Childs()[0],f.Childs()[0].m_Parent=f;for(var k=1;k<E.ChildCount();k++)f.AddChild(E.Childs()[k])}else f.Clear()}}else{var f=a[0],g=a[1];s.Clear(f),this.FixOrientations(),this.DoOffset(g);var S=new s.Clipper(0);if(S.AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),g>0)S.Execute(s.ClipType.ctUnion,f,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var b=s.Clipper.GetBounds(this.m_destPolys),T=new s.Path;T.push(new s.IntPoint2(b.left-10,b.bottom+10)),T.push(new s.IntPoint2(b.right+10,b.bottom+10)),T.push(new s.IntPoint2(b.right+10,b.top-10)),T.push(new s.IntPoint2(b.left-10,b.top-10)),S.AddPath(T,s.PolyType.ptSubject,!0),S.ReverseSolution=!0,S.Execute(s.ClipType.ctUnion,f,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),f.length>0&&f.splice(0,1)}}},s.ClipperOffset.prototype.OffsetPoint=function(a,u,f){if(this.m_sinA=this.m_normals[u].X*this.m_normals[a].Y-this.m_normals[a].X*this.m_normals[u].Y,Math.abs(this.m_sinA*this.m_delta)<1){var g=this.m_normals[u].X*this.m_normals[a].X+this.m_normals[a].Y*this.m_normals[u].Y;if(g>0)return this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[u].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[u].Y*this.m_delta))),u}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[u].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[u].Y*this.m_delta))),this.m_destPoly.push(new s.IntPoint1(this.m_srcPoly[a])),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[a].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[a].Y*this.m_delta)));else switch(f){case s.JoinType.jtMiter:{var S=1+(this.m_normals[a].X*this.m_normals[u].X+this.m_normals[a].Y*this.m_normals[u].Y);S>=this.m_miterLim?this.DoMiter(a,u,S):this.DoSquare(a,u);break}case s.JoinType.jtSquare:this.DoSquare(a,u);break;case s.JoinType.jtRound:this.DoRound(a,u);break}return u=a,u},s.ClipperOffset.prototype.DoSquare=function(a,u){var f=Math.tan(Math.atan2(this.m_sinA,this.m_normals[u].X*this.m_normals[a].X+this.m_normals[u].Y*this.m_normals[a].Y)/4);this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_delta*(this.m_normals[u].X-this.m_normals[u].Y*f)),s.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_delta*(this.m_normals[u].Y+this.m_normals[u].X*f)))),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_delta*(this.m_normals[a].X+this.m_normals[a].Y*f)),s.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_delta*(this.m_normals[a].Y-this.m_normals[a].X*f))))},s.ClipperOffset.prototype.DoMiter=function(a,u,f){var g=this.m_delta/f;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+(this.m_normals[u].X+this.m_normals[a].X)*g),s.ClipperOffset.Round(this.m_srcPoly[a].Y+(this.m_normals[u].Y+this.m_normals[a].Y)*g)))},s.ClipperOffset.prototype.DoRound=function(a,u){for(var f=Math.atan2(this.m_sinA,this.m_normals[u].X*this.m_normals[a].X+this.m_normals[u].Y*this.m_normals[a].Y),g=Math.max(s.Cast_Int32(s.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(f))),1),S=this.m_normals[u].X,b=this.m_normals[u].Y,T,E=0;E<g;++E)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+S*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[a].Y+b*this.m_delta))),T=S,S=S*this.m_cos-this.m_sin*b,b=T*this.m_sin+b*this.m_cos;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[a].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[a].Y*this.m_delta)))},s.Error=function(a){try{throw new Error(a)}catch(u){alert(u.message)}},s.JS={},s.JS.AreaOfPolygon=function(a,u){return u||(u=1),s.Clipper.Area(a)/(u*u)},s.JS.AreaOfPolygons=function(a,u){u||(u=1);for(var f=0,g=0;g<a.length;g++)f+=s.Clipper.Area(a[g]);return f/(u*u)},s.JS.BoundsOfPath=function(a,u){return s.JS.BoundsOfPaths([a],u)},s.JS.BoundsOfPaths=function(a,u){u||(u=1);var f=s.Clipper.GetBounds(a);return f.left/=u,f.bottom/=u,f.right/=u,f.top/=u,f},s.JS.Clean=function(g,u){if(!(g instanceof Array))return[];var f=g[0]instanceof Array,g=s.JS.Clone(g);if(typeof u!="number"||u===null)return s.Error("Delta is not a number in Clean()."),g;if(g.length===0||g.length===1&&g[0].length===0||u<0)return g;f||(g=[g]);for(var S=g.length,b,T,E,k,L,W,M,V=[],it=0;it<S;it++)if(T=g[it],b=T.length,b!==0){if(b<3){E=T,V.push(E);continue}for(E=T,k=u*u,L=T[0],W=1,M=1;M<b;M++)(T[M].X-L.X)*(T[M].X-L.X)+(T[M].Y-L.Y)*(T[M].Y-L.Y)<=k||(E[W]=T[M],L=T[M],W++);L=T[W-1],(T[0].X-L.X)*(T[0].X-L.X)+(T[0].Y-L.Y)*(T[0].Y-L.Y)<=k&&W--,W<b&&E.splice(W,b-W),E.length&&V.push(E)}return!f&&V.length?V=V[0]:!f&&V.length===0?V=[]:f&&V.length===0&&(V=[[]]),V},s.JS.Clone=function(a){if(!(a instanceof Array))return[];if(a.length===0)return[];if(a.length===1&&a[0].length===0)return[[]];var u=a[0]instanceof Array;u||(a=[a]);var f=a.length,g,S,b,T,E=new Array(f);for(S=0;S<f;S++){for(g=a[S].length,T=new Array(g),b=0;b<g;b++)T[b]={X:a[S][b].X,Y:a[S][b].Y};E[S]=T}return u||(E=E[0]),E},s.JS.Lighten=function(a,u){if(!(a instanceof Array))return[];if(typeof u!="number"||u===null)return s.Error("Tolerance is not a number in Lighten()."),s.JS.Clone(a);if(a.length===0||a.length===1&&a[0].length===0||u<0)return s.JS.Clone(a);var f=a[0]instanceof Array;f||(a=[a]);var g,S,b,T,E,k,L,W,M,V,it,at,ut,xt,he,Be,Ri,t0=a.length,e0=u*u,Yi=[];for(g=0;g<t0;g++)if(b=a[g],k=b.length,k!==0){for(T=0;T<1e6;T++){for(E=[],k=b.length,b[k-1].X!==b[0].X||b[k-1].Y!==b[0].Y?(at=1,b.push({X:b[0].X,Y:b[0].Y}),k=b.length):at=0,it=[],S=0;S<k-2;S++)L=b[S],M=b[S+1],W=b[S+2],Be=L.X,Ri=L.Y,ut=W.X-Be,xt=W.Y-Ri,(ut!==0||xt!==0)&&(he=((M.X-Be)*ut+(M.Y-Ri)*xt)/(ut*ut+xt*xt),he>1?(Be=W.X,Ri=W.Y):he>0&&(Be+=ut*he,Ri+=xt*he)),ut=M.X-Be,xt=M.Y-Ri,V=ut*ut+xt*xt,V<=e0&&(it[S+1]=1,S++);for(E.push({X:b[0].X,Y:b[0].Y}),S=1;S<k-1;S++)it[S]||E.push({X:b[S].X,Y:b[S].Y});if(E.push({X:b[k-1].X,Y:b[k-1].Y}),at&&b.pop(),it.length)b=E;else break}k=E.length,E[k-1].X===E[0].X&&E[k-1].Y===E[0].Y&&E.pop(),E.length>2&&Yi.push(E)}return f||(Yi=Yi[0]),typeof Yi>"u"&&(Yi=[]),Yi},s.JS.PerimeterOfPath=function(a,u,f){if(typeof a>"u")return 0;var g=Math.sqrt,S=0,b,T,E=0,k=0,L=0,W=0,M=a.length;if(M<2)return 0;for(u&&(a[M]=a[0],M++);--M;)b=a[M],E=b.X,k=b.Y,T=a[M-1],L=T.X,W=T.Y,S+=g((E-L)*(E-L)+(k-W)*(k-W));return u&&a.pop(),S/f},s.JS.PerimeterOfPaths=function(a,u,f){f||(f=1);for(var g=0,S=0;S<a.length;S++)g+=s.JS.PerimeterOfPath(a[S],u,f);return g},s.JS.ScaleDownPath=function(a,u){var f,g;for(u||(u=1),f=a.length;f--;)g=a[f],g.X=g.X/u,g.Y=g.Y/u},s.JS.ScaleDownPaths=function(a,u){var f,g,S;for(u||(u=1),f=a.length;f--;)for(g=a[f].length;g--;)S=a[f][g],S.X=S.X/u,S.Y=S.Y/u},s.JS.ScaleUpPath=function(a,u){var f,g,S=Math.round;for(u||(u=1),f=a.length;f--;)g=a[f],g.X=S(g.X*u),g.Y=S(g.Y*u)},s.JS.ScaleUpPaths=function(a,u){var f,g,S,b=Math.round;for(u||(u=1),f=a.length;f--;)for(g=a[f].length;g--;)S=a[f][g],S.X=b(S.X*u),S.Y=b(S.Y*u)},s.ExPolygons=function(){return[]},s.ExPolygon=function(){this.outer=null,this.holes=null},s.JS.AddOuterPolyNodeToExPolygons=function(a,u){var f=new s.ExPolygon;f.outer=a.Contour();var g=a.Childs(),S=g.length;f.holes=new Array(S);var b,T,E,k,L,W;for(E=0;E<S;E++)for(b=g[E],f.holes[E]=b.Contour(),k=0,L=b.Childs(),W=L.length;k<W;k++)T=L[k],s.JS.AddOuterPolyNodeToExPolygons(T,u);u.push(f)},s.JS.ExPolygonsToPaths=function(a){var u,f,g,S,b=new s.Paths;for(u=0,g=a.length;u<g;u++)for(b.push(a[u].outer),f=0,S=a[u].holes.length;f<S;f++)b.push(a[u].holes[f]);return b},s.JS.PolyTreeToExPolygons=function(a){var u=new s.ExPolygons,f,g,S,b;for(g=0,S=a.Childs(),b=S.length;g<b;g++)f=S[g],s.JS.AddOuterPolyNodeToExPolygons(f,u);return u}})()}),i("default",e),i("__esModule",!0)}}});sr.register("-/clipper-js@v1.0.2-Mou0diNPTgyilhisGDlW/dist=es2020/clipper-js",["-/clipper-lib@v6.4.2-JisZmmhC7gDAFmHQLYDu/dist=es2020/clipper-lib"],function(i,t){var e,n,r;t&&t.id;function o(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}function s(h,c,p){return p={path:c,exports:{},require:function(d,m){return l(d,m==null?p.path:m)}},h(p,p.exports),p.exports}function l(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}return{setters:[function(h){e=h}],execute:function(){n=s(function(h,c){Object.defineProperty(c,"__esModule",{value:!0}),c.setErrorCallback=void 0;var p=function(){function N(R,B){for(var Z=0;Z<B.length;Z++){var G=B[Z];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(R,G.key,G)}}return function(R,B,Z){return B&&N(R.prototype,B),Z&&N(R,Z),R}}(),d=m(e.default);function m(N){return N&&N.__esModule?N:{default:N}}function v(N){if(Array.isArray(N)){for(var R=0,B=Array(N.length);R<N.length;R++)B[R]=N[R];return B}else return Array.from(N)}function C(N,R){if(!(N instanceof R))throw new TypeError("Cannot call a class as a function")}var O=void 0;c.setErrorCallback=function(R){O=R},d.default.Error=function(N){O&&O(N)};var y=new d.default.Clipper,P=new d.default.ClipperOffset,w=function(){function N(){var R=arguments.length<=0||arguments[0]===void 0?[]:arguments[0],B=arguments.length<=1||arguments[1]===void 0?!0:arguments[1],Z=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],G=arguments.length<=3||arguments[3]===void 0?!1:arguments[3],nt=arguments.length<=4||arguments[4]===void 0?!1:arguments[4];C(this,N),this.paths=R,Z&&(this.paths=this.paths.map(_)),G&&(this.paths=this.paths.map(Q)),nt&&(this.paths=this.paths.map(j)),this.closed=B}return p(N,[{key:"_clip",value:function(B,Z){var G=new d.default.PolyTree;y.Clear(),y.AddPaths(this.paths,d.default.PolyType.ptSubject,this.closed),y.AddPaths(B.paths,d.default.PolyType.ptClip,B.closed),y.Execute(Z,G);var nt=d.default.Clipper.PolyTreeToPaths(G);return new N(nt,this.closed)}},{key:"union",value:function(B){return this._clip(B,d.default.ClipType.ctUnion)}},{key:"difference",value:function(B){return this._clip(B,d.default.ClipType.ctDifference)}},{key:"intersect",value:function(B){return this._clip(B,d.default.ClipType.ctIntersection)}},{key:"xor",value:function(B){return this._clip(B,d.default.ClipType.ctXor)}},{key:"offset",value:function(B){var Z=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],G=Z.jointType,nt=G===void 0?"jtSquare":G,ht=Z.endType,ot=ht===void 0?"etClosedPolygon":ht,pt=Z.miterLimit,Ot=pt===void 0?2:pt,yt=Z.roundPrecision,Dt=yt===void 0?.25:yt;P.Clear(),P.ArcTolerance=Dt,P.MiterLimit=Ot;var Ct=new d.default.Paths;return P.AddPaths(this.paths,d.default.JoinType[nt],d.default.EndType[ot]),P.Execute(Ct,B),new N(Ct,!0)}},{key:"scaleUp",value:function(B){return d.default.JS.ScaleUpPaths(this.paths,B),this}},{key:"scaleDown",value:function(B){return d.default.JS.ScaleDownPaths(this.paths,B),this}},{key:"firstPoint",value:function(){var B=arguments.length<=0||arguments[0]===void 0?!1:arguments[0];if(this.paths.length!==0){var Z=this.paths[0],G=Z[0];return B?A(G):G}}},{key:"lastPoint",value:function(){var B=arguments.length<=0||arguments[0]===void 0?!1:arguments[0];if(this.paths.length!==0){var Z=this.paths[this.paths.length-1],G=this.closed?Z[0]:Z[Z.length-1];return B?A(G):G}}},{key:"areas",value:function(){var B=this,Z=this.paths.map(function(G,nt){return B.area(nt)});return Z}},{key:"area",value:function(B){var Z=this.paths[B],G=d.default.Clipper.Area(Z);return G}},{key:"totalArea",value:function(){return this.areas().reduce(function(B,Z){return B+Z},0)}},{key:"perimeter",value:function(B){var Z=this.paths[B],G=d.default.JS.PerimeterOfPath(Z,this.closed,1);return G}},{key:"perimeters",value:function(){var B=this;return this.paths.map(function(Z){return d.default.JS.PerimeterOfPath(Z,B.closed,1)})}},{key:"totalPerimeter",value:function(){var B=d.default.JS.PerimeterOfPaths(this.paths,this.closed);return B}},{key:"reverse",value:function(){return d.default.Clipper.ReversePaths(this.paths),this}},{key:"thresholdArea",value:function(B){for(var Z=[].concat(v(this.paths)),G=0;G<Z.length;G++){var nt=Z[G],ht=Math.abs(d.default.Clipper.Area(shape));if(ht<B){var ot=this.paths.indexOf(nt);this.splice(ot,1)}}}},{key:"join",value:function(B){var Z;return(Z=this.paths).splice.apply(Z,[this.paths.length,0].concat(v(B.paths))),this}},{key:"clone",value:function(){return new N(d.default.JS.Clone(this.paths),this.closed)}},{key:"shapeBounds",value:function(){var B=d.default.JS.BoundsOfPaths(this.paths);return B.width=B.right-B.left,B.height=B.bottom-B.top,B.size=B.width*B.height,B}},{key:"pathBounds",value:function(B){var Z=this.paths[B],G=d.default.JS.BoundsOfPath(Z);return G.width=G.right-G.left,G.height=G.bottom-G.top,G.size=G.width*G.height,G}},{key:"clean",value:function(B){return new N(d.default.Clipper.CleanPolygons(this.paths,B),this.closed)}},{key:"orientation",value:function(B){var Z=this.paths[B];return d.default.Clipper.Orientation(Z)}},{key:"pointInShape",value:function(B){var Z=arguments.length<=1||arguments[1]===void 0?!1:arguments[1],G=arguments.length<=2||arguments[2]===void 0?!1:arguments[2];Z&&(B=I(B)),G&&(B=U(B));for(var nt=0;nt<this.paths.length;nt++){var ht=this.pointInPath(nt,B),ot=this.orientation(nt);if(!ht&&ot||ht&&!ot)return!1}return!0}},{key:"pointInPath",value:function(B,Z){var G=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],nt=arguments.length<=3||arguments[3]===void 0?!1:arguments[3];G&&(Z=I(Z)),nt&&(Z=U(Z));var ht=this.paths[B],ot={X:Math.round(Z.X),Y:Math.round(Z.Y)};return d.default.Clipper.PointInPolygon(ot,ht)>0}},{key:"fixOrientation",value:function(){return this.closed?(this.totalArea()<0&&this.reverse(),this):this}},{key:"removeOverlap",value:function(){console.warn("Shape.removeOverlap is being depricated, use Shape.simplify('pftNonZero') instead"),this.simplify("pftNonZero")}},{key:"simplify",value:function(B){if(this.closed){var Z=d.default.Clipper.SimplifyPolygons(this.paths,d.default.PolyFillType[B]);return new N(Z,!0)}else return this}},{key:"seperateShapes",value:function(){var B=this,Z=[];if(this.closed)(function(){for(var yt=new WeakMap,Dt=[],Ct=[],Mt=0;Mt<B.paths.length;Mt++){var _t=B.paths[Mt],le=B.orientation(Mt);if(le){var $e=B.area(Mt);yt.set(_t,$e),Dt.push(_t)}else Ct.push(_t)}Dt.sort(function(Pi,yn){return yt.get(Pi)-yt.get(yn)});var Rt=!0,Yt=!1,ke=void 0;try{for(var Wt=Dt[Symbol.iterator](),Pe;!(Rt=(Pe=Wt.next()).done);Rt=!0){for(var de=Pe.value,_e=[de],It=B.paths.indexOf(de),ae=[].concat(Ct),Ce=0;Ce<ae.length;Ce++){var Se=ae[Ce],On=B.pointInPath(It,Se[0]);if(On){_e.push(Se);var gn=Ct.indexOf(Se);Ct.splice(gn,1)}}Z.push(new N(_e,!0))}}catch(Pi){Yt=!0,ke=Pi}finally{try{!Rt&&Wt.return&&Wt.return()}finally{if(Yt)throw ke}}})();else{var G=!0,nt=!1,ht=void 0;try{for(var ot=this.paths[Symbol.iterator](),pt;!(G=(pt=ot.next()).done);G=!0){var Ot=pt.value;Z.push(new N([Ot],!1))}}catch(yt){nt=!0,ht=yt}finally{try{!G&&ot.return&&ot.return()}finally{if(nt)throw ht}}}return Z}},{key:"round",value:function(){return new N(this.paths.map(Q),this.closed)}},{key:"removeDuplicates",value:function(){return new N(this.paths.map(j),this.closed)}},{key:"mapToLower",value:function(){return this.paths.map(D)}}]),N}();c.default=w;function D(N){return N.map(A)}function A(N){var R=N.X,B=N.Y;return{x:R,y:B}}function _(N){return N.map(I)}function I(N){var R=N.x,B=N.y;return{X:R,Y:B}}function Q(N){return N.map(U)}function U(N){var R=N.X,B=N.Y;return{X:Math.round(R),Y:Math.round(B)}}function j(N){return N.filter(z)}function z(N,R,B){if(R===0)return!0;var Z=B[R-1];return!(N.X===Z.X&&N.Y===Z.Y)}}),r=o(n),i("default",r),i("__esModule",!0)}}});sr.register("clipper-js",["-/clipper-js@v1.0.2-Mou0diNPTgyilhisGDlW/dist=es2020/clipper-js"],function(i,t){t&&t.id;var e={default:!0};function n(r){var o={};for(var s in r)s!=="default"&&!e.hasOwnProperty(s)&&(o[s]=r[s]);i(o)}return{setters:[function(r){n(r),i({default:r.default})}],execute:function(){}}});const Jp=Xl("clipper-js"),z1=Jp.default;Jp.__esModule;const U1=(i,t)=>1e-8>Math.abs(i.x-t.x)+Math.abs(i.y-t.y);function Kp(i,t,e={}){let{endType:n,jointType:r="jtRound",miterLimit:o=2,roundPrecision:s=.25}=e;if(!n){const m=i[0][0],v=i.at(-1).at(-1);n=U1(m,v)?"etClosedRound":"etOpenRound"}const{data:l,scale:h}=H1(i,t),p=new z1(l,!0).offset(t*h,{jointType:r,endType:n,miterLimit:o,roundPrecision:s}),d=J1(p,h);for(;i.length>d.length;)i.pop();return d.forEach((m,v)=>{i[v]=m}),i}const G1=(i,t)=>{const e={};return e.X=Math.round(i.x*t),e.Y=Math.round(i.y*t),e},V1=(i,t)=>Math.sqrt((t.x-i.x)**2+(t.y-i.y)**2);function H1(i,t){const e=[],n=i.flat();for(let s=0;s<n.length-2;s+=1){const l=n[s],h=n[s+1],c=V1(l,h);Math.abs(c)!==0&&e.push(c)}const r=t!==0?(1/Math.min(...e,t)+1)*10:(1/Math.min(...e)+1)*10;return{data:i.map((s,l)=>s.map(h=>G1(h,r))),scale:r}}function J1(i,t){return Object.values(i.paths).map(n=>(n=n.map(({X:r,Y:o})=>({x:r/t,y:o/t})),[...n,n[0]],[...n,n[0]]))}function mr(i,t,e){const n=m=>m.map(({x:v,y:C})=>({X:v,Y:C})),r=m=>m.map(({X:v,Y:C})=>({x:v,y:C})),l=i.map(n);t=t.map(n);const h=new x.Paths,c=new x.Clipper;c.AddPaths(l,x.PolyType.ptSubject,!0),c.AddPaths(t,x.PolyType.ptClip,!0);const p={intersection:x.ClipType.ctIntersection,union:x.ClipType.ctUnion,difference:x.ClipType.ctDifference,xor:x.ClipType.ctXor};c.Execute(p[e],h);const d=h.map(r);for(;i.length>d.length;)i.pop();return d.forEach((m,v)=>{i[v]=m,i[v].push({x:m[0].x,y:m[0].y})}),i}// @license
const Xr={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},td=function(i){this._string=i,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()};td.prototype={parseSegment:function(){var i=this._string[this._currentIndex],t=Xr[i]?Xr[i]:null;if(t===null){if(this._prevCommand===null||((i==="+"||i==="-"||i==="."||i>="0"&&i<="9")&&this._prevCommand!=="Z"?this._prevCommand==="M"?t="L":this._prevCommand==="m"?t="l":t=this._prevCommand:t=null,t===null))return null}else this._currentIndex+=1;this._prevCommand=t;var e=null,n=t.toUpperCase();return n==="H"||n==="V"?e=[this._parseNumber()]:n==="M"||n==="L"||n==="T"?e=[this._parseNumber(),this._parseNumber()]:n==="S"||n==="Q"?e=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:n==="C"?e=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:n==="A"?e=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:n==="Z"&&(this._skipOptionalSpaces(),e=[]),e===null||e.indexOf(null)>=0?null:{type:t,values:e}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var i=this._string[this._currentIndex];return Xr[i]?Xr[i]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var i=this.peekSegmentType();return i==="M"||i==="m"},_isCurrentSpace:function(){var i=this._string[this._currentIndex];return i<=" "&&(i===" "||i===`
`||i==="	"||i==="\r"||i==="\f")},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string[this._currentIndex]!==","?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string[this._currentIndex]===","&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var i=0,t=0,e=1,n=0,r=1,o=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,r=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")&&this._string[this._currentIndex]!==".")return null;for(var l=this._currentIndex;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==l)for(var h=this._currentIndex-1,c=1;h>=l;)t+=c*(this._string[h]-"0"),h-=1,c*=10;if(this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="."){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)e*=10,n+=(this._string.charAt(this._currentIndex)-"0")/e,this._currentIndex+=1}if(this._currentIndex!==s&&this._currentIndex+1<this._endIndex&&(this._string[this._currentIndex]==="e"||this._string[this._currentIndex]==="E")&&this._string[this._currentIndex+1]!=="x"&&this._string[this._currentIndex+1]!=="m"){if(this._currentIndex+=1,this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,o=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)i*=10,i+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var p=t+n;return p*=r,i&&(p*=Math.pow(10,o*i)),s===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),p)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var i=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,t==="0")i=0;else if(t==="1")i=1;else return null;return this._skipOptionalSpacesOrDelimiter(),i}};const bu=function(i){if(!i||i.length===0)return[];var t=new td(i),e=[];if(t.initialCommandIsMoveTo())for(;t.hasMoreData();){var n=t.parseSegment();if(n===null)break;e.push(n)}return e},Zi=typeof Symbol<"u"?Symbol():"__cachedPathData",Ro=typeof Symbol<"u"?Symbol():"__cachedNormalizedPathData";var ed=function(i,t,e,n,r,o,s,l,h,c){var p=function(Wt){return Math.PI*Wt/180},d=function(Wt,Pe,de){var _e=Wt*Math.cos(de)-Pe*Math.sin(de),It=Wt*Math.sin(de)+Pe*Math.cos(de);return{x:_e,y:It}},m=p(s),v=[],C,O,y,P;if(c)C=c[0],O=c[1],y=c[2],P=c[3];else{var w=d(i,t,-m);i=w.x,t=w.y;var D=d(e,n,-m);e=D.x,n=D.y;var A=(i-e)/2,_=(t-n)/2,I=A*A/(r*r)+_*_/(o*o);I>1&&(I=Math.sqrt(I),r=I*r,o=I*o);var Q;l===h?Q=-1:Q=1;var U=r*r,j=o*o,z=U*j-U*_*_-j*A*A,N=U*_*_+j*A*A,R=Q*Math.sqrt(Math.abs(z/N));y=R*r*_/o+(i+e)/2,P=R*-o*A/r+(t+n)/2,C=Math.asin(parseFloat(((t-P)/o).toFixed(9))),O=Math.asin(parseFloat(((n-P)/o).toFixed(9))),i<y&&(C=Math.PI-C),e<y&&(O=Math.PI-O),C<0&&(C=Math.PI*2+C),O<0&&(O=Math.PI*2+O),h&&C>O&&(C=C-Math.PI*2),!h&&O>C&&(O=O-Math.PI*2)}var B=O-C;if(Math.abs(B)>Math.PI*120/180){var Z=O,G=e,nt=n;h&&O>C?O=C+Math.PI*120/180*1:O=C+Math.PI*120/180*-1,e=y+r*Math.cos(O),n=P+o*Math.sin(O),v=ed(e,n,G,nt,r,o,s,0,h,[O,Z,y,P])}B=O-C;var ht=Math.cos(C),ot=Math.sin(C),pt=Math.cos(O),Ot=Math.sin(O),yt=Math.tan(B/4),Dt=4/3*r*yt,Ct=4/3*o*yt,Mt=[i,t],_t=[i+Dt*ot,t-Ct*ht],le=[e+Dt*Ot,n-Ct*pt],$e=[e,n];if(_t[0]=2*Mt[0]-_t[0],_t[1]=2*Mt[1]-_t[1],c)return[_t,le,$e].concat(v);v=[_t,le,$e].concat(v);for(var Rt=[],Yt=0;Yt<v.length;Yt+=3){var r=d(v[Yt][0],v[Yt][1],m),o=d(v[Yt+1][0],v[Yt+1][1],m),ke=d(v[Yt+2][0],v[Yt+2][1],m);Rt.push([r.x,r.y,o.x,o.y,ke.x,ke.y])}return Rt},ji=function(i){return i.map(function(t){return{type:t.type,values:Array.prototype.slice.call(t.values)}})},K1=function(i){var t=[],e=null,n=null,r=null,o=null;return i.forEach(function(s){var l=s.type;if(l==="M"){var h=s.values[0],c=s.values[1];t.push({type:"M",values:[h,c]}),r=h,o=c,e=h,n=c}else if(l==="m"){var h=e+s.values[0],c=n+s.values[1];t.push({type:"M",values:[h,c]}),r=h,o=c,e=h,n=c}else if(l==="L"){var h=s.values[0],c=s.values[1];t.push({type:"L",values:[h,c]}),e=h,n=c}else if(l==="l"){var h=e+s.values[0],c=n+s.values[1];t.push({type:"L",values:[h,c]}),e=h,n=c}else if(l==="C"){var p=s.values[0],d=s.values[1],m=s.values[2],v=s.values[3],h=s.values[4],c=s.values[5];t.push({type:"C",values:[p,d,m,v,h,c]}),e=h,n=c}else if(l==="c"){var p=e+s.values[0],d=n+s.values[1],m=e+s.values[2],v=n+s.values[3],h=e+s.values[4],c=n+s.values[5];t.push({type:"C",values:[p,d,m,v,h,c]}),e=h,n=c}else if(l==="Q"){var p=s.values[0],d=s.values[1],h=s.values[2],c=s.values[3];t.push({type:"Q",values:[p,d,h,c]}),e=h,n=c}else if(l==="q"){var p=e+s.values[0],d=n+s.values[1],h=e+s.values[2],c=n+s.values[3];t.push({type:"Q",values:[p,d,h,c]}),e=h,n=c}else if(l==="A"){var h=s.values[5],c=s.values[6];t.push({type:"A",values:[s.values[0],s.values[1],s.values[2],s.values[3],s.values[4],h,c]}),e=h,n=c}else if(l==="a"){var h=e+s.values[5],c=n+s.values[6];t.push({type:"A",values:[s.values[0],s.values[1],s.values[2],s.values[3],s.values[4],h,c]}),e=h,n=c}else if(l==="H"){var h=s.values[0];t.push({type:"H",values:[h]}),e=h}else if(l==="h"){var h=e+s.values[0];t.push({type:"H",values:[h]}),e=h}else if(l==="V"){var c=s.values[0];t.push({type:"V",values:[c]}),n=c}else if(l==="v"){var c=n+s.values[0];t.push({type:"V",values:[c]}),n=c}else if(l==="S"){var m=s.values[0],v=s.values[1],h=s.values[2],c=s.values[3];t.push({type:"S",values:[m,v,h,c]}),e=h,n=c}else if(l==="s"){var m=e+s.values[0],v=n+s.values[1],h=e+s.values[2],c=n+s.values[3];t.push({type:"S",values:[m,v,h,c]}),e=h,n=c}else if(l==="T"){var h=s.values[0],c=s.values[1];t.push({type:"T",values:[h,c]}),e=h,n=c}else if(l==="t"){var h=e+s.values[0],c=n+s.values[1];t.push({type:"T",values:[h,c]}),e=h,n=c}else(l==="Z"||l==="z")&&(t.push({type:"Z",values:[]}),e=r,n=o)}),t},Zs=function(i){var t=[],e=null,n=null,r=null,o=null,s=null,l=null,h=null;return i.forEach(function(c){if(c.type==="M"){var p=c.values[0],d=c.values[1];t.push({type:"M",values:[p,d]}),l=p,h=d,o=p,s=d}else if(c.type==="C"){var m=c.values[0],v=c.values[1],C=c.values[2],O=c.values[3],p=c.values[4],d=c.values[5];t.push({type:"C",values:[m,v,C,O,p,d]}),n=C,r=O,o=p,s=d}else if(c.type==="L"){var p=c.values[0],d=c.values[1];t.push({type:"L",values:[p,d]}),o=p,s=d}else if(c.type==="H"){var p=c.values[0];t.push({type:"L",values:[p,s]}),o=p}else if(c.type==="V"){var d=c.values[0];t.push({type:"L",values:[o,d]}),s=d}else if(c.type==="S"){var C=c.values[0],O=c.values[1],p=c.values[2],d=c.values[3],y,P;e==="C"||e==="S"?(y=o+(o-n),P=s+(s-r)):(y=o,P=s),t.push({type:"C",values:[y,P,C,O,p,d]}),n=C,r=O,o=p,s=d}else if(c.type==="T"){var p=c.values[0],d=c.values[1],m,v;e==="Q"||e==="T"?(m=o+(o-n),v=s+(s-r)):(m=o,v=s);var y=o+2*(m-o)/3,P=s+2*(v-s)/3,w=p+2*(m-p)/3,D=d+2*(v-d)/3;t.push({type:"C",values:[y,P,w,D,p,d]}),n=m,r=v,o=p,s=d}else if(c.type==="Q"){var m=c.values[0],v=c.values[1],p=c.values[2],d=c.values[3],y=o+2*(m-o)/3,P=s+2*(v-s)/3,w=p+2*(m-p)/3,D=d+2*(v-d)/3;t.push({type:"C",values:[y,P,w,D,p,d]}),n=m,r=v,o=p,s=d}else if(c.type==="A"){var A=Math.abs(c.values[0]),_=Math.abs(c.values[1]),I=c.values[2],Q=c.values[3],U=c.values[4],p=c.values[5],d=c.values[6];if(A===0||_===0)t.push({type:"C",values:[o,s,p,d,p,d]}),o=p,s=d;else if(o!==p||s!==d){var j=ed(o,s,p,d,A,_,I,Q,U);j.forEach(function(R){t.push({type:"C",values:R})}),o=p,s=d}}else c.type==="Z"&&(t.push(c),o=l,s=h);e=c.type}),t};const Ft=(i,t)=>t in i&&"baseVal"in i[t]?i[t].baseVal.value:+i.getAttribute(t),tP=function(i){if(i&&i.normalize){if(this[Ro])return ji(this[Ro]);var t;this[Zi]?t=ji(this[Zi]):(t=bu(this.getAttribute("d")||""),this[Zi]=ji(t));var e=Zs(K1(t));return this[Ro]=ji(e),e}else{if(this[Zi])return ji(this[Zi]);var t=bu(this.getAttribute("d")||"");return this[Zi]=ji(t),t}},eP=function(i){var t=Ft(this,"x"),e=Ft(this,"y"),n=Ft(this,"width"),r=Ft(this,"height"),o=this.hasAttribute("rx")?Ft(this,"rx"):Ft(this,"ry"),s=this.hasAttribute("ry")?Ft(this,"ry"):Ft(this,"rx");o>n/2&&(o=n/2),s>r/2&&(s=r/2);var l=[{type:"M",values:[t+o,e]},{type:"H",values:[t+n-o]},{type:"A",values:[o,s,0,0,1,t+n,e+s]},{type:"V",values:[e+r-s]},{type:"A",values:[o,s,0,0,1,t+n-o,e+r]},{type:"H",values:[t+o]},{type:"A",values:[o,s,0,0,1,t,e+r-s]},{type:"V",values:[e+s]},{type:"A",values:[o,s,0,0,1,t+o,e]},{type:"Z",values:[]}];return l=l.filter(function(h){return!(h.type==="A"&&(h.values[0]===0||h.values[1]===0))}),i&&i.normalize===!0&&(l=Zs(l)),l},iP=function(i){var t=Ft(this,"cx"),e=Ft(this,"cy"),n=Ft(this,"r"),r=[{type:"M",values:[t+n,e]},{type:"A",values:[n,n,0,0,1,t,e+n]},{type:"A",values:[n,n,0,0,1,t-n,e]},{type:"A",values:[n,n,0,0,1,t,e-n]},{type:"A",values:[n,n,0,0,1,t+n,e]},{type:"Z",values:[]}];return i&&i.normalize===!0&&(r=Zs(r)),r},nP=function(i){var t=Ft(this,"cx"),e=Ft(this,"cy"),n=Ft(this,"rx"),r=Ft(this,"ry"),o=[{type:"M",values:[t+n,e]},{type:"A",values:[n,r,0,0,1,t,e+r]},{type:"A",values:[n,r,0,0,1,t-n,e]},{type:"A",values:[n,r,0,0,1,t,e-r]},{type:"A",values:[n,r,0,0,1,t+n,e]},{type:"Z",values:[]}];return i&&i.normalize===!0&&(o=Zs(o)),o},rP=function(){const i=Ft(this,"x1"),t=Ft(this,"x2"),e=Ft(this,"y1"),n=Ft(this,"y2");return[{type:"M",values:[i,e]},{type:"L",values:[t,n]}]},sP=function(){for(var i=[],t=0;t<this.points.numberOfItems;t+=1){var e=this.points.getItem(t);i.push({type:t===0?"M":"L",values:[e.x,e.y]})}return i},oP=function(){for(var i=[],t=0;t<this.points.numberOfItems;t+=1){var e=this.points.getItem(t);i.push({type:t===0?"M":"L",values:[e.x,e.y]})}return i.push({type:"Z",values:[]}),i},Du={circle:iP,ellipse:nP,path:tP,polygon:oP,polyline:sP,line:rP,rect:eP};function lP(i,t){const e=i.nodeName.toLowerCase();if(e in Du)return Du[e].call(i,t);throw new Error(`Unsupported SVG element type: '${e}'`)}function aP([i,t,e,n,r,o,s,l],h){const c=3*e-2*i-s,p=3*n-2*t-l,d=3*r-2*s-i,m=3*o-2*l-t;return Math.max(c*c,d*d)+Math.max(p*p,m*m)<=16*h*h}function hP([i,t,e,n,r,o,s,l],h){h===void 0&&(h=.5);let c=1-h,p=c*i+h*e,d=c*t+h*n,m=c*e+h*r,v=c*n+h*o,C=c*r+h*s,O=c*o+h*l,y=c*p+h*m,P=c*d+h*v,w=c*m+h*C,D=c*v+h*O,A=c*y+h*w,_=c*P+h*D;return[[i,t,p,d,y,P,A,_],[A,_,w,D,C,O,s,l]]}function uP(i,t,e=32){const n=1/e,r=[];function o(s,l,h){if(h-l>n&&!aP(s,t)){const c=hP(s,.5),p=(l+h)/2;o(c[0],l,p),o(c[1],p,h)}else{const c=s[6]-s[0],p=s[7]-s[1];Math.sqrt(c*c+p*p)>0&&r.push(s)}}return o(i,0,1),r}function cP(i,t={}){const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",i);const{maxError:n=.1}=t,r=[],o=([c,p])=>[c,p],s=lP(e,{normalize:!0});let l=null,h=null;for(const c of s)if(c.type==="M")l=o(c.values),h=l,r.push({points:[l]});else if(c.type==="L")l=o(c.values),r[r.length-1].points.push(l);else if(c.type==="C"){const[p,d,m,v,C,O]=c.values,[y,P]=l,[w,D]=o([p,d]),[A,_]=o([m,v]),[I,Q]=o([C,O]),U=uP([y,P,w,D,A,_,I,Q],n);for(const j of U)r[r.length-1].points.push([j[6],j[7]]);l=[I,Q]}else if(c.type==="A"){const[p,d,m,v,C,O,y]=c.values,P=m,w=C,D=v,{cos:A,sin:_,atan2:I,sqrt:Q,sign:U,acos:j,abs:z,ceil:N}=Math,R=(l[0]-O)/2,B=(l[1]-y)/2,Z=A(P)*R+_(P)*B,G=-_(P)*R+A(P)*B,nt=Z*Z,ht=G*G,ot=nt/(p*p)+ht/(d*d),pt=ot<=1?Q(ot)*p:p,Ot=ot<=1?Q(ot)*d:d,yt=pt*pt,Dt=Ot*Ot;let Ct=(yt*Dt-yt*ht-Dt*nt)/(yt*ht+Dt*nt);if(z(Ct)<1e-4&&(Ct=0),Ct<0)throw new Error(`bad arc args ${Ct}`);const Mt=(D===w?-1:1)*Q(Ct),_t=Mt*pt*G/Ot,le=Mt*-Ot*Z/pt,$e=A(P)*_t-_(P)*le+(l[0]+O)/2,Rt=_(P)*_t+A(P)*le+(l[1]+y)/2,Yt=(It,ae,Ce,Se)=>I(It*Se-ae*Ce,It*Ce+ae*Se),ke=Yt(1,0,(Z-_t)/pt,(G-le)/Ot),Wt=Yt((Z-_t)/pt,(G-le)/Ot,(-Z-_t)/pt,(-G-le)/Ot)%(Math.PI*2),Pe=w===0&&Wt>0?Wt-Math.PI*2:w===1&&Wt<0?Wt+Math.PI*2:Wt,de=n,_e=N(z(Pe)/j(1-de/pt));for(let It=1;It<=_e;It++){const ae=ke+Pe*It/_e,Ce=A(P)*pt*A(ae)-_(P)*Ot*_(ae)+$e,Se=_(P)*pt*A(ae)+A(P)*Ot*_(ae)+Rt;r[r.length-1].points.push([Ce,Se])}l=[O,y]}else if(c.type==="Z")h&&(l[0]!==h[0]||l[1]!==h[1])&&r[r.length-1].points.push(h);else throw Error(`Unexpected path command: "${c}"`);return r}const Tu=(i,t,e)=>({x:(1-i)*t.x+i*e.x,y:(1-i)*t.y+i*e.y}),id=(i,t,e,...n)=>n.length>0?[Tu(i,t,e),...id(i,e,...n)]:[Tu(i,t,e)],nd=(i,t)=>t.length>1?nd(i,id(i,...t)):t[0],fP=i=>Array.isArray(i)?{x:i[0],y:i[1]}:i;function pP(i,...t){t=t.map(fP),i.length<0&&(i=[[{x:0,y:0}]]),t=[i.at(-1).at(-1),...t];const n=[];for(let r=0;r<=1;r+=1/32){const o=nd(r,t);n.push(o)}return n.forEach(r=>i.at(-1).push(r)),i}const Fi=(i,t,e={x:0,y:0})=>{t=Au(t),e=Au(e);const{x:n,y:r}=e,{x:o,y:s}=t,l=o-n,h=s-r;return dP(i,p=>({x:p.x+l,y:p.y+h}))},dP=(i,t)=>(i.forEach((e,n)=>{i[n]=e.map(t)}),i),Au=i=>Array.isArray(i)?{x:i[0],y:i[1]}:i,js=i=>{let t=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return i.flat().forEach(o=>{t>o.x&&(t=o.x),e<o.x&&(e=o.x),n>o.y&&(n=o.y),r<o.y&&(r=o.y)}),{xMin:t,xMax:e,yMin:n,yMax:r}},Ii=(i,t)=>{if(i.length===0&&i.push([{x:0,y:0}]),t==="start")return i[0][0];if(t==="end")return i.at(-1).at(-1);let{xMax:e,xMin:n,yMax:r,yMin:o}=js(i),s=(e+n)/2,l=(r+o)/2;if(t==="cc")return{x:s,y:l};if(t==="lb")return{x:n,y:o};if(t==="rt")return{x:e,y:r};if(t==="lc")return{x:n,y:l};if(t==="lt")return{x:n,y:r};if(t==="cb")return{x:s,y:o};if(t==="ct")return{x:s,y:r};if(t==="rb")return{x:e,y:o};if(t==="rc")return{x:e,y:l};throw'"'+t+'" is not an origin point. "right" or "left" come first then "bottom" or "top"'},ya=(i,t,e)=>(e||(e=Ii(i,"cc")),e=mP(e),OP(i,r=>{let o=t/180*Math.PI,s=r.x-e.x,l=r.y-e.y;return{x:s*Math.cos(o)-l*Math.sin(o)+e.x,y:l*Math.cos(o)+s*Math.sin(o)+e.y}})),mP=i=>Array.isArray(i)?{x:i[0],y:i[1]}:i,OP=(i,t)=>(i.forEach((e,n)=>{i[n]=e.map(t)}),i),rd=(i,t,e)=>{if(i.length===0&&i.push([{x:0,y:0}]),e===0)return i;const n=i.at(-1).at(-1),r=gP(i)+t,o=Math.cos(Eu(r)),s=Math.sin(Eu(r)),l=n.x+e*o,h=n.y+e*s;return i.at(-1).push({x:l,y:h}),i};function gP(i){const t=i.at(-1);if(t.length<2)return 0;const e=t.at(-1),n=t.at(-2),r=e.x-n.x,o=e.y-n.y;return Math.atan2(o,r)*180/Math.PI}const Eu=i=>i/180*Math.PI;function ku(i){const t=i.at(-1);if(t.length<2)return 0;const e=t.at(-1),n=t.at(-2),r=e.x-n.x,o=e.y-n.y;return Math.atan2(o,r)*180/Math.PI}const yP=(i,t,e)=>{if(t===0||e===0)return i;i.length===0&&i.push([{x:0,y:0}]);const n=32,r=[[]],o=t/180*Math.PI,s=i.at(-1).at(-1),l=ku(i),h=(d,m)=>m*Math.cos(d),c=(d,m)=>m*Math.sin(d);for(let d=0;d<=n;d++){const m=o/n*d,v=h(m,e),C=c(m,e);r[0].push({x:v,y:C})}Fi(r,s,r[0][0]),ya(r,l+(t<0?90:-90),r[0][0]),r[0].slice(1).forEach(d=>i.at(-1).push(d));const p=ku(i);return rd(i,t+l-p,e/1e12),console.log("arc pts",r),i},sd=(i,t,e)=>{e||(e=Ii(i,"cc"));const{x:n,y:r}=vP(e);typeof t=="number"&&(t=[t,t]);const[o,s]=t;return xP(i,h=>({x:(h.x-n)*o+n,y:(h.y-r)*s+r}))},xP=(i,t)=>(i.forEach((e,n)=>{i[n]=e.map(t)}),i),vP=i=>Array.isArray(i)?{x:i[0],y:i[1]}:i,En=(i,t)=>Fl(i,t)<1e-6,Fl=([i,t],[e,n])=>Math.sqrt((e-i)**2+(n-t)**2),PP=(i,t)=>Math.sqrt((t[0]-i[0])**2+(t[1]-i[1])**2),Fr=(i,t)=>{const e=PP(i,t);return[(t[0]-i[0])/e,(t[1]-i[1])/e]},CP=i=>{const t=Math.sqrt(i[0]**2+i[1]**2);return[i[0]/t,i[1]/t]},SP=(i,t,e,n)=>{const r=Math.sin(n*(1-i))/Math.sin(n),o=Math.sin(n*i)/Math.sin(n);return[t[0]*r+e[0]*o,t[1]*r+e[1]*o]};function _u(i){if(typeof i[0]!="string")return i;if(i[0]==="chamfer"){const[t,e,n]=i;return n}else if(i[0]==="fillet"){const[t,e,n]=i;return n}else{if(i[0]==="bezier")throw"Can't begin wire with bezier.";return null}}function wP(i){const t=[];let e=!1;return i.forEach(n=>{n[0]==="bezier"&&e===!0?t.at(-1).push(...n.slice(1)):(t.push(n),e=!1),n[0]==="bezier"&&(e=!0)}),t}function $l(i){if(i.length===0)return[];i=wP(i);let t=_u(i[0]);const e=[t];for(let r=1;r<i.length;r++){const o=i[r];let s=null,l=r+1,h=i[l];for(;h&&h[0]!=="bezier"&&(s=_u(h),s===null);)l++,h=i[l];if(typeof o[0]!="string"){if(En(o,t))continue;e.push(o),t=o}else if(o[0]==="chamfer"){const[c,p,d]=o;if(t&&s){if(En(d,t)||En(d,s))continue;const[m,v]=Array.isArray(p)?p:[p,p],C=Fr(d,t),O=[d[0]+C[0]*m,d[1]+C[1]*m],y=Fr(d,s),P=[d[0]+y[0]*v,d[1]+y[1]*v];e.push(O),e.push(P)}else throw"Chamfering requires previous and next points.";t=e.at(-1)}else if(o[0]==="fillet"){let[c,p,d]=o;if(p<0&&(p=1e-8),t&&s){if(En(d,t)||En(d,s))continue;const m=Fr(d,t),v=Fr(d,s),C=Math.acos(m[0]*v[0]+m[1]*v[1]);let O=p/Math.tan(C/2);const y=Fl(t,d),P=Fl(s,d);O=Math.min(y,P,O),p=Math.min(O*Math.tan(C/2),p);const w=[d[0]+m[0]*O,d[1]+m[1]*O],D=[d[0]+v[0]*O,d[1]+v[1]*O],A=[],_=CP([m[0]+v[0],m[1]+v[1]]),I=Math.sqrt(O**2+p**2),Q=[d[0]+_[0]*I,d[1]+_[1]*I],U=Math.PI-C,j=[w[0]-Q[0],w[1]-Q[1]],z=[D[0]-Q[0],D[1]-Q[1]];for(let N=1/20;N<1;N+=1/20){const[R,B]=SP(N,j,z,U);let Z=[Q[0]+R,Q[1]+B];A.push(Z)}e.push(...A)}else throw"Filleting requires previous and next points.";t=e.at(-1)}else if(o[0]==="bezier"){const[c,...p]=o;if(t&&s){let d=bP([t,...p,s]);d=d.slice(1,-1),d.length>0&&e.push(...d)}else throw"Beziers requires previous and next points.";t=e.at(-1)}}return[e.map(([r,o])=>({x:r,y:o}))]}const Iu=(i,t,e)=>[(1-i)*t[0]+i*e[0],(1-i)*t[1]+i*e[1]],od=(i,t,e,...n)=>n.length>0?[Iu(i,t,e),...od(i,e,...n)]:[Iu(i,t,e)],ld=(i,t)=>t.length>1?ld(i,od(i,...t)):t[0];function bP(i){const t=[];for(let e=0;e<=1;e+=1/64){const n=ld(e,i);t.push(n)}return t}function ad(){const[i,...t]=arguments;return t.reduce((e,n)=>mr(e,n,"union"),i)}function DP(){const[i,...t]=arguments;return t.reduce((e,n)=>mr(e,n,"intersect"),i)}function TP(){const[i,...t]=arguments;return t.reduce((e,n)=>mr(e,n,"difference"),i)}function AP(){const[i,...t]=arguments;return t.reduce((e,n)=>mr(e,n,"xor"),i)}function EP(i){if(i.length===0)throw new Error("Shape must have at least one pt.");const t=i.at(-1);if(t.length<2)return 0;const e=t.at(-1),n=t.at(-2),r=e.x-n.x,o=e.y-n.y;return Math.atan2(o,r)*180/Math.PI}const kP=(i,[t,e])=>{i.length===0&&i.push([{x:0,y:0}]);const{x:n,y:r}=i.at(-1).at(-1);return i.at(-1).push({x:n+t,y:r+e}),i},_P=i=>{if(i.length===0)throw new Error("Shape must have at least one pt.");const{x:t,y:e}=i[0][0];return i.at(-1).push({x:t,y:e}),i},IP=i=>{const t=i.flat();if(t.length===1)return t[0];if(t.length===2)return{x:(t[0].x+t[1].x)/2,y:(t[0].y+t[1].y)/2};var e=t[0],n=t[t.length-1];(e.x!=n.x||e.y!=n.y)&&t.push(e);for(var r=0,o=0,s=0,l=t.length,h,c,p,d=0,m=l-1;d<l;m=d++)h=t[d],c=t[m],p=h.x*c.y-c.x*h.y,r+=p,o+=(h.x+c.x)*p,s+=(h.y+c.y)*p;return p=r*3,{x:o/p,y:s/p}},LP=i=>JSON.parse(JSON.stringify(i)),hd=i=>{const{xMin:t,xMax:e}=js(i);return e-t},ud=i=>{const{yMin:t,yMax:e}=js(i);return e-t},QP=i=>{const t=Ii(i,"cc");return Fi([0,0],t)},XP=(i,t)=>(i.at(-1).push(t),i),FP=i=>i.map(t=>t.reverse()).reverse(),$P=i=>Ws(i,0,{endType:"etClosedPolygon"}),BP=(i,t)=>Ws(i,t,{endType:"etClosedPolygon"}),NP=(i,t)=>{const e=(s,l)=>1e-8>Math.abs(s.x-l.x)+Math.abs(s.y-l.y),n=i[0][0],r=i.at(-1).at(-1),o=e(n,r)?"etClosedLine":"etOpenButt";return Ws(i,t/2,{endType:o,jointType:"jtMiter"})},MP=(i,t,e)=>{const n=LP(i);for(let r=0;r<t;r++)i.push(...e(n));return i},ti=i=>{let t="";return i.forEach(e=>{const{x:n,y:r}=e[0];t+=`M ${n},${r}`,e.slice(1).forEach(o=>{const{x:s,y:l}=o;t+=`L ${s},${l}`})}),t};function xa(i,t){return cP(t,{maxError:.001}).map(n=>n.points).forEach(n=>{i.push(n.map((r,o)=>({x:r[0],y:r[1]})))}),i}const Bl=(i,t)=>{const e={x:-i/2,y:t/2},n={x:i/2,y:t/2},r={x:i/2,y:-t/2},o={x:-i/2,y:-t/2};return[[e,n,r,o,e]]},nn=i=>{const e=[],n=(l,h)=>h*Math.cos(l),r=(l,h)=>h*Math.sin(l);for(let l=0;l<180;l++){const h=Math.PI*2/180*l,c=n(h,i),p=r(h,i);e.push({x:c,y:p})}const{x:o,y:s}=e[0];return e.push({x:o,y:s}),[e]},RP=Object.freeze(Object.defineProperty({__proto__:null,turnForward:rd,vec:kP,close:_P,translate:Fi,rotate:ya,scale:sd,originate:QP,goTo:XP,reverse:FP,thicken:NP,copyPaste:MP,offset:Ws,offset2:Kp,outline:$P,expand:BP,intersect:DP,difference:TP,union:ad,xor:AP,getAngle:EP,extrema:js,getPoint:Ii,centroid:IP,width:hd,height:ud,getPathData:ti,pathD:xa,arc:yP,rectangle:Bl,circle:nn,bezier:pP,path:$l,boolean:mr},Symbol.toStringTag,{value:"Module"})),YP=([i,t,e],n)=>{const r=l=>be`
    <path
      class="path-footprint"
      d="${ti([l])}"
      fill-rule="nonzero"
      />
  `,[o,s]=n;return Ai`
    <style>
      .path-footprint-dragged {
        fill: black;
      }
    </style>

    <svg 
      style="position: absolute; left: ${o}; top: ${s}; transform: translate(-50%, -50%) scale(1, -1);"
      width="50px"
      height="50px">
      ${e.map(r)}
    </svg>

  `},WP=i=>i.reduce((t,e,n)=>`${t} ${n===0?"M":"L"} ${e.join(",")}`,""),ZP=(i,t)=>{i.lt.x,(i.lt.y+i.lb.y)/2,i.rt.x,(i.rt.y+i.rb.y)/2,(i.lt.x+i.rt.x)/2,i.lt.y,(i.lb.x+i.rb.x)/2,i.lb.y;const e=[[i.lt.x,0],[i.rt.x,0]],n=[[0,i.lt.y],[0,i.lb.y]],r=[i.lt.x,i.rt.x];Math.abs(r[1]-r[0]);const o=[i.lb.y,i.lt.y];Math.abs(o[1]-o[0]);const s=t,l=(v,C)=>{let O=[],y=C*Math.ceil(v[0]/C)-C;for(;y<v[1]+C;)y=y+C,O.push(y);return O},h=v=>[[i.lt.x,v],[i.rt.x,v]],c=v=>[[v,i.lt.y],[v,i.lb.y]],p=v=>C=>be`<path stroke="black" vector-effect="non-scaling-stroke" stroke-width="${v}" d="${WP(C)}"/>`,d=l(o,s).map(h).map(p(.2)),m=l(r,s).map(c).map(p(.2));return be`
        <g class="grid no-download">
            ${p(.6)(e)}
            ${p(.6)(n)}
            ${d}
            ${m}
        </g>
    `},jP=({data:i,color:t,groupId:e=""})=>{const n=parseInt(t.slice(-2),16)/255,r=h=>be`
    <path
        d="${h}"
        fill-rule="nonzero"
        fill="${t.slice(0,-2)}"
        fill-opacity=${n}/>
  `,o=h=>be`
    <text 
      text-anchor="middle" 
      x=${h.translate[0]} 
      y=${-h.translate[1]+h.size*.352778}
      transform=${"scale(1 -1)"}
      style=${`font: ${h.size}pt sans-serif;`}
      fill=${t.slice(0,-2)}
      opacity=${n}
      >
      ${h.value}
    </text>
  `,s=({data:h,thickness:c})=>be`
    <path
      d=${h}
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width=${c}
      fill-rule="nonzero"
      stroke="${t.slice(0,-2)}"
      fill="none"
      stroke-opacity=${n}/>
  `,l=[];return i.forEach(h=>{typeof h=="string"?h.split(/(?=M)/g).forEach(c=>{l.push(r(c))}):h.type==="text"?l.push(o(h)):h.type==="wire"&&l.push(s(h))}),be`
    <g id=${e}>
      ${l}
    </g>
  `},qP=({pt:i,start:t,end:e,text:n},r)=>be`
  <circle
    class="draggable-pt"
    cx=${i[0]}
    cy=${i[1]}
    r="0.015"
    data-index=${r}
    data-start=${t}
    data-end=${e}
    data-text=${n}></circle>
`,zP=({d:i,stroke:t,strokeWidth:e,fill:n})=>be`
  <path d=${i} stroke=${t} stroke-width=${e} fill=${n}></path>
`,UP=i=>{var r;const t=i.shapes.map(jP),e=i.paths.map(zP),n=i.pts.map(qP);return(r=i.panZoomParams)==null||r.corners(),be`
    <svg id="viewer" style="width: 100%; height: 100%; transform: scale(1, -1);">
      <g class="transform-group">
            ${i.selectBox.start&&i.selectBox.end?be`
              <path
                class="selectBox"
                d="
                  M ${i.selectBox.start.x} ${i.selectBox.start.y}
                  L ${i.selectBox.end.x} ${i.selectBox.start.y}
                  L ${i.selectBox.end.x} ${i.selectBox.end.y}
                  L ${i.selectBox.start.x} ${i.selectBox.end.y}
                "
              />`:""}

          <g class="shapes">${t}</g>
          <g class="paths">${e}</g>


        ${i.panZoomParams&&i.gridSize>0&&i.grid?ZP(i.panZoomParams.corners(),i.gridSize):""}

        <rect
          class="limits no-download"
          width="${i.limits.x[1]-i.limits.x[0]}"
          height="${i.limits.y[1]-i.limits.y[0]}"
          stroke="black" fill="transparent" stroke-width="1"
          vector-effect="non-scaling-stroke"
          transform="translate(${i.limits.x[0]}, ${i.limits.y[0]})"/>
        <g class="pts no-download">${i.viewHandles?n:""}</g>
      </g>

    </svg>
  `},GP=([i,t,e],n)=>{const r=o=>be`
    <path
      class="path-footprint"
      data-index=${n}
      d="${ti([o])}"
      fill-rule="nonzero"
      />
  `;return Ai`
    <style>
      .path-footprint {
        fill: black;
      }

      .footprint-svg:hover .path-footprint {
        fill: orange;
      }
    </style>
    <div class="footprint-item">
      <svg
        data-index=${n}
        class="footprint-svg footprint-${n}"
        width="50px"
        height="50px"
        transform="scale(1, -1)">
        ${e.map(r)}
      </svg>
      <span style="padding-left: 5px;">${i}</span>
    </div>
  `},Qt={codemirror:void 0,storedPCB:void 0,transforming:!1,transformUpdate:()=>{},selectBox:{},footprints:[],wires:[],shapes:[],limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4,grid:!0,gridSize:.05,viewHandles:!0,selectedPath:null,panZoomParams:void 0,previewFootprint:null,paths:[],pts:[],name:"",error:""};window.getState=()=>Qt;function VP(){Qt.selectedPath=null,Qt.codemirror.view.state.selection.ranges,Qt.codemirror.view.dispatch({selection:{anchor:0}}),ct("RENDER")}const HP="/assets/logo.4f3ace64.svg";function JP(i){return Ai`
		${KP(i)}

		<div class="content">
			<div class="left-side">
				<codemirror-2 class="code-editor"></codemirror-2>
				${i.error!==""?Ai`<div class="error-log">${i.error}</div>`:""}
			</div>
			<div class="right-side">
				${UP(i)}
				${i.selectedPath!==null?Ai`<div class="path-selected" @click=${VP}>Clear Selected Path</div>`:""}
				<div class="footprint-toolbox">${i.footprints.map(GP)}</div>
				${i.previewFootprint?YP(...i.previewFootprint):""}
			</div>
			<div id="vertical-bar"></div>
		</div>
	`}const KP=i=>Ai`
	<div class="top-menu">
		<img src=${HP} class="logo" alt="fab-circuit-logo" />
		<div class="left">
			<div
				class="menu-item"
				@click=${()=>ct("RUN")}>
				run (shift + enter)
			</div>
			<div class="menu-item" @click=${()=>ct("NEW_FILE")}>new</div>
			<div class="menu-item dropdown-container">
			 	import
			 	<div class="dropdown-content">
			 		${R1(F1)}
			 	</div>
			 </div>
			 <div class="menu-item dropdown-container">
				download
				<div class="dropdown-content">
					<div class="menu-item"
						@click=${()=>{ct("RUN",{flatten:!0}),$1(i)}}>
						svg
					</div class="menu-item">
					<div class="menu-item"
						@click=${()=>{ct("RUN",{flatten:!0}),N1(i)}}>
						png
					</div class="menu-item">
					<div class="menu-item"
						@click=${()=>B1(`${i.name===""?"anon":i.name}.js`,i.codemirror.view.state.doc.toString())}>
						js
					</div class="menu-item">
					<input 
						class="input-item"
						style="margin: 3px;"
						.value=${i.name} 
						placeholder="name-here"
						@input=${t=>{i.name=t.target.value}}/>
				</div>
			</div>
			<div class="menu-item dropdown-container">
				drawing
				<div class="dropdown-content">
					<div
						class="menu-item center-button"
						@click=${()=>{i.panZoomParams.setScaleXY(i.limits)}}>
						center
					</div>
					<div class="check-item"> 
						<span>handles</span>
						<input
							type="checkbox"
							checked=${i.viewHandles}
							@change=${t=>{i.viewHandles=t.target.checked,ct("RENDER")}}
							class="handles-checkbox">
						</input>
					</div>
					<div class="check-item"> 
						<span>grid</span>
						<input
							type="checkbox"
							.checked=${i.grid}
							@change=${t=>{i.grid=t.target.checked,ct("RENDER")}}
							>
						</input>
					</div>
					<div class="input-item">
						<span>grid size:</span>
						<input
							type="number"
							step="0.005"
							min="0"
							value=${i.gridSize}
							@change=${t=>{i.gridSize=Number(t.target.value),ct("RENDER")}}>
						</input>
					</div>
				</div>
			</div>
		</div>
		<a class="github-logo" href="https://github.com/leomcelroy/svg-pcb">
			<i class="fa fa-github" style="font-size:24px"></i>
		</a>
	</div>
`;var tC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ci={exports:{}};(function(i,t){(function(n,r){i.exports=r()})(tC,function(){return function(e){var n={};function r(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}return r.m=e,r.c=n,r.p="",r(0)}([function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(1),s=r(3),l=r(8),h=r(15);function c(C,O,y){var P=null,w=function(z,N){y&&y(z,N),P&&P.visit(z,N)},D=typeof y=="function"?w:null,A=!1;if(O){A=typeof O.comment=="boolean"&&O.comment;var _=typeof O.attachComment=="boolean"&&O.attachComment;(A||_)&&(P=new o.CommentHandler,P.attach=_,O.comment=!0,D=w)}var I=!1;O&&typeof O.sourceType=="string"&&(I=O.sourceType==="module");var Q;O&&typeof O.jsx=="boolean"&&O.jsx?Q=new s.JSXParser(C,O,D):Q=new l.Parser(C,O,D);var U=I?Q.parseModule():Q.parseScript(),j=U;return A&&P&&(j.comments=P.comments),Q.config.tokens&&(j.tokens=Q.tokens),Q.config.tolerant&&(j.errors=Q.errorHandler.errors),j}n.parse=c;function p(C,O,y){var P=O||{};return P.sourceType="module",c(C,P,y)}n.parseModule=p;function d(C,O,y){var P=O||{};return P.sourceType="script",c(C,P,y)}n.parseScript=d;function m(C,O,y){var P=new h.Tokenizer(C,O),w;w=[];try{for(;;){var D=P.getNextToken();if(!D)break;y&&(D=y(D)),w.push(D)}}catch(A){P.errorHandler.tolerate(A)}return P.errorHandler.tolerant&&(w.errors=P.errors()),w}n.tokenize=m;var v=r(2);n.Syntax=v.Syntax,n.version="4.0.1"},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(2),s=function(){function l(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return l.prototype.insertInnerComments=function(h,c){if(h.type===o.Syntax.BlockStatement&&h.body.length===0){for(var p=[],d=this.leading.length-1;d>=0;--d){var m=this.leading[d];c.end.offset>=m.start&&(p.unshift(m.comment),this.leading.splice(d,1),this.trailing.splice(d,1))}p.length&&(h.innerComments=p)}},l.prototype.findTrailingComments=function(h){var c=[];if(this.trailing.length>0){for(var p=this.trailing.length-1;p>=0;--p){var d=this.trailing[p];d.start>=h.end.offset&&c.unshift(d.comment)}return this.trailing.length=0,c}var m=this.stack[this.stack.length-1];if(m&&m.node.trailingComments){var v=m.node.trailingComments[0];v&&v.range[0]>=h.end.offset&&(c=m.node.trailingComments,delete m.node.trailingComments)}return c},l.prototype.findLeadingComments=function(h){for(var c=[],p;this.stack.length>0;){var d=this.stack[this.stack.length-1];if(d&&d.start>=h.start.offset)p=d.node,this.stack.pop();else break}if(p){for(var m=p.leadingComments?p.leadingComments.length:0,v=m-1;v>=0;--v){var C=p.leadingComments[v];C.range[1]<=h.start.offset&&(c.unshift(C),p.leadingComments.splice(v,1))}return p.leadingComments&&p.leadingComments.length===0&&delete p.leadingComments,c}for(var v=this.leading.length-1;v>=0;--v){var d=this.leading[v];d.start<=h.start.offset&&(c.unshift(d.comment),this.leading.splice(v,1))}return c},l.prototype.visitNode=function(h,c){if(!(h.type===o.Syntax.Program&&h.body.length>0)){this.insertInnerComments(h,c);var p=this.findTrailingComments(c),d=this.findLeadingComments(c);d.length>0&&(h.leadingComments=d),p.length>0&&(h.trailingComments=p),this.stack.push({node:h,start:c.start.offset})}},l.prototype.visitComment=function(h,c){var p=h.type[0]==="L"?"Line":"Block",d={type:p,value:h.value};if(h.range&&(d.range=h.range),h.loc&&(d.loc=h.loc),this.comments.push(d),this.attach){var m={comment:{type:p,value:h.value,range:[c.start.offset,c.end.offset]},start:c.start.offset};h.loc&&(m.comment.loc=h.loc),h.type=p,this.leading.push(m),this.trailing.push(m)}},l.prototype.visit=function(h,c){h.type==="LineComment"?this.visitComment(h,c):h.type==="BlockComment"?this.visitComment(h,c):this.attach&&this.visitNode(h,c)},l}();n.CommentHandler=s},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,n,r){var o=this&&this.__extends||function(){var O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,P){y.__proto__=P}||function(y,P){for(var w in P)P.hasOwnProperty(w)&&(y[w]=P[w])};return function(y,P){O(y,P);function w(){this.constructor=y}y.prototype=P===null?Object.create(P):(w.prototype=P.prototype,new w)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(4),l=r(5),h=r(6),c=r(7),p=r(8),d=r(13),m=r(14);d.TokenName[100]="JSXIdentifier",d.TokenName[101]="JSXText";function v(O){var y;switch(O.type){case h.JSXSyntax.JSXIdentifier:var P=O;y=P.name;break;case h.JSXSyntax.JSXNamespacedName:var w=O;y=v(w.namespace)+":"+v(w.name);break;case h.JSXSyntax.JSXMemberExpression:var D=O;y=v(D.object)+"."+v(D.property);break}return y}var C=function(O){o(y,O);function y(P,w,D){return O.call(this,P,w,D)||this}return y.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():O.prototype.parsePrimaryExpression.call(this)},y.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},y.prototype.finishJSX=function(){this.nextToken()},y.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},y.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},y.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},y.prototype.scanXHTMLEntity=function(P){for(var w="&",D=!0,A=!1,_=!1,I=!1;!this.scanner.eof()&&D&&!A;){var Q=this.scanner.source[this.scanner.index];if(Q===P)break;if(A=Q===";",w+=Q,++this.scanner.index,!A)switch(w.length){case 2:_=Q==="#";break;case 3:_&&(I=Q==="x",D=I||s.Character.isDecimalDigit(Q.charCodeAt(0)),_=_&&!I);break;default:D=D&&!(_&&!s.Character.isDecimalDigit(Q.charCodeAt(0))),D=D&&!(I&&!s.Character.isHexDigit(Q.charCodeAt(0)));break}}if(D&&A&&w.length>2){var U=w.substr(1,w.length-2);_&&U.length>1?w=String.fromCharCode(parseInt(U.substr(1),10)):I&&U.length>2?w=String.fromCharCode(parseInt("0"+U.substr(1),16)):!_&&!I&&m.XHTMLEntities[U]&&(w=m.XHTMLEntities[U])}return w},y.prototype.lexJSX=function(){var P=this.scanner.source.charCodeAt(this.scanner.index);if(P===60||P===62||P===47||P===58||P===61||P===123||P===125){var w=this.scanner.source[this.scanner.index++];return{type:7,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(P===34||P===39){for(var D=this.scanner.index,A=this.scanner.source[this.scanner.index++],_="";!this.scanner.eof();){var I=this.scanner.source[this.scanner.index++];if(I===A)break;I==="&"?_+=this.scanXHTMLEntity(A):_+=I}return{type:8,value:_,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:D,end:this.scanner.index}}if(P===46){var Q=this.scanner.source.charCodeAt(this.scanner.index+1),U=this.scanner.source.charCodeAt(this.scanner.index+2),w=Q===46&&U===46?"...":".",D=this.scanner.index;return this.scanner.index+=w.length,{type:7,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:D,end:this.scanner.index}}if(P===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(s.Character.isIdentifierStart(P)&&P!==92){var D=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var I=this.scanner.source.charCodeAt(this.scanner.index);if(s.Character.isIdentifierPart(I)&&I!==92)++this.scanner.index;else if(I===45)++this.scanner.index;else break}var j=this.scanner.source.slice(D,this.scanner.index);return{type:100,value:j,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:D,end:this.scanner.index}}return this.scanner.lex()},y.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var P=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(P)),P},y.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var P=this.scanner.index,w="";!this.scanner.eof();){var D=this.scanner.source[this.scanner.index];if(D==="{"||D==="<")break;++this.scanner.index,w+=D,s.Character.isLineTerminator(D.charCodeAt(0))&&(++this.scanner.lineNumber,D==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var A={type:101,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:P,end:this.scanner.index};return w.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(A)),A},y.prototype.peekJSXToken=function(){var P=this.scanner.saveState();this.scanner.scanComments();var w=this.lexJSX();return this.scanner.restoreState(P),w},y.prototype.expectJSX=function(P){var w=this.nextJSXToken();(w.type!==7||w.value!==P)&&this.throwUnexpectedToken(w)},y.prototype.matchJSX=function(P){var w=this.peekJSXToken();return w.type===7&&w.value===P},y.prototype.parseJSXIdentifier=function(){var P=this.createJSXNode(),w=this.nextJSXToken();return w.type!==100&&this.throwUnexpectedToken(w),this.finalize(P,new l.JSXIdentifier(w.value))},y.prototype.parseJSXElementName=function(){var P=this.createJSXNode(),w=this.parseJSXIdentifier();if(this.matchJSX(":")){var D=w;this.expectJSX(":");var A=this.parseJSXIdentifier();w=this.finalize(P,new l.JSXNamespacedName(D,A))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var _=w;this.expectJSX(".");var I=this.parseJSXIdentifier();w=this.finalize(P,new l.JSXMemberExpression(_,I))}return w},y.prototype.parseJSXAttributeName=function(){var P=this.createJSXNode(),w,D=this.parseJSXIdentifier();if(this.matchJSX(":")){var A=D;this.expectJSX(":");var _=this.parseJSXIdentifier();w=this.finalize(P,new l.JSXNamespacedName(A,_))}else w=D;return w},y.prototype.parseJSXStringLiteralAttribute=function(){var P=this.createJSXNode(),w=this.nextJSXToken();w.type!==8&&this.throwUnexpectedToken(w);var D=this.getTokenRaw(w);return this.finalize(P,new c.Literal(w.value,D))},y.prototype.parseJSXExpressionAttribute=function(){var P=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(P,new l.JSXExpressionContainer(w))},y.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},y.prototype.parseJSXNameValueAttribute=function(){var P=this.createJSXNode(),w=this.parseJSXAttributeName(),D=null;return this.matchJSX("=")&&(this.expectJSX("="),D=this.parseJSXAttributeValue()),this.finalize(P,new l.JSXAttribute(w,D))},y.prototype.parseJSXSpreadAttribute=function(){var P=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(P,new l.JSXSpreadAttribute(w))},y.prototype.parseJSXAttributes=function(){for(var P=[];!this.matchJSX("/")&&!this.matchJSX(">");){var w=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();P.push(w)}return P},y.prototype.parseJSXOpeningElement=function(){var P=this.createJSXNode();this.expectJSX("<");var w=this.parseJSXElementName(),D=this.parseJSXAttributes(),A=this.matchJSX("/");return A&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(P,new l.JSXOpeningElement(w,A,D))},y.prototype.parseJSXBoundaryElement=function(){var P=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var w=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(P,new l.JSXClosingElement(w))}var D=this.parseJSXElementName(),A=this.parseJSXAttributes(),_=this.matchJSX("/");return _&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(P,new l.JSXOpeningElement(D,_,A))},y.prototype.parseJSXEmptyExpression=function(){var P=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(P,new l.JSXEmptyExpression)},y.prototype.parseJSXExpressionContainer=function(){var P=this.createJSXNode();this.expectJSX("{");var w;return this.matchJSX("}")?(w=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),w=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(P,new l.JSXExpressionContainer(w))},y.prototype.parseJSXChildren=function(){for(var P=[];!this.scanner.eof();){var w=this.createJSXChildNode(),D=this.nextJSXText();if(D.start<D.end){var A=this.getTokenRaw(D),_=this.finalize(w,new l.JSXText(D.value,A));P.push(_)}if(this.scanner.source[this.scanner.index]==="{"){var I=this.parseJSXExpressionContainer();P.push(I)}else break}return P},y.prototype.parseComplexJSXElement=function(P){for(var w=[];!this.scanner.eof();){P.children=P.children.concat(this.parseJSXChildren());var D=this.createJSXChildNode(),A=this.parseJSXBoundaryElement();if(A.type===h.JSXSyntax.JSXOpeningElement){var _=A;if(_.selfClosing){var I=this.finalize(D,new l.JSXElement(_,[],null));P.children.push(I)}else w.push(P),P={node:D,opening:_,closing:null,children:[]}}if(A.type===h.JSXSyntax.JSXClosingElement){P.closing=A;var Q=v(P.opening.name),U=v(P.closing.name);if(Q!==U&&this.tolerateError("Expected corresponding JSX closing tag for %0",Q),w.length>0){var I=this.finalize(P.node,new l.JSXElement(P.opening,P.children,P.closing));P=w[w.length-1],P.children.push(I),w.pop()}else break}}return P},y.prototype.parseJSXElement=function(){var P=this.createJSXNode(),w=this.parseJSXOpeningElement(),D=[],A=null;if(!w.selfClosing){var _=this.parseComplexJSXElement({node:P,opening:w,closing:A,children:D});D=_.children,A=_.closing}return this.finalize(P,new l.JSXElement(w,D,A))},y.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var P=this.parseJSXElement();return this.finishJSX(),P},y.prototype.isStartOfExpression=function(){return O.prototype.isStartOfExpression.call(this)||this.match("<")},y}(p.Parser);n.JSXParser=C},function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};n.Character={fromCodePoint:function(o){return o<65536?String.fromCharCode(o):String.fromCharCode(55296+(o-65536>>10))+String.fromCharCode(56320+(o-65536&1023))},isWhiteSpace:function(o){return o===32||o===9||o===11||o===12||o===160||o>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(o)>=0},isLineTerminator:function(o){return o===10||o===13||o===8232||o===8233},isIdentifierStart:function(o){return o===36||o===95||o>=65&&o<=90||o>=97&&o<=122||o===92||o>=128&&r.NonAsciiIdentifierStart.test(n.Character.fromCodePoint(o))},isIdentifierPart:function(o){return o===36||o===95||o>=65&&o<=90||o>=97&&o<=122||o>=48&&o<=57||o===92||o>=128&&r.NonAsciiIdentifierPart.test(n.Character.fromCodePoint(o))},isDecimalDigit:function(o){return o>=48&&o<=57},isHexDigit:function(o){return o>=48&&o<=57||o>=65&&o<=70||o>=97&&o<=102},isOctalDigit:function(o){return o>=48&&o<=55}}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=function(){function P(w){this.type=o.JSXSyntax.JSXClosingElement,this.name=w}return P}();n.JSXClosingElement=s;var l=function(){function P(w,D,A){this.type=o.JSXSyntax.JSXElement,this.openingElement=w,this.children=D,this.closingElement=A}return P}();n.JSXElement=l;var h=function(){function P(){this.type=o.JSXSyntax.JSXEmptyExpression}return P}();n.JSXEmptyExpression=h;var c=function(){function P(w){this.type=o.JSXSyntax.JSXExpressionContainer,this.expression=w}return P}();n.JSXExpressionContainer=c;var p=function(){function P(w){this.type=o.JSXSyntax.JSXIdentifier,this.name=w}return P}();n.JSXIdentifier=p;var d=function(){function P(w,D){this.type=o.JSXSyntax.JSXMemberExpression,this.object=w,this.property=D}return P}();n.JSXMemberExpression=d;var m=function(){function P(w,D){this.type=o.JSXSyntax.JSXAttribute,this.name=w,this.value=D}return P}();n.JSXAttribute=m;var v=function(){function P(w,D){this.type=o.JSXSyntax.JSXNamespacedName,this.namespace=w,this.name=D}return P}();n.JSXNamespacedName=v;var C=function(){function P(w,D,A){this.type=o.JSXSyntax.JSXOpeningElement,this.name=w,this.selfClosing=D,this.attributes=A}return P}();n.JSXOpeningElement=C;var O=function(){function P(w){this.type=o.JSXSyntax.JSXSpreadAttribute,this.argument=w}return P}();n.JSXSpreadAttribute=O;var y=function(){function P(w,D){this.type=o.JSXSyntax.JSXText,this.value=w,this.raw=D}return P}();n.JSXText=y},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(2),s=function(){function X(F){this.type=o.Syntax.ArrayExpression,this.elements=F}return X}();n.ArrayExpression=s;var l=function(){function X(F){this.type=o.Syntax.ArrayPattern,this.elements=F}return X}();n.ArrayPattern=l;var h=function(){function X(F,q,rt){this.type=o.Syntax.ArrowFunctionExpression,this.id=null,this.params=F,this.body=q,this.generator=!1,this.expression=rt,this.async=!1}return X}();n.ArrowFunctionExpression=h;var c=function(){function X(F,q,rt){this.type=o.Syntax.AssignmentExpression,this.operator=F,this.left=q,this.right=rt}return X}();n.AssignmentExpression=c;var p=function(){function X(F,q){this.type=o.Syntax.AssignmentPattern,this.left=F,this.right=q}return X}();n.AssignmentPattern=p;var d=function(){function X(F,q,rt){this.type=o.Syntax.ArrowFunctionExpression,this.id=null,this.params=F,this.body=q,this.generator=!1,this.expression=rt,this.async=!0}return X}();n.AsyncArrowFunctionExpression=d;var m=function(){function X(F,q,rt){this.type=o.Syntax.FunctionDeclaration,this.id=F,this.params=q,this.body=rt,this.generator=!1,this.expression=!1,this.async=!0}return X}();n.AsyncFunctionDeclaration=m;var v=function(){function X(F,q,rt){this.type=o.Syntax.FunctionExpression,this.id=F,this.params=q,this.body=rt,this.generator=!1,this.expression=!1,this.async=!0}return X}();n.AsyncFunctionExpression=v;var C=function(){function X(F){this.type=o.Syntax.AwaitExpression,this.argument=F}return X}();n.AwaitExpression=C;var O=function(){function X(F,q,rt){var ie=F==="||"||F==="&&";this.type=ie?o.Syntax.LogicalExpression:o.Syntax.BinaryExpression,this.operator=F,this.left=q,this.right=rt}return X}();n.BinaryExpression=O;var y=function(){function X(F){this.type=o.Syntax.BlockStatement,this.body=F}return X}();n.BlockStatement=y;var P=function(){function X(F){this.type=o.Syntax.BreakStatement,this.label=F}return X}();n.BreakStatement=P;var w=function(){function X(F,q){this.type=o.Syntax.CallExpression,this.callee=F,this.arguments=q}return X}();n.CallExpression=w;var D=function(){function X(F,q){this.type=o.Syntax.CatchClause,this.param=F,this.body=q}return X}();n.CatchClause=D;var A=function(){function X(F){this.type=o.Syntax.ClassBody,this.body=F}return X}();n.ClassBody=A;var _=function(){function X(F,q,rt){this.type=o.Syntax.ClassDeclaration,this.id=F,this.superClass=q,this.body=rt}return X}();n.ClassDeclaration=_;var I=function(){function X(F,q,rt){this.type=o.Syntax.ClassExpression,this.id=F,this.superClass=q,this.body=rt}return X}();n.ClassExpression=I;var Q=function(){function X(F,q){this.type=o.Syntax.MemberExpression,this.computed=!0,this.object=F,this.property=q}return X}();n.ComputedMemberExpression=Q;var U=function(){function X(F,q,rt){this.type=o.Syntax.ConditionalExpression,this.test=F,this.consequent=q,this.alternate=rt}return X}();n.ConditionalExpression=U;var j=function(){function X(F){this.type=o.Syntax.ContinueStatement,this.label=F}return X}();n.ContinueStatement=j;var z=function(){function X(){this.type=o.Syntax.DebuggerStatement}return X}();n.DebuggerStatement=z;var N=function(){function X(F,q){this.type=o.Syntax.ExpressionStatement,this.expression=F,this.directive=q}return X}();n.Directive=N;var R=function(){function X(F,q){this.type=o.Syntax.DoWhileStatement,this.body=F,this.test=q}return X}();n.DoWhileStatement=R;var B=function(){function X(){this.type=o.Syntax.EmptyStatement}return X}();n.EmptyStatement=B;var Z=function(){function X(F){this.type=o.Syntax.ExportAllDeclaration,this.source=F}return X}();n.ExportAllDeclaration=Z;var G=function(){function X(F){this.type=o.Syntax.ExportDefaultDeclaration,this.declaration=F}return X}();n.ExportDefaultDeclaration=G;var nt=function(){function X(F,q,rt){this.type=o.Syntax.ExportNamedDeclaration,this.declaration=F,this.specifiers=q,this.source=rt}return X}();n.ExportNamedDeclaration=nt;var ht=function(){function X(F,q){this.type=o.Syntax.ExportSpecifier,this.exported=q,this.local=F}return X}();n.ExportSpecifier=ht;var ot=function(){function X(F){this.type=o.Syntax.ExpressionStatement,this.expression=F}return X}();n.ExpressionStatement=ot;var pt=function(){function X(F,q,rt){this.type=o.Syntax.ForInStatement,this.left=F,this.right=q,this.body=rt,this.each=!1}return X}();n.ForInStatement=pt;var Ot=function(){function X(F,q,rt){this.type=o.Syntax.ForOfStatement,this.left=F,this.right=q,this.body=rt}return X}();n.ForOfStatement=Ot;var yt=function(){function X(F,q,rt,ie){this.type=o.Syntax.ForStatement,this.init=F,this.test=q,this.update=rt,this.body=ie}return X}();n.ForStatement=yt;var Dt=function(){function X(F,q,rt,ie){this.type=o.Syntax.FunctionDeclaration,this.id=F,this.params=q,this.body=rt,this.generator=ie,this.expression=!1,this.async=!1}return X}();n.FunctionDeclaration=Dt;var Ct=function(){function X(F,q,rt,ie){this.type=o.Syntax.FunctionExpression,this.id=F,this.params=q,this.body=rt,this.generator=ie,this.expression=!1,this.async=!1}return X}();n.FunctionExpression=Ct;var Mt=function(){function X(F){this.type=o.Syntax.Identifier,this.name=F}return X}();n.Identifier=Mt;var _t=function(){function X(F,q,rt){this.type=o.Syntax.IfStatement,this.test=F,this.consequent=q,this.alternate=rt}return X}();n.IfStatement=_t;var le=function(){function X(F,q){this.type=o.Syntax.ImportDeclaration,this.specifiers=F,this.source=q}return X}();n.ImportDeclaration=le;var $e=function(){function X(F){this.type=o.Syntax.ImportDefaultSpecifier,this.local=F}return X}();n.ImportDefaultSpecifier=$e;var Rt=function(){function X(F){this.type=o.Syntax.ImportNamespaceSpecifier,this.local=F}return X}();n.ImportNamespaceSpecifier=Rt;var Yt=function(){function X(F,q){this.type=o.Syntax.ImportSpecifier,this.local=F,this.imported=q}return X}();n.ImportSpecifier=Yt;var ke=function(){function X(F,q){this.type=o.Syntax.LabeledStatement,this.label=F,this.body=q}return X}();n.LabeledStatement=ke;var Wt=function(){function X(F,q){this.type=o.Syntax.Literal,this.value=F,this.raw=q}return X}();n.Literal=Wt;var Pe=function(){function X(F,q){this.type=o.Syntax.MetaProperty,this.meta=F,this.property=q}return X}();n.MetaProperty=Pe;var de=function(){function X(F,q,rt,ie,vn){this.type=o.Syntax.MethodDefinition,this.key=F,this.computed=q,this.value=rt,this.kind=ie,this.static=vn}return X}();n.MethodDefinition=de;var _e=function(){function X(F){this.type=o.Syntax.Program,this.body=F,this.sourceType="module"}return X}();n.Module=_e;var It=function(){function X(F,q){this.type=o.Syntax.NewExpression,this.callee=F,this.arguments=q}return X}();n.NewExpression=It;var ae=function(){function X(F){this.type=o.Syntax.ObjectExpression,this.properties=F}return X}();n.ObjectExpression=ae;var Ce=function(){function X(F){this.type=o.Syntax.ObjectPattern,this.properties=F}return X}();n.ObjectPattern=Ce;var Se=function(){function X(F,q,rt,ie,vn,uo){this.type=o.Syntax.Property,this.key=q,this.computed=rt,this.value=ie,this.kind=F,this.method=vn,this.shorthand=uo}return X}();n.Property=Se;var On=function(){function X(F,q,rt,ie){this.type=o.Syntax.Literal,this.value=F,this.raw=q,this.regex={pattern:rt,flags:ie}}return X}();n.RegexLiteral=On;var gn=function(){function X(F){this.type=o.Syntax.RestElement,this.argument=F}return X}();n.RestElement=gn;var Pi=function(){function X(F){this.type=o.Syntax.ReturnStatement,this.argument=F}return X}();n.ReturnStatement=Pi;var yn=function(){function X(F){this.type=o.Syntax.Program,this.body=F,this.sourceType="script"}return X}();n.Script=yn;var qs=function(){function X(F){this.type=o.Syntax.SequenceExpression,this.expressions=F}return X}();n.SequenceExpression=qs;var zs=function(){function X(F){this.type=o.Syntax.SpreadElement,this.argument=F}return X}();n.SpreadElement=zs;var Us=function(){function X(F,q){this.type=o.Syntax.MemberExpression,this.computed=!1,this.object=F,this.property=q}return X}();n.StaticMemberExpression=Us;var Gs=function(){function X(){this.type=o.Syntax.Super}return X}();n.Super=Gs;var Vs=function(){function X(F,q){this.type=o.Syntax.SwitchCase,this.test=F,this.consequent=q}return X}();n.SwitchCase=Vs;var Hs=function(){function X(F,q){this.type=o.Syntax.SwitchStatement,this.discriminant=F,this.cases=q}return X}();n.SwitchStatement=Hs;var Js=function(){function X(F,q){this.type=o.Syntax.TaggedTemplateExpression,this.tag=F,this.quasi=q}return X}();n.TaggedTemplateExpression=Js;var Ks=function(){function X(F,q){this.type=o.Syntax.TemplateElement,this.value=F,this.tail=q}return X}();n.TemplateElement=Ks;var to=function(){function X(F,q){this.type=o.Syntax.TemplateLiteral,this.quasis=F,this.expressions=q}return X}();n.TemplateLiteral=to;var eo=function(){function X(){this.type=o.Syntax.ThisExpression}return X}();n.ThisExpression=eo;var io=function(){function X(F){this.type=o.Syntax.ThrowStatement,this.argument=F}return X}();n.ThrowStatement=io;var no=function(){function X(F,q,rt){this.type=o.Syntax.TryStatement,this.block=F,this.handler=q,this.finalizer=rt}return X}();n.TryStatement=no;var ro=function(){function X(F,q){this.type=o.Syntax.UnaryExpression,this.operator=F,this.argument=q,this.prefix=!0}return X}();n.UnaryExpression=ro;var so=function(){function X(F,q,rt){this.type=o.Syntax.UpdateExpression,this.operator=F,this.argument=q,this.prefix=rt}return X}();n.UpdateExpression=so;var oo=function(){function X(F,q){this.type=o.Syntax.VariableDeclaration,this.declarations=F,this.kind=q}return X}();n.VariableDeclaration=oo;var lo=function(){function X(F,q){this.type=o.Syntax.VariableDeclarator,this.id=F,this.init=q}return X}();n.VariableDeclarator=lo;var ao=function(){function X(F,q){this.type=o.Syntax.WhileStatement,this.test=F,this.body=q}return X}();n.WhileStatement=ao;var xn=function(){function X(F,q){this.type=o.Syntax.WithStatement,this.object=F,this.body=q}return X}();n.WithStatement=xn;var ho=function(){function X(F,q){this.type=o.Syntax.YieldExpression,this.argument=F,this.delegate=q}return X}();n.YieldExpression=ho},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(9),s=r(10),l=r(11),h=r(7),c=r(12),p=r(2),d=r(13),m="ArrowParameterPlaceHolder",v=function(){function C(O,y,P){y===void 0&&(y={}),this.config={range:typeof y.range=="boolean"&&y.range,loc:typeof y.loc=="boolean"&&y.loc,source:null,tokens:typeof y.tokens=="boolean"&&y.tokens,comment:typeof y.comment=="boolean"&&y.comment,tolerant:typeof y.tolerant=="boolean"&&y.tolerant},this.config.loc&&y.source&&y.source!==null&&(this.config.source=String(y.source)),this.delegate=P,this.errorHandler=new s.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new c.Scanner(O,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return C.prototype.throwError=function(O){var y=Array.prototype.slice.call(arguments,1),P=O.replace(/%(\d)/g,function(_,I){return o.assert(I<y.length,"Message reference must be in range"),y[I]}),w=this.lastMarker.index,D=this.lastMarker.line,A=this.lastMarker.column+1;throw this.errorHandler.createError(w,D,A,P)},C.prototype.tolerateError=function(O){var y=Array.prototype.slice.call(arguments,1),P=O.replace(/%(\d)/g,function(_,I){return o.assert(I<y.length,"Message reference must be in range"),y[I]}),w=this.lastMarker.index,D=this.scanner.lineNumber,A=this.lastMarker.column+1;this.errorHandler.tolerateError(w,D,A,P)},C.prototype.unexpectedTokenError=function(O,y){var P=y||l.Messages.UnexpectedToken,w;if(O?(y||(P=O.type===2?l.Messages.UnexpectedEOS:O.type===3?l.Messages.UnexpectedIdentifier:O.type===6?l.Messages.UnexpectedNumber:O.type===8?l.Messages.UnexpectedString:O.type===10?l.Messages.UnexpectedTemplate:l.Messages.UnexpectedToken,O.type===4&&(this.scanner.isFutureReservedWord(O.value)?P=l.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(O.value)&&(P=l.Messages.StrictReservedWord))),w=O.value):w="ILLEGAL",P=P.replace("%0",w),O&&typeof O.lineNumber=="number"){var D=O.start,A=O.lineNumber,_=this.lastMarker.index-this.lastMarker.column,I=O.start-_+1;return this.errorHandler.createError(D,A,I,P)}else{var D=this.lastMarker.index,A=this.lastMarker.line,I=this.lastMarker.column+1;return this.errorHandler.createError(D,A,I,P)}},C.prototype.throwUnexpectedToken=function(O,y){throw this.unexpectedTokenError(O,y)},C.prototype.tolerateUnexpectedToken=function(O,y){this.errorHandler.tolerate(this.unexpectedTokenError(O,y))},C.prototype.collectComments=function(){if(!this.config.comment)this.scanner.scanComments();else{var O=this.scanner.scanComments();if(O.length>0&&this.delegate)for(var y=0;y<O.length;++y){var P=O[y],w=void 0;w={type:P.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(P.slice[0],P.slice[1])},this.config.range&&(w.range=P.range),this.config.loc&&(w.loc=P.loc);var D={start:{line:P.loc.start.line,column:P.loc.start.column,offset:P.range[0]},end:{line:P.loc.end.line,column:P.loc.end.column,offset:P.range[1]}};this.delegate(w,D)}}},C.prototype.getTokenRaw=function(O){return this.scanner.source.slice(O.start,O.end)},C.prototype.convertToken=function(O){var y={type:d.TokenName[O.type],value:this.getTokenRaw(O)};if(this.config.range&&(y.range=[O.start,O.end]),this.config.loc&&(y.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),O.type===9){var P=O.pattern,w=O.flags;y.regex={pattern:P,flags:w}}return y},C.prototype.nextToken=function(){var O=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var y=this.scanner.lex();return this.hasLineTerminator=O.lineNumber!==y.lineNumber,y&&this.context.strict&&y.type===3&&this.scanner.isStrictModeReservedWord(y.value)&&(y.type=4),this.lookahead=y,this.config.tokens&&y.type!==2&&this.tokens.push(this.convertToken(y)),O},C.prototype.nextRegexToken=function(){this.collectComments();var O=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(O))),this.lookahead=O,this.nextToken(),O},C.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},C.prototype.startNode=function(O,y){y===void 0&&(y=0);var P=O.start-O.lineStart,w=O.lineNumber;return P<0&&(P+=y,w--),{index:O.start,line:w,column:P}},C.prototype.finalize=function(O,y){if(this.config.range&&(y.range=[O.index,this.lastMarker.index]),this.config.loc&&(y.loc={start:{line:O.line,column:O.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(y.loc.source=this.config.source)),this.delegate){var P={start:{line:O.line,column:O.column,offset:O.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(y,P)}return y},C.prototype.expect=function(O){var y=this.nextToken();(y.type!==7||y.value!==O)&&this.throwUnexpectedToken(y)},C.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var O=this.lookahead;O.type===7&&O.value===","?this.nextToken():O.type===7&&O.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(O)):this.tolerateUnexpectedToken(O,l.Messages.UnexpectedToken)}else this.expect(",")},C.prototype.expectKeyword=function(O){var y=this.nextToken();(y.type!==4||y.value!==O)&&this.throwUnexpectedToken(y)},C.prototype.match=function(O){return this.lookahead.type===7&&this.lookahead.value===O},C.prototype.matchKeyword=function(O){return this.lookahead.type===4&&this.lookahead.value===O},C.prototype.matchContextualKeyword=function(O){return this.lookahead.type===3&&this.lookahead.value===O},C.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var O=this.lookahead.value;return O==="="||O==="*="||O==="**="||O==="/="||O==="%="||O==="+="||O==="-="||O==="<<="||O===">>="||O===">>>="||O==="&="||O==="^="||O==="|="},C.prototype.isolateCoverGrammar=function(O){var y=this.context.isBindingElement,P=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var D=O.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=y,this.context.isAssignmentTarget=P,this.context.firstCoverInitializedNameError=w,D},C.prototype.inheritCoverGrammar=function(O){var y=this.context.isBindingElement,P=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var D=O.call(this);return this.context.isBindingElement=this.context.isBindingElement&&y,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&P,this.context.firstCoverInitializedNameError=w||this.context.firstCoverInitializedNameError,D},C.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type!==2&&!this.match("}")&&this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},C.prototype.parsePrimaryExpression=function(){var O=this.createNode(),y,P,w;switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),y=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(O,new h.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,l.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,P=this.nextToken(),w=this.getTokenRaw(P),y=this.finalize(O,new h.Literal(P.value,w));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,P=this.nextToken(),w=this.getTokenRaw(P),y=this.finalize(O,new h.Literal(P.value==="true",w));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,P=this.nextToken(),w=this.getTokenRaw(P),y=this.finalize(O,new h.Literal(null,w));break;case 10:y=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,y=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":y=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":y=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,P=this.nextRegexToken(),w=this.getTokenRaw(P),y=this.finalize(O,new h.RegexLiteral(P.regex,w,P.pattern,P.flags));break;default:y=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?y=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?y=this.finalize(O,new h.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?y=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),y=this.finalize(O,new h.ThisExpression)):this.matchKeyword("class")?y=this.parseClassExpression():y=this.throwUnexpectedToken(this.nextToken()));break;default:y=this.throwUnexpectedToken(this.nextToken())}return y},C.prototype.parseSpreadElement=function(){var O=this.createNode();this.expect("...");var y=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(O,new h.SpreadElement(y))},C.prototype.parseArrayInitializer=function(){var O=this.createNode(),y=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),y.push(null);else if(this.match("...")){var P=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),y.push(P)}else y.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(O,new h.ArrayExpression(y))},C.prototype.parsePropertyMethod=function(O){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var y=this.context.strict,P=this.context.allowStrictDirective;this.context.allowStrictDirective=O.simple;var w=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&O.firstRestricted&&this.tolerateUnexpectedToken(O.firstRestricted,O.message),this.context.strict&&O.stricted&&this.tolerateUnexpectedToken(O.stricted,O.message),this.context.strict=y,this.context.allowStrictDirective=P,w},C.prototype.parsePropertyMethodFunction=function(){var O=!1,y=this.createNode(),P=this.context.allowYield;this.context.allowYield=!0;var w=this.parseFormalParameters(),D=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(y,new h.FunctionExpression(null,w.params,D,O))},C.prototype.parsePropertyMethodAsyncFunction=function(){var O=this.createNode(),y=this.context.allowYield,P=this.context.await;this.context.allowYield=!1,this.context.await=!0;var w=this.parseFormalParameters(),D=this.parsePropertyMethod(w);return this.context.allowYield=y,this.context.await=P,this.finalize(O,new h.AsyncFunctionExpression(null,w.params,D))},C.prototype.parseObjectPropertyKey=function(){var O=this.createNode(),y=this.nextToken(),P;switch(y.type){case 8:case 6:this.context.strict&&y.octal&&this.tolerateUnexpectedToken(y,l.Messages.StrictOctalLiteral);var w=this.getTokenRaw(y);P=this.finalize(O,new h.Literal(y.value,w));break;case 3:case 1:case 5:case 4:P=this.finalize(O,new h.Identifier(y.value));break;case 7:y.value==="["?(P=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):P=this.throwUnexpectedToken(y);break;default:P=this.throwUnexpectedToken(y)}return P},C.prototype.isPropertyKey=function(O,y){return O.type===p.Syntax.Identifier&&O.name===y||O.type===p.Syntax.Literal&&O.value===y},C.prototype.parseObjectProperty=function(O){var y=this.createNode(),P=this.lookahead,w,D=null,A=null,_=!1,I=!1,Q=!1,U=!1;if(P.type===3){var j=P.value;this.nextToken(),_=this.match("["),U=!this.hasLineTerminator&&j==="async"&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","),D=U?this.parseObjectPropertyKey():this.finalize(y,new h.Identifier(j))}else this.match("*")?this.nextToken():(_=this.match("["),D=this.parseObjectPropertyKey());var z=this.qualifiedPropertyName(this.lookahead);if(P.type===3&&!U&&P.value==="get"&&z)w="get",_=this.match("["),D=this.parseObjectPropertyKey(),this.context.allowYield=!1,A=this.parseGetterMethod();else if(P.type===3&&!U&&P.value==="set"&&z)w="set",_=this.match("["),D=this.parseObjectPropertyKey(),A=this.parseSetterMethod();else if(P.type===7&&P.value==="*"&&z)w="init",_=this.match("["),D=this.parseObjectPropertyKey(),A=this.parseGeneratorMethod(),I=!0;else if(D||this.throwUnexpectedToken(this.lookahead),w="init",this.match(":")&&!U)!_&&this.isPropertyKey(D,"__proto__")&&(O.value&&this.tolerateError(l.Messages.DuplicateProtoProperty),O.value=!0),this.nextToken(),A=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))A=U?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),I=!0;else if(P.type===3){var j=this.finalize(y,new h.Identifier(P.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),Q=!0;var N=this.isolateCoverGrammar(this.parseAssignmentExpression);A=this.finalize(y,new h.AssignmentPattern(j,N))}else Q=!0,A=j}else this.throwUnexpectedToken(this.nextToken());return this.finalize(y,new h.Property(w,D,_,A,I,Q))},C.prototype.parseObjectInitializer=function(){var O=this.createNode();this.expect("{");for(var y=[],P={value:!1};!this.match("}");)y.push(this.parseObjectProperty(P)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(O,new h.ObjectExpression(y))},C.prototype.parseTemplateHead=function(){o.assert(this.lookahead.head,"Template literal must start with a template head");var O=this.createNode(),y=this.nextToken(),P=y.value,w=y.cooked;return this.finalize(O,new h.TemplateElement({raw:P,cooked:w},y.tail))},C.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var O=this.createNode(),y=this.nextToken(),P=y.value,w=y.cooked;return this.finalize(O,new h.TemplateElement({raw:P,cooked:w},y.tail))},C.prototype.parseTemplateLiteral=function(){var O=this.createNode(),y=[],P=[],w=this.parseTemplateHead();for(P.push(w);!w.tail;)y.push(this.parseExpression()),w=this.parseTemplateElement(),P.push(w);return this.finalize(O,new h.TemplateLiteral(P,y))},C.prototype.reinterpretExpressionAsPattern=function(O){switch(O.type){case p.Syntax.Identifier:case p.Syntax.MemberExpression:case p.Syntax.RestElement:case p.Syntax.AssignmentPattern:break;case p.Syntax.SpreadElement:O.type=p.Syntax.RestElement,this.reinterpretExpressionAsPattern(O.argument);break;case p.Syntax.ArrayExpression:O.type=p.Syntax.ArrayPattern;for(var y=0;y<O.elements.length;y++)O.elements[y]!==null&&this.reinterpretExpressionAsPattern(O.elements[y]);break;case p.Syntax.ObjectExpression:O.type=p.Syntax.ObjectPattern;for(var y=0;y<O.properties.length;y++)this.reinterpretExpressionAsPattern(O.properties[y].value);break;case p.Syntax.AssignmentExpression:O.type=p.Syntax.AssignmentPattern,delete O.operator,this.reinterpretExpressionAsPattern(O.left);break}},C.prototype.parseGroupExpression=function(){var O;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),O={type:m,params:[],async:!1};else{var y=this.lookahead,P=[];if(this.match("..."))O=this.parseRestElement(P),this.expect(")"),this.match("=>")||this.expect("=>"),O={type:m,params:[O],async:!1};else{var w=!1;if(this.context.isBindingElement=!0,O=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var D=[];for(this.context.isAssignmentTarget=!1,D.push(O);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var A=0;A<D.length;A++)this.reinterpretExpressionAsPattern(D[A]);w=!0,O={type:m,params:D,async:!1}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),D.push(this.parseRestElement(P)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(var A=0;A<D.length;A++)this.reinterpretExpressionAsPattern(D[A]);w=!0,O={type:m,params:D,async:!1}}else D.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(w)break}w||(O=this.finalize(this.startNode(y),new h.SequenceExpression(D)))}if(!w){if(this.expect(")"),this.match("=>")&&(O.type===p.Syntax.Identifier&&O.name==="yield"&&(w=!0,O={type:m,params:[O],async:!1}),!w)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),O.type===p.Syntax.SequenceExpression)for(var A=0;A<O.expressions.length;A++)this.reinterpretExpressionAsPattern(O.expressions[A]);else this.reinterpretExpressionAsPattern(O);var _=O.type===p.Syntax.SequenceExpression?O.expressions:[O];O={type:m,params:_,async:!1}}this.context.isBindingElement=!1}}}return O},C.prototype.parseArguments=function(){this.expect("(");var O=[];if(!this.match(")"))for(;;){var y=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(O.push(y),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),O},C.prototype.isIdentifierName=function(O){return O.type===3||O.type===4||O.type===1||O.type===5},C.prototype.parseIdentifierName=function(){var O=this.createNode(),y=this.nextToken();return this.isIdentifierName(y)||this.throwUnexpectedToken(y),this.finalize(O,new h.Identifier(y.value))},C.prototype.parseNewExpression=function(){var O=this.createNode(),y=this.parseIdentifierName();o.assert(y.name==="new","New expression must start with `new`");var P;if(this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var w=this.parseIdentifierName();P=new h.MetaProperty(y,w)}else this.throwUnexpectedToken(this.lookahead);else{var D=this.isolateCoverGrammar(this.parseLeftHandSideExpression),A=this.match("(")?this.parseArguments():[];P=new h.NewExpression(D,A),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(O,P)},C.prototype.parseAsyncArgument=function(){var O=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,O},C.prototype.parseAsyncArguments=function(){this.expect("(");var O=[];if(!this.match(")"))for(;;){var y=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(O.push(y),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),O},C.prototype.parseLeftHandSideExpressionAllowCall=function(){var O=this.lookahead,y=this.matchContextualKeyword("async"),P=this.context.allowIn;this.context.allowIn=!0;var w;for(this.matchKeyword("super")&&this.context.inFunctionBody?(w=this.createNode(),this.nextToken(),w=this.finalize(w,new h.Super),!this.match("(")&&!this.match(".")&&!this.match("[")&&this.throwUnexpectedToken(this.lookahead)):w=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var D=this.parseIdentifierName();w=this.finalize(this.startNode(O),new h.StaticMemberExpression(w,D))}else if(this.match("(")){var A=y&&O.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var _=A?this.parseAsyncArguments():this.parseArguments();if(w=this.finalize(this.startNode(O),new h.CallExpression(w,_)),A&&this.match("=>")){for(var I=0;I<_.length;++I)this.reinterpretExpressionAsPattern(_[I]);w={type:m,params:_,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var D=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),w=this.finalize(this.startNode(O),new h.ComputedMemberExpression(w,D))}else if(this.lookahead.type===10&&this.lookahead.head){var Q=this.parseTemplateLiteral();w=this.finalize(this.startNode(O),new h.TaggedTemplateExpression(w,Q))}else break;return this.context.allowIn=P,w},C.prototype.parseSuper=function(){var O=this.createNode();return this.expectKeyword("super"),!this.match("[")&&!this.match(".")&&this.throwUnexpectedToken(this.lookahead),this.finalize(O,new h.Super)},C.prototype.parseLeftHandSideExpression=function(){o.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var O=this.startNode(this.lookahead),y=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var P=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),y=this.finalize(O,new h.ComputedMemberExpression(y,P))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var P=this.parseIdentifierName();y=this.finalize(O,new h.StaticMemberExpression(y,P))}else if(this.lookahead.type===10&&this.lookahead.head){var w=this.parseTemplateLiteral();y=this.finalize(O,new h.TaggedTemplateExpression(y,w))}else break;return y},C.prototype.parseUpdateExpression=function(){var O,y=this.lookahead;if(this.match("++")||this.match("--")){var P=this.startNode(y),w=this.nextToken();O=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&O.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(O.name)&&this.tolerateError(l.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment);var D=!0;O=this.finalize(P,new h.UpdateExpression(w.value,O,D)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(O=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&O.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(O.name)&&this.tolerateError(l.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var A=this.nextToken().value,D=!1;O=this.finalize(this.startNode(y),new h.UpdateExpression(A,O,D))}return O},C.prototype.parseAwaitExpression=function(){var O=this.createNode();this.nextToken();var y=this.parseUnaryExpression();return this.finalize(O,new h.AwaitExpression(y))},C.prototype.parseUnaryExpression=function(){var O;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var y=this.startNode(this.lookahead),P=this.nextToken();O=this.inheritCoverGrammar(this.parseUnaryExpression),O=this.finalize(y,new h.UnaryExpression(P.value,O)),this.context.strict&&O.operator==="delete"&&O.argument.type===p.Syntax.Identifier&&this.tolerateError(l.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else this.context.await&&this.matchContextualKeyword("await")?O=this.parseAwaitExpression():O=this.parseUpdateExpression();return O},C.prototype.parseExponentiationExpression=function(){var O=this.lookahead,y=this.inheritCoverGrammar(this.parseUnaryExpression);if(y.type!==p.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var P=y,w=this.isolateCoverGrammar(this.parseExponentiationExpression);y=this.finalize(this.startNode(O),new h.BinaryExpression("**",P,w))}return y},C.prototype.binaryPrecedence=function(O){var y=O.value,P;return O.type===7?P=this.operatorPrecedence[y]||0:O.type===4?P=y==="instanceof"||this.context.allowIn&&y==="in"?7:0:P=0,P},C.prototype.parseBinaryExpression=function(){var O=this.lookahead,y=this.inheritCoverGrammar(this.parseExponentiationExpression),P=this.lookahead,w=this.binaryPrecedence(P);if(w>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var D=[O,this.lookahead],A=y,_=this.isolateCoverGrammar(this.parseExponentiationExpression),I=[A,P.value,_],Q=[w];w=this.binaryPrecedence(this.lookahead),!(w<=0);){for(;I.length>2&&w<=Q[Q.length-1];){_=I.pop();var U=I.pop();Q.pop(),A=I.pop(),D.pop();var j=this.startNode(D[D.length-1]);I.push(this.finalize(j,new h.BinaryExpression(U,A,_)))}I.push(this.nextToken().value),Q.push(w),D.push(this.lookahead),I.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var z=I.length-1;y=I[z];for(var N=D.pop();z>1;){var R=D.pop(),B=N&&N.lineStart,j=this.startNode(R,B),U=I[z-1];y=this.finalize(j,new h.BinaryExpression(U,I[z-2],y)),z-=2,N=R}}return y},C.prototype.parseConditionalExpression=function(){var O=this.lookahead,y=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var P=this.context.allowIn;this.context.allowIn=!0;var w=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=P,this.expect(":");var D=this.isolateCoverGrammar(this.parseAssignmentExpression);y=this.finalize(this.startNode(O),new h.ConditionalExpression(y,w,D)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return y},C.prototype.checkPatternParam=function(O,y){switch(y.type){case p.Syntax.Identifier:this.validateParam(O,y,y.name);break;case p.Syntax.RestElement:this.checkPatternParam(O,y.argument);break;case p.Syntax.AssignmentPattern:this.checkPatternParam(O,y.left);break;case p.Syntax.ArrayPattern:for(var P=0;P<y.elements.length;P++)y.elements[P]!==null&&this.checkPatternParam(O,y.elements[P]);break;case p.Syntax.ObjectPattern:for(var P=0;P<y.properties.length;P++)this.checkPatternParam(O,y.properties[P].value);break}O.simple=O.simple&&y instanceof h.Identifier},C.prototype.reinterpretAsCoverFormalsList=function(O){var y=[O],P,w=!1;switch(O.type){case p.Syntax.Identifier:break;case m:y=O.params,w=O.async;break;default:return null}P={simple:!0,paramSet:{}};for(var D=0;D<y.length;++D){var A=y[D];A.type===p.Syntax.AssignmentPattern?A.right.type===p.Syntax.YieldExpression&&(A.right.argument&&this.throwUnexpectedToken(this.lookahead),A.right.type=p.Syntax.Identifier,A.right.name="yield",delete A.right.argument,delete A.right.delegate):w&&A.type===p.Syntax.Identifier&&A.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(P,A),y[D]=A}if(this.context.strict||!this.context.allowYield)for(var D=0;D<y.length;++D){var A=y[D];A.type===p.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(P.message===l.Messages.StrictParamDupe){var _=this.context.strict?P.stricted:P.firstRestricted;this.throwUnexpectedToken(_,P.message)}return{simple:P.simple,params:y,stricted:P.stricted,firstRestricted:P.firstRestricted,message:P.message}},C.prototype.parseAssignmentExpression=function(){var O;if(!this.context.allowYield&&this.matchKeyword("yield"))O=this.parseYieldExpression();else{var y=this.lookahead,P=y;if(O=this.parseConditionalExpression(),P.type===3&&P.lineNumber===this.lookahead.lineNumber&&P.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var w=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(w),O={type:m,params:[w],async:!0}}if(O.type===m||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var D=O.async,A=this.reinterpretAsCoverFormalsList(O);if(A){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var _=this.context.strict,I=this.context.allowStrictDirective;this.context.allowStrictDirective=A.simple;var Q=this.context.allowYield,U=this.context.await;this.context.allowYield=!0,this.context.await=D;var j=this.startNode(y);this.expect("=>");var z=void 0;if(this.match("{")){var N=this.context.allowIn;this.context.allowIn=!0,z=this.parseFunctionSourceElements(),this.context.allowIn=N}else z=this.isolateCoverGrammar(this.parseAssignmentExpression);var R=z.type!==p.Syntax.BlockStatement;this.context.strict&&A.firstRestricted&&this.throwUnexpectedToken(A.firstRestricted,A.message),this.context.strict&&A.stricted&&this.tolerateUnexpectedToken(A.stricted,A.message),O=D?this.finalize(j,new h.AsyncArrowFunctionExpression(A.params,z,R)):this.finalize(j,new h.ArrowFunctionExpression(A.params,z,R)),this.context.strict=_,this.context.allowStrictDirective=I,this.context.allowYield=Q,this.context.await=U}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment),this.context.strict&&O.type===p.Syntax.Identifier){var B=O;this.scanner.isRestrictedWord(B.name)&&this.tolerateUnexpectedToken(P,l.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(B.name)&&this.tolerateUnexpectedToken(P,l.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(O):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),P=this.nextToken();var Z=P.value,G=this.isolateCoverGrammar(this.parseAssignmentExpression);O=this.finalize(this.startNode(y),new h.AssignmentExpression(Z,O,G)),this.context.firstCoverInitializedNameError=null}}return O},C.prototype.parseExpression=function(){var O=this.lookahead,y=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var P=[];for(P.push(y);this.lookahead.type!==2&&this.match(",");)this.nextToken(),P.push(this.isolateCoverGrammar(this.parseAssignmentExpression));y=this.finalize(this.startNode(O),new h.SequenceExpression(P))}return y},C.prototype.parseStatementListItem=function(){var O;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,l.Messages.IllegalExportDeclaration),O=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,l.Messages.IllegalImportDeclaration),O=this.parseImportDeclaration();break;case"const":O=this.parseLexicalDeclaration({inFor:!1});break;case"function":O=this.parseFunctionDeclaration();break;case"class":O=this.parseClassDeclaration();break;case"let":O=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:O=this.parseStatement();break}else O=this.parseStatement();return O},C.prototype.parseBlock=function(){var O=this.createNode();this.expect("{");for(var y=[];!this.match("}");)y.push(this.parseStatementListItem());return this.expect("}"),this.finalize(O,new h.BlockStatement(y))},C.prototype.parseLexicalBinding=function(O,y){var P=this.createNode(),w=[],D=this.parsePattern(w,O);this.context.strict&&D.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(D.name)&&this.tolerateError(l.Messages.StrictVarName);var A=null;return O==="const"?!this.matchKeyword("in")&&!this.matchContextualKeyword("of")&&(this.match("=")?(this.nextToken(),A=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(l.Messages.DeclarationMissingInitializer,"const")):(!y.inFor&&D.type!==p.Syntax.Identifier||this.match("="))&&(this.expect("="),A=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(P,new h.VariableDeclarator(D,A))},C.prototype.parseBindingList=function(O,y){for(var P=[this.parseLexicalBinding(O,y)];this.match(",");)this.nextToken(),P.push(this.parseLexicalBinding(O,y));return P},C.prototype.isLexicalDeclaration=function(){var O=this.scanner.saveState();this.scanner.scanComments();var y=this.scanner.lex();return this.scanner.restoreState(O),y.type===3||y.type===7&&y.value==="["||y.type===7&&y.value==="{"||y.type===4&&y.value==="let"||y.type===4&&y.value==="yield"},C.prototype.parseLexicalDeclaration=function(O){var y=this.createNode(),P=this.nextToken().value;o.assert(P==="let"||P==="const","Lexical declaration must be either let or const");var w=this.parseBindingList(P,O);return this.consumeSemicolon(),this.finalize(y,new h.VariableDeclaration(w,P))},C.prototype.parseBindingRestElement=function(O,y){var P=this.createNode();this.expect("...");var w=this.parsePattern(O,y);return this.finalize(P,new h.RestElement(w))},C.prototype.parseArrayPattern=function(O,y){var P=this.createNode();this.expect("[");for(var w=[];!this.match("]");)if(this.match(","))this.nextToken(),w.push(null);else{if(this.match("...")){w.push(this.parseBindingRestElement(O,y));break}else w.push(this.parsePatternWithDefault(O,y));this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(P,new h.ArrayPattern(w))},C.prototype.parsePropertyPattern=function(O,y){var P=this.createNode(),w=!1,D=!1,A=!1,_,I;if(this.lookahead.type===3){var Q=this.lookahead;_=this.parseVariableIdentifier();var U=this.finalize(P,new h.Identifier(Q.value));if(this.match("=")){O.push(Q),D=!0,this.nextToken();var j=this.parseAssignmentExpression();I=this.finalize(this.startNode(Q),new h.AssignmentPattern(U,j))}else this.match(":")?(this.expect(":"),I=this.parsePatternWithDefault(O,y)):(O.push(Q),D=!0,I=U)}else w=this.match("["),_=this.parseObjectPropertyKey(),this.expect(":"),I=this.parsePatternWithDefault(O,y);return this.finalize(P,new h.Property("init",_,w,I,A,D))},C.prototype.parseObjectPattern=function(O,y){var P=this.createNode(),w=[];for(this.expect("{");!this.match("}");)w.push(this.parsePropertyPattern(O,y)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(P,new h.ObjectPattern(w))},C.prototype.parsePattern=function(O,y){var P;return this.match("[")?P=this.parseArrayPattern(O,y):this.match("{")?P=this.parseObjectPattern(O,y):(this.matchKeyword("let")&&(y==="const"||y==="let")&&this.tolerateUnexpectedToken(this.lookahead,l.Messages.LetInLexicalBinding),O.push(this.lookahead),P=this.parseVariableIdentifier(y)),P},C.prototype.parsePatternWithDefault=function(O,y){var P=this.lookahead,w=this.parsePattern(O,y);if(this.match("=")){this.nextToken();var D=this.context.allowYield;this.context.allowYield=!0;var A=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=D,w=this.finalize(this.startNode(P),new h.AssignmentPattern(w,A))}return w},C.prototype.parseVariableIdentifier=function(O){var y=this.createNode(),P=this.nextToken();return P.type===4&&P.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(P,l.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(P):P.type!==3?this.context.strict&&P.type===4&&this.scanner.isStrictModeReservedWord(P.value)?this.tolerateUnexpectedToken(P,l.Messages.StrictReservedWord):(this.context.strict||P.value!=="let"||O!=="var")&&this.throwUnexpectedToken(P):(this.context.isModule||this.context.await)&&P.type===3&&P.value==="await"&&this.tolerateUnexpectedToken(P),this.finalize(y,new h.Identifier(P.value))},C.prototype.parseVariableDeclaration=function(O){var y=this.createNode(),P=[],w=this.parsePattern(P,"var");this.context.strict&&w.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(w.name)&&this.tolerateError(l.Messages.StrictVarName);var D=null;return this.match("=")?(this.nextToken(),D=this.isolateCoverGrammar(this.parseAssignmentExpression)):w.type!==p.Syntax.Identifier&&!O.inFor&&this.expect("="),this.finalize(y,new h.VariableDeclarator(w,D))},C.prototype.parseVariableDeclarationList=function(O){var y={inFor:O.inFor},P=[];for(P.push(this.parseVariableDeclaration(y));this.match(",");)this.nextToken(),P.push(this.parseVariableDeclaration(y));return P},C.prototype.parseVariableStatement=function(){var O=this.createNode();this.expectKeyword("var");var y=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(O,new h.VariableDeclaration(y,"var"))},C.prototype.parseEmptyStatement=function(){var O=this.createNode();return this.expect(";"),this.finalize(O,new h.EmptyStatement)},C.prototype.parseExpressionStatement=function(){var O=this.createNode(),y=this.parseExpression();return this.consumeSemicolon(),this.finalize(O,new h.ExpressionStatement(y))},C.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(l.Messages.StrictFunction),this.parseStatement()},C.prototype.parseIfStatement=function(){var O=this.createNode(),y,P=null;this.expectKeyword("if"),this.expect("(");var w=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement)):(this.expect(")"),y=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),P=this.parseIfClause())),this.finalize(O,new h.IfStatement(w,y,P))},C.prototype.parseDoWhileStatement=function(){var O=this.createNode();this.expectKeyword("do");var y=this.context.inIteration;this.context.inIteration=!0;var P=this.parseStatement();this.context.inIteration=y,this.expectKeyword("while"),this.expect("(");var w=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(O,new h.DoWhileStatement(P,w))},C.prototype.parseWhileStatement=function(){var O=this.createNode(),y;this.expectKeyword("while"),this.expect("(");var P=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement);else{this.expect(")");var w=this.context.inIteration;this.context.inIteration=!0,y=this.parseStatement(),this.context.inIteration=w}return this.finalize(O,new h.WhileStatement(P,y))},C.prototype.parseForStatement=function(){var O=null,y=null,P=null,w=!0,D,A,_=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){O=this.createNode(),this.nextToken();var I=this.context.allowIn;this.context.allowIn=!1;var Q=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=I,Q.length===1&&this.matchKeyword("in")){var U=Q[0];U.init&&(U.id.type===p.Syntax.ArrayPattern||U.id.type===p.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(l.Messages.ForInOfLoopInitializer,"for-in"),O=this.finalize(O,new h.VariableDeclaration(Q,"var")),this.nextToken(),D=O,A=this.parseExpression(),O=null}else Q.length===1&&Q[0].init===null&&this.matchContextualKeyword("of")?(O=this.finalize(O,new h.VariableDeclaration(Q,"var")),this.nextToken(),D=O,A=this.parseAssignmentExpression(),O=null,w=!1):(O=this.finalize(O,new h.VariableDeclaration(Q,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){O=this.createNode();var j=this.nextToken().value;if(!this.context.strict&&this.lookahead.value==="in")O=this.finalize(O,new h.Identifier(j)),this.nextToken(),D=O,A=this.parseExpression(),O=null;else{var I=this.context.allowIn;this.context.allowIn=!1;var Q=this.parseBindingList(j,{inFor:!0});this.context.allowIn=I,Q.length===1&&Q[0].init===null&&this.matchKeyword("in")?(O=this.finalize(O,new h.VariableDeclaration(Q,j)),this.nextToken(),D=O,A=this.parseExpression(),O=null):Q.length===1&&Q[0].init===null&&this.matchContextualKeyword("of")?(O=this.finalize(O,new h.VariableDeclaration(Q,j)),this.nextToken(),D=O,A=this.parseAssignmentExpression(),O=null,w=!1):(this.consumeSemicolon(),O=this.finalize(O,new h.VariableDeclaration(Q,j)))}}else{var z=this.lookahead,I=this.context.allowIn;if(this.context.allowIn=!1,O=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=I,this.matchKeyword("in"))(!this.context.isAssignmentTarget||O.type===p.Syntax.AssignmentExpression)&&this.tolerateError(l.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(O),D=O,A=this.parseExpression(),O=null;else if(this.matchContextualKeyword("of"))(!this.context.isAssignmentTarget||O.type===p.Syntax.AssignmentExpression)&&this.tolerateError(l.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(O),D=O,A=this.parseAssignmentExpression(),O=null,w=!1;else{if(this.match(",")){for(var N=[O];this.match(",");)this.nextToken(),N.push(this.isolateCoverGrammar(this.parseAssignmentExpression));O=this.finalize(this.startNode(z),new h.SequenceExpression(N))}this.expect(";")}}typeof D>"u"&&(this.match(";")||(y=this.parseExpression()),this.expect(";"),this.match(")")||(P=this.parseExpression()));var R;if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),R=this.finalize(this.createNode(),new h.EmptyStatement);else{this.expect(")");var B=this.context.inIteration;this.context.inIteration=!0,R=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=B}return typeof D>"u"?this.finalize(_,new h.ForStatement(O,y,P,R)):w?this.finalize(_,new h.ForInStatement(D,A,R)):this.finalize(_,new h.ForOfStatement(D,A,R))},C.prototype.parseContinueStatement=function(){var O=this.createNode();this.expectKeyword("continue");var y=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var P=this.parseVariableIdentifier();y=P;var w="$"+P.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,w)||this.throwError(l.Messages.UnknownLabel,P.name)}return this.consumeSemicolon(),y===null&&!this.context.inIteration&&this.throwError(l.Messages.IllegalContinue),this.finalize(O,new h.ContinueStatement(y))},C.prototype.parseBreakStatement=function(){var O=this.createNode();this.expectKeyword("break");var y=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var P=this.parseVariableIdentifier(),w="$"+P.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,w)||this.throwError(l.Messages.UnknownLabel,P.name),y=P}return this.consumeSemicolon(),y===null&&!this.context.inIteration&&!this.context.inSwitch&&this.throwError(l.Messages.IllegalBreak),this.finalize(O,new h.BreakStatement(y))},C.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(l.Messages.IllegalReturn);var O=this.createNode();this.expectKeyword("return");var y=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&this.lookahead.type!==2||this.lookahead.type===8||this.lookahead.type===10,P=y?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(O,new h.ReturnStatement(P))},C.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(l.Messages.StrictModeWith);var O=this.createNode(),y;this.expectKeyword("with"),this.expect("(");var P=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement)):(this.expect(")"),y=this.parseStatement()),this.finalize(O,new h.WithStatement(P,y))},C.prototype.parseSwitchCase=function(){var O=this.createNode(),y;this.matchKeyword("default")?(this.nextToken(),y=null):(this.expectKeyword("case"),y=this.parseExpression()),this.expect(":");for(var P=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)P.push(this.parseStatementListItem());return this.finalize(O,new h.SwitchCase(y,P))},C.prototype.parseSwitchStatement=function(){var O=this.createNode();this.expectKeyword("switch"),this.expect("(");var y=this.parseExpression();this.expect(")");var P=this.context.inSwitch;this.context.inSwitch=!0;var w=[],D=!1;for(this.expect("{");!this.match("}");){var A=this.parseSwitchCase();A.test===null&&(D&&this.throwError(l.Messages.MultipleDefaultsInSwitch),D=!0),w.push(A)}return this.expect("}"),this.context.inSwitch=P,this.finalize(O,new h.SwitchStatement(y,w))},C.prototype.parseLabelledStatement=function(){var O=this.createNode(),y=this.parseExpression(),P;if(y.type===p.Syntax.Identifier&&this.match(":")){this.nextToken();var w=y,D="$"+w.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,D)&&this.throwError(l.Messages.Redeclaration,"Label",w.name),this.context.labelSet[D]=!0;var A=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),A=this.parseClassDeclaration();else if(this.matchKeyword("function")){var _=this.lookahead,I=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(_,l.Messages.StrictFunction):I.generator&&this.tolerateUnexpectedToken(_,l.Messages.GeneratorInLegacyContext),A=I}else A=this.parseStatement();delete this.context.labelSet[D],P=new h.LabeledStatement(w,A)}else this.consumeSemicolon(),P=new h.ExpressionStatement(y);return this.finalize(O,P)},C.prototype.parseThrowStatement=function(){var O=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(l.Messages.NewlineAfterThrow);var y=this.parseExpression();return this.consumeSemicolon(),this.finalize(O,new h.ThrowStatement(y))},C.prototype.parseCatchClause=function(){var O=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var y=[],P=this.parsePattern(y),w={},D=0;D<y.length;D++){var A="$"+y[D].value;Object.prototype.hasOwnProperty.call(w,A)&&this.tolerateError(l.Messages.DuplicateBinding,y[D].value),w[A]=!0}this.context.strict&&P.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(P.name)&&this.tolerateError(l.Messages.StrictCatchVariable),this.expect(")");var _=this.parseBlock();return this.finalize(O,new h.CatchClause(P,_))},C.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},C.prototype.parseTryStatement=function(){var O=this.createNode();this.expectKeyword("try");var y=this.parseBlock(),P=this.matchKeyword("catch")?this.parseCatchClause():null,w=this.matchKeyword("finally")?this.parseFinallyClause():null;return!P&&!w&&this.throwError(l.Messages.NoCatchOrFinally),this.finalize(O,new h.TryStatement(y,P,w))},C.prototype.parseDebuggerStatement=function(){var O=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(O,new h.DebuggerStatement)},C.prototype.parseStatement=function(){var O;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:O=this.parseExpressionStatement();break;case 7:var y=this.lookahead.value;y==="{"?O=this.parseBlock():y==="("?O=this.parseExpressionStatement():y===";"?O=this.parseEmptyStatement():O=this.parseExpressionStatement();break;case 3:O=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":O=this.parseBreakStatement();break;case"continue":O=this.parseContinueStatement();break;case"debugger":O=this.parseDebuggerStatement();break;case"do":O=this.parseDoWhileStatement();break;case"for":O=this.parseForStatement();break;case"function":O=this.parseFunctionDeclaration();break;case"if":O=this.parseIfStatement();break;case"return":O=this.parseReturnStatement();break;case"switch":O=this.parseSwitchStatement();break;case"throw":O=this.parseThrowStatement();break;case"try":O=this.parseTryStatement();break;case"var":O=this.parseVariableStatement();break;case"while":O=this.parseWhileStatement();break;case"with":O=this.parseWithStatement();break;default:O=this.parseExpressionStatement();break}break;default:O=this.throwUnexpectedToken(this.lookahead)}return O},C.prototype.parseFunctionSourceElements=function(){var O=this.createNode();this.expect("{");var y=this.parseDirectivePrologues(),P=this.context.labelSet,w=this.context.inIteration,D=this.context.inSwitch,A=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)y.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=P,this.context.inIteration=w,this.context.inSwitch=D,this.context.inFunctionBody=A,this.finalize(O,new h.BlockStatement(y))},C.prototype.validateParam=function(O,y,P){var w="$"+P;this.context.strict?(this.scanner.isRestrictedWord(P)&&(O.stricted=y,O.message=l.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(O.paramSet,w)&&(O.stricted=y,O.message=l.Messages.StrictParamDupe)):O.firstRestricted||(this.scanner.isRestrictedWord(P)?(O.firstRestricted=y,O.message=l.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(P)?(O.firstRestricted=y,O.message=l.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(O.paramSet,w)&&(O.stricted=y,O.message=l.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(O.paramSet,w,{value:!0,enumerable:!0,writable:!0,configurable:!0}):O.paramSet[w]=!0},C.prototype.parseRestElement=function(O){var y=this.createNode();this.expect("...");var P=this.parsePattern(O);return this.match("=")&&this.throwError(l.Messages.DefaultRestParameter),this.match(")")||this.throwError(l.Messages.ParameterAfterRestParameter),this.finalize(y,new h.RestElement(P))},C.prototype.parseFormalParameter=function(O){for(var y=[],P=this.match("...")?this.parseRestElement(y):this.parsePatternWithDefault(y),w=0;w<y.length;w++)this.validateParam(O,y[w],y[w].value);O.simple=O.simple&&P instanceof h.Identifier,O.params.push(P)},C.prototype.parseFormalParameters=function(O){var y;if(y={simple:!0,params:[],firstRestricted:O},this.expect("("),!this.match(")"))for(y.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(y),!(this.match(")")||(this.expect(","),this.match(")")))););return this.expect(")"),{simple:y.simple,params:y.params,stricted:y.stricted,firstRestricted:y.firstRestricted,message:y.message}},C.prototype.matchAsyncFunction=function(){var O=this.matchContextualKeyword("async");if(O){var y=this.scanner.saveState();this.scanner.scanComments();var P=this.scanner.lex();this.scanner.restoreState(y),O=y.lineNumber===P.lineNumber&&P.type===4&&P.value==="function"}return O},C.prototype.parseFunctionDeclaration=function(O){var y=this.createNode(),P=this.matchContextualKeyword("async");P&&this.nextToken(),this.expectKeyword("function");var w=P?!1:this.match("*");w&&this.nextToken();var D,A=null,_=null;if(!O||!this.match("(")){var I=this.lookahead;A=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(I.value)&&this.tolerateUnexpectedToken(I,l.Messages.StrictFunctionName):this.scanner.isRestrictedWord(I.value)?(_=I,D=l.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(I.value)&&(_=I,D=l.Messages.StrictReservedWord)}var Q=this.context.await,U=this.context.allowYield;this.context.await=P,this.context.allowYield=!w;var j=this.parseFormalParameters(_),z=j.params,N=j.stricted;_=j.firstRestricted,j.message&&(D=j.message);var R=this.context.strict,B=this.context.allowStrictDirective;this.context.allowStrictDirective=j.simple;var Z=this.parseFunctionSourceElements();return this.context.strict&&_&&this.throwUnexpectedToken(_,D),this.context.strict&&N&&this.tolerateUnexpectedToken(N,D),this.context.strict=R,this.context.allowStrictDirective=B,this.context.await=Q,this.context.allowYield=U,P?this.finalize(y,new h.AsyncFunctionDeclaration(A,z,Z)):this.finalize(y,new h.FunctionDeclaration(A,z,Z,w))},C.prototype.parseFunctionExpression=function(){var O=this.createNode(),y=this.matchContextualKeyword("async");y&&this.nextToken(),this.expectKeyword("function");var P=y?!1:this.match("*");P&&this.nextToken();var w,D=null,A,_=this.context.await,I=this.context.allowYield;if(this.context.await=y,this.context.allowYield=!P,!this.match("(")){var Q=this.lookahead;D=!this.context.strict&&!P&&this.matchKeyword("yield")?this.parseIdentifierName():this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(Q.value)&&this.tolerateUnexpectedToken(Q,l.Messages.StrictFunctionName):this.scanner.isRestrictedWord(Q.value)?(A=Q,w=l.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(Q.value)&&(A=Q,w=l.Messages.StrictReservedWord)}var U=this.parseFormalParameters(A),j=U.params,z=U.stricted;A=U.firstRestricted,U.message&&(w=U.message);var N=this.context.strict,R=this.context.allowStrictDirective;this.context.allowStrictDirective=U.simple;var B=this.parseFunctionSourceElements();return this.context.strict&&A&&this.throwUnexpectedToken(A,w),this.context.strict&&z&&this.tolerateUnexpectedToken(z,w),this.context.strict=N,this.context.allowStrictDirective=R,this.context.await=_,this.context.allowYield=I,y?this.finalize(O,new h.AsyncFunctionExpression(D,j,B)):this.finalize(O,new h.FunctionExpression(D,j,B,P))},C.prototype.parseDirective=function(){var O=this.lookahead,y=this.createNode(),P=this.parseExpression(),w=P.type===p.Syntax.Literal?this.getTokenRaw(O).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(y,w?new h.Directive(P,w):new h.ExpressionStatement(P))},C.prototype.parseDirectivePrologues=function(){for(var O=null,y=[];;){var P=this.lookahead;if(P.type!==8)break;var w=this.parseDirective();y.push(w);var D=w.directive;if(typeof D!="string")break;D==="use strict"?(this.context.strict=!0,O&&this.tolerateUnexpectedToken(O,l.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(P,l.Messages.IllegalLanguageModeDirective)):!O&&P.octal&&(O=P)}return y},C.prototype.qualifiedPropertyName=function(O){switch(O.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return O.value==="["}return!1},C.prototype.parseGetterMethod=function(){var O=this.createNode(),y=!1,P=this.context.allowYield;this.context.allowYield=!y;var w=this.parseFormalParameters();w.params.length>0&&this.tolerateError(l.Messages.BadGetterArity);var D=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(O,new h.FunctionExpression(null,w.params,D,y))},C.prototype.parseSetterMethod=function(){var O=this.createNode(),y=!1,P=this.context.allowYield;this.context.allowYield=!y;var w=this.parseFormalParameters();w.params.length!==1?this.tolerateError(l.Messages.BadSetterArity):w.params[0]instanceof h.RestElement&&this.tolerateError(l.Messages.BadSetterRestParameter);var D=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(O,new h.FunctionExpression(null,w.params,D,y))},C.prototype.parseGeneratorMethod=function(){var O=this.createNode(),y=!0,P=this.context.allowYield;this.context.allowYield=!0;var w=this.parseFormalParameters();this.context.allowYield=!1;var D=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(O,new h.FunctionExpression(null,w.params,D,y))},C.prototype.isStartOfExpression=function(){var O=!0,y=this.lookahead.value;switch(this.lookahead.type){case 7:O=y==="["||y==="("||y==="{"||y==="+"||y==="-"||y==="!"||y==="~"||y==="++"||y==="--"||y==="/"||y==="/=";break;case 4:O=y==="class"||y==="delete"||y==="function"||y==="let"||y==="new"||y==="super"||y==="this"||y==="typeof"||y==="void"||y==="yield";break}return O},C.prototype.parseYieldExpression=function(){var O=this.createNode();this.expectKeyword("yield");var y=null,P=!1;if(!this.hasLineTerminator){var w=this.context.allowYield;this.context.allowYield=!1,P=this.match("*"),P?(this.nextToken(),y=this.parseAssignmentExpression()):this.isStartOfExpression()&&(y=this.parseAssignmentExpression()),this.context.allowYield=w}return this.finalize(O,new h.YieldExpression(y,P))},C.prototype.parseClassElement=function(O){var y=this.lookahead,P=this.createNode(),w="",D=null,A=null,_=!1,I=!1,Q=!1,U=!1;if(this.match("*"))this.nextToken();else{_=this.match("["),D=this.parseObjectPropertyKey();var j=D;if(j.name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(y=this.lookahead,Q=!0,_=this.match("["),this.match("*")?this.nextToken():D=this.parseObjectPropertyKey()),y.type===3&&!this.hasLineTerminator&&y.value==="async"){var z=this.lookahead.value;z!==":"&&z!=="("&&z!=="*"&&(U=!0,y=this.lookahead,D=this.parseObjectPropertyKey(),y.type===3&&y.value==="constructor"&&this.tolerateUnexpectedToken(y,l.Messages.ConstructorIsAsync))}}var N=this.qualifiedPropertyName(this.lookahead);return y.type===3?y.value==="get"&&N?(w="get",_=this.match("["),D=this.parseObjectPropertyKey(),this.context.allowYield=!1,A=this.parseGetterMethod()):y.value==="set"&&N&&(w="set",_=this.match("["),D=this.parseObjectPropertyKey(),A=this.parseSetterMethod()):y.type===7&&y.value==="*"&&N&&(w="init",_=this.match("["),D=this.parseObjectPropertyKey(),A=this.parseGeneratorMethod(),I=!0),!w&&D&&this.match("(")&&(w="init",A=U?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),I=!0),w||this.throwUnexpectedToken(this.lookahead),w==="init"&&(w="method"),_||(Q&&this.isPropertyKey(D,"prototype")&&this.throwUnexpectedToken(y,l.Messages.StaticPrototype),!Q&&this.isPropertyKey(D,"constructor")&&((w!=="method"||!I||A&&A.generator)&&this.throwUnexpectedToken(y,l.Messages.ConstructorSpecialMethod),O.value?this.throwUnexpectedToken(y,l.Messages.DuplicateConstructor):O.value=!0,w="constructor")),this.finalize(P,new h.MethodDefinition(D,_,A,w,Q))},C.prototype.parseClassElementList=function(){var O=[],y={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():O.push(this.parseClassElement(y));return this.expect("}"),O},C.prototype.parseClassBody=function(){var O=this.createNode(),y=this.parseClassElementList();return this.finalize(O,new h.ClassBody(y))},C.prototype.parseClassDeclaration=function(O){var y=this.createNode(),P=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var w=O&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),D=null;this.matchKeyword("extends")&&(this.nextToken(),D=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var A=this.parseClassBody();return this.context.strict=P,this.finalize(y,new h.ClassDeclaration(w,D,A))},C.prototype.parseClassExpression=function(){var O=this.createNode(),y=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var P=this.lookahead.type===3?this.parseVariableIdentifier():null,w=null;this.matchKeyword("extends")&&(this.nextToken(),w=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var D=this.parseClassBody();return this.context.strict=y,this.finalize(O,new h.ClassExpression(P,w,D))},C.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var O=this.createNode(),y=this.parseDirectivePrologues();this.lookahead.type!==2;)y.push(this.parseStatementListItem());return this.finalize(O,new h.Module(y))},C.prototype.parseScript=function(){for(var O=this.createNode(),y=this.parseDirectivePrologues();this.lookahead.type!==2;)y.push(this.parseStatementListItem());return this.finalize(O,new h.Script(y))},C.prototype.parseModuleSpecifier=function(){var O=this.createNode();this.lookahead.type!==8&&this.throwError(l.Messages.InvalidModuleSpecifier);var y=this.nextToken(),P=this.getTokenRaw(y);return this.finalize(O,new h.Literal(y.value,P))},C.prototype.parseImportSpecifier=function(){var O=this.createNode(),y,P;return this.lookahead.type===3?(y=this.parseVariableIdentifier(),P=y,this.matchContextualKeyword("as")&&(this.nextToken(),P=this.parseVariableIdentifier())):(y=this.parseIdentifierName(),P=y,this.matchContextualKeyword("as")?(this.nextToken(),P=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(O,new h.ImportSpecifier(P,y))},C.prototype.parseNamedImports=function(){this.expect("{");for(var O=[];!this.match("}");)O.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),O},C.prototype.parseImportDefaultSpecifier=function(){var O=this.createNode(),y=this.parseIdentifierName();return this.finalize(O,new h.ImportDefaultSpecifier(y))},C.prototype.parseImportNamespaceSpecifier=function(){var O=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(l.Messages.NoAsAfterImportNamespace),this.nextToken();var y=this.parseIdentifierName();return this.finalize(O,new h.ImportNamespaceSpecifier(y))},C.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(l.Messages.IllegalImportDeclaration);var O=this.createNode();this.expectKeyword("import");var y,P=[];if(this.lookahead.type===8)y=this.parseModuleSpecifier();else{if(this.match("{")?P=P.concat(this.parseNamedImports()):this.match("*")?P.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(P.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?P.push(this.parseImportNamespaceSpecifier()):this.match("{")?P=P.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var w=this.lookahead.value?l.Messages.UnexpectedToken:l.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}this.nextToken(),y=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(O,new h.ImportDeclaration(P,y))},C.prototype.parseExportSpecifier=function(){var O=this.createNode(),y=this.parseIdentifierName(),P=y;return this.matchContextualKeyword("as")&&(this.nextToken(),P=this.parseIdentifierName()),this.finalize(O,new h.ExportSpecifier(y,P))},C.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(l.Messages.IllegalExportDeclaration);var O=this.createNode();this.expectKeyword("export");var y;if(this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var P=this.parseFunctionDeclaration(!0);y=this.finalize(O,new h.ExportDefaultDeclaration(P))}else if(this.matchKeyword("class")){var P=this.parseClassDeclaration(!0);y=this.finalize(O,new h.ExportDefaultDeclaration(P))}else if(this.matchContextualKeyword("async")){var P=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression();y=this.finalize(O,new h.ExportDefaultDeclaration(P))}else{this.matchContextualKeyword("from")&&this.throwError(l.Messages.UnexpectedToken,this.lookahead.value);var P=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),y=this.finalize(O,new h.ExportDefaultDeclaration(P))}else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var w=this.lookahead.value?l.Messages.UnexpectedToken:l.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}this.nextToken();var D=this.parseModuleSpecifier();this.consumeSemicolon(),y=this.finalize(O,new h.ExportAllDeclaration(D))}else if(this.lookahead.type===4){var P=void 0;switch(this.lookahead.value){case"let":case"const":P=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":P=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}y=this.finalize(O,new h.ExportNamedDeclaration(P,[],null))}else if(this.matchAsyncFunction()){var P=this.parseFunctionDeclaration();y=this.finalize(O,new h.ExportNamedDeclaration(P,[],null))}else{var A=[],_=null,I=!1;for(this.expect("{");!this.match("}");)I=I||this.matchKeyword("default"),A.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");if(this.expect("}"),this.matchContextualKeyword("from"))this.nextToken(),_=this.parseModuleSpecifier(),this.consumeSemicolon();else if(I){var w=this.lookahead.value?l.Messages.UnexpectedToken:l.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}else this.consumeSemicolon();y=this.finalize(O,new h.ExportNamedDeclaration(null,A,_))}return y},C}();n.Parser=v},function(e,n){Object.defineProperty(n,"__esModule",{value:!0});function r(o,s){if(!o)throw new Error("ASSERT: "+s)}n.assert=r},function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(){this.errors=[],this.tolerant=!1}return o.prototype.recordError=function(s){this.errors.push(s)},o.prototype.tolerate=function(s){if(this.tolerant)this.recordError(s);else throw s},o.prototype.constructError=function(s,l){var h=new Error(s);try{throw h}catch(c){Object.create&&Object.defineProperty&&(h=Object.create(c),Object.defineProperty(h,"column",{value:l}))}return h},o.prototype.createError=function(s,l,h,c){var p="Line "+l+": "+c,d=this.constructError(p,h);return d.index=s,d.lineNumber=l,d.description=c,d},o.prototype.throwError=function(s,l,h,c){throw this.createError(s,l,h,c)},o.prototype.tolerateError=function(s,l,h,c){var p=this.createError(s,l,h,c);if(this.tolerant)this.recordError(p);else throw p},o}();n.ErrorHandler=r},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(9),s=r(4),l=r(11);function h(d){return"0123456789abcdef".indexOf(d.toLowerCase())}function c(d){return"01234567".indexOf(d)}var p=function(){function d(m,v){this.source=m,this.errorHandler=v,this.trackComment=!1,this.isModule=!1,this.length=m.length,this.index=0,this.lineNumber=m.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return d.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},d.prototype.restoreState=function(m){this.index=m.index,this.lineNumber=m.lineNumber,this.lineStart=m.lineStart},d.prototype.eof=function(){return this.index>=this.length},d.prototype.throwUnexpectedToken=function(m){return m===void 0&&(m=l.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},d.prototype.tolerateUnexpectedToken=function(m){m===void 0&&(m=l.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},d.prototype.skipSingleLineComment=function(m){var v=[],C,O;for(this.trackComment&&(v=[],C=this.index-m,O={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{}});!this.eof();){var y=this.source.charCodeAt(this.index);if(++this.index,s.Character.isLineTerminator(y)){if(this.trackComment){O.end={line:this.lineNumber,column:this.index-this.lineStart-1};var P={multiLine:!1,slice:[C+m,this.index-1],range:[C,this.index-1],loc:O};v.push(P)}return y===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,v}}if(this.trackComment){O.end={line:this.lineNumber,column:this.index-this.lineStart};var P={multiLine:!1,slice:[C+m,this.index],range:[C,this.index],loc:O};v.push(P)}return v},d.prototype.skipMultiLineComment=function(){var m=[],v,C;for(this.trackComment&&(m=[],v=this.index-2,C={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var O=this.source.charCodeAt(this.index);if(s.Character.isLineTerminator(O))O===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(O===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){C.end={line:this.lineNumber,column:this.index-this.lineStart};var y={multiLine:!0,slice:[v+2,this.index-2],range:[v,this.index],loc:C};m.push(y)}return m}++this.index}else++this.index}if(this.trackComment){C.end={line:this.lineNumber,column:this.index-this.lineStart};var y={multiLine:!0,slice:[v+2,this.index],range:[v,this.index],loc:C};m.push(y)}return this.tolerateUnexpectedToken(),m},d.prototype.scanComments=function(){var m;this.trackComment&&(m=[]);for(var v=this.index===0;!this.eof();){var C=this.source.charCodeAt(this.index);if(s.Character.isWhiteSpace(C))++this.index;else if(s.Character.isLineTerminator(C))++this.index,C===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,v=!0;else if(C===47)if(C=this.source.charCodeAt(this.index+1),C===47){this.index+=2;var O=this.skipSingleLineComment(2);this.trackComment&&(m=m.concat(O)),v=!0}else if(C===42){this.index+=2;var O=this.skipMultiLineComment();this.trackComment&&(m=m.concat(O))}else break;else if(v&&C===45)if(this.source.charCodeAt(this.index+1)===45&&this.source.charCodeAt(this.index+2)===62){this.index+=3;var O=this.skipSingleLineComment(3);this.trackComment&&(m=m.concat(O))}else break;else if(C===60&&!this.isModule)if(this.source.slice(this.index+1,this.index+4)==="!--"){this.index+=4;var O=this.skipSingleLineComment(4);this.trackComment&&(m=m.concat(O))}else break;else break}return m},d.prototype.isFutureReservedWord=function(m){switch(m){case"enum":case"export":case"import":case"super":return!0;default:return!1}},d.prototype.isStrictModeReservedWord=function(m){switch(m){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},d.prototype.isRestrictedWord=function(m){return m==="eval"||m==="arguments"},d.prototype.isKeyword=function(m){switch(m.length){case 2:return m==="if"||m==="in"||m==="do";case 3:return m==="var"||m==="for"||m==="new"||m==="try"||m==="let";case 4:return m==="this"||m==="else"||m==="case"||m==="void"||m==="with"||m==="enum";case 5:return m==="while"||m==="break"||m==="catch"||m==="throw"||m==="const"||m==="yield"||m==="class"||m==="super";case 6:return m==="return"||m==="typeof"||m==="delete"||m==="switch"||m==="export"||m==="import";case 7:return m==="default"||m==="finally"||m==="extends";case 8:return m==="function"||m==="continue"||m==="debugger";case 10:return m==="instanceof";default:return!1}},d.prototype.codePointAt=function(m){var v=this.source.charCodeAt(m);if(v>=55296&&v<=56319){var C=this.source.charCodeAt(m+1);if(C>=56320&&C<=57343){var O=v;v=(O-55296)*1024+C-56320+65536}}return v},d.prototype.scanHexEscape=function(m){for(var v=m==="u"?4:2,C=0,O=0;O<v;++O)if(!this.eof()&&s.Character.isHexDigit(this.source.charCodeAt(this.index)))C=C*16+h(this.source[this.index++]);else return null;return String.fromCharCode(C)},d.prototype.scanUnicodeCodePointEscape=function(){var m=this.source[this.index],v=0;for(m==="}"&&this.throwUnexpectedToken();!this.eof()&&(m=this.source[this.index++],!!s.Character.isHexDigit(m.charCodeAt(0)));)v=v*16+h(m);return(v>1114111||m!=="}")&&this.throwUnexpectedToken(),s.Character.fromCodePoint(v)},d.prototype.getIdentifier=function(){for(var m=this.index++;!this.eof();){var v=this.source.charCodeAt(this.index);if(v===92)return this.index=m,this.getComplexIdentifier();if(v>=55296&&v<57343)return this.index=m,this.getComplexIdentifier();if(s.Character.isIdentifierPart(v))++this.index;else break}return this.source.slice(m,this.index)},d.prototype.getComplexIdentifier=function(){var m=this.codePointAt(this.index),v=s.Character.fromCodePoint(m);this.index+=v.length;var C;for(m===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,C=this.scanUnicodeCodePointEscape()):(C=this.scanHexEscape("u"),(C===null||C==="\\"||!s.Character.isIdentifierStart(C.charCodeAt(0)))&&this.throwUnexpectedToken()),v=C);!this.eof()&&(m=this.codePointAt(this.index),!!s.Character.isIdentifierPart(m));)C=s.Character.fromCodePoint(m),v+=C,this.index+=C.length,m===92&&(v=v.substr(0,v.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,C=this.scanUnicodeCodePointEscape()):(C=this.scanHexEscape("u"),(C===null||C==="\\"||!s.Character.isIdentifierPart(C.charCodeAt(0)))&&this.throwUnexpectedToken()),v+=C);return v},d.prototype.octalToDecimal=function(m){var v=m!=="0",C=c(m);return!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(v=!0,C=C*8+c(this.source[this.index++]),"0123".indexOf(m)>=0&&!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(C=C*8+c(this.source[this.index++]))),{code:C,octal:v}},d.prototype.scanIdentifier=function(){var m,v=this.index,C=this.source.charCodeAt(v)===92?this.getComplexIdentifier():this.getIdentifier();if(C.length===1?m=3:this.isKeyword(C)?m=4:C==="null"?m=5:C==="true"||C==="false"?m=1:m=3,m!==3&&v+C.length!==this.index){var O=this.index;this.index=v,this.tolerateUnexpectedToken(l.Messages.InvalidEscapedReservedWord),this.index=O}return{type:m,value:C,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}},d.prototype.scanPunctuator=function(){var m=this.index,v=this.source[this.index];switch(v){case"(":case"{":v==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,v="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:v=this.source.substr(this.index,4),v===">>>="?this.index+=4:(v=v.substr(0,3),v==="==="||v==="!=="||v===">>>"||v==="<<="||v===">>="||v==="**="?this.index+=3:(v=v.substr(0,2),v==="&&"||v==="||"||v==="=="||v==="!="||v==="+="||v==="-="||v==="*="||v==="/="||v==="++"||v==="--"||v==="<<"||v===">>"||v==="&="||v==="|="||v==="^="||v==="%="||v==="<="||v===">="||v==="=>"||v==="**"?this.index+=2:(v=this.source[this.index],"<>=!+-*%&|^/".indexOf(v)>=0&&++this.index)))}return this.index===m&&this.throwUnexpectedToken(),{type:7,value:v,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},d.prototype.scanHexLiteral=function(m){for(var v="";!this.eof()&&s.Character.isHexDigit(this.source.charCodeAt(this.index));)v+=this.source[this.index++];return v.length===0&&this.throwUnexpectedToken(),s.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+v,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},d.prototype.scanBinaryLiteral=function(m){for(var v="",C;!this.eof()&&(C=this.source[this.index],!(C!=="0"&&C!=="1"));)v+=this.source[this.index++];return v.length===0&&this.throwUnexpectedToken(),this.eof()||(C=this.source.charCodeAt(this.index),(s.Character.isIdentifierStart(C)||s.Character.isDecimalDigit(C))&&this.throwUnexpectedToken()),{type:6,value:parseInt(v,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},d.prototype.scanOctalLiteral=function(m,v){var C="",O=!1;for(s.Character.isOctalDigit(m.charCodeAt(0))?(O=!0,C="0"+this.source[this.index++]):++this.index;!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index));)C+=this.source[this.index++];return!O&&C.length===0&&this.throwUnexpectedToken(),(s.Character.isIdentifierStart(this.source.charCodeAt(this.index))||s.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(C,8),octal:O,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}},d.prototype.isImplicitOctalLiteral=function(){for(var m=this.index+1;m<this.length;++m){var v=this.source[m];if(v==="8"||v==="9")return!1;if(!s.Character.isOctalDigit(v.charCodeAt(0)))return!0}return!0},d.prototype.scanNumericLiteral=function(){var m=this.index,v=this.source[m];o.assert(s.Character.isDecimalDigit(v.charCodeAt(0))||v===".","Numeric literal must start with a decimal digit or a decimal point");var C="";if(v!=="."){if(C=this.source[this.index++],v=this.source[this.index],C==="0"){if(v==="x"||v==="X")return++this.index,this.scanHexLiteral(m);if(v==="b"||v==="B")return++this.index,this.scanBinaryLiteral(m);if(v==="o"||v==="O")return this.scanOctalLiteral(v,m);if(v&&s.Character.isOctalDigit(v.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(v,m)}for(;s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)C+=this.source[this.index++];v=this.source[this.index]}if(v==="."){for(C+=this.source[this.index++];s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)C+=this.source[this.index++];v=this.source[this.index]}if(v==="e"||v==="E")if(C+=this.source[this.index++],v=this.source[this.index],(v==="+"||v==="-")&&(C+=this.source[this.index++]),s.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)C+=this.source[this.index++];else this.throwUnexpectedToken();return s.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(C),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},d.prototype.scanStringLiteral=function(){var m=this.index,v=this.source[m];o.assert(v==="'"||v==='"',"String literal must starts with a quote"),++this.index;for(var C=!1,O="";!this.eof();){var y=this.source[this.index++];if(y===v){v="";break}else if(y==="\\")if(y=this.source[this.index++],!y||!s.Character.isLineTerminator(y.charCodeAt(0)))switch(y){case"u":if(this.source[this.index]==="{")++this.index,O+=this.scanUnicodeCodePointEscape();else{var P=this.scanHexEscape(y);P===null&&this.throwUnexpectedToken(),O+=P}break;case"x":var w=this.scanHexEscape(y);w===null&&this.throwUnexpectedToken(l.Messages.InvalidHexEscapeSequence),O+=w;break;case"n":O+=`
`;break;case"r":O+="\r";break;case"t":O+="	";break;case"b":O+="\b";break;case"f":O+="\f";break;case"v":O+="\v";break;case"8":case"9":O+=y,this.tolerateUnexpectedToken();break;default:if(y&&s.Character.isOctalDigit(y.charCodeAt(0))){var D=this.octalToDecimal(y);C=D.octal||C,O+=String.fromCharCode(D.code)}else O+=y;break}else++this.lineNumber,y==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else{if(s.Character.isLineTerminator(y.charCodeAt(0)))break;O+=y}}return v!==""&&(this.index=m,this.throwUnexpectedToken()),{type:8,value:O,octal:C,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},d.prototype.scanTemplate=function(){var m="",v=!1,C=this.index,O=this.source[C]==="`",y=!1,P=2;for(++this.index;!this.eof();){var w=this.source[this.index++];if(w==="`"){P=1,y=!0,v=!0;break}else if(w==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,v=!0;break}m+=w}else if(w==="\\")if(w=this.source[this.index++],s.Character.isLineTerminator(w.charCodeAt(0)))++this.lineNumber,w==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(w){case"n":m+=`
`;break;case"r":m+="\r";break;case"t":m+="	";break;case"u":if(this.source[this.index]==="{")++this.index,m+=this.scanUnicodeCodePointEscape();else{var D=this.index,A=this.scanHexEscape(w);A!==null?m+=A:(this.index=D,m+=w)}break;case"x":var _=this.scanHexEscape(w);_===null&&this.throwUnexpectedToken(l.Messages.InvalidHexEscapeSequence),m+=_;break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:w==="0"?(s.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(l.Messages.TemplateOctalLiteral),m+="\0"):s.Character.isOctalDigit(w.charCodeAt(0))?this.throwUnexpectedToken(l.Messages.TemplateOctalLiteral):m+=w;break}else s.Character.isLineTerminator(w.charCodeAt(0))?(++this.lineNumber,w==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,m+=`
`):m+=w}return v||this.throwUnexpectedToken(),O||this.curlyStack.pop(),{type:10,value:this.source.slice(C+1,this.index-P),cooked:m,head:O,tail:y,lineNumber:this.lineNumber,lineStart:this.lineStart,start:C,end:this.index}},d.prototype.testRegExp=function(m,v){var C="\uFFFF",O=m,y=this;v.indexOf("u")>=0&&(O=O.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(P,w,D){var A=parseInt(w||D,16);return A>1114111&&y.throwUnexpectedToken(l.Messages.InvalidRegExp),A<=65535?String.fromCharCode(A):C}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C));try{RegExp(O)}catch{this.throwUnexpectedToken(l.Messages.InvalidRegExp)}try{return new RegExp(m,v)}catch{return null}},d.prototype.scanRegExpBody=function(){var m=this.source[this.index];o.assert(m==="/","Regular expression literal must start with a slash");for(var v=this.source[this.index++],C=!1,O=!1;!this.eof();)if(m=this.source[this.index++],v+=m,m==="\\")m=this.source[this.index++],s.Character.isLineTerminator(m.charCodeAt(0))&&this.throwUnexpectedToken(l.Messages.UnterminatedRegExp),v+=m;else if(s.Character.isLineTerminator(m.charCodeAt(0)))this.throwUnexpectedToken(l.Messages.UnterminatedRegExp);else if(C)m==="]"&&(C=!1);else if(m==="/"){O=!0;break}else m==="["&&(C=!0);return O||this.throwUnexpectedToken(l.Messages.UnterminatedRegExp),v.substr(1,v.length-2)},d.prototype.scanRegExpFlags=function(){for(var m="",v="";!this.eof();){var C=this.source[this.index];if(!s.Character.isIdentifierPart(C.charCodeAt(0)))break;if(++this.index,C==="\\"&&!this.eof())if(C=this.source[this.index],C==="u"){++this.index;var O=this.index,y=this.scanHexEscape("u");if(y!==null)for(v+=y,m+="\\u";O<this.index;++O)m+=this.source[O];else this.index=O,v+="u",m+="\\u";this.tolerateUnexpectedToken()}else m+="\\",this.tolerateUnexpectedToken();else v+=C,m+=C}return v},d.prototype.scanRegExp=function(){var m=this.index,v=this.scanRegExpBody(),C=this.scanRegExpFlags(),O=this.testRegExp(v,C);return{type:9,value:"",pattern:v,flags:C,regex:O,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},d.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var m=this.source.charCodeAt(this.index);return s.Character.isIdentifierStart(m)?this.scanIdentifier():m===40||m===41||m===59?this.scanPunctuator():m===39||m===34?this.scanStringLiteral():m===46?s.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():s.Character.isDecimalDigit(m)?this.scanNumericLiteral():m===96||m===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():m>=55296&&m<57343&&s.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},d}();n.Scanner=p},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenName={},n.TokenName[1]="Boolean",n.TokenName[2]="<end>",n.TokenName[3]="Identifier",n.TokenName[4]="Keyword",n.TokenName[5]="Null",n.TokenName[6]="Numeric",n.TokenName[7]="Punctuator",n.TokenName[8]="String",n.TokenName[9]="RegularExpression",n.TokenName[10]="Template"},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",frasl:"\u2044",euro:"\u20AC",image:"\u2111",weierp:"\u2118",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",lang:"\u27E8",rang:"\u27E9"}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(10),s=r(12),l=r(13),h=function(){function p(){this.values=[],this.curly=this.paren=-1}return p.prototype.beforeFunctionExpression=function(d){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(d)>=0},p.prototype.isRegexStart=function(){var d=this.values[this.values.length-1],m=d!==null;switch(d){case"this":case"]":m=!1;break;case")":var v=this.values[this.paren-1];m=v==="if"||v==="while"||v==="for"||v==="with";break;case"}":if(m=!1,this.values[this.curly-3]==="function"){var C=this.values[this.curly-4];m=C?!this.beforeFunctionExpression(C):!1}else if(this.values[this.curly-4]==="function"){var C=this.values[this.curly-5];m=C?!this.beforeFunctionExpression(C):!0}break}return m},p.prototype.push=function(d){d.type===7||d.type===4?(d.value==="{"?this.curly=this.values.length:d.value==="("&&(this.paren=this.values.length),this.values.push(d.value)):this.values.push(null)},p}(),c=function(){function p(d,m){this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=m?typeof m.tolerant=="boolean"&&m.tolerant:!1,this.scanner=new s.Scanner(d,this.errorHandler),this.scanner.trackComment=m?typeof m.comment=="boolean"&&m.comment:!1,this.trackRange=m?typeof m.range=="boolean"&&m.range:!1,this.trackLoc=m?typeof m.loc=="boolean"&&m.loc:!1,this.buffer=[],this.reader=new h}return p.prototype.errors=function(){return this.errorHandler.errors},p.prototype.getNextToken=function(){if(this.buffer.length===0){var d=this.scanner.scanComments();if(this.scanner.trackComment)for(var m=0;m<d.length;++m){var v=d[m],C=this.scanner.source.slice(v.slice[0],v.slice[1]),O={type:v.multiLine?"BlockComment":"LineComment",value:C};this.trackRange&&(O.range=v.range),this.trackLoc&&(O.loc=v.loc),this.buffer.push(O)}if(!this.scanner.eof()){var y=void 0;this.trackLoc&&(y={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var P=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart(),w=P?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(w);var D={type:l.TokenName[w.type],value:this.scanner.source.slice(w.start,w.end)};if(this.trackRange&&(D.range=[w.start,w.end]),this.trackLoc&&(y.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},D.loc=y),w.type===9){var A=w.pattern,_=w.flags;D.regex={pattern:A,flags:_}}this.buffer.push(D)}}return this.buffer.shift()},p}();n.Tokenizer=c}])})})(ci);function fi(i,t){var e=[i],n,r,o,s,l,h,c;for(n=0;n<e.length;n+=1)if(l=e[n],typeof l!="number"){t(l);for(o in l)if(o!=="parent")if(h=l[o],h instanceof Array)for(r=0,s=h.length;r<s;r+=1)c=h[r],c instanceof Object&&(c.parent=l),e.push(c);else h!=null&&typeof h.type=="string"&&(h.parent=l,e.push(h))}}function eC(i,t){const e=document.querySelector("svg");let n=!1,r,o,s;t("mousedown",".translate-handle-trigger",l=>{const h=e.panZoomParams.svgPoint;h({x:l.offsetX,y:l.offsetY}),n=!0,i.transforming=!0,r=Number(l.target.dataset.index),o=i.storedPCB.components[r].pos,s=[],Qu(i).forEach((p,d)=>{if(d!==r)return;const{start:m,ast:v}=p,[C,O]=v.body[0].expression.elements,y=Lu(s);fi(C,w=>y(w));const P=Lu(s);fi(O,w=>P(w))}),i.transformUpdate=(p,d)=>{const m=[],v=nC(m);Qu(i).forEach((O,y)=>{if(y!==r)return;const{start:P,ast:w}=O,[D,A]=w.body[0].expression.elements,_=v(P);fi(D,Q=>_(Q,p));const I=v(P);fi(A,Q=>I(Q,d))}),i.codemirror.view.dispatch({changes:m})}}),t("mousemove","",l=>{if(!n)return;const h=O=>i.gridSize===0||!i.grid?O:Yo(iC(O,i.gridSize),8),c=e.panZoomParams.svgPoint,p=c({x:l.offsetX,y:l.offsetY}),d=o[0]-s[0],m=o[1]-s[1],v=Yo(h(p.x)-d,8),C=Yo(h(p.y)-m,8);ct("TRANSLATE",{x:v,y:C,index:r})}),t("mouseup","",l=>{n=!1,i.transforming=!1}),t("mouseleave","",l=>{n=!1,i.transforming=!1})}const iC=(i,t)=>Math.round(i/t)*t,Yo=(i,t)=>Math.round(i*10**t)/10**t,nC=(i,t)=>e=>{let n=!1,r=!1;return(o,s)=>{if(!r&&o.type==="Literal"&&typeof o.value=="number"){let l=o.range[0];if(o.parent&&o.parent.operator==="/")return;o.parent&&o.parent.operator,o.parent&&o.parent.type==="BinaryExpression"&&(o.parent.operator==="+"||o.parent.operator==="-")&&o.parent.right==o&&(n=!0,l=o.parent.left.range[1]),o.parent&&o.parent.type==="UnaryExpression"&&o.parent.operator==="-"&&(l=o.parent.range[0]);let h=s,c=h<0,p;c?p=`-${Math.abs(h)}`:n?p=`+${h}`:p=`${h}`,i.push({from:l+e,to:o.range[1]+e,insert:p}),r=!0}}},Lu=i=>{let t=!1,e=!1;return n=>{let r=0;if(n.type==="Literal"&&typeof n.value=="number"){if(n.range[0],n.parent&&n.parent.operator==="/")return;n.parent&&n.parent.operator==="-"&&(e=!0),n.parent&&n.parent.type==="BinaryExpression"&&(n.parent.operator==="+"||n.parent.operator==="-")&&n.parent.right==n&&(t=!0,n.parent.left.range[1]),n.parent&&n.parent.type==="UnaryExpression"&&n.parent.operator==="-"&&n.parent.range[0];let o;e?o=-n.value:o=n.value,r=o,r<0?r=-Math.abs(r):r=r,i.push(r)}return r}};function Qu(i){const t=i.codemirror.view.state.doc.toString(),e=kt(i.codemirror.view.state);let n=[];const r=e.cursor();do{const o=t.slice(r.from,r.to);if(r.name!=="PropertyDefinition"||o!=="translate")continue;r.next(),r.next();const s=t.slice(r.from,r.to);n.push({text:s,start:r.from})}while(r.next());return n.map(o=>({...o,ast:ci.exports.parseScript(o.text,{range:!0,comment:!0})}))}function rC(i,t){const e=document.querySelector("svg");let n=!1,r,o,s,l;t("mousedown",".draggable-pt",h=>{const c=e.panZoomParams.svgPoint;c({x:h.offsetX,y:h.offsetY}),n=!0,i.transforming=!0,r=Number(h.target.dataset.index),o=[Number(h.target.getAttribute("cx")),Number(h.target.getAttribute("cy"))];const[p,d]=h.target.dataset.text.split(",");s=[...o];const m=ci.exports.parse(p,{range:!0,comment:!0}).body[0],v=ci.exports.parse(d,{range:!0,comment:!0}).body[0],C=Xu(s,0);fi(m,y=>C(y));const O=Xu(s,1);fi(v,y=>O(y)),l=(y,P,w)=>{const D=i.pts[w],[A,_]=D.text.split(","),I=ci.exports.parse(A,{range:!0,comment:!0}).body[0],Q=ci.exports.parse(_,{range:!0,comment:!0}).body[0],U=D.start,j=U+A.length+1,z=[],N=oC(z),R=N(U);fi(I,Z=>R(Z,y));const B=N(j);fi(Q,Z=>B(Z,P)),i.codemirror.view.dispatch({changes:z}),ct("RUN",{dragging:!0})}}),t("mousemove","",h=>{if(!n)return;const c=y=>i.gridSize===0||!i.grid?y:Wo(sC(y,i.gridSize),8),p=e.panZoomParams.svgPoint,d=p({x:h.offsetX,y:h.offsetY}),m=o[0]-s[0],v=o[1]-s[1],C=Wo(c(d.x)-m,8),O=Wo(c(d.y)-v,8);l(C,O,r)}),t("mouseup","",h=>{n=!1,i.transforming=!1}),t("mouseleave","",h=>{n=!1,i.transforming=!1})}const sC=(i,t)=>Math.round(i/t)*t,Wo=(i,t)=>Math.round(i*10**t)/10**t,oC=(i,t)=>e=>{let n=!1,r=!1;return(o,s)=>{if(!r&&o.type==="Literal"&&typeof o.value=="number"){let l=o.range[0];if(o.parent&&o.parent.operator==="/")return;o.parent&&o.parent.operator,o.parent&&o.parent.type==="BinaryExpression"&&(o.parent.operator==="+"||o.parent.operator==="-")&&o.parent.right==o&&(n=!0,l=o.parent.left.range[1]),o.parent&&o.parent.type==="UnaryExpression"&&o.parent.operator==="-"&&(l=o.parent.range[0]);let h=s,c=h<0,p;c?p=`-${Math.abs(h)}`:n?p=`+${h}`:p=`${h}`,i.push({from:l+e,to:o.range[1]+e,insert:p}),r=!0}}},Xu=(i,t)=>{let e=!1,n=!1;return r=>{let o=0;if(r.type==="Literal"&&typeof r.value=="number"){if(r.range[0],r.parent&&r.parent.operator==="/")return;r.parent&&r.parent.operator==="-"&&(n=!0),r.parent&&r.parent.type==="BinaryExpression"&&(r.parent.operator==="+"||r.parent.operator==="-")&&r.parent.right==r&&(e=!0,r.parent.left.range[1]),r.parent&&r.parent.type==="UnaryExpression"&&r.parent.operator==="-"&&r.parent.range[0];let s;n?s=-r.value:s=r.value,o=s,o<0?o=-Math.abs(o):o=o,i[t]=o}return o}};function lC(i,t){let e=!1;t("mousedown","#vertical-bar",n=>{e=!0}),t("mousemove","",n=>{if(!e)return;let r=n.clientX/window.innerWidth*100;if(r===0)return;const o=1,s=99;r<o&&(r=o),r>s&&(r=s),document.documentElement.style.setProperty("--vertical-bar",`${r}%`),pauseEvent(n)}),t("mouseup","",n=>{e&&ct("RENDER"),e=!1})}function aC(i,t){let e=!1,n=1,r=0,o=0,s={x:0,y:0};function l(d){d.style.transformOrigin=`${0}px ${0}px`,d.style.transform="translate("+r+"px, "+o+"px) scale("+n+")",i.gridSize>0&&ct("RENDER")}function h({x:d,y:m}){let v=(d-r)/n,C=(m-o)/n;return{x:v,y:C}}t("mousedown","",d=>{d.shiftKey||(e=!0,s={x:d.offsetX-r,y:d.offsetY-o},d.detail===2&&console.log(d.offsetX,d.offsetY,h({x:d.offsetX,y:d.offsetY})))}),t("mousemove","",d=>{if(!e||i.transforming)return;r=d.offsetX-s.x,o=d.offsetY-s.y;const m=document.querySelectorAll(".transform-group");for(const v of m)l(v)}),t("mouseup","",d=>{e=!1}),t("wheel","",d=>{let m=(d.offsetX-r)/n,v=(d.offsetY-o)/n;Math.sign(d.deltaY)<0?n*=1.03:n/=1.03,r=d.offsetX-m*n,o=d.offsetY-v*n;const C=document.querySelectorAll(".transform-group");for(const O of C)l(O);d.preventDefault()});function c(d){const v=document.querySelector("svg").getBoundingClientRect(),C=d.x[1]-d.x[0],O=d.y[1]-d.y[0],y=v.width/C,P=v.height/O,w=Math.min(y,P)*.9;n=w;const D={x:(d.x[0]+d.x[1])/2*w-v.width/2,y:(d.y[0]+d.y[1])/2*w-v.height/2};r=-D.x,o=-D.y;const A=document.querySelectorAll(".transform-group");for(const _ of A)l(_)}function p(){const d=document.querySelector("svg");if(d===null)return null;const{left:m,right:v,bottom:C,top:O,width:y,height:P}=d.getBoundingClientRect(),w=h({x:y,y:P}),D=h({x:0,y:P}),A=h({x:y,y:0}),_=h({x:0,y:0});return{rt:w,lt:D,rb:A,lb:_}}return{scale:()=>n,x:()=>r,y:()=>o,corners:p,svgPoint:h,setScaleXY:c}}let Fu=0;function hC(i){var t=new FileReader;t.readAsText(i),t.onloadend=e=>{let n=t.result;ct("UPLOAD_COMP",{text:n,name:`component${Fu}`}),Fu++}}function uC(i){var t=new FileReader;t.readAsText(i),t.onloadend=e=>{let n=t.result;ct("UPLOAD_JS",{text:n})}}function cC(i,t=[]){let e=i[0],n=e.name.split(".");n[0];const r=n[n.length-1];if(r==="kicad_mod")hC(e);else if(r==="js")uC(e);else throw Error("Unknown extension:",r)}function fC(i,t){t("drop","",function(e){let r=e.dataTransfer.files;cC(r),pauseEvent(e)}),t("dragover","",function(e){pauseEvent(e)})}function pC(i,t){let e=null,n=null;const r=document.querySelector("svg");t("mousedown","",o=>{!o.shiftKey||(e=r.panZoomParams.svgPoint({x:o.offsetX,y:o.offsetY}))}),t("mousemove","",o=>{document.body.classList.add("no-select"),!!o.shiftKey&&e!==null&&(n=r.panZoomParams.svgPoint({x:o.offsetX,y:o.offsetY}),i.selectBox.start=e,i.selectBox.end=n,ct("RENDER"))}),t("mouseup","",o=>{!o.shiftKey||(document.body.classList.remove("no-select"),e=null,n=null,i.selectBox.start=e,i.selectBox.end=n,ct("RENDER"))})}const $u=i=>/[0-9]/i.test(i)||i===".";function dC(i,t){let e=!1,n,r,o,s,l,h=null,c=!1,p=!1;t("mousedown",".\u037Cd",d=>{const v=i.codemirror.view.state,C=v.doc,O=v.selection.main.head;C.lineAt(O);let{from:y,to:P,text:w}=C.lineAt(O),D=O,A=O;for(;D>y&&$u(w[D-y-1]);)D--;for(;A<P&&$u(w[A-y]);)A++;let _;if(D>y){let I=D;for(;I>y;)if(I--,_=w[I-y],_!==" ")if(_==="+")h=I;else if(_==="-")h=I,p=!0;else{if(["(","[",",","/","*",";","{","=",":"].includes(_))break;c=!0;break}}l=w.slice(D-y,A-y),n=Number(l),p&&(n=-n),e=!0,r=D,s=l.includes("."),o=l.includes(".")?l.split(".")[1].length:1}),t("mousemove","",d=>{if(!e)return;const m=i.codemirror;let v,C=l.length;if(0>d.movementX,s){let y=Math.round(n*10**o)+d.movementX;y=Math.round(y)/10**o,n=y,v=`${Math.abs(n).toFixed(o)}`}else n+=d.movementX,v=`${Math.abs(n)}`;c?(h==null&&(v=(n<0?"-":"+")+v),m.view.dispatch({changes:{from:r,to:r+C,insert:v}}),h!=null&&m.view.dispatch({changes:{from:h,to:h+1,insert:n<0?"-":"+"}})):h!=null?n<0?(m.view.dispatch({changes:{from:r,to:r+C,insert:v}}),m.view.dispatch({changes:{from:h,to:h+1,insert:"-"}})):(m.view.dispatch({changes:{from:h,to:r+C,insert:v}}),r=h,h=null):(n<0&&(v="-"+v),m.view.dispatch({changes:{from:r,to:r+C,insert:v}})),l=v,ct("RUN",{dragging:!0}),pauseEvent(d)}),t("mouseup","",d=>{e=!1,h=null,c=!1,p=!1})}function Nl(i,t){const e=new RegExp(`\\/\\*\\s*--\\s*${i}\\s*--\\s*\\*\\/`,"g"),r=t.matchAll(e).next();return r.value!==void 0?r.value.index+r.value[0].length+1:null}function mC(i,t){const e=document.querySelector("svg");let n=!1,r,o;t("mousedown",".footprint-svg, .path-footprint",s=>{n=!0,r=s.target.dataset.index,o=i.codemirror.view.state.doc.toString(),ci.exports.parseScript(o,{range:!0,comment:!0})}),t("mousemove","",s=>{if(!n)return;const l=e.panZoomParams.svgPoint;l({x:s.offsetX,y:s.offsetY});var h=event.path||event.composedPath&&event.composedPath();if(!h)return;h.some(m=>m.matches&&m.matches("#viewer"));const c=document.querySelector("#viewer").getBoundingClientRect(),p=s.clientX-c.left,d=s.clientY-c.top;i.previewFootprint=[i.footprints[r],[p,d]],ct("RENDER")}),t("mouseup","",s=>{if(i.previewFootprint!==null){const l=document.querySelector("#viewer").getBoundingClientRect(),h=s.clientX-l.left,c=l.bottom-s.clientY,p=e.panZoomParams.svgPoint,d=p({x:h,y:c}),m=i.codemirror.view.state.doc.toString(),v=Nl("ADD_COMPONENTS",m);if(v!==null){const C=i.previewFootprint[0][0],O=`board.add(${C}, { translate: pt(${d.x}, ${d.y}), name: "${C}" })
`;i.codemirror.view.dispatch({changes:{from:v,insert:O}}),ct("RUN")}}i.previewFootprint=null,n&&ct("RENDER"),n=!1}),t("mouseleave","",s=>{i.previewFootprint=null,n=!1})}function cd(i,t){const n=i.codemirror.view.state.doc.toString();let r=[],o=[];const s=t.cursor();do{const l=n.slice(s.from,s.to);s.name==="CallExpression"&&l.slice(0,2)==="pt"&&r.push([s.from,s.to]),s.name==="CallExpression"&&l.slice(0,4)==="path"&&o.push([s.from,s.to])}while(s.next());return{pts:r,paths:o}}const OC=(i,t)=>Math.round(i/t)*t,gC=(i,t)=>Math.round(i*10**t)/10**t;function yC(i,t){setInterval(()=>xC(i),300);const e=document.querySelector("svg"),n=r=>i.gridSize===0||!i.grid?r:gC(OC(r,i.gridSize),8);t("mousedown","",r=>{if(i.selectedPath===null)return;const o=e.panZoomParams.svgPoint,s=o({x:r.offsetX,y:r.offsetY}),l={x:n(s.x),y:n(s.y)},c=i.codemirror.view.state.doc.toString();let p=i.selectedPath.pathEnd-2;const d=[" ","	",`
`];let m=" ";for(;p>0&&(m=c[p],!!d.includes(m));)p--;if(m===","||m==="("){const v=`
  pt(${l.x}, ${l.y}),`;i.codemirror.view.dispatch({changes:{from:p+1,insert:v}}),ct("RUN")}})}function xC(i){const t=i.codemirror.view.state.doc;let e=t.toString();const n=wf(i.codemirror.view.state,t.length,1e4),{pts:r,paths:o}=cd(i,n);let s=null;o.forEach(l=>{const[h,c]=l;Qt.codemirror.view.state.selection.ranges.some(m=>{const{from:v,to:C}=m;return v>h&&C<c})&&(s={pathStart:h,pathEnd:c,str:e.substr(h,c-h)})}),Qt.selectedPath=s,ct("RENDER")}function vC(i){return i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),i.cancelBubble=!0,i.returnValue=!1,!1}window.pauseEvent=vC;const fd=i=>i.composedPath()[0],PC=(i,t)=>fd(i).matches(t),Bu=i=>(t,e,n)=>{i.addEventListener(t,r=>{r.trigger=fd(r),(e===""||PC(r,e))&&n(r)})};function CC(i){const t=document.querySelector("svg"),e=Bu(t);t.panZoomParams=aC(i,e),i.panZoomParams=t.panZoomParams,pC(i,e),eC(i,e),rC(i,e),yC(i,e);const n=document.querySelector("body"),r=Bu(n);mC(i,r),fC(i,r),dC(i,r),lC(i,r),r("keydown","",o=>{let s=event.code;s==="Enter"&&event.shiftKey?(event.preventDefault(),ct("RUN")):s==="KeyT"&&event.shiftKey}),window.addEventListener("unload",()=>{const o=i.codemirror.view.state.doc.toString();window.localStorage.setItem("svg-pcb",o)})}const SC=(i,t)=>({F:{pos:[0,0],shape:ti(nn(t)),layers:["F.Cu"],index:1},B:{pos:[0,0],shape:ti(nn(t)),layers:["B.Cu"],index:2},drill:{pos:[0,0],shape:ti(nn(i)),layers:["drill"]}}),wC=([i,t],[e,n])=>[i+e,t+n],bC=([i,t],e)=>[i*Math.cos(e)-t*Math.sin(e),t*Math.cos(e)+i*Math.sin(e)];class DC{constructor({pads:t,layers:e}){this.pads=t,this.layers=e}pad(t){return this.pads[t]}padX(t){return this.pads[t][0]}padY(t){return this.pads[t][1]}get pos(){return this.pads.center}get posX(){return this.pads.center[0]}get posY(){return this.pads.center[1]}}function TC(i,t={}){let e=t.translate||[0,0],n=t.rotate||0,r=t.padLabelSize||.02;const o=n*Math.PI/180,s={},l=[];let h={};for(const c in i){let{pos:p,shape:d,layers:m,origin:v}=i[c];typeof d=="string"&&(d=xa([],d));let C=[p[0],p[1]];v!==void 0&&(C[0]=v[0],C[1]=v[1]),Fi(d,C),Fi(d,e),ya(d,n,e);let O=wC(bC(p,o),e);s[c]=O,c.includes("drill")||l.push({type:"text",value:c,translate:O,rotate:n,size:r}),m.forEach(y=>{y in h?h[y].push(d):h[y]=[d]})}return s.center=e,h.padLabels=l,new DC({pads:s,layers:h})}class AC{constructor(){this.layers={},this.components=[]}add(t,e={}){const n=e.name||"",r={translate:e.translate||[0,0],rotate:e.rotate||0,padLabelSize:e.padLabelSize||.03,componentLabelSize:e.componentLabelSize||.04},o=TC(t,r);for(const s in o.layers)o.layers[s].forEach(l=>{this.addShape(s,l)});return n!==""&&!n.includes("drill")&&this.addShape("componentLabels",{type:"text",value:n,translate:r.translate,rotate:0,size:r.componentLabelSize}),this.components.push(o),o}addShape(t,e){return e[0]&&(typeof e[0][0]=="number"||typeof e[0][0]=="string")&&(e=$l(e)),t in this.layers?this.layers[t].push(e):this.layers[t]=[e],this.layers[t]}getLayer(t,e=!1){if(!(t in this.layers))return[];const n=[],r=[],o=[];return this.layers[t].forEach(l=>{l.type==="wire"?o.push({type:"wire",data:ti(l.shape),thickness:l.thickness,shape:l.shape}):Array.isArray(l)?n.push(l):l.type==="text"&&r.push(l)}),e?[ti((()=>{var l;return(l=ad(...n,...o.map(h=>Kp(h.shape,h.thickness/2,{endType:"etOpenRound",jointType:"jtRound"}))))!=null?l:[]})()),...r]:[...n.map(ti),...r,...o]}wire(t,e,n="F.Cu"){const r={type:"wire",shape:$l(t),thickness:e};this.addShape(n,r)}}function te(i){this._line=this._col=this._pos=0,this._stream=i}te.not_whitespace_or_end=/^(\S|$)/;te.space_quote_paren_escaped_or_end=/^(\s|\\|"|'|`|,|\(|\)|$)/;te.string_or_escaped_or_end=/^(\\|"|$)/;te.string_delimiters=/["]/;te.quotes=/['`,]/;te.quotes_map={"'":"quote","`":"quasiquote",",":"unquote"};te.prototype={peek:_C,consume:IC,until:LC,error:kC,string:QC,atom:XC,quoted:FC,expr:$C,list:BC};function EC(i){var t=new te(i),e=t.expr();return e instanceof Error?e:t.peek()!=""?t.error("Superfluous characters after expression: `"+t.peek()+"`"):e}function kC(i){var t=new Error("Syntax error: "+i);return t.line=this._line+1,t.col=this._col+1,t}function _C(){return this._stream.length==this._pos?"":this._stream[this._pos]}function IC(){if(this._stream.length==this._pos)return"";var i=this._stream[this._pos];return this._pos+=1,i=="\r"?(this.peek()==`
`&&(this._pos+=1,i+=`
`),this._line++,this._col=0):i==`
`?(this._line++,this._col=0):this._col++,i}function LC(i){for(var t="";!i.test(this.peek());)t+=this.consume();return t}function QC(){for(var i=this.consume(),t="";;){t+=this.until(te.string_or_escaped_or_end);var e=this.peek();if(e=="")return this.error("Unterminated string literal");if(e==i){this.consume();break}if(e=="\\"){this.consume(),e=this.peek(),e=="r"?(this.consume(),t+="\r"):e=="t"?(this.consume(),t+="	"):e=="n"?(this.consume(),t+=`
`):e=="f"?(this.consume(),t+="\f"):e=="b"?(this.consume(),t+="\b"):t+=this.consume();continue}t+=this.consume()}return new String(t)}function XC(){if(te.string_delimiters.test(this.peek()))return this.string();for(var i="";;){i+=this.until(te.space_quote_paren_escaped_or_end);var t=this.peek();if(t=="\\"){this.consume(),i+=this.consume();continue}break}return i}function FC(){var i=this.consume(),t=te.quotes_map[i];t=="unquote"&&this.peek()=="@"&&(this.consume(),t="unquote-splicing",i=",@"),this.until(te.not_whitespace_or_end);var e=this.expr();return e instanceof Error?e:e===""?this.error("Unexpected `"+this.peek()+"` after `"+i+"`"):[t,e]}function $C(){if(this.until(te.not_whitespace_or_end),te.quotes.test(this.peek()))return this.quoted();var i=this.peek()=="("?this.list():this.atom();return this.until(te.not_whitespace_or_end),i}function BC(){if(this.peek()!="(")return this.error("Expected `(` - saw `"+this.peek()+"` instead.");this.consume();var i=[],t=this.expr();if(t instanceof Error)return t;if(t!=="")for(i.push(t);(t=this.expr())!=="";){if(t instanceof Error)return t;i.push(t)}return this.peek()!=")"?this.error("Expected `)` - saw: `"+this.peek()+"`"):(this.consume(),i)}const NC=i=>i.reduce((t,e)=>{let n=e.split(".");return n.length===0?t:n[0]!=="*"?[...t,e]:[...t,`F.${n[1]}`,`B.${n[1]}`]},[]);function MC(i){let t=EC(i),e=1/25.4;const n={};for(const o of t){const s=o[0]==="pad",l=o[2]==="smd",h=o[2]==="thru_hole",c=o[3];if(s&&(l||h)){let p=o[1],d=o[4].slice(1).map(P=>Number(P)*e);d[1]=-d[1];let m=o[o.length-1];m=m?m.slice(1):[],m=NC(m);let v=o[5].slice(1).map(P=>Number(P)*e);const C={rect:()=>Bl(...v),roundrect:()=>Bl(...v),circle:()=>nn(...v)};let O=c in C?C[c]():[];if(n[p]===void 0?n[p]=[{pos:d,shape:O,layers:m}]:n[p].push({pos:d,shape:O,layers:m}),o[o.length-2]?o[o.length-2][0]==="drill":!1){let P=Number(o[o.length-2][1])/25.4,w={pos:d,shape:nn(P),layers:["drill"]};n[`${p}_drill`]===void 0?n[`${p}_drill`]=[w]:n[`${p}_drill`].push(w)}}}let r=Object.entries(n).reduce((o,s)=>{const[l,h]=s;return h.length===1?o[l]=h[0]:h.forEach((c,p)=>{o[`${l}_${p+1}`]=c}),o},{});return Object.keys(r).forEach(o=>{let s="";r[o].shape.forEach(h=>{h.forEach((c,p)=>{const{x:d,y:m}=c;s+=`${p==0?"M":"L"} ${d} ${m} `})}),r[o].shape=s,r[o].layers=["F.Cu"]}),r}const{stringify:RC}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");const $r={"||":3,"&&":4,"|":5,"??":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},Qe=17,YC={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:Qe,ClassExpression:Qe,FunctionExpression:Qe,ObjectExpression:Qe,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function qi(i,t){const{generator:e}=i;if(i.write("("),t!=null&&t.length>0){e[t[0].type](t[0],i);const{length:n}=t;for(let r=1;r<n;r++){const o=t[r];i.write(", "),e[o.type](o,i)}}i.write(")")}function pd(i,t,e,n){const r=i.expressionsPrecedence[t.type];if(r===Qe)return!0;const o=i.expressionsPrecedence[e.type];return r!==o?!n&&r===15&&o===14&&e.operator==="**"||r<o:r!==13&&r!==14?!1:t.operator==="**"&&e.operator==="**"?!n:n?$r[t.operator]<=$r[e.operator]:$r[t.operator]<$r[e.operator]}function Br(i,t,e,n){const{generator:r}=i;pd(i,t,e,n)?(i.write("("),r[t.type](t,i),i.write(")")):r[t.type](t,i)}function WC(i,t,e,n){const r=t.split(`
`),o=r.length-1;if(i.write(r[0].trim()),o>0){i.write(n);for(let s=1;s<o;s++)i.write(e+r[s].trim()+n);i.write(e+r[o].trim())}}function re(i,t,e,n){const{length:r}=t;for(let o=0;o<r;o++){const s=t[o];i.write(e),s.type[0]==="L"?i.write("// "+s.value.trim()+`
`,s):(i.write("/*"),WC(i,s.value,e,n),i.write("*/"+n))}}function ZC(i){let t=i;for(;t!=null;){const{type:e}=t;if(e[0]==="C"&&e[1]==="a")return!0;if(e[0]==="M"&&e[1]==="e"&&e[2]==="m")t=t.object;else return!1}}function Zo(i,t){const{generator:e}=i,{declarations:n}=t;i.write(t.kind+" ");const{length:r}=n;if(r>0){e.VariableDeclarator(n[0],i);for(let o=1;o<r;o++)i.write(", "),e.VariableDeclarator(n[o],i)}}let Nu,Mu,Ru,Yu,Wu,Zu;const jC={Program(i,t){const e=t.indent.repeat(t.indentLevel),{lineEnd:n,writeComments:r}=t;r&&i.comments!=null&&re(t,i.comments,e,n);const o=i.body,{length:s}=o;for(let l=0;l<s;l++){const h=o[l];r&&h.comments!=null&&re(t,h.comments,e,n),t.write(e),this[h.type](h,t),t.write(n)}r&&i.trailingComments!=null&&re(t,i.trailingComments,e,n)},BlockStatement:Zu=function(i,t){const e=t.indent.repeat(t.indentLevel++),{lineEnd:n,writeComments:r}=t,o=e+t.indent;t.write("{");const s=i.body;if(s!=null&&s.length>0){t.write(n),r&&i.comments!=null&&re(t,i.comments,o,n);const{length:l}=s;for(let h=0;h<l;h++){const c=s[h];r&&c.comments!=null&&re(t,c.comments,o,n),t.write(o),this[c.type](c,t),t.write(n)}t.write(e)}else r&&i.comments!=null&&(t.write(n),re(t,i.comments,o,n),t.write(e));r&&i.trailingComments!=null&&re(t,i.trailingComments,o,n),t.write("}"),t.indentLevel--},ClassBody:Zu,StaticBlock(i,t){t.write("static "),this.BlockStatement(i,t)},EmptyStatement(i,t){t.write(";")},ExpressionStatement(i,t){const e=t.expressionsPrecedence[i.expression.type];e===Qe||e===3&&i.expression.left.type[0]==="O"?(t.write("("),this[i.expression.type](i.expression,t),t.write(")")):this[i.expression.type](i.expression,t),t.write(";")},IfStatement(i,t){t.write("if ("),this[i.test.type](i.test,t),t.write(") "),this[i.consequent.type](i.consequent,t),i.alternate!=null&&(t.write(" else "),this[i.alternate.type](i.alternate,t))},LabeledStatement(i,t){this[i.label.type](i.label,t),t.write(": "),this[i.body.type](i.body,t)},BreakStatement(i,t){t.write("break"),i.label!=null&&(t.write(" "),this[i.label.type](i.label,t)),t.write(";")},ContinueStatement(i,t){t.write("continue"),i.label!=null&&(t.write(" "),this[i.label.type](i.label,t)),t.write(";")},WithStatement(i,t){t.write("with ("),this[i.object.type](i.object,t),t.write(") "),this[i.body.type](i.body,t)},SwitchStatement(i,t){const e=t.indent.repeat(t.indentLevel++),{lineEnd:n,writeComments:r}=t;t.indentLevel++;const o=e+t.indent,s=o+t.indent;t.write("switch ("),this[i.discriminant.type](i.discriminant,t),t.write(") {"+n);const{cases:l}=i,{length:h}=l;for(let c=0;c<h;c++){const p=l[c];r&&p.comments!=null&&re(t,p.comments,o,n),p.test?(t.write(o+"case "),this[p.test.type](p.test,t),t.write(":"+n)):t.write(o+"default:"+n);const{consequent:d}=p,{length:m}=d;for(let v=0;v<m;v++){const C=d[v];r&&C.comments!=null&&re(t,C.comments,s,n),t.write(s),this[C.type](C,t),t.write(n)}}t.indentLevel-=2,t.write(e+"}")},ReturnStatement(i,t){t.write("return"),i.argument&&(t.write(" "),this[i.argument.type](i.argument,t)),t.write(";")},ThrowStatement(i,t){t.write("throw "),this[i.argument.type](i.argument,t),t.write(";")},TryStatement(i,t){if(t.write("try "),this[i.block.type](i.block,t),i.handler){const{handler:e}=i;e.param==null?t.write(" catch "):(t.write(" catch ("),this[e.param.type](e.param,t),t.write(") ")),this[e.body.type](e.body,t)}i.finalizer&&(t.write(" finally "),this[i.finalizer.type](i.finalizer,t))},WhileStatement(i,t){t.write("while ("),this[i.test.type](i.test,t),t.write(") "),this[i.body.type](i.body,t)},DoWhileStatement(i,t){t.write("do "),this[i.body.type](i.body,t),t.write(" while ("),this[i.test.type](i.test,t),t.write(");")},ForStatement(i,t){if(t.write("for ("),i.init!=null){const{init:e}=i;e.type[0]==="V"?Zo(t,e):this[e.type](e,t)}t.write("; "),i.test&&this[i.test.type](i.test,t),t.write("; "),i.update&&this[i.update.type](i.update,t),t.write(") "),this[i.body.type](i.body,t)},ForInStatement:Nu=function(i,t){t.write(`for ${i.await?"await ":""}(`);const{left:e}=i;e.type[0]==="V"?Zo(t,e):this[e.type](e,t),t.write(i.type[3]==="I"?" in ":" of "),this[i.right.type](i.right,t),t.write(") "),this[i.body.type](i.body,t)},ForOfStatement:Nu,DebuggerStatement(i,t){t.write("debugger;",i)},FunctionDeclaration:Mu=function(i,t){t.write((i.async?"async ":"")+(i.generator?"function* ":"function ")+(i.id?i.id.name:""),i),qi(t,i.params),t.write(" "),this[i.body.type](i.body,t)},FunctionExpression:Mu,VariableDeclaration(i,t){Zo(t,i),t.write(";")},VariableDeclarator(i,t){this[i.id.type](i.id,t),i.init!=null&&(t.write(" = "),this[i.init.type](i.init,t))},ClassDeclaration(i,t){if(t.write("class "+(i.id?`${i.id.name} `:""),i),i.superClass){t.write("extends ");const{superClass:e}=i,{type:n}=e,r=t.expressionsPrecedence[n];(n[0]!=="C"||n[1]!=="l"||n[5]!=="E")&&(r===Qe||r<t.expressionsPrecedence.ClassExpression)?(t.write("("),this[i.superClass.type](e,t),t.write(")")):this[e.type](e,t),t.write(" ")}this.ClassBody(i.body,t)},ImportDeclaration(i,t){t.write("import ");const{specifiers:e}=i,{length:n}=e;let r=0;if(n>0){for(;r<n;){r>0&&t.write(", ");const o=e[r],s=o.type[6];if(s==="D")t.write(o.local.name,o),r++;else if(s==="N")t.write("* as "+o.local.name,o),r++;else break}if(r<n){for(t.write("{");;){const o=e[r],{name:s}=o.imported;if(t.write(s,o),s!==o.local.name&&t.write(" as "+o.local.name),++r<n)t.write(", ");else break}t.write("}")}t.write(" from ")}this.Literal(i.source,t),t.write(";")},ImportExpression(i,t){t.write("import("),this[i.source.type](i.source,t),t.write(")")},ExportDefaultDeclaration(i,t){t.write("export default "),this[i.declaration.type](i.declaration,t),t.expressionsPrecedence[i.declaration.type]!=null&&i.declaration.type[0]!=="F"&&t.write(";")},ExportNamedDeclaration(i,t){if(t.write("export "),i.declaration)this[i.declaration.type](i.declaration,t);else{t.write("{");const{specifiers:e}=i,{length:n}=e;if(n>0)for(let r=0;;){const o=e[r],{name:s}=o.local;if(t.write(s,o),s!==o.exported.name&&t.write(" as "+o.exported.name),++r<n)t.write(", ");else break}t.write("}"),i.source&&(t.write(" from "),this.Literal(i.source,t)),t.write(";")}},ExportAllDeclaration(i,t){i.exported!=null?t.write("export * as "+i.exported.name+" from "):t.write("export * from "),this.Literal(i.source,t),t.write(";")},MethodDefinition(i,t){i.static&&t.write("static ");const e=i.kind[0];(e==="g"||e==="s")&&t.write(i.kind+" "),i.value.async&&t.write("async "),i.value.generator&&t.write("*"),i.computed?(t.write("["),this[i.key.type](i.key,t),t.write("]")):this[i.key.type](i.key,t),qi(t,i.value.params),t.write(" "),this[i.value.body.type](i.value.body,t)},ClassExpression(i,t){this.ClassDeclaration(i,t)},ArrowFunctionExpression(i,t){t.write(i.async?"async ":"",i);const{params:e}=i;e!=null&&(e.length===1&&e[0].type[0]==="I"?t.write(e[0].name,e[0]):qi(t,i.params)),t.write(" => "),i.body.type[0]==="O"?(t.write("("),this.ObjectExpression(i.body,t),t.write(")")):this[i.body.type](i.body,t)},ThisExpression(i,t){t.write("this",i)},Super(i,t){t.write("super",i)},RestElement:Ru=function(i,t){t.write("..."),this[i.argument.type](i.argument,t)},SpreadElement:Ru,YieldExpression(i,t){t.write(i.delegate?"yield*":"yield"),i.argument&&(t.write(" "),this[i.argument.type](i.argument,t))},AwaitExpression(i,t){t.write("await ",i),Br(t,i.argument,i)},TemplateLiteral(i,t){const{quasis:e,expressions:n}=i;t.write("`");const{length:r}=n;for(let s=0;s<r;s++){const l=n[s],h=e[s];t.write(h.value.raw,h),t.write("${"),this[l.type](l,t),t.write("}")}const o=e[e.length-1];t.write(o.value.raw,o),t.write("`")},TemplateElement(i,t){t.write(i.value.raw,i)},TaggedTemplateExpression(i,t){Br(t,i.tag,i),this[i.quasi.type](i.quasi,t)},ArrayExpression:Wu=function(i,t){if(t.write("["),i.elements.length>0){const{elements:e}=i,{length:n}=e;for(let r=0;;){const o=e[r];if(o!=null&&this[o.type](o,t),++r<n)t.write(", ");else{o==null&&t.write(", ");break}}}t.write("]")},ArrayPattern:Wu,ObjectExpression(i,t){const e=t.indent.repeat(t.indentLevel++),{lineEnd:n,writeComments:r}=t,o=e+t.indent;if(t.write("{"),i.properties.length>0){t.write(n),r&&i.comments!=null&&re(t,i.comments,o,n);const s=","+n,{properties:l}=i,{length:h}=l;for(let c=0;;){const p=l[c];if(r&&p.comments!=null&&re(t,p.comments,o,n),t.write(o),this[p.type](p,t),++c<h)t.write(s);else break}t.write(n),r&&i.trailingComments!=null&&re(t,i.trailingComments,o,n),t.write(e+"}")}else r?i.comments!=null?(t.write(n),re(t,i.comments,o,n),i.trailingComments!=null&&re(t,i.trailingComments,o,n),t.write(e+"}")):i.trailingComments!=null?(t.write(n),re(t,i.trailingComments,o,n),t.write(e+"}")):t.write("}"):t.write("}");t.indentLevel--},Property(i,t){i.method||i.kind[0]!=="i"?this.MethodDefinition(i,t):(i.shorthand||(i.computed?(t.write("["),this[i.key.type](i.key,t),t.write("]")):this[i.key.type](i.key,t),t.write(": ")),this[i.value.type](i.value,t))},PropertyDefinition(i,t){i.static&&t.write("static "),this[i.key.type](i.key,t),i.value!=null&&(t.write(" = "),this[i.value.type](i.value,t))},ObjectPattern(i,t){if(t.write("{"),i.properties.length>0){const{properties:e}=i,{length:n}=e;for(let r=0;this[e[r].type](e[r],t),++r<n;)t.write(", ")}t.write("}")},SequenceExpression(i,t){qi(t,i.expressions)},UnaryExpression(i,t){if(i.prefix){const{operator:e,argument:n,argument:{type:r}}=i;t.write(e);const o=pd(t,n,i);!o&&(e.length>1||r[0]==="U"&&(r[1]==="n"||r[1]==="p")&&n.prefix&&n.operator[0]===e&&(e==="+"||e==="-"))&&t.write(" "),o?(t.write(e.length>1?" (":"("),this[r](n,t),t.write(")")):this[r](n,t)}else this[i.argument.type](i.argument,t),t.write(i.operator)},UpdateExpression(i,t){i.prefix?(t.write(i.operator),this[i.argument.type](i.argument,t)):(this[i.argument.type](i.argument,t),t.write(i.operator))},AssignmentExpression(i,t){this[i.left.type](i.left,t),t.write(" "+i.operator+" "),this[i.right.type](i.right,t)},AssignmentPattern(i,t){this[i.left.type](i.left,t),t.write(" = "),this[i.right.type](i.right,t)},BinaryExpression:Yu=function(i,t){const e=i.operator==="in";e&&t.write("("),Br(t,i.left,i,!1),t.write(" "+i.operator+" "),Br(t,i.right,i,!0),e&&t.write(")")},LogicalExpression:Yu,ConditionalExpression(i,t){const{test:e}=i,n=t.expressionsPrecedence[e.type];n===Qe||n<=t.expressionsPrecedence.ConditionalExpression?(t.write("("),this[e.type](e,t),t.write(")")):this[e.type](e,t),t.write(" ? "),this[i.consequent.type](i.consequent,t),t.write(" : "),this[i.alternate.type](i.alternate,t)},NewExpression(i,t){t.write("new ");const e=t.expressionsPrecedence[i.callee.type];e===Qe||e<t.expressionsPrecedence.CallExpression||ZC(i.callee)?(t.write("("),this[i.callee.type](i.callee,t),t.write(")")):this[i.callee.type](i.callee,t),qi(t,i.arguments)},CallExpression(i,t){const e=t.expressionsPrecedence[i.callee.type];e===Qe||e<t.expressionsPrecedence.CallExpression?(t.write("("),this[i.callee.type](i.callee,t),t.write(")")):this[i.callee.type](i.callee,t),i.optional&&t.write("?."),qi(t,i.arguments)},ChainExpression(i,t){this[i.expression.type](i.expression,t)},MemberExpression(i,t){const e=t.expressionsPrecedence[i.object.type];e===Qe||e<t.expressionsPrecedence.MemberExpression?(t.write("("),this[i.object.type](i.object,t),t.write(")")):this[i.object.type](i.object,t),i.computed?(i.optional&&t.write("?."),t.write("["),this[i.property.type](i.property,t),t.write("]")):(i.optional?t.write("?."):t.write("."),this[i.property.type](i.property,t))},MetaProperty(i,t){t.write(i.meta.name+"."+i.property.name,i)},Identifier(i,t){t.write(i.name,i)},PrivateIdentifier(i,t){t.write(`#${i.name}`,i)},Literal(i,t){i.raw!=null?t.write(i.raw,i):i.regex!=null?this.RegExpLiteral(i,t):i.bigint!=null?t.write(i.bigint+"n",i):t.write(RC(i.value),i)},RegExpLiteral(i,t){const{regex:e}=i;t.write(`/${e.pattern}/${e.flags}`,i)}},qC={};class zC{constructor(t){const e=t==null?qC:t;this.output="",e.output!=null?(this.output=e.output,this.write=this.writeToStream):this.output="",this.generator=e.generator!=null?e.generator:jC,this.expressionsPrecedence=e.expressionsPrecedence!=null?e.expressionsPrecedence:YC,this.indent=e.indent!=null?e.indent:"  ",this.lineEnd=e.lineEnd!=null?e.lineEnd:`
`,this.indentLevel=e.startingIndentLevel!=null?e.startingIndentLevel:0,this.writeComments=e.comments?e.comments:!1,e.sourceMap!=null&&(this.write=e.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=e.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:e.sourceMap.file||e.sourceMap._file})}write(t){this.output+=t}writeToStream(t){this.output.write(t)}writeAndMap(t,e){this.output+=t,this.map(t,e)}writeToStreamAndMap(t,e){this.output.write(t),this.map(t,e)}map(t,e){if(e!=null){const{type:o}=e;if(o[0]==="L"&&o[2]==="n"){this.column=0,this.line++;return}if(e.loc!=null){const{mapping:s}=this;s.original=e.loc.start,s.name=e.name,this.sourceMap.addMapping(s)}if(o[0]==="T"&&o[8]==="E"||o[0]==="L"&&o[1]==="i"&&typeof e.value=="string"){const{length:s}=t;let{column:l,line:h}=this;for(let c=0;c<s;c++)t[c]===`
`?(l=0,h++):l++;this.column=l,this.line=h;return}}const{length:n}=t,{lineEnd:r}=this;n>0&&(this.lineEndSize>0&&(r.length===1?t[n-1]===r:t.endsWith(r))?(this.line+=this.lineEndSize,this.column=0):this.column+=n)}toString(){return this.output}}function UC(i,t){const e=new zC(t);return e.generator[i.type](i,e),e.output}function GC(i){const t=[];for(const o in i){const s=i[o];if(!s.layers.includes("F.Cu"))continue;let l=[s.pos[0],s.pos[1]];s.origin!=null&&(l[0]=s.origin[0],l[1]=s.origin[1]),t.push(...Fi(xa([],s.shape),l))}const e=hd(t),n=ud(t);Ii(t,"cc");const r=Math.max(e,n);return Fi(t,Ii(t,"cc"),[-25,-25]),sd(t,[40/r,40/r],Ii(t,"cc")),t}const VC=i=>{let t=!1;return i.type!=="ObjectExpression"?!1:(i.properties.forEach(e=>{if(e.value.type!=="ObjectExpression")return;const n=e.value.properties.map(r=>r.key.value);t=t||["shape","pos","layers"].every(r=>n.includes(r))}),t)};function HC(i,t){i.type==="VariableDeclaration"&&i.declarations.forEach(e=>{if(e.type==="VariableDeclarator"&&VC(e.init)){const n=UC(e.init);try{const r=JSON.parse(n),o=[e.id.name,r,GC(r)];t.push(o)}catch{}}})}function JC(i){const t=ci.exports.parseScript(i,{range:!0,comment:!0}),e=[];return t.body.forEach(n=>{HC(n,e)}),{footprints:e}}const jo={shapes:[],limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4};function KC({shapes:i,limits:t,mm_per_unit:e}){i===void 0&&(i=jo.shapes),t===void 0&&(t=jo.limits),e===void 0&&(e=jo.mm_per_unit),Qt.shapes=i,Qt.limits=t,Qt.mm_per_unit=e}function tS(i){var o,s,l,h;const t=(o=i.d)!=null?o:"",e=(s=i.stroke)!=null?s:"black",n=(l=i.fill)!=null?l:"none",r=(h=i.strokeWidth)!=null?h:.03;Qt.paths.push({d:t,stroke:e,fill:n,strokeWidth:r})}const qo={pcb:null,layerColors:{"F.Cu":"#ff8c00cc"},limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4},eS=i=>({pcb:t,layerColors:e,limits:n,mm_per_unit:r})=>{t===void 0&&console.log("renderPCB must include pcb param"),e===void 0&&(e=qo.layerColors),n===void 0&&(n=qo.limits),r===void 0&&(r=qo.mm_per_unit);const o=[];for(const s in e)o.push({data:t.getLayer(s,i),color:e[s],groupId:s});Qt.shapes=o,Qt.limits=n,Qt.mm_per_unit=r};async function iS(i,t){const n=await(await fetch(i,{mode:"cors"})).text();t.codemirror.view.dispatch({changes:{from:0,insert:n}});const r=c=>c.includes("return kicadToObj("),s=t.codemirror.view.state.doc.toString().split(`
`);let l=0,h=0;for(;;){const c=s[l];if(!c||(h+=c.length,l>s.length)||s[l]==="`)})()"&&!r(s[l+1]))break;l++}t.codemirror.foldRange(0,h+l),ct("RUN"),document.querySelector(".center-button").click()}const nS=`/* -- DECLARE_COMPONENTS -- */
const Molex_serial = {"Rx":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[-0.075,0.064],"layers":["F.Cu"],"index":1},"Tx":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[-0.025,0.064],"layers":["F.Cu"],"index":2},"DTR":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[0.025,0.064],"layers":["F.Cu"],"index":3},"GND":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[0.075,0.064],"layers":["F.Cu"],"index":4},"NC1":{"shape":"M -0.055 0.065L 0.055 0.065L 0.055000000000000014 -0.065L -0.055 -0.065L -0.055000000000000014 0.065","pos":[-0.16,-0.065],"layers":["F.Cu"],"index":0},"NC2":{"shape":"M -0.055 0.065L 0.055 0.065L 0.055000000000000014 -0.065L -0.055 -0.065L -0.055000000000000014 0.065","pos":[0.16,-0.065],"layers":["F.Cu"],"index":0}}
const DRV8428_HTSSOP = {"VM":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966 M -0.029 -0.0053L -0.028815032667476745 -0.005296771383201207L -0.028630290689156138 -0.005287089466377069L -0.028445999144681437 -0.005270966045451849L -0.028262382564911655 -0.005248420764330322L -0.02807966465836527 -0.0052194810909647026L -0.027898068038665878 -0.00518418228388917L -0.027717813953321763 -0.005142567349262782L -0.027539122014169908 -0.00509468698847309L -0.02736220992981278 -0.005040599536364314L -0.027187293240373958 -0.004980370890165314L -0.02701458505489567 -0.004914074429203974L -0.02684429579169826 -0.004841790925505785L -0.02667663292201789 -0.004763608445385585L -0.02651180071723478 -0.0046796222421523126L -0.026350000000000002 -0.004589934640057525L -0.026191427899564017 -0.004494654909629058L -0.026036277611605044 -0.00439389913454172L -0.025884738162849894 -0.004287790070187222L -0.025736994180774013 -0.004176456994115627L -0.025593225668661342 -0.004060035548530584L -0.025453607786298054 -0.00393866757503019L -0.025318310636567316 -0.0038125009417948512L -0.02518749905820515 -0.003681689363432686L -0.02506133242496981 -0.003546392213701949L -0.02493996445146942 -0.0034067743313386583L -0.024823543005884376 -0.003263005819225989L -0.02471220992981278 -0.0031152618371501077L -0.02460610086545828 -0.002963722388394958L -0.024505345090370945 -0.002808572100435986L -0.024410065359942477 -0.002650000000000001L -0.024320377757847688 -0.002488199282765222L -0.024236391554614416 -0.002323367077982111L -0.024158209074494216 -0.0021557042083017413L -0.02408592557079603 -0.001985414945104333L -0.024019629109834687 -0.0018127067596260447L -0.023959400463635688 -0.0016377900701872211L -0.023905313011526912 -0.0014608779858300957L -0.02385743265073722 -0.0012821860466782397L -0.023815817716110833 -0.0011019319613341256L -0.0237805189090353 -0.0009203353416347322L -0.02375157923566968 -0.0007376174350883485L -0.023729033954548152 -0.0005540008553185632L -0.023712910533622934 -0.0003697093108438647L -0.023703228616798792 -0.00018496733252325575L -0.023700000000000002 -8.673617379884035e-19L -0.023703228616798792 0.00018496733252325401L -0.023712910533622934 0.00036970931084386385L -0.023729033954548152 0.0005540008553185632L -0.02375157923566968 0.0007376174350883467L -0.0237805189090353 0.0009203353416347313L -0.023815817716110833 0.001101931961334123L -0.02385743265073722 0.0012821860466782405L -0.023905313011526912 0.0014608779858300957L -0.023959400463635688 0.0016377900701872216L -0.024019629109834687 0.001812706759626045L -0.02408592557079603 0.0019854149451043347L -0.024158209074494216 0.002155704208301739L -0.024236391554614416 0.0023233670779821127L -0.024320377757847688 0.00248819928276522L -0.024410065359942477 0.0026499999999999987L -0.024505345090370945 0.0028085721004359855L -0.02460610086545828 0.002963722388394958L -0.02471220992981278 0.0031152618371501064L -0.024823543005884373 0.0032630058192259894L -0.02493996445146942 0.0034067743313386566L -0.02506133242496981 0.0035463922137019483L -0.025187499058205148 0.0036816893634326843L -0.025318310636567316 0.0038125009417948512L -0.02545360778629805 0.003938667575030189L -0.025593225668661342 0.004060035548530583L -0.025736994180774013 0.004176456994115624L -0.025884738162849894 0.004287790070187221L -0.026036277611605044 0.00439389913454172L -0.026191427899564017 0.004494654909629058L -0.026350000000000002 0.004589934640057526L -0.026511800717234777 0.004679622242152314L -0.02667663292201789 0.004763608445385584L -0.02684429579169826 0.004841790925505784L -0.027014585054895665 0.004914074429203973L -0.027187293240373958 0.0049803708901653134L -0.02736220992981278 0.005040599536364315L -0.027539122014169904 0.005094686988473088L -0.027717813953321763 0.00514256734926278L -0.027898068038665878 0.005184182283889169L -0.02807966465836527 0.005219481090964702L -0.028262382564911655 0.0052484207643303206L -0.028445999144681437 0.005270966045451848L -0.028630290689156138 0.005287089466377068L -0.02881503266747675 0.005296771383201208L -0.029 0.0053L -0.029184967332523255 0.005296771383201208L -0.029369709310843862 0.005287089466377068L -0.029554000855318563 0.005270966045451848L -0.029737617435088348 0.0052484207643303206L -0.029920335341634734 0.005219481090964702L -0.030101931961334125 0.005184182283889171L -0.03028218604667824 0.005142567349262782L -0.030460877985830095 0.005094686988473092L -0.030637790070187226 0.005040599536364313L -0.030812706759626045 0.0049803708901653134L -0.030985414945104334 0.004914074429203973L -0.03115570420830174 0.004841790925505784L -0.03132336707798211 0.004763608445385584L -0.03148819928276522 0.004679622242152314L -0.031650000000000005 0.004589934640057526L -0.031808572100435986 0.004494654909629058L -0.03196372238839496 0.004393899134541722L -0.032115261837150105 0.004287790070187223L -0.03226300581922599 0.004176456994115628L -0.03240677433133866 0.004060035548530583L -0.03254639221370195 0.003938667575030189L -0.03268168936343269 0.0038125009417948512L -0.03281250094179485 0.0036816893634326877L -0.03293866757503019 0.00354639221370195L -0.033060035548530584 0.00340677433133866L -0.03317645699411563 0.0032630058192259876L -0.03328779007018722 0.003115261837150108L -0.03339389913454172 0.0029637223883949614L -0.03349465490962906 0.0028085721004359873L -0.03358993464005752 0.002650000000000002L -0.03367962224215232 0.0024881992827652227L -0.03376360844538558 0.0023233670779821127L -0.03384179092550579 0.002155704208301741L -0.03391407442920397 0.0019854149451043347L -0.03398037089016531 0.0018127067596260486L -0.03404059953636431 0.0016377900701872216L -0.034094686988473094 0.001460877985830093L -0.034142567349262784 0.0012821860466782405L -0.03418418228388917 0.0011019319613341265L -0.034219481090964704 0.0009203353416347313L -0.03424842076433032 0.0007376174350883441L -0.03427096604545185 0.0005540008553185632L -0.03428708946637707 0.0003697093108438656L -0.03429677138320121 0.00018496733252325922L -0.034300000000000004 8.673617379884035e-19L -0.03429677138320121 -0.00018496733252325748L -0.03428708946637707 -0.000369709310843863L -0.03427096604545185 -0.0005540008553185614L -0.03424842076433032 -0.0007376174350883467L -0.034219481090964704 -0.0009203353416347287L -0.03418418228388917 -0.0011019319613341213L -0.034142567349262784 -0.001282186046678238L -0.034094686988473094 -0.0014608779858300974L -0.03404059953636432 -0.0016377900701872198L -0.03398037089016532 -0.0018127067596260408L -0.03391407442920397 -0.001985414945104333L -0.03384179092550579 -0.002155704208301744L -0.03376360844538558 -0.002323367077982111L -0.03367962224215232 -0.002488199282765219L -0.03358993464005752 -0.002650000000000001L -0.03349465490962906 -0.002808572100435985L -0.03339389913454172 -0.0029637223883949553L -0.03328779007018722 -0.003115261837150107L -0.03317645699411563 -0.00326300581922599L -0.033060035548530584 -0.003406774331338658L -0.032938667575030195 -0.0035463922137019465L -0.03281250094179486 -0.0036816893634326825L -0.03268168936343269 -0.0038125009417948495L -0.03254639221370195 -0.00393866757503019L -0.032406774331338664 -0.004060035548530582L -0.03226300581922599 -0.004176456994115624L -0.03211526183715011 -0.004287790070187221L -0.03196372238839496 -0.004393899134541719L -0.03180857210043599 -0.004494654909629055L -0.031650000000000005 -0.004589934640057523L -0.03148819928276522 -0.0046796222421523126L -0.03132336707798211 -0.004763608445385586L -0.031155704208301743 -0.004841790925505785L -0.030985414945104338 -0.004914074429203973L -0.030812706759626045 -0.004980370890165314L -0.030637790070187222 -0.005040599536364314L -0.0304608779858301 -0.005094686988473089L -0.03028218604667824 -0.005142567349262781L -0.03010193196133413 -0.005184182283889169L -0.029920335341634737 -0.005219481090964702L -0.02973761743508835 -0.005248420764330322L -0.029554000855318563 -0.005270966045451849L -0.029369709310843862 -0.005287089466377069L -0.029184967332523255 -0.005296771383201207L -0.029 -0.0053","pos":[-0.12,0.089565],"layers":["F.Cu"],"index":1},"PGND":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,0.063975],"layers":["F.Cu"],"index":2},"AOUT1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,0.038385],"layers":["F.Cu"],"index":3},"AOUT2":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,0.012795],"layers":["F.Cu"],"index":4},"BOUT2":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.012795],"layers":["F.Cu"],"index":5},"BOUT1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.038385],"layers":["F.Cu"],"index":6},"GND1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.063975],"layers":["F.Cu"],"index":7},"GND2":{"shape":"M -0.05999999999999999 0.09000000000000001L 0.060000000000000005 0.09000000000000001L 0.06000000000000002 -0.08999999999999998L -0.05999999999999996 -0.09000000000000001L -0.06000000000000002 0.08999999999999998","pos":[0,0],"layers":["F.Cu"],"index":17},"DVDD":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.089565],"layers":["F.Cu"],"index":8},"VREF":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.089565],"layers":["F.Cu"],"index":9},"M0":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.063975],"layers":["F.Cu"],"index":10},"DECAY":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.038385],"layers":["F.Cu"],"index":11},"M1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.012795],"layers":["F.Cu"],"index":12},"STEP":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.012795],"layers":["F.Cu"],"index":13},"DIR":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.038385],"layers":["F.Cu"],"index":14},"EN":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.063975],"layers":["F.Cu"],"index":15},"SLEEP":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.089565],"layers":["F.Cu"],"index":16}};

// constants
const width = 1;
const height = 1;

/* -- DECLARE_PCB -- */
let board = new PCB();

let interior = geo.rectangle(width, height)

board.addShape("interior", interior);

/* -- ADD_COMPONENTS -- */

/* -- ADD_WIRES -- */

/* -- RENDER_PCB -- */
renderPCB({
  pcb: board,
  layerColors: {
    "interior": "#002d00ff",
    "B.Cu": "#ff4c007f",
    "F.Cu": "#ff8c00cc",
    "drill": "#ff3300e5",
    "padLabels": "#ffff99e5",
    "componentLabels": "#00e5e5e5",
  },
  limits: {
    x: [-width/2, width/2],
    y: [-height/2, height/2]
  },
  mm_per_unit: 25.4
});
`;function ju(i){Qt.error=i,ct("RENDER")}class rS extends AC{constructor(){super(),Qt.storedPCB=this}}const sS=()=>Qt.codemirror.view.state.doc.toString(),oS=i=>({geo:RP,PCB:rS,via:SC,renderPCB:eS(i),renderShapes:KC,renderPath:tS,document:null,window:null,localStorage:null,Function:null,eval:null,pt:(t,e,n=-1,r=-1)=>{const o=Qt.pts.some(c=>c.start===n);if(n===-1||o)return[t,e];const l=sS().slice(n,r),h={pt:[t,e],start:n,end:r,text:l};return Qt.pts.push(h),[t,e]},path:(...t)=>t}),lS={INIT(i,t){ct("RENDER"),t.codemirror=document.querySelector(".code-editor"),CC(t),new URL(window.location.href);const e=window.location.search,n=new URLSearchParams(e).get("code"),r=new URLSearchParams(e).get("file"),o=new URLSearchParams(e).get("bezier")==="false",s=new URLSearchParams(e).get("grid")==="false";if(o&&(t.viewHandles=!1),s&&(t.grid=!1),!n)if(r){let l=r;r.startsWith("http")||(l=`examples/${r}`),iS(l,t)}else{const l=window.localStorage.getItem("svg-pcb");t.codemirror.view.dispatch({changes:{from:0,insert:l!=null?l:""}}),ct("RUN"),document.querySelector(".center-button").click()}ct("RENDER")},RUN({dragging:i=!1,flatten:t=!1}={},e){var d;e.paths=[],e.pts=[],e.error="";const n=e.codemirror.view.state.doc;let r=n.toString();const o=wf(e.codemirror.view.state,n.length,1e4);if(!i){let m=[],v=[];try{const C=JC(r,i);m=C.footprints,v=(d=C.layers)!=null?d:[]}catch(C){console.error(C),ju(C)}e.footprints=m,e.layers=v}const{pts:s,paths:l}=cd(e,o),h=[];let c=0;s.sort((m,v)=>m[0]-v[0]).forEach((m,v)=>{const[C,O]=m;h.push(r.substr(c,C-c));const y=r.substr(C,O-C),P=y.indexOf("("),w=`${y.slice(0,-1)}, ${C+P+1}, ${O-1})`;h.push(w),c=O,v===s.length-1&&h.push(r.substr(O))}),h.length>0&&(r=h.join(""));const p=oS(t);try{new Function(...Object.keys(p),r)(...Object.values(p))}catch(m){console.error("prog erred",m),ju(m)}ct("RENDER")},NEW_FILE(i,t){ct("UPLOAD_JS",{text:nS})},UPLOAD_COMP({text:i,name:t},e){var o;i=i.replaceAll("$",""),i=JSON.stringify(MC(i)),i=`const temp_name = ${i}
`;const n=e.codemirror.view.state.doc.toString(),r=(o=Nl("DECLARE_COMPONENTS",n))!=null?o:0;e.codemirror.view.dispatch({changes:{from:r,insert:i}}),e.codemirror.foldRange(0,i.length),ct("RENDER")},UPLOAD_JS({text:i},t){const e=t.codemirror.view.state.doc.toString().length;t.codemirror.view.dispatch({changes:{from:0,to:e,insert:i}}),ct("RUN"),document.querySelector(".center-button").click()},ADD_IMPORT({text:i,name:t},e){var s;if(e.footprints.map(l=>l[0]).includes(t))return;const r=e.codemirror.view.state.doc.toString(),o=(s=Nl("DECLARE_COMPONENTS",r))!=null?s:0;i=`const ${t} = ${i}
`,e.codemirror.view.dispatch({changes:{from:o,insert:i}}),ct("RUN")},TRANSLATE({x:i,y:t,index:e},n){n.transformUpdate(i,t),ct("RUN",{dragging:!0})},RENDER(){f0(JP(Qt),document.getElementById("root"))}};function ct(i,t={}){const e=lS[i];if(e)return e(t,Qt);console.log("Action not recongnized:",i)}window.addEventListener("load",()=>{ct("INIT")})});export default aS();
