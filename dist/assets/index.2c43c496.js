(function(){const re=document.createElement("link").relList;if(re&&re.supports&&re.supports("modulepreload"))return;for(const Ot of document.querySelectorAll('link[rel="modulepreload"]'))un(Ot);new MutationObserver(Ot=>{for(const $t of Ot)if($t.type==="childList")for(const ce of $t.addedNodes)ce.tagName==="LINK"&&ce.rel==="modulepreload"&&un(ce)}).observe(document,{childList:!0,subtree:!0});function rn(Ot){const $t={};return Ot.integrity&&($t.integrity=Ot.integrity),Ot.referrerpolicy&&($t.referrerPolicy=Ot.referrerpolicy),Ot.crossorigin==="use-credentials"?$t.credentials="include":Ot.crossorigin==="anonymous"?$t.credentials="omit":$t.credentials="same-origin",$t}function un(Ot){if(Ot.ep)return;Ot.ep=!0;const $t=rn(Ot);fetch(Ot.href,$t)}})();const aC="modulepreload",lC=function(Un){return"/"+Un},mf={},hC=function(re,rn,un){return!rn||rn.length===0?re():Promise.all(rn.map(Ot=>{if(Ot=lC(Ot),Ot in mf)return;mf[Ot]=!0;const $t=Ot.endsWith(".css"),ce=$t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Ot}"]${ce}`))return;const Be=document.createElement("link");if(Be.rel=$t?"stylesheet":aC,$t||(Be.as="script",Be.crossOrigin=""),Be.href=Ot,document.head.appendChild(Be),$t)return new Promise((Us,cn)=>{Be.addEventListener("load",Us),Be.addEventListener("error",()=>cn(new Error(`Unable to preload CSS for ${Ot}`)))})})).then(()=>re())};var uC=(Un,re)=>()=>(re||Un((re={exports:{}}).exports,re),re.exports),cC=uC((Un,re)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();/**
* @license
* Copyright 2017 Google LLC
* SPDX-License-Identifier: BSD-3-Clause
*/var rn;const un=window,Ot=un.trustedTypes,$t=Ot?Ot.createPolicy("lit-html",{createHTML:e=>e}):void 0,ce=`lit$${(Math.random()+"").slice(9)}$`,Be="?"+ce,Us=`<${Be}>`,cn=document,Si=(e="")=>cn.createComment(e),Ci=e=>e===null||typeof e!="object"&&typeof e!="function",wl=Array.isArray,Of=e=>wl(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",wi=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,bl=/-->/g,El=/>/g,Tn=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Dl=/'/g,Al=/"/g,Tl=/^(?:script|style|textarea|title)$/i,kl=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),kn=kl(1),be=kl(2),bi=Symbol.for("lit-noChange"),Mt=Symbol.for("lit-nothing"),_l=new WeakMap,gf=(e,t,n)=>{var i,r;const o=(i=n==null?void 0:n.renderBefore)!==null&&i!==void 0?i:t;let s=o._$litPart$;if(s===void 0){const l=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:null;o._$litPart$=s=new Di(t.insertBefore(Si(),l),l,void 0,n!=null?n:{})}return s._$AI(e),s},Gn=cn.createTreeWalker(cn,129,null,!1),yf=(e,t)=>{const n=e.length-1,i=[];let r,o=t===2?"<svg>":"",s=wi;for(let h=0;h<n;h++){const c=e[h];let d,f,m=-1,v=0;for(;v<c.length&&(s.lastIndex=v,f=s.exec(c),f!==null);)v=s.lastIndex,s===wi?f[1]==="!--"?s=bl:f[1]!==void 0?s=El:f[2]!==void 0?(Tl.test(f[2])&&(r=RegExp("</"+f[2],"g")),s=Tn):f[3]!==void 0&&(s=Tn):s===Tn?f[0]===">"?(s=r!=null?r:wi,m=-1):f[1]===void 0?m=-2:(m=s.lastIndex-f[2].length,d=f[1],s=f[3]===void 0?Tn:f[3]==='"'?Al:Dl):s===Al||s===Dl?s=Tn:s===bl||s===El?s=wi:(s=Tn,r=void 0);const C=s===Tn&&e[h+1].startsWith("/>")?" ":"";o+=s===wi?c+Us:m>=0?(i.push(d),c.slice(0,m)+"$lit$"+c.slice(m)+ce+C):c+ce+(m===-2?(i.push(void 0),h):C)}const l=o+(e[n]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[$t!==void 0?$t.createHTML(l):l,i]};class Ei{constructor({strings:t,_$litType$:n},i){let r;this.parts=[];let o=0,s=0;const l=t.length-1,h=this.parts,[c,d]=yf(t,n);if(this.el=Ei.createElement(c,i),Gn.currentNode=this.el.content,n===2){const f=this.el.content,m=f.firstChild;m.remove(),f.append(...m.childNodes)}for(;(r=Gn.nextNode())!==null&&h.length<l;){if(r.nodeType===1){if(r.hasAttributes()){const f=[];for(const m of r.getAttributeNames())if(m.endsWith("$lit$")||m.startsWith(ce)){const v=d[s++];if(f.push(m),v!==void 0){const C=r.getAttribute(v.toLowerCase()+"$lit$").split(ce),O=/([.?@])?(.*)/.exec(v);h.push({type:1,index:o,name:O[2],strings:C,ctor:O[1]==="."?vf:O[1]==="?"?Sf:O[1]==="@"?Cf:vr})}else h.push({type:6,index:o})}for(const m of f)r.removeAttribute(m)}if(Tl.test(r.tagName)){const f=r.textContent.split(ce),m=f.length-1;if(m>0){r.textContent=Ot?Ot.emptyScript:"";for(let v=0;v<m;v++)r.append(f[v],Si()),Gn.nextNode(),h.push({type:2,index:++o});r.append(f[m],Si())}}}else if(r.nodeType===8)if(r.data===Be)h.push({type:2,index:o});else{let f=-1;for(;(f=r.data.indexOf(ce,f+1))!==-1;)h.push({type:7,index:o}),f+=ce.length-1}o++}}static createElement(t,n){const i=cn.createElement("template");return i.innerHTML=t,i}}function Vn(e,t,n=e,i){var r,o,s,l;if(t===bi)return t;let h=i!==void 0?(r=n._$Cl)===null||r===void 0?void 0:r[i]:n._$Cu;const c=Ci(t)?void 0:t._$litDirective$;return(h==null?void 0:h.constructor)!==c&&((o=h==null?void 0:h._$AO)===null||o===void 0||o.call(h,!1),c===void 0?h=void 0:(h=new c(e),h._$AT(e,n,i)),i!==void 0?((s=(l=n)._$Cl)!==null&&s!==void 0?s:l._$Cl=[])[i]=h:n._$Cu=h),h!==void 0&&(t=Vn(e,h._$AS(e,t.values),h,i)),t}class xf{constructor(t,n){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var n;const{el:{content:i},parts:r}=this._$AD,o=((n=t==null?void 0:t.creationScope)!==null&&n!==void 0?n:cn).importNode(i,!0);Gn.currentNode=o;let s=Gn.nextNode(),l=0,h=0,c=r[0];for(;c!==void 0;){if(l===c.index){let d;c.type===2?d=new Di(s,s.nextSibling,this,t):c.type===1?d=new c.ctor(s,c.name,c.strings,this,t):c.type===6&&(d=new wf(s,this,t)),this.v.push(d),c=r[++h]}l!==(c==null?void 0:c.index)&&(s=Gn.nextNode(),l++)}return o}m(t){let n=0;for(const i of this.v)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,n),n+=i.strings.length-2):i._$AI(t[n])),n++}}class Di{constructor(t,n,i,r){var o;this.type=2,this._$AH=Mt,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=i,this.options=r,this._$C_=(o=r==null?void 0:r.isConnected)===null||o===void 0||o}get _$AU(){var t,n;return(n=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&n!==void 0?n:this._$C_}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&t.nodeType===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=Vn(this,t,n),Ci(t)?t===Mt||t==null||t===""?(this._$AH!==Mt&&this._$AR(),this._$AH=Mt):t!==this._$AH&&t!==bi&&this.$(t):t._$litType$!==void 0?this.T(t):t.nodeType!==void 0?this.k(t):Of(t)?this.O(t):this.$(t)}S(t,n=this._$AB){return this._$AA.parentNode.insertBefore(t,n)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}$(t){this._$AH!==Mt&&Ci(this._$AH)?this._$AA.nextSibling.data=t:this.k(cn.createTextNode(t)),this._$AH=t}T(t){var n;const{values:i,_$litType$:r}=t,o=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=Ei.createElement(r.h,this.options)),r);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===o)this._$AH.m(i);else{const s=new xf(o,this),l=s.p(this.options);s.m(i),this.k(l),this._$AH=s}}_$AC(t){let n=_l.get(t.strings);return n===void 0&&_l.set(t.strings,n=new Ei(t)),n}O(t){wl(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let i,r=0;for(const o of t)r===n.length?n.push(i=new Di(this.S(Si()),this.S(Si()),this,this.options)):i=n[r],i._$AI(o),r++;r<n.length&&(this._$AR(i&&i._$AB.nextSibling,r),n.length=r)}_$AR(t=this._$AA.nextSibling,n){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,n);t&&t!==this._$AB;){const r=t.nextSibling;t.remove(),t=r}}setConnected(t){var n;this._$AM===void 0&&(this._$C_=t,(n=this._$AP)===null||n===void 0||n.call(this,t))}}class vr{constructor(t,n,i,r,o){this.type=1,this._$AH=Mt,this._$AN=void 0,this.element=t,this.name=n,this._$AM=r,this.options=o,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Mt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,n=this,i,r){const o=this.strings;let s=!1;if(o===void 0)t=Vn(this,t,n,0),s=!Ci(t)||t!==this._$AH&&t!==bi,s&&(this._$AH=t);else{const l=t;let h,c;for(t=o[0],h=0;h<o.length-1;h++)c=Vn(this,l[i+h],n,h),c===bi&&(c=this._$AH[h]),s||(s=!Ci(c)||c!==this._$AH[h]),c===Mt?t=Mt:t!==Mt&&(t+=(c!=null?c:"")+o[h+1]),this._$AH[h]=c}s&&!r&&this.P(t)}P(t){t===Mt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t!=null?t:"")}}class vf extends vr{constructor(){super(...arguments),this.type=3}P(t){this.element[this.name]=t===Mt?void 0:t}}const Pf=Ot?Ot.emptyScript:"";class Sf extends vr{constructor(){super(...arguments),this.type=4}P(t){t&&t!==Mt?this.element.setAttribute(this.name,Pf):this.element.removeAttribute(this.name)}}class Cf extends vr{constructor(t,n,i,r,o){super(t,n,i,r,o),this.type=5}_$AI(t,n=this){var i;if((t=(i=Vn(this,t,n,0))!==null&&i!==void 0?i:Mt)===bi)return;const r=this._$AH,o=t===Mt&&r!==Mt||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,s=t!==Mt&&(r===Mt||o);o&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n,i;typeof this._$AH=="function"?this._$AH.call((i=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&i!==void 0?i:this.element,t):this._$AH.handleEvent(t)}}class wf{constructor(t,n,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){Vn(this,t)}}const Il=un.litHtmlPolyfillSupport;Il==null||Il(Ei,Di),((rn=un.litHtmlVersions)!==null&&rn!==void 0?rn:un.litHtmlVersions=[]).push("2.3.1");class gt{constructor(){}lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,n,i){let r=[];return this.decompose(0,t,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Me.from(r,this.length-(n-t)+i.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,n=this.length){let i=[];return this.decompose(t,n,i,0),Me.from(i,n-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let n=this.scanIdentical(t,1),i=this.length-this.scanIdentical(t,-1),r=new Ai(this),o=new Ai(t);for(let s=n,l=n;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(t=1){return new Ai(this,t)}iterRange(t,n=this.length){return new Ll(this,t,n)}iterLines(t,n){let i;if(t==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(t).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new Xl(i)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?gt.empty:t.length<=32?new kt(t):Me.from(kt.split(t,[]))}}class kt extends gt{constructor(t,n=bf(t)){super(),this.text=t,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(t,n,i,r){for(let o=0;;o++){let s=this.text[o],l=r+s.length;if((n?i:l)>=t)return new Ef(r,l,i,s);r=l+1,i++}}decompose(t,n,i,r){let o=t<=0&&n>=this.length?this:new kt(Ql(this.text,t,n),Math.min(n,this.length)-Math.max(0,t));if(r&1){let s=i.pop(),l=Pr(o.text,s.text.slice(),0,o.length);if(l.length<=32)i.push(new kt(l,s.length+o.length));else{let h=l.length>>1;i.push(new kt(l.slice(0,h)),new kt(l.slice(h)))}}else i.push(o)}replace(t,n,i){if(!(i instanceof kt))return super.replace(t,n,i);let r=Pr(this.text,Pr(i.text,Ql(this.text,0,t)),n),o=this.length+i.length-(n-t);return r.length<=32?new kt(r,o):Me.from(kt.split(r,[]),o)}sliceString(t,n=this.length,i=`
`){let r="";for(let o=0,s=0;o<=n&&s<this.text.length;s++){let l=this.text[s],h=o+l.length;o>t&&s&&(r+=i),t<h&&n>o&&(r+=l.slice(Math.max(0,t-o),n-o)),o=h+1}return r}flatten(t){for(let n of this.text)t.push(n)}scanIdentical(){return 0}static split(t,n){let i=[],r=-1;for(let o of t)i.push(o),r+=o.length+1,i.length==32&&(n.push(new kt(i,r)),i=[],r=-1);return r>-1&&n.push(new kt(i,r)),n}}class Me extends gt{constructor(t,n){super(),this.children=t,this.length=n,this.lines=0;for(let i of t)this.lines+=i.lines}lineInner(t,n,i,r){for(let o=0;;o++){let s=this.children[o],l=r+s.length,h=i+s.lines-1;if((n?h:l)>=t)return s.lineInner(t,n,i,r);r=l+1,i=h+1}}decompose(t,n,i,r){for(let o=0,s=0;s<=n&&o<this.children.length;o++){let l=this.children[o],h=s+l.length;if(t<=h&&n>=s){let c=r&((s<=t?1:0)|(h>=n?2:0));s>=t&&h<=n&&!c?i.push(l):l.decompose(t-s,n-s,i,c)}s=h+1}}replace(t,n,i){if(i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.length;if(t>=o&&n<=l){let h=s.replace(t-o,n-o,i),c=this.lines-s.lines+h.lines;if(h.lines<c>>5-1&&h.lines>c>>5+1){let d=this.children.slice();return d[r]=h,new Me(d,this.length-(n-t)+i.length)}return super.replace(o,l,h)}o=l+1}return super.replace(t,n,i)}sliceString(t,n=this.length,i=`
`){let r="";for(let o=0,s=0;o<this.children.length&&s<=n;o++){let l=this.children[o],h=s+l.length;s>t&&o&&(r+=i),t<h&&n>s&&(r+=l.sliceString(t-s,n-s,i)),s=h+1}return r}flatten(t){for(let n of this.children)n.flatten(t)}scanIdentical(t,n){if(!(t instanceof Me))return 0;let i=0,[r,o,s,l]=n>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;r+=n,o+=n){if(r==s||o==l)return i;let h=this.children[r],c=t.children[o];if(h!=c)return i+h.scanIdentical(c,n);i+=h.length+1}}static from(t,n=t.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let v of t)i+=v.lines;if(i<32){let v=[];for(let C of t)C.flatten(v);return new kt(v,n)}let r=Math.max(32,i>>5),o=r<<1,s=r>>1,l=[],h=0,c=-1,d=[];function f(v){let C;if(v.lines>o&&v instanceof Me)for(let O of v.children)f(O);else v.lines>s&&(h>s||!h)?(m(),l.push(v)):v instanceof kt&&h&&(C=d[d.length-1])instanceof kt&&v.lines+C.lines<=32?(h+=v.lines,c+=v.length+1,d[d.length-1]=new kt(C.text.concat(v.text),C.length+1+v.length)):(h+v.lines>r&&m(),h+=v.lines,c+=v.length+1,d.push(v))}function m(){h!=0&&(l.push(d.length==1?d[0]:Me.from(d,c)),c=-1,h=d.length=0)}for(let v of t)f(v);return m(),l.length==1?l[0]:new Me(l,n)}}gt.empty=new kt([""],0);function bf(e){let t=-1;for(let n of e)t+=n.length+1;return t}function Pr(e,t,n=0,i=1e9){for(let r=0,o=0,s=!0;o<e.length&&r<=i;o++){let l=e[o],h=r+l.length;h>=n&&(h>i&&(l=l.slice(0,i-r)),r<n&&(l=l.slice(n-r)),s?(t[t.length-1]+=l,s=!1):t.push(l)),r=h+1}return t}function Ql(e,t,n){return Pr(e,[""],t,n)}class Ai{constructor(t,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[n>0?1:(t instanceof kt?t.text.length:t.children.length)<<1]}nextInner(t,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],s=o>>1,l=r instanceof kt?r.text.length:r.children.length;if(s==(n>0?l:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(n>0?0:1)){if(this.offsets[i]+=n,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(r instanceof kt){let h=r.text[s+(n<0?-1:0)];if(this.offsets[i]+=n,h.length>Math.max(0,t))return this.value=t==0?h:n>0?h.slice(t):h.slice(0,h.length-t),this;t-=h.length}else{let h=r.children[s+(n<0?-1:0)];t>h.length?(t-=h.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(h),this.offsets.push(n>0?1:(h instanceof kt?h.text.length:h.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class Ll{constructor(t,n,i){this.value="",this.done=!1,this.cursor=new Ai(t,n>i?-1:1),this.pos=n>i?t.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(t,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;t>i&&(t=i),i-=t;let{value:r}=this.cursor.next(t);return this.pos+=(r.length+t)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Xl{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:n,lineBreak:i,value:r}=this.inner.next(t);return n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(gt.prototype[Symbol.iterator]=function(){return this.iter()},Ai.prototype[Symbol.iterator]=Ll.prototype[Symbol.iterator]=Xl.prototype[Symbol.iterator]=function(){return this});class Ef{constructor(t,n,i,r){this.from=t,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}let Hn="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=1;e<Hn.length;e++)Hn[e]+=Hn[e-1];function Df(e){for(let t=1;t<Hn.length;t+=2)if(Hn[t]>e)return Hn[t-1]<=e;return!1}function $l(e){return e>=127462&&e<=127487}const Nl=8205;function se(e,t,n=!0,i=!0){return(n?Fl:Af)(e,t,i)}function Fl(e,t,n){if(t==e.length)return t;t&&Rl(e.charCodeAt(t))&&Bl(e.charCodeAt(t-1))&&t--;let i=zt(e,t);for(t+=ye(i);t<e.length;){let r=zt(e,t);if(i==Nl||r==Nl||n&&Df(r))t+=ye(r),i=r;else if($l(r)){let o=0,s=t-2;for(;s>=0&&$l(zt(e,s));)o++,s-=2;if(o%2==0)break;t+=2}else break}return t}function Af(e,t,n){for(;t>0;){let i=Fl(e,t-2,n);if(i<t)return i;t--}return 0}function Rl(e){return e>=56320&&e<57344}function Bl(e){return e>=55296&&e<56320}function zt(e,t){let n=e.charCodeAt(t);if(!Bl(n)||t+1==e.length)return n;let i=e.charCodeAt(t+1);return Rl(i)?(n-55296<<10)+(i-56320)+65536:n}function Gs(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}function ye(e){return e<65536?1:2}const Vs=/\r\n?|\n/;var qt=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(qt||(qt={}));class Ye{constructor(t){this.sections=t}get length(){let t=0;for(let n=0;n<this.sections.length;n+=2)t+=this.sections[n];return t}get newLength(){let t=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];t+=i<0?this.sections[n]:i}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let n=0,i=0,r=0;n<this.sections.length;){let o=this.sections[n++],s=this.sections[n++];s<0?(t(i,r,o),r+=o):r+=s,i+=o}}iterChangedRanges(t,n=!1){Hs(this,t,n)}get invertedDesc(){let t=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?t.push(i,r):t.push(r,i)}return new Ye(t)}composeDesc(t){return this.empty?t:t.empty?this:Ml(this,t)}mapDesc(t,n=!1){return t.empty?this:Js(this,t,n)}mapPos(t,n=-1,i=qt.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let l=this.sections[s++],h=this.sections[s++],c=r+l;if(h<0){if(c>t)return o+(t-r);o+=l}else{if(i!=qt.Simple&&c>=t&&(i==qt.TrackDel&&r<t&&c>t||i==qt.TrackBefore&&r<t||i==qt.TrackAfter&&c>t))return null;if(c>t||c==t&&n<0&&!l)return t==r||n<0?o:o+h;o+=h}r=c}if(t>r)throw new RangeError(`Position ${t} is out of range for changeset of length ${r}`);return o}touchesRange(t,n=t){for(let i=0,r=0;i<this.sections.length&&r<=n;){let o=this.sections[i++],s=this.sections[i++],l=r+o;if(s>=0&&r<=n&&l>=t)return r<t&&l>n?"cover":!0;r=l}return!1}toString(){let t="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];t+=(t?" ":"")+i+(r>=0?":"+r:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ye(t)}static create(t){return new Ye(t)}}class Nt extends Ye{constructor(t,n){super(t),this.inserted=n}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Hs(this,(n,i,r,o,s)=>t=t.replace(r,r+(i-n),s),!1),t}mapDesc(t,n=!1){return Js(this,t,n,!0)}invert(t){let n=this.sections.slice(),i=[];for(let r=0,o=0;r<n.length;r+=2){let s=n[r],l=n[r+1];if(l>=0){n[r]=l,n[r+1]=s;let h=r>>1;for(;i.length<h;)i.push(gt.empty);i.push(s?t.slice(o,o+s):gt.empty)}o+=s}return new Nt(n,i)}compose(t){return this.empty?t:t.empty?this:Ml(this,t,!0)}map(t,n=!1){return t.empty?this:Js(this,t,n,!0)}iterChanges(t,n=!1){Hs(this,t,n)}get desc(){return Ye.create(this.sections)}filter(t){let n=[],i=[],r=[],o=new Ti(this);t:for(let s=0,l=0;;){let h=s==t.length?1e9:t[s++];for(;l<h||l==h&&o.len==0;){if(o.done)break t;let d=Math.min(o.len,h-l);Kt(r,d,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;Kt(n,d,f),f>0&&pn(i,n,o.text),o.forward(d),l+=d}let c=t[s++];for(;l<c;){if(o.done)break t;let d=Math.min(o.len,c-l);Kt(n,d,-1),Kt(r,d,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(d),l+=d}}return{changes:new Nt(n,i),filtered:Ye.create(r)}}toJSON(){let t=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?t.push(i):r==0?t.push([i]):t.push([i].concat(this.inserted[n>>1].toJSON()))}return t}static of(t,n,i){let r=[],o=[],s=0,l=null;function h(d=!1){if(!d&&!r.length)return;s<n&&Kt(r,n-s,-1);let f=new Nt(r,o);l=l?l.compose(f.map(l)):f,r=[],o=[],s=0}function c(d){if(Array.isArray(d))for(let f of d)c(f);else if(d instanceof Nt){if(d.length!=n)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${n})`);h(),l=l?l.compose(d.map(l)):d}else{let{from:f,to:m=f,insert:v}=d;if(f>m||f<0||m>n)throw new RangeError(`Invalid change range ${f} to ${m} (in doc of length ${n})`);let C=v?typeof v=="string"?gt.of(v.split(i||Vs)):v:gt.empty,O=C.length;if(f==m&&O==0)return;f<s&&h(),f>s&&Kt(r,f-s,-1),Kt(r,m-f,O),pn(o,r,C),s=m}}return c(t),h(!l),l}static empty(t){return new Nt(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<t.length;r++){let o=t[r];if(typeof o=="number")n.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,l)=>l&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)n.push(o[0],0);else{for(;i.length<r;)i.push(gt.empty);i[r]=gt.of(o.slice(1)),n.push(o[0],i[r].length)}}}return new Nt(n,i)}static createSet(t,n){return new Nt(t,n)}}function Kt(e,t,n,i=!1){if(t==0&&n<=0)return;let r=e.length-2;r>=0&&n<=0&&n==e[r+1]?e[r]+=t:t==0&&e[r]==0?e[r+1]+=n:i?(e[r]+=t,e[r+1]+=n):e.push(t,n)}function pn(e,t,n){if(n.length==0)return;let i=t.length-2>>1;if(i<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<i;)e.push(gt.empty);e.push(n)}}function Hs(e,t,n){let i=e.inserted;for(let r=0,o=0,s=0;s<e.sections.length;){let l=e.sections[s++],h=e.sections[s++];if(h<0)r+=l,o+=l;else{let c=r,d=o,f=gt.empty;for(;c+=l,d+=h,h&&i&&(f=f.append(i[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)l=e.sections[s++],h=e.sections[s++];t(r,c,o,d,f),r=c,o=d}}}function Js(e,t,n,i=!1){let r=[],o=i?[]:null,s=new Ti(e),l=new Ti(t);for(let h=-1;;)if(s.ins==-1&&l.ins==-1){let c=Math.min(s.len,l.len);Kt(r,c,-1),s.forward(c),l.forward(c)}else if(l.ins>=0&&(s.ins<0||h==s.i||s.off==0&&(l.len<s.len||l.len==s.len&&!n))){let c=l.len;for(Kt(r,l.ins,-1);c;){let d=Math.min(s.len,c);s.ins>=0&&h<s.i&&s.len<=d&&(Kt(r,0,s.ins),o&&pn(o,r,s.text),h=s.i),s.forward(d),c-=d}l.next()}else if(s.ins>=0){let c=0,d=s.len;for(;d;)if(l.ins==-1){let f=Math.min(d,l.len);c+=f,d-=f,l.forward(f)}else if(l.ins==0&&l.len<d)d-=l.len,l.next();else break;Kt(r,c,h<s.i?s.ins:0),o&&h<s.i&&pn(o,r,s.text),h=s.i,s.forward(s.len-d)}else{if(s.done&&l.done)return o?Nt.createSet(r,o):Ye.create(r);throw new Error("Mismatched change set lengths")}}function Ml(e,t,n=!1){let i=[],r=n?[]:null,o=new Ti(e),s=new Ti(t);for(let l=!1;;){if(o.done&&s.done)return r?Nt.createSet(i,r):Ye.create(i);if(o.ins==0)Kt(i,o.len,0,l),o.next();else if(s.len==0&&!s.done)Kt(i,0,s.ins,l),r&&pn(r,i,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let h=Math.min(o.len2,s.len),c=i.length;if(o.ins==-1){let d=s.ins==-1?-1:s.off?0:s.ins;Kt(i,h,d,l),r&&d&&pn(r,i,s.text)}else s.ins==-1?(Kt(i,o.off?0:o.len,h,l),r&&pn(r,i,o.textBit(h))):(Kt(i,o.off?0:o.len,s.off?0:s.ins,l),r&&!s.off&&pn(r,i,s.text));l=(o.ins>h||s.ins>=0&&s.len>h)&&(l||i.length>c),o.forward2(h),s.forward(h)}}}}class Ti{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length?gt.empty:t[n]}textBit(t){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!t?gt.empty:n[i].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class _n{constructor(t,n,i){this.from=t,this.to=n,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let t=this.flags&3;return t==3?null:t}get goalColumn(){let t=this.flags>>5;return t==33554431?void 0:t}map(t,n=-1){let i,r;return this.empty?i=r=t.mapPos(this.from,n):(i=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new _n(i,r,this.flags)}extend(t,n=t){if(t<=this.anchor&&n>=this.anchor)return Y.range(t,n);let i=Math.abs(t-this.anchor)>Math.abs(n-this.anchor)?t:n;return Y.range(this.anchor,i)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Y.range(t.anchor,t.head)}static create(t,n,i){return new _n(t,n,i)}}class Y{constructor(t,n){this.ranges=t,this.mainIndex=n}map(t,n=-1){return t.empty?this:Y.create(this.ranges.map(i=>i.map(t,n)),this.mainIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(t.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Y([this.main],0)}addRange(t,n=!0){return Y.create([t].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(t,n=this.mainIndex){let i=this.ranges.slice();return i[n]=t,Y.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Y(t.ranges.map(n=>_n.fromJSON(n)),t.main)}static single(t,n=t){return new Y([Y.range(t,n)],0)}static create(t,n=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<t.length;r++){let o=t[r];if(o.empty?o.from<=i:o.from<i)return Y.normalized(t.slice(),n);i=o.to}return new Y(t,n)}static cursor(t,n=0,i,r){return _n.create(t,t,(n==0?0:n<0?4:8)|(i==null?3:Math.min(2,i))|(r!=null?r:33554431)<<5)}static range(t,n,i){let r=(i!=null?i:33554431)<<5;return n<t?_n.create(n,t,16|r|8):_n.create(t,n,r|(n>t?4:0))}static normalized(t,n=0){let i=t[n];t.sort((r,o)=>r.from-o.from),n=t.indexOf(i);for(let r=1;r<t.length;r++){let o=t[r],s=t[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let l=s.from,h=Math.max(o.to,s.to);r<=n&&n--,t.splice(--r,2,o.anchor>o.head?Y.range(h,l):Y.range(l,h))}}return new Y(t,n)}}function Yl(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let Ks=0;class H{constructor(t,n,i,r,o){this.combine=t,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=Ks++,this.default=t([]),this.extensions=typeof o=="function"?o(this):o}static define(t={}){return new H(t.combine||(n=>n),t.compareInput||((n,i)=>n===i),t.compare||(t.combine?(n,i)=>n===i:to),!!t.static,t.enables)}of(t){return new Sr([],this,0,t)}compute(t,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Sr(t,this,1,n)}computeN(t,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Sr(t,this,2,n)}from(t,n){return n||(n=i=>i),this.compute([t],i=>n(i.field(t)))}}function to(e,t){return e==t||e.length==t.length&&e.every((n,i)=>n===t[i])}class Sr{constructor(t,n,i,r){this.dependencies=t,this.facet=n,this.type=i,this.value=r,this.id=Ks++}dynamicSlot(t){var n;let i=this.value,r=this.facet.compareInput,o=this.id,s=t[o]>>1,l=this.type==2,h=!1,c=!1,d=[];for(let f of this.dependencies)f=="doc"?h=!0:f=="selection"?c=!0:(((n=t[f.id])!==null&&n!==void 0?n:1)&1)==0&&d.push(t[f.id]);return{create(f){return f.values[s]=i(f),1},update(f,m){if(h&&m.docChanged||c&&(m.docChanged||m.selection)||eo(f,d)){let v=i(f);if(l?!Wl(v,f.values[s],r):!r(v,f.values[s]))return f.values[s]=v,1}return 0},reconfigure:(f,m)=>{let v=i(f),C=m.config.address[o];if(C!=null){let O=br(m,C);if(this.dependencies.every(y=>y instanceof H?m.facet(y)===f.facet(y):y instanceof Ft?m.field(y,!1)==f.field(y,!1):!0)||(l?Wl(v,O,r):r(v,O)))return f.values[s]=O,0}return f.values[s]=v,1}}}}function Wl(e,t,n){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function eo(e,t){let n=!1;for(let i of t)_i(e,i)&1&&(n=!0);return n}function Tf(e,t,n){let i=n.map(h=>e[h.id]),r=n.map(h=>h.type),o=i.filter(h=>!(h&1)),s=e[t.id]>>1;function l(h){let c=[];for(let d=0;d<i.length;d++){let f=br(h,i[d]);if(r[d]==2)for(let m of f)c.push(m);else c.push(f)}return t.combine(c)}return{create(h){for(let c of i)_i(h,c);return h.values[s]=l(h),1},update(h,c){if(!eo(h,o))return 0;let d=l(h);return t.compare(d,h.values[s])?0:(h.values[s]=d,1)},reconfigure(h,c){let d=eo(h,i),f=c.config.facets[t.id],m=c.facet(t);if(f&&!d&&to(n,f))return h.values[s]=m,0;let v=l(h);return t.compare(v,m)?(h.values[s]=m,0):(h.values[s]=v,1)}}}const jl=H.define({static:!0});class Ft{constructor(t,n,i,r,o){this.id=t,this.createF=n,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(t){let n=new Ft(Ks++,t.create,t.update,t.compare||((i,r)=>i===r),t);return t.provide&&(n.provides=t.provide(n)),n}create(t){let n=t.facet(jl).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(t)}slot(t){let n=t[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let o=i.values[n],s=this.updateF(o,r);return this.compareF(o,s)?0:(i.values[n]=s,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(t){return[this,jl.of({field:this,create:t})]}get extension(){return this}}const In={lowest:4,low:3,default:2,high:1,highest:0};function ki(e){return t=>new Zl(t,e)}const Qn={highest:ki(In.highest),high:ki(In.high),default:ki(In.default),low:ki(In.low),lowest:ki(In.lowest)};class Zl{constructor(t,n){this.inner=t,this.prec=n}}class Cr{of(t){return new no(this,t)}reconfigure(t){return Cr.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class no{constructor(t,n){this.compartment=t,this.inner=n}}class wr{constructor(t,n,i,r,o,s){for(this.base=t,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(t){let n=this.address[t.id];return n==null?t.default:this.staticValues[n>>1]}static resolve(t,n,i){let r=[],o=Object.create(null),s=new Map;for(let m of kf(t,n,s))m instanceof Ft?r.push(m):(o[m.facet.id]||(o[m.facet.id]=[])).push(m);let l=Object.create(null),h=[],c=[];for(let m of r)l[m.id]=c.length<<1,c.push(v=>m.slot(v));let d=i==null?void 0:i.config.facets;for(let m in o){let v=o[m],C=v[0].facet,O=d&&d[m]||[];if(v.every(y=>y.type==0))if(l[C.id]=h.length<<1|1,to(O,v))h.push(i.facet(C));else{let y=C.combine(v.map(P=>P.value));h.push(i&&C.compare(y,i.facet(C))?i.facet(C):y)}else{for(let y of v)y.type==0?(l[y.id]=h.length<<1|1,h.push(y.value)):(l[y.id]=c.length<<1,c.push(P=>y.dynamicSlot(P)));l[C.id]=c.length<<1,c.push(y=>Tf(y,C,v))}}let f=c.map(m=>m(l));return new wr(t,s,f,l,h,o)}}function kf(e,t,n){let i=[[],[],[],[],[]],r=new Map;function o(s,l){let h=r.get(s);if(h!=null){if(h<=l)return;let c=i[h].indexOf(s);c>-1&&i[h].splice(c,1),s instanceof no&&n.delete(s.compartment)}if(r.set(s,l),Array.isArray(s))for(let c of s)o(c,l);else if(s instanceof no){if(n.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=t.get(s.compartment)||s.inner;n.set(s.compartment,c),o(c,l)}else if(s instanceof Zl)o(s.inner,s.prec);else if(s instanceof Ft)i[l].push(s),s.provides&&o(s.provides,l);else if(s instanceof Sr)i[l].push(s),s.facet.extensions&&o(s.facet.extensions,In.default);else{let c=s.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(c,l)}}return o(e,In.default),i.reduce((s,l)=>s.concat(l))}function _i(e,t){if(t&1)return 2;let n=t>>1,i=e.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;e.status[n]=4;let r=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|r}function br(e,t){return t&1?e.config.staticValues[t>>1]:e.values[t>>1]}const zl=H.define(),ql=H.define({combine:e=>e.some(t=>t),static:!0}),Ul=H.define({combine:e=>e.length?e[0]:void 0,static:!0}),Gl=H.define(),Vl=H.define(),Hl=H.define(),Jl=H.define({combine:e=>e.length?e[0]:!1});class Ln{constructor(t,n){this.type=t,this.value=n}static define(){return new _f}}class _f{of(t){return new Ln(this,t)}}class If{constructor(t){this.map=t}of(t){return new it(this,t)}}class it{constructor(t,n){this.type=t,this.value=n}map(t){let n=this.type.map(this.value,t);return n===void 0?void 0:n==this.value?this:new it(this.type,n)}is(t){return this.type==t}static define(t={}){return new If(t.map||(n=>n))}static mapEffects(t,n){if(!t.length)return t;let i=[];for(let r of t){let o=r.map(n);o&&i.push(o)}return i}}it.reconfigure=it.define(),it.appendConfig=it.define();class Rt{constructor(t,n,i,r,o,s){this.startState=t,this.changes=n,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,i&&Yl(i,n.newLength),o.some(l=>l.type==Rt.time)||(this.annotations=o.concat(Rt.time.of(Date.now())))}static create(t,n,i,r,o,s){return new Rt(t,n,i,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let n of this.annotations)if(n.type==t)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let n=this.annotation(Rt.userEvent);return!!(n&&(n==t||n.length>t.length&&n.slice(0,t.length)==t&&n[t.length]=="."))}}Rt.time=Ln.define(),Rt.userEvent=Ln.define(),Rt.addToHistory=Ln.define(),Rt.remote=Ln.define();function Qf(e,t){let n=[];for(let i=0,r=0;;){let o,s;if(i<e.length&&(r==t.length||t[r]>=e[i]))o=e[i++],s=e[i++];else if(r<t.length)o=t[r++],s=t[r++];else return n;!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function Kl(e,t,n){var i;let r,o,s;return n?(r=t.changes,o=Nt.empty(t.changes.length),s=e.changes.compose(t.changes)):(r=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(r)),{changes:s,selection:t.selection?t.selection.map(o):(i=e.selection)===null||i===void 0?void 0:i.map(r),effects:it.mapEffects(e.effects,r).concat(it.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function io(e,t,n){let i=t.selection,r=Jn(t.annotations);return t.userEvent&&(r=r.concat(Rt.userEvent.of(t.userEvent))),{changes:t.changes instanceof Nt?t.changes:Nt.of(t.changes||[],n,e.facet(Ul)),selection:i&&(i instanceof Y?i:Y.single(i.anchor,i.head)),effects:Jn(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function th(e,t,n){let i=io(e,t.length?t[0]:{},e.doc.length);t.length&&t[0].filter===!1&&(n=!1);for(let o=1;o<t.length;o++){t[o].filter===!1&&(n=!1);let s=!!t[o].sequential;i=Kl(i,io(e,t[o],s?i.changes.newLength:e.doc.length),s)}let r=Rt.create(e,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Xf(n?Lf(r):r)}function Lf(e){let t=e.startState,n=!0;for(let r of t.facet(Gl)){let o=r(e);if(o===!1){n=!1;break}Array.isArray(o)&&(n=n===!0?o:Qf(n,o))}if(n!==!0){let r,o;if(n===!1)o=e.changes.invertedDesc,r=Nt.empty(t.doc.length);else{let s=e.changes.filter(n);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}e=Rt.create(t,r,e.selection&&e.selection.map(o),it.mapEffects(e.effects,o),e.annotations,e.scrollIntoView)}let i=t.facet(Vl);for(let r=i.length-1;r>=0;r--){let o=i[r](e);o instanceof Rt?e=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Rt?e=o[0]:e=th(t,Jn(o),!1)}return e}function Xf(e){let t=e.startState,n=t.facet(Hl),i=e;for(let r=n.length-1;r>=0;r--){let o=n[r](e);o&&Object.keys(o).length&&(i=Kl(e,io(t,o,e.changes.newLength),!0))}return i==e?e:Rt.create(t,e.changes,e.selection,i.effects,i.annotations,i.scrollIntoView)}const $f=[];function Jn(e){return e==null?$f:Array.isArray(e)?e:[e]}var Et=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Et||(Et={}));const Nf=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ro;try{ro=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Ff(e){if(ro)return ro.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||Nf.test(n)))return!0}return!1}function Rf(e){return t=>{if(!/\S/.test(t))return Et.Space;if(Ff(t))return Et.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return Et.Word;return Et.Other}}class ft{constructor(t,n,i,r,o,s){this.config=t,this.doc=n,this.selection=i,this.values=r,this.status=t.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)_i(this,l<<1);this.computeSlot=null}field(t,n=!0){let i=this.config.address[t.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return _i(this,i),br(this,i)}update(...t){return th(this,t,!0)}applyTransaction(t){let n=this.config,{base:i,compartments:r}=n;for(let s of t.effects)s.is(Cr.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,h)=>r.set(h,l)),n=null),r.set(s.value.compartment,s.value.extension)):s.is(it.reconfigure)?(n=null,i=s.value):s.is(it.appendConfig)&&(n=null,i=Jn(i).concat(s.value));let o;n?o=t.startState.values.slice():(n=wr.resolve(i,r,this),o=new ft(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(s,l)=>l.reconfigure(s,this),null).values),new ft(n,t.newDoc,t.newSelection,o,(s,l)=>l.update(s,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:t},range:Y.cursor(n.from+t.length)}))}changeByRange(t){let n=this.selection,i=t(n.ranges[0]),r=this.changes(i.changes),o=[i.range],s=Jn(i.effects);for(let l=1;l<n.ranges.length;l++){let h=t(n.ranges[l]),c=this.changes(h.changes),d=c.map(r);for(let m=0;m<l;m++)o[m]=o[m].map(d);let f=r.mapDesc(c,!0);o.push(h.range.map(f)),r=r.compose(d),s=it.mapEffects(s,d).concat(it.mapEffects(Jn(h.effects),f))}return{changes:r,selection:Y.create(o,n.mainIndex),effects:s}}changes(t=[]){return t instanceof Nt?t:Nt.of(t,this.doc.length,this.facet(ft.lineSeparator))}toText(t){return gt.of(t.split(this.facet(ft.lineSeparator)||Vs))}sliceDoc(t=0,n=this.doc.length){return this.doc.sliceString(t,n,this.lineBreak)}facet(t){let n=this.config.address[t.id];return n==null?t.default:(_i(this,n),br(this,n))}toJSON(t){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let i in t){let r=t[i];r instanceof Ft&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(t[i]),this))}return n}static fromJSON(t,n={},i){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(t,o)){let s=i[o],l=t[o];r.push(s.init(h=>s.spec.fromJSON(l,h)))}}return ft.create({doc:t.doc,selection:Y.fromJSON(t.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(t={}){let n=wr.resolve(t.extensions||[],new Map),i=t.doc instanceof gt?t.doc:gt.of((t.doc||"").split(n.staticFacet(ft.lineSeparator)||Vs)),r=t.selection?t.selection instanceof Y?t.selection:Y.single(t.selection.anchor,t.selection.head):Y.single(0);return Yl(r,i.length),n.staticFacet(ql)||(r=r.asSingle()),new ft(n,i,r,n.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(ft.tabSize)}get lineBreak(){return this.facet(ft.lineSeparator)||`
`}get readOnly(){return this.facet(Jl)}phrase(t,...n){for(let i of this.facet(ft.phrases))if(Object.prototype.hasOwnProperty.call(i,t)){t=i[t];break}return n.length&&(t=t.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>n.length?i:n[o-1]})),t}languageDataAt(t,n,i=-1){let r=[];for(let o of this.facet(zl))for(let s of o(this,n,i))Object.prototype.hasOwnProperty.call(s,t)&&r.push(s[t]);return r}charCategorizer(t){return Rf(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:n,from:i,length:r}=this.doc.lineAt(t),o=this.charCategorizer(t),s=t-i,l=t-i;for(;s>0;){let h=se(n,s,!1);if(o(n.slice(h,s))!=Et.Word)break;s=h}for(;l<r;){let h=se(n,l);if(o(n.slice(l,h))!=Et.Word)break;l=h}return s==l?null:Y.range(s+i,l+i)}}ft.allowMultipleSelections=ql,ft.tabSize=H.define({combine:e=>e.length?e[0]:4}),ft.lineSeparator=Ul,ft.readOnly=Jl,ft.phrases=H.define({compare(e,t){let n=Object.keys(e),i=Object.keys(t);return n.length==i.length&&n.every(r=>e[r]==t[r])}}),ft.languageData=zl,ft.changeFilter=Gl,ft.transactionFilter=Vl,ft.transactionExtender=Hl,Cr.reconfigure=it.define();function We(e,t,n={}){let i={};for(let r of e)for(let o of Object.keys(r)){let s=r[o],l=i[o];if(l===void 0)i[o]=s;else if(!(l===s||s===void 0))if(Object.hasOwnProperty.call(n,o))i[o]=n[o](l,s);else throw new Error("Config merge conflict for field "+o)}for(let r in t)i[r]===void 0&&(i[r]=t[r]);return i}class Xn{eq(t){return this==t}range(t,n=t){return Ii.create(t,n,this)}}Xn.prototype.startSide=Xn.prototype.endSide=0,Xn.prototype.point=!1,Xn.prototype.mapMode=qt.TrackDel;class Ii{constructor(t,n,i){this.from=t,this.to=n,this.value=i}static create(t,n,i){return new Ii(t,n,i)}}function so(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class oo{constructor(t,n,i,r){this.from=t,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(t,n,i,r=0){let o=i?this.to:this.from;for(let s=r,l=o.length;;){if(s==l)return s;let h=s+l>>1,c=o[h]-t||(i?this.value[h].endSide:this.value[h].startSide)-n;if(h==s)return c>=0?s:l;c>=0?l=h:s=h+1}}between(t,n,i,r){for(let o=this.findIndex(n,-1e9,!0),s=this.findIndex(i,1e9,!1,o);o<s;o++)if(r(this.from[o]+t,this.to[o]+t,this.value[o])===!1)return!1}map(t,n){let i=[],r=[],o=[],s=-1,l=-1;for(let h=0;h<this.value.length;h++){let c=this.value[h],d=this.from[h]+t,f=this.to[h]+t,m,v;if(d==f){let C=n.mapPos(d,c.startSide,c.mapMode);if(C==null||(m=v=C,c.startSide!=c.endSide&&(v=n.mapPos(d,c.endSide),v<m)))continue}else if(m=n.mapPos(d,c.startSide),v=n.mapPos(f,c.endSide),m>v||m==v&&c.startSide>0&&c.endSide<=0)continue;(v-m||c.endSide-c.startSide)<0||(s<0&&(s=m),c.point&&(l=Math.max(l,v-m)),i.push(c),r.push(m-s),o.push(v-s))}return{mapped:i.length?new oo(r,o,i,l):null,pos:s}}}class yt{constructor(t,n,i,r){this.chunkPos=t,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(t,n,i,r){return new yt(t,n,i,r)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let n of this.chunk)t+=n.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:o=this.length}=t,s=t.filter;if(n.length==0&&!s)return this;if(i&&(n=n.slice().sort(so)),this.isEmpty)return n.length?yt.of(n):this;let l=new nh(this,null,-1).goto(0),h=0,c=[],d=new dn;for(;l.value||h<n.length;)if(h<n.length&&(l.from-n[h].from||l.startSide-n[h].value.startSide)>=0){let f=n[h++];d.addInner(f.from,f.to,f.value)||c.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(h==n.length||this.chunkEnd(l.chunkIndex)<n[h].from)&&(!s||r>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&d.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!s||r>l.to||o<l.from||s(l.from,l.to,l.value))&&(d.addInner(l.from,l.to,l.value)||c.push(Ii.create(l.from,l.to,l.value))),l.next());return d.finishInner(this.nextLayer.isEmpty&&!c.length?yt.empty:this.nextLayer.update({add:c,filter:s,filterFrom:r,filterTo:o}))}map(t){if(t.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],h=this.chunk[s],c=t.touchesRange(l,l+h.length);if(c===!1)r=Math.max(r,h.maxPoint),n.push(h),i.push(t.mapPos(l));else if(c===!0){let{mapped:d,pos:f}=h.map(l,t);d&&(r=Math.max(r,d.maxPoint),n.push(d),i.push(f))}}let o=this.nextLayer.map(t);return n.length==0?o:new yt(i,n,o||yt.empty,r)}between(t,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(n>=o&&t<=o+s.length&&s.between(o,t-o,n-o,i)===!1)return}this.nextLayer.between(t,n,i)}}iter(t=0){return Qi.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,n=0){return Qi.from(t).goto(n)}static compare(t,n,i,r,o=-1){let s=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=n.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),h=eh(s,l,i),c=new Li(s,h,o),d=new Li(l,h,o);i.iterGaps((f,m,v)=>ih(c,f,d,m,v,r)),i.empty&&i.length==0&&ih(c,0,d,0,0,r)}static eq(t,n,i=0,r){r==null&&(r=1e9);let o=t.filter(d=>!d.isEmpty&&n.indexOf(d)<0),s=n.filter(d=>!d.isEmpty&&t.indexOf(d)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let l=eh(o,s),h=new Li(o,l,0).goto(i),c=new Li(s,l,0).goto(i);for(;;){if(h.to!=c.to||!lo(h.active,c.active)||h.point&&(!c.point||!h.point.eq(c.point)))return!1;if(h.to>r)return!0;h.next(),c.next()}}static spans(t,n,i,r,o=-1){let s=new Li(t,null,o).goto(n),l=n,h=s.openStart;for(;;){let c=Math.min(s.to,i);if(s.point?(r.point(l,c,s.point,s.activeForPoint(s.to),h,s.pointRank),h=s.openEnd(c)+(s.to>c?1:0)):c>l&&(r.span(l,c,s.active,h),h=s.openEnd(c)),s.to>i)break;l=s.to,s.next()}return h}static of(t,n=!1){let i=new dn;for(let r of t instanceof Ii?[t]:n?Bf(t):t)i.add(r.from,r.to,r.value);return i.finish()}}yt.empty=new yt([],[],null,-1);function Bf(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let i=e[n];if(so(t,i)>0)return e.slice().sort(so);t=i}return e}yt.empty.nextLayer=yt.empty;class dn{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(t){this.chunks.push(new oo(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}add(t,n,i){this.addInner(t,n,i)||(this.nextLayer||(this.nextLayer=new dn)).add(t,n,i)}addInner(t,n,i){let r=t-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=t,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-t)),!0)}addChunk(t,n){if((t-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(t);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+t,this.lastTo=n.to[i]+t,!0}finish(){return this.finishInner(yt.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let n=yt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,n}}function eh(e,t,n){let i=new Map;for(let o of e)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&i.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of t)for(let s=0;s<o.chunk.length;s++){let l=i.get(o.chunk[s]);l!=null&&(n?n.mapPos(l):l)==o.chunkPos[s]&&!(n!=null&&n.touchesRange(l,l+o.chunk[s].length))&&r.add(o.chunk[s])}return r}class nh{constructor(t,n,i,r=0){this.layer=t,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,n,!1),this}gotoInner(t,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<t||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(t,n){(this.to-t||this.endSide-n)<0&&this.gotoInner(t,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=t+n.from[this.rangeIndex];if(this.from=i,this.to=t+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Qi{constructor(t){this.heap=t}static from(t,n=null,i=-1){let r=[];for(let o=0;o<t.length;o++)for(let s=t[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&r.push(new nh(s,n,i,o));return r.length==1?r[0]:new Qi(r)}get startSide(){return this.value?this.value.startSide:0}goto(t,n=-1e9){for(let i of this.heap)i.goto(t,n);for(let i=this.heap.length>>1;i>=0;i--)ao(this.heap,i);return this.next(),this}forward(t,n){for(let i of this.heap)i.forward(t,n);for(let i=this.heap.length>>1;i>=0;i--)ao(this.heap,i);(this.to-t||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),ao(this.heap,0)}}}function ao(e,t){for(let n=e[t];;){let i=(t<<1)+1;if(i>=e.length)break;let r=e[i];if(i+1<e.length&&r.compare(e[i+1])>=0&&(r=e[i+1],i++),n.compare(r)<0)break;e[i]=n,e[t]=r,t=i}}class Li{constructor(t,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Qi.from(t,n,i)}goto(t,n=-1e9){return this.cursor.goto(t,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=n,this.openStart=-1,this.next(),this}forward(t,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(t,n)}removeActive(t){Er(this.active,t),Er(this.activeTo,t),Er(this.activeRank,t),this.minActive=rh(this.active,this.activeTo)}addActive(t){let n=0,{value:i,to:r,rank:o}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=o;)n++;Dr(this.active,n,i),Dr(this.activeTo,n,r),Dr(this.activeRank,n,o),t&&Dr(t,n,this.cursor.from),this.minActive=rh(this.active,this.activeTo)}next(){let t=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null,r=0;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>t){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),i&&Er(i,o)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.from<t&&this.cursor.to>t&&r++,this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.from<t&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){let o=0;for(;o<i.length&&i[o]<t;)o++;this.openStart=o+r}}activeForPoint(t){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>t||this.activeTo[i]==t&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(t){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>t;i--)n++;return n}}function ih(e,t,n,i,r,o){e.goto(t),n.goto(i);let s=i+r,l=i,h=i-t;for(;;){let c=e.to+h-n.to||e.endSide-n.endSide,d=c<0?e.to+h:n.to,f=Math.min(d,s);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&lo(e.activeForPoint(e.to+h),n.activeForPoint(n.to))||o.comparePoint(l,f,e.point,n.point):f>l&&!lo(e.active,n.active)&&o.compareRange(l,f,e.active,n.active),d>s)break;l=d,c<=0&&e.next(),c>=0&&n.next()}}function lo(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function Er(e,t){for(let n=t,i=e.length-1;n<i;n++)e[n]=e[n+1];e.pop()}function Dr(e,t,n){for(let i=e.length-1;i>=t;i--)e[i+1]=e[i];e[t]=n}function rh(e,t){let n=-1,i=1e9;for(let r=0;r<t.length;r++)(t[r]-i||e[r].endSide-e[n].endSide)<0&&(n=r,i=t[r]);return n}function Xi(e,t,n=e.length){let i=0;for(let r=0;r<n;)e.charCodeAt(r)==9?(i+=t-i%t,r++):(i++,r=se(e,r));return i}function ho(e,t,n,i){for(let r=0,o=0;;){if(o>=t)return r;if(r==e.length)break;o+=e.charCodeAt(r)==9?n-o%n:1,r=se(e,r)}return i===!0?-1:e.length}const uo="\u037C",sh=typeof Symbol>"u"?"__"+uo:Symbol.for(uo),co=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class fn{constructor(t,n){this.rules=[];let{finish:i}=n||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,l,h,c){let d=[],f=/^@(\w+)\b/.exec(s[0]),m=f&&f[1]=="keyframes";if(f&&l==null)return h.push(s[0]+";");for(let v in l){let C=l[v];if(/&/.test(v))o(v.split(/,\s*/).map(O=>s.map(y=>O.replace(/&/,y))).reduce((O,y)=>O.concat(y)),C,h);else if(C&&typeof C=="object"){if(!f)throw new RangeError("The value of a property ("+v+") should be a primitive value.");o(r(v),C,d,m)}else C!=null&&d.push(v.replace(/_.*/,"").replace(/[A-Z]/g,O=>"-"+O.toLowerCase())+": "+C+";")}(d.length||m)&&h.push((i&&!f&&!c?s.map(i):s).join(", ")+" {"+d.join(" ")+"}")}for(let s in t)o(r(s),t[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=oh[sh]||1;return oh[sh]=t+1,uo+t.toString(36)}static mount(t,n){(t[co]||new Mf(t)).mount(Array.isArray(n)?n:[n])}}let Ar=null;class Mf{constructor(t){if(!t.head&&t.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(Ar)return t.adoptedStyleSheets=[Ar.sheet].concat(t.adoptedStyleSheets),t[co]=Ar;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),Ar=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");let n=t.head||t;n.insertBefore(this.styleTag,n.firstChild)}this.modules=[],t[co]=this}mount(t){let n=this.sheet,i=0,r=0;for(let o=0;o<t.length;o++){let s=t[o],l=this.modules.indexOf(s);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,s),n)for(let h=0;h<s.rules.length;h++)n.insertRule(s.rules[h],i++)}else{for(;r<l;)i+=this.modules[r++].rules.length;i+=s.rules.length,r++}}if(!n){let o="";for(let s=0;s<this.modules.length;s++)o+=this.modules[s].getRules()+`
`;this.styleTag.textContent=o}}}var mn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ah=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);for(var Yf=typeof navigator<"u"&&/Mac/.test(navigator.platform),Wf=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),jf=Yf||ah&&+ah[1]<57,Ut=0;Ut<10;Ut++)mn[48+Ut]=mn[96+Ut]=String(Ut);for(var Ut=1;Ut<=24;Ut++)mn[Ut+111]="F"+Ut;for(var Ut=65;Ut<=90;Ut++)mn[Ut]=String.fromCharCode(Ut+32),$i[Ut]=String.fromCharCode(Ut);for(var po in mn)$i.hasOwnProperty(po)||($i[po]=mn[po]);function Zf(e){var t=jf&&(e.ctrlKey||e.altKey||e.metaKey)||Wf&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?$i:mn)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Tr(e){let t;return e.nodeType==11?t=e.getSelection?e:e.ownerDocument:t=e,t.getSelection()}function Kn(e,t){return t?e==t||e.contains(t.nodeType!=1?t.parentNode:t):!1}function zf(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function kr(e,t){if(!t.anchorNode)return!1;try{return Kn(e,t.anchorNode)}catch{return!1}}function Ni(e){return e.nodeType==3?ei(e,0,e.nodeValue.length).getClientRects():e.nodeType==1?e.getClientRects():[]}function _r(e,t,n,i){return n?lh(e,t,n,i,-1)||lh(e,t,n,i,1):!1}function Ir(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t}function lh(e,t,n,i,r){for(;;){if(e==n&&t==i)return!0;if(t==(r<0?0:Fi(e))){if(e.nodeName=="DIV")return!1;let o=e.parentNode;if(!o||o.nodeType!=1)return!1;t=Ir(e)+(r<0?0:1),e=o}else if(e.nodeType==1){if(e=e.childNodes[t+(r<0?-1:0)],e.nodeType==1&&e.contentEditable=="false")return!1;t=r<0?Fi(e):0}else return!1}}function Fi(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}const hh={left:0,right:0,top:0,bottom:0};function Qr(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function qf(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function Uf(e,t,n,i,r,o,s,l){let h=e.ownerDocument,c=h.defaultView;for(let d=e;d;)if(d.nodeType==1){let f,m=d==h.body;if(m)f=qf(c);else{if(d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let O=d.getBoundingClientRect();f={left:O.left,right:O.left+d.clientWidth,top:O.top,bottom:O.top+d.clientHeight}}let v=0,C=0;if(r=="nearest")t.top<f.top?(C=-(f.top-t.top+s),n>0&&t.bottom>f.bottom+C&&(C=t.bottom-f.bottom+C+s)):t.bottom>f.bottom&&(C=t.bottom-f.bottom+s,n<0&&t.top-C<f.top&&(C=-(f.top+C-t.top+s)));else{let O=t.bottom-t.top,y=f.bottom-f.top;C=(r=="center"&&O<=y?t.top+O/2-y/2:r=="start"||r=="center"&&n<0?t.top-s:t.bottom-y+s)-f.top}if(i=="nearest"?t.left<f.left?(v=-(f.left-t.left+o),n>0&&t.right>f.right+v&&(v=t.right-f.right+v+o)):t.right>f.right&&(v=t.right-f.right+o,n<0&&t.left<f.left+v&&(v=-(f.left+v-t.left+o))):v=(i=="center"?t.left+(t.right-t.left)/2-(f.right-f.left)/2:i=="start"==l?t.left-o:t.right-(f.right-f.left)+o)-f.left,v||C)if(m)c.scrollBy(v,C);else{let O=0,y=0;if(C){let P=d.scrollTop;d.scrollTop+=C,y=d.scrollTop-P}if(v){let P=d.scrollLeft;d.scrollLeft+=v,O=d.scrollLeft-P}t={left:t.left-O,top:t.top-y,right:t.right-O,bottom:t.bottom-y},O&&Math.abs(O-v)<1&&(i="nearest"),y&&Math.abs(y-C)<1&&(r="nearest")}if(m)break;d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}class Gf{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)}set(t,n,i,r){this.anchorNode=t,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let ti=null;function uh(e){if(e.setActive)return e.setActive();if(ti)return e.focus(ti);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(ti==null?{get preventScroll(){return ti={preventScroll:!0},!0}}:void 0),!ti){ti=!1;for(let n=0;n<t.length;){let i=t[n++],r=t[n++],o=t[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let ch;function ei(e,t,n=t){let i=ch||(ch=document.createRange());return i.setEnd(e,n),i.setStart(e,t),i}function Ri(e,t,n){let i={key:t,code:t,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,e.dispatchEvent(r);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,e.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function Vf(e){for(;e;){if(e&&(e.nodeType==9||e.nodeType==11&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}function ph(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function Hf(e,t){let n=t.focusNode,i=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=i)return!1;for(;;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=Fi(n))}else{if(n==e)return!0;i=Ir(n),n=n.parentNode}}class te{constructor(t,n,i=!0){this.node=t,this.offset=n,this.precise=i}static before(t,n){return new te(t.parentNode,Ir(t),n)}static after(t,n){return new te(t.parentNode,Ir(t)+1,n)}}const fo=[];class St{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let n=this.posAtStart;for(let i of this.children){if(i==t)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t,n){return null}sync(t){if(this.dirty&2){let n=this.dom,i=null,r;for(let o of this.children){if(o.dirty){if(!o.dom&&(r=i?i.nextSibling:n.firstChild)){let s=St.get(r);(!s||!s.parent&&s.constructor==o.constructor)&&o.reuseDOM(r)}o.sync(t),o.dirty=0}if(r=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&r!=o.dom&&(t.written=!0),o.dom.parentNode==n)for(;r&&r!=o.dom;)r=dh(r);else n.insertBefore(o.dom,r);i=o.dom}for(r=i?i.nextSibling:n.firstChild,r&&t&&t.node==n&&(t.written=!0);r;)r=dh(r)}else if(this.dirty&1)for(let n of this.children)n.dirty&&(n.sync(t),n.dirty=0)}reuseDOM(t){}localPosFromDOM(t,n){let i;if(t==this.dom)i=this.dom.childNodes[n];else{let r=Fi(t)==0?0:n==0?-1:1;for(;;){let o=t.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(t==o.firstChild?r=-1:r=1),t=o}r<0?i=t:i=t.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!St.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,o=0;;r++){let s=this.children[r];if(s.dom==i)return o;o+=s.length+s.breakAfter}}domBoundsAround(t,n,i=0){let r=-1,o=-1,s=-1,l=-1;for(let h=0,c=i,d=i;h<this.children.length;h++){let f=this.children[h],m=c+f.length;if(c<t&&m>n)return f.domBoundsAround(t,n,c);if(m>=t&&r==-1&&(r=h,o=c),c>n&&f.dom.parentNode==this.dom){s=h,l=d;break}d=m,c=m+f.breakAfter}return{from:o,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(t=!1){this.dirty|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let n=this.parent;n;n=n.parent){if(t&&(n.dirty|=2),n.dirty&1)return;n.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let n=t.parent;if(!n)return t;t=n}}replaceChildren(t,n,i=fo){this.markDirty();for(let r=t;r<n;r++){let o=this.children[r];o.parent==this&&o.destroy()}this.children.splice(t,n-t,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new fh(this.children,t,this.children.length)}childPos(t,n=1){return this.childCursor().findPos(t,n)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}merge(t,n,i,r,o,s){return!1}become(t){return!1}getSide(){return 0}destroy(){this.parent=null}}St.prototype.breakAfter=0;function dh(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class fh{constructor(t,n,i){this.children=t,this.pos=n,this.i=i,this.off=0}findPos(t,n=1){for(;;){if(t>this.pos||t==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function mh(e,t,n,i,r,o,s,l,h){let{children:c}=e,d=c.length?c[t]:null,f=o.length?o[o.length-1]:null,m=f?f.breakAfter:s;if(!(t==i&&d&&!s&&!m&&o.length<2&&d.merge(n,r,o.length?f:null,n==0,l,h))){if(i<c.length){let v=c[i];v&&r<v.length?(t==i&&(v=v.split(r),r=0),!m&&f&&v.merge(0,r,f,!0,0,h)?o[o.length-1]=v:(r&&v.merge(0,r,null,!1,0,h),o.push(v))):v!=null&&v.breakAfter&&(f?f.breakAfter=1:s=1),i++}for(d&&(d.breakAfter=s,n>0&&(!s&&o.length&&d.merge(n,d.length,o[0],!1,l,0)?d.breakAfter=o.shift().breakAfter:(n<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(n,d.length,null,!1,l,0),t++));t<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),h=o.length?0:l;else if(c[t].become(o[0]))t++,o.shift(),l=o.length?0:h;else break;!o.length&&t&&i<c.length&&!c[t-1].breakAfter&&c[i].merge(0,0,c[t-1],!1,l,h)&&t--,(t<i||o.length)&&e.replaceChildren(t,i,o)}}function Oh(e,t,n,i,r,o){let s=e.childCursor(),{i:l,off:h}=s.findPos(n,1),{i:c,off:d}=s.findPos(t,-1),f=t-n;for(let m of i)f+=m.length;e.length+=f,mh(e,c,d,l,h,i,0,r,o)}let xe=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},mo=typeof document<"u"?document:{documentElement:{style:{}}};const Oo=/Edge\/(\d+)/.exec(xe.userAgent),gh=/MSIE \d/.test(xe.userAgent),go=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xe.userAgent),Lr=!!(gh||go||Oo),yh=!Lr&&/gecko\/(\d+)/i.test(xe.userAgent),yo=!Lr&&/Chrome\/(\d+)/.exec(xe.userAgent),xh="webkitFontSmoothing"in mo.documentElement.style,vh=!Lr&&/Apple Computer/.test(xe.vendor),Ph=vh&&(/Mobile\/\w+/.test(xe.userAgent)||xe.maxTouchPoints>2);var J={mac:Ph||/Mac/.test(xe.platform),windows:/Win/.test(xe.platform),linux:/Linux|X11/.test(xe.platform),ie:Lr,ie_version:gh?mo.documentMode||6:go?+go[1]:Oo?+Oo[1]:0,gecko:yh,gecko_version:yh?+(/Firefox\/(\d+)/.exec(xe.userAgent)||[0,0])[1]:0,chrome:!!yo,chrome_version:yo?+yo[1]:0,ios:Ph,android:/Android\b/.test(xe.userAgent),webkit:xh,safari:vh,webkit_version:xh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:mo.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Jf=256;class On extends St{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,n,i){return i&&(!(i instanceof On)||this.length-(n-t)+i.length>Jf)?!1:(this.text=this.text.slice(0,t)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(t){let n=new On(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),n}localPosFromDOM(t,n){return t==this.dom?n:n?this.text.length:0}domAtPos(t){return new te(this.dom,t)}domBoundsAround(t,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,n){return xo(this.dom,t,n)}}class je extends St{constructor(t,n=[],i=0){super(),this.mark=t,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(t){if(ph(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)t.setAttribute(n,this.mark.attrs[n]);return t}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}sync(t){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t)}merge(t,n,i,r,o,s){return i&&(!(i instanceof je&&i.mark.eq(this.mark))||t&&o<=0||n<this.length&&s<=0)?!1:(Oh(this,t,n,i?i.children:[],o-1,s-1),this.markDirty(),!0)}split(t){let n=[],i=0,r=-1,o=0;for(let l of this.children){let h=i+l.length;h>t&&n.push(i<t?l.split(t-i):l),r<0&&i>=t&&(r=o),i=h,o++}let s=this.length-t;return this.length=t,r>-1&&(this.children.length=r,this.markDirty()),new je(this.mark,n,s)}domAtPos(t){return wh(this,t)}coordsAt(t,n){return Eh(this,t,n)}}function xo(e,t,n){let i=e.nodeValue.length;t>i&&(t=i);let r=t,o=t,s=0;t==0&&n<0||t==i&&n>=0?J.chrome||J.gecko||(t?(r--,s=1):o<i&&(o++,s=-1)):n<0?r--:o<i&&o++;let l=ei(e,r,o).getClientRects();if(!l.length)return hh;let h=l[(s?s<0:n>=0)?0:l.length-1];return J.safari&&!s&&h.width==0&&(h=Array.prototype.find.call(l,c=>c.width)||h),s?Qr(h,s<0):h||null}class gn extends St{constructor(t,n,i){super(),this.widget=t,this.length=n,this.side=i,this.prevWidget=null}static create(t,n,i){return new(t.customView||gn)(t,n,i)}split(t){let n=gn.create(this.widget,this.length-t,this.side);return this.length-=t,n}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,n,i,r,o,s){return i&&(!(i instanceof gn)||!this.widget.compare(i.widget)||t>0&&o<=0||n<this.length&&s<=0)?!1:(this.length=t+(i?i.length:0)+(this.length-n),!0)}become(t){return t.length==this.length&&t instanceof gn&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.eq(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return gt.empty;let t=this;for(;t.parent;)t=t.parent;let n=t.editorView,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):gt.empty}domAtPos(t){return t==0?te.before(this.dom):te.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,n){let i=this.dom.getClientRects(),r=null;if(!i.length)return hh;for(let o=t>0?i.length-1:0;r=i[o],!(t>0?o==0:o==i.length-1||r.top<r.bottom);o+=t>0?-1:1);return t==0&&n>0||t==this.length&&n<=0?r:Qr(r,t==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Sh extends gn{domAtPos(t){let{topView:n,text:i}=this.widget;return n?vo(t,0,n,i,(r,o)=>r.domAtPos(o),r=>new te(i,Math.min(r,i.nodeValue.length))):new te(i,Math.min(t,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(t,n){let{topView:i,text:r}=this.widget;return i?Ch(t,n,i,r):Math.min(n,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,n){let{topView:i,text:r}=this.widget;return i?vo(t,n,i,r,(o,s,l)=>o.coordsAt(s,l),(o,s)=>xo(r,o,s)):xo(r,t,n)}destroy(){var t;super.destroy(),(t=this.widget.topView)===null||t===void 0||t.destroy()}get isEditable(){return!0}}function vo(e,t,n,i,r,o){if(n instanceof je){for(let s=n.dom.firstChild;s;s=s.nextSibling){let l=St.get(s);if(!l)return o(e,t);let h=Kn(s,i),c=l.length+(h?i.nodeValue.length:0);if(e<c||e==c&&l.getSide()<=0)return h?vo(e,t,l,i,r,o):r(l,e,t);e-=c}return r(n,n.length,-1)}else return n.dom==i?o(e,t):r(n,e,t)}function Ch(e,t,n,i){if(n instanceof je)for(let r of n.children){let o=0,s=Kn(r.dom,i);if(Kn(r.dom,e))return o+(s?Ch(e,t,r,i):r.localPosFromDOM(e,t));o+=s?i.nodeValue.length:r.length}else if(n.dom==i)return Math.min(t,i.nodeValue.length);return n.localPosFromDOM(e,t)}class ni extends St{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof ni&&t.side==this.side}split(){return new ni(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return te.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){let n=this.dom.getBoundingClientRect(),i=Kf(this,this.side>0?-1:1);return i&&i.top<n.bottom&&i.bottom>n.top?{left:n.left,right:n.right,top:i.top,bottom:i.bottom}:n}get overrideDOMText(){return gt.empty}}On.prototype.children=gn.prototype.children=ni.prototype.children=fo;function Kf(e,t){let n=e.parent,i=n?n.children.indexOf(e):-1;for(;n&&i>=0;)if(t<0?i>0:i<n.children.length){let r=n.children[i+t];if(r instanceof On){let o=r.coordsAt(t<0?r.length:0,t);if(o)return o}i+=t}else if(n instanceof je&&n.parent)i=n.parent.children.indexOf(n)+(t<0?0:1),n=n.parent;else{let r=n.dom.lastChild;if(r&&r.nodeName=="BR")return r.getClientRects()[0];break}}function wh(e,t){let n=e.dom,{children:i}=e,r=0;for(let o=0;r<i.length;r++){let s=i[r],l=o+s.length;if(!(l==o&&s.getSide()<=0)){if(t>o&&t<l&&s.dom.parentNode==n)return s.domAtPos(t-o);if(t<=o)break;o=l}}for(let o=r;o>0;o--){let s=i[o-1];if(s.dom.parentNode==n)return s.domAtPos(s.length)}for(let o=r;o<i.length;o++){let s=i[o];if(s.dom.parentNode==n)return s.domAtPos(0)}return new te(n,0)}function bh(e,t,n){let i,{children:r}=e;n>0&&t instanceof je&&r.length&&(i=r[r.length-1])instanceof je&&i.mark.eq(t.mark)?bh(i,t.children[0],n-1):(r.push(t),t.setParent(e)),e.length+=t.length}function Eh(e,t,n){for(let o=0,s=0;s<e.children.length;s++){let l=e.children[s],h=o+l.length,c;if((n<=0||h==e.length||l.getSide()>0?h>=t:h>t)&&(t<h||s+1==e.children.length||(c=e.children[s+1]).length||c.getSide()>0)){let d=0;if(h==o){if(l.getSide()<=0)continue;d=n=-l.getSide()}let f=l.coordsAt(Math.max(0,t-o),n);return d&&f?Qr(f,n<0):f}o=h}let i=e.dom.lastChild;if(!i)return e.dom.getBoundingClientRect();let r=Ni(i);return r[r.length-1]||null}function Po(e,t){for(let n in e)n=="class"&&t.class?t.class+=" "+e.class:n=="style"&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function So(e,t){if(e==t)return!0;if(!e||!t)return!1;let n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(let r of n)if(i.indexOf(r)==-1||e[r]!==t[r])return!1;return!0}function Co(e,t,n){let i=null;if(t)for(let r in t)n&&r in n||e.removeAttribute(i=r);if(n)for(let r in n)t&&t[r]==n[r]||e.setAttribute(i=r,n[r]);return!!i}class sn{eq(t){return!1}updateDOM(t){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}destroy(t){}}var vt=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(vt||(vt={}));class et extends Xn{constructor(t,n,i,r){super(),this.startSide=t,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(t){return new Xr(t)}static widget(t){let n=t.side||0,i=!!t.block;return n+=i?n>0?3e8:-4e8:n>0?1e8:-1e8,new $n(t,n,n,i,t.widget||null,!1)}static replace(t){let n=!!t.block,i,r;if(t.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:s}=Dh(t,n);i=(o?n?-3e8:-1:5e8)-1,r=(s?n?2e8:1:-6e8)+1}return new $n(t,i,r,n,t.widget||null,!0)}static line(t){return new Bi(t)}static set(t,n=!1){return yt.of(t,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}et.none=yt.empty;class Xr extends et{constructor(t){let{start:n,end:i}=Dh(t);super(n?-1:5e8,i?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){return this==t||t instanceof Xr&&this.tagName==t.tagName&&this.class==t.class&&So(this.attrs,t.attrs)}range(t,n=t){if(t>=n)throw new RangeError("Mark decorations may not be empty");return super.range(t,n)}}Xr.prototype.point=!1;class Bi extends et{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof Bi&&So(this.spec.attributes,t.spec.attributes)}range(t,n=t){if(n!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,n)}}Bi.prototype.mapMode=qt.TrackBefore,Bi.prototype.point=!0;class $n extends et{constructor(t,n,i,r,o,s){super(n,i,o,t),this.block=r,this.isReplace=s,this.mapMode=r?n<=0?qt.TrackBefore:qt.TrackAfter:qt.TrackDel}get type(){return this.startSide<this.endSide?vt.WidgetRange:this.startSide<=0?vt.WidgetBefore:vt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof $n&&t0(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,n=t){if(this.isReplace&&(t>n||t==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,n)}}$n.prototype.point=!0;function Dh(e,t=!1){let{inclusiveStart:n,inclusiveEnd:i}=e;return n==null&&(n=e.inclusive),i==null&&(i=e.inclusive),{start:n!=null?n:t,end:i!=null?i:t}}function t0(e,t){return e==t||!!(e&&t&&e.compare(t))}function wo(e,t,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=e?n[r]=Math.max(n[r],t):n.push(e,t)}class oe extends St{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,n,i,r,o,s){if(i){if(!(i instanceof oe))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Oh(this,t,n,i?i.children:[],o,s),!0}split(t){let n=new oe;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(t);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)n.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=t,n}transferDOM(t){!this.dom||(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){So(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,n){bh(this,t,n)}addLineDeco(t){let n=t.spec.attributes,i=t.spec.class;n&&(this.attrs=Po(n,this.attrs||{})),i&&(this.attrs=Po({class:i},this.attrs||{}))}domAtPos(t){return wh(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.dirty|=6)}sync(t){var n;this.dom?this.dirty&4&&(ph(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Co(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t);let i=this.dom.lastChild;for(;i&&St.get(i)instanceof je;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=St.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!J.ios||!this.children.some(r=>r instanceof On))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0;for(let n of this.children){if(!(n instanceof On)||/[^ -~]/.test(n.text))return null;let i=Ni(n.dom);if(i.length!=1)return null;t+=i[0].width}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}:null}coordsAt(t,n){return Eh(this,t,n)}become(t){return!1}get type(){return vt.Text}static find(t,n){for(let i=0,r=0;i<t.children.length;i++){let o=t.children[i],s=r+o.length;if(s>=n){if(o instanceof oe)return o;if(s>n)break}r=s+o.breakAfter}return null}}class Nn extends St{constructor(t,n,i){super(),this.widget=t,this.length=n,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(t,n,i,r,o,s){return i&&(!(i instanceof Nn)||!this.widget.compare(i.widget)||t>0&&o<=0||n<this.length&&s<=0)?!1:(this.length=t+(i?i.length:0)+(this.length-n),!0)}domAtPos(t){return t==0?te.before(this.dom):te.after(this.dom,t==this.length)}split(t){let n=this.length-t;this.length=t;let i=new Nn(this.widget,n,this.type);return i.breakAfter=this.breakAfter,i}get children(){return fo}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):gt.empty}domBoundsAround(){return null}become(t){return t instanceof Nn&&t.type==this.type&&t.widget.constructor==this.widget.constructor?(t.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class bo{constructor(t,n,i,r){this.doc=t,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!t.breakAfter&&!(t instanceof Nn&&t.type==vt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new oe),this.atCursorPos=!0),this.curLine}flushBuffer(t){this.pendingBuffer&&(this.curLine.append($r(new ni(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer([]),this.curLine=null,this.content.push(t)}finish(t){t?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(t,n,i){for(;t>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,t--;continue}else this.text=o,this.textOff=0}let r=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(n.slice(0,i)),this.getLine().append($r(new On(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,t-=r,i=0}}span(t,n,i,r){this.buildText(n-t,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(t,n,i,r,o,s){if(this.disallowBlockEffectsFor[s]&&i instanceof $n){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-t;if(i instanceof $n)if(i.block){let{type:h}=i;h==vt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Nn(i.widget||new Ah("div"),l,h))}else{let h=gn.create(i.widget||new Ah("span"),l,i.startSide),c=this.atCursorPos&&!h.isEditable&&o<=r.length&&(t<n||i.startSide>0),d=!h.isEditable&&(t<n||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(f.append($r(new ni(1),r),o),o=r.length+Math.max(0,o-r.length)),f.append($r(h,r),o),this.atCursorPos=d,this.pendingBuffer=d?t<n?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=o)}static build(t,n,i,r,o){let s=new bo(t,n,i,o);return s.openEnd=yt.spans(r,n,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function $r(e,t){for(let n of t)e=new je(n,[e],e.length);return e}class Ah extends sn{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}}const Th=H.define(),kh=H.define(),_h=H.define(),Ih=H.define(),Eo=H.define(),Qh=H.define(),Lh=H.define({combine:e=>e.some(t=>t)});class Nr{constructor(t,n="nearest",i="nearest",r=5,o=5){this.range=t,this.y=n,this.x=i,this.yMargin=r,this.xMargin=o}map(t){return t.empty?this:new Nr(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}const Xh=it.define({map:(e,t)=>e.map(t)});function ve(e,t,n){let i=e.facet(Ih);i.length?i[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const Fr=H.define({combine:e=>e.length?e[0]:!0});let e0=0;const Mi=H.define();class Qt{constructor(t,n,i,r){this.id=t,this.create=n,this.domEventHandlers=i,this.extension=r(this)}static define(t,n){const{eventHandlers:i,provide:r,decorations:o}=n||{};return new Qt(e0++,t,i,s=>{let l=[Mi.of(s)];return o&&l.push(Yi.of(h=>{let c=h.plugin(s);return c?o(c):et.none})),r&&l.push(r(s)),l})}static fromClass(t,n){return Qt.define(i=>new t(i),n)}}class Do{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(ve(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(n){ve(t.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){ve(t.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const $h=H.define(),Nh=H.define(),Yi=H.define(),Fh=H.define(),Rh=H.define(),Wi=H.define();class on{constructor(t,n,i,r){this.fromA=t,this.toA=n,this.fromB=i,this.toB=r}join(t){return new on(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let n=t.length,i=this;for(;n>0;n--){let r=t[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),t.splice(n-1,1)}}return t.splice(n,0,i),t}static extendWithRanges(t,n){if(n.length==0)return t;let i=[];for(let r=0,o=0,s=0,l=0;;r++){let h=r==t.length?null:t[r],c=s-l,d=h?h.fromB:1e9;for(;o<n.length&&n[o]<d;){let f=n[o],m=n[o+1],v=Math.max(l,f),C=Math.min(d,m);if(v<=C&&new on(v+c,C+c,v,C).addToSet(i),m>d)break;o+=2}if(!h)return i;new on(h.fromA,h.toA,h.fromB,h.toB).addToSet(i),s=h.toA,l=h.toB}}}class Rr{constructor(t,n,i){this.view=t,this.state=n,this.transactions=i,this.flags=0,this.startState=t.state,this.changes=Nt.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,l,h,c)=>r.push(new on(s,l,h,c))),this.changedRanges=r;let o=t.hasFocus;o!=t.inputState.notifiedFocused&&(t.inputState.notifiedFocused=o,this.flags|=1)}static create(t,n,i){return new Rr(t,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Dt=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Dt||(Dt={}));const Ao=Dt.LTR,n0=Dt.RTL;function Bh(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const i0=Bh("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),r0=Bh("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),To=Object.create(null),Ze=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);To[t]=n,To[n]=-t}function s0(e){return e<=247?i0[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?r0[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8203?256:64336<=e&&e<=65023?4:e==8204?256:1}const o0=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ii{constructor(t,n,i){this.from=t,this.to=n,this.level=i}get dir(){return this.level%2?n0:Ao}side(t,n){return this.dir==n==t?this.to:this.from}static find(t,n,i,r){let o=-1;for(let s=0;s<t.length;s++){let l=t[s];if(l.from<=n&&l.to>=n){if(l.level==i)return s;(o<0||(r!=0?r<0?l.from<n:l.to>n:t[o].level>l.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}const At=[];function a0(e,t){let n=e.length,i=t==Ao?1:2,r=t==Ao?2:1;if(!e||i==1&&!o0.test(e))return Mh(n);for(let s=0,l=i,h=i;s<n;s++){let c=s0(e.charCodeAt(s));c==512?c=l:c==8&&h==4&&(c=16),At[s]=c==4?2:c,c&7&&(h=c),l=c}for(let s=0,l=i,h=i;s<n;s++){let c=At[s];if(c==128)s<n-1&&l==At[s+1]&&l&24?c=At[s]=l:At[s]=256;else if(c==64){let d=s+1;for(;d<n&&At[d]==64;)d++;let f=s&&l==8||d<n&&At[d]==8?h==1?1:8:256;for(let m=s;m<d;m++)At[m]=f;s=d-1}else c==8&&h==1&&(At[s]=1);l=c,c&7&&(h=c)}for(let s=0,l=0,h=0,c,d,f;s<n;s++)if(d=To[c=e.charCodeAt(s)])if(d<0){for(let m=l-3;m>=0;m-=3)if(Ze[m+1]==-d){let v=Ze[m+2],C=v&2?i:v&4?v&1?r:i:0;C&&(At[s]=At[Ze[m]]=C),l=m;break}}else{if(Ze.length==189)break;Ze[l++]=s,Ze[l++]=c,Ze[l++]=h}else if((f=At[s])==2||f==1){let m=f==i;h=m?0:1;for(let v=l-3;v>=0;v-=3){let C=Ze[v+2];if(C&2)break;if(m)Ze[v+2]|=2;else{if(C&4)break;Ze[v+2]|=4}}}for(let s=0;s<n;s++)if(At[s]==256){let l=s+1;for(;l<n&&At[l]==256;)l++;let h=(s?At[s-1]:i)==1,c=(l<n?At[l]:i)==1,d=h==c?h?1:2:i;for(let f=s;f<l;f++)At[f]=d;s=l-1}let o=[];if(i==1)for(let s=0;s<n;){let l=s,h=At[s++]!=1;for(;s<n&&h==(At[s]!=1);)s++;if(h)for(let c=s;c>l;){let d=c,f=At[--c]!=2;for(;c>l&&f==(At[c-1]!=2);)c--;o.push(new ii(c,d,f?2:1))}else o.push(new ii(l,s,0))}else for(let s=0;s<n;){let l=s,h=At[s++]==2;for(;s<n&&h==(At[s]==2);)s++;o.push(new ii(l,s,h?1:2))}return o}function Mh(e){return[new ii(0,e,0)]}let Yh="";function l0(e,t,n,i,r){var o;let s=i.head-e.from,l=-1;if(s==0){if(!r||!e.length)return null;t[0].level!=n&&(s=t[0].side(!1,n),l=0)}else if(s==e.length){if(r)return null;let m=t[t.length-1];m.level!=n&&(s=m.side(!0,n),l=t.length-1)}l<0&&(l=ii.find(t,s,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc));let h=t[l];s==h.side(r,n)&&(h=t[l+=r?1:-1],s=h.side(!r,n));let c=r==(h.dir==n),d=se(e.text,s,c);if(Yh=e.text.slice(Math.min(s,d),Math.max(s,d)),d!=h.side(r,n))return Y.cursor(d+e.from,c?-1:1,h.level);let f=l==(r?t.length-1:0)?null:t[l+(r?1:-1)];return!f&&h.level!=n?Y.cursor(r?e.to:e.from,r?-1:1,n):f&&f.level<h.level?Y.cursor(f.side(!r,n)+e.from,r?1:-1,f.level):Y.cursor(d+e.from,r?-1:1,h.level)}const yn="\uFFFF";class Wh{constructor(t,n){this.points=t,this.text="",this.lineSeparator=n.facet(ft.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=yn}readRange(t,n){if(!t)return this;let i=t.parentNode;for(let r=t;;){this.findPointBefore(i,r),this.readNode(r);let o=r.nextSibling;if(o==n)break;let s=St.get(r),l=St.get(o);(s&&l?s.breakAfter:(s?s.breakAfter:jh(r))||jh(o)&&(r.nodeName!="BR"||r.cmIgnore))&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(t){let n=t.nodeValue;for(let i of this.points)i.node==t&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,l;if(this.lineSeparator?(o=n.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(l=r.exec(n))&&(o=l.index,s=l[0].length),this.append(n.slice(i,o<0?n.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let h of this.points)h.node==t&&h.pos>this.text.length&&(h.pos-=s-1);i=o+s}}readNode(t){if(t.cmIgnore)return;let n=St.get(t),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(t,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,n){for(let i of this.points)i.node==t&&t.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(t,n){for(let i of this.points)(t.nodeType==3?i.node==t:t.contains(i.node))&&(i.pos=this.text.length+Math.min(n,i.offset))}}function jh(e){return e.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class Zh{constructor(t,n){this.node=t,this.offset=n,this.pos=-1}}class zh extends St{constructor(t){super(),this.view=t,this.compositionDeco=et.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new oe],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new on(0,0,0,t.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(t){let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:s,toA:l})=>l<this.minWidthFrom||s>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=et.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=u0(this.view,t.changes)),(J.ie||J.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,r=this.updateDeco(),o=f0(i,r,t.changes);return n=on.extendWithRanges(n,o),this.dirty==0&&n.length==0?!1:(this.updateInner(n,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=J.chrome||J.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(o),this.dirty=0,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Nn&&o.widget instanceof qh&&r.push(o.dom);i.updateGaps(r)}updateChildren(t,n){let i=this.childCursor(n);for(let r=t.length-1;;r--){let o=r>=0?t[r]:null;if(!o)break;let{fromA:s,toA:l,fromB:h,toB:c}=o,{content:d,breakAtStart:f,openStart:m,openEnd:v}=bo.build(this.view.state.doc,h,c,this.decorations,this.dynamicDecorationMap),{i:C,off:O}=i.findPos(l,1),{i:y,off:P}=i.findPos(s,-1);mh(this,y,P,C,O,d,f,m,v)}}updateSelection(t=!1,n=!1){if((t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(n||this.mayControlSelection()))return;let i=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,o=this.domAtPos(r.anchor),s=r.empty?o:this.domAtPos(r.head);if(J.gecko&&r.empty&&h0(o)){let h=document.createTextNode("");this.view.observer.ignore(()=>o.node.insertBefore(h,o.node.childNodes[o.offset]||null)),o=s=new te(h,0),i=!0}let l=this.view.observer.selectionRange;(i||!l.focusNode||!_r(o.node,o.offset,l.anchorNode,l.anchorOffset)||!_r(s.node,s.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{J.android&&J.chrome&&this.dom.contains(l.focusNode)&&m0(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Tr(this.view.root);if(h)if(r.empty){if(J.gecko){let c=p0(o.node,o.offset);if(c&&c!=3){let d=Gh(o.node,o.offset,c==1?1:-1);d&&(o=new te(d,c==1?0:d.nodeValue.length))}}h.collapse(o.node,o.offset),r.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=r.bidiLevel)}else if(h.extend)h.collapse(o.node,o.offset),h.extend(s.node,s.offset);else{let c=document.createRange();r.anchor>r.head&&([o,s]=[s,o]),c.setEnd(s.node,s.offset),c.setStart(o.node,o.offset),h.removeAllRanges(),h.addRange(c)}}),this.view.observer.setSelectionRange(o,s)),this.impreciseAnchor=o.precise?null:new te(l.anchorNode,l.anchorOffset),this.impreciseHead=s.precise?null:new te(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let t=this.view.state.selection.main,n=Tr(this.view.root);if(!n||!t.empty||!t.assoc||!n.modify)return;let i=oe.find(this,t.head);if(!i)return;let r=i.posAtStart;if(t.head==r||t.head==r+i.length)return;let o=this.coordsAt(t.head,-1),s=this.coordsAt(t.head,1);if(!o||!s||o.bottom>s.top)return;let l=this.domAtPos(t.head+t.assoc);n.collapse(l.node,l.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let t=this.view.root.activeElement;return t==this.dom||kr(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t))}nearest(t){for(let n=t;n;){let i=St.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(t,n){let i=this.nearest(t);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(t,n)+i.posAtStart}domAtPos(t){let{i:n,off:i}=this.childCursor().findPos(t,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof oe)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(t,n){for(let i=this.length,r=this.children.length-1;;r--){let o=this.children[r],s=i-o.breakAfter-o.length;if(t>s||t==s&&o.type!=vt.WidgetBefore&&o.type!=vt.WidgetAfter&&(!r||n==2||this.children[r-1].breakAfter||this.children[r-1].type==vt.WidgetBefore&&n>-2))return o.coordsAt(t-s,n);i=s}}measureVisibleLineHeights(t){let n=[],{from:i,to:r}=t,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,h=this.view.textDirection==Dt.LTR;for(let c=0,d=0;d<this.children.length;d++){let f=this.children[d],m=c+f.length;if(m>r)break;if(c>=i){let v=f.dom.getBoundingClientRect();if(n.push(v.height),s){let C=f.dom.lastChild,O=C?Ni(C):[];if(O.length){let y=O[O.length-1],P=h?y.right-v.left:v.right-y.left;P>l&&(l=P,this.minWidth=o,this.minWidthFrom=c,this.minWidthTo=m)}}}c=m+f.breakAfter}return n}textDirectionAt(t){let{i:n}=this.childPos(t,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Dt.RTL:Dt.LTR}measureTextSize(){for(let r of this.children)if(r instanceof oe){let o=r.measureTextSize();if(o)return o}let t=document.createElement("div"),n,i;return t.className="cm-line",t.style.width="99999px",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let r=Ni(t.firstChild)[0];n=t.getBoundingClientRect().height,i=r?r.width/27:7,t.remove()}),{lineHeight:n,charWidth:i}}childCursor(t=this.length){let n=this.children.length;return n&&(t-=this.children[--n].length),new fh(this.children,t,n)}computeBlockGapDeco(){let t=[],n=this.view.viewState;for(let i=0,r=0;;r++){let o=r==n.viewports.length?null:n.viewports[r],s=o?o.from-1:this.length;if(s>i){let l=n.lineBlockAt(s).bottom-n.lineBlockAt(i).top;t.push(et.replace({widget:new qh(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!o)break;i=o.to+1}return et.set(t)}updateDeco(){let t=this.view.state.facet(Yi).map((n,i)=>(this.dynamicDecorationMap[i]=typeof n=="function")?n(this.view):n);for(let n=t.length;n<t.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...t,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){let{range:n}=t,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=0,s=0,l=0,h=0;for(let d of this.view.state.facet(Rh).map(f=>f(this.view)))if(d){let{left:f,right:m,top:v,bottom:C}=d;f!=null&&(o=Math.max(o,f)),m!=null&&(s=Math.max(s,m)),v!=null&&(l=Math.max(l,v)),C!=null&&(h=Math.max(h,C))}let c={left:i.left-o,top:i.top-l,right:i.right+s,bottom:i.bottom+h};Uf(this.view.scrollDOM,c,n.head<n.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==Dt.LTR)}}function h0(e){return e.node.nodeType==1&&e.node.firstChild&&(e.offset==0||e.node.childNodes[e.offset-1].contentEditable=="false")&&(e.offset==e.node.childNodes.length||e.node.childNodes[e.offset].contentEditable=="false")}class qh extends sn{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Uh(e){let t=e.observer.selectionRange,n=t.focusNode&&Gh(t.focusNode,t.focusOffset,0);if(!n)return null;let i=e.docView.nearest(n);if(!i)return null;if(i instanceof oe){let r=n;for(;r.parentNode!=i.dom;)r=r.parentNode;let o=r.previousSibling;for(;o&&!St.get(o);)o=o.previousSibling;let s=o?St.get(o).posAtEnd:i.posAtStart;return{from:s,to:s,node:r,text:n}}else{for(;;){let{parent:o}=i;if(!o)return null;if(o instanceof oe)break;i=o}let r=i.posAtStart;return{from:r,to:r+i.length,node:i.dom,text:n}}}function u0(e,t){let n=Uh(e);if(!n)return et.none;let{from:i,to:r,node:o,text:s}=n,l=t.mapPos(i,1),h=Math.max(l,t.mapPos(r,-1)),{state:c}=e,d=o.nodeType==3?o.nodeValue:new Wh([],c).readRange(o.firstChild,null).text;if(h-l<d.length)if(c.doc.sliceString(l,Math.min(c.doc.length,l+d.length),yn)==d)h=l+d.length;else if(c.doc.sliceString(Math.max(0,h-d.length),h,yn)==d)l=h-d.length;else return et.none;else if(c.doc.sliceString(l,h,yn)!=d)return et.none;let f=St.get(o);return f instanceof Sh?f=f.widget.topView:f&&(f.parent=null),et.set(et.replace({widget:new c0(o,s,f),inclusive:!0}).range(l,h))}class c0 extends sn{constructor(t,n,i){super(),this.top=t,this.text=n,this.topView=i}eq(t){return this.top==t.top&&this.text==t.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Sh}}function Gh(e,t,n){for(;;){if(e.nodeType==3)return e;if(e.nodeType==1&&t>0&&n<=0)e=e.childNodes[t-1],t=Fi(e);else if(e.nodeType==1&&t<e.childNodes.length&&n>=0)e=e.childNodes[t],t=0;else return null}}function p0(e,t){return e.nodeType!=1?0:(t&&e.childNodes[t-1].contentEditable=="false"?1:0)|(t<e.childNodes.length&&e.childNodes[t].contentEditable=="false"?2:0)}class d0{constructor(){this.changes=[]}compareRange(t,n){wo(t,n,this.changes)}comparePoint(t,n){wo(t,n,this.changes)}}function f0(e,t,n){let i=new d0;return yt.compare(e,t,n,i),i.changes}function m0(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function O0(e,t,n=1){let i=e.charCategorizer(t),r=e.doc.lineAt(t),o=t-r.from;if(r.length==0)return Y.cursor(t);o==0?n=1:o==r.length&&(n=-1);let s=o,l=o;n<0?s=se(r.text,o,!1):l=se(r.text,o);let h=i(r.text.slice(s,l));for(;s>0;){let c=se(r.text,s,!1);if(i(r.text.slice(c,s))!=h)break;s=c}for(;l<r.length;){let c=se(r.text,l);if(i(r.text.slice(l,c))!=h)break;l=c}return Y.range(s+r.from,l+r.from)}function g0(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function y0(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function ko(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Vh(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Hh(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function _o(e,t,n){let i,r,o,s,l=!1,h,c,d,f;for(let C=e.firstChild;C;C=C.nextSibling){let O=Ni(C);for(let y=0;y<O.length;y++){let P=O[y];r&&ko(r,P)&&(P=Vh(Hh(P,r.bottom),r.top));let w=g0(t,P),D=y0(n,P);if(w==0&&D==0)return C.nodeType==3?Jh(C,t,n):_o(C,t,n);(!i||s>D||s==D&&o>w)&&(i=C,r=P,o=w,s=D,l=!w||(w>0?y<O.length-1:y>0)),w==0?n>P.bottom&&(!d||d.bottom<P.bottom)?(h=C,d=P):n<P.top&&(!f||f.top>P.top)&&(c=C,f=P):d&&ko(d,P)?d=Hh(d,P.bottom):f&&ko(f,P)&&(f=Vh(f,P.top))}}if(d&&d.bottom>=n?(i=h,r=d):f&&f.top<=n&&(i=c,r=f),!i)return{node:e,offset:0};let m=Math.max(r.left,Math.min(r.right,t));if(i.nodeType==3)return Jh(i,m,n);if(l&&i.contentEditable!="false")return _o(i,m,n);let v=Array.prototype.indexOf.call(e.childNodes,i)+(t>=(r.left+r.right)/2?1:0);return{node:e,offset:v}}function Jh(e,t,n){let i=e.nodeValue.length,r=-1,o=1e9,s=0;for(let l=0;l<i;l++){let h=ei(e,l,l+1).getClientRects();for(let c=0;c<h.length;c++){let d=h[c];if(d.top==d.bottom)continue;s||(s=t-d.left);let f=(d.top>n?d.top-n:n-d.bottom)-1;if(d.left-1<=t&&d.right+1>=t&&f<o){let m=t>=(d.left+d.right)/2,v=m;if((J.chrome||J.gecko)&&ei(e,l).getBoundingClientRect().left==d.right&&(v=!m),f<=0)return{node:e,offset:l+(v?1:0)};r=l+(v?1:0),o=f}}}return{node:e,offset:r>-1?r:s>0?e.nodeValue.length:0}}function Kh(e,{x:t,y:n},i,r=-1){var o;let s=e.contentDOM.getBoundingClientRect(),l=s.top+e.viewState.paddingTop,h,{docHeight:c}=e.viewState,d=n-l;if(d<0)return 0;if(d>c)return e.state.doc.length;for(let P=e.defaultLineHeight/2,w=!1;h=e.elementAtHeight(d),h.type!=vt.Text;)for(;d=r>0?h.bottom+P:h.top-P,!(d>=0&&d<=c);){if(w)return i?null:0;w=!0,r=-r}n=l+d;let f=h.from;if(f<e.viewport.from)return e.viewport.from==0?0:i?null:tu(e,s,h,t,n);if(f>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:i?null:tu(e,s,h,t,n);let m=e.dom.ownerDocument,v=e.root.elementFromPoint?e.root:m,C=v.elementFromPoint(t,n);C&&!e.contentDOM.contains(C)&&(C=null),C||(t=Math.max(s.left+1,Math.min(s.right-1,t)),C=v.elementFromPoint(t,n),C&&!e.contentDOM.contains(C)&&(C=null));let O,y=-1;if(C&&((o=e.docView.nearest(C))===null||o===void 0?void 0:o.isEditable)!=!1){if(m.caretPositionFromPoint){let P=m.caretPositionFromPoint(t,n);P&&({offsetNode:O,offset:y}=P)}else if(m.caretRangeFromPoint){let P=m.caretRangeFromPoint(t,n);P&&({startContainer:O,startOffset:y}=P,(!e.contentDOM.contains(O)||J.safari&&x0(O,y,t)||J.chrome&&v0(O,y,t))&&(O=void 0))}}if(!O||!e.docView.dom.contains(O)){let P=oe.find(e.docView,f);if(!P)return d>h.top+h.height/2?h.to:h.from;({node:O,offset:y}=_o(P.dom,t,n))}return e.docView.posFromDOM(O,y)}function tu(e,t,n,i,r){let o=Math.round((i-t.left)*e.defaultCharacterWidth);e.lineWrapping&&n.height>e.defaultLineHeight*1.5&&(o+=Math.floor((r-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength);let s=e.state.sliceDoc(n.from,n.to);return n.from+ho(s,o,e.state.tabSize)}function x0(e,t,n){let i;if(e.nodeType!=3||t!=(i=e.nodeValue.length))return!1;for(let r=e.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return ei(e,i-1,i).getBoundingClientRect().left>n}function v0(e,t,n){if(t!=0)return!1;for(let r=e;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let i=e.nodeType==1?e.getBoundingClientRect():ei(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function P0(e,t,n,i){let r=e.state.doc.lineAt(t.head),o=!i||!e.lineWrapping?null:e.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head);if(o){let h=e.dom.getBoundingClientRect(),c=e.textDirectionAt(r.from),d=e.posAtCoords({x:n==(c==Dt.LTR)?h.right-1:h.left+1,y:(o.top+o.bottom)/2});if(d!=null)return Y.cursor(d,n?-1:1)}let s=oe.find(e.docView,t.head),l=s?n?s.posAtEnd:s.posAtStart:n?r.to:r.from;return Y.cursor(l,n?-1:1)}function eu(e,t,n,i){let r=e.state.doc.lineAt(t.head),o=e.bidiSpans(r),s=e.textDirectionAt(r.from);for(let l=t,h=null;;){let c=l0(r,o,s,l,n),d=Yh;if(!c){if(r.number==(n?e.state.doc.lines:1))return l;d=`
`,r=e.state.doc.line(r.number+(n?1:-1)),o=e.bidiSpans(r),c=Y.cursor(n?r.from:r.to)}if(h){if(!h(d))return l}else{if(!i)return c;h=i(d)}l=c}}function S0(e,t,n){let i=e.state.charCategorizer(t),r=i(n);return o=>{let s=i(o);return r==Et.Space&&(r=s),r==s}}function C0(e,t,n,i){let r=t.head,o=n?1:-1;if(r==(n?e.state.doc.length:0))return Y.cursor(r,t.assoc);let s=t.goalColumn,l,h=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(r),d=e.documentTop;if(c)s==null&&(s=c.left-h.left),l=o<0?c.top:c.bottom;else{let v=e.viewState.lineBlockAt(r);s==null&&(s=Math.min(h.right-h.left,e.defaultCharacterWidth*(r-v.from))),l=(o<0?v.top:v.bottom)+d}let f=h.left+s,m=i!=null?i:e.defaultLineHeight>>1;for(let v=0;;v+=10){let C=l+(m+v)*o,O=Kh(e,{x:f,y:C},!1,o);if(C<h.top||C>h.bottom||(o<0?O<r:O>r))return Y.cursor(O,t.assoc,void 0,s)}}function Io(e,t,n){let i=e.state.facet(Fh).map(r=>r(e));for(;;){let r=!1;for(let o of i)o.between(n.from-1,n.from+1,(s,l,h)=>{n.from>s&&n.from<l&&(n=t.head>n.from?Y.cursor(s,1):Y.cursor(l,-1),r=!0)});if(!r)return n}}class w0{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let n in Yt){let i=Yt[n];t.contentDOM.addEventListener(n,r=>{!ru(t,r)||this.ignoreDuringComposition(r)||n=="keydown"&&this.keydown(t,r)||(this.mustFlushObserver(r)&&t.observer.forceFlush(),this.runCustomHandlers(n,t,r)?r.preventDefault():i(t,r))},Qo[n]),this.registeredEvents.push(n)}J.chrome&&J.chrome_version==102&&t.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=t.hasFocus,J.safari&&t.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t,n){var i;let r;this.customHandlers=[];for(let o of n)if(r=(i=o.update(t).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:r});for(let s in r)this.registeredEvents.indexOf(s)<0&&s!="scroll"&&(this.registeredEvents.push(s),t.contentDOM.addEventListener(s,l=>{!ru(t,l)||this.runCustomHandlers(s,t,l)&&l.preventDefault()}))}}runCustomHandlers(t,n,i){for(let r of this.customHandlers){let o=r.handlers[t];if(o)try{if(o.call(r.plugin,i,n)||i.defaultPrevented)return!0}catch(s){ve(n.state,s)}}return!1}runScrollHandlers(t,n){this.lastScrollTop=t.scrollDOM.scrollTop,this.lastScrollLeft=t.scrollDOM.scrollLeft;for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,n,t)}catch(o){ve(t.state,o)}}}keydown(t,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(J.android&&J.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return t.observer.delayAndroidKey(n.key,n.keyCode),!0;let i;return J.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((i=nu.find(r=>r.keyCode==n.keyCode))&&!n.ctrlKey||b0.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=i||n,setTimeout(()=>this.flushIOSKey(t),250),!0):!1}flushIOSKey(t){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,Ri(t.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(t){return/^key/.test(t.type)?this.composing>0?!0:J.safari&&!J.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(t){return t.type=="keydown"&&t.keyCode!=229}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const nu=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],b0="dthko",iu=[16,17,18,20,91,92,224,225];class E0{constructor(t,n,i,r){this.view=t,this.style=i,this.mustSelect=r,this.lastEvent=n;let o=t.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=t.state.facet(ft.allowMultipleSelections)&&D0(t,n),this.dragMove=A0(t,n),this.dragging=T0(t,n)&&Lo(n)==1?null:!1,this.dragging===!1&&(n.preventDefault(),this.select(n))}move(t){if(t.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=t)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(t){let n=this.style.get(t,this.extend,this.multiple);(this.mustSelect||!n.eq(this.view.state.selection)||n.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:n,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function D0(e,t){let n=e.state.facet(Th);return n.length?n[0](t):J.mac?t.metaKey:t.ctrlKey}function A0(e,t){let n=e.state.facet(kh);return n.length?n[0](t):J.mac?!t.altKey:!t.ctrlKey}function T0(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let i=Tr(e.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=t.clientX&&s.right>=t.clientX&&s.top<=t.clientY&&s.bottom>=t.clientY)return!0}return!1}function ru(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target,i;n!=e.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=St.get(n))&&i.ignoreEvent(t))return!1;return!0}const Yt=Object.create(null),Qo=Object.create(null),su=J.ie&&J.ie_version<15||J.ios&&J.webkit_version<604;function k0(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{e.focus(),n.remove(),ou(e,n.value)},50)}function ou(e,t){let{state:n}=e,i,r=1,o=n.toText(t),s=o.lines==n.selection.ranges.length;if(Xo!=null&&n.selection.ranges.every(l=>l.empty)&&Xo==o.toString()){let l=-1;i=n.changeByRange(h=>{let c=n.doc.lineAt(h.from);if(c.from==l)return{range:h};l=c.from;let d=n.toText((s?o.line(r++).text:t)+n.lineBreak);return{changes:{from:c.from,insert:d},range:Y.cursor(h.from+d.length)}})}else s?i=n.changeByRange(l=>{let h=o.line(r++);return{changes:{from:l.from,to:l.to,insert:h.text},range:Y.cursor(l.from+h.length)}}):i=n.replaceSelection(o);e.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Yt.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),t.keyCode==27?e.inputState.lastEscPress=Date.now():iu.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)},Yt.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Yt.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Qo.touchstart=Qo.touchmove={passive:!0},Yt.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3&&Lo(t)==1)return;let n=null;for(let i of e.state.facet(_h))if(n=i(e,t),n)break;if(!n&&t.button==0&&(n=Q0(e,t)),n){let i=e.root.activeElement!=e.contentDOM;i&&e.observer.ignore(()=>uh(e.contentDOM)),e.inputState.startMouseSelection(new E0(e,t,n,i))}};function au(e,t,n,i){if(i==1)return Y.cursor(t,n);if(i==2)return O0(e.state,t,n);{let r=oe.find(e.docView,t),o=e.state.doc.lineAt(r?r.posAtEnd:t),s=r?r.posAtStart:o.from,l=r?r.posAtEnd:o.to;return l<e.state.doc.length&&l==o.to&&l++,Y.range(s,l)}}let lu=(e,t)=>e>=t.top&&e<=t.bottom,hu=(e,t,n)=>lu(t,n)&&e>=n.left&&e<=n.right;function _0(e,t,n,i){let r=oe.find(e.docView,t);if(!r)return 1;let o=t-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&hu(n,i,s))return-1;let l=r.coordsAt(o,1);return l&&hu(n,i,l)?1:s&&lu(i,s)?-1:1}function uu(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:_0(e,n,t.clientX,t.clientY)}}const I0=J.ie&&J.ie_version<=11;let cu=null,pu=0,du=0;function Lo(e){if(!I0)return e.detail;let t=cu,n=du;return cu=e,du=Date.now(),pu=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(pu+1)%3:1}function Q0(e,t){let n=uu(e,t),i=Lo(t),r=e.state.selection,o=n,s=t;return{update(l){l.docChanged&&(n.pos=l.changes.mapPos(n.pos),r=r.map(l.changes),s=null)},get(l,h,c){let d;s&&l.clientX==s.clientX&&l.clientY==s.clientY?d=o:(d=o=uu(e,l),s=l);let f=au(e,d.pos,d.bias,i);if(n.pos!=d.pos&&!h){let m=au(e,n.pos,n.bias,i),v=Math.min(m.from,f.from),C=Math.max(m.to,f.to);f=v<f.from?Y.range(v,C):Y.range(C,v)}return h?r.replaceRange(r.main.extend(f.from,f.to)):c&&r.ranges.length>1&&r.ranges.some(m=>m.eq(f))?L0(r,f):c?r.addRange(f):Y.create([f])}}}function L0(e,t){for(let n=0;;n++)if(e.ranges[n].eq(t))return Y.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}Yt.dragstart=(e,t)=>{let{selection:{main:n}}=e.state,{mouseSelection:i}=e.inputState;i&&(i.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")};function fu(e,t,n,i){if(!n)return;let r=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:o}=e.inputState,s=i&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,l={from:r,insert:n},h=e.state.changes(s?[s,l]:l);e.focus(),e.dispatch({changes:h,selection:{anchor:h.mapPos(r,-1),head:h.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"})}Yt.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let i=Array(n.length),r=0,o=()=>{++r==n.length&&fu(e,t,i.filter(s=>s!=null).join(e.state.lineBreak),!1)};for(let s=0;s<n.length;s++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[s]=l.result),o()},l.readAsText(n[s])}}else fu(e,t,t.dataTransfer.getData("Text"),!0)},Yt.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let n=su?null:t.clipboardData;n?(ou(e,n.getData("text/plain")),t.preventDefault()):k0(e)};function X0(e,t){let n=e.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout(()=>{i.remove(),e.focus()},50)}function $0(e){let t=[],n=[],i=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let r=-1;for(let{from:o}of e.selection.ranges){let s=e.doc.lineAt(o);s.number>r&&(t.push(s.text),n.push({from:s.from,to:Math.min(e.doc.length,s.to+1)})),r=s.number}i=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:i}}let Xo=null;Yt.copy=Yt.cut=(e,t)=>{let{text:n,ranges:i,linewise:r}=$0(e.state);if(!n&&!r)return;Xo=r?n:null;let o=su?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",n)):X0(e,n),t.type=="cut"&&!e.state.readOnly&&e.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};function mu(e){setTimeout(()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])},10)}Yt.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),mu(e)},Yt.blur=e=>{e.observer.clearSelectionRange(),mu(e)},Yt.compositionstart=Yt.compositionupdate=e=>{e.inputState.compositionFirstChange==null&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0)},Yt.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,J.chrome&&J.android&&e.observer.flushSoon(),setTimeout(()=>{e.inputState.composing<0&&e.docView.compositionDeco.size&&e.update([])},50)},Yt.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Yt.beforeinput=(e,t)=>{var n;let i;if(J.chrome&&J.android&&(i=nu.find(r=>r.inputType==t.inputType))&&(e.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}};const Ou=["pre-wrap","normal","pre-line","break-spaces"];class N0{constructor(){this.doc=gt.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(i+=Math.ceil((n-t-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return Ou.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let n=!1;for(let i=0;i<t.length;i++){let r=t[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(t,n,i,r,o){let s=Ou.indexOf(t)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=n,this.charWidth=i,this.lineLength=r,l){this.heightSamples={};for(let h=0;h<o.length;h++){let c=o[h];c<0?h++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class F0{constructor(t,n){this.from=t,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class xn{constructor(t,n,i,r,o){this.from=t,this.length=n,this.top=i,this.height=r,this.type=o}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new xn(this.from,this.length+t.length,this.top,this.height+t.height,n)}}var Ct=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(Ct||(Ct={}));const Br=.001;class pe{constructor(t,n,i=2){this.length=t,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t,n){this.height!=n&&(Math.abs(this.height-n)>Br&&(t.heightChanged=!0),this.height=n)}replace(t,n,i){return pe.of(i)}decomposeLeft(t,n){n.push(this)}decomposeRight(t,n){n.push(this)}applyChanges(t,n,i,r){let o=this;for(let s=r.length-1;s>=0;s--){let{fromA:l,toA:h,fromB:c,toB:d}=r[s],f=o.lineAt(l,Ct.ByPosNoHeight,n,0,0),m=f.to>=h?f:o.lineAt(h,Ct.ByPosNoHeight,n,0,0);for(d+=m.to-h,h=m.to;s>0&&f.from<=r[s-1].toA;)l=r[s-1].fromA,c=r[s-1].fromB,s--,l<f.from&&(f=o.lineAt(l,Ct.ByPosNoHeight,n,0,0));c+=f.from-l,l=f.from;let v=$o.build(i,t,c,d);o=o.replace(l,h,v)}return o.updateHeight(i,0)}static empty(){return new Pe(0,0)}static of(t){if(t.length==1)return t[0];let n=0,i=t.length,r=0,o=0;for(;;)if(n==i)if(r>o*2){let l=t[n-1];l.break?t.splice(--n,1,l.left,null,l.right):t.splice(--n,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(o>r*2){let l=t[i];l.break?t.splice(i,1,l.left,null,l.right):t.splice(i,1,l.left,l.right),i+=2+l.break,o-=l.size}else break;else if(r<o){let l=t[n++];l&&(r+=l.size)}else{let l=t[--i];l&&(o+=l.size)}let s=0;return t[n-1]==null?(s=1,n--):t[n]==null&&(s=1,i++),new R0(pe.of(t.slice(0,n)),s,pe.of(t.slice(i)))}}pe.prototype.size=1;class gu extends pe{constructor(t,n,i){super(t,n),this.type=i}blockAt(t,n,i,r){return new xn(r,this.length,i,this.height,this.type)}lineAt(t,n,i,r,o){return this.blockAt(0,i,r,o)}forEachLine(t,n,i,r,o,s){t<=o+this.length&&n>=o&&s(this.blockAt(0,i,r,o))}updateHeight(t,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(t,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Pe extends gu{constructor(t,n){super(t,n,vt.Text),this.collapsed=0,this.widgetHeight=0}replace(t,n,i){let r=i[0];return i.length==1&&(r instanceof Pe||r instanceof Gt&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Gt?r=new Pe(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):pe.of(i)}updateHeight(t,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(t,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Gt extends pe{constructor(t){super(t,0)}lines(t,n){let i=t.lineAt(n).number,r=t.lineAt(n+this.length).number;return{firstLine:i,lastLine:r,lineHeight:this.height/(r-i+1)}}blockAt(t,n,i,r){let{firstLine:o,lastLine:s,lineHeight:l}=this.lines(n,r),h=Math.max(0,Math.min(s-o,Math.floor((t-i)/l))),{from:c,length:d}=n.line(o+h);return new xn(c,d,i+l*h,l,vt.Text)}lineAt(t,n,i,r,o){if(n==Ct.ByHeight)return this.blockAt(t,i,r,o);if(n==Ct.ByPosNoHeight){let{from:f,to:m}=i.lineAt(t);return new xn(f,m-f,0,0,vt.Text)}let{firstLine:s,lineHeight:l}=this.lines(i,o),{from:h,length:c,number:d}=i.lineAt(t);return new xn(h,c,r+l*(d-s),l,vt.Text)}forEachLine(t,n,i,r,o,s){let{firstLine:l,lineHeight:h}=this.lines(i,o);for(let c=Math.max(t,o),d=Math.min(o+this.length,n);c<=d;){let f=i.lineAt(c);c==t&&(r+=h*(f.number-l)),s(new xn(f.from,f.length,r,h,vt.Text)),r+=h,c=f.to+1}}replace(t,n,i){let r=this.length-n;if(r>0){let o=i[i.length-1];o instanceof Gt?i[i.length-1]=new Gt(o.length+r):i.push(null,new Gt(r-1))}if(t>0){let o=i[0];o instanceof Gt?i[0]=new Gt(t+o.length):i.unshift(new Gt(t-1),null)}return pe.of(i)}decomposeLeft(t,n){n.push(new Gt(t-1),null)}decomposeRight(t,n){n.push(null,new Gt(this.length-t-1))}updateHeight(t,n=0,i=!1,r){let o=n+this.length;if(r&&r.from<=n+this.length&&r.more){let s=[],l=Math.max(n,r.from),h=-1,c=t.heightChanged;for(r.from>n&&s.push(new Gt(r.from-n-1).updateHeight(t,n));l<=o&&r.more;){let f=t.doc.lineAt(l).length;s.length&&s.push(null);let m=r.heights[r.index++];h==-1?h=m:Math.abs(m-h)>=Br&&(h=-2);let v=new Pe(f,m);v.outdated=!1,s.push(v),l+=f+1}l<=o&&s.push(null,new Gt(o-l).updateHeight(t,l));let d=pe.of(s);return t.heightChanged=c||h<0||Math.abs(d.height-this.height)>=Br||Math.abs(h-this.lines(t.doc,n).lineHeight)>=Br,d}else(i||this.outdated)&&(this.setHeight(t,t.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class R0 extends pe{constructor(t,n,i){super(t.length+n+i.length,t.height+i.height,n|(t.outdated||i.outdated?2:0)),this.left=t,this.right=i,this.size=t.size+i.size}get break(){return this.flags&1}blockAt(t,n,i,r){let o=i+this.left.height;return t<o?this.left.blockAt(t,n,i,r):this.right.blockAt(t,n,o,r+this.left.length+this.break)}lineAt(t,n,i,r,o){let s=r+this.left.height,l=o+this.left.length+this.break,h=n==Ct.ByHeight?t<s:t<l,c=h?this.left.lineAt(t,n,i,r,o):this.right.lineAt(t,n,i,s,l);if(this.break||(h?c.to<l:c.from>l))return c;let d=n==Ct.ByPosNoHeight?Ct.ByPosNoHeight:Ct.ByPos;return h?c.join(this.right.lineAt(l,d,i,s,l)):this.left.lineAt(l,d,i,r,o).join(c)}forEachLine(t,n,i,r,o,s){let l=r+this.left.height,h=o+this.left.length+this.break;if(this.break)t<h&&this.left.forEachLine(t,n,i,r,o,s),n>=h&&this.right.forEachLine(t,n,i,l,h,s);else{let c=this.lineAt(h,Ct.ByPos,i,r,o);t<c.from&&this.left.forEachLine(t,c.from-1,i,r,o,s),c.to>=t&&c.from<=n&&s(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,l,h,s)}}replace(t,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(t,n,i),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,n-r,i));let o=[];t>0&&this.decomposeLeft(t,o);let s=o.length;for(let l of i)o.push(l);if(t>0&&yu(o,s-1),n<this.length){let l=o.length;this.decomposeRight(n,o),yu(o,l)}return pe.of(o)}decomposeLeft(t,n){let i=this.left.length;if(t<=i)return this.left.decomposeLeft(t,n);n.push(this.left),this.break&&(i++,t>=i&&n.push(null)),t>i&&this.right.decomposeLeft(t-i,n)}decomposeRight(t,n){let i=this.left.length,r=i+this.break;if(t>=r)return this.right.decomposeRight(t-r,n);t<i&&this.left.decomposeRight(t,n),this.break&&t<r&&n.push(null),n.push(this.right)}balanced(t,n){return t.size>2*n.size||n.size>2*t.size?pe.of(this.break?[t,null,n]:[t,n]):(this.left=t,this.right=n,this.height=t.height+n.height,this.outdated=t.outdated||n.outdated,this.size=t.size+n.size,this.length=t.length+this.break+n.length,this)}updateHeight(t,n=0,i=!1,r){let{left:o,right:s}=this,l=n+o.length+this.break,h=null;return r&&r.from<=n+o.length&&r.more?h=o=o.updateHeight(t,n,i,r):o.updateHeight(t,n,i),r&&r.from<=l+s.length&&r.more?h=s=s.updateHeight(t,l,i,r):s.updateHeight(t,l,i),h?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function yu(e,t){let n,i;e[t]==null&&(n=e[t-1])instanceof Gt&&(i=e[t+1])instanceof Gt&&e.splice(t-1,3,new Gt(n.length+1+i.length))}const B0=5;class $o{constructor(t,n){this.pos=t,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Pe?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Pe(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(t,n,i){if(t<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let o=n-t;i.block?this.addBlock(new gu(o,r,i.type)):(o||r>=B0)&&this.addLineDeco(r,o)}else n>t&&this.span(t,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=n,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Pe(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,n){let i=new Gt(n-t);return this.oracle.doc.lineAt(t).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Pe)return t;let n=new Pe(0,-1);return this.nodes.push(n),n}addBlock(t){this.enterLine(),t.type==vt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=vt.WidgetBefore&&(this.covering=t)}addLineDeco(t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,t),this.writtenTo=this.pos=this.pos+n}finish(t){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Pe)&&!this.isCovered?this.nodes.push(new Pe(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=t;for(let r of this.nodes)r instanceof Pe&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(t,n,i,r){let o=new $o(i,t);return yt.spans(n,i,r,o,0),o.finish(i)}}function M0(e,t,n){let i=new Y0;return yt.compare(e,t,n,i,0),i.changes}class Y0{constructor(){this.changes=[]}compareRange(){}comparePoint(t,n,i,r){(t<n||i&&i.heightRelevant||r&&r.heightRelevant)&&wo(t,n,this.changes,5)}}function W0(e,t){let n=e.getBoundingClientRect(),i=e.ownerDocument,r=i.defaultView,o=Math.max(0,n.left),s=Math.min(r.innerWidth,n.right),l=Math.max(0,n.top),h=Math.min(r.innerHeight,n.bottom);for(let c=e.parentNode;c&&c!=i.body;)if(c.nodeType==1){let d=c,f=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&f.overflow!="visible"){let m=d.getBoundingClientRect();o=Math.max(o,m.left),s=Math.min(s,m.right),l=Math.max(l,m.top),h=c==e.parentNode?m.bottom:Math.min(h,m.bottom)}c=f.position=="absolute"||f.position=="fixed"?d.offsetParent:d.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:o-n.left,right:Math.max(o,s)-n.left,top:l-(n.top+t),bottom:Math.max(l,h)-(n.top+t)}}function j0(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class No{constructor(t,n,i){this.from=t,this.to=n,this.size=i}static same(t,n){if(t.length!=n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=n[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(t){return et.replace({widget:new Z0(this.size,t)}).range(this.from,this.to)}}class Z0 extends sn{constructor(t,n){super(),this.size=t,this.vertical=n}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class xu{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new N0,this.scaler=Su,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Dt.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=t.facet(Yi).filter(n=>typeof n!="function"),this.heightMap=pe.empty().applyChanges(this.stateDeco,gt.empty,this.heightOracle.setDoc(t.doc),[new on(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=et.set(this.lineGaps.map(n=>n.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!t.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);t.push(new Mr(o,s))}}this.viewports=t.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?Su:new U0(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,t=>{this.viewportLines.push(this.scaler.scale==1?t:ji(t,this.scaler))})}update(t,n=null){this.state=t.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Yi).filter(c=>typeof c!="function");let r=t.changedRanges,o=on.extendWithRanges(r,M0(i,this.stateDeco,t?t.changes:Nt.empty(this.state.doc.length))),s=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=s&&(t.flags|=2);let l=o.length?this.mapViewport(this.viewport,t.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let h=!t.changes.empty||t.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),h&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(t){let n=t.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Dt.RTL:Dt.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),l=s||this.mustMeasureContent||this.contentDOMHeight!=n.clientHeight;this.contentDOMHeight=n.clientHeight,this.mustMeasureContent=!1;let h=0,c=0,d=parseInt(i.paddingTop)||0,f=parseInt(i.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,h|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=t.scrollDOM.clientWidth,h|=8);let m=(this.printing?j0:W0)(n,this.paddingTop),v=m.top-this.pixelViewport.top,C=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let O=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(O!=this.inView&&(this.inView=O,O&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=n.clientWidth;if((this.contentDOMWidth!=y||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=y,this.editorHeight=t.scrollDOM.clientHeight,h|=8),l){let w=t.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(w)&&(s=!0),s||r.lineWrapping&&Math.abs(y-this.contentDOMWidth)>r.charWidth){let{lineHeight:D,charWidth:A}=t.docView.measureTextSize();s=r.refresh(o,D,A,y/A,w),s&&(t.docView.minWidth=0,h|=8)}v>0&&C>0?c=Math.max(v,C):v<0&&C<0&&(c=Math.min(v,C)),r.heightChanged=!1;for(let D of this.viewports){let A=D.from==this.viewport.from?w:t.docView.measureVisibleLineHeights(D);this.heightMap=this.heightMap.updateHeight(r,0,s,new F0(D.from,A))}r.heightChanged&&(h|=2)}let P=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return P&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(h&2||P)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,n){let i=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),r=this.heightMap,o=this.state.doc,{visibleTop:s,visibleBottom:l}=this,h=new Mr(r.lineAt(s-i*1e3,Ct.ByHeight,o,0,0).from,r.lineAt(l+(1-i)*1e3,Ct.ByHeight,o,0,0).to);if(n){let{head:c}=n.range;if(c<h.from||c>h.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=r.lineAt(c,Ct.ByPos,o,0,0),m;n.y=="center"?m=(f.top+f.bottom)/2-d/2:n.y=="start"||n.y=="nearest"&&c<h.from?m=f.top:m=f.bottom-d,h=new Mr(r.lineAt(m-1e3/2,Ct.ByHeight,o,0,0).from,r.lineAt(m+d+1e3/2,Ct.ByHeight,o,0,0).to)}}return h}mapViewport(t,n){let i=n.mapPos(t.from,-1),r=n.mapPos(t.to,1);return new Mr(this.heightMap.lineAt(i,Ct.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,Ct.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:t,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(t,Ct.ByPos,this.state.doc,0,0),{bottom:o}=this.heightMap.lineAt(n,Ct.ByPos,this.state.doc,0,0),{visibleTop:s,visibleBottom:l}=this;return(t==0||r<=s-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||o>=l+Math.max(10,Math.min(i,250)))&&r>s-2*1e3&&o<l+2*1e3}mapLineGaps(t,n){if(!t.length||n.empty)return t;let i=[];for(let r of t)n.touchesRange(r.from,r.to)||i.push(new No(n.mapPos(r.from),n.mapPos(r.to),r.size));return i}ensureLineGaps(t){let n=[];if(this.defaultTextDirection!=Dt.LTR)return n;for(let i of this.viewportLines){if(i.length<4e3)continue;let r=z0(i.from,i.to,this.stateDeco);if(r.total<4e3)continue;let o,s;if(this.heightOracle.lineWrapping){let c=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;o=Yr(r,(this.visibleTop-i.top-c)/i.height),s=Yr(r,(this.visibleBottom-i.top+c)/i.height)}else{let c=r.total*this.heightOracle.charWidth,d=2e3*this.heightOracle.charWidth;o=Yr(r,(this.pixelViewport.left-d)/c),s=Yr(r,(this.pixelViewport.right+d)/c)}let l=[];o>i.from&&l.push({from:i.from,to:o}),s<i.to&&l.push({from:s,to:i.to});let h=this.state.selection.main;h.from>=i.from&&h.from<=i.to&&Pu(l,h.from-10,h.from+10),!h.empty&&h.to>=i.from&&h.to<=i.to&&Pu(l,h.to-10,h.to+10);for(let{from:c,to:d}of l)d-c>1e3&&n.push(q0(t,f=>f.from>=i.from&&f.to<=i.to&&Math.abs(f.from-c)<1e3&&Math.abs(f.to-d)<1e3)||new No(c,d,this.gapSize(i,c,d,r)))}return n}gapSize(t,n,i,r){let o=vu(r,i)-vu(r,n);return this.heightOracle.lineWrapping?t.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(t){No.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=et.set(t.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];yt.spans(t,this.viewport.from,this.viewport.to,{span(r,o){n.push({from:r,to:o})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,o)=>r.from!=n[o].from||r.to!=n[o].to);return this.visibleRanges=n,i?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(n=>n.from<=t&&n.to>=t)||ji(this.heightMap.lineAt(t,Ct.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(t){return ji(this.heightMap.lineAt(this.scaler.fromDOM(t),Ct.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(t){return ji(this.heightMap.blockAt(this.scaler.fromDOM(t),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Mr{constructor(t,n){this.from=t,this.to=n}}function z0(e,t,n){let i=[],r=e,o=0;return yt.spans(n,e,t,{span(){},point(s,l){s>r&&(i.push({from:r,to:s}),o+=s-r),r=l}},20),r<t&&(i.push({from:r,to:t}),o+=t-r),{total:o,ranges:i}}function Yr({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let i=Math.floor(e*n);for(let r=0;;r++){let{from:o,to:s}=t[r],l=s-o;if(i<=l)return o+i;i-=l}}function vu(e,t){let n=0;for(let{from:i,to:r}of e.ranges){if(t<=r){n+=t-i;break}n+=r-i}return n/e.total}function Pu(e,t,n){for(let i=0;i<e.length;i++){let r=e[i];if(r.from<n&&r.to>t){let o=[];r.from<t&&o.push({from:r.from,to:t}),r.to>n&&o.push({from:n,to:r.to}),e.splice(i,1,...o),i+=o.length-1}}}function q0(e,t){for(let n of e)if(t(n))return n}const Su={toDOM(e){return e},fromDOM(e){return e},scale:1};class U0{constructor(t,n,i){let r=0,o=0,s=0;this.viewports=i.map(({from:l,to:h})=>{let c=n.lineAt(l,Ct.ByPos,t,0,0).top,d=n.lineAt(h,Ct.ByPos,t,0,0).bottom;return r+=d-c,{from:l,to:h,top:c,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let l of this.viewports)l.domTop=s+(l.top-o)*this.scale,s=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(t){for(let n=0,i=0,r=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||t<o.top)return r+(t-i)*this.scale;if(t<=o.bottom)return o.domTop+(t-o.top);i=o.bottom,r=o.domBottom}}fromDOM(t){for(let n=0,i=0,r=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||t<o.domTop)return i+(t-r)/this.scale;if(t<=o.domBottom)return o.top+(t-o.domTop);i=o.bottom,r=o.domBottom}}}function ji(e,t){if(t.scale==1)return e;let n=t.toDOM(e.top),i=t.toDOM(e.bottom);return new xn(e.from,e.length,n,i-n,Array.isArray(e.type)?e.type.map(r=>ji(r,t)):e.type)}const Wr=H.define({combine:e=>e.join(" ")}),Fo=H.define({combine:e=>e.indexOf(!0)>-1}),Ro=fn.newName(),Cu=fn.newName(),wu=fn.newName(),bu={"&light":"."+Cu,"&dark":"."+wu};function Bo(e,t,n){return new fn(t,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return e;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):e+" "+i}})}const G0=Bo("."+Ro,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},bu),V0={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Mo=J.ie&&J.ie_version<=11;class H0{constructor(t,n,i){this.view=t,this.onChange=n,this.onScrollChanged=i,this.active=!1,this.selectionRange=new Gf,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(r=>{for(let o of r)this.queue.push(o);(J.ie&&J.ie_version<=11||J.ios&&t.composing)&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),Mo&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((n,i)=>n!=t[i]))){this.gapIntersection.disconnect();for(let n of t)this.gapIntersection.observe(n);this.gaps=t}}onSelectionChange(t){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Fr)?i.root.activeElement!=this.dom:!kr(i.dom,r))return;let o=r.anchorNode&&i.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(t)){n||(this.selectionChanged=!1);return}(J.ie&&J.ie_version<=11||J.android&&J.chrome)&&!i.state.selection.main.empty&&r.focusNode&&_r(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,n=J.safari&&t.root.nodeType==11&&zf(this.dom.ownerDocument)==this.dom&&J0(this.view)||Tr(t.root);if(!n||this.selectionRange.eq(n))return!1;let i=kr(this.dom,n);return i&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&Hf(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(t,n){this.selectionRange.set(t.node,t.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&t<this.scrollTargets.length&&this.scrollTargets[t]==i?t++:n||(n=this.scrollTargets.slice(0,t)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(t<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,t)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,V0),Mo&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),Mo&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,n){var i;this.delayedAndroidKey||this.view.win.requestAnimationFrame(()=>{let r=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,!this.flush()&&r.force&&Ri(this.dom,r.key,r.keyCode)}),(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let t=this.queue;for(let o of this.observer.takeRecords())t.push(o);t.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let o of t){let s=this.readMutation(o);!s||(s.typeOver&&(r=!0),n==-1?{from:n,to:i}=s:(n=Math.min(s.from,n),i=Math.max(s.to,i)))}return{from:n,to:i,typeOver:r}}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let{from:n,to:i,typeOver:r}=this.processRecords(),o=this.selectionChanged&&kr(this.dom,this.selectionRange);if(n<0&&!o)return!1;n>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=this.view.state,l=this.onChange(n,i,r);return this.view.state==s&&this.view.update([]),l}readMutation(t){let n=this.view.docView.nearest(t.target);if(!n||n.ignoreMutation(t))return null;if(n.markDirty(t.type=="attributes"),t.type=="attributes"&&(n.dirty|=4),t.type=="childList"){let i=Eu(n,t.previousSibling||t.target.previousSibling,-1),r=Eu(n,t.nextSibling||t.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,n,i;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resize)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function Eu(e,t,n){for(;t;){let i=St.get(t);if(i&&i.parent==e)return i;let r=t.parentNode;t=r!=e.dom?r:n>0?t.nextSibling:t.previousSibling}return null}function J0(e){let t=null;function n(h){h.preventDefault(),h.stopImmediatePropagation(),t=h.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let i=t.startContainer,r=t.startOffset,o=t.endContainer,s=t.endOffset,l=e.docView.domAtPos(e.state.selection.main.anchor);return _r(l.node,l.offset,o,s)&&([i,r,o,s]=[o,s,i,r]),{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:s}}function K0(e,t,n,i){let r,o,s=e.state.selection.main;if(t>-1){let l=e.docView.domBoundsAround(t,n,0);if(!l||e.state.readOnly)return!1;let{from:h,to:c}=l,d=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:em(e),f=new Wh(d,e.state);f.readRange(l.startDOM,l.endDOM);let m=s.from,v=null;(e.inputState.lastKeyCode===8&&e.inputState.lastKeyTime>Date.now()-100||J.android&&f.text.length<c-h)&&(m=s.to,v="end");let C=tm(e.state.doc.sliceString(h,c,yn),f.text,m-h,v);C&&(J.chrome&&e.inputState.lastKeyCode==13&&C.toB==C.from+2&&f.text.slice(C.from,C.toB)==yn+yn&&C.toB--,r={from:h+C.from,to:h+C.toA,insert:gt.of(f.text.slice(C.from,C.toB).split(yn))}),o=nm(d,h)}else if(e.hasFocus||!e.state.facet(Fr)){let l=e.observer.selectionRange,{impreciseHead:h,impreciseAnchor:c}=e.docView,d=h&&h.node==l.focusNode&&h.offset==l.focusOffset||!Kn(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),f=c&&c.node==l.anchorNode&&c.offset==l.anchorOffset||!Kn(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);(d!=s.head||f!=s.anchor)&&(o=Y.single(f,d))}if(!r&&!o)return!1;if(!r&&i&&!s.empty&&o&&o.main.empty?r={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,s.to)}:r&&r.from>=s.from&&r.to<=s.to&&(r.from!=s.from||r.to!=s.to)&&s.to-s.from-(r.to-r.from)<=4?r={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,r.from).append(r.insert).append(e.state.doc.slice(r.to,s.to))}:(J.mac||J.android)&&r&&r.from==r.to&&r.from==s.head-1&&r.insert.toString()=="."&&(r={from:s.from,to:s.to,insert:gt.of([" "])}),r){let l=e.state;if(J.ios&&e.inputState.flushIOSKey(e)||J.android&&(r.from==s.from&&r.to==s.to&&r.insert.length==1&&r.insert.lines==2&&Ri(e.contentDOM,"Enter",13)||r.from==s.from-1&&r.to==s.to&&r.insert.length==0&&Ri(e.contentDOM,"Backspace",8)||r.from==s.from&&r.to==s.to+1&&r.insert.length==0&&Ri(e.contentDOM,"Delete",46)))return!0;let h=r.insert.toString();if(e.state.facet(Qh).some(f=>f(e,r.from,r.to,h)))return!0;e.inputState.composing>=0&&e.inputState.composing++;let c;if(r.from>=s.from&&r.to<=s.to&&r.to-r.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==r.from+r.insert.length)&&e.inputState.composing<0){let f=s.from<r.from?l.sliceDoc(s.from,r.from):"",m=s.to>r.to?l.sliceDoc(r.to,s.to):"";c=l.replaceSelection(e.state.toText(f+r.insert.sliceString(0,void 0,e.state.lineBreak)+m))}else{let f=l.changes(r),m=o&&!l.selection.main.eq(o.main)&&o.main.to<=f.newLength?o.main:void 0;if(l.selection.ranges.length>1&&e.inputState.composing>=0&&r.to<=s.to&&r.to>=s.to-10){let v=e.state.sliceDoc(r.from,r.to),C=Uh(e)||e.state.doc.lineAt(s.head),O=s.to-r.to,y=s.to-s.from;c=l.changeByRange(P=>{if(P.from==s.from&&P.to==s.to)return{changes:f,range:m||P.map(f)};let w=P.to-O,D=w-v.length;if(P.to-P.from!=y||e.state.sliceDoc(D,w)!=v||C&&P.to>=C.from&&P.from<=C.to)return{range:P};let A=l.changes({from:D,to:w,insert:r.insert}),_=P.to-s.to;return{changes:A,range:m?Y.range(Math.max(0,m.anchor+_),Math.max(0,m.head+_)):P.map(A)}})}else c={changes:f,selection:m&&l.selection.replaceRange(m)}}let d="input.type";return e.composing&&(d+=".compose",e.inputState.compositionFirstChange&&(d+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(c,{scrollIntoView:!0,userEvent:d}),!0}else if(o&&!o.main.eq(s)){let l=!1,h="select";return e.inputState.lastSelectionTime>Date.now()-50&&(e.inputState.lastSelectionOrigin=="select"&&(l=!0),h=e.inputState.lastSelectionOrigin),e.dispatch({selection:o,scrollIntoView:l,userEvent:h}),!0}else return!1}function tm(e,t,n,i){let r=Math.min(e.length,t.length),o=0;for(;o<r&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==r&&e.length==t.length)return null;let s=e.length,l=t.length;for(;s>0&&l>0&&e.charCodeAt(s-1)==t.charCodeAt(l-1);)s--,l--;if(i=="end"){let h=Math.max(0,o-Math.min(s,l));n-=s+h-o}return s<o&&e.length<t.length?(o-=n<=o&&n>=s?o-n:0,l=o+(l-s),s=o):l<o&&(o-=n<=o&&n>=l?o-n:0,s=o+(s-l),l=o),{from:o,toA:s,toB:l}}function em(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=e.observer.selectionRange;return n&&(t.push(new Zh(n,i)),(r!=n||o!=i)&&t.push(new Zh(r,o))),t}function nm(e,t){if(e.length==0)return null;let n=e[0].pos,i=e.length==2?e[1].pos:n;return n>-1&&i>-1?Y.single(n+t,i+t):null}class tt{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=t.root||Vf(t.parent)||document,this.viewState=new xu(t.state||ft.create(t)),this.plugins=this.state.facet(Mi).map(n=>new Do(n));for(let n of this.plugins)n.update(this);this.observer=new H0(this,(n,i,r)=>K0(this,n,i,r),n=>{this.inputState.runScrollHandlers(this,n),this.observer.intersecting&&this.measure()}),this.inputState=new w0(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new zh(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(t.length==1&&t[0]instanceof Rt?t[0]:this.state.update(...t))}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,o=this.state;for(let l of t){if(l.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=l.state}if(this.destroyed){this.viewState.state=o;return}if(this.observer.clear(),o.facet(ft.phrases)!=this.state.facet(ft.phrases))return this.setState(o);r=Rr.create(this,o,t);let s=this.viewState.scrollTarget;try{this.updateState=2;for(let l of t){if(s&&(s=s.map(l.changes)),l.scrollIntoView){let{main:h}=l.state.selection;s=new Nr(h.empty?h:Y.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of l.effects)h.is(Xh)&&(s=h.value)}this.viewState.update(r,s),this.bidiCache=jr.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Wi)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some(l=>l.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Wr)!=r.state.facet(Wr)&&(this.viewState.mustMeasureContent=!0),(n||i||s||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let l of this.state.facet(Eo))l(r)}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new xu(t),this.plugins=t.facet(Mi).map(i=>new Do(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new zh(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(t){let n=t.startState.facet(Mi),i=t.state.facet(Mi);if(n!=i){let r=[];for(let o of i){let s=n.indexOf(o);if(s<0)r.push(new Do(o));else{let l=this.plugins[s];l.mustUpdate=t,r.push(l)}}for(let o of this.plugins)o.mustUpdate!=t&&o.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=t;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let n=null,{scrollHeight:i,scrollTop:r,clientHeight:o}=this.scrollDOM,s=r>i-o-4?i:r;try{for(let l=0;;l++){this.updateState=1;let h=this.viewport,c=this.viewState.lineBlockAtHeight(s),d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];d&4||([this.measureRequests,f]=[f,this.measureRequests]);let m=f.map(y=>{try{return y.read(this)}catch(P){return ve(this.state,P),Du}}),v=Rr.create(this,this.state,[]),C=!1,O=!1;v.flags|=d,n?n.flags|=d:n=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),C=this.docView.update(v));for(let y=0;y<f.length;y++)if(m[y]!=Du)try{let P=f[y];P.write&&P.write(m[y],this)}catch(P){ve(this.state,P)}if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,O=!0;else{let y=this.viewState.lineBlockAt(c.from).top-c.top;(y>1||y<-1)&&(this.scrollDOM.scrollTop+=y,O=!0)}if(C&&this.docView.updateSelection(!0),this.viewport.from==h.from&&this.viewport.to==h.to&&!O&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(Eo))l(n)}get themeClasses(){return Ro+" "+(this.state.facet(Fo)?wu:Cu)+" "+this.state.facet(Wr)}updateAttrs(){let t=Au(this,$h,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Fr)?"true":"false",class:"cm-content",style:`${J.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Au(this,Nh,n);let i=this.observer.ignore(()=>{let r=Co(this.contentDOM,this.contentAttrs,n),o=Co(this.dom,this.editorAttrs,t);return r||o});return this.editorAttrs=t,this.contentAttrs=n,i}showAnnouncements(t){let n=!0;for(let i of t)for(let r of i.effects)if(r.is(tt.announce)){n&&(this.announceDOM.textContent=""),n=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Wi),fn.mount(this.root,this.styleModules.concat(G0).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(t.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===t.key){this.measureRequests[n]=t;return}}this.measureRequests.push(t)}}plugin(t){let n=this.pluginMap.get(t);return(n===void 0||n&&n.spec!=t)&&this.pluginMap.set(t,n=this.plugins.find(i=>i.spec==t)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,n,i){return Io(this,t,eu(this,t,n,i))}moveByGroup(t,n){return Io(this,t,eu(this,t,n,i=>S0(this,t.head,i)))}moveToLineBoundary(t,n,i=!0){return P0(this,t,n,i)}moveVertically(t,n,i){return Io(this,t,C0(this,t,n,i))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,n=0){return this.docView.posFromDOM(t,n)}posAtCoords(t,n=!0){return this.readMeasured(),Kh(this,t,n)}coordsAtPos(t,n=1){this.readMeasured();let i=this.docView.coordsAt(t,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(t),o=this.bidiSpans(r),s=o[ii.find(o,t-r.from,-1,n)];return Qr(i,s.dir==Dt.LTR==n>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(Lh)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>im)return Mh(t.length);let n=this.textDirectionAt(t.from);for(let r of this.bidiCache)if(r.from==t.from&&r.dir==n)return r.order;let i=a0(t.text,n);return this.bidiCache.push(new jr(t.from,t.to,n,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||J.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{uh(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,n={}){return Xh.of(new Nr(typeof t=="number"?Y.cursor(t):t,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(t){return Qt.define(()=>({}),{eventHandlers:t})}static theme(t,n){let i=fn.newName(),r=[Wr.of(i),Wi.of(Bo(`.${i}`,t))];return n&&n.dark&&r.push(Fo.of(!0)),r}static baseTheme(t){return Qn.lowest(Wi.of(Bo("."+Ro,t,bu)))}static findFromDOM(t){var n;let i=t.querySelector(".cm-content"),r=i&&St.get(i)||St.get(t);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}tt.styleModule=Wi,tt.inputHandler=Qh,tt.perLineTextDirection=Lh,tt.exceptionSink=Ih,tt.updateListener=Eo,tt.editable=Fr,tt.mouseSelectionStyle=_h,tt.dragMovesSelection=kh,tt.clickAddsSelectionRange=Th,tt.decorations=Yi,tt.atomicRanges=Fh,tt.scrollMargins=Rh,tt.darkTheme=Fo,tt.contentAttributes=Nh,tt.editorAttributes=$h,tt.lineWrapping=tt.contentAttributes.of({class:"cm-lineWrapping"}),tt.announce=it.define();const im=4096,Du={};class jr{constructor(t,n,i,r){this.from=t,this.to=n,this.dir=i,this.order=r}static update(t,n){if(n.empty)return t;let i=[],r=t.length?t[t.length-1].dir:Dt.LTR;for(let o=Math.max(0,t.length-10);o<t.length;o++){let s=t[o];s.dir==r&&!n.touchesRange(s.from,s.to)&&i.push(new jr(n.mapPos(s.from,1),n.mapPos(s.to,-1),s.dir,s.order))}return i}}function Au(e,t,n){for(let i=e.state.facet(t),r=i.length-1;r>=0;r--){let o=i[r],s=typeof o=="function"?o(e):o;s&&Po(s,n)}return n}const rm=J.mac?"mac":J.windows?"win":J.linux?"linux":"key";function sm(e,t){const n=e.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,o,s,l;for(let h=0;h<n.length-1;++h){const c=n[h];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))t=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),l&&(i="Meta-"+i),s&&(i="Shift-"+i),i}function Zr(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n!==!1&&t.shiftKey&&(e="Shift-"+e),e}const om=Qn.default(tt.domEventHandlers({keydown(e,t){return _u(ku(t.state),e,t,"editor")}})),Zi=H.define({enables:om}),Tu=new WeakMap;function ku(e){let t=e.facet(Zi),n=Tu.get(t);return n||Tu.set(t,n=hm(t.reduce((i,r)=>i.concat(r),[]))),n}function am(e,t,n){return _u(ku(e.state),t,e,n)}let vn=null;const lm=4e3;function hm(e,t=rm){let n=Object.create(null),i=Object.create(null),r=(s,l)=>{let h=i[s];if(h==null)i[s]=l;else if(h!=l)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,l,h,c)=>{let d=n[s]||(n[s]=Object.create(null)),f=l.split(/ (?!$)/).map(C=>sm(C,t));for(let C=1;C<f.length;C++){let O=f.slice(0,C).join(" ");r(O,!0),d[O]||(d[O]={preventDefault:!0,commands:[y=>{let P=vn={view:y,prefix:O,scope:s};return setTimeout(()=>{vn==P&&(vn=null)},lm),!0}]})}let m=f.join(" ");r(m,!1);let v=d[m]||(d[m]={preventDefault:!1,commands:[]});v.commands.push(h),c&&(v.preventDefault=!0)};for(let s of e){let l=s[t]||s.key;if(l)for(let h of s.scope?s.scope.split(" "):["editor"])o(h,l,s.run,s.preventDefault),s.shift&&o(h,"Shift-"+l,s.shift,s.preventDefault)}return n}function _u(e,t,n,i){let r=Zf(t),o=zt(r,0),s=ye(o)==r.length&&r!=" ",l="",h=!1;vn&&vn.view==n&&vn.scope==i&&(l=vn.prefix+" ",(h=iu.indexOf(t.keyCode)<0)&&(vn=null));let c=v=>{if(v){for(let C of v.commands)if(C(n))return!0;v.preventDefault&&(h=!0)}return!1},d=e[i],f,m;if(d){if(c(d[l+Zr(r,t,!s)]))return!0;if(s&&(t.shiftKey||t.altKey||t.metaKey||o>127)&&(f=mn[t.keyCode])&&f!=r){if(c(d[l+Zr(f,t,!0)])||t.shiftKey&&(m=$i[t.keyCode])!=r&&m!=f&&c(d[l+Zr(m,t,!1)]))return!0}else if(s&&t.shiftKey&&c(d[l+Zr(r,t,!0)]))return!0}return h}const Iu=!J.ios,zi=H.define({combine(e){return We(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,n)=>Math.min(t,n),drawRangeCursor:(t,n)=>t||n})}});function um(e={}){return[zi.of(e),cm,pm]}class Qu{constructor(t,n,i,r,o){this.left=t,this.top=n,this.width=i,this.height=r,this.className=o}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width>=0&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}}const cm=Qt.fromClass(class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=e.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(zi).cursorBlinkRate+"ms"}update(e){let t=e.startState.facet(zi)!=e.state.facet(zi);(t||e.selectionSet||e.geometryChanged||e.viewportChanged)&&this.view.requestMeasure(this.measureReq),e.transactions.some(n=>n.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}readPos(){let{state:e}=this.view,t=e.facet(zi),n=e.selection.ranges.map(r=>r.empty?[]:dm(this.view,r)).reduce((r,o)=>r.concat(o)),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty?!o||Iu:t.drawRangeCursor){let s=fm(this.view,r,o);s&&i.push(s)}}return{rangePieces:n,cursors:i}}drawSel({rangePieces:e,cursors:t}){if(e.length!=this.rangePieces.length||e.some((n,i)=>!n.eq(this.rangePieces[i]))){this.selectionLayer.textContent="";for(let n of e)this.selectionLayer.appendChild(n.draw());this.rangePieces=e}if(t.length!=this.cursors.length||t.some((n,i)=>!n.eq(this.cursors[i]))){let n=this.cursorLayer.children;if(n.length!==t.length){this.cursorLayer.textContent="";for(const i of t)this.cursorLayer.appendChild(i.draw())}else t.forEach((i,r)=>i.adjust(n[r]));this.cursors=t}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),Lu={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Iu&&(Lu[".cm-line"].caretColor="transparent !important");const pm=Qn.highest(tt.theme(Lu));function Xu(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Dt.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function $u(e,t,n){let i=Y.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(i,!0,!0).from),type:vt.Text}}function Nu(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>t||i.to==t&&(i.to==n.to||i.type==vt.Text))return i}return n}function dm(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];let n=Math.max(t.from,e.viewport.from),i=Math.min(t.to,e.viewport.to),r=e.textDirection==Dt.LTR,o=e.contentDOM,s=o.getBoundingClientRect(),l=Xu(e),h=window.getComputedStyle(o.firstChild),c=s.left+parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)),d=s.right-parseInt(h.paddingRight),f=Nu(e,n),m=Nu(e,i),v=f.type==vt.Text?f:null,C=m.type==vt.Text?m:null;if(e.lineWrapping&&(v&&(v=$u(e,n,v)),C&&(C=$u(e,i,C))),v&&C&&v.from==C.from)return y(P(t.from,t.to,v));{let D=v?P(t.from,null,v):w(f,!1),A=C?P(null,t.to,C):w(m,!0),_=[];return(v||f).to<(C||m).from-1?_.push(O(c,D.bottom,d,A.top)):D.bottom<A.top&&e.elementAtHeight((D.bottom+A.top)/2).type==vt.Text&&(D.bottom=A.top=(D.bottom+A.top)/2),y(D).concat(_).concat(y(A))}function O(D,A,_,I){return new Qu(D-l.left,A-l.top-.01,_-D,I-A+.01,"cm-selectionBackground")}function y({top:D,bottom:A,horizontal:_}){let I=[];for(let F=0;F<_.length;F+=2)I.push(O(_[F],D,_[F+1],A));return I}function P(D,A,_){let I=1e9,F=-1e9,q=[];function j(L,M,U,K,st){let lt=e.coordsAtPos(L,L==_.to?-2:2),pt=e.coordsAtPos(U,U==_.from?2:-2);I=Math.min(lt.top,pt.top,I),F=Math.max(lt.bottom,pt.bottom,F),st==Dt.LTR?q.push(r&&M?c:lt.left,r&&K?d:pt.right):q.push(!r&&K?c:pt.left,!r&&M?d:lt.right)}let z=D!=null?D:_.from,B=A!=null?A:_.to;for(let L of e.visibleRanges)if(L.to>z&&L.from<B)for(let M=Math.max(L.from,z),U=Math.min(L.to,B);;){let K=e.state.doc.lineAt(M);for(let st of e.bidiSpans(K)){let lt=st.from+K.from,pt=st.to+K.from;if(lt>=U)break;pt>M&&j(Math.max(lt,M),D==null&&lt<=z,Math.min(pt,U),A==null&&pt>=B,st.dir)}if(M=K.to+1,M>=U)break}return q.length==0&&j(z,D==null,B,A==null,e.textDirection),{top:I,bottom:F,horizontal:q}}function w(D,A){let _=s.top+(A?D.top:D.bottom);return{top:_,bottom:_,horizontal:[]}}}function fm(e,t,n){let i=e.coordsAtPos(t.head,t.assoc||1);if(!i)return null;let r=Xu(e);return new Qu(i.left-r.left,i.top-r.top,-1,i.bottom-i.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const Fu=it.define({map(e,t){return e==null?null:t.mapPos(e)}}),qi=Ft.define({create(){return null},update(e,t){return e!=null&&(e=t.changes.mapPos(e)),t.effects.reduce((n,i)=>i.is(Fu)?i.value:n,e)}}),mm=Qt.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(qi);n==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(qi)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(qi),t=e!=null&&this.view.coordsAtPos(e);if(!t)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(qi)!=e&&this.view.dispatch({effects:Fu.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){(e.target==this.view.contentDOM||!this.view.contentDOM.contains(e.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Om(){return[qi,mm]}function Ru(e,t,n,i,r){t.lastIndex=0;for(let o=e.iterRange(n,i),s=n,l;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;l=t.exec(o.value);)r(s+l.index,l)}function gm(e,t){let n=e.visibleRanges;if(n.length==1&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let i=[];for(let{from:r,to:o}of n)r=Math.max(e.state.doc.lineAt(r).from,r-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}class ym{constructor(t){const{regexp:n,decoration:i,decorate:r,boundary:o,maxLength:s=1e3}=t;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(l,h,c,d)=>r(d,c,c+l[0].length,l,h);else if(typeof i=="function")this.addMatch=(l,h,c,d)=>{let f=i(l,h,c);f&&d(c,c+l[0].length,f)};else if(i)this.addMatch=(l,h,c,d)=>d(c,c+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(t){let n=new dn,i=n.add.bind(n);for(let{from:r,to:o}of gm(t,this.maxLength))Ru(t.state.doc,this.regexp,r,o,(s,l)=>this.addMatch(l,t,s,i));return n.finish()}updateDeco(t,n){let i=1e9,r=-1;return t.docChanged&&t.changes.iterChanges((o,s,l,h)=>{h>t.view.viewport.from&&l<t.view.viewport.to&&(i=Math.min(l,i),r=Math.max(h,r))}),t.viewportChanged||r-i>1e3?this.createDeco(t.view):r>-1?this.updateRange(t.view,n.map(t.changes),i,r):n}updateRange(t,n,i,r){for(let o of t.visibleRanges){let s=Math.max(o.from,i),l=Math.min(o.to,r);if(l>s){let h=t.state.doc.lineAt(s),c=h.to<l?t.state.doc.lineAt(l):h,d=Math.max(o.from,h.from),f=Math.min(o.to,c.to);if(this.boundary){for(;s>h.from;s--)if(this.boundary.test(h.text[s-1-h.from])){d=s;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){f=l;break}}let m=[],v,C=(O,y,P)=>m.push(P.range(O,y));if(h==c)for(this.regexp.lastIndex=d-h.from;(v=this.regexp.exec(h.text))&&v.index<f-h.from;)this.addMatch(v,t,v.index+h.from,C);else Ru(t.state.doc,this.regexp,d,f,(O,y)=>this.addMatch(y,t,O,C));n=n.update({filterFrom:d,filterTo:f,filter:(O,y)=>O<d||y>f,add:m})}}return n}}const Yo=/x/.unicode!=null?"gu":"g",xm=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Yo),vm={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Wo=null;function Pm(){var e;if(Wo==null&&typeof document<"u"&&document.body){let t=document.body.style;Wo=((e=t.tabSize)!==null&&e!==void 0?e:t.MozTabSize)!=null}return Wo||!1}const zr=H.define({combine(e){let t=We(e,{render:null,specialChars:xm,addSpecialChars:null});return(t.replaceTabs=!Pm())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,Yo)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Yo)),t}});function Sm(e={}){return[zr.of(e),Cm()]}let Bu=null;function Cm(){return Bu||(Bu=Qt.fromClass(class{constructor(e){this.view=e,this.decorations=et.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(zr)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new ym({regexp:e.specialChars,decoration:(t,n,i)=>{let{doc:r}=n.state,o=zt(t[0],0);if(o==9){let s=r.lineAt(i),l=n.state.tabSize,h=Xi(s.text,l,i-s.from);return et.replace({widget:new Dm((l-h%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=et.replace({widget:new Em(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(zr);e.startState.facet(zr)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))}const wm="\u2022";function bm(e){return e>=32?wm:e==10?"\u2424":String.fromCharCode(9216+e)}class Em extends sn{constructor(t,n){super(),this.options=t,this.code=n}eq(t){return t.code==this.code}toDOM(t){let n=bm(this.code),i=t.state.phrase("Control character")+" "+(vm[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let o=document.createElement("span");return o.textContent=n,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class Dm extends sn{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function Am(){return km}const Tm=et.line({class:"cm-activeLine"}),km=Qt.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let i of e.state.selection.ranges){let r=e.lineBlockAt(i.head);r.from>t&&(n.push(Tm.range(r.from)),t=r.from)}return et.set(n)}},{decorations:e=>e.decorations}),jo=2e3;function _m(e,t,n){let i=Math.min(t.line,n.line),r=Math.max(t.line,n.line),o=[];if(t.off>jo||n.off>jo||t.col<0||n.col<0){let s=Math.min(t.off,n.off),l=Math.max(t.off,n.off);for(let h=i;h<=r;h++){let c=e.doc.line(h);c.length<=l&&o.push(Y.range(c.from+s,c.to+l))}}else{let s=Math.min(t.col,n.col),l=Math.max(t.col,n.col);for(let h=i;h<=r;h++){let c=e.doc.line(h),d=ho(c.text,s,e.tabSize,!0);if(d>-1){let f=ho(c.text,l,e.tabSize);o.push(Y.range(c.from+d,c.from+f))}}}return o}function Im(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}function Mu(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),i=e.state.doc.lineAt(n),r=n-i.from,o=r>jo?-1:r==i.length?Im(e,t.clientX):Xi(i.text,e.state.tabSize,n-i.from);return{line:i.number,col:o,off:r}}function Qm(e,t){let n=Mu(e,t),i=e.state.selection;return n?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(n.line).from),s=r.state.doc.lineAt(o);n={line:s.number,col:n.col,off:Math.min(n.off,s.length)},i=i.map(r.changes)}},get(r,o,s){let l=Mu(e,r);if(!l)return i;let h=_m(e.state,n,l);return h.length?s?Y.create(h.concat(i.ranges)):Y.create(h):i}}:null}function Lm(e){let t=(e==null?void 0:e.eventFilter)||(n=>n.altKey&&n.button==0);return tt.mouseSelectionStyle.of((n,i)=>t(i)?Qm(n,i):null)}const Xm={Alt:[18,e=>e.altKey],Control:[17,e=>e.ctrlKey],Shift:[16,e=>e.shiftKey],Meta:[91,e=>e.metaKey]},$m={style:"cursor: crosshair"};function Nm(e={}){let[t,n]=Xm[e.key||"Alt"],i=Qt.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventHandlers:{keydown(r){this.set(r.keyCode==t||n(r))},keyup(r){(r.keyCode==t||!n(r))&&this.set(!1)}}});return[i,tt.contentAttributes.of(r=>{var o;return!((o=r.plugin(i))===null||o===void 0)&&o.isDown?$m:null})]}const Zo="-10000px";class Yu{constructor(t,n,i){this.facet=n,this.createTooltipView=i,this.input=t.state.facet(n),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(t){let n=t.state.facet(this.facet),i=n.filter(o=>o);if(n===this.input){for(let o of this.tooltipViews)o.update&&o.update(t);return!1}let r=[];for(let o=0;o<i.length;o++){let s=i[o],l=-1;if(s){for(let h=0;h<this.tooltips.length;h++){let c=this.tooltips[h];c&&c.create==s.create&&(l=h)}if(l<0)r[o]=this.createTooltipView(s);else{let h=r[o]=this.tooltipViews[l];h.update&&h.update(t)}}}for(let o of this.tooltipViews)r.indexOf(o)<0&&o.dom.remove();return this.input=n,this.tooltips=i,this.tooltipViews=r,!0}}function Fm(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const zo=H.define({combine:e=>{var t,n,i;return{position:J.ios?"absolute":((t=e.find(r=>r.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((n=e.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=e.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Fm}}}),Wu=Qt.fromClass(class{constructor(e){this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(zo);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Yu(e,qo,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let n=t||e.geometryChanged,i=e.state.facet(zo);if(i.position!=this.position){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=Zo,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e;this.view.win.removeEventListener("resize",this.measureSoon);for(let{dom:t}of this.manager.tooltipViews)t.remove();(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map((t,n)=>{let i=this.manager.tooltipViews[n];return i.getCoords?i.getCoords(t.pos):this.view.coordsAtPos(t.pos)}),size:this.manager.tooltipViews.map(({dom:t})=>t.getBoundingClientRect()),space:this.view.state.facet(zo).tooltipSpace(this.view)}}writeMeasure(e){let{editor:t,space:n}=e,i=[];for(let r=0;r<this.manager.tooltips.length;r++){let o=this.manager.tooltips[r],s=this.manager.tooltipViews[r],{dom:l}=s,h=e.pos[r],c=e.size[r];if(!h||h.bottom<=Math.max(t.top,n.top)||h.top>=Math.min(t.bottom,n.bottom)||h.right<Math.max(t.left,n.left)-.1||h.left>Math.min(t.right,n.right)+.1){l.style.top=Zo;continue}let d=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,f=d?7:0,m=c.right-c.left,v=c.bottom-c.top,C=s.offset||Bm,O=this.view.textDirection==Dt.LTR,y=c.width>n.right-n.left?O?n.left:n.right-c.width:O?Math.min(h.left-(d?14:0)+C.x,n.right-m):Math.max(n.left,h.left-m+(d?14:0)-C.x),P=!!o.above;!o.strictSide&&(P?h.top-(c.bottom-c.top)-C.y<n.top:h.bottom+(c.bottom-c.top)+C.y>n.bottom)&&P==n.bottom-h.bottom>h.top-n.top&&(P=!P);let w=P?h.top-v-f-C.y:h.bottom+f+C.y,D=y+m;if(s.overlap!==!0)for(let A of i)A.left<D&&A.right>y&&A.top<w+v&&A.bottom>w&&(w=P?A.top-v-2-f:A.bottom+f+2);this.position=="absolute"?(l.style.top=w-e.parent.top+"px",l.style.left=y-e.parent.left+"px"):(l.style.top=w+"px",l.style.left=y+"px"),d&&(d.style.left=`${h.left+(O?C.x:-C.x)-(y+14-7)}px`),s.overlap!==!0&&i.push({left:y,top:w,right:D,bottom:w+v}),l.classList.toggle("cm-tooltip-above",P),l.classList.toggle("cm-tooltip-below",!P),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=Zo}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Rm=tt.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Bm={x:0,y:0},qo=H.define({enables:[Wu,Rm]}),qr=H.define();class Uo{constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Yu(t,qr,n=>this.createHostedView(n))}static create(t){return new Uo(t)}createHostedView(t){let n=t.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(t){for(let n of this.manager.tooltipViews)n.mount&&n.mount(t);this.mounted=!0}positioned(){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned()}update(t){this.manager.update(t)}}const Mm=qo.compute([qr],e=>{let t=e.facet(qr).filter(n=>n);return t.length===0?null:{pos:Math.min(...t.map(n=>n.pos)),end:Math.max(...t.filter(n=>n.end!=null).map(n=>n.end)),create:Uo.create,above:t[0].above,arrow:t.some(n=>n.arrow)}});class Ym{constructor(t,n,i,r,o){this.view=t,this.source=n,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:t}=this,n=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(n==null)return;let i=this.view.coordsAtPos(n);if(i==null||t.y<i.top||t.y>i.bottom||t.x<i.left-this.view.defaultCharacterWidth||t.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(l=>l.from<=n&&l.to>=n),o=r&&r.dir==Dt.RTL?-1:1,s=this.source(this.view,n,t.x<i.left?-o:o);if(s!=null&&s.then){let l=this.pending={pos:n};s.then(h=>{this.pending==l&&(this.pending=null,h&&this.view.dispatch({effects:this.setHover.of(h)}))},h=>ve(this.view.state,h,"hover tooltip"))}else s&&this.view.dispatch({effects:this.setHover.of(s)})}mousemove(t){var n;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!Wm(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,o=(n=i==null?void 0:i.end)!==null&&n!==void 0?n:r;(r==o?this.view.posAtCoords(this.lastMove)!=r:!jm(this.view,r,o,t.clientX,t.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Wm(e){for(let t=e;t;t=t.parentNode)if(t.nodeType==1&&t.classList.contains("cm-tooltip"))return!0;return!1}function jm(e,t,n,i,r,o){let s=document.createRange(),l=e.domAtPos(t),h=e.domAtPos(n);s.setEnd(h.node,h.offset),s.setStart(l.node,l.offset);let c=s.getClientRects();s.detach();for(let d=0;d<c.length;d++){let f=c[d];if(Math.max(f.top-r,r-f.bottom,f.left-i,i-f.right)<=o)return!0}return!1}function Zm(e,t={}){let n=it.define(),i=Ft.define({create(){return null},update(r,o){if(r&&(t.hideOnChange&&(o.docChanged||o.selection)||t.hideOn&&t.hideOn(o,r)))return null;if(r&&o.docChanged){let s=o.changes.mapPos(r.pos,-1,qt.TrackDel);if(s==null)return null;let l=Object.assign(Object.create(null),r);l.pos=s,r.end!=null&&(l.end=o.changes.mapPos(r.end)),r=l}for(let s of o.effects)s.is(n)&&(r=s.value),s.is(qm)&&(r=null);return r},provide:r=>qr.from(r)});return[i,Qt.define(r=>new Ym(r,e,i,n,t.hoverTime||300)),Mm]}function zm(e,t){let n=e.plugin(Wu);if(!n)return null;let i=n.manager.tooltips.indexOf(t);return i<0?null:n.manager.tooltipViews[i]}const qm=it.define(),ju=H.define({combine(e){let t,n;for(let i of e)t=t||i.topContainer,n=n||i.bottomContainer;return{topContainer:t,bottomContainer:n}}});function Ui(e,t){let n=e.plugin(Zu),i=n?n.specs.indexOf(t):-1;return i>-1?n.panels[i]:null}const Zu=Qt.fromClass(class{constructor(e){this.input=e.state.facet(Gi),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(e));let t=e.state.facet(ju);this.top=new Ur(e,!0,t.topContainer),this.bottom=new Ur(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(e){let t=e.state.facet(ju);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Ur(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ur(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(Gi);if(n!=this.input){let i=n.filter(h=>h),r=[],o=[],s=[],l=[];for(let h of i){let c=this.specs.indexOf(h),d;c<0?(d=h(e.view),l.push(d)):(d=this.panels[c],d.update&&d.update(e)),r.push(d),(d.top?o:s).push(d)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let h of l)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let i of this.panels)i.update&&i.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>tt.scrollMargins.of(t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Ur{constructor(t,n,i){this.view=t,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let n of this.panels)n.destroy&&t.indexOf(n)<0&&n.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let t=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;t!=n.dom;)t=zu(t);t=t.nextSibling}else this.dom.insertBefore(n.dom,t);for(;t;)t=zu(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function zu(e){let t=e.nextSibling;return e.remove(),t}const Gi=H.define({enables:Zu});class an extends Xn{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}an.prototype.elementClass="",an.prototype.toDOM=void 0,an.prototype.mapMode=qt.TrackBefore,an.prototype.startSide=an.prototype.endSide=-1,an.prototype.point=!0;const Gr=H.define(),Um={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>yt.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Vi=H.define();function Gm(e){return[qu(),Vi.of(Object.assign(Object.assign({},Um),e))]}const Go=H.define({combine:e=>e.some(t=>t)});function qu(e){let t=[Vm];return e&&e.fixed===!1&&t.push(Go.of(!0)),t}const Vm=Qt.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(Vi).map(t=>new Vu(e,t));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!e.state.facet(Go),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,i=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Go)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=yt.iter(this.view.state.facet(Gr),this.view.viewport.from),i=[],r=this.gutters.map(o=>new Hm(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks){let s;if(Array.isArray(o.type)){for(let l of o.type)if(l.type==vt.Text){s=l;break}}else s=o.type==vt.Text?o:void 0;if(s){i.length&&(i=[]),Gu(n,i,o.from);for(let l of r)l.line(this.view,s,i)}}for(let o of r)o.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(Vi),n=e.state.facet(Vi),i=e.docChanged||e.heightChanged||e.viewportChanged||!yt.eq(e.startState.facet(Gr),e.state.facet(Gr),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let r of this.gutters)r.update(e)&&(i=!0);else{i=!0;let r=[];for(let o of n){let s=t.indexOf(o);s<0?r.push(new Vu(this.view,o)):(this.gutters[s].update(e),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>tt.scrollMargins.of(t=>{let n=t.plugin(e);return!n||n.gutters.length==0||!n.fixed?null:t.textDirection==Dt.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function Uu(e){return Array.isArray(e)?e:[e]}function Gu(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class Hm{constructor(t,n,i){this.gutter=t,this.height=i,this.localMarkers=[],this.i=0,this.cursor=yt.iter(t.markers,n.from)}line(t,n,i){this.localMarkers.length&&(this.localMarkers=[]),Gu(this.cursor,this.localMarkers,n.from);let r=i.length?this.localMarkers.concat(i):this.localMarkers,o=this.gutter.config.lineMarker(t,n,r);o&&r.unshift(o);let s=this.gutter;if(r.length==0&&!s.config.renderEmptyElements)return;let l=n.top-this.height;if(this.i==s.elements.length){let h=new Hu(t,n.height,l,r);s.elements.push(h),s.dom.appendChild(h.dom)}else s.elements[this.i].update(t,n.height,l,r);this.height=n.bottom,this.i++}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let n=t.elements.pop();t.dom.removeChild(n.dom),n.destroy()}}}class Vu{constructor(t,n){this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let o=t.lineBlockAtHeight(r.clientY-t.documentTop);n.domEventHandlers[i](t,o,r)&&r.preventDefault()});this.markers=Uu(n.markers(t)),n.initialSpacer&&(this.spacer=new Hu(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let n=this.markers;if(this.markers=Uu(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],t);r!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[r])}let i=t.view.viewport;return!yt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class Hu{constructor(t,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,i,r)}update(t,n,i,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Jm(this.markers,r)||this.setMarkers(t,r)}setMarkers(t,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let l=s,h=o<n.length?n[o++]:null,c=!1;if(h){let d=h.elementClass;d&&(i+=" "+d);for(let f=s;f<this.markers.length;f++)if(this.markers[f].compare(h)){l=f,c=!0;break}}else l=this.markers.length;for(;s<l;){let d=this.markers[s++];if(d.toDOM){d.destroy(r);let f=r.nextSibling;r.remove(),r=f}}if(!h)break;h.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(h.toDOM(t),r)),c&&s++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function Jm(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}const Km=H.define(),ri=H.define({combine(e){return We(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,n){let i=Object.assign({},t);for(let r in n){let o=i[r],s=n[r];i[r]=o?(l,h,c)=>o(l,h,c)||s(l,h,c):s}return i}})}});class Vo extends an{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function Ho(e,t){return e.state.facet(ri).formatNumber(t,e.state)}const tO=Vi.compute([ri],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(Km)},lineMarker(t,n,i){return i.some(r=>r.toDOM)?null:new Vo(Ho(t,t.state.doc.lineAt(n.from).number))},lineMarkerChange:t=>t.startState.facet(ri)!=t.state.facet(ri),initialSpacer(t){return new Vo(Ho(t,Ju(t.state.doc.lines)))},updateSpacer(t,n){let i=Ho(n.view,Ju(n.view.state.doc.lines));return i==t.number?t:new Vo(i)},domEventHandlers:e.facet(ri).domEventHandlers}));function eO(e={}){return[ri.of(e),qu(),tO]}function Ju(e){let t=9;for(;t<e;)t=t*10+9;return t}const nO=new class extends an{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},iO=Gr.compute(["selection"],e=>{let t=[],n=-1;for(let i of e.selection.ranges){let r=e.doc.lineAt(i.head).from;r>n&&(n=r,t.push(nO.range(r)))}return yt.of(t)});function rO(){return iO}const Ku=1024;let sO=0;class Jo{constructor(t,n){this.from=t,this.to=n}}class ut{constructor(t={}){this.id=sO++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=de.match(t)),n=>{let i=t(n);return i===void 0?null:[this,i]}}}ut.closedBy=new ut({deserialize:e=>e.split(" ")}),ut.openedBy=new ut({deserialize:e=>e.split(" ")}),ut.group=new ut({deserialize:e=>e.split(" ")}),ut.contextHash=new ut({perNode:!0}),ut.lookAhead=new ut({perNode:!0}),ut.mounted=new ut({perNode:!0});const oO=Object.create(null);class de{constructor(t,n,i,r=0){this.name=t,this.props=n,this.id=i,this.flags=r}static define(t){let n=t.props&&t.props.length?Object.create(null):oO,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),r=new de(t.name||"",n,t.id,i);if(t.props){for(let o of t.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[o[0].id]=o[1]}}return r}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let n=this.prop(ut.group);return n?n.indexOf(t)>-1:!1}return this.id==t}static match(t){let n=Object.create(null);for(let i in t)for(let r of i.split(" "))n[r]=t[i];return i=>{for(let r=i.prop(ut.group),o=-1;o<(r?r.length:0);o++){let s=n[o<0?i.name:r[o]];if(s)return s}}}}de.none=new de("",Object.create(null),0,8);class Ko{constructor(t){this.types=t;for(let n=0;n<t.length;n++)if(t[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let n=[];for(let i of this.types){let r=null;for(let o of t){let s=o(i);s&&(r||(r=Object.assign({},i.props)),r[s[0].id]=s[1])}n.push(r?new de(i.name,r,i.id,i.flags):i)}return new Ko(n)}}const Vr=new WeakMap,tc=new WeakMap;var Wt;(function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"})(Wt||(Wt={}));class Lt{constructor(t,n,i,r,o){if(this.type=t,this.children=n,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,l]of o)this.props[typeof s=="number"?s:s.id]=l}}toString(){let t=this.prop(ut.mounted);if(t&&!t.overlay)return t.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(t=0){return new Kr(this.topNode,t)}cursorAt(t,n=0,i=0){let r=Vr.get(this)||this.topNode,o=new Kr(r);return o.moveTo(t,n),Vr.set(this,o._tree),o}get topNode(){return new Xe(this,0,0,null)}resolve(t,n=0){let i=si(Vr.get(this)||this.topNode,t,n,!1);return Vr.set(this,i),i}resolveInner(t,n=0){let i=si(tc.get(this)||this.topNode,t,n,!0);return tc.set(this,i),i}iterate(t){let{enter:n,leave:i,from:r=0,to:o=this.length}=t;for(let s=this.cursor((t.mode||0)|Wt.IncludeAnonymous);;){let l=!1;if(s.from<=o&&s.to>=r&&(s.type.isAnonymous||n(s)!==!1)){if(s.firstChild())continue;l=!0}for(;l&&i&&!s.type.isAnonymous&&i(s),!s.nextSibling();){if(!s.parent())return;l=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let n in this.props)t.push([+n,this.props[n]]);return t}balance(t={}){return this.children.length<=8?this:na(de.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new Lt(this.type,n,i,r,this.propValues),t.makeTree||((n,i,r)=>new Lt(de.none,n,i,r)))}static build(t){return lO(t)}}Lt.empty=new Lt(de.none,[],[],0);class ta{constructor(t,n){this.buffer=t,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ta(this.buffer,this.index)}}class Fn{constructor(t,n,i){this.buffer=t,this.length=n,this.set=i}get type(){return de.none}toString(){let t=[];for(let n=0;n<this.buffer.length;)t.push(this.childString(n)),n=this.buffer[n+3];return t.join(",")}childString(t){let n=this.buffer[t],i=this.buffer[t+3],r=this.set.types[n],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),t+=4,i==t)return o;let s=[];for(;t<i;)s.push(this.childString(t)),t=this.buffer[t+3];return o+"("+s.join(",")+")"}findChild(t,n,i,r,o){let{buffer:s}=this,l=-1;for(let h=t;h!=n&&!(ec(o,r,s[h+1],s[h+2])&&(l=h,i>0));h=s[h+3]);return l}slice(t,n,i,r){let o=this.buffer,s=new Uint16Array(n-t);for(let l=t,h=0;l<n;)s[h++]=o[l++],s[h++]=o[l++]-i,s[h++]=o[l++]-i,s[h++]=o[l++]-t;return new Fn(s,r-i,this.set)}}function ec(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function nc(e,t){let n=e.childBefore(t);for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(e=n,n=i.prevSibling):n=i}return e}function si(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let s=!i&&e instanceof Xe&&e.index<0?null:e.parent;if(!s)return e;e=s}let o=i?0:Wt.IgnoreOverlays;if(i)for(let s=e,l=s.parent;l;s=l,l=s.parent)s instanceof Xe&&s.index<0&&((r=l.enter(t,n,o))===null||r===void 0?void 0:r.from)!=s.from&&(e=l);for(;;){let s=e.enter(t,n,o);if(!s)return e;e=s}}class Xe{constructor(t,n,i,r){this._tree=t,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,n,i,r,o=0){for(let s=this;;){for(let{children:l,positions:h}=s._tree,c=n>0?l.length:-1;t!=c;t+=n){let d=l[t],f=h[t]+s.from;if(ec(r,i,f,f+d.length)){if(d instanceof Fn){if(o&Wt.ExcludeBuffers)continue;let m=d.findChild(0,d.buffer.length,n,i-f,r);if(m>-1)return new ze(new aO(s,d,t,f),null,m)}else if(o&Wt.IncludeAnonymous||!d.type.isAnonymous||ea(d)){let m;if(!(o&Wt.IgnoreMounts)&&d.props&&(m=d.prop(ut.mounted))&&!m.overlay)return new Xe(m.tree,f,t,s);let v=new Xe(d,f,t,s);return o&Wt.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(n<0?d.children.length-1:0,n,i,r)}}}if(o&Wt.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?t=s.index+n:t=n<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,n,i=0){let r;if(!(i&Wt.IgnoreOverlays)&&(r=this._tree.prop(ut.mounted))&&r.overlay){let o=t-this.from;for(let{from:s,to:l}of r.overlay)if((n>0?s<=o:s<o)&&(n<0?l>=o:l>o))return new Xe(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,n,i)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(t=0){return new Kr(this,t)}get tree(){return this._tree}toTree(){return this._tree}resolve(t,n=0){return si(this,t,n,!1)}resolveInner(t,n=0){return si(this,t,n,!0)}enterUnfinishedNodesBefore(t){return nc(this,t)}getChild(t,n=null,i=null){let r=Hr(this,t,n,i);return r.length?r[0]:null}getChildren(t,n=null,i=null){return Hr(this,t,n,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return Jr(this,t)}}function Hr(e,t,n,i){let r=e.cursor(),o=[];if(!r.firstChild())return o;if(n!=null){for(;!r.type.is(n);)if(!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(t)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function Jr(e,t,n=t.length-1){for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class aO{constructor(t,n,i,r){this.parent=t,this.buffer=n,this.index=i,this.start=r}}class ze{constructor(t,n,i){this.context=t,this._parent=n,this.index=i,this.type=t.buffer.set.types[t.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(t,n,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t,n-this.context.start,i);return o<0?null:new ze(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,n,i=0){if(i&Wt.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,t-this.context.start,n);return o<0?null:new ze(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,n=t.buffer[this.index+3];return n<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new ze(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new ze(this.context,this._parent,t.findChild(n,this.index,-1,0,4))}cursor(t=0){return new Kr(this,t)}get tree(){return null}toTree(){let t=[],n=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let s=i.buffer[this.index+1],l=i.buffer[this.index+2];t.push(i.slice(r,o,s,l)),n.push(0)}return new Lt(this.type,t,n,this.to-this.from)}resolve(t,n=0){return si(this,t,n,!1)}resolveInner(t,n=0){return si(this,t,n,!0)}enterUnfinishedNodesBefore(t){return nc(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t,n=null,i=null){let r=Hr(this,t,n,i);return r.length?r[0]:null}getChildren(t,n=null,i=null){return Hr(this,t,n,i)}get node(){return this}matchContext(t){return Jr(this,t)}}class Kr{constructor(t,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Xe)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let i=t._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=t,this.yieldBuf(t.index)}}get name(){return this.type.name}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,n){this.index=t;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[t]],this.from=i+r.buffer[t+1],this.to=i+r.buffer[t+2],!0}yield(t){return t?t instanceof Xe?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,n,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],t,n-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,n,i=this.mode){return this.buffer?i&Wt.ExcludeBuffers?!1:this.enterChild(1,t,n):this.yield(this._tree.enter(t,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Wt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Wt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(t<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let n,i,{buffer:r}=this;if(r){if(t>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let o=n+t,s=t<0?-1:i._tree.children.length;o!=s;o+=t){let l=i._tree.children[o];if(this.mode&Wt.IncludeAnonymous||l instanceof Fn||!l.type.isAnonymous||ea(l))return!1}return!0}move(t,n){if(n&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,n=0){for(;(this.from==this.to||(n<1?this.from>=t:this.from>t)||(n>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,n););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,n=null,i=0;if(t&&t.context==this.buffer){t:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=t;s;s=s._parent)if(s.index==r){if(r==this.index)return s;n=s,i=o+1;break t}r=this.stack[--o]}}for(let r=i;r<this.stack.length;r++)n=new ze(this.buffer,n,this.stack[r]);return this.bufferNode=new ze(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&n&&n(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(t){if(!this.buffer)return Jr(this.node,t);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=t.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return Jr(this.node,t,r);let s=i[n.buffer[this.stack[o]]];if(!s.isAnonymous){if(t[r]&&t[r]!=s.name)return!1;r--}}return!0}}function ea(e){return e.children.some(t=>t instanceof Fn||!t.type.isAnonymous||ea(t))}function lO(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=Ku,reused:o=[],minRepeatType:s=i.types.length}=e,l=Array.isArray(n)?new ta(n,n.length):n,h=i.types,c=0,d=0;function f(A,_,I,F,q){let{id:j,start:z,end:B,size:L}=l,M=d;for(;L<0;)if(l.next(),L==-1){let pt=o[j];I.push(pt),F.push(z-A);return}else if(L==-3){c=j;return}else if(L==-4){d=j;return}else throw new RangeError(`Unrecognized record size: ${L}`);let U=h[j],K,st,lt=z-A;if(B-z<=r&&(st=O(l.pos-_,q))){let pt=new Uint16Array(st.size-st.skip),mt=l.pos-st.size,dt=pt.length;for(;l.pos>mt;)dt=y(st.start,pt,dt);K=new Fn(pt,B-st.start,i),lt=st.start-A}else{let pt=l.pos-L;l.next();let mt=[],dt=[],bt=j>=s?j:-1,wt=0,Tt=B;for(;l.pos>pt;)bt>=0&&l.id==bt&&l.size>=0?(l.end<=Tt-r&&(v(mt,dt,z,wt,l.end,Tt,bt,M),wt=mt.length,Tt=l.end),l.next()):f(z,pt,mt,dt,bt);if(bt>=0&&wt>0&&wt<mt.length&&v(mt,dt,z,wt,z,Tt,bt,M),mt.reverse(),dt.reverse(),bt>-1&&wt>0){let ie=m(U);K=na(U,mt,dt,0,mt.length,0,B-z,ie,ie)}else K=C(U,mt,dt,B-z,M-B)}I.push(K),F.push(lt)}function m(A){return(_,I,F)=>{let q=0,j=_.length-1,z,B;if(j>=0&&(z=_[j])instanceof Lt){if(!j&&z.type==A&&z.length==F)return z;(B=z.prop(ut.lookAhead))&&(q=I[j]+z.length+B)}return C(A,_,I,F,q)}}function v(A,_,I,F,q,j,z,B){let L=[],M=[];for(;A.length>F;)L.push(A.pop()),M.push(_.pop()+I-q);A.push(C(i.types[z],L,M,j-q,B-j)),_.push(q-I)}function C(A,_,I,F,q=0,j){if(c){let z=[ut.contextHash,c];j=j?[z].concat(j):[z]}if(q>25){let z=[ut.lookAhead,q];j=j?[z].concat(j):[z]}return new Lt(A,_,I,F,j)}function O(A,_){let I=l.fork(),F=0,q=0,j=0,z=I.end-r,B={size:0,start:0,skip:0};t:for(let L=I.pos-A;I.pos>L;){let M=I.size;if(I.id==_&&M>=0){B.size=F,B.start=q,B.skip=j,j+=4,F+=4,I.next();continue}let U=I.pos-M;if(M<0||U<L||I.start<z)break;let K=I.id>=s?4:0,st=I.start;for(I.next();I.pos>U;){if(I.size<0)if(I.size==-3)K+=4;else break t;else I.id>=s&&(K+=4);I.next()}q=st,F+=M,j+=K}return(_<0||F==A)&&(B.size=F,B.start=q,B.skip=j),B.size>4?B:void 0}function y(A,_,I){let{id:F,start:q,end:j,size:z}=l;if(l.next(),z>=0&&F<s){let B=I;if(z>4){let L=l.pos-(z-4);for(;l.pos>L;)I=y(A,_,I)}_[--I]=B,_[--I]=j-A,_[--I]=q-A,_[--I]=F}else z==-3?c=F:z==-4&&(d=F);return I}let P=[],w=[];for(;l.pos>0;)f(e.start||0,e.bufferStart||0,P,w,-1);let D=(t=e.length)!==null&&t!==void 0?t:P.length?w[0]+P[0].length:0;return new Lt(h[e.topID],P.reverse(),w.reverse(),D)}const ic=new WeakMap;function ts(e,t){if(!e.isAnonymous||t instanceof Fn||t.type!=e)return 1;let n=ic.get(t);if(n==null){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof Lt)){n=1;break}n+=ts(e,i)}ic.set(t,n)}return n}function na(e,t,n,i,r,o,s,l,h){let c=0;for(let C=i;C<r;C++)c+=ts(e,t[C]);let d=Math.ceil(c*1.5/8),f=[],m=[];function v(C,O,y,P,w){for(let D=y;D<P;){let A=D,_=O[D],I=ts(e,C[D]);for(D++;D<P;D++){let F=ts(e,C[D]);if(I+F>=d)break;I+=F}if(D==A+1){if(I>d){let F=C[A];v(F.children,F.positions,0,F.children.length,O[A]+w);continue}f.push(C[A])}else{let F=O[D-1]+C[D-1].length-_;f.push(na(e,C,O,A,D,_,F,null,h))}m.push(_+w-o)}}return v(t,n,i,r,0),(l||h)(f,m,s)}class hO{constructor(){this.map=new WeakMap}setBuffer(t,n,i){let r=this.map.get(t);r||this.map.set(t,r=new Map),r.set(n,i)}getBuffer(t,n){let i=this.map.get(t);return i&&i.get(n)}set(t,n){t instanceof ze?this.setBuffer(t.context.buffer,t.index,n):t instanceof Xe&&this.map.set(t.tree,n)}get(t){return t instanceof ze?this.getBuffer(t.context.buffer,t.index):t instanceof Xe?this.map.get(t.tree):void 0}cursorSet(t,n){t.buffer?this.setBuffer(t.buffer.buffer,t.index,n):this.map.set(t.tree,n)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class Rn{constructor(t,n,i,r,o=!1,s=!1){this.from=t,this.to=n,this.tree=i,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,n=[],i=!1){let r=[new Rn(0,t.length,t,0,!1,i)];for(let o of n)o.to>t.length&&r.push(o);return r}static applyChanges(t,n,i=128){if(!n.length)return t;let r=[],o=1,s=t.length?t[0]:null;for(let l=0,h=0,c=0;;l++){let d=l<n.length?n[l]:null,f=d?d.fromA:1e9;if(f-h>=i)for(;s&&s.from<f;){let m=s;if(h>=m.from||f<=m.to||c){let v=Math.max(m.from,h)-c,C=Math.min(m.to,f)-c;m=v>=C?null:new Rn(v,C,m.tree,m.offset+c,l>0,!!d)}if(m&&r.push(m),s.to>f)break;s=o<t.length?t[o++]:null}if(!d)break;h=d.toA,c=d.toA-d.toB}return r}}class rc{startParse(t,n,i){return typeof t=="string"&&(t=new uO(t)),i=i?i.length?i.map(r=>new Jo(r.from,r.to)):[new Jo(0,0)]:[new Jo(0,t.length)],this.createParse(t,n||[],i)}parse(t,n,i){let r=this.startParse(t,n,i);for(;;){let o=r.advance();if(o)return o}}}class uO{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,n){return this.string.slice(t,n)}}new ut({perNode:!0});let cO=0;class qe{constructor(t,n,i){this.set=t,this.base=n,this.modified=i,this.id=cO++}static define(t){if(t!=null&&t.base)throw new Error("Can not derive from a modified tag");let n=new qe([],null,[]);if(n.set.push(n),t)for(let i of t.set)n.set.push(i);return n}static defineModifier(){let t=new es;return n=>n.modified.indexOf(t)>-1?n:es.get(n.base||n,n.modified.concat(t).sort((i,r)=>i.id-r.id))}}let pO=0;class es{constructor(){this.instances=[],this.id=pO++}static get(t,n){if(!n.length)return t;let i=n[0].instances.find(l=>l.base==t&&dO(n,l.modified));if(i)return i;let r=[],o=new qe(r,t,n);for(let l of n)l.instances.push(o);let s=sc(n);for(let l of t.set)for(let h of s)r.push(es.get(l,h));return o}}function dO(e,t){return e.length==t.length&&e.every((n,i)=>n==t[i])}function sc(e){let t=[e];for(let n=0;n<e.length;n++)for(let i of sc(e.slice(0,n).concat(e.slice(n+1))))t.push(i);return t}function oc(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let o=[],s=2,l=r;for(let f=0;;){if(l=="..."&&f>0&&f+3==r.length){s=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!m)throw new RangeError("Invalid path: "+r);if(o.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),f+=m[0].length,f==r.length)break;let v=r[f++];if(f==r.length&&v=="!"){s=0;break}if(v!="/")throw new RangeError("Invalid path: "+r);l=r.slice(f)}let h=o.length-1,c=o[h];if(!c)throw new RangeError("Invalid path: "+r);let d=new fO(i,s,h>0?o.slice(0,h):null);t[c]=d.sort(t[c])}}return ac.add(t)}const ac=new ut;class fO{constructor(t,n,i,r){this.tags=t,this.mode=n,this.context=i,this.next=r}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function lc(e,t){let n=Object.create(null);for(let o of e)if(!Array.isArray(o.tag))n[o.tag.id]=o.class;else for(let s of o.tag)n[s.id]=o.class;let{scope:i,all:r=null}=t||{};return{style:o=>{let s=r;for(let l of o)for(let h of l.set){let c=n[h.id];if(c){s=s?s+" "+c:c;break}}return s},scope:i}}function mO(e,t){let n=null;for(let i of e){let r=i.style(t);r&&(n=n?n+" "+r:r)}return n}function OO(e,t,n,i=0,r=e.length){let o=new gO(i,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),i,r,"",o.highlighters),o.flush(r)}class gO{constructor(t,n,i){this.at=t,this.highlighters=n,this.span=i,this.class=""}startSpan(t,n){n!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=n)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,n,i,r,o){let{type:s,from:l,to:h}=t;if(l>=i||h<=n)return;s.isTop&&(o=this.highlighters.filter(v=>!v.scope||v.scope(s)));let c=r,d=s.prop(ac),f=!1;for(;d;){if(!d.context||t.matchContext(d.context)){let v=mO(o,d.tags);v&&(c&&(c+=" "),c+=v,d.mode==1?r+=(r?" ":"")+v:d.mode==0&&(f=!0));break}d=d.next}if(this.startSpan(t.from,c),f)return;let m=t.tree&&t.tree.prop(ut.mounted);if(m&&m.overlay){let v=t.node.enter(m.overlay[0].from+l,1),C=this.highlighters.filter(y=>!y.scope||y.scope(m.tree.type)),O=t.firstChild();for(let y=0,P=l;;y++){let w=y<m.overlay.length?m.overlay[y]:null,D=w?w.from+l:h,A=Math.max(n,P),_=Math.min(i,D);if(A<_&&O)for(;t.from<_&&(this.highlightRange(t,A,_,r,o),this.startSpan(Math.min(i,t.to),c),!(t.to>=D||!t.nextSibling())););if(!w||D>i)break;P=w.to+l,P>n&&(this.highlightRange(v.cursor(),Math.max(n,w.from+l),Math.min(i,P),r,C),this.startSpan(P,c))}O&&t.parent()}else if(t.firstChild()){do if(!(t.to<=n)){if(t.from>=i)break;this.highlightRange(t,n,i,r,o),this.startSpan(Math.min(i,t.to),c)}while(t.nextSibling());t.parent()}}}const G=qe.define,ns=G(),Pn=G(),hc=G(Pn),uc=G(Pn),Sn=G(),is=G(Sn),ia=G(Sn),Ue=G(),Bn=G(Ue),Ge=G(),Ve=G(),ra=G(),Hi=G(ra),rs=G(),N={comment:ns,lineComment:G(ns),blockComment:G(ns),docComment:G(ns),name:Pn,variableName:G(Pn),typeName:hc,tagName:G(hc),propertyName:uc,attributeName:G(uc),className:G(Pn),labelName:G(Pn),namespace:G(Pn),macroName:G(Pn),literal:Sn,string:is,docString:G(is),character:G(is),attributeValue:G(is),number:ia,integer:G(ia),float:G(ia),bool:G(Sn),regexp:G(Sn),escape:G(Sn),color:G(Sn),url:G(Sn),keyword:Ge,self:G(Ge),null:G(Ge),atom:G(Ge),unit:G(Ge),modifier:G(Ge),operatorKeyword:G(Ge),controlKeyword:G(Ge),definitionKeyword:G(Ge),moduleKeyword:G(Ge),operator:Ve,derefOperator:G(Ve),arithmeticOperator:G(Ve),logicOperator:G(Ve),bitwiseOperator:G(Ve),compareOperator:G(Ve),updateOperator:G(Ve),definitionOperator:G(Ve),typeOperator:G(Ve),controlOperator:G(Ve),punctuation:ra,separator:G(ra),bracket:Hi,angleBracket:G(Hi),squareBracket:G(Hi),paren:G(Hi),brace:G(Hi),content:Ue,heading:Bn,heading1:G(Bn),heading2:G(Bn),heading3:G(Bn),heading4:G(Bn),heading5:G(Bn),heading6:G(Bn),contentSeparator:G(Ue),list:G(Ue),quote:G(Ue),emphasis:G(Ue),strong:G(Ue),link:G(Ue),monospace:G(Ue),strikethrough:G(Ue),inserted:G(),deleted:G(),changed:G(),invalid:G(),meta:rs,documentMeta:G(rs),annotation:G(rs),processingInstruction:G(rs),definition:qe.defineModifier(),constant:qe.defineModifier(),function:qe.defineModifier(),standard:qe.defineModifier(),local:qe.defineModifier(),special:qe.defineModifier()};lc([{tag:N.link,class:"tok-link"},{tag:N.heading,class:"tok-heading"},{tag:N.emphasis,class:"tok-emphasis"},{tag:N.strong,class:"tok-strong"},{tag:N.keyword,class:"tok-keyword"},{tag:N.atom,class:"tok-atom"},{tag:N.bool,class:"tok-bool"},{tag:N.url,class:"tok-url"},{tag:N.labelName,class:"tok-labelName"},{tag:N.inserted,class:"tok-inserted"},{tag:N.deleted,class:"tok-deleted"},{tag:N.literal,class:"tok-literal"},{tag:N.string,class:"tok-string"},{tag:N.number,class:"tok-number"},{tag:[N.regexp,N.escape,N.special(N.string)],class:"tok-string2"},{tag:N.variableName,class:"tok-variableName"},{tag:N.local(N.variableName),class:"tok-variableName tok-local"},{tag:N.definition(N.variableName),class:"tok-variableName tok-definition"},{tag:N.special(N.variableName),class:"tok-variableName2"},{tag:N.definition(N.propertyName),class:"tok-propertyName tok-definition"},{tag:N.typeName,class:"tok-typeName"},{tag:N.namespace,class:"tok-namespace"},{tag:N.className,class:"tok-className"},{tag:N.macroName,class:"tok-macroName"},{tag:N.propertyName,class:"tok-propertyName"},{tag:N.operator,class:"tok-operator"},{tag:N.comment,class:"tok-comment"},{tag:N.meta,class:"tok-meta"},{tag:N.invalid,class:"tok-invalid"},{tag:N.punctuation,class:"tok-punctuation"}]);var sa;const Ji=new ut;function yO(e){return H.define({combine:e?t=>t.concat(e):void 0})}class Ee{constructor(t,n,i=[]){this.data=t,ft.prototype.hasOwnProperty("tree")||Object.defineProperty(ft.prototype,"tree",{get(){return _t(this)}}),this.parser=n,this.extension=[Cn.of(this),ft.languageData.of((r,o,s)=>r.facet(cc(r,o,s)))].concat(i)}isActiveAt(t,n,i=-1){return cc(t,n,i)==this.data}findRegions(t){let n=t.facet(Cn);if((n==null?void 0:n.data)==this.data)return[{from:0,to:t.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(o,s)=>{if(o.prop(Ji)==this.data){i.push({from:s,to:s+o.length});return}let l=o.prop(ut.mounted);if(l){if(l.tree.prop(Ji)==this.data){if(l.overlay)for(let h of l.overlay)i.push({from:h.from+s,to:h.to+s});else i.push({from:s,to:s+o.length});return}else if(l.overlay){let h=i.length;if(r(l.tree,l.overlay[0].from+s),i.length>h)return}}for(let h=0;h<o.children.length;h++){let c=o.children[h];c instanceof Lt&&r(c,o.positions[h]+s)}};return r(_t(t),0),i}get allowsNesting(){return!0}}Ee.setState=it.define();function cc(e,t,n){let i=e.facet(Cn);if(!i)return null;let r=i.data;if(i.allowsNesting)for(let o=_t(e).topNode;o;o=o.enter(t,n,Wt.ExcludeBuffers))r=o.type.prop(Ji)||r;return r}class ss extends Ee{constructor(t,n){super(t,n),this.parser=n}static define(t){let n=yO(t.languageData);return new ss(n,t.parser.configure({props:[Ji.add(i=>i.isTop?n:void 0)]}))}configure(t){return new ss(this.data,this.parser.configure(t))}get allowsNesting(){return this.parser.hasWrappers()}}function _t(e){let t=e.field(Ee.state,!1);return t?t.tree:Lt.empty}function pc(e,t,n=50){var i;let r=(i=e.field(Ee.state,!1))===null||i===void 0?void 0:i.context;return r&&(r.isDone(t)||r.work(n,t))?r.tree:null}class xO{constructor(t,n=t.length){this.doc=t,this.length=n,this.cursorPos=0,this.string="",this.cursor=t.iter()}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,n){let i=this.cursorPos-this.string.length;return t<i||n>=this.cursorPos?this.doc.sliceString(t,n):this.string.slice(t-i,n-i)}}let Ki=null;class os{constructor(t,n,i=[],r,o,s,l,h){this.parser=t,this.state=n,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=l,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(t,n,i){return new os(t,n,[],Lt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new xO(this.state.doc),this.fragments)}work(t,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Lt.empty&&this.isDone(n!=null?n:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof t=="number"){let r=Date.now()+t;t=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Rn.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n!=null?n:this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,n;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=t,this.tree=n,this.fragments=this.withoutTempSkipped(Rn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let n=Ki;Ki=this;try{return t()}finally{Ki=n}}withoutTempSkipped(t){for(let n;n=this.tempSkipped.pop();)t=dc(t,n.from,n.to);return t}changes(t,n){let{fragments:i,tree:r,treeLen:o,viewport:s,skipped:l}=this;if(this.takeTree(),!t.empty){let h=[];if(t.iterChangedRanges((c,d,f,m)=>h.push({fromA:c,toA:d,fromB:f,toB:m})),i=Rn.applyChanges(i,h),r=Lt.empty,o=0,s={from:t.mapPos(s.from,-1),to:t.mapPos(s.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let d=t.mapPos(c.from,1),f=t.mapPos(c.to,-1);d<f&&l.push({from:d,to:f})}}}return new os(this.parser,n,i,r,o,s,l,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<t.to&&o>t.from&&(this.fragments=dc(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,n){this.skipped.push({from:t,to:n})}static getSkippingParser(t){return new class extends rc{createParse(n,i,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let l=Ki;if(l){for(let h of r)l.tempSkipped.push(h);t&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,t]):t)}return this.parsedPos=s,new Lt(de.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let n=this.fragments;return this.treeLen>=t&&n.length&&n[0].from==0&&n[0].to>=t}static get(){return Ki}}function dc(e,t,n){return Rn.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class oi{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(t.changes,t.state),i=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new oi(n)}static init(t){let n=Math.min(3e3,t.doc.length),i=os.create(t.facet(Cn).parser,t,{from:0,to:n});return i.work(20,n)||i.takeTree(),new oi(i)}}Ee.state=Ft.define({create:oi.init,update(e,t){for(let n of t.effects)if(n.is(Ee.setState))return n.value;return t.startState.facet(Cn)!=t.state.facet(Cn)?oi.init(t.state):e.apply(t)}});let fc=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(fc=e=>{let t=-1,n=setTimeout(()=>{t=requestIdleCallback(e,{timeout:500-100})},100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const oa=typeof navigator<"u"&&((sa=navigator.scheduling)===null||sa===void 0?void 0:sa.isInputPending)?()=>navigator.scheduling.isInputPending():null,vO=Qt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ee.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ee.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=fc(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(Ee.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!oa?Math.max(25,e.timeRemaining()-5):1e9),s=r.context.treeLen<i&&n.doc.length>i+1e3,l=r.context.work(()=>oa&&oa()||Date.now()>o,i+(s?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Ee.setState.of(new oi(r.context))})),this.chunkBudget>0&&!(l&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>ve(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Cn=H.define({combine(e){return e.length?e[0]:null},enables:[Ee.state,vO]});class PO{constructor(t,n=[]){this.language=t,this.support=n,this.extension=[t,n]}}const SO=H.define(),tr=H.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function as(e){let t=e.facet(tr);return t.charCodeAt(0)==9?e.tabSize*t.length:t.length}function er(e,t){let n="",i=e.tabSize;if(e.facet(tr).charCodeAt(0)==9)for(;t>=i;)n+="	",t-=i;for(let r=0;r<t;r++)n+=" ";return n}function aa(e,t){e instanceof ft&&(e=new ls(e));for(let i of e.state.facet(SO)){let r=i(e,t);if(r!=null)return r}let n=_t(e.state);return n?CO(e,n,t):null}class ls{constructor(t,n={}){this.state=t,this.options=n,this.unit=as(t)}lineAt(t,n=1){let i=this.state.doc.lineAt(t),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==t?{text:"",from:t}:(n<0?r<t:r<=t)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(t,n=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(t,n);return i.slice(t-r,Math.min(i.length,t+100-r))}column(t,n=1){let{text:i,from:r}=this.lineAt(t,n),o=this.countColumn(i,t-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o}countColumn(t,n=t.length){return Xi(t,this.state.tabSize,n)}lineIndent(t,n=1){let{text:i,from:r}=this.lineAt(t,n),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const mc=new ut;function CO(e,t,n){return Oc(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,e)}function wO(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}function bO(e){let t=e.type.prop(mc);if(t)return t;let n=e.firstChild,i;if(n&&(i=n.type.prop(ut.closedBy))){let r=e.lastChild,o=r&&i.indexOf(r.name)>-1;return s=>gc(s,!0,1,void 0,o&&!wO(s)?r.from:void 0)}return e.parent==null?EO:null}function Oc(e,t,n){for(;e;e=e.parent){let i=bO(e);if(i)return i(la.create(n,t,e))}return null}function EO(){return 0}class la extends ls{constructor(t,n,i){super(t.state,t.options),this.base=t,this.pos=n,this.node=i}static create(t,n,i){return new la(t,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let t=this.state.doc.lineAt(this.node.from);for(;;){let n=this.node.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(DO(n,this.node))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){let t=this.node.parent;return t?Oc(t,this.pos,this.base):0}}function DO(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function AO(e){let t=e.node,n=t.childAfter(t.from),i=t.lastChild;if(!n)return null;let r=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let l=n.to;;){let h=t.childAfter(l);if(!h||h==i)return null;if(!h.type.isSkipped)return h.from<s?n:null;l=h.to}}function TO({closing:e,align:t=!0,units:n=1}){return i=>gc(i,t,n,e)}function gc(e,t,n,i,r){let o=e.textAfter,s=o.match(/^\s*/)[0].length,l=i&&o.slice(s,s+i.length)==i||r==e.pos+s,h=t?AO(e):null;return h?l?e.column(h.from):e.column(h.to):e.baseIndent+(l?0:e.unit*n)}const kO=e=>e.baseIndent;function ha({except:e,units:t=1}={}){return n=>{let i=e&&e.test(n.textAfter);return n.baseIndent+(i?0:t*n.unit)}}const _O=200;function IO(){return ft.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:i}=e.newSelection.main,r=n.lineAt(i);if(i>r.from+_O)return e;let o=n.sliceString(r.from,i);if(!t.some(c=>c.test(o)))return e;let{state:s}=e,l=-1,h=[];for(let{head:c}of s.selection.ranges){let d=s.doc.lineAt(c);if(d.from==l)continue;l=d.from;let f=aa(s,d.from);if(f==null)continue;let m=/^\s*/.exec(d.text)[0],v=er(s,f);m!=v&&h.push({from:d.from,to:d.from+m.length,insert:v})}return h.length?[e,{changes:h,sequential:!0}]:e})}const QO=H.define(),yc=new ut;function LO(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null}function XO(e,t,n){let i=_t(e);if(i.length<n)return null;let r=i.resolveInner(n),o=null;for(let s=r;s;s=s.parent){if(s.to<=n||s.from>n)continue;if(o&&s.from<t)break;let l=s.type.prop(yc);if(l&&(s.to<i.length-50||i.length==e.doc.length||!$O(s))){let h=l(s,e);h&&h.from<=n&&h.from>=t&&h.to>n&&(o=h)}}return o}function $O(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function hs(e,t,n){for(let i of e.facet(QO)){let r=i(e,t,n);if(r)return r}return XO(e,t,n)}function xc(e,t){let n=t.mapPos(e.from,1),i=t.mapPos(e.to,-1);return n>=i?void 0:{from:n,to:i}}const us=it.define({map:xc}),nr=it.define({map:xc});function vc(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some(i=>i.from<=n&&i.to>=n)||t.push(e.lineBlockAt(n));return t}const Mn=Ft.define({create(){return et.none},update(e,t){e=e.map(t.changes);for(let n of t.effects)n.is(us)&&!NO(e,n.value.from,n.value.to)?e=e.update({add:[bc.range(n.value.from,n.value.to)]}):n.is(nr)&&(e=e.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:i}=t.selection.main;e.between(i,i,(r,o)=>{r<i&&o>i&&(n=!0)}),n&&(e=e.update({filterFrom:i,filterTo:i,filter:(r,o)=>o<=i||r>=i}))}return e},provide:e=>tt.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let i=e[n++],r=e[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");t.push(bc.range(i,r))}return et.set(t,!0)}});function cs(e,t,n){var i;let r=null;return(i=e.field(Mn,!1))===null||i===void 0||i.between(t,n,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function NO(e,t,n){let i=!1;return e.between(t,t,(r,o)=>{r==t&&o==n&&(i=!0)}),i}function Pc(e,t){return e.field(Mn,!1)?t:t.concat(it.appendConfig.of(wc()))}const FO=e=>{for(let t of vc(e)){let n=hs(e.state,t.from,t.to);if(n)return e.dispatch({effects:Pc(e.state,[us.of(n),Sc(e,n)])}),!0}return!1},RO=e=>{if(!e.state.field(Mn,!1))return!1;let t=[];for(let n of vc(e)){let i=cs(e.state,n.from,n.to);i&&t.push(nr.of(i),Sc(e,i,!1))}return t.length&&e.dispatch({effects:t}),t.length>0};function Sc(e,t,n=!0){let i=e.state.doc.lineAt(t.from).number,r=e.state.doc.lineAt(t.to).number;return tt.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${e.state.phrase("to")} ${r}.`)}const BO=e=>{let{state:t}=e,n=[];for(let i=0;i<t.doc.length;){let r=e.lineBlockAt(i),o=hs(t,r.from,r.to);o&&n.push(us.of(o)),i=(o?e.lineBlockAt(o.to):r).to+1}return n.length&&e.dispatch({effects:Pc(e.state,n)}),!!n.length},MO=e=>{let t=e.state.field(Mn,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,(i,r)=>{n.push(nr.of({from:i,to:r}))}),e.dispatch({effects:n}),!0},YO=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:FO},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:RO},{key:"Ctrl-Alt-[",run:BO},{key:"Ctrl-Alt-]",run:MO}],WO={placeholderDOM:null,placeholderText:"\u2026"},Cc=H.define({combine(e){return We(e,WO)}});function wc(e){let t=[Mn,zO];return e&&t.push(Cc.of(e)),t}const bc=et.replace({widget:new class extends sn{toDOM(e){let{state:t}=e,n=t.facet(Cc),i=o=>{let s=e.lineBlockAt(e.posAtDOM(o.target)),l=cs(e.state,s.from,s.to);l&&e.dispatch({effects:nr.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,i);let r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}}}),jO={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ua extends an{constructor(t,n){super(),this.config=t,this.open=n}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=t.state.phrase(this.open?"Fold line":"Unfold line"),n}}function ZO(e={}){let t=Object.assign(Object.assign({},jO),e),n=new ua(t,!0),i=new ua(t,!1),r=Qt.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(Cn)!=s.state.facet(Cn)||s.startState.field(Mn,!1)!=s.state.field(Mn,!1)||_t(s.startState)!=_t(s.state)||t.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let l=new dn;for(let h of s.viewportLineBlocks){let c=cs(s.state,h.from,h.to)?i:hs(s.state,h.from,h.to)?n:null;c&&l.add(h.from,h.from,c)}return l.finish()}}),{domEventHandlers:o}=t;return[r,Gm({class:"cm-foldGutter",markers(s){var l;return((l=s.plugin(r))===null||l===void 0?void 0:l.markers)||yt.empty},initialSpacer(){return new ua(t,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,l,h)=>{if(o.click&&o.click(s,l,h))return!0;let c=cs(s.state,l.from,l.to);if(c)return s.dispatch({effects:nr.of(c)}),!0;let d=hs(s.state,l.from,l.to);return d?(s.dispatch({effects:us.of(d)}),!0):!1}})}),wc()]}const zO=tt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ps{constructor(t,n){let i;function r(l){let h=fn.newName();return(i||(i=Object.create(null)))["."+h]=l,h}const o=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,s=n.scope;this.scope=s instanceof Ee?l=>l.prop(Ji)==s.data:s?l=>l==s:void 0,this.style=lc(t.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=i?new fn(i):null,this.themeType=n.themeType}static define(t,n){return new ps(t,n||{})}}const ca=H.define(),Ec=H.define({combine(e){return e.length?[e[0]]:null}});function pa(e){let t=e.facet(ca);return t.length?t:e.facet(Ec)}function qO(e,t){let n=[GO],i;return e instanceof ps&&(e.module&&n.push(tt.styleModule.of(e.module)),i=e.themeType),t!=null&&t.fallback?n.push(Ec.of(e)):i?n.push(ca.computeN([tt.darkTheme],r=>r.facet(tt.darkTheme)==(i=="dark")?[e]:[])):n.push(ca.of(e)),n}class UO{constructor(t){this.markCache=Object.create(null),this.tree=_t(t.state),this.decorations=this.buildDeco(t,pa(t.state))}update(t){let n=_t(t.state),i=pa(t.state),r=i!=pa(t.startState);n.length<t.view.viewport.to&&!r&&n.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(n!=this.tree||t.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(t.view,i))}buildDeco(t,n){if(!n||!this.tree.length)return et.none;let i=new dn;for(let{from:r,to:o}of t.visibleRanges)OO(this.tree,n,(s,l,h)=>{i.add(s,l,this.markCache[h]||(this.markCache[h]=et.mark({class:h})))},r,o);return i.finish()}}const GO=Qn.high(Qt.fromClass(UO,{decorations:e=>e.decorations})),VO=ps.define([{tag:N.meta,color:"#7a757a"},{tag:N.link,textDecoration:"underline"},{tag:N.heading,textDecoration:"underline",fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strong,fontWeight:"bold"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:N.keyword,color:"#708"},{tag:[N.atom,N.bool,N.url,N.contentSeparator,N.labelName],color:"#219"},{tag:[N.literal,N.inserted],color:"#164"},{tag:[N.string,N.deleted],color:"#a11"},{tag:[N.regexp,N.escape,N.special(N.string)],color:"#e40"},{tag:N.definition(N.variableName),color:"#00f"},{tag:N.local(N.variableName),color:"#30a"},{tag:[N.typeName,N.namespace],color:"#085"},{tag:N.className,color:"#167"},{tag:[N.special(N.variableName),N.macroName],color:"#256"},{tag:N.definition(N.propertyName),color:"#00c"},{tag:N.comment,color:"#940"},{tag:N.invalid,color:"#f00"}]),HO=tt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Dc=1e4,Ac="()[]{}",Tc=H.define({combine(e){return We(e,{afterCursor:!0,brackets:Ac,maxScanDistance:Dc,renderMatch:tg})}}),JO=et.mark({class:"cm-matchingBracket"}),KO=et.mark({class:"cm-nonmatchingBracket"});function tg(e){let t=[],n=e.matched?JO:KO;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const eg=Ft.define({create(){return et.none},update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],i=t.state.facet(Tc);for(let r of t.state.selection.ranges){if(!r.empty)continue;let o=He(t.state,r.head,-1,i)||r.head>0&&He(t.state,r.head-1,1,i)||i.afterCursor&&(He(t.state,r.head,1,i)||r.head<t.state.doc.length&&He(t.state,r.head+1,-1,i));o&&(n=n.concat(i.renderMatch(o,t.state)))}return et.set(n,!0)},provide:e=>tt.decorations.from(e)}),ng=[eg,HO];function ig(e={}){return[Tc.of(e),ng]}function da(e,t,n){let i=e.prop(t<0?ut.openedBy:ut.closedBy);if(i)return i;if(e.name.length==1){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function He(e,t,n,i={}){let r=i.maxScanDistance||Dc,o=i.brackets||Ac,s=_t(e),l=s.resolveInner(t,n);for(let h=l;h;h=h.parent){let c=da(h.type,n,o);if(c&&h.from<h.to)return rg(e,t,n,h,c,o)}return sg(e,t,n,s,l.type,r,o)}function rg(e,t,n,i,r,o){let s=i.parent,l={from:i.from,to:i.to},h=0,c=s==null?void 0:s.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(h==0&&r.indexOf(c.type.name)>-1&&c.from<c.to)return{start:l,end:{from:c.from,to:c.to},matched:!0};if(da(c.type,n,o))h++;else if(da(c.type,-n,o)){if(h==0)return{start:l,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};h--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function sg(e,t,n,i,r,o,s){let l=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),h=s.indexOf(l);if(h<0||h%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},d=e.doc.iterRange(t,n>0?e.doc.length:0),f=0;for(let m=0;!d.next().done&&m<=o;){let v=d.value;n<0&&(m+=v.length);let C=t+m*n;for(let O=n>0?0:v.length-1,y=n>0?v.length:-1;O!=y;O+=n){let P=s.indexOf(v[O]);if(!(P<0||i.resolveInner(C+O,1).type!=r))if(P%2==0==n>0)f++;else{if(f==1)return{start:c,end:{from:C+O,to:C+O+1},matched:P>>1==h>>1};f--}}n>0&&(m+=v.length)}return d.done?{start:c,matched:!1}:null}const og=Object.create(null),kc=[de.none],_c=[],ag=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ag[e]=lg(og,t);function fa(e,t){_c.indexOf(e)>-1||(_c.push(e),console.warn(t))}function lg(e,t){let n=null;for(let o of t.split(".")){let s=e[o]||N[o];s?typeof s=="function"?n?n=s(n):fa(o,`Modifier ${o} used at start of tag`):n?fa(o,`Tag ${o} used as modifier`):n=s:fa(o,`Unknown highlighting tag ${o}`)}if(!n)return 0;let i=t.replace(/ /g,"_"),r=de.define({id:kc.length,name:i,props:[oc({[i]:n})]});return kc.push(r),r.id}const hg=e=>{let t=Oa(e.state);return t.line?ug(e):t.block?pg(e):!1};function ma(e,t){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=e(t,n);return r?(i(n.update(r)),!0):!1}}const ug=ma(mg,0),cg=ma(Ic,0),pg=ma((e,t)=>Ic(e,t,fg(t)),0);function Oa(e,t=e.selection.main.head){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}const ir=50;function dg(e,{open:t,close:n},i,r){let o=e.sliceDoc(i-ir,i),s=e.sliceDoc(r,r+ir),l=/\s*$/.exec(o)[0].length,h=/^\s*/.exec(s)[0].length,c=o.length-l;if(o.slice(c-t.length,c)==t&&s.slice(h,h+n.length)==n)return{open:{pos:i-l,margin:l&&1},close:{pos:r+h,margin:h&&1}};let d,f;r-i<=2*ir?d=f=e.sliceDoc(i,r):(d=e.sliceDoc(i,i+ir),f=e.sliceDoc(r-ir,r));let m=/^\s*/.exec(d)[0].length,v=/\s*$/.exec(f)[0].length,C=f.length-v-n.length;return d.slice(m,m+t.length)==t&&f.slice(C,C+n.length)==n?{open:{pos:i+m+t.length,margin:/\s/.test(d.charAt(m+t.length))?1:0},close:{pos:r-v-n.length,margin:/\s/.test(f.charAt(C-1))?1:0}}:null}function fg(e){let t=[];for(let n of e.selection.ranges){let i=e.doc.lineAt(n.from),r=n.to<=i.to?i:e.doc.lineAt(n.to),o=t.length-1;o>=0&&t[o].to>i.from?t[o].to=r.to:t.push({from:i.from,to:r.to})}return t}function Ic(e,t,n=t.selection.ranges){let i=n.map(o=>Oa(t,o.from).block);if(!i.every(o=>o))return null;let r=n.map((o,s)=>dg(t,i[s],o.from,o.to));if(e!=2&&!r.every(o=>o))return{changes:t.changes(n.map((o,s)=>r[s]?[]:[{from:o.from,insert:i[s].open+" "},{from:o.to,insert:" "+i[s].close}]))};if(e!=1&&r.some(o=>o)){let o=[];for(let s=0,l;s<r.length;s++)if(l=r[s]){let h=i[s],{open:c,close:d}=l;o.push({from:c.pos-h.open.length,to:c.pos+c.margin},{from:d.pos-d.margin,to:d.pos+h.close.length})}return{changes:o}}return null}function mg(e,t,n=t.selection.ranges){let i=[],r=-1;for(let{from:o,to:s}of n){let l=i.length,h=1e9;for(let c=o;c<=s;){let d=t.doc.lineAt(c);if(d.from>r&&(o==s||s>d.from)){r=d.from;let f=Oa(t,c).line;if(!f)continue;let m=/^\s*/.exec(d.text)[0].length,v=m==d.length,C=d.text.slice(m,m+f.length)==f?m:-1;m<d.text.length&&m<h&&(h=m),i.push({line:d,comment:C,token:f,indent:m,empty:v,single:!1})}c=d.to+1}if(h<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=h);i.length==l+1&&(i[l].single=!0)}if(e!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:h,indent:c,empty:d,single:f}of i)(f||!d)&&o.push({from:l.from+c,insert:h+" "});let s=t.changes(o);return{changes:s,selection:t.selection.map(s,1)}}else if(e!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:l,token:h}of i)if(l>=0){let c=s.from+l,d=c+h.length;s.text[d-s.from]==" "&&d++,o.push({from:c,to:d})}return{changes:o}}return null}const ga=Ln.define(),Og=Ln.define(),gg=H.define(),Qc=H.define({combine(e){return We(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function yg(e){let t=0;return e.iterChangedRanges((n,i)=>t=i),t}const Lc=Ft.define({create(){return Je.empty},update(e,t){let n=t.state.facet(Qc),i=t.annotation(ga);if(i){let h=t.docChanged?Y.single(yg(t.changes)):void 0,c=fe.fromTransaction(t,h),d=i.side,f=d==0?e.undone:e.done;return c?f=fs(f,f.length,n.minDepth,c):f=Nc(f,t.startState.selection),new Je(d==0?i.rest:f,d==0?f:i.rest)}let r=t.annotation(Og);if((r=="full"||r=="before")&&(e=e.isolate()),t.annotation(Rt.addToHistory)===!1)return t.changes.empty?e:e.addMapping(t.changes.desc);let o=fe.fromTransaction(t),s=t.annotation(Rt.time),l=t.annotation(Rt.userEvent);return o?e=e.addChanges(o,s,l,n.newGroupDelay,n.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,s,l,n.newGroupDelay)),(r=="full"||r=="after")&&(e=e.isolate()),e},toJSON(e){return{done:e.done.map(t=>t.toJSON()),undone:e.undone.map(t=>t.toJSON())}},fromJSON(e){return new Je(e.done.map(fe.fromJSON),e.undone.map(fe.fromJSON))}});function xg(e={}){return[Lc,Qc.of(e),tt.domEventHandlers({beforeinput(t,n){let i=t.inputType=="historyUndo"?Xc:t.inputType=="historyRedo"?ya:null;return i?(t.preventDefault(),i(n)):!1}})]}function ds(e,t){return function({state:n,dispatch:i}){if(!t&&n.readOnly)return!1;let r=n.field(Lc,!1);if(!r)return!1;let o=r.pop(e,n,t);return o?(i(o),!0):!1}}const Xc=ds(0,!1),ya=ds(1,!1),vg=ds(0,!0),Pg=ds(1,!0);class fe{constructor(t,n,i,r,o){this.changes=t,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=o}setSelAfter(t){return new fe(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,n,i;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(t){return new fe(t.changes&&Nt.fromJSON(t.changes),[],t.mapped&&Ye.fromJSON(t.mapped),t.startSelection&&Y.fromJSON(t.startSelection),t.selectionsAfter.map(Y.fromJSON))}static fromTransaction(t,n){let i=De;for(let r of t.startState.facet(gg)){let o=r(t);o.length&&(i=i.concat(o))}return!i.length&&t.changes.empty?null:new fe(t.changes.invert(t.startState.doc),i,void 0,n||t.startState.selection,De)}static selection(t){return new fe(void 0,De,void 0,void 0,t)}}function fs(e,t,n,i){let r=t+1>n+20?t-n-1:0,o=e.slice(r,t);return o.push(i),o}function Sg(e,t){let n=[],i=!1;return e.iterChangedRanges((r,o)=>n.push(r,o)),t.iterChangedRanges((r,o,s,l)=>{for(let h=0;h<n.length;){let c=n[h++],d=n[h++];l>=c&&s<=d&&(i=!0)}}),i}function Cg(e,t){return e.ranges.length==t.ranges.length&&e.ranges.filter((n,i)=>n.empty!=t.ranges[i].empty).length===0}function $c(e,t){return e.length?t.length?e.concat(t):e:t}const De=[],wg=200;function Nc(e,t){if(e.length){let n=e[e.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-wg));return i.length&&i[i.length-1].eq(t)?e:(i.push(t),fs(e,e.length-1,1e9,n.setSelAfter(i)))}else return[fe.selection([t])]}function bg(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function xa(e,t){if(!e.length)return e;let n=e.length,i=De;for(;n;){let r=Eg(e[n-1],t,i);if(r.changes&&!r.changes.empty||r.effects.length){let o=e.slice(0,n);return o[n-1]=r,o}else t=r.mapped,n--,i=r.selectionsAfter}return i.length?[fe.selection(i)]:De}function Eg(e,t,n){let i=$c(e.selectionsAfter.length?e.selectionsAfter.map(l=>l.map(t)):De,n);if(!e.changes)return fe.selection(i);let r=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new fe(r,it.mapEffects(e.effects,t),s,e.startSelection.map(o),i)}const Dg=/^(input\.type|delete)($|\.)/;class Je{constructor(t,n,i=0,r=void 0){this.done=t,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Je(this.done,this.undone):this}addChanges(t,n,i,r,o){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&t.changes&&(!i||Dg.test(i))&&(!l.selectionsAfter.length&&n-this.prevTime<r&&Sg(l.changes,t.changes)||i=="input.type.compose")?s=fs(s,s.length-1,o,new fe(t.changes.compose(l.changes),$c(t.effects,l.effects),l.mapped,l.startSelection,De)):s=fs(s,s.length,o,t),new Je(s,De,n,i)}addSelection(t,n,i,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:De;return o.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Cg(o[o.length-1],t)?this:new Je(Nc(this.done,t),this.undone,n,i)}addMapping(t){return new Je(xa(this.done,t),xa(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,n,i){let r=t==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1];if(i&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:ga.of({side:t,rest:bg(r)}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let s=r.length==1?De:r.slice(0,r.length-1);return o.mapped&&(s=xa(s,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:ga.of({side:t,rest:s}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}Je.empty=new Je(De,De);const Ag=[{key:"Mod-z",run:Xc,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ya,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ya,preventDefault:!0},{key:"Mod-u",run:vg,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Pg,preventDefault:!0}];function ai(e,t){return Y.create(e.ranges.map(t),e.mainIndex)}function Ke(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function $e({state:e,dispatch:t},n){let i=ai(e.selection,n);return i.eq(e.selection)?!1:(t(Ke(e,i)),!0)}function ms(e,t){return Y.cursor(t?e.to:e.from)}function Fc(e,t){return $e(e,n=>n.empty?e.moveByChar(n,t):ms(n,t))}function ee(e){return e.textDirectionAt(e.state.selection.main.head)==Dt.LTR}const Rc=e=>Fc(e,!ee(e)),Bc=e=>Fc(e,ee(e));function Mc(e,t){return $e(e,n=>n.empty?e.moveByGroup(n,t):ms(n,t))}const Tg=e=>Mc(e,!ee(e)),kg=e=>Mc(e,ee(e));function _g(e,t,n){if(t.type.prop(n))return!0;let i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function Os(e,t,n){let i=_t(e).resolveInner(t.head),r=n?ut.closedBy:ut.openedBy;for(let h=t.head;;){let c=n?i.childAfter(h):i.childBefore(h);if(!c)break;_g(e,c,r)?i=c:h=n?c.to:c.from}let o=i.type.prop(r),s,l;return o&&(s=n?He(e,i.from,1):He(e,i.to,-1))&&s.matched?l=n?s.end.to:s.end.from:l=n?i.to:i.from,Y.cursor(l,n?-1:1)}const Ig=e=>$e(e,t=>Os(e.state,t,!ee(e))),Qg=e=>$e(e,t=>Os(e.state,t,ee(e)));function Yc(e,t){return $e(e,n=>{if(!n.empty)return ms(n,t);let i=e.moveVertically(n,t);return i.head!=n.head?i:e.moveToLineBoundary(n,t)})}const Wc=e=>Yc(e,!1),jc=e=>Yc(e,!0);function Zc(e){return Math.max(e.defaultLineHeight,Math.min(e.dom.clientHeight,innerHeight)-5)}function zc(e,t){let{state:n}=e,i=ai(n.selection,l=>l.empty?e.moveVertically(l,t,Zc(e)):ms(l,t));if(i.eq(n.selection))return!1;let r=e.coordsAtPos(n.selection.main.head),o=e.scrollDOM.getBoundingClientRect(),s;return r&&r.top>o.top&&r.bottom<o.bottom&&r.top-o.top<=e.scrollDOM.scrollHeight-e.scrollDOM.scrollTop-e.scrollDOM.clientHeight&&(s=tt.scrollIntoView(i.main.head,{y:"start",yMargin:r.top-o.top})),e.dispatch(Ke(n,i),{effects:s}),!0}const qc=e=>zc(e,!1),va=e=>zc(e,!0);function wn(e,t,n){let i=e.lineBlockAt(t.head),r=e.moveToLineBoundary(t,n);if(r.head==t.head&&r.head!=(n?i.to:i.from)&&(r=e.moveToLineBoundary(t,n,!1)),!n&&r.head==i.from&&i.length){let o=/^\s*/.exec(e.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&t.head!=i.from+o&&(r=Y.cursor(i.from+o))}return r}const Lg=e=>$e(e,t=>wn(e,t,!0)),Xg=e=>$e(e,t=>wn(e,t,!1)),$g=e=>$e(e,t=>wn(e,t,!ee(e))),Ng=e=>$e(e,t=>wn(e,t,ee(e))),Fg=e=>$e(e,t=>Y.cursor(e.lineBlockAt(t.head).from,1)),Rg=e=>$e(e,t=>Y.cursor(e.lineBlockAt(t.head).to,-1));function Bg(e,t,n){let i=!1,r=ai(e.selection,o=>{let s=He(e,o.head,-1)||He(e,o.head,1)||o.head>0&&He(e,o.head-1,1)||o.head<e.doc.length&&He(e,o.head+1,-1);if(!s||!s.end)return o;i=!0;let l=s.start.from==o.head?s.end.to:s.end.from;return n?Y.range(o.anchor,l):Y.cursor(l)});return i?(t(Ke(e,r)),!0):!1}const Mg=({state:e,dispatch:t})=>Bg(e,t,!1);function Ae(e,t){let n=ai(e.state.selection,i=>{let r=t(i);return Y.range(i.anchor,r.head,r.goalColumn)});return n.eq(e.state.selection)?!1:(e.dispatch(Ke(e.state,n)),!0)}function Uc(e,t){return Ae(e,n=>e.moveByChar(n,t))}const Gc=e=>Uc(e,!ee(e)),Vc=e=>Uc(e,ee(e));function Hc(e,t){return Ae(e,n=>e.moveByGroup(n,t))}const Yg=e=>Hc(e,!ee(e)),Wg=e=>Hc(e,ee(e)),jg=e=>Ae(e,t=>Os(e.state,t,!ee(e))),Zg=e=>Ae(e,t=>Os(e.state,t,ee(e)));function Jc(e,t){return Ae(e,n=>e.moveVertically(n,t))}const Kc=e=>Jc(e,!1),tp=e=>Jc(e,!0);function ep(e,t){return Ae(e,n=>e.moveVertically(n,t,Zc(e)))}const np=e=>ep(e,!1),ip=e=>ep(e,!0),zg=e=>Ae(e,t=>wn(e,t,!0)),qg=e=>Ae(e,t=>wn(e,t,!1)),Ug=e=>Ae(e,t=>wn(e,t,!ee(e))),Gg=e=>Ae(e,t=>wn(e,t,ee(e))),Vg=e=>Ae(e,t=>Y.cursor(e.lineBlockAt(t.head).from)),Hg=e=>Ae(e,t=>Y.cursor(e.lineBlockAt(t.head).to)),rp=({state:e,dispatch:t})=>(t(Ke(e,{anchor:0})),!0),sp=({state:e,dispatch:t})=>(t(Ke(e,{anchor:e.doc.length})),!0),op=({state:e,dispatch:t})=>(t(Ke(e,{anchor:e.selection.main.anchor,head:0})),!0),ap=({state:e,dispatch:t})=>(t(Ke(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),Jg=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0),Kg=({state:e,dispatch:t})=>{let n=xs(e).map(({from:i,to:r})=>Y.range(i,Math.min(r+1,e.doc.length)));return t(e.update({selection:Y.create(n),userEvent:"select"})),!0},ty=({state:e,dispatch:t})=>{let n=ai(e.selection,i=>{var r;let o=_t(e).resolveInner(i.head,1);for(;!(o.from<i.from&&o.to>=i.to||o.to>i.to&&o.from<=i.from||!(!((r=o.parent)===null||r===void 0)&&r.parent));)o=o.parent;return Y.range(o.to,o.from)});return t(Ke(e,n)),!0},ey=({state:e,dispatch:t})=>{let n=e.selection,i=null;return n.ranges.length>1?i=Y.create([n.main]):n.main.empty||(i=Y.create([Y.cursor(n.main.head)])),i?(t(Ke(e,i)),!0):!1};function gs({state:e,dispatch:t},n){if(e.readOnly)return!1;let i="delete.selection",r=e.changeByRange(o=>{let{from:s,to:l}=o;if(s==l){let h=n(s);h<s?i="delete.backward":h>s&&(i="delete.forward"),s=Math.min(s,h),l=Math.max(l,h)}return s==l?{range:o}:{changes:{from:s,to:l},range:Y.cursor(s)}});return r.changes.empty?!1:(t(e.update(r,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?tt.announce.of(e.phrase("Selection deleted")):void 0})),!0)}function ys(e,t,n){if(e instanceof tt)for(let i of e.state.facet(tt.atomicRanges).map(r=>r(e)))i.between(t,t,(r,o)=>{r<t&&o>t&&(t=n?o:r)});return t}const lp=(e,t)=>gs(e,n=>{let{state:i}=e,r=i.doc.lineAt(n),o,s;if(!t&&n>r.from&&n<r.from+200&&!/[^ \t]/.test(o=r.text.slice(0,n-r.from))){if(o[o.length-1]=="	")return n-1;let l=Xi(o,i.tabSize),h=l%as(i)||as(i);for(let c=0;c<h&&o[o.length-1-c]==" ";c++)n--;s=n}else s=se(r.text,n-r.from,t,t)+r.from,s==n&&r.number!=(t?i.doc.lines:1)&&(s+=t?1:-1);return ys(e,s,t)}),Pa=e=>lp(e,!1),hp=e=>lp(e,!0),up=(e,t)=>gs(e,n=>{let i=n,{state:r}=e,o=r.doc.lineAt(i),s=r.charCategorizer(i);for(let l=null;;){if(i==(t?o.to:o.from)){i==n&&o.number!=(t?r.doc.lines:1)&&(i+=t?1:-1);break}let h=se(o.text,i-o.from,t)+o.from,c=o.text.slice(Math.min(i,h)-o.from,Math.max(i,h)-o.from),d=s(c);if(l!=null&&d!=l)break;(c!=" "||i!=n)&&(l=d),i=h}return ys(e,i,t)}),cp=e=>up(e,!1),ny=e=>up(e,!0),pp=e=>gs(e,t=>{let n=e.lineBlockAt(t).to;return ys(e,t<n?n:Math.min(e.state.doc.length,t+1),!0)}),iy=e=>gs(e,t=>{let n=e.lineBlockAt(t).from;return ys(e,t>n?n:Math.max(0,t-1),!1)}),ry=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:gt.of(["",""])},range:Y.cursor(i.from)}));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},sy=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{if(!i.empty||i.from==0||i.from==e.doc.length)return{range:i};let r=i.from,o=e.doc.lineAt(r),s=r==o.from?r-1:se(o.text,r-o.from,!1)+o.from,l=r==o.to?r+1:se(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:l,insert:e.doc.slice(r,l).append(e.doc.slice(s,r))},range:Y.cursor(l)}});return n.changes.empty?!1:(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function xs(e){let t=[],n=-1;for(let i of e.selection.ranges){let r=e.doc.lineAt(i.from),o=e.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=e.doc.lineAt(i.to-1)),n>=r.number){let s=t[t.length-1];s.to=o.to,s.ranges.push(i)}else t.push({from:r.from,to:o.to,ranges:[i]});n=o.number+1}return t}function dp(e,t,n){if(e.readOnly)return!1;let i=[],r=[];for(let o of xs(e)){if(n?o.to==e.doc.length:o.from==0)continue;let s=e.doc.lineAt(n?o.to+1:o.from-1),l=s.length+1;if(n){i.push({from:o.to,to:s.to},{from:o.from,insert:s.text+e.lineBreak});for(let h of o.ranges)r.push(Y.range(Math.min(e.doc.length,h.anchor+l),Math.min(e.doc.length,h.head+l)))}else{i.push({from:s.from,to:o.from},{from:o.to,insert:e.lineBreak+s.text});for(let h of o.ranges)r.push(Y.range(h.anchor-l,h.head-l))}}return i.length?(t(e.update({changes:i,scrollIntoView:!0,selection:Y.create(r,e.selection.mainIndex),userEvent:"move.line"})),!0):!1}const oy=({state:e,dispatch:t})=>dp(e,t,!1),ay=({state:e,dispatch:t})=>dp(e,t,!0);function fp(e,t,n){if(e.readOnly)return!1;let i=[];for(let r of xs(e))n?i.push({from:r.from,insert:e.doc.slice(r.from,r.to)+e.lineBreak}):i.push({from:r.to,insert:e.lineBreak+e.doc.slice(r.from,r.to)});return t(e.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const ly=({state:e,dispatch:t})=>fp(e,t,!1),hy=({state:e,dispatch:t})=>fp(e,t,!0),uy=e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(xs(t).map(({from:r,to:o})=>(r>0?r--:o<t.doc.length&&o++,{from:r,to:o}))),i=ai(t.selection,r=>e.moveVertically(r,!0)).map(n);return e.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function cy(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n=_t(e).resolveInner(t),i=n.childBefore(t),r=n.childAfter(t),o;return i&&r&&i.to<=t&&r.from>=t&&(o=i.type.prop(ut.closedBy))&&o.indexOf(r.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}const py=mp(!1),dy=mp(!0);function mp(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let i=t.changeByRange(r=>{let{from:o,to:s}=r,l=t.doc.lineAt(o),h=!e&&o==s&&cy(t,o);e&&(o=s=(s<=l.to?l:t.doc.lineAt(s)).to);let c=new ls(t,{simulateBreak:o,simulateDoubleBreak:!!h}),d=aa(c,o);for(d==null&&(d=/^\s*/.exec(t.doc.lineAt(o).text)[0].length);s<l.to&&/\s/.test(l.text[s-l.from]);)s++;h?{from:o,to:s}=h:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let f=["",er(t,d)];return h&&f.push(er(t,c.lineIndent(l.from,-1))),{changes:{from:o,to:s,insert:gt.of(f)},range:Y.cursor(o+1+f[1].length)}});return n(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Sa(e,t){let n=-1;return e.changeByRange(i=>{let r=[];for(let s=i.from;s<=i.to;){let l=e.doc.lineAt(s);l.number>n&&(i.empty||i.to>l.from)&&(t(l,r,i),n=l.number),s=l.to+1}let o=e.changes(r);return{changes:r,range:Y.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const fy=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),i=new ls(e,{overrideIndentation:o=>{let s=n[o];return s==null?-1:s}}),r=Sa(e,(o,s,l)=>{let h=aa(i,o.from);if(h==null)return;/\S/.test(o.text)||(h=0);let c=/^\s*/.exec(o.text)[0],d=er(e,h);(c!=d||l.from<o.from+c.length)&&(n[o.from]=h,s.push({from:o.from,to:o.from+c.length,insert:d}))});return r.changes.empty||t(e.update(r,{userEvent:"indent"})),!0},Op=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update(Sa(e,(n,i)=>{i.push({from:n.from,insert:e.facet(tr)})}),{userEvent:"input.indent"})),!0),gp=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update(Sa(e,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let o=Xi(r,e.tabSize),s=0,l=er(e,Math.max(0,o-as(e)));for(;s<r.length&&s<l.length&&r.charCodeAt(s)==l.charCodeAt(s);)s++;i.push({from:n.from+s,to:n.from+r.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),my=[{key:"Ctrl-b",run:Rc,shift:Gc,preventDefault:!0},{key:"Ctrl-f",run:Bc,shift:Vc},{key:"Ctrl-p",run:Wc,shift:Kc},{key:"Ctrl-n",run:jc,shift:tp},{key:"Ctrl-a",run:Fg,shift:Vg},{key:"Ctrl-e",run:Rg,shift:Hg},{key:"Ctrl-d",run:hp},{key:"Ctrl-h",run:Pa},{key:"Ctrl-k",run:pp},{key:"Ctrl-Alt-h",run:cp},{key:"Ctrl-o",run:ry},{key:"Ctrl-t",run:sy},{key:"Ctrl-v",run:va}],Oy=[{key:"ArrowLeft",run:Rc,shift:Gc,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Tg,shift:Yg,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:$g,shift:Ug,preventDefault:!0},{key:"ArrowRight",run:Bc,shift:Vc,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:kg,shift:Wg,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Ng,shift:Gg,preventDefault:!0},{key:"ArrowUp",run:Wc,shift:Kc,preventDefault:!0},{mac:"Cmd-ArrowUp",run:rp,shift:op},{mac:"Ctrl-ArrowUp",run:qc,shift:np},{key:"ArrowDown",run:jc,shift:tp,preventDefault:!0},{mac:"Cmd-ArrowDown",run:sp,shift:ap},{mac:"Ctrl-ArrowDown",run:va,shift:ip},{key:"PageUp",run:qc,shift:np},{key:"PageDown",run:va,shift:ip},{key:"Home",run:Xg,shift:qg,preventDefault:!0},{key:"Mod-Home",run:rp,shift:op},{key:"End",run:Lg,shift:zg,preventDefault:!0},{key:"Mod-End",run:sp,shift:ap},{key:"Enter",run:py},{key:"Mod-a",run:Jg},{key:"Backspace",run:Pa,shift:Pa},{key:"Delete",run:hp},{key:"Mod-Backspace",mac:"Alt-Backspace",run:cp},{key:"Mod-Delete",mac:"Alt-Delete",run:ny},{mac:"Mod-Backspace",run:iy},{mac:"Mod-Delete",run:pp}].concat(my.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),gy=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Ig,shift:jg},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Qg,shift:Zg},{key:"Alt-ArrowUp",run:oy},{key:"Shift-Alt-ArrowUp",run:ly},{key:"Alt-ArrowDown",run:ay},{key:"Shift-Alt-ArrowDown",run:hy},{key:"Escape",run:ey},{key:"Mod-Enter",run:dy},{key:"Alt-l",mac:"Ctrl-l",run:Kg},{key:"Mod-i",run:ty,preventDefault:!0},{key:"Mod-[",run:gp},{key:"Mod-]",run:Op},{key:"Mod-Alt-\\",run:fy},{key:"Shift-Mod-k",run:uy},{key:"Shift-Mod-\\",run:Mg},{key:"Mod-/",run:hg},{key:"Alt-A",run:cg}].concat(Oy),yy={key:"Tab",run:Op,shift:gp};function Pt(){var e=arguments[0];typeof e=="string"&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?e.setAttribute(i,r):r!=null&&(e[i]=r)}t++}for(;t<arguments.length;t++)yp(e,arguments[t]);return e}function yp(e,t){if(typeof t=="string")e.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)e.appendChild(t);else if(Array.isArray(t))for(var n=0;n<t.length;n++)yp(e,t[n]);else throw new RangeError("Unsupported child node: "+t)}const xp=typeof String.prototype.normalize=="function"?e=>e.normalize("NFKD"):e=>e;class li{constructor(t,n,i=0,r=t.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(i,r),this.bufferStart=i,this.normalize=o?l=>o(xp(l)):xp,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return zt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let n=Gs(t),i=this.bufferStart+this.bufferPos;this.bufferPos+=ye(t);let r=this.normalize(n);for(let o=0,s=i;;o++){let l=r.charCodeAt(o),h=this.match(l,s);if(h)return this.value=h,this;if(o==r.length-1)break;s==i&&o<n.length&&n.charCodeAt(o)==l&&s++}}}match(t,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],s=!1;this.query.charCodeAt(o)==t&&(o==this.query.length-1?i={from:this.matches[r+1],to:n+1}:(this.matches[r]++,s=!0)),s||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?i={from:n,to:n+1}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(li.prototype[Symbol.iterator]=function(){return this});const vp={from:-1,to:-1,match:/.*/.exec("")},Ca="gm"+(/x/.unicode==null?"":"u");class Pp{constructor(t,n,i,r=0,o=t.length){if(this.text=t,this.to=o,this.curLine="",this.done=!1,this.value=vp,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Sp(t,n,i,r,o);this.re=new RegExp(n,Ca+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=t.iter();let s=t.lineAt(r);this.curLineStart=s.from,this.matchPos=vs(t,r),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=vs(this.text,r+(i==r?1:0)),i==this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const wa=new WeakMap;class hi{constructor(t,n){this.from=t,this.text=n}get to(){return this.from+this.text.length}static get(t,n,i){let r=wa.get(t);if(!r||r.from>=i||r.to<=n){let l=new hi(n,t.sliceString(n,i));return wa.set(t,l),l}if(r.from==n&&r.to==i)return r;let{text:o,from:s}=r;return s>n&&(o=t.sliceString(n,s)+o,s=n),r.to<i&&(o+=t.sliceString(r.to,i)),wa.set(t,new hi(s,o)),new hi(n,o.slice(n-s,i-s))}}class Sp{constructor(t,n,i,r,o){this.text=t,this.to=o,this.done=!1,this.value=vp,this.matchPos=vs(t,r),this.re=new RegExp(n,Ca+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=hi.get(t,r,this.chunkEnd(r+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==t&&(this.re.lastIndex=t+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=vs(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=hi.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Pp.prototype[Symbol.iterator]=Sp.prototype[Symbol.iterator]=function(){return this});function xy(e){try{return new RegExp(e,Ca),!0}catch{return!1}}function vs(e,t){if(t>=e.length)return t;let n=e.lineAt(t),i;for(;t<n.to&&(i=n.text.charCodeAt(t-n.from))>=56320&&i<57344;)t++;return t}function ba(e){let t=Pt("input",{class:"cm-textfield",name:"line"}),n=Pt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),e.dispatch({effects:Ps.of(!1)}),e.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},Pt("label",e.state.phrase("Go to line"),": ",t)," ",Pt("button",{class:"cm-button",type:"submit"},e.state.phrase("go")));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:o}=e,s=o.doc.lineAt(o.selection.main.head),[,l,h,c,d]=r,f=c?+c.slice(1):0,m=h?+h:s.number;if(h&&d){let C=m/100;l&&(C=C*(l=="-"?-1:1)+s.number/o.doc.lines),m=Math.round(o.doc.lines*C)}else h&&l&&(m=m*(l=="-"?-1:1)+s.number);let v=o.doc.line(Math.max(1,Math.min(o.doc.lines,m)));e.dispatch({effects:Ps.of(!1),selection:Y.cursor(v.from+Math.max(0,Math.min(f,v.length))),scrollIntoView:!0}),e.focus()}return{dom:n}}const Ps=it.define(),Cp=Ft.define({create(){return!0},update(e,t){for(let n of t.effects)n.is(Ps)&&(e=n.value);return e},provide:e=>Gi.from(e,t=>t?ba:null)}),vy=e=>{let t=Ui(e,ba);if(!t){let n=[Ps.of(!0)];e.state.field(Cp,!1)==null&&n.push(it.appendConfig.of([Cp,Py])),e.dispatch({effects:n}),t=Ui(e,ba)}return t&&t.dom.querySelector("input").focus(),!0},Py=tt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Sy={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},wp=H.define({combine(e){return We(e,Sy,{highlightWordAroundCursor:(t,n)=>t||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function Cy(e){let t=[Ay,Dy];return e&&t.push(wp.of(e)),t}const wy=et.mark({class:"cm-selectionMatch"}),by=et.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function bp(e,t,n,i){return(n==0||e(t.sliceDoc(n-1,n))!=Et.Word)&&(i==t.doc.length||e(t.sliceDoc(i,i+1))!=Et.Word)}function Ey(e,t,n,i){return e(t.sliceDoc(n,n+1))==Et.Word&&e(t.sliceDoc(i-1,i))==Et.Word}const Dy=Qt.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(wp),{state:n}=e,i=n.selection;if(i.ranges.length>1)return et.none;let r=i.main,o,s=null;if(r.empty){if(!t.highlightWordAroundCursor)return et.none;let h=n.wordAt(r.head);if(!h)return et.none;s=n.charCategorizer(r.head),o=n.sliceDoc(h.from,h.to)}else{let h=r.to-r.from;if(h<t.minSelectionLength||h>200)return et.none;if(t.wholeWords){if(o=n.sliceDoc(r.from,r.to),s=n.charCategorizer(r.head),!(bp(s,n,r.from,r.to)&&Ey(s,n,r.from,r.to)))return et.none}else if(o=n.sliceDoc(r.from,r.to).trim(),!o)return et.none}let l=[];for(let h of e.visibleRanges){let c=new li(n.doc,o,h.from,h.to);for(;!c.next().done;){let{from:d,to:f}=c.value;if((!s||bp(s,n,d,f))&&(r.empty&&d<=r.from&&f>=r.to?l.push(by.range(d,f)):(d>=r.to||f<=r.from)&&l.push(wy.range(d,f)),l.length>t.maxMatches))return et.none}}return et.set(l)}},{decorations:e=>e.decorations}),Ay=tt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Ty=({state:e,dispatch:t})=>{let{selection:n}=e,i=Y.create(n.ranges.map(r=>e.wordAt(r.head)||Y.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(t(e.update({selection:i})),!0)};function ky(e,t){let{main:n,ranges:i}=e.selection,r=e.wordAt(n.head),o=r&&r.from==n.from&&r.to==n.to;for(let s=!1,l=new li(e.doc,t,i[i.length-1].to);;)if(l.next(),l.done){if(s)return null;l=new li(e.doc,t,0,Math.max(0,i[i.length-1].from-1)),s=!0}else{if(s&&i.some(h=>h.from==l.value.from))continue;if(o){let h=e.wordAt(l.value.from);if(!h||h.from!=l.value.from||h.to!=l.value.to)continue}return l.value}}const _y=({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some(o=>o.from===o.to))return Ty({state:e,dispatch:t});let i=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some(o=>e.sliceDoc(o.from,o.to)!=i))return!1;let r=ky(e,i);return r?(t(e.update({selection:e.selection.addRange(Y.range(r.from,r.to),!1),effects:tt.scrollIntoView(r.to)})),!0):!1},Ea=H.define({combine(e){return We(e,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:t=>new Wy(t)})}});class Ep{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||xy(this.search)),this.unquoted=this.literal?this.search:this.search.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\"),this.wholeWord=!!t.wholeWord}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new Xy(this):new Qy(this)}getCursor(t,n=0,i){let r=t.doc?t:ft.create({doc:t});return i==null&&(i=r.doc.length),this.regexp?ci(this,r,n,i):ui(this,r,n,i)}}class Dp{constructor(t){this.spec=t}}function ui(e,t,n,i){return new li(t.doc,e.unquoted,n,i,e.caseSensitive?void 0:r=>r.toLowerCase(),e.wholeWord?Iy(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function Iy(e,t){return(n,i,r,o)=>((o>n||o+r.length<i)&&(o=Math.max(0,n-2),r=e.sliceString(o,Math.min(e.length,i+2))),t(Cs(r,n-o))!=Et.Word||t(Ss(r,i-o))!=Et.Word||t(Ss(r,n-o))!=Et.Word&&t(Cs(r,i-o))!=Et.Word)}class Qy extends Dp{constructor(t){super(t)}nextMatch(t,n,i){let r=ui(this.spec,t,i,t.doc.length).nextOverlapping();return r.done&&(r=ui(this.spec,t,0,n).nextOverlapping()),r.done?null:r.value}prevMatchInRange(t,n,i){for(let r=i;;){let o=Math.max(n,r-1e4-this.spec.unquoted.length),s=ui(this.spec,t,o,r),l=null;for(;!s.nextOverlapping().done;)l=s.value;if(l)return l;if(o==n)return null;r-=1e4}}prevMatch(t,n,i){return this.prevMatchInRange(t,0,n)||this.prevMatchInRange(t,i,t.doc.length)}getReplacement(t){return this.spec.replace}matchAll(t,n){let i=ui(this.spec,t,0,t.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(t,n,i,r){let o=ui(this.spec,t,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,t.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function ci(e,t,n,i){return new Pp(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?Ly(t.charCategorizer(t.selection.main.head)):void 0},n,i)}function Ss(e,t){return e.slice(se(e,t,!1),t)}function Cs(e,t){return e.slice(t,se(e,t))}function Ly(e){return(t,n,i)=>!i[0].length||e(Cs(i.input,i.index))!=Et.Word||e(Ss(i.input,i.index+i[0].length))!=Et.Word||e(Ss(i.input,i.index))!=Et.Word&&e(Cs(i.input,i.index+i[0].length))!=Et.Word}class Xy extends Dp{nextMatch(t,n,i){let r=ci(this.spec,t,i,t.doc.length).next();return r.done&&(r=ci(this.spec,t,0,n).next()),r.done?null:r.value}prevMatchInRange(t,n,i){for(let r=1;;r++){let o=Math.max(n,i-r*1e4),s=ci(this.spec,t,o,i),l=null;for(;!s.next().done;)l=s.value;if(l&&(o==n||l.from>o+10))return l;if(o==n)return null}}prevMatch(t,n,i){return this.prevMatchInRange(t,0,n)||this.prevMatchInRange(t,i,t.doc.length)}getReplacement(t){return this.spec.replace.replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?t.match[0]:i!="0"&&+i<t.match.length?t.match[i]:n)}matchAll(t,n){let i=ci(this.spec,t,0,t.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(t,n,i,r){let o=ci(this.spec,t,Math.max(0,n-250),Math.min(i+250,t.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const rr=it.define(),Da=it.define(),bn=Ft.define({create(e){return new Aa(ka(e).create(),null)},update(e,t){for(let n of t.effects)n.is(rr)?e=new Aa(n.value.create(),e.panel):n.is(Da)&&(e=new Aa(e.query,n.value?Ta:null));return e},provide:e=>Gi.from(e,t=>t.panel)});class Aa{constructor(t,n){this.query=t,this.panel=n}}const $y=et.mark({class:"cm-searchMatch"}),Ny=et.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Fy=Qt.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(bn))}update(e){let t=e.state.field(bn);(t!=e.startState.field(bn)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return et.none;let{view:n}=this,i=new dn;for(let r=0,o=n.visibleRanges,s=o.length;r<s;r++){let{from:l,to:h}=o[r];for(;r<s-1&&h>o[r+1].from-2*250;)h=o[++r].to;e.highlight(n.state,l,h,(c,d)=>{let f=n.state.selection.ranges.some(m=>m.from==c&&m.to==d);i.add(c,d,f?Ny:$y)})}return i.finish()}},{decorations:e=>e.decorations});function sr(e){return t=>{let n=t.state.field(bn,!1);return n&&n.query.spec.valid?e(t,n):Tp(t)}}const ws=sr((e,{query:t})=>{let{to:n}=e.state.selection.main,i=t.nextMatch(e.state,n,n);return i?(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:_a(e,i),userEvent:"select.search"}),!0):!1}),bs=sr((e,{query:t})=>{let{state:n}=e,{from:i}=n.selection.main,r=t.prevMatch(n,i,i);return r?(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:_a(e,r),userEvent:"select.search"}),!0):!1}),Ry=sr((e,{query:t})=>{let n=t.matchAll(e.state,1e3);return!n||!n.length?!1:(e.dispatch({selection:Y.create(n.map(i=>Y.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),By=({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,o=[],s=0;for(let l=new li(e.doc,e.sliceDoc(i,r));!l.next().done;){if(o.length>1e3)return!1;l.value.from==i&&(s=o.length),o.push(Y.range(l.value.from,l.value.to))}return t(e.update({selection:Y.create(o,s),userEvent:"select.search.matches"})),!0},Ap=sr((e,{query:t})=>{let{state:n}=e,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let o=t.nextMatch(n,i,i);if(!o)return!1;let s=[],l,h,c=[];if(o.from==i&&o.to==r&&(h=n.toText(t.getReplacement(o)),s.push({from:o.from,to:o.to,insert:h}),o=t.nextMatch(n,o.from,o.to),c.push(tt.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),o){let d=s.length==0||s[0].from>=o.to?0:o.to-o.from-h.length;l={anchor:o.from-d,head:o.to-d},c.push(_a(e,o))}return e.dispatch({changes:s,selection:l,scrollIntoView:!!l,effects:c,userEvent:"input.replace"}),!0}),My=sr((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:t.getReplacement(r)}});if(!n.length)return!1;let i=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:tt.announce.of(i),userEvent:"input.replace.all"}),!0});function Ta(e){return e.state.facet(Ea).createPanel(e)}function ka(e,t){var n,i,r,o;let s=e.selection.main,l=s.empty||s.to>s.from+100?"":e.sliceDoc(s.from,s.to);if(t&&!l)return t;let h=e.facet(Ea);return new Ep({search:((n=t==null?void 0:t.literal)!==null&&n!==void 0?n:h.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=t==null?void 0:t.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(r=t==null?void 0:t.literal)!==null&&r!==void 0?r:h.literal,wholeWord:(o=t==null?void 0:t.wholeWord)!==null&&o!==void 0?o:h.wholeWord})}const Tp=e=>{let t=e.state.field(bn,!1);if(t&&t.panel){let n=Ui(e,Ta);if(!n)return!1;let i=n.dom.querySelector("[main-field]");if(i&&i!=e.root.activeElement){let r=ka(e.state,t.query.spec);r.valid&&e.dispatch({effects:rr.of(r)}),i.focus(),i.select()}}else e.dispatch({effects:[Da.of(!0),t?rr.of(ka(e.state,t.query.spec)):it.appendConfig.of(Zy)]});return!0},kp=e=>{let t=e.state.field(bn,!1);if(!t||!t.panel)return!1;let n=Ui(e,Ta);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:Da.of(!1)}),!0},Yy=[{key:"Mod-f",run:Tp,scope:"editor search-panel"},{key:"F3",run:ws,shift:bs,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ws,shift:bs,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:kp,scope:"editor search-panel"},{key:"Mod-Shift-l",run:By},{key:"Alt-g",run:vy},{key:"Mod-d",run:_y,preventDefault:!0}];class Wy{constructor(t){this.view=t;let n=this.query=t.state.field(bn).query.spec;this.commit=this.commit.bind(this),this.searchField=Pt("input",{value:n.search,placeholder:Se(t,"Find"),"aria-label":Se(t,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Pt("input",{value:n.replace,placeholder:Se(t,"Replace"),"aria-label":Se(t,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=Pt("input",{type:"checkbox",name:"case",checked:n.caseSensitive,onchange:this.commit}),this.reField=Pt("input",{type:"checkbox",name:"re",checked:n.regexp,onchange:this.commit}),this.wordField=Pt("input",{type:"checkbox",name:"word",checked:n.wholeWord,onchange:this.commit});function i(r,o,s){return Pt("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=Pt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>ws(t),[Se(t,"next")]),i("prev",()=>bs(t),[Se(t,"previous")]),i("select",()=>Ry(t),[Se(t,"all")]),Pt("label",null,[this.caseField,Se(t,"match case")]),Pt("label",null,[this.reField,Se(t,"regexp")]),Pt("label",null,[this.wordField,Se(t,"by word")]),...t.state.readOnly?[]:[Pt("br"),this.replaceField,i("replace",()=>Ap(t),[Se(t,"replace")]),i("replaceAll",()=>My(t),[Se(t,"replace all")]),Pt("button",{name:"close",onclick:()=>kp(t),"aria-label":Se(t,"close"),type:"button"},["\xD7"])]])}commit(){let t=new Ep({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:rr.of(t)}))}keydown(t){am(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?bs:ws)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),Ap(this.view))}update(t){for(let n of t.transactions)for(let i of n.effects)i.is(rr)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ea).top}}function Se(e,t){return e.state.phrase(t)}const Es=30,Ds=/[\s\.,:;?!]/;function _a(e,{from:t,to:n}){let i=e.state.doc.lineAt(t),r=e.state.doc.lineAt(n).to,o=Math.max(i.from,t-Es),s=Math.min(r,n+Es),l=e.state.sliceDoc(o,s);if(o!=i.from){for(let h=0;h<Es;h++)if(!Ds.test(l[h+1])&&Ds.test(l[h])){l=l.slice(h);break}}if(s!=r){for(let h=l.length-1;h>l.length-Es;h--)if(!Ds.test(l[h-1])&&Ds.test(l[h])){l=l.slice(0,h);break}}return tt.announce.of(`${e.state.phrase("current match")}. ${l} ${e.state.phrase("on line")} ${i.number}.`)}const jy=tt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Zy=[bn,Qn.lowest(Fy),jy];class _p{constructor(t,n,i){this.state=t,this.pos=n,this.explicit=i,this.abortListeners=[]}tokenBefore(t){let n=_t(this.state).resolveInner(this.pos,-1);for(;n&&t.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(t){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),o=r.search(Xp(t,!1));return o<0?null:{from:i+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(t,n){t=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function Ip(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function zy(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let o=1;o<r.length;o++)n[r[o]]=!0}let i=Ip(t)+Ip(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Qp(e){let t=e.map(r=>typeof r=="string"?{label:r}:r),[n,i]=t.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:zy(t);return r=>{let o=r.matchBefore(i);return o||r.explicit?{from:o?o.from:r.pos,options:t,validFor:n}:null}}function qy(e,t){return n=>{for(let i=_t(n.state).resolveInner(n.pos,-1);i;i=i.parent)if(e.indexOf(i.name)>-1)return null;return t(n)}}class Lp{constructor(t,n,i){this.completion=t,this.source=n,this.match=i}}function En(e){return e.selection.main.head}function Xp(e,t){var n;let{source:i}=e,r=t&&i[0]!="^",o=i[i.length-1]!="$";return!r&&!o?e:new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,(n=e.flags)!==null&&n!==void 0?n:e.ignoreCase?"i":"")}function Uy(e,t,n,i){return Object.assign(Object.assign({},e.changeByRange(r=>{if(r==e.selection.main)return{changes:{from:n,to:i,insert:t},range:Y.cursor(n+t.length)};let o=i-n;return!r.empty||o&&e.sliceDoc(r.from-o,r.from)!=e.sliceDoc(n,i)?{range:r}:{changes:{from:r.from-o,to:r.from,insert:t},range:Y.cursor(r.from-o+t.length)}})),{userEvent:"input.complete"})}function $p(e,t){const n=t.completion.apply||t.completion.label;let i=t.source;typeof n=="string"?e.dispatch(Uy(e.state,n,i.from,i.to)):n(e,t.completion,i.from,i.to)}const Np=new WeakMap;function Gy(e){if(!Array.isArray(e))return e;let t=Np.get(e);return t||Np.set(e,t=Qp(e)),t}class Vy{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let n=0;n<t.length;){let i=zt(t,n),r=ye(i);this.chars.push(i);let o=t.slice(n,n+r),s=o.toUpperCase();this.folded.push(zt(s==o?o.toLowerCase():s,0)),n+=r}this.astral=t.length!=this.chars.length}match(t){if(this.pattern.length==0)return[0];if(t.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:o,byWord:s}=this;if(n.length==1){let w=zt(t,0);return w==n[0]?[0,0,ye(w)]:w==i[0]?[-200,0,ye(w)]:null}let l=t.indexOf(this.pattern);if(l==0)return[0,0,this.pattern.length];let h=n.length,c=0;if(l<0){for(let w=0,D=Math.min(t.length,200);w<D&&c<h;){let A=zt(t,w);(A==n[c]||A==i[c])&&(r[c++]=w),w+=ye(A)}if(c<h)return null}let d=0,f=0,m=!1,v=0,C=-1,O=-1,y=/[a-z]/.test(t),P=!0;for(let w=0,D=Math.min(t.length,200),A=0;w<D&&f<h;){let _=zt(t,w);l<0&&(d<h&&_==n[d]&&(o[d++]=w),v<h&&(_==n[v]||_==i[v]?(v==0&&(C=w),O=w+1,v++):v=0));let I,F=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(I=Gs(_))!=I.toLowerCase()?1:I!=I.toUpperCase()?2:0;(!w||F==1&&y||A==0&&F!=0)&&(n[f]==_||i[f]==_&&(m=!0)?s[f++]=w:s.length&&(P=!1)),A=F,w+=ye(_)}return f==h&&s[0]==0&&P?this.result(-100+(m?-200:0),s,t):v==h&&C==0?[-200-t.length,0,O]:l>-1?[-700-t.length,l,l+this.pattern.length]:v==h?[-200+-700-t.length,C,O]:f==h?this.result(-100+(m?-200:0)+-700+(P?0:-1100),s,t):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,t)}result(t,n,i){let r=[t-i.length],o=1;for(let s of n){let l=s+(this.astral?ye(zt(i,s)):1);o>1&&r[o-1]==s?r[o-1]=l:(r[o++]=s,r[o++]=l)}return r}}const Te=H.define({combine(e){return We(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(t,n)=>t.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(t,n)=>t&&n,closeOnBlur:(t,n)=>t&&n,icons:(t,n)=>t&&n,optionClass:(t,n)=>i=>Hy(t(i),n(i)),addToOptions:(t,n)=>t.concat(n)})}});function Hy(e,t){return e?t?e+" "+t:e:t}function Jy(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),t.push({render(n,i,r){let o=document.createElement("span");o.className="cm-completionLabel";let{label:s}=n,l=0;for(let h=1;h<r.length;){let c=r[h++],d=r[h++];c>l&&o.appendChild(document.createTextNode(s.slice(l,c)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(s.slice(c,d))),f.className="cm-completionMatchedText",l=d}return l<s.length&&o.appendChild(document.createTextNode(s.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),t.sort((n,i)=>n.position-i.position).map(n=>n.render)}function Fp(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let r=Math.floor(t/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((e-t)/n);return{from:e-(i+1)*n,to:e-i*n}}class Ky{constructor(t,n){this.view=t,this.stateField=n,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this};let i=t.state.field(n),{options:r,selected:o}=i.open,s=t.state.facet(Te);this.optionContent=Jy(s),this.optionClass=s.optionClass,this.range=Fp(r.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",l=>{for(let h=l.target,c;h&&h!=this.dom;h=h.parentNode)if(h.nodeName=="LI"&&(c=/-(\d+)$/.exec(h.id))&&+c[1]<r.length){$p(t,r[+c[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(r,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(t){t.state.field(this.stateField)!=t.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let t=this.view.state.field(this.stateField),n=t.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=Fp(n.options.length,n.selected,this.view.state.facet(Te).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,t.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(i);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(s)}).catch(s=>ve(this.view.state,s,"completion info")):this.addInfoPane(o)}}addInfoPane(t){let n=this.info=document.createElement("div");n.className="cm-tooltip cm-completionInfo",n.appendChild(t),this.dom.appendChild(n),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(t){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)r==t?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&e1(this.list,n),n}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let n=this.dom.ownerDocument.defaultView,i=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),o=t.getBoundingClientRect();if(o.top>Math.min(n.innerHeight,i.bottom)-10||o.bottom<Math.max(0,i.top)+10)return null;let s=this.view.textDirection==Dt.RTL,l=s,h=!1,c,d="",f="",m=i.left,v=n.innerWidth-i.right;if(l&&m<Math.min(r.width,v)?l=!1:!l&&v<Math.min(r.width,m)&&(l=!0),r.width<=(l?m:v))d=Math.max(0,Math.min(o.top,n.innerHeight-r.height))-i.top+"px",c=Math.min(400,l?m:v)+"px";else{h=!0,c=Math.min(400,(s?i.right:n.innerWidth-i.left)-30)+"px";let C=n.innerHeight-i.bottom;C>=r.height||C>i.top?d=o.bottom-i.top+"px":f=i.bottom-o.top+"px"}return{top:d,bottom:f,maxWidth:c,class:h?s?"left-narrow":"right-narrow":l?"left":"right"}}positionInfo(t){this.info&&(t?(this.info.style.top=t.top,this.info.style.bottom=t.bottom,this.info.style.maxWidth=t.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+t.class):this.info.style.top="-1e6px")}createListBox(t,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let o=i.from;o<i.to;o++){let{completion:s,match:l}=t[o];const h=r.appendChild(document.createElement("li"));h.id=n+"-"+o,h.setAttribute("role","option");let c=this.optionClass(s);c&&(h.className=c);for(let d of this.optionContent){let f=d(s,this.view.state,l);f&&h.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<t.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function t1(e){return t=>new Ky(t,e)}function e1(e,t){let n=e.getBoundingClientRect(),i=t.getBoundingClientRect();i.top<n.top?e.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(e.scrollTop+=i.bottom-n.bottom)}function Rp(e){return(e.boost||0)*100+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}function n1(e,t){let n=[],i=0;for(let l of e)if(l.hasResult())if(l.result.filter===!1){let h=l.result.getMatch;for(let c of l.result.options){let d=[1e9-i++];if(h)for(let f of h(c))d.push(f);n.push(new Lp(c,l,d))}}else{let h=new Vy(t.sliceDoc(l.from,l.to)),c;for(let d of l.result.options)(c=h.match(d.label))&&(d.boost!=null&&(c[0]+=d.boost),n.push(new Lp(d,l,c)))}let r=[],o=null,s=t.facet(Te).compareCompletions;for(let l of n.sort((h,c)=>c.match[0]-h.match[0]||s(h.completion,c.completion)))!o||o.label!=l.completion.label||o.detail!=l.completion.detail||o.type!=null&&l.completion.type!=null&&o.type!=l.completion.type||o.apply!=l.completion.apply?r.push(l):Rp(l.completion)>Rp(o)&&(r[r.length-1]=l),o=l.completion;return r}class or{constructor(t,n,i,r,o){this.options=t,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=o}setSelected(t,n){return t==this.selected||t>=this.options.length?this:new or(this.options,Bp(n,t),this.tooltip,this.timestamp,t)}static build(t,n,i,r,o){let s=n1(t,n);if(!s.length)return null;let l=n.facet(Te).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let h=r.options[r.selected].completion;for(let c=0;c<s.length;c++)if(s[c].completion==h){l=c;break}}return new or(s,Bp(i,l),{pos:t.reduce((h,c)=>c.hasResult()?Math.min(h,c.from):h,1e8),create:t1(ke),above:o.aboveCursor},r?r.timestamp:Date.now(),l)}map(t){return new or(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class As{constructor(t,n,i){this.active=t,this.id=n,this.open=i}static start(){return new As(s1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:n}=t,i=n.facet(Te),r=(i.override||n.languageDataAt("autocomplete",En(n)).map(Gy)).map(s=>(this.active.find(l=>l.source==s)||new me(s,this.active.some(l=>l.state!=0)?1:0)).update(t,i));r.length==this.active.length&&r.every((s,l)=>s==this.active[l])&&(r=this.active);let o=t.selection||r.some(s=>s.hasResult()&&t.changes.touchesRange(s.from,s.to))||!i1(r,this.active)?or.build(r,n,this.id,this.open,i):this.open&&t.docChanged?this.open.map(t.changes):this.open;!o&&r.every(s=>s.state!=1)&&r.some(s=>s.hasResult())&&(r=r.map(s=>s.hasResult()?new me(s.source,0):s));for(let s of t.effects)s.is(Yp)&&(o=o&&o.setSelected(s.value,this.id));return r==this.active&&o==this.open?this:new As(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:r1}}function i1(e,t){if(e==t)return!0;for(let n=0,i=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;i<t.length&&!t[i].hasResult;)i++;let r=n==e.length,o=i==t.length;if(r||o)return r==o;if(e[n++].result!=t[i++].result)return!1}}const r1={"aria-autocomplete":"list"};function Bp(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}const s1=[];function Ia(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class me{constructor(t,n,i=-1){this.source=t,this.state=n,this.explicitPos=i}hasResult(){return!1}update(t,n){let i=Ia(t),r=this;i?r=r.handleUserEvent(t,i,n):t.docChanged?r=r.handleChange(t):t.selection&&r.state!=0&&(r=new me(r.source,0));for(let o of t.effects)if(o.is(Qa))r=new me(r.source,1,o.value?En(t.state):-1);else if(o.is(Ts))r=new me(r.source,0);else if(o.is(Mp))for(let s of o.value)s.source==r.source&&(r=s);return r}handleUserEvent(t,n,i){return n=="delete"||!i.activateOnTyping?this.map(t.changes):new me(this.source,1)}handleChange(t){return t.changes.touchesRange(En(t.startState))?new me(this.source,0):this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new me(this.source,this.state,t.mapPos(this.explicitPos))}}class ar extends me{constructor(t,n,i,r,o){super(t,2,n),this.result=i,this.from=r,this.to=o}hasResult(){return!0}handleUserEvent(t,n,i){var r;let o=t.changes.mapPos(this.from),s=t.changes.mapPos(this.to,1),l=En(t.state);if((this.explicitPos<0?l<=o:l<this.from)||l>s||n=="delete"&&En(t.startState)==this.from)return new me(this.source,n=="input"&&i.activateOnTyping?1:0);let h=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos),c;return o1(this.result.validFor,t.state,o,s)?new ar(this.source,h,this.result,o,s):this.result.update&&(c=this.result.update(this.result,o,s,new _p(t.state,l,h>=0)))?new ar(this.source,h,c,c.from,(r=c.to)!==null&&r!==void 0?r:En(t.state)):new me(this.source,1,h)}handleChange(t){return t.changes.touchesRange(this.from,this.to)?new me(this.source,0):this.map(t.changes)}map(t){return t.empty?this:new ar(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1))}}function o1(e,t,n,i){if(!e)return!1;let r=t.sliceDoc(n,i);return typeof e=="function"?e(r,n,i,t):Xp(e,!0).test(r)}const Qa=it.define(),Ts=it.define(),Mp=it.define({map(e,t){return e.map(n=>n.map(t))}}),Yp=it.define(),ke=Ft.define({create(){return As.start()},update(e,t){return e.update(t)},provide:e=>[qo.from(e,t=>t.tooltip),tt.contentAttributes.from(e,t=>t.attrs)]});function ks(e,t="option"){return n=>{let i=n.state.field(ke,!1);if(!i||!i.open||Date.now()-i.open.timestamp<n.state.facet(Te).interactionDelay)return!1;let r=1,o;t=="page"&&(o=zm(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,l=i.open.selected>-1?i.open.selected+r*(e?1:-1):e?0:s-1;return l<0?l=t=="page"?0:s-1:l>=s&&(l=t=="page"?s-1:0),n.dispatch({effects:Yp.of(l)}),!0}}const a1=e=>{let t=e.state.field(ke,!1);return e.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<e.state.facet(Te).interactionDelay?!1:($p(e,t.open.options[t.open.selected]),!0)},l1=e=>e.state.field(ke,!1)?(e.dispatch({effects:Qa.of(!0)}),!0):!1,h1=e=>{let t=e.state.field(ke,!1);return!t||!t.active.some(n=>n.state!=0)?!1:(e.dispatch({effects:Ts.of(null)}),!0)};class u1{constructor(t,n){this.active=t,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const Wp=50,c1=50,p1=1e3,d1=Qt.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(ke).active)t.state==1&&this.startQuery(t)}update(e){let t=e.state.field(ke);if(!e.selectionSet&&!e.docChanged&&e.startState.field(ke)==t)return;let n=e.transactions.some(i=>(i.selection||i.docChanged)&&!Ia(i));for(let i=0;i<this.running.length;i++){let r=this.running[i];if(n||r.updates.length+e.transactions.length>c1&&Date.now()-r.time>p1){for(let o of r.context.abortListeners)try{o()}catch(s){ve(this.view.state,s)}r.context.abortListeners=null,this.running.splice(i--,1)}else r.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some(i=>i.state==1&&!this.running.some(r=>r.active.source==i.source))?setTimeout(()=>this.startUpdate(),Wp):-1,this.composing!=0)for(let i of e.transactions)Ia(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(ke);for(let n of t.active)n.state==1&&!this.running.some(i=>i.active.source==n.source)&&this.startQuery(n)}startQuery(e){let{state:t}=this.view,n=En(t),i=new _p(t,n,e.explicitPos==n),r=new u1(e,i);this.running.push(r),Promise.resolve(e.source(i)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Ts.of(null)}),ve(this.view.state,o)})}scheduleAccept(){this.running.every(e=>e.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),Wp))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(Te);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(r.done===void 0)continue;if(this.running.splice(i--,1),r.done){let s=new ar(r.active.source,r.active.explicitPos,r.done,r.done.from,(e=r.done.to)!==null&&e!==void 0?e:En(r.updates.length?r.updates[0].startState:this.view.state));for(let l of r.updates)s=s.update(l,n);if(s.hasResult()){t.push(s);continue}}let o=this.view.state.field(ke).active.find(s=>s.source==r.active.source);if(o&&o.state==1)if(r.done==null){let s=new me(r.active.source,0);for(let l of r.updates)s=s.update(l,n);s.state!=1&&t.push(s)}else this.startQuery(o)}t.length&&this.view.dispatch({effects:Mp.of(t)})}},{eventHandlers:{blur(){let e=this.view.state.field(ke,!1);e&&e.tooltip&&this.view.state.facet(Te).closeOnBlur&&this.view.dispatch({effects:Ts.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Qa.of(!1)}),20),this.composing=0}}}),jp=tt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class f1{constructor(t,n,i,r){this.field=t,this.line=n,this.from=i,this.to=r}}class La{constructor(t,n,i){this.field=t,this.from=n,this.to=i}map(t){let n=t.mapPos(this.from,-1,qt.TrackDel),i=t.mapPos(this.to,1,qt.TrackDel);return n==null||i==null?null:new La(this.field,n,i)}}class Xa{constructor(t,n){this.lines=t,this.fieldPositions=n}instantiate(t,n){let i=[],r=[n],o=t.doc.lineAt(n),s=/^\s*/.exec(o.text)[0];for(let h of this.lines){if(i.length){let c=s,d=/^\t*/.exec(h)[0].length;for(let f=0;f<d;f++)c+=t.facet(tr);r.push(n+c.length-d),h=c+h.slice(d)}i.push(h),n+=h.length+1}let l=this.fieldPositions.map(h=>new La(h.field,r[h.line]+h.from,r[h.line]+h.to));return{text:i,ranges:l}}static parse(t){let n=[],i=[],r=[],o;for(let s of t.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(s);){let l=o[1]?+o[1]:null,h=o[2]||o[3]||"",c=-1;for(let d=0;d<n.length;d++)(l!=null?n[d].seq==l:h?n[d].name==h:!1)&&(c=d);if(c<0){let d=0;for(;d<n.length&&(l==null||n[d].seq!=null&&n[d].seq<l);)d++;n.splice(d,0,{seq:l,name:h}),c=d;for(let f of r)f.field>=c&&f.field++}r.push(new f1(c,i.length,o.index,o.index+h.length)),s=s.slice(0,o.index)+h+s.slice(o.index+o[0].length)}for(let l;l=/([$#])\\{/.exec(s);){s=s.slice(0,l.index)+l[1]+"{"+s.slice(l.index+l[0].length);for(let h of r)h.line==i.length&&h.from>l.index&&(h.from--,h.to--)}i.push(s)}return new Xa(i,r)}}let m1=et.widget({widget:new class extends sn{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),O1=et.mark({class:"cm-snippetField"});class pi{constructor(t,n){this.ranges=t,this.active=n,this.deco=et.set(t.map(i=>(i.from==i.to?m1:O1).range(i.from,i.to)))}map(t){let n=[];for(let i of this.ranges){let r=i.map(t);if(!r)return null;n.push(r)}return new pi(n,this.active)}selectionInsideField(t){return t.ranges.every(n=>this.ranges.some(i=>i.field==this.active&&i.from<=n.from&&i.to>=n.to))}}const lr=it.define({map(e,t){return e&&e.map(t)}}),g1=it.define(),hr=Ft.define({create(){return null},update(e,t){for(let n of t.effects){if(n.is(lr))return n.value;if(n.is(g1)&&e)return new pi(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>tt.decorations.from(e,t=>t?t.deco:et.none)});function $a(e,t){return Y.create(e.filter(n=>n.field==t).map(n=>Y.range(n.from,n.to)))}function y1(e){let t=Xa.parse(e);return(n,i,r,o)=>{let{text:s,ranges:l}=t.instantiate(n.state,r),h={changes:{from:r,to:o,insert:gt.of(s)},scrollIntoView:!0};if(l.length&&(h.selection=$a(l,0)),l.length>1){let c=new pi(l,0),d=h.effects=[lr.of(c)];n.state.field(hr,!1)===void 0&&d.push(it.appendConfig.of([hr,C1,w1,jp]))}n.dispatch(n.state.update(h))}}function Zp(e){return({state:t,dispatch:n})=>{let i=t.field(hr,!1);if(!i||e<0&&i.active==0)return!1;let r=i.active+e,o=e>0&&!i.ranges.some(s=>s.field==r+e);return n(t.update({selection:$a(i.ranges,r),effects:lr.of(o?null:new pi(i.ranges,r))})),!0}}const x1=({state:e,dispatch:t})=>e.field(hr,!1)?(t(e.update({effects:lr.of(null)})),!0):!1,v1=Zp(1),P1=Zp(-1),S1=[{key:"Tab",run:v1,shift:P1},{key:"Escape",run:x1}],zp=H.define({combine(e){return e.length?e[0]:S1}}),C1=Qn.highest(Zi.compute([zp],e=>e.facet(zp)));function Ne(e,t){return Object.assign(Object.assign({},t),{apply:y1(e)})}const w1=tt.domEventHandlers({mousedown(e,t){let n=t.state.field(hr,!1),i;if(!n||(i=t.posAtCoords({x:e.clientX,y:e.clientY}))==null)return!1;let r=n.ranges.find(o=>o.from<=i&&o.to>=i);return!r||r.field==n.active?!1:(t.dispatch({selection:$a(n.ranges,r.field),effects:lr.of(n.ranges.some(o=>o.field>r.field)?new pi(n.ranges,r.field):null)}),!0)}}),_s={brackets:["(","[","{","'",'"'],before:")]}:;>"},Yn=it.define({map(e,t){let n=t.mapPos(e,-1,qt.TrackAfter);return n==null?void 0:n}}),Na=it.define({map(e,t){return t.mapPos(e)}}),Fa=new class extends Xn{};Fa.startSide=1,Fa.endSide=-1;const qp=Ft.define({create(){return yt.empty},update(e,t){if(t.selection){let n=t.state.doc.lineAt(t.selection.main.head).from,i=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(i,-1)&&(e=yt.empty)}e=e.map(t.changes);for(let n of t.effects)n.is(Yn)?e=e.update({add:[Fa.range(n.value,n.value+1)]}):n.is(Na)&&(e=e.update({filter:i=>i!=n.value}));return e}});function b1(){return[D1,qp]}const Ra="()[]{}<>";function Up(e){for(let t=0;t<Ra.length;t+=2)if(Ra.charCodeAt(t)==e)return Ra.charAt(t+1);return Gs(e<128?e:e+1)}function Gp(e,t){return e.languageDataAt("closeBrackets",t)[0]||_s}const E1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),D1=tt.inputHandler.of((e,t,n,i)=>{if((E1?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let r=e.state.selection.main;if(i.length>2||i.length==2&&ye(zt(i,0))==1||t!=r.from||n!=r.to)return!1;let o=k1(e.state,i);return o?(e.dispatch(o),!0):!1}),A1=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Gp(e,e.selection.main.head).brackets||_s.brackets,i=null,r=e.changeByRange(o=>{if(o.empty){let s=_1(e.doc,o.head);for(let l of n)if(l==s&&Is(e.doc,o.head)==Up(zt(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:Y.cursor(o.head-l.length)}}return{range:i=o}});return i||t(e.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},T1=[{key:"Backspace",run:A1}];function k1(e,t){let n=Gp(e,e.selection.main.head),i=n.brackets||_s.brackets;for(let r of i){let o=Up(zt(r,0));if(t==r)return o==r?L1(e,r,i.indexOf(r+r+r)>-1):I1(e,r,o,n.before||_s.before);if(t==o&&Vp(e,e.selection.main.from))return Q1(e,r,o)}return null}function Vp(e,t){let n=!1;return e.field(qp).between(0,e.doc.length,i=>{i==t&&(n=!0)}),n}function Is(e,t){let n=e.sliceString(t,t+2);return n.slice(0,ye(zt(n,0)))}function _1(e,t){let n=e.sliceString(t-2,t);return ye(zt(n,0))==n.length?n:n.slice(1)}function I1(e,t,n,i){let r=null,o=e.changeByRange(s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:n,from:s.to}],effects:Yn.of(s.to+t.length),range:Y.range(s.anchor+t.length,s.head+t.length)};let l=Is(e.doc,s.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:t+n,from:s.head},effects:Yn.of(s.head+t.length),range:Y.cursor(s.head+t.length)}:{range:r=s}});return r?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Q1(e,t,n){let i=null,r=e.selection.ranges.map(o=>o.empty&&Is(e.doc,o.head)==n?Y.cursor(o.head+n.length):i=o);return i?null:e.update({selection:Y.create(r,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map(({from:o})=>Na.of(o))})}function L1(e,t,n){let i=null,r=e.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:t,from:o.to}],effects:Yn.of(o.to+t.length),range:Y.range(o.anchor+t.length,o.head+t.length)};let s=o.head,l=Is(e.doc,s);if(l==t){if(Hp(e,s))return{changes:{insert:t+t,from:s},effects:Yn.of(s+t.length),range:Y.cursor(s+t.length)};if(Vp(e,s)){let h=n&&e.sliceDoc(s,s+t.length*3)==t+t+t;return{range:Y.cursor(s+t.length*(h?3:1)),effects:Na.of(s)}}}else{if(n&&e.sliceDoc(s-2*t.length,s)==t+t&&Hp(e,s-2*t.length))return{changes:{insert:t+t+t+t,from:s},effects:Yn.of(s+t.length),range:Y.cursor(s+t.length)};if(e.charCategorizer(s)(l)!=Et.Word){let h=e.sliceDoc(s-1,s);if(h!=t&&e.charCategorizer(s)(h)!=Et.Word&&!X1(e,s,t))return{changes:{insert:t+t,from:s},effects:Yn.of(s+t.length),range:Y.cursor(s+t.length)}}}return{range:i=o}});return i?null:e.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function Hp(e,t){let n=_t(e).resolveInner(t+1);return n.parent&&n.from==t}function X1(e,t,n){let i=_t(e).resolveInner(t,-1);for(let r=0;r<5;r++){if(e.sliceDoc(i.from,i.from+n.length)==n){let s=i.firstChild;for(;s&&s.from==i.from&&s.to-s.from>n.length;){if(e.sliceDoc(s.to-n.length,s.to)==n)return!1;s=s.firstChild}return!0}let o=i.to==t&&i.parent;if(!o)break;i=o}return!1}function $1(e={}){return[ke,Te.of(e),d1,N1,jp]}const Jp=[{key:"Ctrl-Space",run:l1},{key:"Escape",run:h1},{key:"ArrowDown",run:ks(!0)},{key:"ArrowUp",run:ks(!1)},{key:"PageDown",run:ks(!0,"page")},{key:"PageUp",run:ks(!1,"page")},{key:"Enter",run:a1}],N1=Qn.highest(Zi.computeN([Te],e=>e.facet(Te).defaultKeymap?[Jp]:[]));class F1{constructor(t,n,i){this.from=t,this.to=n,this.diagnostic=i}}class Wn{constructor(t,n,i){this.diagnostics=t,this.panel=n,this.selected=i}static init(t,n,i){let r=t,o=i.facet(fi).markerFilter;o&&(r=o(r));let s=et.set(r.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?et.widget({widget:new U1(l),diagnostic:l}).range(l.from):et.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new Wn(s,n,di(s))}}function di(e,t=null,n=0){let i=null;return e.between(n,1e9,(r,o,{spec:s})=>{if(!(t&&s.diagnostic!=t))return i=new F1(r,o,s.diagnostic),!1}),i}function R1(e,t){return!!(e.effects.some(n=>n.is(Ba))||e.changes.touchesRange(t.pos))}function Kp(e,t){return e.field(Ce,!1)?t:t.concat(it.appendConfig.of([Ce,tt.decorations.compute([Ce],n=>{let{selected:i,panel:r}=n.field(Ce);return!i||!r||i.from==i.to?et.none:et.set([M1.range(i.from,i.to)])}),Zm(Y1,{hideOn:R1}),V1]))}function B1(e,t){return{effects:Kp(e,[Ba.of(t)])}}const Ba=it.define(),Ma=it.define(),td=it.define(),Ce=Ft.define({create(){return new Wn(et.none,null,null)},update(e,t){if(t.docChanged){let n=e.diagnostics.map(t.changes),i=null;if(e.selected){let r=t.changes.mapPos(e.selected.from,1);i=di(n,e.selected.diagnostic,r)||di(n,null,r)}e=new Wn(n,e.panel,i)}for(let n of t.effects)n.is(Ba)?e=Wn.init(n.value,e.panel,t.state):n.is(Ma)?e=new Wn(e.diagnostics,n.value?Qs.open:null,e.selected):n.is(td)&&(e=new Wn(e.diagnostics,e.panel,n.value));return e},provide:e=>[Gi.from(e,t=>t.panel),tt.decorations.from(e,t=>t.diagnostics)]}),M1=et.mark({class:"cm-lintRange cm-lintRange-active"});function Y1(e,t,n){let{diagnostics:i}=e.state.field(Ce),r=[],o=2e8,s=0;i.between(t-(n<0?1:0),t+(n>0?1:0),(h,c,{spec:d})=>{t>=h&&t<=c&&(h==c||(t>h||n>0)&&(t<c||n<0))&&(r.push(d.diagnostic),o=Math.min(h,o),s=Math.max(c,s))});let l=e.state.facet(fi).tooltipFilter;return l&&(r=l(r)),r.length?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create(){return{dom:W1(e,r)}}}:null}function W1(e,t){return Pt("ul",{class:"cm-tooltip-lint"},t.map(n=>id(e,n,!1)))}const j1=e=>{let t=e.state.field(Ce,!1);(!t||!t.panel)&&e.dispatch({effects:Kp(e.state,[Ma.of(!0)])});let n=Ui(e,Qs.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},ed=e=>{let t=e.state.field(Ce,!1);return!t||!t.panel?!1:(e.dispatch({effects:Ma.of(!1)}),!0)},Z1=e=>{let t=e.state.field(Ce,!1);if(!t)return!1;let n=e.state.selection.main,i=t.diagnostics.iter(n.to+1);return!i.value&&(i=t.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},z1=[{key:"Mod-Shift-m",run:j1},{key:"F8",run:Z1}],q1=Qt.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(fi);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:t}=this.view,{sources:n}=t.facet(fi);Promise.all(n.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((o,s)=>o.concat(s));this.view.state.doc==t.doc&&this.view.dispatch(B1(this.view.state,r))},i=>{ve(this.view.state,i)})}}update(e){let t=e.state.facet(fi);(e.docChanged||t!=e.startState.facet(fi))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),fi=H.define({combine(e){return Object.assign({sources:e.map(t=>t.source)},We(e.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:q1});function nd(e){let t=[];if(e)t:for(let{name:n}of e){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!t.some(o=>o.toLowerCase()==r.toLowerCase())){t.push(r);continue t}}t.push("")}return t}function id(e,t,n){var i;let r=n?nd(t.actions):[];return Pt("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Pt("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),(i=t.actions)===null||i===void 0?void 0:i.map((o,s)=>{let l=f=>{f.preventDefault();let m=di(e.state.field(Ce).diagnostics,t);m&&o.apply(e,m.from,m.to)},{name:h}=o,c=r[s]?h.indexOf(r[s]):-1,d=c<0?h:[h.slice(0,c),Pt("u",h.slice(c,c+1)),h.slice(c+1)];return Pt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${h}${c<0?"":` (access key "${r[s]})"`}.`},d)}),t.source&&Pt("div",{class:"cm-diagnosticSource"},t.source))}class U1 extends sn{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return Pt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class rd{constructor(t,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=id(t,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Qs{constructor(t){this.view=t,this.items=[];let n=r=>{if(r.keyCode==27)ed(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=nd(o.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==r.keyCode){let h=di(this.view.state.field(Ce).diagnostics,o);h&&o.actions[l].apply(t,h.from,h.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=Pt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Pt("div",{class:"cm-panel-lint"},this.list,Pt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ed(this.view)},"\xD7")),this.update()}get selectedIndex(){let t=this.view.state.field(Ce).selected;if(!t)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==t.diagnostic)return n;return-1}update(){let{diagnostics:t,selected:n}=this.view.state.field(Ce),i=0,r=!1,o=null;for(t.between(0,this.view.state.doc.length,(s,l,{spec:h})=>{let c=-1,d;for(let f=i;f<this.items.length;f++)if(this.items[f].diagnostic==h.diagnostic){c=f;break}c<0?(d=new rd(this.view,h.diagnostic),this.items.splice(i,0,d),r=!0):(d=this.items[c],c>i&&(this.items.splice(i,c-i),r=!0)),n&&d.diagnostic==n.diagnostic?d.dom.hasAttribute("aria-selected")||(d.dom.setAttribute("aria-selected","true"),o=d):d.dom.hasAttribute("aria-selected")&&d.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new rd(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:l})=>{s.top<l.top?this.list.scrollTop-=l.top-s.top:s.bottom>l.bottom&&(this.list.scrollTop+=s.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let t=this.list.firstChild;function n(){let i=t;t=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;t!=i.dom;)n();t=i.dom.nextSibling}else this.list.insertBefore(i.dom,t);for(;t;)n()}moveSelection(t){if(this.selectedIndex<0)return;let n=this.view.state.field(Ce),i=di(n.diagnostics,this.items[t].diagnostic);!i||this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:td.of(i)})}static open(t){return new Qs(t)}}function G1(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function Ya(e){return G1(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const V1=tt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ya("#d11")},".cm-lintRange-warning":{backgroundImage:Ya("orange")},".cm-lintRange-info":{backgroundImage:Ya("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),H1=(()=>[eO(),rO(),Sm(),xg(),ZO(),um(),Om(),ft.allowMultipleSelections.of(!0),IO(),qO(VO,{fallback:!0}),ig(),b1(),$1(),Lm(),Nm(),Am(),Cy(),Zi.of([...T1,...gy,...Yy,...Ag,...YO,...Jp,...z1])])();class Ls{constructor(t,n,i,r,o,s,l,h,c,d=0,f){this.p=t,this.stack=n,this.state=i,this.reducePos=r,this.pos=o,this.score=s,this.buffer=l,this.bufferBase=h,this.curContext=c,this.lookAhead=d,this.parent=f}toString(){return`[${this.stack.filter((t,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,n,i=0){let r=t.parser.context;return new Ls(t,[],n,i,i,0,[],0,r?new sd(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=t}reduce(t){let n=t>>19,i=t&65535,{parser:r}=this.p,o=r.dynamicPrecedence(i);if(o&&(this.score+=o),n==0){this.pushState(r.getGoto(this.state,i,!0),this.reducePos),i<r.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let s=this.stack.length-(n-1)*3-(t&262144?6:0),l=this.stack[s-2],h=this.stack[s-1],c=this.bufferBase+this.buffer.length-h;if(i<r.minRepeatTerm||t&131072){let d=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,d,c+4,!0)}if(t&262144)this.state=this.stack[s];else{let d=this.stack[s-3];this.state=r.getGoto(d,i,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(i,l)}storeNode(t,n,i,r=4,o=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,l=this.buffer.length;if(l==0&&s.parent&&(l=s.bufferBase-s.parent.bufferBase,s=s.parent),l>0&&s.buffer[l-4]==0&&s.buffer[l-1]>-1){if(n==i)return;if(s.buffer[l-2]>=n){s.buffer[l-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(t,n,i,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0)for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4);this.buffer[s]=t,this.buffer[s+1]=n,this.buffer[s+2]=i,this.buffer[s+3]=r}}shift(t,n,i){let r=this.pos;if(t&131072)this.pushState(t&65535,this.pos);else if((t&262144)==0){let o=t,{parser:s}=this.p;(i>this.pos||n<=s.maxNode)&&(this.pos=i,s.stateFlag(o,1)||(this.reducePos=i)),this.pushState(o,r),this.shiftContext(n,r),n<=s.maxNode&&this.buffer.push(n,r,i,4)}else this.pos=i,this.shiftContext(n,r),n<=this.p.parser.maxNode&&this.buffer.push(n,r,i,4)}apply(t,n,i){t&65536?this.reduce(t):this.shift(t,n,i)}useNode(t,n){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=t)&&(this.p.reused.push(t),i++);let r=this.pos;this.reducePos=this.pos=r+t.length,this.pushState(n,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,n=t.buffer.length;for(;n>0&&t.buffer[n-2]>t.reducePos;)n-=4;let i=t.buffer.slice(n),r=t.bufferBase+n;for(;t&&r==t.bufferBase;)t=t.parent;return new Ls(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,t)}recoverByDelete(t,n){let i=t<=this.p.parser.maxNode;i&&this.storeNode(t,this.pos,n,4),this.storeNode(0,this.pos,n,i?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(t){for(let n=new J1(this);;){let i=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,t);if((i&65536)==0)return!0;if(i==0)return!1;n.reduce(i)}}recoverByInsert(t){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>4<<1||this.stack.length>=120){let r=[];for(let o=0,s;o<n.length;o+=2)(s=n[o+1])!=this.state&&this.p.parser.hasAction(s,t)&&r.push(n[o],s);if(this.stack.length<120)for(let o=0;r.length<4<<1&&o<n.length;o+=2){let s=n[o+1];r.some((l,h)=>h&1&&l==s)||r.push(n[o],s)}n=r}let i=[];for(let r=0;r<n.length&&i.length<4;r+=2){let o=n[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(n[r],this.pos),s.score-=200,i.push(s)}return i}forceReduce(){let t=this.p.parser.stateSlot(this.state,5);if((t&65536)==0)return!1;let{parser:n}=this.p;if(!n.validAction(this.state,t)){let i=t>>19,r=t&65535,o=this.stack.length-i*3;if(o<0||n.getGoto(this.stack[o],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=t.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(n)))}reduceContext(t,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(n)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(t){if(t!=this.curContext.context){let n=new sd(this.curContext.tracker,t);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class sd{constructor(t,n){this.tracker=t,this.context=n,this.hash=t.strict?t.hash(n):0}}var od;(function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(od||(od={}));class J1{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let n=t&65535,i=t>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=r}}class Xs{constructor(t,n,i){this.stack=t,this.pos=n,this.index=i,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,n=t.bufferBase+t.buffer.length){return new Xs(t,n,n-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Xs(this.stack,this.pos,this.index)}}class $s{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const ad=new $s;class K1{constructor(t,n){this.input=t,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=ad,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(t,n){let i=this.range,r=this.rangeIndex,o=this.pos+t;for(;o<i.from;){if(!r)return null;let s=this.ranges[--r];o-=i.from-s.to,i=s}for(;n<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-i.to,i=s}return o}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let n of this.ranges)if(n.to>t)return Math.max(t,n.from);return this.end}peek(t){let n=this.chunkOff+t,i,r;if(n>=0&&n<this.chunk.length)i=this.pos+t,r=this.chunk.charCodeAt(n);else{let o=this.resolveOffset(t,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let s=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(t,n=0){let i=n?this.resolveOffset(n,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),n=this.pos+t.length;this.chunk=n>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,n){if(n?(this.token=n,n.start=t,n.lookAhead=t+1,n.value=n.extended=-1):this.token=ad,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,n){if(t>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,n-this.chunkPos);if(t>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,n-this.chunk2Pos);if(t>=this.range.from&&n<=this.range.to)return this.input.read(t,n);let i="";for(let r of this.ranges){if(r.from>=n)break;r.to>t&&(i+=this.input.read(Math.max(r.from,t),Math.min(r.to,n)))}return i}}class Ns{constructor(t,n){this.data=t,this.id=n}token(t,n){tx(this.data,t,n,this.id)}}Ns.prototype.contextual=Ns.prototype.fallback=Ns.prototype.extend=!1;class ur{constructor(t,n={}){this.token=t,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function tx(e,t,n,i){let r=0,o=1<<i,{parser:s}=n.p,{dialect:l}=s;t:for(;(o&e[r])!=0;){let h=e[r+1];for(let m=r+3;m<h;m+=2)if((e[m+1]&o)>0){let v=e[m];if(l.allows(v)&&(t.token.value==-1||t.token.value==v||s.overrides(v,t.token.value))){t.acceptToken(v);break}}let c=t.next,d=0,f=e[r+2];if(t.next<0&&f>d&&e[h+f*3-3]==65535){r=e[h+f*3-1];continue t}for(;d<f;){let m=d+f>>1,v=h+m+(m<<1),C=e[v],O=e[v+1];if(c<C)f=m;else if(c>=O)d=m+1;else{r=e[v+2],t.advance();continue t}}break}}function Fs(e,t=Uint16Array){if(typeof e!="string")return e;let n=null;for(let i=0,r=0;i<e.length;){let o=0;for(;;){let s=e.charCodeAt(i++),l=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let h=s-32;if(h>=46&&(h-=46,l=!0),o+=h,l)break;o*=46}n?n[r++]=o:n=new t(o)}return n}const Fe=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let Wa=null;var ld;(function(e){e[e.Margin=25]="Margin"})(ld||(ld={}));function hd(e,t,n){let i=e.cursor(Wt.IncludeAnonymous);for(i.moveTo(t);;)if(!(n<0?i.childBefore(t):i.childAfter(t)))for(;;){if((n<0?i.to<t:i.from>t)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(e.length,Math.max(i.from+1,t+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:e.length}}class ex{constructor(t,n){this.fragments=t,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?hd(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?hd(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let i=this.trees[n],r=this.index[n];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],s=this.start[n]+i.positions[r];if(s>t)return this.nextStart=s,null;if(o instanceof Lt){if(s==t){if(s<this.safeFrom)return null;let l=s+o.length;if(l<=this.safeTo){let h=o.prop(ut.lookAhead);if(!h||l+h<this.fragment.to)return o}}this.index[n]++,s+o.length>=Math.max(this.safeFrom,t)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[n]++,this.nextStart=s+o.length}}}class nx{constructor(t,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(i=>new $s)}getActions(t){let n=0,i=null,{parser:r}=t.p,{tokenizers:o}=r,s=r.stateSlot(t.state,3),l=t.curContext?t.curContext.hash:0,h=0;for(let c=0;c<o.length;c++){if((1<<c&s)==0)continue;let d=o[c],f=this.tokens[c];if(!(i&&!d.fallback)&&((d.contextual||f.start!=t.pos||f.mask!=s||f.context!=l)&&(this.updateCachedToken(f,d,t),f.mask=s,f.context=l),f.lookAhead>f.end+25&&(h=Math.max(f.lookAhead,h)),f.value!=0)){let m=n;if(f.extended>-1&&(n=this.addActions(t,f.extended,f.end,n)),n=this.addActions(t,f.value,f.end,n),!d.extend&&(i=f,n>m))break}}for(;this.actions.length>n;)this.actions.pop();return h&&t.setLookAhead(h),!i&&t.pos==this.stream.end&&(i=new $s,i.value=t.p.parser.eofTerm,i.start=i.end=t.pos,n=this.addActions(t,i.value,i.end,n)),this.mainToken=i,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let n=new $s,{pos:i,p:r}=t;return n.start=i,n.end=Math.min(i+1,r.stream.end),n.value=i==r.stream.end?r.parser.eofTerm:0,n}updateCachedToken(t,n,i){let r=this.stream.clipPos(i.pos);if(n.token(this.stream.reset(r,t),i),t.value>-1){let{parser:o}=i.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==t.value){let l=o.specializers[s](this.stream.read(t.start,t.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){(l&1)==0?t.value=l>>1:t.extended=l>>1;break}}}else t.value=0,t.end=this.stream.clipPos(r+1)}putAction(t,n,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==t)return r;return this.actions[r++]=t,this.actions[r++]=n,this.actions[r++]=i,r}addActions(t,n,i,r){let{state:o}=t,{parser:s}=t.p,{data:l}=s;for(let h=0;h<2;h++)for(let c=s.stateSlot(o,h?2:1);;c+=3){if(l[c]==65535)if(l[c+1]==1)c=ln(l,c+2);else{r==0&&l[c+1]==2&&(r=this.putAction(ln(l,c+2),n,i,r));break}l[c]==n&&(r=this.putAction(ln(l,c+1),n,i,r))}return r}}var ud;(function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo"})(ud||(ud={}));class ix{constructor(t,n,i,r){this.parser=t,this.input=n,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new K1(n,r),this.tokens=new nx(t,this.stream),this.topTerm=t.top[1];let{from:o}=r[0];this.stacks=[Ls.start(this,t.top[0],o)],this.fragments=i.length&&this.stream.end-o>t.bufferLength*4?new ex(i,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,n=this.minStackPos,i=this.stacks=[],r,o;for(let s=0;s<t.length;s++){let l=t[s];for(;;){if(this.tokens.mainToken=null,l.pos>n)i.push(l);else{if(this.advanceStack(l,i,t))continue;{r||(r=[],o=[]),r.push(l);let h=this.tokens.getMainToken(l);o.push(h.value,h.end)}}break}}if(!i.length){let s=r&&ox(r);if(s)return this.stackToTree(s);if(this.parser.strict)throw Fe&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(s)return this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(i.length>s)for(i.sort((l,h)=>h.score-l.score);i.length>s;)i.pop();i.some(l=>l.reducePos>n)&&this.recovering--}else if(i.length>1){t:for(let s=0;s<i.length-1;s++){let l=i[s];for(let h=s+1;h<i.length;h++){let c=i[h];if(l.sameState(c)||l.buffer.length>500&&c.buffer.length>500)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)i.splice(h--,1);else{i.splice(s--,1);continue t}}}}this.minStackPos=i[0].pos;for(let s=1;s<i.length;s++)i[s].pos<this.minStackPos&&(this.minStackPos=i[s].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,n,i){let r=t.pos,{parser:o}=this,s=Fe?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let c=t.curContext&&t.curContext.tracker.strict,d=c?t.curContext.hash:0;for(let f=this.fragments.nodeAt(r);f;){let m=this.parser.nodeSet.types[f.type.id]==f.type?o.getGoto(t.state,f.type.id):-1;if(m>-1&&f.length&&(!c||(f.prop(ut.contextHash)||0)==d))return t.useNode(f,m),Fe&&console.log(s+this.stackID(t)+` (via reuse of ${o.getName(f.type.id)})`),!0;if(!(f instanceof Lt)||f.children.length==0||f.positions[0]>0)break;let v=f.children[0];if(v instanceof Lt&&f.positions[0]==0)f=v;else break}}let l=o.stateSlot(t.state,4);if(l>0)return t.reduce(l),Fe&&console.log(s+this.stackID(t)+` (via always-reduce ${o.getName(l&65535)})`),!0;if(t.stack.length>=15e3)for(;t.stack.length>9e3&&t.forceReduce(););let h=this.tokens.getActions(t);for(let c=0;c<h.length;){let d=h[c++],f=h[c++],m=h[c++],v=c==h.length||!i,C=v?t:t.split();if(C.apply(d,f,m),Fe&&console.log(s+this.stackID(C)+` (via ${(d&65536)==0?"shift":`reduce of ${o.getName(d&65535)}`} for ${o.getName(f)} @ ${r}${C==t?"":", split"})`),v)return!0;C.pos>r?n.push(C):i.push(C)}return!1}advanceFully(t,n){let i=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>i)return cd(t,n),!0}}runRecovery(t,n,i){let r=null,o=!1;for(let s=0;s<t.length;s++){let l=t[s],h=n[s<<1],c=n[(s<<1)+1],d=Fe?this.stackID(l)+" -> ":"";if(l.deadEnd&&(o||(o=!0,l.restart(),Fe&&console.log(d+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let f=l.split(),m=d;for(let v=0;f.forceReduce()&&v<10&&(Fe&&console.log(m+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));v++)Fe&&(m=this.stackID(f)+" -> ");for(let v of l.recoverByInsert(h))Fe&&console.log(d+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,i);this.stream.end>l.pos?(c==l.pos&&(c++,h=0),l.recoverByDelete(h,c),Fe&&console.log(d+this.stackID(l)+` (via recover-delete ${this.parser.getName(h)})`),cd(l,i)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(t){return t.close(),Lt.build({buffer:Xs.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let n=(Wa||(Wa=new WeakMap)).get(t);return n||Wa.set(t,n=String.fromCodePoint(this.nextStackID++)),n+t}}function cd(e,t){for(let n=0;n<t.length;n++){let i=t[n];if(i.pos==e.pos&&i.sameState(e)){t[n].score<e.score&&(t[n]=e);return}}t.push(e)}class rx{constructor(t,n,i){this.source=t,this.flags=n,this.disabled=i}allows(t){return!this.disabled||this.disabled[t]==0}}const ja=e=>e;class sx{constructor(t){this.start=t.start,this.shift=t.shift||ja,this.reduce=t.reduce||ja,this.reuse=t.reuse||ja,this.hash=t.hash||(()=>0),this.strict=t.strict!==!1}}class Rs extends rc{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (${14})`);let n=t.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let l=0;l<t.repeatNodeCount;l++)n.push("");let i=Object.keys(t.topRules).map(l=>t.topRules[l][1]),r=[];for(let l=0;l<n.length;l++)r.push([]);function o(l,h,c){r[l].push([h,h.deserialize(String(c))])}if(t.nodeProps)for(let l of t.nodeProps){let h=l[0];typeof h=="string"&&(h=ut[h]);for(let c=1;c<l.length;){let d=l[c++];if(d>=0)o(d,h,l[c++]);else{let f=l[c+-d];for(let m=-d;m>0;m--)o(l[c++],h,f);c++}}}this.nodeSet=new Ko(n.map((l,h)=>de.define({name:h>=this.minRepeatTerm?void 0:l,id:h,props:r[h],top:i.indexOf(h)>-1,error:h==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(h)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=Ku;let s=Fs(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(dd),this.states=Fs(t.states,Uint32Array),this.data=Fs(t.stateData),this.goto=Fs(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(l=>typeof l=="number"?new Ns(s,l):l),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,n,i){let r=new ix(this,t,n,i);for(let o of this.wrappers)r=o(r,t,n,i);return r}getGoto(t,n,i=!1){let r=this.goto;if(n>=r[0])return-1;for(let o=r[n+1];;){let s=r[o++],l=s&1,h=r[o++];if(l&&i)return h;for(let c=o+(s>>1);o<c;o++)if(r[o]==t)return h;if(l)return-1}}hasAction(t,n){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(t,r?2:1),s;;o+=3){if((s=i[o])==65535)if(i[o+1]==1)s=i[o=ln(i,o+2)];else{if(i[o+1]==2)return ln(i,o+2);break}if(s==n||s==0)return ln(i,o+1)}return 0}stateSlot(t,n){return this.states[t*6+n]}stateFlag(t,n){return(this.stateSlot(t,0)&n)>0}validAction(t,n){if(n==this.stateSlot(t,4))return!0;for(let i=this.stateSlot(t,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=ln(this.data,i+2);else return!1;if(n==ln(this.data,i+1))return!0}}nextStates(t){let n=[];for(let i=this.stateSlot(t,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=ln(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];n.some((o,s)=>s&1&&o==r)||n.push(this.data[i],r)}}return n}overrides(t,n){let i=pd(this.data,this.tokenPrecTable,n);return i<0||pd(this.data,this.tokenPrecTable,t)<i}configure(t){let n=Object.assign(Object.create(Rs.prototype),this);if(t.props&&(n.nodeSet=this.nodeSet.extend(...t.props)),t.top){let i=this.topRules[t.top];if(!i)throw new RangeError(`Invalid top rule name ${t.top}`);n.top=i}return t.tokenizers&&(n.tokenizers=this.tokenizers.map(i=>{let r=t.tokenizers.find(o=>o.from==i);return r?r.to:i})),t.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=t.specializers.find(l=>l.from==i.external);if(!o)return i;let s=Object.assign(Object.assign({},i),{external:o.to});return n.specializers[r]=dd(s),s})),t.contextTracker&&(n.context=t.contextTracker),t.dialect&&(n.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(n.strict=t.strict),t.wrap&&(n.wrappers=n.wrappers.concat(t.wrap)),t.bufferLength!=null&&(n.bufferLength=t.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let n=this.dynamicPrecedences;return n==null?0:n[t]||0}parseDialect(t){let n=Object.keys(this.dialects),i=n.map(()=>!1);if(t)for(let o of t.split(" ")){let s=n.indexOf(o);s>=0&&(i[s]=!0)}let r=null;for(let o=0;o<n.length;o++)if(!i[o])for(let s=this.dialects[n[o]],l;(l=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new rx(t,i,r)}static deserialize(t){return new Rs(t)}}function ln(e,t){return e[t]|e[t+1]<<16}function pd(e,t,n){for(let i=t,r;(r=e[i])!=65535;i++)if(r==n)return i-t;return-1}function ox(e){let t=null;for(let n of e){let i=n.p.stoppedAt;(n.pos==n.p.stream.end||i!=null&&n.pos>i)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}function dd(e){if(e.external){let t=e.extend?1:0;return(n,i)=>e.external(n,i)<<1|t}return e.get}const ax=1,fd=281,md=2,lx=3,Bs=282,hx=4,ux=283,Od=284,cx=286,px=287,dx=5,fx=6,mx=1,Ox=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],gd=125,gx=123,yx=59,yd=47,xx=42,vx=43,Px=45,Sx=36,Cx=96,wx=92,bx=new sx({start:!1,shift(e,t){return t==dx||t==fx||t==cx?e:t==px},strict:!1}),Ex=new ur((e,t)=>{let{next:n}=e;(n==gd||n==-1||t.context)&&t.canShift(Od)&&e.acceptToken(Od)},{contextual:!0,fallback:!0}),Dx=new ur((e,t)=>{let{next:n}=e,i;Ox.indexOf(n)>-1||n==yd&&((i=e.peek(1))==yd||i==xx)||n!=gd&&n!=yx&&n!=-1&&!t.context&&t.canShift(fd)&&e.acceptToken(fd)},{contextual:!0}),Ax=new ur((e,t)=>{let{next:n}=e;if((n==vx||n==Px)&&(e.advance(),n==e.next)){e.advance();let i=!t.context&&t.canShift(md);e.acceptToken(i?md:lx)}},{contextual:!0}),Tx=new ur(e=>{for(let t=!1,n=0;;n++){let{next:i}=e;if(i<0){n&&e.acceptToken(Bs);break}else if(i==Cx){n?e.acceptToken(Bs):e.acceptToken(ux,1);break}else if(i==gx&&t){n==1?e.acceptToken(hx,1):e.acceptToken(Bs,-1);break}else if(i==10&&n){e.advance(),e.acceptToken(Bs);break}else i==wx&&e.advance();t=i==Sx,e.advance()}}),kx=new ur((e,t)=>{if(!(e.next!=101||!t.dialectEnabled(mx))){e.advance();for(let n=0;n<6;n++){if(e.next!="xtends".charCodeAt(n))return;e.advance()}e.next>=57&&e.next<=65||e.next>=48&&e.next<=90||e.next==95||e.next>=97&&e.next<=122||e.next>160||e.acceptToken(ax)}}),_x=oc({"get set async static":N.modifier,"for while do if else switch try catch finally return throw break continue default case":N.controlKeyword,"in of await yield void typeof delete instanceof":N.operatorKeyword,"let var const function class extends":N.definitionKeyword,"import export from":N.moduleKeyword,"with debugger as new":N.keyword,TemplateString:N.special(N.string),super:N.atom,BooleanLiteral:N.bool,this:N.self,null:N.null,Star:N.modifier,VariableName:N.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":N.function(N.variableName),VariableDefinition:N.definition(N.variableName),Label:N.labelName,PropertyName:N.propertyName,PrivatePropertyName:N.special(N.propertyName),"CallExpression/MemberExpression/PropertyName":N.function(N.propertyName),"FunctionDeclaration/VariableDefinition":N.function(N.definition(N.variableName)),"ClassDeclaration/VariableDefinition":N.definition(N.className),PropertyDefinition:N.definition(N.propertyName),PrivatePropertyDefinition:N.definition(N.special(N.propertyName)),UpdateOp:N.updateOperator,LineComment:N.lineComment,BlockComment:N.blockComment,Number:N.number,String:N.string,ArithOp:N.arithmeticOperator,LogicOp:N.logicOperator,BitOp:N.bitwiseOperator,CompareOp:N.compareOperator,RegExp:N.regexp,Equals:N.definitionOperator,Arrow:N.function(N.punctuation),": Spread":N.punctuation,"( )":N.paren,"[ ]":N.squareBracket,"{ }":N.brace,"InterpolationStart InterpolationEnd":N.special(N.brace),".":N.derefOperator,", ;":N.separator,TypeName:N.typeName,TypeDefinition:N.definition(N.typeName),"type enum interface implements namespace module declare":N.definitionKeyword,"abstract global Privacy readonly override":N.modifier,"is keyof unique infer":N.operatorKeyword,JSXAttributeValue:N.attributeValue,JSXText:N.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":N.angleBracket,"JSXIdentifier JSXNameSpacedName":N.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":N.attributeName}),Ix={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},Qx={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},Lx={__proto__:null,"<":129},Xx=Rs.deserialize({version:14,states:"$8SO`QdOOO'QQ(C|O'#ChO'XOWO'#DVO)dQdO'#D]O)tQdO'#DhO){QdO'#DrO-xQdO'#DxOOQO'#E]'#E]O.]Q`O'#E[O.bQ`O'#E[OOQ(C['#Ef'#EfO0aQ(C|O'#ItO2wQ(C|O'#IuO3eQ`O'#EzO3jQ!bO'#FaOOQ(C['#FS'#FSO3rO#tO'#FSO4QQ&jO'#FhO5bQ`O'#FgOOQ(C['#Iu'#IuOOQ(CW'#It'#ItOOQS'#J^'#J^O5gQ`O'#HpO5lQ(ChO'#HqOOQS'#Ih'#IhOOQS'#Hr'#HrQ`QdOOO){QdO'#DjO5tQ`O'#G[O5yQ&jO'#CmO6XQ`O'#EZO6dQ`O'#EgO6iQ,UO'#FRO7TQ`O'#G[O7YQ`O'#G`O7eQ`O'#G`O7sQ`O'#GcO7sQ`O'#GdO7sQ`O'#GfO5tQ`O'#GiO8dQ`O'#GlO9rQ`O'#CdO:SQ`O'#GyO:[Q`O'#HPO:[Q`O'#HRO`QdO'#HTO:[Q`O'#HVO:[Q`O'#HYO:aQ`O'#H`O:fQ(CjO'#HfO){QdO'#HhO:qQ(CjO'#HjO:|Q(CjO'#HlO5lQ(ChO'#HnO){QdO'#DWOOOW'#Ht'#HtO;XOWO,59qOOQ(C[,59q,59qO=jQtO'#ChO=tQdO'#HuO>XQ`O'#IvO@WQtO'#IvO'dQdO'#IvO@_Q`O,59wO@uQ7[O'#DbOAnQ`O'#E]OA{Q`O'#JROBWQ`O'#JQOBWQ`O'#JQOB`Q`O,5:yOBeQ`O'#JPOBlQaO'#DyO5yQ&jO'#EZOBzQ`O'#EZOCVQpO'#FROOQ(C[,5:S,5:SOC_QdO,5:SOE]Q(C|O,5:^OEyQ`O,5:dOFdQ(ChO'#JOO7YQ`O'#I}OFkQ`O'#I}OFsQ`O,5:xOFxQ`O'#I}OGWQdO,5:vOIWQ&jO'#EWOJeQ`O,5:vOKwQ&jO'#DlOLOQdO'#DqOLYQ7[O,5;PO){QdO,5;POOQS'#Er'#ErOOQS'#Et'#EtO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;ROOQS'#Ex'#ExOLbQdO,5;cOOQ(C[,5;h,5;hOOQ(C[,5;i,5;iONbQ`O,5;iOOQ(C[,5;j,5;jO){QdO'#IPONgQ(ChO,5<TO! RQ&jO,5;RO){QdO,5;fO! kQ!bO'#JVO! YQ!bO'#JVO! rQ!bO'#JVO!!TQ!bO,5;qOOOO,5;{,5;{O!!cQdO'#FcOOOO'#IO'#IOO3rO#tO,5;nO!!jQ!bO'#FeOOQ(C[,5;n,5;nO!#WQ,VO'#CrOOQ(C]'#Cu'#CuO!#kQ`O'#CuO!#pOWO'#CyO!$^Q,VO,5<QO!$eQ`O,5<SO!%tQ&jO'#FrO!&RQ`O'#FsO!&WQ`O'#FsO!&]Q&jO'#FwO!'[Q7[O'#F{O!'}Q,VO'#IqOOQ(C]'#Iq'#IqO!(XQaO'#IpO!(gQ`O'#IoO!(oQ`O'#CqOOQ(C]'#Cs'#CsOOQ(C]'#C|'#C|O!(wQ`O'#DOOJjQ&jO'#FjOJjQ&jO'#FlO!(|Q`O'#FnO!)RQ`O'#FoO!&WQ`O'#FuOJjQ&jO'#FzO!)WQ`O'#E^O!)oQ`O,5<RO`QdO,5>[OOQS'#Ik'#IkOOQS,5>],5>]OOQS-E;p-E;pO!+kQ(C|O,5:UOOQ(CX'#Cp'#CpO!,[Q&kO,5<vOOQO'#Cf'#CfO!,mQ(ChO'#IlO5bQ`O'#IlO:aQ`O,59XO!-OQ!bO,59XO!-WQ&jO,59XO5yQ&jO,59XO!-cQ`O,5:vO!-kQ`O'#GxO!-yQ`O'#JbO){QdO,5;kO!.RQ7[O,5;mO!.WQ`O,5=cO!.]Q`O,5=cO!.bQ`O,5=cO5lQ(ChO,5=cO5tQ`O,5<vO!.pQ`O'#E_O!/UQ7[O'#E`OOQ(CW'#JP'#JPO!/gQ(ChO'#J_O5lQ(ChO,5<zO7sQ`O,5=QOOQP'#Cr'#CrO!/rQ!bO,5<}O!/zQ!cO,5=OO!0VQ`O,5=QO!0[QpO,5=TO:aQ`O'#GnO5tQ`O'#GpO!0dQ`O'#GpO5yQ&jO'#GsO!0iQ`O'#GsOOQS,5=W,5=WO!0nQ`O'#GtO!0vQ`O'#CmO!0{Q`O,59OO!1VQ`O,59OO!3XQdO,59OOOQS,59O,59OO!3fQ(ChO,59OO){QdO,59OO!3qQdO'#G{OOQS'#G|'#G|OOQS'#G}'#G}O`QdO,5=eO!4RQ`O,5=eO){QdO'#DxO`QdO,5=kO`QdO,5=mO!4WQ`O,5=oO`QdO,5=qO!4]Q`O,5=tO!4bQdO,5=zOOQS,5>Q,5>QO){QdO,5>QO5lQ(ChO,5>SOOQS,5>U,5>UO!8cQ`O,5>UOOQS,5>W,5>WO!8cQ`O,5>WOOQS,5>Y,5>YO!8hQpO,59rOOOW-E;r-E;rOOQ(C[1G/]1G/]O!8mQtO,5>aO'dQdO,5>aOOQO,5>f,5>fO!8wQdO'#HuOOQO-E;s-E;sO!9UQ`O,5?bO!9^QtO,5?bO!9eQ`O,5?lOOQ(C[1G/c1G/cO!9mQ!bO'#DTOOQO'#Ix'#IxO){QdO'#IxO!:[Q!bO'#IxO!:yQ!bO'#DcO!;[Q7[O'#DcO!=gQdO'#DcO!=nQ`O'#IwO!=vQ`O,59|O!={Q`O'#EaO!>ZQ`O'#JSO!>cQ`O,5:zO!>yQ7[O'#DcO){QdO,5?mO!?TQ`O'#HzOOQO-E;x-E;xO!9eQ`O,5?lOOQ(CW1G0e1G0eO!@aQ7[O'#D|OOQ(C[,5:e,5:eO){QdO,5:eOIWQ&jO,5:eO!@hQaO,5:eO:aQ`O,5:uO!-OQ!bO,5:uO!-WQ&jO,5:uO5yQ&jO,5:uOOQ(C[1G/n1G/nOOQ(C[1G0O1G0OOOQ(CW'#EV'#EVO){QdO,5?jO!@sQ(ChO,5?jO!AUQ(ChO,5?jO!A]Q`O,5?iO!AeQ`O'#H|O!A]Q`O,5?iOOQ(CW1G0d1G0dO7YQ`O,5?iOOQ(C[1G0b1G0bO!BPQ(C|O1G0bO!CRQ(CyO,5:rOOQ(C]'#Fq'#FqO!CoQ(C}O'#IqOGWQdO1G0bO!EqQ,VO'#IyO!E{Q`O,5:WO!FQQtO'#IzO){QdO'#IzO!F[Q`O,5:]OOQ(C]'#DT'#DTOOQ(C[1G0k1G0kO!FaQ`O1G0kO!HrQ(C|O1G0mO!HyQ(C|O1G0mO!K^Q(C|O1G0mO!KeQ(C|O1G0mO!MlQ(C|O1G0mO!NPQ(C|O1G0mO#!pQ(C|O1G0mO#!wQ(C|O1G0mO#%[Q(C|O1G0mO#%cQ(C|O1G0mO#'WQ(C|O1G0mO#*QQMlO'#ChO#+{QMlO1G0}O#-vQMlO'#IuOOQ(C[1G1T1G1TO#.ZQ(C|O,5>kOOQ(CW-E;}-E;}O#.zQ(C}O1G0mOOQ(C[1G0m1G0mO#1PQ(C|O1G1QO#1pQ!bO,5;sO#1uQ!bO,5;tO#1zQ!bO'#F[O#2`Q`O'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#2eQ!bO1G1]OOQ(C[1G1]1G1]OOOO1G1f1G1fO#2sQMlO'#ItO#2}Q`O,5;}OLbQdO,5;}OOOO-E;|-E;|OOQ(C[1G1Y1G1YOOQ(C[,5<P,5<PO#3SQ!bO,5<POOQ(C],59a,59aOIWQ&jO'#C{OOOW'#Hs'#HsO#3XOWO,59eOOQ(C],59e,59eO){QdO1G1lO!)RQ`O'#IRO#3dQ`O,5<eOOQ(C],5<b,5<bOOQO'#GV'#GVOJjQ&jO,5<pOOQO'#GX'#GXOJjQ&jO,5<rOIWQ&jO,5<tOOQO1G1n1G1nO#3oQqO'#CpO#4SQqO,5<^O#4ZQ`O'#JZO5tQ`O'#JZO#4iQ`O,5<`OJjQ&jO,5<_O#4nQ`O'#FtO#4yQ`O,5<_O#5OQqO'#FqO#5]QqO'#J[O#5gQ`O'#J[OIWQ&jO'#J[O#5lQ`O,5<cOOQ(CW'#Dg'#DgO#5qQ!bO'#F|O!'VQ7[O'#F|O!'VQ7[O'#GOO#6SQ`O'#GPO!&WQ`O'#GSO#6XQ(ChO'#ITO#6dQ7[O,5<gOOQ(C],5<g,5<gO#6kQ7[O'#F|O#6yQ7[O'#F}O#7RQ7[O'#F}OOQ(C],5<u,5<uOJjQ&jO,5?[OJjQ&jO,5?[O#7WQ`O'#IUO#7cQ`O,5?ZO#7kQ`O,59]OOQ(C]'#Ch'#ChO#8[Q,VO,59jOOQ(C],59j,59jO#8}Q,VO,5<UO#9pQ,VO,5<WO#9zQ`O,5<YOOQ(C],5<Z,5<ZO#:PQ`O,5<aO#:UQ,VO,5<fOGWQdO1G1mO#:fQ`O1G1mOOQS1G3v1G3vOOQ(C[1G/p1G/pONbQ`O1G/pOOQS1G2b1G2bOIWQ&jO1G2bO){QdO1G2bOIWQ&jO1G2bO#:kQaO1G2bO#<QQ&jO'#EWOOQ(CW,5?W,5?WO#<[Q(ChO,5?WOOQS1G.s1G.sO:aQ`O1G.sO!-OQ!bO1G.sO!-WQ&jO1G.sO#<mQ`O1G0bO#<rQ`O'#ChO#<}Q`O'#JcO#=VQ`O,5=dO#=[Q`O'#JcO#=aQ`O'#JcO#=iQ`O'#I^O#=wQ`O,5?|O#>PQtO1G1VOOQ(C[1G1X1G1XO5tQ`O1G2}O#>WQ`O1G2}O#>]Q`O1G2}O#>bQ`O1G2}OOQS1G2}1G2}O#>gQ&kO1G2bO7YQ`O'#JQO7YQ`O'#EaO7YQ`O'#IWO#>xQ(ChO,5?yOOQS1G2f1G2fO!0VQ`O1G2lOIWQ&jO1G2iO#?TQ`O1G2iOOQS1G2j1G2jOIWQ&jO1G2jO#?YQaO1G2jO#?bQ7[O'#GhOOQS1G2l1G2lO!'VQ7[O'#IYO!0[QpO1G2oOOQS1G2o1G2oOOQS,5=Y,5=YO#?jQ&kO,5=[O5tQ`O,5=[O#6SQ`O,5=_O5bQ`O,5=_O!-OQ!bO,5=_O!-WQ&jO,5=_O5yQ&jO,5=_O#?{Q`O'#JaO#@WQ`O,5=`OOQS1G.j1G.jO#@]Q(ChO1G.jO#@hQ`O1G.jO#@mQ`O1G.jO5lQ(ChO1G.jO#@uQtO,5@OO#APQ`O,5@OO#A[QdO,5=gO#AcQ`O,5=gO7YQ`O,5@OOOQS1G3P1G3PO`QdO1G3POOQS1G3V1G3VOOQS1G3X1G3XO:[Q`O1G3ZO#AhQdO1G3]O#EcQdO'#H[OOQS1G3`1G3`O#EpQ`O'#HbO:aQ`O'#HdOOQS1G3f1G3fO#ExQdO1G3fO5lQ(ChO1G3lOOQS1G3n1G3nOOQ(CW'#Fx'#FxO5lQ(ChO1G3pO5lQ(ChO1G3rOOOW1G/^1G/^O#IvQpO,5<TO#JOQtO1G3{OOQO1G4Q1G4QO){QdO,5>aO#JYQ`O1G4|O#JbQ`O1G5WO#JjQ`O,5?dOLbQdO,5:{O7YQ`O,5:{O:aQ`O,59}OLbQdO,59}O!-OQ!bO,59}O#JoQMlO,59}OOQO,5:{,5:{O#JyQ7[O'#HvO#KaQ`O,5?cOOQ(C[1G/h1G/hO#KiQ7[O'#H{O#K}Q`O,5?nOOQ(CW1G0f1G0fO!;[Q7[O,59}O#LVQtO1G5XO7YQ`O,5>fOOQ(CW'#ES'#ESO#LaQ(DjO'#ETO!@XQ7[O'#D}OOQO'#Hy'#HyO#L{Q7[O,5:hOOQ(C[,5:h,5:hO#MSQ7[O'#D}O#MeQ7[O'#D}O#MlQ7[O'#EYO#MoQ7[O'#ETO#M|Q7[O'#ETO!@XQ7[O'#ETO#NaQ`O1G0PO#NfQqO1G0POOQ(C[1G0P1G0PO){QdO1G0POIWQ&jO1G0POOQ(C[1G0a1G0aO:aQ`O1G0aO!-OQ!bO1G0aO!-WQ&jO1G0aO#NmQ(C|O1G5UO){QdO1G5UO#N}Q(ChO1G5UO$ `Q`O1G5TO7YQ`O,5>hOOQO,5>h,5>hO$ hQ`O,5>hOOQO-E;z-E;zO$ `Q`O1G5TO$ vQ(C}O,59jO$#xQ(C}O,5<UO$%}Q(C}O,5<WO$(SQ(C}O,5<fOOQ(C[7+%|7+%|O$*_Q(C|O7+%|O$+OQ&jO'#HwO$+YQ`O,5?eOOQ(C]1G/r1G/rO$+bQdO'#HxO$+oQ`O,5?fO$+wQtO,5?fOOQ(C[1G/w1G/wOOQ(C[7+&V7+&VO$,RQMlO,5:^O){QdO7+&iO$,]QMlO,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$,jQ!LQO,5;vOLbQdO,5;uOOQO-E;{-E;{OOQ(C[7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$,uQ`O1G1iOOQ(C[1G1k1G1kO$,zQqO,59gOOOW-E;q-E;qOOQ(C]1G/P1G/PO$-RQ(C|O7+'WOOQ(C],5>m,5>mO$-rQ`O,5>mOOQ(C]1G2P1G2PP$-wQ`O'#IRPOQ(C]-E<P-E<PO$.hQ,VO1G2[O$/ZQ,VO1G2^O$/eQqO1G2`OOQ(C]1G1x1G1xO$/lQ`O'#IQO$/zQ`O,5?uO$/zQ`O,5?uO$0SQ`O,5?uO$0_Q`O,5?uOOQO1G1z1G1zO$0mQ,VO1G1yOJjQ&jO1G1yO$0}Q&jO'#ISO$1_Q`O,5?vOIWQ&jO,5?vO$1gQqO,5?vOOQ(C]1G1}1G1}OOQ(CW,5<h,5<hOOQ(CW,5<i,5<iO$1qQ`O,5<iO#5}Q`O,5<iO!-OQ!bO,5<hO$1vQ`O,5<jOOQ(CW,5<k,5<kO$1qQ`O,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ(C]1G2R1G2RO!'VQ7[O,5<hO$2OQ`O,5<iO!'VQ7[O,5<jO!'VQ7[O,5<iO$2ZQ,VO1G4vO$2eQ,VO1G4vOOQO,5>p,5>pOOQO-E<S-E<SOOQP1G.w1G.wO!.RQ7[O,59lO){QdO,59lO$2rQ`O1G1tOJjQ&jO1G1{O$2wQ(C|O7+'XOOQ(C[7+'X7+'XOGWQdO7+'XOOQ(C[7+%[7+%[O$3hQqO'#J]O#NaQ`O7+'|O$3rQ`O7+'|O$3zQqO7+'|OOQS7+'|7+'|OIWQ&jO7+'|O){QdO7+'|OIWQ&jO7+'|O$4UQ(CyO'#ChO$4iQ(CyO,5<lO$5ZQ`O,5<lOOQ(CW1G4r1G4rOOQS7+$_7+$_O:aQ`O7+$_O!-OQ!bO7+$_OGWQdO7+%|O$5`Q`O'#I]O$5qQ`O,5?}OOQO1G3O1G3OO5tQ`O,5?}O$5qQ`O,5?}O$5yQ`O,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ(C[7+&q7+&qO$6OQ`O7+(iO5lQ(ChO7+(iO5tQ`O7+(iO$6TQ`O7+(iO$6YQaO7+'|OOQ(CW,5>r,5>rOOQ(CW-E<U-E<UOOQS7+(W7+(WO$6hQ(CyO7+(TOIWQ&jO7+(TO$6rQqO7+(UOOQS7+(U7+(UOIWQ&jO7+(UO$6yQ`O'#J`O$7UQ`O,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQS7+(Z7+(ZO$8OQ7[O'#GqOOQS1G2v1G2vOIWQ&jO1G2vO){QdO1G2vOIWQ&jO1G2vO$8VQaO1G2vO$8eQ&kO1G2vO5lQ(ChO1G2yO#6SQ`O1G2yO5bQ`O1G2yO!-OQ!bO1G2yO!-WQ&jO1G2yO$8vQ`O'#I[O$9RQ`O,5?{O$9ZQ7[O,5?{OOQ(CW1G2z1G2zOOQS7+$U7+$UO$9cQ`O7+$UO5lQ(ChO7+$UO$9hQ`O7+$UO){QdO1G5jO){QdO1G5kO$9mQdO1G3RO$9tQ`O1G3RO$9yQdO1G3RO$:QQ(ChO1G5jOOQS7+(k7+(kO5lQ(ChO7+(uO`QdO7+(wOOQS'#Jf'#JfOOQS'#I_'#I_O$:[QdO,5=vOOQS,5=v,5=vO){QdO'#H]O$:iQ`O'#H_OOQS,5=|,5=|O7YQ`O,5=|OOQS,5>O,5>OOOQS7+)Q7+)QOOQS7+)W7+)WOOQS7+)[7+)[OOQS7+)^7+)^OOQO1G5O1G5OO$:nQMlO1G0gO$:xQ`O1G0gOOQO1G/i1G/iO$;TQMlO1G/iO:aQ`O1G/iOLbQdO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!-OQ!bO1G/iO:aQ`O,5:iOOQO,5:o,5:oO){QdO,5:oO$;_Q(ChO,5:oO$;jQ(ChO,5:oO!-OQ!bO,5:iOOQO-E;w-E;wOOQ(C[1G0S1G0SO!@XQ7[O,5:iO$;xQ7[O,5:iO$<ZQ(DjO,5:oO$<uQ7[O,5:iO!@XQ7[O,5:oOOQO,5:t,5:tO$<|Q7[O,5:oO$=ZQ(ChO,5:oOOQ(C[7+%k7+%kO#NaQ`O7+%kO#NfQqO7+%kOOQ(C[7+%{7+%{O:aQ`O7+%{O!-OQ!bO7+%{O$=oQ(C|O7+*pO){QdO7+*pOOQO1G4S1G4SO7YQ`O1G4SO$>PQ`O7+*oO$>XQ(C}O1G2[O$@^Q(C}O1G2^O$BcQ(C}O1G1yO$DnQ,VO,5>cOOQO-E;u-E;uO$DxQtO,5>dO){QdO,5>dOOQO-E;v-E;vO$ESQ`O1G5QO$E[QMlO1G0bO$GcQMlO1G0mO$GjQMlO1G0mO$IkQMlO1G0mO$IrQMlO1G0mO$KgQMlO1G0mO$KzQMlO1G0mO$NXQMlO1G0mO$N`QMlO1G0mO%!aQMlO1G0mO%!hQMlO1G0mO%$]QMlO1G0mO%$pQ(C|O<<JTO%%rQMmO1G0mO%'|QMmO'#IqO%)iQMlO1G1QOLbQdO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%)vQ`O1G1aO%){QMlO,5>kOOOO7+'T7+'TOOOW1G/R1G/ROOQ(C]1G4X1G4XOJjQ&jO7+'zO%*VQ`O,5>lO5tQ`O,5>lOOQO-E<O-E<OO%*eQ`O1G5aO%*eQ`O1G5aO%*mQ`O1G5aO%*xQ,VO7+'eO%+YQqO,5>nO%+dQ`O,5>nOIWQ&jO,5>nOOQO-E<Q-E<QO%+iQqO1G5bO%+sQ`O1G5bOOQ(CW1G2T1G2TO$1qQ`O1G2TOOQ(CW1G2S1G2SO%+{Q`O1G2UOIWQ&jO1G2UOOQ(CW1G2Y1G2YO!-OQ!bO1G2SO#5}Q`O1G2TO%,QQ`O1G2UO%,YQ`O1G2TOJjQ&jO7+*bOOQ(C]1G/W1G/WO%,eQ`O1G/WOOQ(C]7+'`7+'`O%,jQ,VO7+'gO%,zQ(C|O<<JsOOQ(C[<<Js<<JsOIWQ&jO'#IVO%-kQ`O,5?wOOQS<<Kh<<KhOIWQ&jO<<KhO#NaQ`O<<KhO%-sQ`O<<KhO%-{QqO<<KhOIWQ&jO1G2WOOQS<<Gy<<GyO:aQ`O<<GyO%.VQ(C|O<<IhOOQ(C[<<Ih<<IhOOQO,5>w,5>wO%.vQ`O,5>wO%.{Q`O,5>wOOQO-E<Z-E<ZO%/TQ`O1G5iO%/TQ`O1G5iO5tQ`O1G5iO%/]Q`O<<LTOOQS<<LT<<LTO%/bQ`O<<LTO5lQ(ChO<<LTO){QdO<<KhOIWQ&jO<<KhOOQS<<Ko<<KoO$6hQ(CyO<<KoOOQS<<Kp<<KpO$6rQqO<<KpO%/gQ7[O'#IXO%/rQ`O,5?zOLbQdO,5?zOOQS1G2n1G2nO#LaQ(DjO'#ETO!@XQ7[O'#GrOOQO'#IZ'#IZO%/zQ7[O,5=]OOQS,5=],5=]O%0RQ7[O'#ETO%0^Q7[O'#ETO%0uQ7[O'#ETO%1PQ7[O'#GrO%1bQ`O7+(bO%1gQ`O7+(bO%1oQqO7+(bOOQS7+(b7+(bOIWQ&jO7+(bO){QdO7+(bOIWQ&jO7+(bO%1yQaO7+(bOOQS7+(e7+(eO5lQ(ChO7+(eO#6SQ`O7+(eO5bQ`O7+(eO!-OQ!bO7+(eO%2XQ`O,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%2dQ`O1G5gO5lQ(ChO<<GpOOQS<<Gp<<GpO%2lQ`O<<GpO%2qQ`O7++UO%2vQ`O7++VOOQS7+(m7+(mO%2{Q`O7+(mO%3QQdO7+(mO%3XQ`O7+(mO){QdO7++UO){QdO7++VOOQS<<La<<LaOOQS<<Lc<<LcOOQS-E<]-E<]OOQS1G3b1G3bO%3^Q`O,5=wOOQS,5=y,5=yO%3cQ`O1G3hOLbQdO7+&ROOQO7+%T7+%TO%3hQMlO1G5XO:aQ`O7+%TOOQO1G0T1G0TO%3rQ(C|O1G0ZOOQO1G0Z1G0ZO){QdO1G0ZO%3|Q(ChO1G0ZO:aQ`O1G0TO!-OQ!bO1G0TO!@XQ7[O1G0TO%4XQ(ChO1G0ZO%4gQ7[O1G0TO%4xQ(ChO1G0ZO%5^Q(DjO1G0ZO%5hQ7[O1G0TO!@XQ7[O1G0ZOOQ(C[<<IV<<IVOOQ(C[<<Ig<<IgO:aQ`O<<IgO%5oQ(C|O<<N[OOQO7+)n7+)nO%6PQ(C}O7+'eO%8[Q(C}O7+'gO%:gQtO1G4OO%:qQMlO7+%|O%;gQMmO,59jO%=hQMmO,5<UO%?lQMmO,5<WO%A[QMmO,5<fO%B}QMlO7+'WO%C[QMlO7+'XO%CiQ`O,5;xOOQO7+&{7+&{O%CnQ,VO<<KfOOQO1G4W1G4WO%CuQ`O1G4WO%DQQ`O1G4WO%D`Q`O7+*{O%D`Q`O7+*{OIWQ&jO1G4YO%DhQqO1G4YO%DrQ`O7+*|OOQ(CW7+'o7+'oO$1qQ`O7+'pO%DzQqO7+'pOOQ(CW7+'n7+'nO$1qQ`O7+'oO%ERQ`O7+'pOIWQ&jO7+'pO#5}Q`O7+'oO%EWQ,VO<<M|OOQ(C]7+$r7+$rO%EbQqO,5>qOOQO-E<T-E<TO#NaQ`OANASOOQSANASANASOIWQ&jOANASO%ElQ(CyO7+'rOOQSAN=eAN=eO5tQ`O1G4cOOQO1G4c1G4cO%E|Q`O1G4cO%FRQ`O7++TO%FRQ`O7++TO5lQ(ChOANAoO%FZQ`OANAoOOQSANAoANAoO%F`Q`OANASO%FhQqOANASOOQSANAZANAZOOQSANA[ANA[O%FrQ`O,5>sOOQO-E<V-E<VO%F}QMlO1G5fO#6SQ`O,5=^O5bQ`O,5=^O!-OQ!bO,5=^OOQO-E<X-E<XOOQS1G2w1G2wO$<ZQ(DjO,5:oO!@XQ7[O,5=^O%GXQ7[O,5=^O%GjQ7[O,5:oOOQS<<K|<<K|OIWQ&jO<<K|O%1bQ`O<<K|O%GtQ`O<<K|O%G|QqO<<K|O){QdO<<K|OIWQ&jO<<K|OOQS<<LP<<LPO5lQ(ChO<<LPO#6SQ`O<<LPO5bQ`O<<LPO%HWQ7[O1G4bO%H`Q`O7++ROOQSAN=[AN=[O5lQ(ChOAN=[OOQS<<Np<<NpOOQS<<Nq<<NqOOQS<<LX<<LXO%HhQ`O<<LXO%HmQdO<<LXO%HtQ`O<<NpO%HyQ`O<<NqOOQS1G3c1G3cO:aQ`O7+)SO%IOQMlO<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%3rQ(C|O7+%uO){QdO7+%uOOQO7+%o7+%oO:aQ`O7+%oO!-OQ!bO7+%oO%IYQ(ChO7+%uO!@XQ7[O7+%oO%IeQ(ChO7+%uO%IsQ7[O7+%oO%JUQ(ChO7+%uOOQ(C[AN?RAN?RO%JjQMlO<<JTO%JwQMmO1G1yO%MOQMmO1G2[O& SQMmO1G2^O&!rQMlO<<JsO&#PQMlO<<IhOOQO1G1d1G1dOJjQ&jOANAQOOQO7+)r7+)rO&#^Q`O7+)rO&#iQ`O<<NgO&#qQqO7+)tOOQ(CW<<K[<<K[O$1qQ`O<<K[OOQ(CW<<KZ<<KZO&#{QqO<<K[O$1qQ`O<<KZOOQSG26nG26nO#NaQ`OG26nOOQO7+)}7+)}O5tQ`O7+)}O&$SQ`O<<NoOOQSG27ZG27ZO5lQ(ChOG27ZOIWQ&jOG26nOLbQdO1G4_O&$[Q`O7++QO5lQ(ChO1G2xO#6SQ`O1G2xO5bQ`O1G2xO!-OQ!bO1G2xO!@XQ7[O1G2xO%5^Q(DjO1G0ZO&$dQ7[O1G2xO%1bQ`OANAhOOQSANAhANAhOIWQ&jOANAhO&$uQ`OANAhO&$}QqOANAhOOQSANAkANAkO5lQ(ChOANAkO#6SQ`OANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQSG22vG22vOOQSANAsANAsO&%XQ`OANAsOOQSAND[AND[OOQSAND]AND]OOQS<<Ln<<LnOOQO<<Ia<<IaO%3rQ(C|O<<IaOOQO<<IZ<<IZO:aQ`O<<IZO){QdO<<IaO!-OQ!bO<<IZO&%^Q(ChO<<IaO!@XQ7[O<<IZO&%iQ(ChO<<IaO&%wQMmO7+'eO&'jQMmO7+'gO&)]Q,VOG26lOOQO<<M^<<M^OOQ(CWAN@vAN@vO$1qQ`OAN@vOOQ(CWAN@uAN@uOOQSLD,YLD,YOOQO<<Mi<<MiOOQSLD,uLD,uO#NaQ`OLD,YO&)mQMlO7+)yOOQO7+(d7+(dO5lQ(ChO7+(dO#6SQ`O7+(dO5bQ`O7+(dO!-OQ!bO7+(dO!@XQ7[O7+(dOOQSG27SG27SO%1bQ`OG27SOIWQ&jOG27SOOQSG27VG27VO5lQ(ChOG27VOOQSG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%3rQ(C|OAN>{O:aQ`OAN>uO){QdOAN>{O!-OQ!bOAN>uO&)wQ(ChOAN>{O&*SQ(C}OG26lOOQ(CWG26bG26bOOQS!$( t!$( tOOQO<<LO<<LOO5lQ(ChO<<LOO#6SQ`O<<LOO5bQ`O<<LOO!-OQ!bO<<LOOOQSLD,nLD,nO%1bQ`OLD,nOOQSLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%3rQ(C|OG24gO:aQ`OG24aO){QdOG24gO&,pQ!LRO,5:rO&-gQ$ITO'#IqOOQOANAjANAjO5lQ(ChOANAjO#6SQ`OANAjO5bQ`OANAjOOQS!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%3rQ(C|OLD*RO&.ZQMmOG26lO&/|Q!LRO,59jO&0pQ!LRO,5<UO&1dQ!LRO,5<WO&2WQ!LRO,5<fOOQOG27UG27UO5lQ(ChOG27UO#6SQ`OG27UOOQO!$'Mm!$'MmO&2}Q!LRO1G2[O&3qQ!LRO1G2^O&4eQ!LRO1G1yOOQOLD,pLD,pO5lQ(ChOLD,pO&5[Q!LRO7+'eO&6RQ!LRO7+'gOOQO!$(![!$(![O&6xQ!LROG26lOLbQdO'#DrO&7oQtO'#ItOLbQdO'#DjO&7vQ(C|O'#ChO&8aQtO'#ChO&8qQdO,5:vO&:qQ&jO'#EWOLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO'#IPO&<OQ`O,5<TO&=eQ&jO,5;ROLbQdO,5;fO!(wQ`O'#DOO!(wQ`O'#DOO!(wQ`O'#DOOIWQ&jO'#FjO&:qQ&jO'#FjO&<WQ&jO'#FjOIWQ&jO'#FlO&:qQ&jO'#FlO&<WQ&jO'#FlOIWQ&jO'#FzO&:qQ&jO'#FzO&<WQ&jO'#FzOLbQdO,5?mO&8qQdO1G0bO&=lQMlO'#ChOLbQdO1G1lOIWQ&jO,5<pO&:qQ&jO,5<pO&<WQ&jO,5<pOIWQ&jO,5<rO&:qQ&jO,5<rO&<WQ&jO,5<rOIWQ&jO,5<_O&:qQ&jO,5<_O&<WQ&jO,5<_O&8qQdO1G1mOLbQdO7+&iOIWQ&jO1G1yO&:qQ&jO1G1yO&<WQ&jO1G1yOIWQ&jO1G1{O&:qQ&jO1G1{O&<WQ&jO1G1{O&8qQdO7+'XO&8qQdO7+%|O&=vQ`O7+'pOIWQ&jOANAQO&:qQ&jOANAQO&<WQ&jOANAQO&=vQ`O<<K[O&=vQ`OAN@vO&={Q`O'#E[O&>QQ`O'#E[O&>YQ`O'#EzO&>_Q`O'#EgO&>dQ`O'#JRO&>oQ`O'#JPO&>zQ`O,5:vO&?PQ,VO,5<QO&?WQ`O'#FsO&?]Q`O'#FsO&?bQ`O'#FsO&?gQ`O,5<RO&?oQ`O,5:vO&?wQMlO1G0}O&@OQ`O,5<_O&@TQ`O,5<_O&@YQ`O,5<_O&@_Q`O,5<aO&@dQ`O,5<aO&@iQ`O,5<aO&@nQ`O1G1mO&@sQ`O1G0bO&@xQ`O1G2UO&@}Q,VO<<KfO&AUQ,VO<<KfO&A]Q,VO<<KfO&AdQqO7+'pO&AkQ`O7+'pO&ApQqO<<K[O4QQ&jO'#FhO5bQ`O'#FgOBzQ`O'#EZOLbQdO,5;cO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FuO!&WQ`O'#FuO!&WQ`O'#FuO&AwQ`O,5<jOJjQ&jO7+'zOJjQ&jO7+'zOJjQ&jO7+'zOIWQ&jO1G2UO&BPQ`O1G2UOIWQ&jO7+'pO!'VQ7[O'#GOO$/eQqO1G2`O$/eQqO1G2`O$/eQqO1G2`O!'VQ7[O,5<jOIWQ&jO,5<tOIWQ&jO,5<tOIWQ&jO,5<t",stateData:"&B}~O'YOS'ZOSTOSUOS~OQTORTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OQ[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOS!WO'U!XO'V!ZO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9bO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOQ'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']#pO'b$PO'f#sO'a'cP~O!d$ZO~O!]$]O~O_$^O'W$^O~O']$bO~O!d$ZO']$bO'^$dO'b$PO~Oc$jO!d$ZO']$bO~O#c#TO~O]$sOu$oO!T$lO!d$nO%R$rO']$bO'^$dO^(UP~O!n$tO~Ox$uO!T$vO']$bO~Ox$uO!T$vO%Z$zO']$bO~O']${O~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%UOc%TO!n%RO%P%SO%c%QO~P7xOb%XOcmO!T%WO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%[O!{%_O%R%YO'^$dO~P8wO!d%`O!g%dO~O!d%eO~O!TSO~O_$^O'T%mO'W$^O~O_$^O'T%pO'W$^O~O_$^O'T%rO'W$^O~OS!WO'U!XO'V%vO~OQ[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;dO!Q%xO!O&iX!O&nX!R&iX!R&nX~P'dO!R%zO!O'jX~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R%zO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>aO!O&PO~Ox&SO!W&^O!X&VO!Y&VO'^$dO~O]&TOk&TO!Q&WO'g&QO!S'kP!S'vP~P@dO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PA]O!{&_O!O'uX!R'uX~O!R&`O!O'tX~O!O&cO~O!{#eO~PA]OP&gO!T&dO!o&fO']$bO~Oc&lO!d$ZO']$bO~Ou$oO!d$nO~O!S&mO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOQ!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCfO!c&nO~O!]!wO!{&pO'p&oO!R'rX_'rX'W'rX~O!c'rX~PFOO!R&tO!c'qX~O!c&vO~Ox$uO!T$vO#V&wO']$bO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO']&{O'b$PO'f#sO~O#W&}O~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']&{O'b$PO'f#sO~O'a'mP~PJjO!Q'RO!c'nP~P){O'g'TO'oYO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'jO~PIWO!]'lO!T'yX#w'yX#z'yX$R'yX~Ou'mO~P! YOu'mO!T'yX#w'yX#z'yX$R'yX~O!T'oO#w'sO#z'nO$R'tO~O!Q'wO~PLbO#z#fO$R'zO~OP$eXu$eXx$eX!b$eX'w$eX'x$eX~OPfX!RfX!{fX'afX'a$eX~P!!rOk'|O~OS'}O'U(OO'V(QO~OP(ZOu(SOx(TO'w(VO'x(XO~O'a(RO~P!#{O'a([O~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~O!Q(`O'](]O!c'}P~P!$jO#W(bO~O!d(cO~O!Q(hO'](eO!O(OP~P!$jOj(uOx(mO!W(sO!X(lO!Y(lO!d(cO!x(tO$w(oO'^$dO'g(jO~O!S(rO~P!&jO!b!yOP'eXu'eXx'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'cOP(xO!{(wO!R'dX'a'dX~O!R(yO'a'cX~O']${O'a'cP~O'](|O~O!d)RO~O']&{O~Ox$uO!Q!rO!T$vO#U!uO#V!rO']$bO!c'qP~O!]!wO#W)VO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)wOP)_O!T&dO!o)^O%Q)]O'b$PO~O!])aO!T'`X_'`X!R'`X'W'`X~O!d$ZO'b$PO~O!d$ZO']$bO'b$PO~O!]!wO#W&}O~O])lO%R)mO'])iO!S(VP~O!R)nO^(UX~O'g'TO~OZ)rO~O^)sO~O!T$lO']$bO'^$dO^(UP~Ox$uO!Q)xO!R&`O!T$vO']$bO!O'tP~O]&ZOk&ZO!Q)yO'g'TO!S'vP~O!R)zO_(RX'W(RX~O!{*OO'b$PO~OP*RO!T#zO'b$PO~O!T*TO~Ou*VO!TSO~O!n*[O~Oc*aO~O'](|O!S(TP~Oc$jO~O%RtO']${O~P8wOZ*gO^*fO~OQTORTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9aO~P!1_O^*fO_$^O'W$^O~O_*kO#d*mO%T*mO%U*mO~P){O!d%`O~O%t*rO~O!T*tO~O&V*vO&X*wOQ&SaR&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*|O~On+PO~O!O&ia!R&ia~P!)wO!Q+TO!O&iX!R&iX~P){O!R%zO!O'ja~O!O'ja~P>aO!R&`O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+YO!{+XO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+[O!d$ZO'b$PO!R!VX!S!VX~O]&ROk&ROx&SO'g(jO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O'fQO'oYO'|;^O~O']:SO~P!;jO!R+`O!S'kX~O!S+bO~O!]+YO!{+XO!R#TX!S#TX~O!R+cO!S'vX~O!S+eO~O]&ROk&ROx&SO'^$dO'g(jO~O!X+fO!Y+fO~P!>hOx$uO!Q+hO!T$vO']$bO!O&nX!R&nX~O_+lO!W+oO!X+kO!Y+kO!r+sO!s+qO!t+rO!u+pO!x+tO'^$dO'g(jO'o+iO~O!S+nO~P!?iOP+yO!T&dO!o+xO~O!{,PO!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@sO!R&tO!c'qa~Ox$uO!Q,SO!T$vO#U,UO#V,SO']$bO!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)wOP;tOu(SOx(TO'w(VO'x(XO~O#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!BpO#W'eXQ'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX'p'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'cO!R,_O'a'mX~P!#{O'a,aO~O!R,bO!c'nX~P!)wO!c,eO~O!O,fO~OQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!FfO#[#PO~P!FfOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!IQOj#RO~P!IQOQ#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!KlOZ#dO!a#TO#a#TO#b#TO#c#TO~P!KlOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!NdO'w!}O~P!NdOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P##OO'x#OO~P##OOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#%jOQ[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#'}OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO#j9oO'fQO'p#[O'w!}O'x#OO~O#m,hO~P#*XOQ'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9sO#o9sO#c'iX#m'iX!S'iX~P#,SO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)wOQ#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!BpO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)wO#z,jO~O#z,kO~O!]'lO!{,lO!T$OX#w$OX#z$OX$R$OX~O!Q,mO~O!T'oO#w,oO#z'nO$R,pO~O!R9pO!S'hX~P#*XO!S,qO~O$R,sO~OS'}O'U(OO'V,vO~O],yOk,yO!O,zO~O!RdX!]dX!cdX!c$eX'pdX~P!!rO!c-QO~P!BpO!R-RO!]!wO'p&oO!c'}X~O!c-WO~O!Q(`O']$bO!c'}P~O#W-YO~O!O$eX!R$eX!]$lX~P!!rO!R-ZO!O(OX~P!BpO!]-]O~O!O-_O~Oj-cO!]!wO!d$ZO'b$PO'p&oO~O!])aO~O_$^O!R-hO'W$^O~O!S-jO~P!&jO!X-kO!Y-kO'^$dO'g(jO~Ox-mO'g(jO~O!x-nO~O']${O!R&xX'a&xX~O!R(yO'a'ca~O'a-sO~Ou-tOv-tOx-uOPra'wra'xra!Rra!{ra~O'ara#mra~P#7pOu(SOx(TOP$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#8fOu(SOx(TOP$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#9XO]-vO~O#W-wO~O'a$na!R$na!{$na#m$na~P!#{O#W-zO~OP.TO!T&dO!o.SO%Q.RO~O]#qOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~Oh.VO'].UO~P#:yO!])aO!T'`a_'`a!R'`a'W'`a~O#W.]O~OZ[X!RdX!SdX~O!R.^O!S(VX~O!S.`O~OZ.aO~O].cO'])iO~O!T$lO']$bO^'QX!R'QX~O!R)nO^(Ua~O!c.fO~P!)wO].hO~OZ.iO~O^.jO~OP.TO!T&dO!o.SO%Q.RO'b$PO~O!R)zO_(Ra'W(Ra~O!{.pO~OP.sO!T#zO~O'g'TO!S(SP~OP.}O!T.yO!o.|O%Q.{O'b$PO~OZ/XO!R/VO!S(TX~O!S/YO~O^/[O_$^O'W$^O~O]/]O~O]/^O'](|O~O#c/_O%r/`O~P0zO!{#eO#c/_O%r/`O~O_/aO~P){O_/cO~O%{/gOQ%yiR%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/mO!S/kO&Q/lO~P`O!TSO!d/oO~O&X*wOQ&SiR&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)wO!R%zO!O'ji~O!R&`O!O'ti~O!O/uO~O!R!Va!S!Va~P#*XO]&ROk&RO!Q/{O'g(jO!R&jX!S&jX~P@dO!R+`O!S'ka~O]&ZOk&ZO!Q)yO'g'TO!R&oX!S&oX~O!R+cO!S'va~O!O'ui!R'ui~P!)wO_$^O!]!wO!d$ZO!j0VO!{0TO'W$^O'b$PO'p&oO~O!S0YO~P!?iO!X0ZO!Y0ZO'^$dO'g(jO'o+iO~O!W0[O~P#MSO!TSO!W0[O!u0^O!x0_O~P#MSO!W0[O!s0aO!t0aO!u0^O!x0_O~P#MSO!T&dO~O!T&dO~P!BpO!R'ri!c'ri_'ri'W'ri~P!)wO!{0jO!R'ri!c'ri_'ri'W'ri~O!R&tO!c'qi~Ox$uO!T$vO#V0lO']$bO~O#WraQraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra'pra!cra!Ora!Tranra%Qra!]ra~P#7pO#W$^aQ$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a'p$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#8fO#W$`aQ$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a'p$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#9XO#W$naQ$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na'p$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!BpO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)wO!R&kX'a&kX~PJjO!R,_O'a'ma~O!Q0tO!R&lX!c&lX~P){O!R,bO!c'na~O!R,bO!c'na~P!)wO#m!fa!S!fa~PCfO#m!^a!R!^a!S!^a~P#*XO!T1XO#x^O$P1YO~O!S1^O~On1_O~P!BpO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)wO!O1`O~O],yOk,yO~Ou(SOx(TO'x(XOP$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$.POu(SOx(TOP$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$.rO'p#[O~P!BpO!Q1cO']$bO!R&tX!c&tX~O!R-RO!c'}a~O!R-RO!]!wO!c'}a~O!R-RO!]!wO'p&oO!c'}a~O'a$gi!R$gi!{$gi#m$gi~P!#{O!Q1kO'](eO!O&vX!R&vX~P!$jO!R-ZO!O(Oa~O!R-ZO!O(Oa~P!BpO!]!wO~O!]!wO#c1sO~Oj1vO!]!wO'p&oO~O!R'di'a'di~P!#{O!{1yO!R'di'a'di~P!#{O!c1|O~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)wO!R2QO!T(PX~P!BpO!T&dO%Q2TO~O!T&dO%Q2TO~P!BpO!T$eX$u[X_$eX!R$eX'W$eX~P!!rO$u2XOPgXugXxgX!TgX'wgX'xgX_gX!RgX'WgX~O$u2XO~O]2_O%R2`O'])iO!R'PX!S'PX~O!R.^O!S(Va~OZ2dO~O^2eO~O]2hO~OP2jO!T&dO!o2iO%Q2TO~O_$^O'W$^O~P!BpO!T#zO~P!BpO!R2oO!{2qO!S(SX~O!S2rO~Ox;oO!W2{O!X2tO!Y2tO!r2zO!s2yO!t2yO!x2xO'^$dO'g(jO'o+iO~O!S2wO~P$7ZOP3SO!T.yO!o3RO%Q3QO~OP3SO!T.yO!o3RO%Q3QO'b$PO~O'](|O!R'OX!S'OX~O!R/VO!S(Ta~O]3^O'g3]O~O]3_O~O^3aO~O!c3dO~P){O_3fO~O_3fO~P){O#c3hO%r3iO~PFOO`/mO!S3mO&Q/lO~P`O!]3oO~O!R#Ti!S#Ti~P#*XO!{3qO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#*XO_$^O!{3xO'W$^O~O_$^O!]!wO!{3xO'W$^O~O!X3|O!Y3|O'^$dO'g(jO'o+iO~O_$^O!]!wO!d$ZO!j3}O!{3xO'W$^O'b$PO'p&oO~O!W4OO~P$;xO!W4OO!u4RO!x4SO~P$;xO_$^O!]!wO!j3}O!{3xO'W$^O'p&oO~O!R'rq!c'rq_'rq'W'rq~P!)wO!R&tO!c'qq~O#W$xiQ$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi'p$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$.PO#W$ziQ$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi'p$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$.rO#W$giQ$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi'p$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!BpO!R&ka'a&ka~P!#{O!R&la!c&la~P!)wO!R,bO!c'ni~O#m#Oi!R#Oi!S#Oi~P#*XOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$EiO#[9eO~P$EiOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$GqOj9gO~P$GqOQ#^Oj9gOu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$IyOZ9rO!a9iO#a9iO#b9iO#c9iO~P$IyOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$L_O'w!}O~P$L_OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$NgO'x#OO~P$NgOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P%!oO_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)wOP;vOu(SOx(TO'w(VO'x(XO~OQ#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi'p#Zi!R#Zi!S#Zi~P%%aO!b!yOP'eXu'eXx'eX'w'eX'x'eX!S'eX~OQ'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX'p'eX!R'eX~P%'eO#m#ni!R#ni!S#ni~P#*XO!S4eO~O!R&sa!S&sa~P#*XO!]!wO'p&oO!R&ta!c&ta~O!R-RO!c'}i~O!R-RO!]!wO!c'}i~O'a$gq!R$gq!{$gq#m$gq~P!#{O!O&va!R&va~P!BpO!]4lO~O!R-ZO!O(Oi~P!BpO!R-ZO!O(Oi~O!O4pO~O!]!wO#c4uO~Oj4vO!]!wO'p&oO~O!O4xO~O'a$iq!R$iq!{$iq#m$iq~P!#{O_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)wO!R2QO!T(Pa~O!T&dO%Q4}O~O!T&dO%Q4}O~P!BpO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)wOZ5QO~O]5SO'])iO~O!R.^O!S(Vi~O]5VO~O^5WO~O'g'TO!R&{X!S&{X~O!R2oO!S(Sa~O!S5eO~P$7ZOx;sO'g(jO'o+iO~O!W5hO!X5gO!Y5gO!x0_O'^$dO'g(jO'o+iO~O!s5iO!t5iO~P%0^O!X5gO!Y5gO'^$dO'g(jO'o+iO~O!T.yO~O!T.yO%Q5kO~O!T.yO%Q5kO~P!BpOP5pO!T.yO!o5oO%Q5kO~OZ5uO!R'Oa!S'Oa~O!R/VO!S(Ti~O]5xO~O!c5yO~O!c5zO~O!c5{O~O!c5{O~P){O_5}O~O!]6QO~O!c6RO~O!R'ui!S'ui~P#*XO_$^O'W$^O~P!)wO_$^O!{6WO'W$^O~O_$^O!]!wO!{6WO'W$^O~O!X6]O!Y6]O'^$dO'g(jO'o+iO~O_$^O!]!wO!j6^O!{6WO'W$^O'p&oO~O!d$ZO'b$PO~P%4xO!W6_O~P%4gO!R'ry!c'ry_'ry'W'ry~P!)wO#W$gqQ$gqZ$gq_$gqj$gqv$gq!R$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq'W$gq'f$gq'p$gq!c$gq!O$gq!T$gq!{$gqn$gq%Q$gq!]$gq~P!BpO#W$iqQ$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq'p$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!BpO!R&li!c&li~P!)wO#m#Oq!R#Oq!S#Oq~P#*XOu-tOv-tOx-uOPra'wra'xra!Sra~OQraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra'pra!Rra~P%;OOu(SOx(TOP$^a'w$^a'x$^a!S$^a~OQ$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a'p$^a!R$^a~P%=SOu(SOx(TOP$`a'w$`a'x$`a!S$`a~OQ$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a'p$`a!R$`a~P%?WOQ$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na'p$na!R$na!S$na~P%%aO#m$Yq!R$Yq!S$Yq~P#*XO#m$Zq!R$Zq!S$Zq~P#*XO!S6hO~O#m6iO~P!#{O!]!wO!R&ti!c&ti~O!]!wO'p&oO!R&ti!c&ti~O!R-RO!c'}q~O!O&vi!R&vi~P!BpO!R-ZO!O(Oq~O!O6oO~P!BpO!O6oO~O!R'dy'a'dy~P!#{O!R&ya!T&ya~P!BpO!T$tq_$tq!R$tq'W$tq~P!BpOZ6vO~O!R.^O!S(Vq~O]6yO~O!T&dO%Q6zO~O!T&dO%Q6zO~P!BpO!{6{O!R&{a!S&{a~O!R2oO!S(Si~P#*XO!X7RO!Y7RO'^$dO'g(jO'o+iO~O!W7TO!x4SO~P%GXO!T.yO%Q7WO~O!T.yO%Q7WO~P!BpO]7_O'g7^O~O!R/VO!S(Tq~O!c7aO~O!c7aO~P){O!c7cO~O!c7dO~O!R#Ty!S#Ty~P#*XO_$^O!{7jO'W$^O~O_$^O!]!wO!{7jO'W$^O~O!X7mO!Y7mO'^$dO'g(jO'o+iO~O_$^O!]!wO!j7nO!{7jO'W$^O'p&oO~O#m#ky!R#ky!S#ky~P#*XOQ$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi'p$gi!R$gi!S$gi~P%%aOu(SOx(TO'x(XOP$xi'w$xi!S$xi~OQ$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi'p$xi!R$xi~P%LjOu(SOx(TOP$zi'w$zi'x$zi!S$zi~OQ$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi'p$zi!R$zi~P%NnO#m$Zy!R$Zy!S$Zy~P#*XO#m#Oy!R#Oy!S#Oy~P#*XO!]!wO!R&tq!c&tq~O!R-RO!c'}y~O!O&vq!R&vq~P!BpO!O7tO~P!BpO!R.^O!S(Vy~O!R2oO!S(Sq~O!X8QO!Y8QO'^$dO'g(jO'o+iO~O!T.yO%Q8TO~O!T.yO%Q8TO~P!BpO!c8WO~O_$^O!{8]O'W$^O~O_$^O!]!wO!{8]O'W$^O~OQ$gqZ$gqj$gqv$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq#m$gq'f$gq'p$gq!R$gq!S$gq~P%%aOQ$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq'p$iq!R$iq!S$iq~P%%aO'a$|!Z!R$|!Z!{$|!Z#m$|!Z~P!#{O!R&{q!S&{q~P#*XO_$^O!{8oO'W$^O~O#W$|!ZQ$|!ZZ$|!Z_$|!Zj$|!Zv$|!Z!R$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z'W$|!Z'f$|!Z'p$|!Z!c$|!Z!O$|!Z!T$|!Z!{$|!Zn$|!Z%Q$|!Z!]$|!Z~P!BpOP;uOu(SOx(TO'w(VO'x(XO~O!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P&,_O!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%'eOQ$|!ZZ$|!Zj$|!Zv$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z#m$|!Z'f$|!Z'p$|!Z!R$|!Z!S$|!Z~P%%aO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%;OO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%=SO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%?WO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P&,_O!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%LjO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%NnO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P&,_O!S$gq!W$gq!X$gq!Y$gq!r$gq!s$gq!t$gq!x$gq'^$gq'g$gq'o$gq~P&,_O!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P&,_O!S$|!Z!W$|!Z!X$|!Z!Y$|!Z!r$|!Z!s$|!Z!t$|!Z!x$|!Z'^$|!Z'g$|!Z'o$|!Z~P&,_On'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;dOQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!TSO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O]#qOh$QOj#rOk#qOl#qOq$ROs9uOx#yO!T#zO!_;fO!d#vO#V:OO#t$VO$_9xO$a9{O$d$WO']&{O'b$PO'f#sO~O!R9pO!S$]a~O]#qOh$QOj#rOk#qOl#qOq$ROs9vOx#yO!T#zO!_;gO!d#vO#V:PO#t$VO$_9yO$a9|O$d$WO']&{O'b$PO'f#sO~O#d'jO~P&<WO!S[X!SdX~P;dO!]9dO~O#W9cO~O!]!wO#W9cO~O!{9sO~O#c9iO~O!{:QO!R'uX!S'uX~O!{9sO!R'sX!S'sX~O#W:RO~O'a:TO~P!#{O#W:[O~O#W:]O~O#W:^O~O!]!wO#W:_O~O!]!wO#W:RO~O#m:`O~P#*XO#W:aO~O#W:bO~O#W:cO~O#W:dO~O#W:eO~O#W:fO~O#W:gO~O#W:hO~O!O:iO~O#m:jO~P!#{O#m:kO~P!#{O#m:lO~P!#{O!O:mO~P!BpO!O:mO~O!O:nO~P!BpO!]!wO#c;lO~O!]!wO#c;nO~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Kk(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s7o8SP8SPPP8SP:U8SP8SP:YPP:`P:t?VPPPP?ZPPPP?ZA{PPPBRDdP?ZPFwPPPPHp?ZPPPPPJi?ZPPMjNgPPPPNk!!TP!!]!#^PNg?Z?Z!&n!)i!.[!.[!1kPPP!1r!4h?ZPPPPPPPPPP!7_P!8pPP?Z!9}P?ZP?Z?Z?Z?ZP?Z!;dPP!>]P!AQ!AY!A^!A^P!>YP!Ab!AbP!DVP!DZ?Z?Z!Da!GT8SP8SP8S8SP!HW8S8S!Jf8S!M_8S# g8S8S#!T#$c#$c#$g#$c#$oP#$cP8S#%k8S#'X8S8S-zPPP#(yPP#)c#)cP#)cP#)x#)cPP#*OP#)uP#)u#*b!!X#)u#+P#+V#+Y([#+]([P#+d#+d#+dP([P([P([P([PP([P#+j#+mP#+m([P#+qP#+tP([P([P([P([P([P([([#+z#,U#,[#,b#,p#,v#,|#-W#-^#-m#-s#.R#.X#._#.m#/S#0z#1Y#1`#1f#1l#1r#1|#2S#2Y#2d#2v#2|PPPPPPPP#3SPP#3v#7OPP#8f#8m#8uPP#>a#@t#Fp#Fs#Fv#GR#GUPP#GX#G]#Gz#Hq#Hu#IZPP#I_#Ie#IiP#Il#Ip#Is#Jc#Jy#KO#KR#KU#K[#K_#Kc#KgmhOSj}!n$]%c%f%g%i*o*t/g/jQ$imQ$ppQ%ZyS&V!b+`Q&k!jS(l#z(qQ)g$jQ)t$rQ*`%TQ+f&^S+k&d+mQ+}&lQ-k(sQ/U*aY0Z+o+p+q+r+sS2t.y2vU3|0[0^0aU5g2y2z2{S6]4O4RS7R5h5iQ7m6_R8Q7T$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ(}$SQ)l$lQ*b%WQ*i%`Q,X9tQ.W)aQ.c)mQ/^*gQ2_.^Q3Z/VQ4^9vQ5S2`R8{9upeOSjy}!n$]%Y%c%f%g%i*o*t/g/jR*d%[&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%z&S&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;`;a[!cRU!]!`%x&WQ$clQ$hmS$mp$rv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ%PwQ&h!iQ&j!jS(_#v(cS)f$i$jQ)j$lQ)w$tQ*Z%RQ*_%TS+|&k&lQ-V(`Q.[)gQ.b)mQ.d)nQ.g)rQ/P*[S/T*`*aQ0h+}Q1b-RQ2^.^Q2b.aQ2g.iQ3Y/UQ4i1cQ5R2`Q5U2dQ6u5QR7w6vx#xa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k!Y$fm!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^Q)`$cQ*P$|Q*S$}Q*^%TQ.k)wQ/O*ZU/S*_*`*aQ3T/PS3X/T/UQ5b2sQ5t3YS7P5c5fS8O7Q7SQ8f8PQ8u8g#[;b!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd;c9d9x9{:O:V:Y:]:b:e:ke;d9r9y9|:P:W:Z:^:c:f:lW#}a$P(y;^S$|t%YQ$}uQ%OvR)}$z%P#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vT(O#s(PX)O$S9t9u9vU&Z!b$v+cQ'U!{Q)q$oQ.t*TQ1z-tR5^2o&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a$]#aZ!_!o$a%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,i,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|T!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ&X!bR/|+`Y&R!b&V&^+`+fS(k#z(qS+j&d+mS-d(l(sQ-e(mQ-l(tQ.v*VU0W+k+o+pU0]+q+r+sS0b+t2xQ1u-kQ1w-mQ1x-nS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mQ8g8QQ;h;oR;m;slhOSj}!n$]%c%f%g%i*o*t/g/jQ%k!QS&x!v9cQ)d$gQ*X%PQ*Y%QQ+z&iS,]&}:RS-y)V:_Q.Y)eQ.x*WQ/n*vQ/p*wQ/x+ZQ0`+qQ0f+{S2P-z:gQ2Y.ZS2].]:hQ3r/zQ3u0RQ4U0gQ5P2ZQ6T3tQ6X3zQ6a4VQ7e6RQ7h6YQ8Y7iQ8l8[R8x8n$W#`Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|W(v#{&|1V8qT)Z$a,i$W#_Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|Q'f#`S)Y$a,iR-{)Z&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ%f{Q%g|Q%i!OQ%j!PR/f*rQ&e!iQ)[$cQ+w&hS.Q)`)wS0c+u+vW2S-}.O.P.kS4T0d0eU4|2U2V2WU6s4{5Y5ZQ7v6tR8b7yT+l&d+mS+j&d+mU0W+k+o+pU0]+q+r+sS0b+t2xS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mR8g8QS+l&d+mT2u.y2vS&r!q/dQ-U(_Q-b(kS0V+j2sQ1g-VS1p-c-lU3}0]0b5fQ4h1bS4s1v1xU6^4P4Q7SQ6k4iQ6r4vR7n6`Q!xXS&q!q/dQ)W$[Q)b$eQ)h$kQ,Q&rQ-T(_Q-a(kQ-f(nQ.X)cQ/Q*]S0U+j2sS1f-U-VS1o-b-lQ1r-eQ1t-gQ3V/RW3y0V0]0b5fQ4g1bQ4k1gS4o1p1xQ4t1wQ5r3WW6[3}4P4Q7SS6j4h4iS6n4p:iQ6p4sQ6}5aQ7[5sS7l6^6`Q7r6kS7s6o:mQ7u6rQ7|7OQ8V7]Q8_7nS8a7t:nQ8d7}Q8s8eQ9Q8tQ9X9RQ:u:pQ;T:zQ;U:{Q;V;hR;[;m$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oS!xn!k!j:o#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:u;`$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ$[b!Y$em!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^S$kn!kQ)c$fQ*]%TW/R*^*_*`*aU3W/S/T/UQ5a2sS5s3X3YU7O5b5c5fQ7]5tU7}7P7Q7SS8e8O8PS8t8f8gQ9R8u!j:p#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ:z;_R:{;`$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oY!hRU!]!`%xv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ*j%`!h:q#]#k'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:t&WS&[!b$vR0O+c$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR*i%`$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ'U!{!k:r#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a!h#VZ!_$a%w%}&y'Q'_'`'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_!R9k'd'u+^,i/v/y0w1P1Q1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!d#XZ!_$a%w%}&y'Q'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_}9m'd'u+^,i/v/y0w1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!`#]Z!_$a%w%}&y'Q'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_Q1a-Px;a'd'u+^,i/v/y0w1W1]3s4]4b4c5`6S6b6f6g7z:|Q;i;pQ;j;qR;k;r&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#l`#mR1Y,l&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#g^#nT'n#i'rT#h^#nT'p#i'r&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aT#l`#mQ#o`R'y#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!k;_#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a#RdOSUj}!S!W!n!|#k$]%[%_%`%c%e%f%g%i%m&S&f'w)^*k*o*t+x,m-u.S.|/_/`/a/c/g/j/l1X2i3R3f3h3i5o5}x#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vQ)S$WQ,x(Sd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:kx#wa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;kQ(d#xS(n#z(qQ)T$XQ-g(o#[:w!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd:x9d9x9{:O:V:Y:]:b:e:kd:y9r9y9|:P:W:Z:^:c:f:lQ:};bQ;O;cQ;P;dQ;Q;eQ;R;fR;S;gx#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:klfOSj}!n$]%c%f%g%i*o*t/g/jQ(g#yQ*}%pQ+O%rR1j-Z%O#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vQ*Q$}Q.r*SQ2m.qR5]2nT(p#z(qS(p#z(qT2u.y2vQ)b$eQ-f(nQ.X)cQ/Q*]Q3V/RQ5r3WQ6}5aQ7[5sQ7|7OQ8V7]Q8d7}Q8s8eQ9Q8tR9X9Rp(W#t'O)U-X-o-p0q1h1}4f4w7q:v;W;X;Y!n:U&z'i(^(f+v,[,t-P-^-|.P.o.q0e0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r[:V8p9O9V9Y9Z9]]:W1U4a6c7o7p8zr(Y#t'O)U,}-X-o-p0q1h1}4f4w7q:v;W;X;Y!p:X&z'i(^(f+v,[,t-P-^-|.P.o.q0e0n0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r^:Y8p9O9T9V9Y9Z9]_:Z1U4a6c6d7o7p8zpeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ%VxR*k%`peOSjy}!n$]%Y%c%f%g%i*o*t/g/jR%VxQ*U%OR.n)}qeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ.z*ZS3P/O/PW5j2|2}3O3TU7V5l5m5nU8R7U7X7YQ8h8SR8v8iQ%^yR*e%YR3^/XR7_5uS$mp$rR.d)nQ%czR*o%dR*u%jT/h*t/jR*y%kQ*x%kR/q*yQjOQ!nST$`j!nQ(P#sR,u(PQ!YQR%u!YQ!^RU%{!^%|+UQ%|!_R+U%}Q+a&XR/}+aQ,`'OR0r,`Q,c'QS0u,c0vR0v,dQ+m&dR0X+mS!eR$uU&a!e&b+VQ&b!fR+V&OQ+d&[R0P+dQ&u!sQ,R&sU,V&u,R0mR0m,WQ'r#iR,n'rQ#m`R'x#mQ#cZU'h#c+Q9qQ+Q9_R9q'uQ-S(_W1d-S1e4j6lU1e-T-U-VS4j1f1gR6l4k$k(U#t&z'O'i(^(f)P)Q)U+v,Y,Z,[,t,}-O-P-X-^-o-p-|.P.o.q0e0n0o0p0q1U1h1i1m1}2W2l2n3O4Y4Z4_4`4a4f4m4q4w4y5O5Z5n6c6d6e6m6q7Y7o7p7q8`8p8z8|8}9O9T9U9V9Y9Z9]:v;W;X;Y;Z;];p;q;rQ-[(fU1l-[1n4nQ1n-^R4n1mQ(q#zR-i(qQ(z$OR-r(zQ2R-|R4z2RQ){$xR.m){Q2p.tS5_2p6|R6|5`Q*W%PR.w*WQ2v.yR5d2vQ/W*bS3[/W5vR5v3^Q._)jW2a._2c5T6wQ2c.bQ5T2bR6w5UQ)o$mR.e)oQ/j*tR3l/jWiOSj!nQ%h}Q)X$]Q*n%cQ*p%fQ*q%gQ*s%iQ/e*oS/h*t/jR3k/gQ$_gQ%l!RQ%o!TQ%q!UQ%s!VQ)v$sQ)|$yQ*d%^Q*{%nQ-h(pS/Z*e*hQ/r*zQ/s*}Q/t+OS0S+j2sQ2f.hQ2k.oQ3U/QQ3`/]Q3j/fY3w0U0V0]0b5fQ5X2hQ5[2lQ5q3VQ5w3_[6U3v3y3}4P4Q7SQ6x5VQ7Z5rQ7`5xW7f6V6[6^6`Q7x6yQ7{6}Q8U7[U8X7g7l7nQ8c7|Q8j8VS8k8Z8_Q8r8dQ8w8mQ9P8sQ9S8yQ9W9QR9[9XQ$gmQ&i!jU)e$h$i$jQ+Z&UU+{&j&k&lQ-`(kS.Z)f)gQ/z+]Q0R+jS0g+|+}Q1q-dQ2Z.[Q3t0QS3z0W0]Q4V0hQ4r1uS6Y3{4QQ7i6ZQ8[7kR8n8^S#ua;^R({$PU$Oa$P;^R-q(yQ#taS&z!w)aQ'O!yQ'i#dQ(^#vQ(f#yQ)P$TQ)Q$UQ)U$YQ+v&gQ,Y9wQ,Z9zQ,[9}Q,t'}Q,}(WQ-O(YQ-P(ZQ-X(bQ-^(hQ-o(wQ-p(xd-|)].R.{2T3Q4}5k6z7W8TQ.P)_Q.o*OQ.q*RQ0e+yQ0n:UQ0o:XQ0p:[Q0q,_Q1U9rQ1h-YQ1i-ZQ1m-]Q1}-wQ2W.TQ2l.pQ2n.sQ3O.}Q4Y:aQ4Z:dQ4_9yQ4`9|Q4a:PQ4f1aQ4m1kQ4q1sQ4w1yQ4y2QQ5O2XQ5Z2jQ5n3SQ6c:^Q6d:WQ6e:ZQ6m4lQ6q4uQ7Y5pQ7o:cQ7p:fQ7q6iQ8`:jQ8p9dQ8z:lQ8|9xQ8}9{Q9O:OQ9T:VQ9U:YQ9V:]Q9Y:bQ9Z:eQ9]:kQ:v;^Q;W;iQ;X;jQ;Y;kQ;Z;lQ;];nQ;p;tQ;q;uR;r;vlgOSj}!n$]%c%f%g%i*o*t/g/jS!pU%eQ%n!SQ%t!WQ'V!|Q'v#kS*h%[%_Q*l%`Q*z%mQ+W&SQ+u&fQ,r'wQ.O)^Q/b*kQ0d+xQ1[,mQ1{-uQ2V.SQ2}.|Q3b/_Q3c/`Q3e/aQ3g/cQ3n/lQ4d1XQ5Y2iQ5m3RQ5|3fQ6O3hQ6P3iQ7X5oR7b5}!vZOSUj}!S!n!|$]%[%_%`%c%e%f%g%i%m&S&f)^*k*o*t+x-u.S.|/_/`/a/c/g/j/l2i3R3f3h3i5o5}Q!_RQ!oTQ$akS%w!]%zQ%}!`Q&y!vQ'Q!zQ'W#PQ'X#QQ'Y#RQ'Z#SQ'[#TQ']#UQ'^#VQ'_#WQ'`#XQ'a#YQ'b#ZQ'd#]Q'g#bQ'k#eW'u#k'w,m1XQ)p$nS+R%x+TS+^&W/{Q+g&_Q,O&pQ,^&}Q,d'RQ,g9^Q,i9`Q,w(RQ-x)VQ/v+XQ/y+[Q0i,PQ0s,bQ0w9cQ0x9eQ0y9fQ0z9gQ0{9hQ0|9iQ0}9jQ1O9kQ1P9lQ1Q9mQ1R9nQ1S9oQ1T,hQ1W9sQ1]9pQ2O-zQ2[.]Q3s:QQ3v0TQ4W0jQ4[0tQ4]:RQ4b:TQ4c:_Q5`2qQ6S3qQ6V3xQ6b:`Q6f:gQ6g:hQ7g6WQ7z6{Q8Z7jQ8m8]Q8y8oQ9_!WR:|;aR!aRR&Y!bS&U!b+`S+]&V&^R0Q+fR'P!yR'S!zT!tU$ZS!sU$ZU$xrs*mS&s!r!uQ,T&tQ,W&wQ.l)zS0k,S,UR4X0l`!dR!]!`$u%x&`)x+hh!qUrs!r!u$Z&t&w)z,S,U0lQ/d*mQ/w+YQ3p/oT:s&W)yT!gR$uS!fR$uS%y!]&`S&O!`)xS+S%x+hT+_&W)yT&]!b$vQ#i^R'{#nT'q#i'rR1Z,lT(a#v(cR(i#yQ-})]Q2U.RQ2|.{Q4{2TQ5l3QQ6t4}Q7U5kQ7y6zQ8S7WR8i8TlhOSj}!n$]%c%f%g%i*o*t/g/jQ%]yR*d%YV$yrs*mR.u*TR*c%WQ$qpR)u$rR)k$lT%az%dT%bz%dT/i*t/j",nodeNames:"\u26A0 extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:bx,nodeProps:[["closedBy",4,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[_x],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T)X(rZ$UW]#eOY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j)X*{R$P&j$UW]#eO!^%T!_#o%T#p~%T)P+ZV]#eOY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U)P+wO$P&j]#e)P+zROr+Urs,Ts~+U)P,[U$P&j]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e,sU]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e-[O]#e#e-_PO~,n)X-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k)X.VZ$P&j$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/PZ$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/yR$UW]#eO!^%T!_#o%T#p~%T#m0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x3]0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`3]1g]$UW'o3TOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T5b5lU'x5Y$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T)X6jZ$UW]#eOY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w)P8YV]#eOY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T)P8rROw8Twx8{x~8T)P9SU$P&j]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e9kU]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e:QPO~9f)X:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c)X:xZ$P&j$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m;rZ$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k&i=QR!d&a$UWO!^%T!_#o%T#p~%Tk=bR!cc$UWO!^%T!_#o%T#p~%T7V=tU'^4V#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T%w>rSj%o$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu5^$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%T!{@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%T!{@iR!Q!s$UWO!^%T!_#o%T#p~%T!{@yZ$UWk!sO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%T!{AqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{BiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{CVV$UWk!sO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du!{!0cd$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%T!{!1x_$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%T!{!3OR$UWk!sO!^%T!_#o%T#p~%T!{!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%T!{!3}Y$UWk!sO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%T!{!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%T!{!5`X$UWk!sO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%T!{!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%T!{!6z]$UWk!sO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T$u!7|R!]V$UW#m$fO!^%T!_#o%T#p~%T!q!8^R_!i$UWO!^%T!_#o%T#p~%T5w!8rR'bd!a/n#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v$u!9kT!{$m$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%V!:gT'a!R#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T*a!<YV'p#{$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T*[!<vRv*S$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%Tk!={R!Oc$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$a!>pR$UW'f$XO!^%T!_#o%T#p~%T~!?OO!T~5b!?VT'w5Y$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T6X!?oR!S5}nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']$y'g3SOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[kx,Dx,Ax,Tx,0,1,2,3,4,5,6,7,8,9,Ex],topRules:{Script:[0,7]},dialects:{jsx:12107,ts:12109},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:e=>Ix[e]||-1},{term:299,get:e=>Qx[e]||-1},{term:63,get:e=>Lx[e]||-1}],tokenPrec:12130}),$x=[Ne("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Ne("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Ne("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Ne("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Ne("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Ne(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Ne("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Ne(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Ne(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Ne('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Ne('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],xd=new hO,vd=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function cr(e){return(t,n)=>{let i=t.node.getChild("VariableDefinition");return i&&n(i,e),!0}}const Nx=["FunctionDeclaration"],Fx={FunctionDeclaration:cr("function"),ClassDeclaration:cr("class"),ClassExpression:()=>!0,EnumDeclaration:cr("constant"),TypeAliasDeclaration:cr("type"),NamespaceDeclaration:cr("namespace"),VariableDefinition(e,t){e.matchContext(Nx)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function Pd(e,t){let n=xd.get(t);if(n)return n;let i=[],r=!0;function o(s,l){let h=e.sliceString(s.from,s.to);i.push({label:h,type:l})}return t.cursor(Wt.IncludeAnonymous).iterate(s=>{if(r)r=!1;else if(s.name){let l=Fx[s.name];if(l&&l(s,o)||vd.has(s.name))return!1}else if(s.to-s.from>8192){for(let l of Pd(e,s.node))i.push(l);return!1}}),xd.set(t,i),i}const Sd=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,Cd=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function Rx(e){let t=_t(e.state).resolveInner(e.pos,-1);if(Cd.indexOf(t.name)>-1)return null;let n=t.to-t.from<20&&Sd.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let i=[];for(let r=t;r;r=r.parent)vd.has(r.name)&&(i=i.concat(Pd(e.state.doc,r)));return{options:i,from:n?t.from:e.pos,validFor:Sd}}const jn=ss.define({parser:Xx.configure({props:[mc.add({IfStatement:ha({except:/^\s*({|else\b)/}),TryStatement:ha({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:kO,SwitchBody:e=>{let t=e.textAfter,n=/^\s*\}/.test(t),i=/^\s*(case|default)\b/.test(t);return e.baseIndent+(n?0:i?1:2)*e.unit},Block:TO({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":ha({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag"(e){return e.column(e.node.from)+e.unit}}),yc.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":LO,BlockComment(e){return{from:e.from+2,to:e.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),Bx=jn.configure({dialect:"ts"}),Mx=jn.configure({dialect:"jsx"}),Yx=jn.configure({dialect:"jsx ts"}),Wx="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(e=>({label:e,type:"keyword"}));function jx(e={}){let t=e.jsx?e.typescript?Yx:Mx:e.typescript?Bx:jn;return new PO(t,[jn.data.of({autocomplete:qy(Cd,Qp($x.concat(Wx)))}),jn.data.of({autocomplete:Rx}),e.jsx?zx:[]])}function wd(e,t,n=e.length){if(!t)return"";let i=t.getChild("JSXIdentifier");return i?e.sliceString(i.from,Math.min(i.to,n)):""}const Zx=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),zx=tt.inputHandler.of((e,t,n,i)=>{if((Zx?e.composing:e.compositionStarted)||e.state.readOnly||t!=n||i!=">"&&i!="/"||!jn.isActiveAt(e.state,t,-1))return!1;let{state:r}=e,o=r.changeByRange(s=>{var l,h,c;let{head:d}=s,f=_t(r).resolveInner(d,-1),m;if(f.name=="JSXStartTag"&&(f=f.parent),i==">"&&f.name=="JSXFragmentTag")return{range:Y.cursor(d+1),changes:{from:d,insert:"><>"}};if(i==">"&&f.name=="JSXIdentifier"){if(((h=(l=f.parent)===null||l===void 0?void 0:l.lastChild)===null||h===void 0?void 0:h.name)!="JSXEndTag"&&(m=wd(r.doc,f.parent,d)))return{range:Y.cursor(d+1),changes:{from:d,insert:`></${m}>`}}}else if(i=="/"&&f.name=="JSXFragmentTag"){let v=f.parent,C=v==null?void 0:v.parent;if(v.from==d-1&&((c=C.lastChild)===null||c===void 0?void 0:c.name)!="JSXEndTag"&&(m=wd(r.doc,C==null?void 0:C.firstChild,d))){let O=`/${m}>`;return{range:Y.cursor(d+O.length),changes:{from:d,insert:O}}}}return{range:s}});return o.changes.empty?!1:(e.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)});Ft.define({create(e){return 0},update(e,t){if(t.docChanged){const{state:n}=t;return _t(n),e+1}else return e},provide(e){return[]}});class qx extends HTMLElement{constructor(){super(),this.view=void 0,this.state=void 0}foldRange(){}connectedCallback(){const t=[H1,jx(),Zi.of([yy]),tr.of("  ")],n=ft.create({extensions:t});this.view=new tt({state:n,parent:this})}}window.customElements.define("codemirror-2",qx);const Ux=["./library/connectors/ESP8266_12E.json","./library/connectors/header_FTDI.json","./library/connectors/power_65mm.json","./library/connectors/ESP32_CAM.json","./library/connectors/USB_A_plug.json","./library/connectors/header_i0.json","./library/connectors/header_serial_reverse.json","./library/connectors/header_4.json","./library/connectors/header_signal.json","./library/connectors/MTA_i0.json","./library/connectors/HM11.json","./library/connectors/header_MFRC522.json","./library/connectors/header_serial_reverse_5V.json","./library/connectors/USB_mini_B.json","./library/connectors/ESC.json","./library/connectors/MTA_PS2.json","./library/connectors/header_APA.json","./library/connectors/MTA_ICP.json","./library/connectors/stereo_2_5mm.json","./library/connectors/header_VL53L1X_3415.json","./library/connectors/Molex_serial.json","./library/connectors/header_SWD_4_1.json","./library/connectors/ESP_01.json","./library/connectors/HCSR04.json","./library/connectors/header_SWD_4_05.json","./library/connectors/ESP32_WROOM.json","./library/connectors/header_serial.json","./library/connectors/header_PDI.json","./library/connectors/I2C4x1v.json","./library/connectors/header_power.json","./library/connectors/MTA_serial.json","./library/connectors/header_LSM6DS33_2736.json","./library/connectors/MTA_2.json","./library/connectors/MTA_3.json","./library/connectors/header_LCD.json","./library/connectors/screw_terminal_2.json","./library/connectors/HCSR501.json","./library/connectors/screw_terminal_i0.json","./library/connectors/header_unipolar_stepper.json","./library/connectors/screw_terminal_power.json","./library/connectors/header_nRF24L01.json","./library/connectors/header_serial_reverse_3V3.json","./library/connectors/MTA_power.json","./library/connectors/MTA_4.json","./library/connectors/RCWL0516.json","./library/connectors/ESP_WROOM_02D.json","./library/connectors/RN4871.json","./library/connectors/header_I2C.json","./library/connectors/header_SWD.json","./library/connectors/header_servo.json","./library/connectors/microSD.json","./library/connectors/header_4H.json","./library/connectors/header_UPDI.json","./library/connectors/I2C4x1i.json","./library/connectors/I2C4x1h.json","./library/connectors/header_ISP.json","./library/connectors/header_NEO_6M.json","./library/connectors/MTA_5.json","./library/connectors/header_6.json","./library/connectors/header_UPDI_reverse.json","./library/connectors/header_bus.json","./library/connectors/TFT8x1v.json","./library/connectors/header_2H.json","./library/connectors/header_ATP.json","./library/switches/button_6mm.json","./library/switches/slide_switch.json","./library/diodes_transistors_regulators_sensors/D_1206.json","./library/diodes_transistors_regulators_sensors/mic_SPM1437.json","./library/diodes_transistors_regulators_sensors/LED_1206.json","./library/diodes_transistors_regulators_sensors/NMOSFET_TO252AA.json","./library/diodes_transistors_regulators_sensors/regulator_SOT223.json","./library/diodes_transistors_regulators_sensors/regulator_SOT23.json","./library/diodes_transistors_regulators_sensors/VL53L1X.json","./library/diodes_transistors_regulators_sensors/H_bridge_SM8.json","./library/diodes_transistors_regulators_sensors/SPG08P4HM4H.json","./library/diodes_transistors_regulators_sensors/Hall_SOT23.json","./library/diodes_transistors_regulators_sensors/VEML6040.json","./library/diodes_transistors_regulators_sensors/phototransistor_1206.json","./library/diodes_transistors_regulators_sensors/LED_RGB.json","./library/diodes_transistors_regulators_sensors/accel_MXD6235M.json","./library/diodes_transistors_regulators_sensors/ADXL343.json","./library/diodes_transistors_regulators_sensors/mic_SPU0414HR5H.json","./library/diodes_transistors_regulators_sensors/D_SOD_123.json","./library/diodes_transistors_regulators_sensors/LED_3014_1100.json","./library/diodes_transistors_regulators_sensors/A4953_SOICN.json","./library/diodes_transistors_regulators_sensors/NMOSFET_SOT23.json","./library/diodes_transistors_regulators_sensors/phototransistor_PLCC2.json","./library/diodes_transistors_regulators_sensors/PMOSFET_SOT23.json","./library/diodes_transistors_regulators_sensors/DRV8428_HTSSOP.json","./library/diodes_transistors_regulators_sensors/CMM4030D261I2STR.json","./library/crystals_and_resonators/XTAL_CSM_7.json","./library/crystals_and_resonators/XTAL_NX5032GA.json","./library/crystals_and_resonators/XTAL_EFOBM.json","./library/discretes/R_0402.json","./library/discretes/ST4EB.json","./library/discretes/C_1206.json","./library/discretes/R_1206.json","./library/discretes/choke.json","./library/discretes/L_1210.json","./library/discretes/C_FND.json","./library/ICs/CBA.json","./library/ICs/SAMD21E.json","./library/ICs/AVRDB28.json","./library/ICs/FT230XS.json","./library/ICs/ATtiny1614.json","./library/ICs/fab.json","./library/ICs/ATtiny44_SOICN.json","./library/ICs/ATxmegaE5_TQFP.json","./library/ICs/op_amp_SOICN.json","./library/ICs/ATtiny45_SOIC.json","./library/ICs/ATmega88_TQFP.json","./library/ICs/SAMD11D.json","./library/ICs/TRC102.json","./library/ICs/ATtiny412.json","./library/ICs/ATmega644_TQFP.json","./library/ICs/op_amp_SOT23_5.json","./library/ICs/SAMD11C.json","./library/ICs/ATtiny3216.json"];function Gx(e){const t=bd(e),n=document.createElement("a");n.href=t,n.download=`${e.name===""?"anon":e.name}.svg`,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function bd(e){const t=new XMLSerializer,n=document.querySelector("svg").cloneNode(!0),i=n.querySelectorAll(".no-download");for(const h of i)h.remove();const r=n.querySelector(".transform-group");r.style.transformOrigin="",r.style.transform="";const o=e.limits.x[1]-e.limits.x[0],s=e.limits.y[1]-e.limits.y[0];r.setAttribute("transform",`scale(1, -1) translate(0, ${-(e.limits.y[0]+e.limits.y[1])})`),n.setAttribute("style",""),n.setAttribute("width",`${o*e.mm_per_unit}mm`),n.setAttribute("height",`${s*e.mm_per_unit}mm`),n.setAttribute("viewBox",`${e.limits.x[0]} ${e.limits.y[0]} ${o} ${s}`),n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");const l=t.serializeToString(n);return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(l)}function Vx(e,t){const n=new Blob([t],{type:"text/plain"});var i=document.createElement("a");i.href=URL.createObjectURL(n),i.download=`${e}`,i.click(),URL.revokeObjectURL(i)}function Hx(e,t=1e3){const n=bd(e);var i=25.4;const r=(e.limits.x[1]-e.limits.x[0])*e.mm_per_unit,o=(e.limits.y[1]-e.limits.y[0])*e.mm_per_unit;var s=t*r/i,l=t*o/i,h=new Image;h.width=s,h.height=l,h.setAttribute("src",n),h.onload=function(){const c=document.createElement("canvas");(s/t).toFixed(3)+""+(l/t).toFixed(3),(25.4*s/t).toFixed(3)+""+(25.4*l/t).toFixed(3),c.width=s,c.height=l;var d=c.getContext("2d");d.clearRect(0,0,s,l),d.drawImage(h,0,0,s,l),d.getImageData(0,0,s,l),Jx(c,`${e.name===""?"anon":e.name}`)}}function Jx(e,t){var n=e.toDataURL(),i=document.createElement("a");i.download=`${t}.png`,i.href=n,i.click()}const Kx=e=>e.map(t=>t.slice(10)).map(t=>kn`
  <div class="menu-item" @mousedown=${async n=>{const i=await(await fetch(`components/${t}`)).text();ct("ADD_IMPORT",{text:i,name:n.target.innerText.split("/")[1].split(".")[0]})}}>${t}</div>
`);var x={};x.version="6.4.2.2",x.use_lines=!0,x.use_xyz=!1;var Ed=!1;if(typeof re<"u"&&re.exports?(re.exports=x,Ed=!0):typeof document<"u"?window.ClipperLib=x:self.ClipperLib=x,Ed)var Vt="chrome";else var Vt=navigator.userAgent.toString().toLowerCase();Vt.indexOf("chrome")!=-1&&Vt.indexOf("chromium")==-1,Vt.indexOf("chromium")!=-1,Vt.indexOf("safari")!=-1&&Vt.indexOf("chrome")==-1&&Vt.indexOf("chromium")==-1,Vt.indexOf("firefox")!=-1,Vt.indexOf("firefox/17")!=-1,Vt.indexOf("firefox/15")!=-1,Vt.indexOf("firefox/3")!=-1,Vt.indexOf("opera")!=-1,Vt.indexOf("msie 10")!=-1,Vt.indexOf("msie 9")!=-1,Vt.indexOf("msie 8")!=-1,Vt.indexOf("msie 7")!=-1,Vt.indexOf("msie ")!=-1;var Dd=function(e,t){var n;if(typeof Object.getOwnPropertyNames>"u"){for(n in t.prototype)(typeof e.prototype[n]>"u"||e.prototype[n]===Object.prototype[n])&&(e.prototype[n]=t.prototype[n]);for(n in t)typeof e[n]>"u"&&(e[n]=t[n]);e.$baseCtor=t}else{for(var i=Object.getOwnPropertyNames(t.prototype),r=0;r<i.length;r++)typeof Object.getOwnPropertyDescriptor(e.prototype,i[r])>"u"&&Object.defineProperty(e.prototype,i[r],Object.getOwnPropertyDescriptor(t.prototype,i[r]));for(n in t)typeof e[n]>"u"&&(e[n]=t[n]);e.$baseCtor=t}};x.Path=function(){return[]},x.Path.prototype.push=Array.prototype.push,x.Paths=function(){return[]},x.Paths.prototype.push=Array.prototype.push,x.PolyNode=function(){this.m_Parent=null,this.m_polygon=new x.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},x.PolyNode.prototype.IsHoleNode=function(){for(var e=!0,t=this.m_Parent;t!==null;)e=!e,t=t.m_Parent;return e},x.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},x.PolyNode.prototype.Contour=function(){return this.m_polygon},x.PolyNode.prototype.AddChild=function(e){var t=this.m_Childs.length;this.m_Childs.push(e),e.m_Parent=this,e.m_Index=t},x.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},x.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},x.PolyNode.prototype.Childs=function(){return this.m_Childs},x.PolyNode.prototype.Parent=function(){return this.m_Parent},x.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},x.PolyTree=function(){this.m_AllPolys=[],x.PolyNode.call(this)},x.PolyTree.prototype.Clear=function(){for(var e=0,t=this.m_AllPolys.length;e<t;e++)this.m_AllPolys[e]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},x.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},x.PolyTree.prototype.Total=function(){var e=this.m_AllPolys.length;return e>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&e--,e},Dd(x.PolyTree,x.PolyNode),x.Clear=function(e){e.length=0},x.PI=3.141592653589793,x.PI2=2*3.141592653589793,x.FPoint=function(){var e=arguments,t=e.length;if(this.X=0,this.Y=0,x.use_xyz)if(this.Z=0,t===3)this.X=e[0],this.Y=e[1],this.Z=e[2];else if(t===2)this.X=e[0],this.Y=e[1],this.Z=0;else if(t===1)if(e[0]instanceof x.FPoint){var n=e[0];this.X=n.X,this.Y=n.Y,this.Z=0}else{var i=e[0];typeof i.Z>"u"&&(i.Z=0),this.X=i.X,this.Y=i.Y,this.Z=i.Z}else this.X=0,this.Y=0,this.Z=0;else if(t===2)this.X=e[0],this.Y=e[1];else if(t===1)if(e[0]instanceof x.FPoint){var n=e[0];this.X=n.X,this.Y=n.Y}else{var i=e[0];this.X=i.X,this.Y=i.Y}else this.X=0,this.Y=0},x.FPoint.op_Equality=function(e,t){return e.X===t.X&&e.Y===t.Y},x.FPoint.op_Inequality=function(e,t){return e.X!==t.X||e.Y!==t.Y},x.FPoint0=function(){this.X=0,this.Y=0,x.use_xyz&&(this.Z=0)},x.FPoint0.prototype=x.FPoint.prototype,x.FPoint1=function(e){this.X=e.X,this.Y=e.Y,x.use_xyz&&(typeof e.Z>"u"?this.Z=0:this.Z=e.Z)},x.FPoint1.prototype=x.FPoint.prototype,x.FPoint1dp=function(e){this.X=e.X,this.Y=e.Y,x.use_xyz&&(this.Z=0)},x.FPoint1dp.prototype=x.FPoint.prototype,x.FPoint2=function(e,t,n){this.X=e,this.Y=t,x.use_xyz&&(typeof n>"u"?this.Z=0:this.Z=n)},x.FPoint2.prototype=x.FPoint.prototype,x.FRect=function(){var e=arguments,t=e.length;if(t===4)this.left=e[0],this.top=e[1],this.right=e[2],this.bottom=e[3];else if(t===1){var n=e[0];this.left=n.left,this.top=n.top,this.right=n.right,this.bottom=n.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},x.FRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},x.FRect0.prototype=x.FRect.prototype,x.FRect1=function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom},x.FRect1.prototype=x.FRect.prototype,x.FRect4=function(e,t,n,i){this.left=e,this.top=t,this.right=n,this.bottom=i},x.FRect4.prototype=x.FRect.prototype,x.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},x.PolyType={ptSubject:0,ptClip:1},x.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},x.JoinType={jtSquare:0,jtRound:1,jtMiter:2},x.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},x.EdgeSide={esLeft:0,esRight:1},x.Direction={dRightToLeft:0,dLeftToRight:1},x.TEdge=function(){this.Bot=new x.FPoint0,this.Curr=new x.FPoint0,this.Top=new x.FPoint0,this.Delta=new x.FPoint0,this.Dx=0,this.PolyTyp=x.PolyType.ptSubject,this.Side=x.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},x.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new x.FPoint0},x.MyIntersectNodeSort=function(){},x.MyIntersectNodeSort.Compare=function(e,t){var n=t.Pt.Y-e.Pt.Y;return n>0?1:n<0?-1:0},x.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},x.Scanbeam=function(){this.Y=0,this.Next=null},x.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},x.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},x.OutPt=function(){this.Idx=0,this.Pt=new x.FPoint0,this.Next=null,this.Prev=null},x.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new x.FPoint0},x.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},x.ClipperBase.horizontal=-34e37,x.ClipperBase.Skip=-2,x.ClipperBase.Unassigned=-1,x.ClipperBase.tolerance=1e-20,x.ClipperBase.maxValue=Math.sqrt(Number.MAX_VALUE),x.ClipperBase.minValue=Math.sqrt(Number.MIN_VALUE),x.ClipperBase.near_zero=function(e){return e>-x.ClipperBase.tolerance&&e<x.ClipperBase.tolerance},x.ClipperBase.IsHorizontal=function(e){return e.Delta.Y===0},x.ClipperBase.prototype.PointIsVertex=function(e,t){var n=t;do{if(x.FPoint.op_Equality(n.Pt,e))return!0;n=n.Next}while(n!==t);return!1},x.ClipperBase.prototype.PointOnLineSegment=function(e,t,n){return e.X===t.X&&e.Y===t.Y||e.X===n.X&&e.Y===n.Y||e.X>t.X==e.X<n.X&&e.Y>t.Y==e.Y<n.Y&&(e.X-t.X)*(n.Y-t.Y)===(n.X-t.X)*(e.Y-t.Y)},x.ClipperBase.prototype.PointOnPolygon=function(e,t){for(var n=t;;){if(this.PointOnLineSegment(e,n.Pt,n.Next.Pt))return!0;if(n=n.Next,n===t)break}return!1},x.ClipperBase.prototype.SlopesEqual=x.ClipperBase.SlopesEqual=function(){var e=arguments,t=e.length,n,i,r,o,s,l;return t===2?(n=e[0],i=e[1],n.Delta.Y*i.Delta.X===n.Delta.X*i.Delta.Y):t===3?(r=e[0],o=e[1],s=e[2],(r.Y-o.Y)*(o.X-s.X)-(r.X-o.X)*(o.Y-s.Y)===0):(r=e[0],o=e[1],s=e[2],l=e[3],(r.Y-o.Y)*(s.X-l.X)-(r.X-o.X)*(s.Y-l.Y)===0)},x.ClipperBase.SlopesEqual3=function(e,t){return e.Delta.Y*t.Delta.X===e.Delta.X*t.Delta.Y},x.ClipperBase.SlopesEqual4=function(e,t,n){return(e.Y-t.Y)*(t.X-n.X)-(e.X-t.X)*(t.Y-n.Y)===0},x.ClipperBase.SlopesEqual5=function(e,t,n,i){return(e.Y-t.Y)*(n.X-i.X)-(e.X-t.X)*(n.Y-i.Y)===0},x.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var e=0,t=this.m_edges.length;e<t;++e){for(var n=0,i=this.m_edges[e].length;n<i;++n)this.m_edges[e][n]=null;x.Clear(this.m_edges[e])}x.Clear(this.m_edges),this.m_HasOpenPaths=!1},x.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var e=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=e}this.m_CurrentLM=null},x.ClipperBase.prototype.RangeTest=function(e){(e.X>x.ClipperBase.maxValue||e.X<-x.ClipperBase.maxValue||e.Y>x.ClipperBase.maxValue||e.Y<-x.ClipperBase.maxValue||e.X>0&&e.X<x.ClipperBase.minValue||e.Y>0&&e.Y<x.ClipperBase.minValue||e.X<0&&e.X>-x.ClipperBase.minValue||e.Y<0&&e.Y>-x.ClipperBase.minValue)&&x.Error("Coordinate outside allowed range in RangeTest().")},x.ClipperBase.prototype.InitEdge=function(e,t,n,i){e.Next=t,e.Prev=n,e.Curr.X=i.X,e.Curr.Y=i.Y,x.use_xyz&&(e.Curr.Z=i.Z),e.OutIdx=-1},x.ClipperBase.prototype.InitEdge2=function(e,t){e.Curr.Y>=e.Next.Curr.Y?(e.Bot.X=e.Curr.X,e.Bot.Y=e.Curr.Y,x.use_xyz&&(e.Bot.Z=e.Curr.Z),e.Top.X=e.Next.Curr.X,e.Top.Y=e.Next.Curr.Y,x.use_xyz&&(e.Top.Z=e.Next.Curr.Z)):(e.Top.X=e.Curr.X,e.Top.Y=e.Curr.Y,x.use_xyz&&(e.Top.Z=e.Curr.Z),e.Bot.X=e.Next.Curr.X,e.Bot.Y=e.Next.Curr.Y,x.use_xyz&&(e.Bot.Z=e.Next.Curr.Z)),this.SetDx(e),e.PolyTyp=t},x.ClipperBase.prototype.FindNextLocMin=function(e){for(var t;;){for(;x.FPoint.op_Inequality(e.Bot,e.Prev.Bot)||x.FPoint.op_Equality(e.Curr,e.Top);)e=e.Next;if(e.Dx!==x.ClipperBase.horizontal&&e.Prev.Dx!==x.ClipperBase.horizontal)break;for(;e.Prev.Dx===x.ClipperBase.horizontal;)e=e.Prev;for(t=e;e.Dx===x.ClipperBase.horizontal;)e=e.Next;if(e.Top.Y!==e.Prev.Bot.Y){t.Prev.Bot.X<e.Bot.X&&(e=t);break}}return e},x.ClipperBase.prototype.ProcessBound=function(e,t){var n,i=e,r;if(i.OutIdx===x.ClipperBase.Skip){if(e=i,t){for(;e.Top.Y===e.Next.Bot.Y;)e=e.Next;for(;e!==i&&e.Dx===x.ClipperBase.horizontal;)e=e.Prev}else{for(;e.Top.Y===e.Prev.Bot.Y;)e=e.Prev;for(;e!==i&&e.Dx===x.ClipperBase.horizontal;)e=e.Next}if(e===i)t?i=e.Next:i=e.Prev;else{t?e=i.Next:e=i.Prev;var o=new x.LocalMinima;o.Next=null,o.Y=e.Bot.Y,o.LeftBound=null,o.RightBound=e,e.WindDelta=0,i=this.ProcessBound(e,t),this.InsertLocalMinima(o)}return i}if(e.Dx===x.ClipperBase.horizontal&&(t?n=e.Prev:n=e.Next,n.Dx===x.ClipperBase.horizontal?n.Bot.X!==e.Bot.X&&n.Top.X!==e.Bot.X&&this.ReverseHorizontal(e):n.Bot.X!==e.Bot.X&&this.ReverseHorizontal(e)),n=e,t){for(;i.Top.Y===i.Next.Bot.Y&&i.Next.OutIdx!==x.ClipperBase.Skip;)i=i.Next;if(i.Dx===x.ClipperBase.horizontal&&i.Next.OutIdx!==x.ClipperBase.Skip){for(r=i;r.Prev.Dx===x.ClipperBase.horizontal;)r=r.Prev;r.Prev.Top.X>i.Next.Top.X&&(i=r.Prev)}for(;e!==i;)e.NextInLML=e.Next,e.Dx===x.ClipperBase.horizontal&&e!==n&&e.Bot.X!==e.Prev.Top.X&&this.ReverseHorizontal(e),e=e.Next;e.Dx===x.ClipperBase.horizontal&&e!==n&&e.Bot.X!==e.Prev.Top.X&&this.ReverseHorizontal(e),i=i.Next}else{for(;i.Top.Y===i.Prev.Bot.Y&&i.Prev.OutIdx!==x.ClipperBase.Skip;)i=i.Prev;if(i.Dx===x.ClipperBase.horizontal&&i.Prev.OutIdx!==x.ClipperBase.Skip){for(r=i;r.Next.Dx===x.ClipperBase.horizontal;)r=r.Next;(r.Next.Top.X===i.Prev.Top.X||r.Next.Top.X>i.Prev.Top.X)&&(i=r.Next)}for(;e!==i;)e.NextInLML=e.Prev,e.Dx===x.ClipperBase.horizontal&&e!==n&&e.Bot.X!==e.Next.Top.X&&this.ReverseHorizontal(e),e=e.Prev;e.Dx===x.ClipperBase.horizontal&&e!==n&&e.Bot.X!==e.Next.Top.X&&this.ReverseHorizontal(e),i=i.Prev}return i},x.ClipperBase.prototype.AddPath=function(e,t,n){x.use_lines?!n&&t===x.PolyType.ptClip&&x.Error("AddPath: Open paths must be subject."):n||x.Error("AddPath: Open paths have been disabled.");var i=e.length-1;if(n)for(;i>0&&x.FPoint.op_Equality(e[i],e[0]);)--i;for(;i>0&&x.FPoint.op_Equality(e[i],e[i-1]);)--i;if(n&&i<2||!n&&i<1)return!1;for(var r=new Array,o=0;o<=i;o++)r.push(new x.TEdge);var s=!0;r[1].Curr.X=e[1].X,r[1].Curr.Y=e[1].Y,x.use_xyz&&(r[1].Curr.Z=e[1].Z),this.RangeTest(e[0]),this.RangeTest(e[i]),this.InitEdge(r[0],r[1],r[i],e[0]),this.InitEdge(r[i],r[0],r[i-1],e[i]);for(var o=i-1;o>=1;--o)this.RangeTest(e[o]),this.InitEdge(r[o],r[o+1],r[o-1],e[o]);for(var l=r[0],h=l,c=l;;){if(h.Curr===h.Next.Curr&&(n||h.Next!==l)){if(h===h.Next)break;h===l&&(l=h.Next),h=this.RemoveEdge(h),c=h;continue}if(h.Prev===h.Next)break;if(n&&x.ClipperBase.SlopesEqual4(h.Prev.Curr,h.Curr,h.Next.Curr)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(h.Prev.Curr,h.Curr,h.Next.Curr))){h===l&&(l=h.Next),h=this.RemoveEdge(h),h=h.Prev,c=h;continue}if(h=h.Next,h===c||!n&&h.Next===l)break}if(!n&&h===h.Next||n&&h.Prev===h.Next)return!1;n||(this.m_HasOpenPaths=!0,l.Prev.OutIdx=x.ClipperBase.Skip),h=l;do this.InitEdge2(h,t),h=h.Next,s&&h.Curr.Y!==l.Curr.Y&&(s=!1);while(h!==l);if(s){if(n)return!1;h.Prev.OutIdx=x.ClipperBase.Skip;var d=new x.LocalMinima;for(d.Next=null,d.Y=h.Bot.Y,d.LeftBound=null,d.RightBound=h,d.RightBound.Side=x.EdgeSide.esRight,d.RightBound.WindDelta=0;h.Bot.X!==h.Prev.Top.X&&this.ReverseHorizontal(h),h.Next.OutIdx!==x.ClipperBase.Skip;)h.NextInLML=h.Next,h=h.Next;return this.InsertLocalMinima(d),this.m_edges.push(r),!0}this.m_edges.push(r);var f,m=null;for(x.FPoint.op_Equality(h.Prev.Bot,h.Prev.Top)&&(h=h.Next);h=this.FindNextLocMin(h),h!==m;){m===null&&(m=h);var d=new x.LocalMinima;d.Next=null,d.Y=h.Bot.Y,h.Dx<h.Prev.Dx?(d.LeftBound=h.Prev,d.RightBound=h,f=!1):(d.LeftBound=h,d.RightBound=h.Prev,f=!0),d.LeftBound.Side=x.EdgeSide.esLeft,d.RightBound.Side=x.EdgeSide.esRight,n?d.LeftBound.Next===d.RightBound?d.LeftBound.WindDelta=-1:d.LeftBound.WindDelta=1:d.LeftBound.WindDelta=0,d.RightBound.WindDelta=-d.LeftBound.WindDelta,h=this.ProcessBound(d.LeftBound,f),h.OutIdx===x.ClipperBase.Skip&&(h=this.ProcessBound(h,f));var v=this.ProcessBound(d.RightBound,!f);v.OutIdx===x.ClipperBase.Skip&&(v=this.ProcessBound(v,!f)),d.LeftBound.OutIdx===x.ClipperBase.Skip?d.LeftBound=null:d.RightBound.OutIdx===x.ClipperBase.Skip&&(d.RightBound=null),this.InsertLocalMinima(d),f||(h=v)}return!0},x.ClipperBase.prototype.AddPaths=function(e,t,n){for(var i=!1,r=0,o=e.length;r<o;++r)this.AddPath(e[r],t,n)&&(i=!0);return i},x.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(e,t,n){return x.FPoint.op_Equality(e,n)||x.FPoint.op_Equality(e,t)||x.FPoint.op_Equality(n,t)?!1:e.X!==n.X?t.X>e.X==t.X<n.X:t.Y>e.Y==t.Y<n.Y},x.ClipperBase.prototype.RemoveEdge=function(e){e.Prev.Next=e.Next,e.Next.Prev=e.Prev;var t=e.Next;return e.Prev=null,t},x.ClipperBase.prototype.SetDx=function(e){e.Delta.X=e.Top.X-e.Bot.X,e.Delta.Y=e.Top.Y-e.Bot.Y,e.Delta.Y===0?e.Dx=x.ClipperBase.horizontal:e.Dx=e.Delta.X/e.Delta.Y},x.ClipperBase.prototype.InsertLocalMinima=function(e){if(this.m_MinimaList===null)this.m_MinimaList=e;else if(e.Y>=this.m_MinimaList.Y)e.Next=this.m_MinimaList,this.m_MinimaList=e;else{for(var t=this.m_MinimaList;t.Next!==null&&e.Y<t.Next.Y;)t=t.Next;e.Next=t.Next,t.Next=e}},x.ClipperBase.prototype.PopLocalMinima=function(e,t){return t.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===e?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},x.ClipperBase.prototype.ReverseHorizontal=function(e){var t=e.Top.X;e.Top.X=e.Bot.X,e.Bot.X=t,x.use_xyz&&(t=e.Top.Z,e.Top.Z=e.Bot.Z,e.Bot.Z=t)},x.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var e=this.m_MinimaList;e!==null;){this.InsertScanbeam(e.Y);var t=e.LeftBound;t!==null&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,x.use_xyz&&(t.Curr.Z=t.Bot.Z),t.OutIdx=x.ClipperBase.Unassigned),t=e.RightBound,t!==null&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,x.use_xyz&&(t.Curr.Z=t.Bot.Z),t.OutIdx=x.ClipperBase.Unassigned),e=e.Next}this.m_ActiveEdges=null}},x.ClipperBase.prototype.InsertScanbeam=function(e){if(this.m_Scanbeam===null)this.m_Scanbeam=new x.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=e;else if(e>this.m_Scanbeam.Y){var t=new x.Scanbeam;t.Y=e,t.Next=this.m_Scanbeam,this.m_Scanbeam=t}else{for(var n=this.m_Scanbeam;n.Next!==null&&e<=n.Next.Y;)n=n.Next;if(e===n.Y)return;var i=new x.Scanbeam;i.Y=e,i.Next=n.Next,n.Next=i}},x.ClipperBase.prototype.PopScanbeam=function(e){return this.m_Scanbeam===null?(e.v=0,!1):(e.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},x.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},x.ClipperBase.prototype.CreateOutRec=function(){var e=new x.OutRec;return e.Idx=x.ClipperBase.Unassigned,e.IsHole=!1,e.IsOpen=!1,e.FirstLeft=null,e.Pts=null,e.BottomPt=null,e.PolyNode=null,this.m_PolyOuts.push(e),e.Idx=this.m_PolyOuts.length-1,e},x.ClipperBase.prototype.DisposeOutRec=function(e){var t=this.m_PolyOuts[e];t.Pts=null,t=null,this.m_PolyOuts[e]=null},x.ClipperBase.prototype.UpdateEdgeIntoAEL=function(e){e.NextInLML===null&&x.Error("UpdateEdgeIntoAEL: invalid call");var t=e.PrevInAEL,n=e.NextInAEL;return e.NextInLML.OutIdx=e.OutIdx,t!==null?t.NextInAEL=e.NextInLML:this.m_ActiveEdges=e.NextInLML,n!==null&&(n.PrevInAEL=e.NextInLML),e.NextInLML.Side=e.Side,e.NextInLML.WindDelta=e.WindDelta,e.NextInLML.WindCnt=e.WindCnt,e.NextInLML.WindCnt2=e.WindCnt2,e=e.NextInLML,e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.PrevInAEL=t,e.NextInAEL=n,x.ClipperBase.IsHorizontal(e)||this.InsertScanbeam(e.Top.Y),e},x.ClipperBase.prototype.SwapPositionsInAEL=function(e,t){if(!(e.NextInAEL===e.PrevInAEL||t.NextInAEL===t.PrevInAEL)){if(e.NextInAEL===t){var n=t.NextInAEL;n!==null&&(n.PrevInAEL=e);var i=e.PrevInAEL;i!==null&&(i.NextInAEL=t),t.PrevInAEL=i,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=n}else if(t.NextInAEL===e){var r=e.NextInAEL;r!==null&&(r.PrevInAEL=t);var o=t.PrevInAEL;o!==null&&(o.NextInAEL=e),e.PrevInAEL=o,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=r}else{var s=e.NextInAEL,l=e.PrevInAEL;e.NextInAEL=t.NextInAEL,e.NextInAEL!==null&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=t.PrevInAEL,e.PrevInAEL!==null&&(e.PrevInAEL.NextInAEL=e),t.NextInAEL=s,t.NextInAEL!==null&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=l,t.PrevInAEL!==null&&(t.PrevInAEL.NextInAEL=t)}e.PrevInAEL===null?this.m_ActiveEdges=e:t.PrevInAEL===null&&(this.m_ActiveEdges=t)}},x.ClipperBase.prototype.DeleteFromAEL=function(e){var t=e.PrevInAEL,n=e.NextInAEL;t===null&&n===null&&e!==this.m_ActiveEdges||(t!==null?t.NextInAEL=n:this.m_ActiveEdges=n,n!==null&&(n.PrevInAEL=t),e.NextInAEL=null,e.PrevInAEL=null)},x.Clipper=function(e){typeof e>"u"&&(e=0),this.m_PolyOuts=null,this.m_ClipType=x.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=x.PolyFillType.pftEvenOdd,this.m_SubjFillType=x.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,x.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=x.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&e)!==0,this.StrictlySimple=(2&e)!==0,this.PreserveCollinear=(4&e)!==0,x.use_xyz&&(this.ZFillFunction=null)},x.Clipper.ioReverseSolution=1,x.Clipper.ioStrictlySimple=2,x.Clipper.ioPreserveCollinear=4,x.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),x.ClipperBase.prototype.Clear.call(this))},x.Clipper.prototype.InsertMaxima=function(e){var t=new x.Maxima;if(t.X=e,this.m_Maxima===null)this.m_Maxima=t,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(e<this.m_Maxima.X)t.Next=this.m_Maxima,t.Prev=null,this.m_Maxima=t;else{for(var n=this.m_Maxima;n.Next!==null&&e>=n.Next.X;)n=n.Next;if(e===n.X)return;t.Next=n.Next,t.Prev=n,n.Next!==null&&(n.Next.Prev=t),n.Next=t}},x.Clipper.prototype.Execute=function(){var e=arguments,t=e.length,n=e[1]instanceof x.PolyTree;if(t===4&&!n){var i=e[0],r=e[1],o=e[2],s=e[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&x.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,x.Clear(r),this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=i,this.m_UsingPolyTree=!1;try{var l=this.ExecuteInternal();l&&this.BuildResult(r)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}else if(t===4&&n){var i=e[0],h=e[1],o=e[2],s=e[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=i,this.m_UsingPolyTree=!0;try{var l=this.ExecuteInternal();l&&this.BuildResult2(h)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}else if(t===2&&!n){var i=e[0],r=e[1];return this.Execute(i,r,x.PolyFillType.pftEvenOdd,x.PolyFillType.pftEvenOdd)}else if(t===2&&n){var i=e[0],h=e[1];return this.Execute(i,h,x.PolyFillType.pftEvenOdd,x.PolyFillType.pftEvenOdd)}},x.Clipper.prototype.FixHoleLinkage=function(e){if(!(e.FirstLeft===null||e.IsHole!==e.FirstLeft.IsHole&&e.FirstLeft.Pts!==null)){for(var t=e.FirstLeft;t!==null&&(t.IsHole===e.IsHole||t.Pts===null);)t=t.FirstLeft;e.FirstLeft=t}},x.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var e={},t={};if(!this.PopScanbeam(e))return!1;for(this.InsertLocalMinimaIntoAEL(e.v);this.PopScanbeam(t)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(t.v))return!1;this.ProcessEdgesAtTopOfScanbeam(t.v),e.v=t.v,this.InsertLocalMinimaIntoAEL(e.v)}var n,i,r;for(i=0,r=this.m_PolyOuts.length;i<r;i++)n=this.m_PolyOuts[i],!(n.Pts===null||n.IsOpen)&&(n.IsHole^this.ReverseSolution)==this.Area$1(n)>0&&this.ReversePolyPtLinks(n.Pts);for(this.JoinCommonEdges(),i=0,r=this.m_PolyOuts.length;i<r;i++)n=this.m_PolyOuts[i],n.Pts!==null&&(n.IsOpen?this.FixupOutPolyline(n):this.FixupOutPolygon(n));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},x.Clipper.prototype.DisposeAllPolyPts=function(){for(var e=0,t=this.m_PolyOuts.length;e<t;++e)this.DisposeOutRec(e);x.Clear(this.m_PolyOuts)},x.Clipper.prototype.AddJoin=function(e,t,n){var i=new x.Join;i.OutPt1=e,i.OutPt2=t,i.OffPt.X=n.X,i.OffPt.Y=n.Y,x.use_xyz&&(i.OffPt.Z=n.Z),this.m_Joins.push(i)},x.Clipper.prototype.AddGhostJoin=function(e,t){var n=new x.Join;n.OutPt1=e,n.OffPt.X=t.X,n.OffPt.Y=t.Y,x.use_xyz&&(n.OffPt.Z=t.Z),this.m_GhostJoins.push(n)},x.Clipper.prototype.SetZ=function(e,t,n){if(this.ZFillFunction!==null){if(e.Z!==0||this.ZFillFunction===null)return;x.FPoint.op_Equality(e,t.Bot)?e.Z=t.Bot.Z:x.FPoint.op_Equality(e,t.Top)?e.Z=t.Top.Z:x.FPoint.op_Equality(e,n.Bot)?e.Z=n.Bot.Z:x.FPoint.op_Equality(e,n.Top)?e.Z=n.Top.Z:this.ZFillFunction(t.Bot,t.Top,n.Bot,n.Top,e)}},x.Clipper.prototype.InsertLocalMinimaIntoAEL=function(e){for(var t={},n,i;this.PopLocalMinima(e,t);){n=t.v.LeftBound,i=t.v.RightBound;var r=null;if(n===null?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(r=this.AddOutPt(i,i.Bot))):i===null?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(r=this.AddOutPt(n,n.Bot)),this.InsertScanbeam(n.Top.Y)):(this.InsertEdgeIntoAEL(n,null),this.InsertEdgeIntoAEL(i,n),this.SetWindingCount(n),i.WindCnt=n.WindCnt,i.WindCnt2=n.WindCnt2,this.IsContributing(n)&&(r=this.AddLocalMinPoly(n,i,n.Bot)),this.InsertScanbeam(n.Top.Y)),i!==null&&(x.ClipperBase.IsHorizontal(i)?(i.NextInLML!==null&&this.InsertScanbeam(i.NextInLML.Top.Y),this.AddEdgeToSEL(i)):this.InsertScanbeam(i.Top.Y)),!(n===null||i===null)){if(r!==null&&x.ClipperBase.IsHorizontal(i)&&this.m_GhostJoins.length>0&&i.WindDelta!==0)for(var o=0,s=this.m_GhostJoins.length;o<s;o++){var l=this.m_GhostJoins[o];this.HorzSegmentsOverlap(l.OutPt1.Pt.X,l.OffPt.X,i.Bot.X,i.Top.X)&&this.AddJoin(l.OutPt1,r,l.OffPt)}if(n.OutIdx>=0&&n.PrevInAEL!==null&&n.PrevInAEL.Curr.X===n.Bot.X&&n.PrevInAEL.OutIdx>=0&&x.ClipperBase.SlopesEqual5(n.PrevInAEL.Curr,n.PrevInAEL.Top,n.Curr,n.Top)&&n.WindDelta!==0&&n.PrevInAEL.WindDelta!==0){var h=this.AddOutPt(n.PrevInAEL,n.Bot);this.AddJoin(r,h,n.Top)}if(n.NextInAEL!==i){if(i.OutIdx>=0&&i.PrevInAEL.OutIdx>=0&&x.ClipperBase.SlopesEqual5(i.PrevInAEL.Curr,i.PrevInAEL.Top,i.Curr,i.Top)&&i.WindDelta!==0&&i.PrevInAEL.WindDelta!==0){var h=this.AddOutPt(i.PrevInAEL,i.Bot);this.AddJoin(r,h,i.Top)}var c=n.NextInAEL;if(c!==null)for(;c!==i;)this.IntersectEdges(i,c,n.Curr),c=c.NextInAEL}}}},x.Clipper.prototype.InsertEdgeIntoAEL=function(e,t){if(this.m_ActiveEdges===null)e.PrevInAEL=null,e.NextInAEL=null,this.m_ActiveEdges=e;else if(t===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,e))e.PrevInAEL=null,e.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=e,this.m_ActiveEdges=e;else{for(t===null&&(t=this.m_ActiveEdges);t.NextInAEL!==null&&!this.E2InsertsBeforeE1(t.NextInAEL,e);)t=t.NextInAEL;e.NextInAEL=t.NextInAEL,t.NextInAEL!==null&&(t.NextInAEL.PrevInAEL=e),e.PrevInAEL=t,t.NextInAEL=e}},x.Clipper.prototype.E2InsertsBeforeE1=function(e,t){return t.Curr.X===e.Curr.X?t.Top.Y>e.Top.Y?t.Top.X<x.Clipper.TopX(e,t.Top.Y):e.Top.X>x.Clipper.TopX(t,e.Top.Y):t.Curr.X<e.Curr.X},x.Clipper.prototype.IsEvenOddFillType=function(e){return e.PolyTyp===x.PolyType.ptSubject?this.m_SubjFillType===x.PolyFillType.pftEvenOdd:this.m_ClipFillType===x.PolyFillType.pftEvenOdd},x.Clipper.prototype.IsEvenOddAltFillType=function(e){return e.PolyTyp===x.PolyType.ptSubject?this.m_ClipFillType===x.PolyFillType.pftEvenOdd:this.m_SubjFillType===x.PolyFillType.pftEvenOdd},x.Clipper.prototype.IsContributing=function(e){var t,n;switch(e.PolyTyp===x.PolyType.ptSubject?(t=this.m_SubjFillType,n=this.m_ClipFillType):(t=this.m_ClipFillType,n=this.m_SubjFillType),t){case x.PolyFillType.pftEvenOdd:if(e.WindDelta===0&&e.WindCnt!==1)return!1;break;case x.PolyFillType.pftNonZero:if(Math.abs(e.WindCnt)!==1)return!1;break;case x.PolyFillType.pftPositive:if(e.WindCnt!==1)return!1;break;default:if(e.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case x.ClipType.ctIntersection:switch(n){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2!==0;case x.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case x.ClipType.ctUnion:switch(n){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2===0;case x.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}case x.ClipType.ctDifference:if(e.PolyTyp===x.PolyType.ptSubject)switch(n){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2===0;case x.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else switch(n){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2!==0;case x.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case x.ClipType.ctXor:if(e.WindDelta===0)switch(n){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2===0;case x.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else return!0}return!0},x.Clipper.prototype.SetWindingCount=function(e){for(var t=e.PrevInAEL;t!==null&&(t.PolyTyp!==e.PolyTyp||t.WindDelta===0);)t=t.PrevInAEL;if(t===null){var n=e.PolyTyp===x.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;e.WindDelta===0?e.WindCnt=n===x.PolyFillType.pftNegative?-1:1:e.WindCnt=e.WindDelta,e.WindCnt2=0,t=this.m_ActiveEdges}else if(e.WindDelta===0&&this.m_ClipType!==x.ClipType.ctUnion)e.WindCnt=1,e.WindCnt2=t.WindCnt2,t=t.NextInAEL;else if(this.IsEvenOddFillType(e)){if(e.WindDelta===0){for(var i=!0,r=t.PrevInAEL;r!==null;)r.PolyTyp===t.PolyTyp&&r.WindDelta!==0&&(i=!i),r=r.PrevInAEL;e.WindCnt=i?0:1}else e.WindCnt=e.WindDelta;e.WindCnt2=t.WindCnt2,t=t.NextInAEL}else t.WindCnt*t.WindDelta<0?Math.abs(t.WindCnt)>1?t.WindDelta*e.WindDelta<0?e.WindCnt=t.WindCnt:e.WindCnt=t.WindCnt+e.WindDelta:e.WindCnt=e.WindDelta===0?1:e.WindDelta:e.WindDelta===0?e.WindCnt=t.WindCnt<0?t.WindCnt-1:t.WindCnt+1:t.WindDelta*e.WindDelta<0?e.WindCnt=t.WindCnt:e.WindCnt=t.WindCnt+e.WindDelta,e.WindCnt2=t.WindCnt2,t=t.NextInAEL;if(this.IsEvenOddAltFillType(e))for(;t!==e;)t.WindDelta!==0&&(e.WindCnt2=e.WindCnt2===0?1:0),t=t.NextInAEL;else for(;t!==e;)e.WindCnt2+=t.WindDelta,t=t.NextInAEL},x.Clipper.prototype.AddEdgeToSEL=function(e){this.m_SortedEdges===null?(this.m_SortedEdges=e,e.PrevInSEL=null,e.NextInSEL=null):(e.NextInSEL=this.m_SortedEdges,e.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=e,this.m_SortedEdges=e)},x.Clipper.prototype.PopEdgeFromSEL=function(e){if(e.v=this.m_SortedEdges,e.v===null)return!1;var t=e.v;return this.m_SortedEdges=e.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),t.NextInSEL=null,t.PrevInSEL=null,!0},x.Clipper.prototype.CopyAELToSEL=function(){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;e!==null;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e=e.NextInAEL},x.Clipper.prototype.SwapPositionsInSEL=function(e,t){if(!(e.NextInSEL===null&&e.PrevInSEL===null)&&!(t.NextInSEL===null&&t.PrevInSEL===null)){if(e.NextInSEL===t){var n=t.NextInSEL;n!==null&&(n.PrevInSEL=e);var i=e.PrevInSEL;i!==null&&(i.NextInSEL=t),t.PrevInSEL=i,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=n}else if(t.NextInSEL===e){var n=e.NextInSEL;n!==null&&(n.PrevInSEL=t);var i=t.PrevInSEL;i!==null&&(i.NextInSEL=e),e.PrevInSEL=i,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=n}else{var n=e.NextInSEL,i=e.PrevInSEL;e.NextInSEL=t.NextInSEL,e.NextInSEL!==null&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=t.PrevInSEL,e.PrevInSEL!==null&&(e.PrevInSEL.NextInSEL=e),t.NextInSEL=n,t.NextInSEL!==null&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=i,t.PrevInSEL!==null&&(t.PrevInSEL.NextInSEL=t)}e.PrevInSEL===null?this.m_SortedEdges=e:t.PrevInSEL===null&&(this.m_SortedEdges=t)}},x.Clipper.prototype.AddLocalMaxPoly=function(e,t,n){this.AddOutPt(e,n),t.WindDelta===0&&this.AddOutPt(t,n),e.OutIdx===t.OutIdx?(e.OutIdx=-1,t.OutIdx=-1):e.OutIdx<t.OutIdx?this.AppendPolygon(e,t):this.AppendPolygon(t,e)},x.Clipper.prototype.AddLocalMinPoly=function(e,t,n){var i,r,o;if(x.ClipperBase.IsHorizontal(t)||e.Dx>t.Dx?(i=this.AddOutPt(e,n),t.OutIdx=e.OutIdx,e.Side=x.EdgeSide.esLeft,t.Side=x.EdgeSide.esRight,r=e,r.PrevInAEL===t?o=t.PrevInAEL:o=r.PrevInAEL):(i=this.AddOutPt(t,n),e.OutIdx=t.OutIdx,e.Side=x.EdgeSide.esRight,t.Side=x.EdgeSide.esLeft,r=t,r.PrevInAEL===e?o=e.PrevInAEL:o=r.PrevInAEL),o!==null&&o.OutIdx>=0&&o.Top.Y<n.Y&&r.Top.Y<n.Y){var s=x.Clipper.TopX(o,n.Y),l=x.Clipper.TopX(r,n.Y);if(s===l&&r.WindDelta!==0&&o.WindDelta!==0&&x.ClipperBase.SlopesEqual5(new x.FPoint2(s,n.Y),o.Top,new x.FPoint2(l,n.Y),r.Top)){var h=this.AddOutPt(o,n);this.AddJoin(i,h,r.Top)}}return i},x.Clipper.prototype.AddOutPt=function(e,t){if(e.OutIdx<0){var n=this.CreateOutRec();n.IsOpen=e.WindDelta===0;var i=new x.OutPt;return n.Pts=i,i.Idx=n.Idx,i.Pt.X=t.X,i.Pt.Y=t.Y,x.use_xyz&&(i.Pt.Z=t.Z),i.Next=i,i.Prev=i,n.IsOpen||this.SetHoleState(e,n),e.OutIdx=n.Idx,i}else{var n=this.m_PolyOuts[e.OutIdx],r=n.Pts,o=e.Side===x.EdgeSide.esLeft;if(o&&x.FPoint.op_Equality(t,r.Pt))return r;if(!o&&x.FPoint.op_Equality(t,r.Prev.Pt))return r.Prev;var i=new x.OutPt;return i.Idx=n.Idx,i.Pt.X=t.X,i.Pt.Y=t.Y,x.use_xyz&&(i.Pt.Z=t.Z),i.Next=r,i.Prev=r.Prev,i.Prev.Next=i,r.Prev=i,o&&(n.Pts=i),i}},x.Clipper.prototype.GetLastOutPt=function(e){var t=this.m_PolyOuts[e.OutIdx];return e.Side===x.EdgeSide.esLeft?t.Pts:t.Pts.Prev},x.Clipper.prototype.SwapPoints=function(e,t){var n=new x.FPoint1(e.Value);e.Value.X=t.Value.X,e.Value.Y=t.Value.Y,x.use_xyz&&(e.Value.Z=t.Value.Z),t.Value.X=n.X,t.Value.Y=n.Y,x.use_xyz&&(t.Value.Z=n.Z)},x.Clipper.prototype.HorzSegmentsOverlap=function(e,t,n,i){var r;return e>t&&(r=e,e=t,t=r),n>i&&(r=n,n=i,i=r),e<i&&n<t},x.Clipper.prototype.SetHoleState=function(e,t){for(var n=e.PrevInAEL,i=null;n!==null;)n.OutIdx>=0&&n.WindDelta!==0&&(i===null?i=n:i.OutIdx===n.OutIdx&&(i=null)),n=n.PrevInAEL;i===null?(t.FirstLeft=null,t.IsHole=!1):(t.FirstLeft=this.m_PolyOuts[i.OutIdx],t.IsHole=!t.FirstLeft.IsHole)},x.Clipper.prototype.GetDx=function(e,t){return e.Y===t.Y?x.ClipperBase.horizontal:(t.X-e.X)/(t.Y-e.Y)},x.Clipper.prototype.FirstIsBottomPt=function(e,t){for(var n=e.Prev;x.FPoint.op_Equality(n.Pt,e.Pt)&&n!==e;)n=n.Prev;var i=Math.abs(this.GetDx(e.Pt,n.Pt));for(n=e.Next;x.FPoint.op_Equality(n.Pt,e.Pt)&&n!==e;)n=n.Next;var r=Math.abs(this.GetDx(e.Pt,n.Pt));for(n=t.Prev;x.FPoint.op_Equality(n.Pt,t.Pt)&&n!==t;)n=n.Prev;var o=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=t.Next;x.FPoint.op_Equality(n.Pt,t.Pt)&&n!==t;)n=n.Next;var s=Math.abs(this.GetDx(t.Pt,n.Pt));return Math.max(i,r)===Math.max(o,s)&&Math.min(i,r)===Math.min(o,s)?this.Area(e)>0:i>=o&&i>=s||r>=o&&r>=s},x.Clipper.prototype.GetBottomPt=function(e){for(var t=null,n=e.Next;n!==e;)n.Pt.Y>e.Pt.Y?(e=n,t=null):n.Pt.Y===e.Pt.Y&&n.Pt.X<=e.Pt.X&&(n.Pt.X<e.Pt.X?(t=null,e=n):n.Next!==e&&n.Prev!==e&&(t=n)),n=n.Next;if(t!==null)for(;t!==n;)for(this.FirstIsBottomPt(n,t)||(e=t),t=t.Next;x.FPoint.op_Inequality(t.Pt,e.Pt);)t=t.Next;return e},x.Clipper.prototype.GetLowermostRec=function(e,t){e.BottomPt===null&&(e.BottomPt=this.GetBottomPt(e.Pts)),t.BottomPt===null&&(t.BottomPt=this.GetBottomPt(t.Pts));var n=e.BottomPt,i=t.BottomPt;return n.Pt.Y>i.Pt.Y?e:n.Pt.Y<i.Pt.Y?t:n.Pt.X<i.Pt.X?e:n.Pt.X>i.Pt.X||n.Next===n?t:i.Next===i||this.FirstIsBottomPt(n,i)?e:t},x.Clipper.prototype.OutRec1RightOfOutRec2=function(e,t){do if(e=e.FirstLeft,e===t)return!0;while(e!==null);return!1},x.Clipper.prototype.GetOutRec=function(e){for(var t=this.m_PolyOuts[e];t!==this.m_PolyOuts[t.Idx];)t=this.m_PolyOuts[t.Idx];return t},x.Clipper.prototype.AppendPolygon=function(e,t){var n=this.m_PolyOuts[e.OutIdx],i=this.m_PolyOuts[t.OutIdx],r;this.OutRec1RightOfOutRec2(n,i)?r=i:this.OutRec1RightOfOutRec2(i,n)?r=n:r=this.GetLowermostRec(n,i);var o=n.Pts,s=o.Prev,l=i.Pts,h=l.Prev;e.Side===x.EdgeSide.esLeft?t.Side===x.EdgeSide.esLeft?(this.ReversePolyPtLinks(l),l.Next=o,o.Prev=l,s.Next=h,h.Prev=s,n.Pts=h):(h.Next=o,o.Prev=h,l.Prev=s,s.Next=l,n.Pts=l):t.Side===x.EdgeSide.esRight?(this.ReversePolyPtLinks(l),s.Next=h,h.Prev=s,l.Next=o,o.Prev=l):(s.Next=l,l.Prev=s,o.Prev=h,h.Next=o),n.BottomPt=null,r===i&&(i.FirstLeft!==n&&(n.FirstLeft=i.FirstLeft),n.IsHole=i.IsHole),i.Pts=null,i.BottomPt=null,i.FirstLeft=n;var c=e.OutIdx,d=t.OutIdx;e.OutIdx=-1,t.OutIdx=-1;for(var f=this.m_ActiveEdges;f!==null;){if(f.OutIdx===d){f.OutIdx=c,f.Side=e.Side;break}f=f.NextInAEL}i.Idx=n.Idx},x.Clipper.prototype.ReversePolyPtLinks=function(e){if(e!==null){var t,n;t=e;do n=t.Next,t.Next=t.Prev,t.Prev=n,t=n;while(t!==e)}},x.Clipper.SwapSides=function(e,t){var n=e.Side;e.Side=t.Side,t.Side=n},x.Clipper.SwapPolyIndexes=function(e,t){var n=e.OutIdx;e.OutIdx=t.OutIdx,t.OutIdx=n},x.Clipper.prototype.IntersectEdges=function(e,t,n){var i=e.OutIdx>=0,r=t.OutIdx>=0;if(x.use_xyz&&this.SetZ(n,e,t),x.use_lines&&(e.WindDelta===0||t.WindDelta===0)){if(e.WindDelta===0&&t.WindDelta===0)return;e.PolyTyp===t.PolyTyp&&e.WindDelta!==t.WindDelta&&this.m_ClipType===x.ClipType.ctUnion?e.WindDelta===0?r&&(this.AddOutPt(e,n),i&&(e.OutIdx=-1)):i&&(this.AddOutPt(t,n),r&&(t.OutIdx=-1)):e.PolyTyp!==t.PolyTyp&&(e.WindDelta===0&&Math.abs(t.WindCnt)===1&&(this.m_ClipType!==x.ClipType.ctUnion||t.WindCnt2===0)?(this.AddOutPt(e,n),i&&(e.OutIdx=-1)):t.WindDelta===0&&Math.abs(e.WindCnt)===1&&(this.m_ClipType!==x.ClipType.ctUnion||e.WindCnt2===0)&&(this.AddOutPt(t,n),r&&(t.OutIdx=-1)));return}if(e.PolyTyp===t.PolyTyp)if(this.IsEvenOddFillType(e)){var o=e.WindCnt;e.WindCnt=t.WindCnt,t.WindCnt=o}else e.WindCnt+t.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt+=t.WindDelta,t.WindCnt-e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt-=e.WindDelta;else this.IsEvenOddFillType(t)?e.WindCnt2=e.WindCnt2===0?1:0:e.WindCnt2+=t.WindDelta,this.IsEvenOddFillType(e)?t.WindCnt2=t.WindCnt2===0?1:0:t.WindCnt2-=e.WindDelta;var s,l,h,c;e.PolyTyp===x.PolyType.ptSubject?(s=this.m_SubjFillType,h=this.m_ClipFillType):(s=this.m_ClipFillType,h=this.m_SubjFillType),t.PolyTyp===x.PolyType.ptSubject?(l=this.m_SubjFillType,c=this.m_ClipFillType):(l=this.m_ClipFillType,c=this.m_SubjFillType);var d,f;switch(s){case x.PolyFillType.pftPositive:d=e.WindCnt;break;case x.PolyFillType.pftNegative:d=-e.WindCnt;break;default:d=Math.abs(e.WindCnt);break}switch(l){case x.PolyFillType.pftPositive:f=t.WindCnt;break;case x.PolyFillType.pftNegative:f=-t.WindCnt;break;default:f=Math.abs(t.WindCnt);break}if(i&&r)d!==0&&d!==1||f!==0&&f!==1||e.PolyTyp!==t.PolyTyp&&this.m_ClipType!==x.ClipType.ctXor?this.AddLocalMaxPoly(e,t,n):(this.AddOutPt(e,n),this.AddOutPt(t,n),x.Clipper.SwapSides(e,t),x.Clipper.SwapPolyIndexes(e,t));else if(i)(f===0||f===1)&&(this.AddOutPt(e,n),x.Clipper.SwapSides(e,t),x.Clipper.SwapPolyIndexes(e,t));else if(r)(d===0||d===1)&&(this.AddOutPt(t,n),x.Clipper.SwapSides(e,t),x.Clipper.SwapPolyIndexes(e,t));else if((d===0||d===1)&&(f===0||f===1)){var m,v;switch(h){case x.PolyFillType.pftPositive:m=e.WindCnt2;break;case x.PolyFillType.pftNegative:m=-e.WindCnt2;break;default:m=Math.abs(e.WindCnt2);break}switch(c){case x.PolyFillType.pftPositive:v=t.WindCnt2;break;case x.PolyFillType.pftNegative:v=-t.WindCnt2;break;default:v=Math.abs(t.WindCnt2);break}if(e.PolyTyp!==t.PolyTyp)this.AddLocalMinPoly(e,t,n);else if(d===1&&f===1)switch(this.m_ClipType){case x.ClipType.ctIntersection:m>0&&v>0&&this.AddLocalMinPoly(e,t,n);break;case x.ClipType.ctUnion:m<=0&&v<=0&&this.AddLocalMinPoly(e,t,n);break;case x.ClipType.ctDifference:(e.PolyTyp===x.PolyType.ptClip&&m>0&&v>0||e.PolyTyp===x.PolyType.ptSubject&&m<=0&&v<=0)&&this.AddLocalMinPoly(e,t,n);break;case x.ClipType.ctXor:this.AddLocalMinPoly(e,t,n);break}else x.Clipper.SwapSides(e,t)}},x.Clipper.prototype.DeleteFromSEL=function(e){var t=e.PrevInSEL,n=e.NextInSEL;t===null&&n===null&&e!==this.m_SortedEdges||(t!==null?t.NextInSEL=n:this.m_SortedEdges=n,n!==null&&(n.PrevInSEL=t),e.NextInSEL=null,e.PrevInSEL=null)},x.Clipper.prototype.ProcessHorizontals=function(){for(var e={};this.PopEdgeFromSEL(e);)this.ProcessHorizontal(e.v)},x.Clipper.prototype.GetHorzDirection=function(e,t){e.Bot.X<e.Top.X?(t.Left=e.Bot.X,t.Right=e.Top.X,t.Dir=x.Direction.dLeftToRight):(t.Left=e.Top.X,t.Right=e.Bot.X,t.Dir=x.Direction.dRightToLeft)},x.Clipper.prototype.ProcessHorizontal=function(e){var t={Dir:null,Left:null,Right:null};this.GetHorzDirection(e,t);for(var n=t.Dir,i=t.Left,r=t.Right,o=e.WindDelta===0,s=e,l=null;s.NextInLML!==null&&x.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;s.NextInLML===null&&(l=this.GetMaximaPair(s));var h=this.m_Maxima;if(h!==null)if(n===x.Direction.dLeftToRight){for(;h!==null&&h.X<=e.Bot.X;)h=h.Next;h!==null&&h.X>=s.Top.X&&(h=null)}else{for(;h.Next!==null&&h.Next.X<e.Bot.X;)h=h.Next;h.X<=s.Top.X&&(h=null)}for(var c=null;;){for(var d=e===s,f=this.GetNextInAEL(e,n);f!==null;){if(h!==null)if(n===x.Direction.dLeftToRight)for(;h!==null&&h.X<f.Curr.X;)e.OutIdx>=0&&!o&&this.AddOutPt(e,new x.FPoint2(h.X,e.Bot.Y)),h=h.Next;else for(;h!==null&&h.X>f.Curr.X;)e.OutIdx>=0&&!o&&this.AddOutPt(e,new x.FPoint2(h.X,e.Bot.Y)),h=h.Prev;if(n===x.Direction.dLeftToRight&&f.Curr.X>r||n===x.Direction.dRightToLeft&&f.Curr.X<i||f.Curr.X===e.Top.X&&e.NextInLML!==null&&f.Dx<e.NextInLML.Dx)break;if(e.OutIdx>=0&&!o){x.use_xyz&&(n===x.Direction.dLeftToRight?this.SetZ(f.Curr,e,f):this.SetZ(f.Curr,f,e)),c=this.AddOutPt(e,f.Curr);for(var m=this.m_SortedEdges;m!==null;){if(m.OutIdx>=0&&this.HorzSegmentsOverlap(e.Bot.X,e.Top.X,m.Bot.X,m.Top.X)){var v=this.GetLastOutPt(m);this.AddJoin(v,c,m.Top)}m=m.NextInSEL}this.AddGhostJoin(c,e.Bot)}if(f===l&&d){e.OutIdx>=0&&this.AddLocalMaxPoly(e,l,e.Top),this.DeleteFromAEL(e),this.DeleteFromAEL(l);return}if(n===x.Direction.dLeftToRight){var C=new x.FPoint2(f.Curr.X,e.Curr.Y);this.IntersectEdges(e,f,C)}else{var C=new x.FPoint2(f.Curr.X,e.Curr.Y);this.IntersectEdges(f,e,C)}var O=this.GetNextInAEL(f,n);this.SwapPositionsInAEL(e,f),f=O}if(e.NextInLML===null||!x.ClipperBase.IsHorizontal(e.NextInLML))break;e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot),t={Dir:n,Left:i,Right:r},this.GetHorzDirection(e,t),n=t.Dir,i=t.Left,r=t.Right}if(e.OutIdx>=0&&c===null){c=this.GetLastOutPt(e);for(var m=this.m_SortedEdges;m!==null;){if(m.OutIdx>=0&&this.HorzSegmentsOverlap(e.Bot.X,e.Top.X,m.Bot.X,m.Top.X)){var v=this.GetLastOutPt(m);this.AddJoin(v,c,m.Top)}m=m.NextInSEL}this.AddGhostJoin(c,e.Top)}if(e.NextInLML!==null)if(e.OutIdx>=0){if(c=this.AddOutPt(e,e.Top),e=this.UpdateEdgeIntoAEL(e),e.WindDelta===0)return;var y=e.PrevInAEL,O=e.NextInAEL;if(y!==null&&y.Curr.X===e.Bot.X&&y.Curr.Y===e.Bot.Y&&y.WindDelta===0&&y.OutIdx>=0&&y.Curr.Y>y.Top.Y&&x.ClipperBase.SlopesEqual3(e,y)){var v=this.AddOutPt(y,e.Bot);this.AddJoin(c,v,e.Top)}else if(O!==null&&O.Curr.X===e.Bot.X&&O.Curr.Y===e.Bot.Y&&O.WindDelta!==0&&O.OutIdx>=0&&O.Curr.Y>O.Top.Y&&x.ClipperBase.SlopesEqual3(e,O)){var v=this.AddOutPt(O,e.Bot);this.AddJoin(c,v,e.Top)}}else e=this.UpdateEdgeIntoAEL(e);else e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e)},x.Clipper.prototype.GetNextInAEL=function(e,t){return t===x.Direction.dLeftToRight?e.NextInAEL:e.PrevInAEL},x.Clipper.prototype.IsMinima=function(e){return e!==null&&e.Prev.NextInLML!==e&&e.Next.NextInLML!==e},x.Clipper.prototype.IsMaxima=function(e,t){return e!==null&&e.Top.Y===t&&e.NextInLML===null},x.Clipper.prototype.IsIntermediate=function(e,t){return e.Top.Y===t&&e.NextInLML!==null},x.Clipper.prototype.GetMaximaPair=function(e){return x.FPoint.op_Equality(e.Next.Top,e.Top)&&e.Next.NextInLML===null?e.Next:x.FPoint.op_Equality(e.Prev.Top,e.Top)&&e.Prev.NextInLML===null?e.Prev:null},x.Clipper.prototype.GetMaximaPairEx=function(e){var t=this.GetMaximaPair(e);return t===null||t.OutIdx===x.ClipperBase.Skip||t.NextInAEL===t.PrevInAEL&&!x.ClipperBase.IsHorizontal(t)?null:t},x.Clipper.prototype.ProcessIntersections=function(e){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(e),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,x.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},x.Clipper.prototype.BuildIntersectList=function(e){if(this.m_ActiveEdges!==null){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;t!==null;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t.Curr.X=x.Clipper.TopX(t,e),t=t.NextInAEL;for(var n=!0;n&&this.m_SortedEdges!==null;){for(n=!1,t=this.m_SortedEdges;t.NextInSEL!==null;){var i=t.NextInSEL,r=new x.FPoint0;if(t.Curr.X>i.Curr.X){this.IntersectPoint(t,i,r),r.Y<e&&(r=new x.FPoint2(x.Clipper.TopX(t,e),e));var o=new x.IntersectNode;o.Edge1=t,o.Edge2=i,o.Pt.X=r.X,o.Pt.Y=r.Y,x.use_xyz&&(o.Pt.Z=r.Z),this.m_IntersectList.push(o),this.SwapPositionsInSEL(t,i),n=!0}else t=i}if(t.PrevInSEL!==null)t.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},x.Clipper.prototype.EdgesAdjacent=function(e){return e.Edge1.NextInSEL===e.Edge2||e.Edge1.PrevInSEL===e.Edge2},x.Clipper.IntersectNodeSort=function(e,t){return t.Pt.Y-e.Pt.Y},x.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var e=this.m_IntersectList.length,t=0;t<e;t++){if(!this.EdgesAdjacent(this.m_IntersectList[t])){for(var n=t+1;n<e&&!this.EdgesAdjacent(this.m_IntersectList[n]);)n++;if(n===e)return!1;var i=this.m_IntersectList[t];this.m_IntersectList[t]=this.m_IntersectList[n],this.m_IntersectList[n]=i}this.SwapPositionsInSEL(this.m_IntersectList[t].Edge1,this.m_IntersectList[t].Edge2)}return!0},x.Clipper.prototype.ProcessIntersectList=function(){for(var e=0,t=this.m_IntersectList.length;e<t;e++){var n=this.m_IntersectList[e];this.IntersectEdges(n.Edge1,n.Edge2,n.Pt),this.SwapPositionsInAEL(n.Edge1,n.Edge2)}this.m_IntersectList.length=0},x.Clipper.TopX=function(e,t){return t===e.Top.Y?e.Top.X:e.Bot.X+e.Dx*(t-e.Bot.Y)},x.Clipper.prototype.IntersectPoint=function(e,t,n){n.X=0,n.Y=0;var i,r;if(e.Dx===t.Dx){n.Y=e.Curr.Y,n.X=x.Clipper.TopX(e,n.Y);return}if(e.Delta.X===0)n.X=e.Bot.X,x.ClipperBase.IsHorizontal(t)?n.Y=t.Bot.Y:(r=t.Bot.Y-t.Bot.X/t.Dx,n.Y=n.X/t.Dx+r);else if(t.Delta.X===0)n.X=t.Bot.X,x.ClipperBase.IsHorizontal(e)?n.Y=e.Bot.Y:(i=e.Bot.Y-e.Bot.X/e.Dx,n.Y=n.X/e.Dx+i);else{i=e.Bot.X-e.Bot.Y*e.Dx,r=t.Bot.X-t.Bot.Y*t.Dx;var o=(r-i)/(e.Dx-t.Dx);n.Y=o,Math.abs(e.Dx)<Math.abs(t.Dx)?n.X=e.Dx*o+i:n.X=t.Dx*o+r}if(n.Y<e.Top.Y||n.Y<t.Top.Y){if(e.Top.Y>t.Top.Y)return n.Y=e.Top.Y,n.X=x.Clipper.TopX(t,e.Top.Y),n.X<e.Top.X;n.Y=t.Top.Y,Math.abs(e.Dx)<Math.abs(t.Dx)?n.X=x.Clipper.TopX(e,n.Y):n.X=x.Clipper.TopX(t,n.Y)}n.Y>e.Curr.Y&&(n.Y=e.Curr.Y,Math.abs(e.Dx)>Math.abs(t.Dx)?n.X=x.Clipper.TopX(t,n.Y):n.X=x.Clipper.TopX(e,n.Y))},x.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(e){for(var t=this.m_ActiveEdges;t!==null;){var n=this.IsMaxima(t,e);if(n){var i=this.GetMaximaPairEx(t);n=i===null||!x.ClipperBase.IsHorizontal(i)}if(n){this.StrictlySimple&&this.InsertMaxima(t.Top.X);var r=t.PrevInAEL;this.DoMaxima(t),r===null?t=this.m_ActiveEdges:t=r.NextInAEL}else{if(this.IsIntermediate(t,e)&&x.ClipperBase.IsHorizontal(t.NextInLML)?(t=this.UpdateEdgeIntoAEL(t),t.OutIdx>=0&&this.AddOutPt(t,t.Bot),this.AddEdgeToSEL(t)):(t.Curr.X=x.Clipper.TopX(t,e),t.Curr.Y=e),x.use_xyz&&(t.Top.Y===e?t.Curr.Z=t.Top.Z:t.Bot.Y===e?t.Curr.Z=t.Bot.Z:t.Curr.Z=0),this.StrictlySimple){var r=t.PrevInAEL;if(t.OutIdx>=0&&t.WindDelta!==0&&r!==null&&r.OutIdx>=0&&r.Curr.X===t.Curr.X&&r.WindDelta!==0){var o=new x.FPoint1(t.Curr);x.use_xyz&&this.SetZ(o,r,t);var s=this.AddOutPt(r,o),l=this.AddOutPt(t,o);this.AddJoin(s,l,o)}}t=t.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,t=this.m_ActiveEdges;t!==null;){if(this.IsIntermediate(t,e)){var s=null;t.OutIdx>=0&&(s=this.AddOutPt(t,t.Top)),t=this.UpdateEdgeIntoAEL(t);var r=t.PrevInAEL,h=t.NextInAEL;if(r!==null&&r.Curr.X===t.Bot.X&&r.Curr.Y===t.Bot.Y&&s!==null&&r.OutIdx>=0&&r.Curr.Y===r.Top.Y&&x.ClipperBase.SlopesEqual5(t.Curr,t.Top,r.Curr,r.Top)&&t.WindDelta!==0&&r.WindDelta!==0){var l=this.AddOutPt(ePrev2,t.Bot);this.AddJoin(s,l,t.Top)}else if(h!==null&&h.Curr.X===t.Bot.X&&h.Curr.Y===t.Bot.Y&&s!==null&&h.OutIdx>=0&&h.Curr.Y===h.Top.Y&&x.ClipperBase.SlopesEqual5(t.Curr,t.Top,h.Curr,h.Top)&&t.WindDelta!==0&&h.WindDelta!==0){var l=this.AddOutPt(h,t.Bot);this.AddJoin(s,l,t.Top)}}t=t.NextInAEL}},x.Clipper.prototype.DoMaxima=function(e){var t=this.GetMaximaPairEx(e);if(t===null){e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e);return}for(var n=e.NextInAEL;n!==null&&n!==t;)this.IntersectEdges(e,n,e.Top),this.SwapPositionsInAEL(e,n),n=e.NextInAEL;e.OutIdx===-1&&t.OutIdx===-1?(this.DeleteFromAEL(e),this.DeleteFromAEL(t)):e.OutIdx>=0&&t.OutIdx>=0?(e.OutIdx>=0&&this.AddLocalMaxPoly(e,t,e.Top),this.DeleteFromAEL(e),this.DeleteFromAEL(t)):x.use_lines&&e.WindDelta===0?(e.OutIdx>=0&&(this.AddOutPt(e,e.Top),e.OutIdx=x.ClipperBase.Unassigned),this.DeleteFromAEL(e),t.OutIdx>=0&&(this.AddOutPt(t,e.Top),t.OutIdx=x.ClipperBase.Unassigned),this.DeleteFromAEL(t)):x.Error("DoMaxima error")},x.Clipper.ReversePaths=function(e){for(var t=0,n=e.length;t<n;t++)e[t].reverse()},x.Clipper.Orientation=function(e){return x.Clipper.Area(e)>=0},x.Clipper.prototype.PointCount=function(e){if(e===null)return 0;var t=0,n=e;do t++,n=n.Next;while(n!==e);return t},x.Clipper.prototype.BuildResult=function(e){x.Clear(e);for(var t=0,n=this.m_PolyOuts.length;t<n;t++){var i=this.m_PolyOuts[t];if(i.Pts!==null){var r=i.Pts.Prev,o=this.PointCount(r);if(!(o<2)){for(var s=new Array(o),l=0;l<o;l++)s[l]=r.Pt,r=r.Prev;e.push(s)}}}},x.Clipper.prototype.BuildResult2=function(e){e.Clear();for(var t=0,n=this.m_PolyOuts.length;t<n;t++){var i=this.m_PolyOuts[t],r=this.PointCount(i.Pts);if(!(i.IsOpen&&r<2||!i.IsOpen&&r<3)){this.FixHoleLinkage(i);var o=new x.PolyNode;e.m_AllPolys.push(o),i.PolyNode=o,o.m_polygon.length=r;for(var s=i.Pts.Prev,l=0;l<r;l++)o.m_polygon[l]=s.Pt,s=s.Prev}}for(var t=0,n=this.m_PolyOuts.length;t<n;t++){var i=this.m_PolyOuts[t];i.PolyNode!==null&&(i.IsOpen?(i.PolyNode.IsOpen=!0,e.AddChild(i.PolyNode)):i.FirstLeft!==null&&i.FirstLeft.PolyNode!==null?i.FirstLeft.PolyNode.AddChild(i.PolyNode):e.AddChild(i.PolyNode))}},x.Clipper.prototype.FixupOutPolyline=function(e){for(var t=e.Pts,n=t.Prev;t!==n;)if(t=t.Next,x.FPoint.op_Equality(t.Pt,t.Prev.Pt)){t===n&&(n=t.Prev);var i=t.Prev;i.Next=t.Next,t.Next.Prev=i,t=i}t===t.Prev&&(e.Pts=null)},x.Clipper.prototype.FixupOutPolygon=function(e){var t=null;e.BottomPt=null;for(var n=e.Pts,i=this.PreserveCollinear||this.StrictlySimple;;){if(n.Prev===n||n.Prev===n.Next){e.Pts=null;return}if(x.FPoint.op_Equality(n.Pt,n.Next.Pt)||x.FPoint.op_Equality(n.Pt,n.Prev.Pt)||x.ClipperBase.SlopesEqual4(n.Prev.Pt,n.Pt,n.Next.Pt)&&(!i||!this.Pt2IsBetweenPt1AndPt3(n.Prev.Pt,n.Pt,n.Next.Pt)))t=null,n.Prev.Next=n.Next,n.Next.Prev=n.Prev,n=n.Prev;else{if(n===t)break;t===null&&(t=n),n=n.Next}}e.Pts=n},x.Clipper.prototype.DupOutPt=function(e,t){var n=new x.OutPt;return n.Pt.X=e.Pt.X,n.Pt.Y=e.Pt.Y,x.use_xyz&&(n.Pt.Z=e.Pt.Z),n.Idx=e.Idx,t?(n.Next=e.Next,n.Prev=e,e.Next.Prev=n,e.Next=n):(n.Prev=e.Prev,n.Next=e,e.Prev.Next=n,e.Prev=n),n},x.Clipper.prototype.GetOverlap=function(e,t,n,i,r){return e<t?n<i?(r.Left=Math.max(e,n),r.Right=Math.min(t,i)):(r.Left=Math.max(e,i),r.Right=Math.min(t,n)):n<i?(r.Left=Math.max(t,n),r.Right=Math.min(e,i)):(r.Left=Math.max(t,i),r.Right=Math.min(e,n)),r.Left<r.Right},x.Clipper.prototype.JoinHorz=function(e,t,n,i,r,o){var s=e.Pt.X>t.Pt.X?x.Direction.dRightToLeft:x.Direction.dLeftToRight,l=n.Pt.X>i.Pt.X?x.Direction.dRightToLeft:x.Direction.dLeftToRight;if(s===l)return!1;if(s===x.Direction.dLeftToRight){for(;e.Next.Pt.X<=r.X&&e.Next.Pt.X>=e.Pt.X&&e.Next.Pt.Y===r.Y;)e=e.Next;o&&e.Pt.X!==r.X&&(e=e.Next),t=this.DupOutPt(e,!o),x.FPoint.op_Inequality(t.Pt,r)&&(e=t,e.Pt.X=r.X,e.Pt.Y=r.Y,x.use_xyz&&(e.Pt.Z=r.Z),t=this.DupOutPt(e,!o))}else{for(;e.Next.Pt.X>=r.X&&e.Next.Pt.X<=e.Pt.X&&e.Next.Pt.Y===r.Y;)e=e.Next;!o&&e.Pt.X!==r.X&&(e=e.Next),t=this.DupOutPt(e,o),x.FPoint.op_Inequality(t.Pt,r)&&(e=t,e.Pt.X=r.X,e.Pt.Y=r.Y,x.use_xyz&&(e.Pt.Z=r.Z),t=this.DupOutPt(e,o))}if(l===x.Direction.dLeftToRight){for(;n.Next.Pt.X<=r.X&&n.Next.Pt.X>=n.Pt.X&&n.Next.Pt.Y===r.Y;)n=n.Next;o&&n.Pt.X!==r.X&&(n=n.Next),i=this.DupOutPt(n,!o),x.FPoint.op_Inequality(i.Pt,r)&&(n=i,n.Pt.X=r.X,n.Pt.Y=r.Y,x.use_xyz&&(n.Pt.Z=r.Z),i=this.DupOutPt(n,!o))}else{for(;n.Next.Pt.X>=r.X&&n.Next.Pt.X<=n.Pt.X&&n.Next.Pt.Y===r.Y;)n=n.Next;!o&&n.Pt.X!==r.X&&(n=n.Next),i=this.DupOutPt(n,o),x.FPoint.op_Inequality(i.Pt,r)&&(n=i,n.Pt.X=r.X,n.Pt.Y=r.Y,x.use_xyz&&(n.Pt.Z=r.Z),i=this.DupOutPt(n,o))}return s===x.Direction.dLeftToRight===o?(e.Prev=n,n.Next=e,t.Next=i,i.Prev=t):(e.Next=n,n.Prev=e,t.Prev=i,i.Next=t),!0},x.Clipper.prototype.JoinPoints=function(e,t,n){var i=e.OutPt1,r=new x.OutPt,o=e.OutPt2,s=new x.OutPt,l=e.OutPt1.Pt.Y===e.OffPt.Y;if(l&&x.FPoint.op_Equality(e.OffPt,e.OutPt1.Pt)&&x.FPoint.op_Equality(e.OffPt,e.OutPt2.Pt)){if(t!==n)return!1;for(r=e.OutPt1.Next;r!==i&&x.FPoint.op_Equality(r.Pt,e.OffPt);)r=r.Next;var h=r.Pt.Y>e.OffPt.Y;for(s=e.OutPt2.Next;s!==o&&x.FPoint.op_Equality(s.Pt,e.OffPt);)s=s.Next;var c=s.Pt.Y>e.OffPt.Y;return h===c?!1:h?(r=this.DupOutPt(i,!1),s=this.DupOutPt(o,!0),i.Prev=o,o.Next=i,r.Next=s,s.Prev=r,e.OutPt1=i,e.OutPt2=r,!0):(r=this.DupOutPt(i,!0),s=this.DupOutPt(o,!1),i.Next=o,o.Prev=i,r.Prev=s,s.Next=r,e.OutPt1=i,e.OutPt2=r,!0)}else if(l){for(r=i;i.Prev.Pt.Y===i.Pt.Y&&i.Prev!==r&&i.Prev!==o;)i=i.Prev;for(;r.Next.Pt.Y===r.Pt.Y&&r.Next!==i&&r.Next!==o;)r=r.Next;if(r.Next===i||r.Next===o)return!1;for(s=o;o.Prev.Pt.Y===o.Pt.Y&&o.Prev!==s&&o.Prev!==r;)o=o.Prev;for(;s.Next.Pt.Y===s.Pt.Y&&s.Next!==o&&s.Next!==i;)s=s.Next;if(s.Next===o||s.Next===i)return!1;var d={Left:null,Right:null};if(!this.GetOverlap(i.Pt.X,r.Pt.X,o.Pt.X,s.Pt.X,d))return!1;var f=d.Left,m=d.Right,v=new x.FPoint0,C;return i.Pt.X>=f&&i.Pt.X<=m?(v.X=i.Pt.X,v.Y=i.Pt.Y,x.use_xyz&&(v.Z=i.Pt.Z),C=i.Pt.X>r.Pt.X):o.Pt.X>=f&&o.Pt.X<=m?(v.X=o.Pt.X,v.Y=o.Pt.Y,x.use_xyz&&(v.Z=o.Pt.Z),C=o.Pt.X>s.Pt.X):r.Pt.X>=f&&r.Pt.X<=m?(v.X=r.Pt.X,v.Y=r.Pt.Y,x.use_xyz&&(v.Z=r.Pt.Z),C=r.Pt.X>i.Pt.X):(v.X=s.Pt.X,v.Y=s.Pt.Y,x.use_xyz&&(v.Z=s.Pt.Z),C=s.Pt.X>o.Pt.X),e.OutPt1=i,e.OutPt2=o,this.JoinHorz(i,r,o,s,v,C)}else{for(r=i.Next;x.FPoint.op_Equality(r.Pt,i.Pt)&&r!==i;)r=r.Next;var O=r.Pt.Y>i.Pt.Y||!x.ClipperBase.SlopesEqual4(i.Pt,r.Pt,e.OffPt);if(O){for(r=i.Prev;x.FPoint.op_Equality(r.Pt,i.Pt)&&r!==i;)r=r.Prev;if(r.Pt.Y>i.Pt.Y||!x.ClipperBase.SlopesEqual4(i.Pt,r.Pt,e.OffPt))return!1}for(s=o.Next;x.FPoint.op_Equality(s.Pt,o.Pt)&&s!==o;)s=s.Next;var y=s.Pt.Y>o.Pt.Y||!x.ClipperBase.SlopesEqual4(o.Pt,s.Pt,e.OffPt);if(y){for(s=o.Prev;x.FPoint.op_Equality(s.Pt,o.Pt)&&s!==o;)s=s.Prev;if(s.Pt.Y>o.Pt.Y||!x.ClipperBase.SlopesEqual4(o.Pt,s.Pt,e.OffPt))return!1}return r===i||s===o||r===s||t===n&&O===y?!1:O?(r=this.DupOutPt(i,!1),s=this.DupOutPt(o,!0),i.Prev=o,o.Next=i,r.Next=s,s.Prev=r,e.OutPt1=i,e.OutPt2=r,!0):(r=this.DupOutPt(i,!0),s=this.DupOutPt(o,!1),i.Next=o,o.Prev=i,r.Prev=s,s.Next=r,e.OutPt1=i,e.OutPt2=r,!0)}},x.Clipper.GetBounds=function(e){for(var t=0,n=e.length;t<n&&e[t].length===0;)t++;if(t===n)return new x.FRect(0,0,0,0);var i=new x.FRect;for(i.left=e[t][0].X,i.right=i.left,i.top=e[t][0].Y,i.bottom=i.top;t<n;t++)for(var r=0,o=e[t].length;r<o;r++)e[t][r].X<i.left?i.left=e[t][r].X:e[t][r].X>i.right&&(i.right=e[t][r].X),e[t][r].Y<i.top?i.top=e[t][r].Y:e[t][r].Y>i.bottom&&(i.bottom=e[t][r].Y);return i},x.Clipper.prototype.GetBounds2=function(e){var t=e,n=new x.FRect;for(n.left=e.Pt.X,n.right=e.Pt.X,n.top=e.Pt.Y,n.bottom=e.Pt.Y,e=e.Next;e!==t;)e.Pt.X<n.left&&(n.left=e.Pt.X),e.Pt.X>n.right&&(n.right=e.Pt.X),e.Pt.Y<n.top&&(n.top=e.Pt.Y),e.Pt.Y>n.bottom&&(n.bottom=e.Pt.Y),e=e.Next;return n},x.Clipper.PointInPolygon=function(e,t){var n=0,i=t.length;if(i<3)return 0;for(var r=t[0],o=1;o<=i;++o){var s=o===i?t[0]:t[o];if(s.Y===e.Y&&(s.X===e.X||r.Y===e.Y&&s.X>e.X==r.X<e.X))return-1;if(r.Y<e.Y!=s.Y<e.Y){if(r.X>=e.X)if(s.X>e.X)n=1-n;else{var l=(r.X-e.X)*(s.Y-e.Y)-(s.X-e.X)*(r.Y-e.Y);if(l===0)return-1;l>0==s.Y>r.Y&&(n=1-n)}else if(s.X>e.X){var l=(r.X-e.X)*(s.Y-e.Y)-(s.X-e.X)*(r.Y-e.Y);if(l===0)return-1;l>0==s.Y>r.Y&&(n=1-n)}}r=s}return n},x.Clipper.prototype.PointInPolygon=function(e,t){var n=0,i=t,r=e.X,o=e.Y,s=t.Pt.X,l=t.Pt.Y;do{t=t.Next;var h=t.Pt.X,c=t.Pt.Y;if(c===o&&(h===r||l===o&&h>r==s<r))return-1;if(l<o!=c<o){if(s>=r)if(h>r)n=1-n;else{var d=(s-r)*(c-o)-(h-r)*(l-o);if(d===0)return-1;d>0==c>l&&(n=1-n)}else if(h>r){var d=(s-r)*(c-o)-(h-r)*(l-o);if(d===0)return-1;d>0==c>l&&(n=1-n)}}s=h,l=c}while(i!==t);return n},x.Clipper.prototype.Poly2ContainsPoly1=function(e,t){var n=e;do{var i=this.PointInPolygon(n.Pt,t);if(i>=0)return i>0;n=n.Next}while(n!==e);return!0},x.Clipper.prototype.FixupFirstLefts1=function(e,t){for(var n,i,r=0,o=this.m_PolyOuts.length;r<o;r++)n=this.m_PolyOuts[r],i=x.Clipper.ParseFirstLeft(n.FirstLeft),n.Pts!==null&&i===e&&this.Poly2ContainsPoly1(n.Pts,t.Pts)&&(n.FirstLeft=t)},x.Clipper.prototype.FixupFirstLefts2=function(e,t){for(var n=t.FirstLeft,i,r,o=0,s=this.m_PolyOuts.length;o<s;o++)i=this.m_PolyOuts[o],!(i.Pts===null||i===t||i===e)&&(r=x.Clipper.ParseFirstLeft(i.FirstLeft),!(r!==n&&r!==e&&r!==t)&&(this.Poly2ContainsPoly1(i.Pts,e.Pts)?i.FirstLeft=e:this.Poly2ContainsPoly1(i.Pts,t.Pts)?i.FirstLeft=t:(i.FirstLeft===e||i.FirstLeft===t)&&(i.FirstLeft=n)))},x.Clipper.prototype.FixupFirstLefts3=function(e,t){for(var n,i,r=0,o=this.m_PolyOuts.length;r<o;r++)n=this.m_PolyOuts[r],i=x.Clipper.ParseFirstLeft(n.FirstLeft),n.Pts!==null&&i===e&&(n.FirstLeft=t)},x.Clipper.ParseFirstLeft=function(e){for(;e!==null&&e.Pts===null;)e=e.FirstLeft;return e},x.Clipper.prototype.JoinCommonEdges=function(){for(var e=0,t=this.m_Joins.length;e<t;e++){var n=this.m_Joins[e],i=this.GetOutRec(n.OutPt1.Idx),r=this.GetOutRec(n.OutPt2.Idx);if(!(i.Pts===null||r.Pts===null)&&!(i.IsOpen||r.IsOpen)){var o;i===r?o=i:this.OutRec1RightOfOutRec2(i,r)?o=r:this.OutRec1RightOfOutRec2(r,i)?o=i:o=this.GetLowermostRec(i,r),this.JoinPoints(n,i,r)&&(i===r?(i.Pts=n.OutPt1,i.BottomPt=null,r=this.CreateOutRec(),r.Pts=n.OutPt2,this.UpdateOutPtIdxs(r),this.Poly2ContainsPoly1(r.Pts,i.Pts)?(r.IsHole=!i.IsHole,r.FirstLeft=i,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,i),(r.IsHole^this.ReverseSolution)==this.Area$1(r)>0&&this.ReversePolyPtLinks(r.Pts)):this.Poly2ContainsPoly1(i.Pts,r.Pts)?(r.IsHole=i.IsHole,i.IsHole=!r.IsHole,r.FirstLeft=i.FirstLeft,i.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,r),(i.IsHole^this.ReverseSolution)==this.Area$1(i)>0&&this.ReversePolyPtLinks(i.Pts)):(r.IsHole=i.IsHole,r.FirstLeft=i.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(i,r))):(r.Pts=null,r.BottomPt=null,r.Idx=i.Idx,i.IsHole=o.IsHole,o===r&&(i.FirstLeft=r.FirstLeft),r.FirstLeft=i,this.m_UsingPolyTree&&this.FixupFirstLefts3(r,i)))}}},x.Clipper.prototype.UpdateOutPtIdxs=function(e){var t=e.Pts;do t.Idx=e.Idx,t=t.Prev;while(t!==e.Pts)},x.Clipper.prototype.DoSimplePolygons=function(){for(var e=0;e<this.m_PolyOuts.length;){var t=this.m_PolyOuts[e++],n=t.Pts;if(!(n===null||t.IsOpen))do{for(var i=n.Next;i!==t.Pts;){if(x.FPoint.op_Equality(n.Pt,i.Pt)&&i.Next!==n&&i.Prev!==n){var r=n.Prev,o=i.Prev;n.Prev=o,o.Next=n,i.Prev=r,r.Next=i,t.Pts=n;var s=this.CreateOutRec();s.Pts=i,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,t.Pts)?(s.IsHole=!t.IsHole,s.FirstLeft=t,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,t)):this.Poly2ContainsPoly1(t.Pts,s.Pts)?(s.IsHole=t.IsHole,t.IsHole=!s.IsHole,s.FirstLeft=t.FirstLeft,t.FirstLeft=s,this.m_UsingPolyTree&&this.FixupFirstLefts2(t,s)):(s.IsHole=t.IsHole,s.FirstLeft=t.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(t,s)),i=n}i=i.Next}n=n.Next}while(n!==t.Pts)}},x.Clipper.Area=function(e){if(!Array.isArray(e))return 0;var t=e.length;if(t<3)return 0;for(var n=0,i=0,r=t-1;i<t;++i)n+=(e[r].X+e[i].X)*(e[r].Y-e[i].Y),r=i;return-n*.5},x.Clipper.prototype.Area=function(e){var t=e;if(e===null)return 0;var n=0;do n=n+(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next;while(e!==t);return n*.5},x.Clipper.prototype.Area$1=function(e){return this.Area(e.Pts)},x.Clipper.SimplifyPolygon=function(e,t){var n=new Array,i=new x.Clipper(0);return i.StrictlySimple=!0,i.AddPath(e,x.PolyType.ptSubject,!0),i.Execute(x.ClipType.ctUnion,n,t,t),n},x.Clipper.SimplifyPolygons=function(e,t){typeof t>"u"&&(t=x.PolyFillType.pftEvenOdd);var n=new Array,i=new x.Clipper(0);return i.StrictlySimple=!0,i.AddPaths(e,x.PolyType.ptSubject,!0),i.Execute(x.ClipType.ctUnion,n,t,t),n},x.Clipper.DistanceSqrd=function(e,t){var n=e.X-t.X,i=e.Y-t.Y;return n*n+i*i},x.Clipper.DistanceFromLineSqrd=function(e,t,n){var i=t.Y-n.Y,r=n.X-t.X,o=i*t.X+r*t.Y;return o=i*e.X+r*e.Y-o,o*o/(i*i+r*r)},x.Clipper.SlopesNearCollinear=function(e,t,n,i){return Math.abs(e.X-t.X)>Math.abs(e.Y-t.Y)?e.X>t.X==e.X<n.X?x.Clipper.DistanceFromLineSqrd(e,t,n)<i:t.X>e.X==t.X<n.X?x.Clipper.DistanceFromLineSqrd(t,e,n)<i:x.Clipper.DistanceFromLineSqrd(n,e,t)<i:e.Y>t.Y==e.Y<n.Y?x.Clipper.DistanceFromLineSqrd(e,t,n)<i:t.Y>e.Y==t.Y<n.Y?x.Clipper.DistanceFromLineSqrd(t,e,n)<i:x.Clipper.DistanceFromLineSqrd(n,e,t)<i},x.Clipper.PointsAreClose=function(e,t,n){var i=e.X-t.X,r=e.Y-t.Y;return i*i+r*r<=n},x.Clipper.ExcludeOp=function(e){var t=e.Prev;return t.Next=e.Next,e.Next.Prev=t,t.Idx=0,t},x.Clipper.CleanPolygon=function(e,t){typeof t>"u"&&(t=1.415);var n=e.length;if(n===0)return new Array;for(var i=new Array(n),r=0;r<n;++r)i[r]=new x.OutPt;for(var r=0;r<n;++r)i[r].Pt=e[r],i[r].Next=i[(r+1)%n],i[r].Next.Prev=i[r],i[r].Idx=0;for(var o=t*t,s=i[0];s.Idx===0&&s.Next!==s.Prev;)x.Clipper.PointsAreClose(s.Pt,s.Prev.Pt,o)?(s=x.Clipper.ExcludeOp(s),n--):x.Clipper.PointsAreClose(s.Prev.Pt,s.Next.Pt,o)?(x.Clipper.ExcludeOp(s.Next),s=x.Clipper.ExcludeOp(s),n-=2):x.Clipper.SlopesNearCollinear(s.Prev.Pt,s.Pt,s.Next.Pt,o)?(s=x.Clipper.ExcludeOp(s),n--):(s.Idx=1,s=s.Next);n<3&&(n=0);for(var l=new Array(n),r=0;r<n;++r)l[r]=new x.FPoint1(s.Pt),s=s.Next;return i=null,l},x.Clipper.CleanPolygons=function(e,t){for(var n=new Array(e.length),i=0,r=e.length;i<r;i++)n[i]=x.Clipper.CleanPolygon(e[i],t);return n},x.Clipper.Minkowski=function(e,t,n,i){var r=i?1:0,o=e.length,s=t.length,l=new Array;if(n)for(var h=0;h<s;h++){for(var c=new Array(o),d=0,f=e.length,m=e[d];d<f;d++,m=e[d])c[d]=new x.FPoint2(t[h].X+m.X,t[h].Y+m.Y);l.push(c)}else for(var h=0;h<s;h++){for(var c=new Array(o),d=0,f=e.length,m=e[d];d<f;d++,m=e[d])c[d]=new x.FPoint2(t[h].X-m.X,t[h].Y-m.Y);l.push(c)}for(var v=new Array,h=0;h<s-1+r;h++)for(var d=0;d<o;d++){var C=new Array;C.push(l[h%s][d%o]),C.push(l[(h+1)%s][d%o]),C.push(l[(h+1)%s][(d+1)%o]),C.push(l[h%s][(d+1)%o]),x.Clipper.Orientation(C)||C.reverse(),v.push(C)}return v},x.Clipper.MinkowskiSum=function(e,t,n){if(t[0]instanceof Array){for(var i=t,r=new x.Paths,o=new x.Clipper,s=0;s<i.length;++s){var l=x.Clipper.Minkowski(e,i[s],!0,n);if(o.AddPaths(l,x.PolyType.ptSubject,!0),n){var h=x.Clipper.TranslatePath(i[s],e[0]);o.AddPath(h,x.PolyType.ptClip,!0)}}return o.Execute(x.ClipType.ctUnion,r,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),r}else{var h=t,i=x.Clipper.Minkowski(e,h,!0,n),o=new x.Clipper;return o.AddPaths(i,x.PolyType.ptSubject,!0),o.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),i}},x.Clipper.TranslatePath=function(e,t){for(var n=new x.Path,i=0;i<e.length;i++)n.push(new x.FPoint2(e[i].X+t.X,e[i].Y+t.Y));return n},x.Clipper.MinkowskiDiff=function(e,t){var n=x.Clipper.Minkowski(e,t,!1,!0),i=new x.Clipper;return i.AddPaths(n,x.PolyType.ptSubject,!0),i.Execute(x.ClipType.ctUnion,n,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),n},x.Clipper.PolyTreeToPaths=function(e){var t=new Array;return x.Clipper.AddPolyNodeToPaths(e,x.Clipper.NodeType.ntAny,t),t},x.Clipper.AddPolyNodeToPaths=function(e,t,n){var i=!0;switch(t){case x.Clipper.NodeType.ntOpen:return;case x.Clipper.NodeType.ntClosed:i=!e.IsOpen;break}e.m_polygon.length>0&&i&&n.push(e.m_polygon);for(var r=0,o=e.Childs(),s=o.length,l=o[r];r<s;r++,l=o[r])x.Clipper.AddPolyNodeToPaths(l,t,n)},x.Clipper.OpenPathsFromPolyTree=function(e){for(var t=new x.Paths,n=0,i=e.ChildCount();n<i;n++)e.Childs()[n].IsOpen&&t.push(e.Childs()[n].m_polygon);return t},x.Clipper.ClosedPathsFromPolyTree=function(e){var t=new x.Paths;return x.Clipper.AddPolyNodeToPaths(e,x.Clipper.NodeType.ntClosed,t),t},Dd(x.Clipper,x.ClipperBase),x.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},x.ClipperOffset=function(e,t){typeof e>"u"&&(e=2),typeof t>"u"&&(t=x.ClipperOffset.def_arc_tolerance),this.m_destPolys=new x.Paths,this.m_srcPoly=new x.Path,this.m_destPoly=new x.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new x.FPoint0,this.m_polyNodes=new x.PolyNode,this.MiterLimit=e,this.ArcTolerance=t,this.m_lowest.X=-1},x.ClipperOffset.two_pi=6.28318530717959,x.ClipperOffset.def_arc_tolerance=.25,x.ClipperOffset.prototype.Clear=function(){x.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},x.ClipperOffset.prototype.AddPath=function(e,t,n){var i=e.length-1;if(!(i<0)){var r=new x.PolyNode;if(r.m_jointype=t,r.m_endtype=n,n===x.EndType.etClosedLine||n===x.EndType.etClosedPolygon)for(;i>0&&x.FPoint.op_Equality(e[0],e[i]);)i--;r.m_polygon.push(e[0]);for(var o=0,s=0,l=1;l<=i;l++)x.FPoint.op_Inequality(r.m_polygon[o],e[l])&&(o++,r.m_polygon.push(e[l]),(e[l].Y>r.m_polygon[s].Y||e[l].Y===r.m_polygon[s].Y&&e[l].X<r.m_polygon[s].X)&&(s=o));if(!(n===x.EndType.etClosedPolygon&&o<2)&&(this.m_polyNodes.AddChild(r),n===x.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new x.FPoint2(this.m_polyNodes.ChildCount()-1,s);else{var h=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(r.m_polygon[s].Y>h.Y||r.m_polygon[s].Y===h.Y&&r.m_polygon[s].X<h.X)&&(this.m_lowest=new x.FPoint2(this.m_polyNodes.ChildCount()-1,s))}}},x.ClipperOffset.prototype.AddPaths=function(e,t,n){for(var i=0,r=e.length;i<r;i++)this.AddPath(e[i],t,n)},x.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!x.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var e=0;e<this.m_polyNodes.ChildCount();e++){var t=this.m_polyNodes.Childs()[e];(t.m_endtype===x.EndType.etClosedPolygon||t.m_endtype===x.EndType.etClosedLine&&x.Clipper.Orientation(t.m_polygon))&&t.m_polygon.reverse()}else for(var e=0;e<this.m_polyNodes.ChildCount();e++){var t=this.m_polyNodes.Childs()[e];t.m_endtype===x.EndType.etClosedLine&&!x.Clipper.Orientation(t.m_polygon)&&t.m_polygon.reverse()}},x.ClipperOffset.GetUnitNormal=function(e,t){var n=t.X-e.X,i=t.Y-e.Y;if(n===0&&i===0)return new x.FPoint2(0,0);var r=1/Math.sqrt(n*n+i*i);return n*=r,i*=r,new x.FPoint2(i,-n)},x.ClipperOffset.prototype.DoOffset=function(e){if(this.m_destPolys=new Array,this.m_delta=e,x.ClipperBase.near_zero(e)){for(var t=0;t<this.m_polyNodes.ChildCount();t++){var n=this.m_polyNodes.Childs()[t];n.m_endtype===x.EndType.etClosedPolygon&&this.m_destPolys.push(n.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var i;this.ArcTolerance<=0?i=x.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(e)*x.ClipperOffset.def_arc_tolerance?i=Math.abs(e)*x.ClipperOffset.def_arc_tolerance:i=this.ArcTolerance;var r=3.14159265358979/Math.acos(1-i/Math.abs(e));this.m_sin=Math.sin(x.ClipperOffset.two_pi/r),this.m_cos=Math.cos(x.ClipperOffset.two_pi/r),this.m_StepsPerRad=r/x.ClipperOffset.two_pi,e<0&&(this.m_sin=-this.m_sin);for(var t=0;t<this.m_polyNodes.ChildCount();t++){var n=this.m_polyNodes.Childs()[t];this.m_srcPoly=n.m_polygon;var o=this.m_srcPoly.length;if(!(o===0||e<=0&&(o<3||n.m_endtype!==x.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,o===1){if(n.m_jointype===x.JoinType.jtRound)for(var s=1,l=0,h=1;h<=r;h++){this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[0].X+s*e,this.m_srcPoly[0].Y+l*e));var c=s;s=s*this.m_cos-this.m_sin*l,l=c*this.m_sin+l*this.m_cos}else for(var s=-1,l=-1,h=0;h<4;++h)this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[0].X+s*e,this.m_srcPoly[0].Y+l*e)),s<0?s=1:l<0?l=1:s=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var h=0;h<o-1;h++)this.m_normals.push(x.ClipperOffset.GetUnitNormal(this.m_srcPoly[h],this.m_srcPoly[h+1]));if(n.m_endtype===x.EndType.etClosedLine||n.m_endtype===x.EndType.etClosedPolygon?this.m_normals.push(x.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new x.FPoint1(this.m_normals[o-2])),n.m_endtype===x.EndType.etClosedPolygon){for(var d=o-1,h=0;h<o;h++)d=this.OffsetPoint(h,d,n.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(n.m_endtype===x.EndType.etClosedLine){for(var d=o-1,h=0;h<o;h++)d=this.OffsetPoint(h,d,n.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var f=this.m_normals[o-1],h=o-1;h>0;h--)this.m_normals[h]=new x.FPoint2(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);this.m_normals[0]=new x.FPoint2(-f.X,-f.Y),d=0;for(var h=o-1;h>=0;h--)d=this.OffsetPoint(h,d,n.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var d=0,h=1;h<o-1;++h)d=this.OffsetPoint(h,d,n.m_jointype);var m;if(n.m_endtype===x.EndType.etOpenButt){var h=o-1;m=new x.FPoint2(this.m_srcPoly[h].X+this.m_normals[h].X*e,this.m_srcPoly[h].Y+this.m_normals[h].Y*e),this.m_destPoly.push(m),m=new x.FPoint2(this.m_srcPoly[h].X-this.m_normals[h].X*e,this.m_srcPoly[h].Y-this.m_normals[h].Y*e),this.m_destPoly.push(m)}else{var h=o-1;d=o-2,this.m_sinA=0,this.m_normals[h]=new x.FPoint2(-this.m_normals[h].X,-this.m_normals[h].Y),n.m_endtype===x.EndType.etOpenSquare?this.DoSquare(h,d):this.DoRound(h,d)}for(var h=o-1;h>0;h--)this.m_normals[h]=new x.FPoint2(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);this.m_normals[0]=new x.FPoint2(-this.m_normals[1].X,-this.m_normals[1].Y),d=o-1;for(var h=d-1;h>0;--h)d=this.OffsetPoint(h,d,n.m_jointype);n.m_endtype===x.EndType.etOpenButt?(m=new x.FPoint2(this.m_srcPoly[0].X-this.m_normals[0].X*e,this.m_srcPoly[0].Y-this.m_normals[0].Y*e),this.m_destPoly.push(m),m=new x.FPoint2(this.m_srcPoly[0].X+this.m_normals[0].X*e,this.m_srcPoly[0].Y+this.m_normals[0].Y*e),this.m_destPoly.push(m)):(d=1,this.m_sinA=0,n.m_endtype===x.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},x.ClipperOffset.prototype.Execute=function(){var e=arguments,t=e[0]instanceof x.PolyTree;if(t){var n=e[0],i=e[1];n.Clear(),this.FixOrientations(),this.DoOffset(i);var r=new x.Clipper(0);if(r.AddPaths(this.m_destPolys,x.PolyType.ptSubject,!0),i>0)r.Execute(x.ClipType.ctUnion,n,x.PolyFillType.pftPositive,x.PolyFillType.pftPositive);else{var o=x.Clipper.GetBounds(this.m_destPolys),s=new x.Path;if(s.push(new x.FPoint2(o.left-10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.top-10)),s.push(new x.FPoint2(o.left-10,o.top-10)),r.AddPath(s,x.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(x.ClipType.ctUnion,n,x.PolyFillType.pftNegative,x.PolyFillType.pftNegative),n.ChildCount()===1&&n.Childs()[0].ChildCount()>0){var l=n.Childs()[0];n.Childs()[0]=l.Childs()[0],n.Childs()[0].m_Parent=n;for(var h=1;h<l.ChildCount();h++)n.AddChild(l.Childs()[h])}else n.Clear()}}else{var n=e[0],i=e[1];x.Clear(n),this.FixOrientations(),this.DoOffset(i);var r=new x.Clipper(0);if(r.AddPaths(this.m_destPolys,x.PolyType.ptSubject,!0),i>0)r.Execute(x.ClipType.ctUnion,n,x.PolyFillType.pftPositive,x.PolyFillType.pftPositive);else{var o=x.Clipper.GetBounds(this.m_destPolys),s=new x.Path;s.push(new x.FPoint2(o.left-10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.top-10)),s.push(new x.FPoint2(o.left-10,o.top-10)),r.AddPath(s,x.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(x.ClipType.ctUnion,n,x.PolyFillType.pftNegative,x.PolyFillType.pftNegative),n.length>0&&n.splice(0,1)}}},x.ClipperOffset.prototype.OffsetPoint=function(e,t,n){if(this.m_sinA=this.m_normals[t].X*this.m_normals[e].Y-this.m_normals[e].X*this.m_normals[t].Y,this.m_sinA===0)return t;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_normals[t].X*this.m_delta,this.m_srcPoly[e].Y+this.m_normals[t].Y*this.m_delta)),this.m_destPoly.push(new x.FPoint1(this.m_srcPoly[e])),this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta,this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta));else switch(n){case x.JoinType.jtMiter:{var i=1+(this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y);i>=this.m_miterLim?this.DoMiter(e,t,i):this.DoSquare(e,t);break}case x.JoinType.jtSquare:this.DoSquare(e,t);break;case x.JoinType.jtRound:this.DoRound(e,t);break}return t=e,t},x.ClipperOffset.prototype.DoSquare=function(e,t){var n=Math.tan(Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y)/4);this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[t].X-this.m_normals[t].Y*n),this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[t].Y+this.m_normals[t].X*n))),this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[e].X+this.m_normals[e].Y*n),this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[e].Y-this.m_normals[e].X*n)))},x.ClipperOffset.prototype.DoMiter=function(e,t,n){var i=this.m_delta/n;this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+(this.m_normals[t].X+this.m_normals[e].X)*i,this.m_srcPoly[e].Y+(this.m_normals[t].Y+this.m_normals[e].Y)*i))},x.ClipperOffset.prototype.DoRound=function(e,t){for(var n=Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y),i=Math.max(Math.round(this.m_StepsPerRad*Math.abs(n)),1),r=this.m_normals[t].X,o=this.m_normals[t].Y,s,l=0;l<i;++l)this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+r*this.m_delta,this.m_srcPoly[e].Y+o*this.m_delta)),s=r,r=r*this.m_cos-this.m_sin*o,o=s*this.m_sin+o*this.m_cos;this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta,this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta))},x.Error=function(e){try{throw new Error(e)}catch(t){alert(t.message)}},x.JS={},x.JS.AreaOfPolygon=function(e){return x.Clipper.Area(e)},x.JS.AreaOfPolygons=function(e){for(var t=0,n=0;n<e.length;n++)t+=x.Clipper.Area(e[n]);return t},x.JS.BoundsOfPath=function(e){return x.JS.BoundsOfPaths([e])},x.JS.BoundsOfPaths=function(e){var t=x.Clipper.GetBounds(e);return t},x.JS.Clean=function(i,t){if(!(i instanceof Array))return[];var n=i[0]instanceof Array,i=x.JS.Clone(i);if(typeof t!="number"||t===null)return x.Error("Delta is not a number in Clean()."),i;if(i.length===0||i.length===1&&i[0].length===0||t<0)return i;n||(i=[i]);for(var r=i.length,o,s,l,h,c,d,f,m=[],v=0;v<r;v++)if(s=i[v],o=s.length,o!==0){if(o<3){l=s,m.push(l);continue}for(l=s,h=t*t,c=s[0],d=1,f=1;f<o;f++)(s[f].X-c.X)*(s[f].X-c.X)+(s[f].Y-c.Y)*(s[f].Y-c.Y)<=h||(l[d]=s[f],c=s[f],d++);c=s[d-1],(s[0].X-c.X)*(s[0].X-c.X)+(s[0].Y-c.Y)*(s[0].Y-c.Y)<=h&&d--,d<o&&l.splice(d,o-d),l.length&&m.push(l)}return!n&&m.length?m=m[0]:!n&&m.length===0?m=[]:n&&m.length===0&&(m=[[]]),m},x.JS.Clone=function(e){if(!(e instanceof Array))return[];if(e.length===0)return[];if(e.length===1&&e[0].length===0)return[[]];var t=e[0]instanceof Array;t||(e=[e]);var n=e.length,i,r,o,s,l=new Array(n);for(r=0;r<n;r++){for(i=e[r].length,s=new Array(i),o=0;o<i;o++)s[o]={X:e[r][o].X,Y:e[r][o].Y};l[r]=s}return t||(l=l[0]),l},x.JS.Lighten=function(e,t){if(!(e instanceof Array))return[];if(typeof t!="number"||t===null)return x.Error("Tolerance is not a number in Lighten()."),x.JS.Clone(e);if(e.length===0||e.length===1&&e[0].length===0||t<0)return x.JS.Clone(e);var n=e[0]instanceof Array;n||(e=[e]);var i,r,o,s,l,h,c,d,f,m,v,C,O,y,P,w,D,A=e.length,_=t*t,I=[];for(i=0;i<A;i++)if(o=e[i],h=o.length,h!==0){for(s=0;s<1e6;s++){for(l=[],h=o.length,o[h-1].X!==o[0].X||o[h-1].Y!==o[0].Y?(C=1,o.push({X:o[0].X,Y:o[0].Y}),h=o.length):C=0,v=[],r=0;r<h-2;r++)c=o[r],f=o[r+1],d=o[r+2],w=c.X,D=c.Y,O=d.X-w,y=d.Y-D,(O!==0||y!==0)&&(P=((f.X-w)*O+(f.Y-D)*y)/(O*O+y*y),P>1?(w=d.X,D=d.Y):P>0&&(w+=O*P,D+=y*P)),O=f.X-w,y=f.Y-D,m=O*O+y*y,m<=_&&(v[r+1]=1,r++);for(l.push({X:o[0].X,Y:o[0].Y}),r=1;r<h-1;r++)v[r]||l.push({X:o[r].X,Y:o[r].Y});if(l.push({X:o[h-1].X,Y:o[h-1].Y}),C&&o.pop(),v.length)o=l;else break}h=l.length,l[h-1].X===l[0].X&&l[h-1].Y===l[0].Y&&l.pop(),l.length>2&&I.push(l)}return n||(I=I[0]),typeof I>"u"&&(I=[]),I},x.JS.PerimeterOfPath=function(e,t){if(typeof e>"u")return 0;var n=Math.sqrt,i=0,r,o,s=0,l=0,h=0,c=0,d=e.length;if(d<2)return 0;for(t&&(e[d]=e[0],d++);--d;)r=e[d],s=r.X,l=r.Y,o=e[d-1],h=o.X,c=o.Y,i+=n((s-h)*(s-h)+(l-c)*(l-c));return t&&e.pop(),i},x.JS.PerimeterOfPaths=function(e,t){for(var n=0,i=0;i<e.length;i++)n+=x.JS.PerimeterOfPath(e[i],t);return n},x.ExPolygons=function(){return[]},x.ExPolygon=function(){this.outer=null,this.holes=null},x.JS.AddOuterPolyNodeToExPolygons=function(e,t){var n=new x.ExPolygon;n.outer=e.Contour();var i=e.Childs(),r=i.length;n.holes=new Array(r);var o,s,l,h,c,d;for(l=0;l<r;l++)for(o=i[l],n.holes[l]=o.Contour(),h=0,c=o.Childs(),d=c.length;h<d;h++)s=c[h],x.JS.AddOuterPolyNodeToExPolygons(s,t);t.push(n)},x.JS.ExPolygonsToPaths=function(e){var t,n,i,r,o=new x.Paths;for(t=0,i=e.length;t<i;t++)for(o.push(e[t].outer),n=0,r=e[t].holes.length;n<r;n++)o.push(e[t].holes[n]);return o},x.JS.PolyTreeToExPolygons=function(e){var t=new x.ExPolygons,n,i,r,o;for(i=0,r=e.Childs(),o=r.length;i<o;i++)n=r[i],x.JS.AddOuterPolyNodeToExPolygons(n,t);return t};const tv=(e,t)=>1e-8>Math.abs(e.x-t.x)+Math.abs(e.y-t.y),ev=e=>{if(e.length===0)return!0;const t=e[0][0],n=e.at(-1).at(-1);return tv(t,n)};function Ms(e,t,n={}){const i={openSquare:0,openRound:1,openButt:2,closedLine:3,closedPolygon:4},r={square:0,round:1,miter:2};let o=n.endType;o in i||(o="closedPolygon");let s=n.joinType;s in r||(s="round");const l=n.miterLimit||2,h=n.arcTolerance||.1,c=i[o],d=r[s],f=P=>P.map(({x:w,y:D})=>({X:w,Y:D})),m=P=>P.map(({X:w,Y:D})=>({x:w,y:D}));ev(e);const v=e.map(f),C=new x.ClipperOffset(l,h);C.AddPaths(v,d,c);const O=new x.Paths;C.Execute(O,t);const y=O.map(m);for(;e.length>y.length;)e.pop();return y.forEach((P,w)=>{e[w]=P,e[w].push({x:P[0].x,y:P[0].y})}),e}const nv="modulepreload",iv=function(e){return"/"+e},Ad={},rv=function(e,t,n){return!t||t.length===0?e():Promise.all(t.map(i=>{if(i=iv(i),i in Ad)return;Ad[i]=!0;const r=i.endsWith(".css"),o=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":nv,r||(s.as="script",s.crossOrigin=""),s.href=i,document.head.appendChild(s),r)return new Promise((l,h)=>{s.addEventListener("load",l),s.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};let pr,Za;(()=>{const e=new Map;pr={register(l,h,c){e.set(l,{d:h,f:c,exp:{}})}};async function t(l,h){let c=l.replace(/\.\w+$/i,"");if(c.includes("./")){const[d,...f]=c.split("/").reverse(),[,...m]=h.split("/").reverse(),v=[d];let C=0,O;for(;O=f.shift();)if(O==="..")C++;else{if(O===".")break;v.push(O)}C<m.length&&v.push(...m.slice(C)),c=v.reverse().join("/")}return e.has(c)?o(c):rv(()=>hC(()=>import(l),[]),[])}function n(l,h){return{id:l,import:c=>t(c,l),meta:{url:l,main:h}}}function i(l){return(h,c)=>{c=typeof h=="string"?{[h]:c}:h;for(const[d,f]of Object.entries(c))Object.defineProperty(l,d,{value:f,writable:!0,enumerable:!0})}}function r(l){for(const[h,c]of e.entries()){const{f:d,exp:f}=c,{execute:m,setters:v}=d(i(f),n(h,h===l));delete c.f,c.e=m,c.s=v}}async function o(l){if(!e.has(l))return;const h=e.get(l);if(h.s){const{d:c,e:d,s:f}=h;delete h.s,delete h.e;for(let v=0;v<f.length;v++)f[v](await o(c[v]));const m=d();m&&await m}return h.exp}function s(l){if(!e.has(l))return;const h=e.get(l);if(h.s){const{d:c,e:d,s:f}=h;delete h.s,delete h.e;for(let m=0;m<f.length;m++)f[m](s(c[m]));d()}return h.exp}Za=l=>(pr=Za=void 0,r(l),s(l))})(),pr.register("-/clipper-lib@v6.4.2-JisZmmhC7gDAFmHQLYDu/dist=es2020/clipper-lib",[],function(e,t){var n;t&&t.id;function i(o,s,l){return l={path:s,exports:{},require:function(h,c){return r(h,c==null?l.path:c)}},o(l,l.exports),l.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}return{setters:[],execute:function(){n=i(function(o){(function(){var s={};s.version="6.4.2.2",s.use_lines=!0,s.use_xyz=!1;var l=!1;o.exports?(o.exports=s,l=!0):typeof document<"u"?window.ClipperLib=s:self.ClipperLib=s;var h;if(l){var c="chrome";h="Netscape"}else{var c=navigator.userAgent.toString().toLowerCase();h=navigator.appName}var d={};c.indexOf("chrome")!=-1&&c.indexOf("chromium")==-1?d.chrome=1:d.chrome=0,c.indexOf("chromium")!=-1?d.chromium=1:d.chromium=0,c.indexOf("safari")!=-1&&c.indexOf("chrome")==-1&&c.indexOf("chromium")==-1?d.safari=1:d.safari=0,c.indexOf("firefox")!=-1?d.firefox=1:d.firefox=0,c.indexOf("firefox/17")!=-1?d.firefox17=1:d.firefox17=0,c.indexOf("firefox/15")!=-1?d.firefox15=1:d.firefox15=0,c.indexOf("firefox/3")!=-1?d.firefox3=1:d.firefox3=0,c.indexOf("opera")!=-1?d.opera=1:d.opera=0,c.indexOf("msie 10")!=-1?d.msie10=1:d.msie10=0,c.indexOf("msie 9")!=-1?d.msie9=1:d.msie9=0,c.indexOf("msie 8")!=-1?d.msie8=1:d.msie8=0,c.indexOf("msie 7")!=-1?d.msie7=1:d.msie7=0,c.indexOf("msie ")!=-1?d.msie=1:d.msie=0,s.biginteger_used=null;var f;function m(a,u,p){s.biginteger_used=1,a!=null&&(typeof a=="number"&&typeof u>"u"?this.fromInt(a):typeof a=="number"?this.fromNumber(a,u,p):u==null&&typeof a!="string"?this.fromString(a,256):this.fromString(a,u))}function v(){return new m(null,void 0,void 0)}function C(a,u,p,g,S,b){for(;--b>=0;){var E=u*this[a++]+p[g]+S;S=Math.floor(E/67108864),p[g++]=E&67108863}return S}function O(a,u,p,g,S,b){for(var E=u&32767,T=u>>15;--b>=0;){var k=this[a]&32767,Q=this[a++]>>15,W=T*k+Q*E;k=E*k+((W&32767)<<15)+p[g]+(S&1073741823),S=(k>>>30)+(W>>>15)+T*Q+(S>>>30),p[g++]=k&1073741823}return S}function y(a,u,p,g,S,b){for(var E=u&16383,T=u>>14;--b>=0;){var k=this[a]&16383,Q=this[a++]>>14,W=T*k+Q*E;k=E*k+((W&16383)<<14)+p[g]+S,S=(k>>28)+(W>>14)+T*Q,p[g++]=k&268435455}return S}h=="Microsoft Internet Explorer"?(m.prototype.am=O,f=30):h!="Netscape"?(m.prototype.am=C,f=26):(m.prototype.am=y,f=28),m.prototype.DB=f,m.prototype.DM=(1<<f)-1,m.prototype.DV=1<<f;var P=52;m.prototype.FV=Math.pow(2,P),m.prototype.F1=P-f,m.prototype.F2=2*f-P;var w="0123456789abcdefghijklmnopqrstuvwxyz",D=new Array,A,_;for(A="0".charCodeAt(0),_=0;_<=9;++_)D[A++]=_;for(A="a".charCodeAt(0),_=10;_<36;++_)D[A++]=_;for(A="A".charCodeAt(0),_=10;_<36;++_)D[A++]=_;function I(a){return w.charAt(a)}function F(a,u){var p=D[a.charCodeAt(u)];return p==null?-1:p}function q(a){for(var u=this.t-1;u>=0;--u)a[u]=this[u];a.t=this.t,a.s=this.s}function j(a){this.t=1,this.s=a<0?-1:0,a>0?this[0]=a:a<-1?this[0]=a+this.DV:this.t=0}function z(a){var u=v();return u.fromInt(a),u}function B(a,u){var p;if(u==16)p=4;else if(u==8)p=3;else if(u==256)p=8;else if(u==2)p=1;else if(u==32)p=5;else if(u==4)p=2;else{this.fromRadix(a,u);return}this.t=0,this.s=0;for(var g=a.length,S=!1,b=0;--g>=0;){var E=p==8?a[g]&255:F(a,g);if(E<0){a.charAt(g)=="-"&&(S=!0);continue}S=!1,b==0?this[this.t++]=E:b+p>this.DB?(this[this.t-1]|=(E&(1<<this.DB-b)-1)<<b,this[this.t++]=E>>this.DB-b):this[this.t-1]|=E<<b,b+=p,b>=this.DB&&(b-=this.DB)}p==8&&(a[0]&128)!=0&&(this.s=-1,b>0&&(this[this.t-1]|=(1<<this.DB-b)-1<<b)),this.clamp(),S&&m.ZERO.subTo(this,this)}function L(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t}function M(a){if(this.s<0)return"-"+this.negate().toString(a);var u;if(a==16)u=4;else if(a==8)u=3;else if(a==2)u=1;else if(a==32)u=5;else if(a==4)u=2;else return this.toRadix(a);var p=(1<<u)-1,g,S=!1,b="",E=this.t,T=this.DB-E*this.DB%u;if(E-- >0)for(T<this.DB&&(g=this[E]>>T)>0&&(S=!0,b=I(g));E>=0;)T<u?(g=(this[E]&(1<<T)-1)<<u-T,g|=this[--E]>>(T+=this.DB-u)):(g=this[E]>>(T-=u)&p,T<=0&&(T+=this.DB,--E)),g>0&&(S=!0),S&&(b+=I(g));return S?b:"0"}function U(){var a=v();return m.ZERO.subTo(this,a),a}function K(){return this.s<0?this.negate():this}function st(a){var u=this.s-a.s;if(u!=0)return u;var p=this.t;if(u=p-a.t,u!=0)return this.s<0?-u:u;for(;--p>=0;)if((u=this[p]-a[p])!=0)return u;return 0}function lt(a){var u=1,p;return(p=a>>>16)!=0&&(a=p,u+=16),(p=a>>8)!=0&&(a=p,u+=8),(p=a>>4)!=0&&(a=p,u+=4),(p=a>>2)!=0&&(a=p,u+=2),(p=a>>1)!=0&&(a=p,u+=1),u}function pt(){return this.t<=0?0:this.DB*(this.t-1)+lt(this[this.t-1]^this.s&this.DM)}function mt(a,u){var p;for(p=this.t-1;p>=0;--p)u[p+a]=this[p];for(p=a-1;p>=0;--p)u[p]=0;u.t=this.t+a,u.s=this.s}function dt(a,u){for(var p=a;p<this.t;++p)u[p-a]=this[p];u.t=Math.max(this.t-a,0),u.s=this.s}function bt(a,u){var p=a%this.DB,g=this.DB-p,S=(1<<g)-1,b=Math.floor(a/this.DB),E=this.s<<p&this.DM,T;for(T=this.t-1;T>=0;--T)u[T+b+1]=this[T]>>g|E,E=(this[T]&S)<<p;for(T=b-1;T>=0;--T)u[T]=0;u[b]=E,u.t=this.t+b+1,u.s=this.s,u.clamp()}function wt(a,u){u.s=this.s;var p=Math.floor(a/this.DB);if(p>=this.t){u.t=0;return}var g=a%this.DB,S=this.DB-g,b=(1<<g)-1;u[0]=this[p]>>g;for(var E=p+1;E<this.t;++E)u[E-p-1]|=(this[E]&b)<<S,u[E-p]=this[E]>>g;g>0&&(u[this.t-p-1]|=(this.s&b)<<S),u.t=this.t-p,u.clamp()}function Tt(a,u){for(var p=0,g=0,S=Math.min(a.t,this.t);p<S;)g+=this[p]-a[p],u[p++]=g&this.DM,g>>=this.DB;if(a.t<this.t){for(g-=a.s;p<this.t;)g+=this[p],u[p++]=g&this.DM,g>>=this.DB;g+=this.s}else{for(g+=this.s;p<a.t;)g-=a[p],u[p++]=g&this.DM,g>>=this.DB;g-=a.s}u.s=g<0?-1:0,g<-1?u[p++]=this.DV+g:g>0&&(u[p++]=g),u.t=p,u.clamp()}function ie(a,u){var p=this.abs(),g=a.abs(),S=p.t;for(u.t=S+g.t;--S>=0;)u[S]=0;for(S=0;S<g.t;++S)u[S+p.t]=p.am(0,g[S],u,S,0,p.t);u.s=0,u.clamp(),this.s!=a.s&&m.ZERO.subTo(u,u)}function jt(a){for(var u=this.abs(),p=a.t=2*u.t;--p>=0;)a[p]=0;for(p=0;p<u.t-1;++p){var g=u.am(p,u[p],a,2*p,0,1);(a[p+u.t]+=u.am(p+1,2*u[p],a,2*p+1,g,u.t-p-1))>=u.DV&&(a[p+u.t]-=u.DV,a[p+u.t+1]=1)}a.t>0&&(a[a.t-1]+=u.am(p,u[p],a,2*p,0,1)),a.s=0,a.clamp()}function Oe(a,u,p){var g=a.abs();if(!(g.t<=0)){var S=this.abs();if(S.t<g.t){u!=null&&u.fromInt(0),p!=null&&this.copyTo(p);return}p==null&&(p=v());var b=v(),E=this.s,T=a.s,k=this.DB-lt(g[g.t-1]);k>0?(g.lShiftTo(k,b),S.lShiftTo(k,p)):(g.copyTo(b),S.copyTo(p));var Q=b.t,W=b[Q-1];if(W!=0){var R=W*(1<<this.F1)+(Q>1?b[Q-2]>>this.F2:0),V=this.FV/R,nt=(1<<this.F1)/R,at=1<<this.F2,ht=p.t,xt=ht-Q,ge=u==null?v():u;for(b.dlShiftTo(xt,ge),p.compareTo(ge)>=0&&(p[p.t++]=1,p.subTo(ge,p)),m.ONE.dlShiftTo(Q,ge),ge.subTo(b,b);b.t<Q;)b[b.t++]=0;for(;--xt>=0;){var nn=p[--ht]==W?this.DM:Math.floor(p[ht]*V+(p[ht-1]+at)*nt);if((p[ht]+=b.am(0,nn,p,xt,0,Q))<nn)for(b.dlShiftTo(xt,ge),p.subTo(ge,p);p[ht]<--nn;)p.subTo(ge,p)}u!=null&&(p.drShiftTo(Q,u),E!=T&&m.ZERO.subTo(u,u)),p.t=Q,p.clamp(),k>0&&p.rShiftTo(k,p),E<0&&m.ZERO.subTo(p,p)}}}function _e(a){var u=v();return this.abs().divRemTo(a,null,u),this.s<0&&u.compareTo(m.ZERO)>0&&a.subTo(u,u),u}function Ht(a){this.m=a}function Zt(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a}function Ie(a){return a}function Jt(a){a.divRemTo(this.m,null,a)}function Qe(a,u,p){a.multiplyTo(u,p),this.reduce(p)}function we(a,u){a.squareTo(u),this.reduce(u)}Ht.prototype.convert=Zt,Ht.prototype.revert=Ie,Ht.prototype.reduce=Jt,Ht.prototype.mulTo=Qe,Ht.prototype.sqrTo=we;function tn(){if(this.t<1)return 0;var a=this[0];if((a&1)==0)return 0;var u=a&3;return u=u*(2-(a&15)*u)&15,u=u*(2-(a&255)*u)&255,u=u*(2-((a&65535)*u&65535))&65535,u=u*(2-a*u%this.DV)%this.DV,u>0?this.DV-u:-u}function It(a){this.m=a,this.mp=a.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function le(a){var u=v();return a.abs().dlShiftTo(this.m.t,u),u.divRemTo(this.m,null,u),a.s<0&&u.compareTo(m.ZERO)>0&&this.m.subTo(u,u),u}function Le(a){var u=v();return a.copyTo(u),this.reduce(u),u}function en(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var u=0;u<this.m.t;++u){var p=a[u]&32767,g=p*this.mpl+((p*this.mph+(a[u]>>15)*this.mpl&this.um)<<15)&a.DM;for(p=u+this.m.t,a[p]+=this.m.am(0,g,a,u,0,this.m.t);a[p]>=a.DV;)a[p]-=a.DV,a[++p]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)}function mr(a,u){a.squareTo(u),this.reduce(u)}function qn(a,u,p){a.multiplyTo(u,p),this.reduce(p)}It.prototype.convert=le,It.prototype.revert=Le,It.prototype.reduce=en,It.prototype.mulTo=qn,It.prototype.sqrTo=mr;function Or(){return(this.t>0?this[0]&1:this.s)==0}function rl(a,u){if(a>4294967295||a<1)return m.ONE;var p=v(),g=v(),S=u.convert(this),b=lt(a)-1;for(S.copyTo(p);--b>=0;)if(u.sqrTo(p,g),(a&1<<b)>0)u.mulTo(g,S,p);else{var E=p;p=g,g=E}return u.revert(p)}function sl(a,u){var p;return a<256||u.isEven()?p=new Ht(u):p=new It(u),this.exp(a,p)}m.prototype.copyTo=q,m.prototype.fromInt=j,m.prototype.fromString=B,m.prototype.clamp=L,m.prototype.dlShiftTo=mt,m.prototype.drShiftTo=dt,m.prototype.lShiftTo=bt,m.prototype.rShiftTo=wt,m.prototype.subTo=Tt,m.prototype.multiplyTo=ie,m.prototype.squareTo=jt,m.prototype.divRemTo=Oe,m.prototype.invDigit=tn,m.prototype.isEven=Or,m.prototype.exp=rl,m.prototype.toString=M,m.prototype.negate=U,m.prototype.abs=K,m.prototype.compareTo=st,m.prototype.bitLength=pt,m.prototype.mod=_e,m.prototype.modPowInt=sl,m.ZERO=z(0),m.ONE=z(1);function ol(){var a=v();return this.copyTo(a),a}function al(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function ll(){return this.t==0?this.s:this[0]<<24>>24}function hl(){return this.t==0?this.s:this[0]<<16>>16}function ul(a){return Math.floor(Math.LN2*this.DB/Math.log(a))}function cl(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function pl(a){if(a==null&&(a=10),this.signum()==0||a<2||a>36)return"0";var u=this.chunkSize(a),p=Math.pow(a,u),g=z(p),S=v(),b=v(),E="";for(this.divRemTo(g,S,b);S.signum()>0;)E=(p+b.intValue()).toString(a).substr(1)+E,S.divRemTo(g,S,b);return b.intValue().toString(a)+E}function dl(a,u){this.fromInt(0),u==null&&(u=10);for(var p=this.chunkSize(u),g=Math.pow(u,p),S=!1,b=0,E=0,T=0;T<a.length;++T){var k=F(a,T);if(k<0){a.charAt(T)=="-"&&this.signum()==0&&(S=!0);continue}E=u*E+k,++b>=p&&(this.dMultiply(g),this.dAddOffset(E,0),b=0,E=0)}b>0&&(this.dMultiply(Math.pow(u,b)),this.dAddOffset(E,0)),S&&m.ZERO.subTo(this,this)}function fl(a,u,p){if(typeof u=="number")if(a<2)this.fromInt(1);else for(this.fromNumber(a,p),this.testBit(a-1)||this.bitwiseTo(m.ONE.shiftLeft(a-1),gr,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(u);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(m.ONE.shiftLeft(a-1),this);else{var g=new Array,S=a&7;g.length=(a>>3)+1,u.nextBytes(g),S>0?g[0]&=(1<<S)-1:g[0]=0,this.fromString(g,256)}}function ml(){var a=this.t,u=new Array;u[0]=this.s;var p=this.DB-a*this.DB%8,g,S=0;if(a-- >0)for(p<this.DB&&(g=this[a]>>p)!=(this.s&this.DM)>>p&&(u[S++]=g|this.s<<this.DB-p);a>=0;)p<8?(g=(this[a]&(1<<p)-1)<<8-p,g|=this[--a]>>(p+=this.DB-8)):(g=this[a]>>(p-=8)&255,p<=0&&(p+=this.DB,--a)),(g&128)!=0&&(g|=-256),S==0&&(this.s&128)!=(g&128)&&++S,(S>0||g!=this.s)&&(u[S++]=g);return u}function Ol(a){return this.compareTo(a)==0}function gl(a){return this.compareTo(a)<0?this:a}function yl(a){return this.compareTo(a)>0?this:a}function xl(a,u,p){var g,S,b=Math.min(a.t,this.t);for(g=0;g<b;++g)p[g]=u(this[g],a[g]);if(a.t<this.t){for(S=a.s&this.DM,g=b;g<this.t;++g)p[g]=u(this[g],S);p.t=this.t}else{for(S=this.s&this.DM,g=b;g<a.t;++g)p[g]=u(S,a[g]);p.t=a.t}p.s=u(this.s,a.s),p.clamp()}function vl(a,u){return a&u}function Pl(a){var u=v();return this.bitwiseTo(a,vl,u),u}function gr(a,u){return a|u}function Sl(a){var u=v();return this.bitwiseTo(a,gr,u),u}function X(a,u){return a^u}function $(a){var u=v();return this.bitwiseTo(a,X,u),u}function Z(a,u){return a&~u}function rt(a){var u=v();return this.bitwiseTo(a,Z,u),u}function he(){for(var a=v(),u=0;u<this.t;++u)a[u]=this.DM&~this[u];return a.t=this.t,a.s=~this.s,a}function yr(a){var u=v();return a<0?this.rShiftTo(-a,u):this.lShiftTo(a,u),u}function Cl(a){var u=v();return a<0?this.lShiftTo(-a,u):this.rShiftTo(a,u),u}function xS(a){if(a==0)return-1;var u=0;return(a&65535)==0&&(a>>=16,u+=16),(a&255)==0&&(a>>=8,u+=8),(a&15)==0&&(a>>=4,u+=4),(a&3)==0&&(a>>=2,u+=2),(a&1)==0&&++u,u}function vS(){for(var a=0;a<this.t;++a)if(this[a]!=0)return a*this.DB+xS(this[a]);return this.s<0?this.t*this.DB:-1}function PS(a){for(var u=0;a!=0;)a&=a-1,++u;return u}function SS(){for(var a=0,u=this.s&this.DM,p=0;p<this.t;++p)a+=PS(this[p]^u);return a}function CS(a){var u=Math.floor(a/this.DB);return u>=this.t?this.s!=0:(this[u]&1<<a%this.DB)!=0}function wS(a,u){var p=m.ONE.shiftLeft(a);return this.bitwiseTo(p,u,p),p}function bS(a){return this.changeBit(a,gr)}function ES(a){return this.changeBit(a,Z)}function DS(a){return this.changeBit(a,X)}function AS(a,u){for(var p=0,g=0,S=Math.min(a.t,this.t);p<S;)g+=this[p]+a[p],u[p++]=g&this.DM,g>>=this.DB;if(a.t<this.t){for(g+=a.s;p<this.t;)g+=this[p],u[p++]=g&this.DM,g>>=this.DB;g+=this.s}else{for(g+=this.s;p<a.t;)g+=a[p],u[p++]=g&this.DM,g>>=this.DB;g+=a.s}u.s=g<0?-1:0,g>0?u[p++]=g:g<-1&&(u[p++]=this.DV+g),u.t=p,u.clamp()}function TS(a){var u=v();return this.addTo(a,u),u}function kS(a){var u=v();return this.subTo(a,u),u}function _S(a){var u=v();return this.multiplyTo(a,u),u}function IS(){var a=v();return this.squareTo(a),a}function QS(a){var u=v();return this.divRemTo(a,u,null),u}function LS(a){var u=v();return this.divRemTo(a,null,u),u}function XS(a){var u=v(),p=v();return this.divRemTo(a,u,p),new Array(u,p)}function $S(a){this[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()}function NS(a,u){if(a!=0){for(;this.t<=u;)this[this.t++]=0;for(this[u]+=a;this[u]>=this.DV;)this[u]-=this.DV,++u>=this.t&&(this[this.t++]=0),++this[u]}}function xr(){}function df(a){return a}function FS(a,u,p){a.multiplyTo(u,p)}function RS(a,u){a.squareTo(u)}xr.prototype.convert=df,xr.prototype.revert=df,xr.prototype.mulTo=FS,xr.prototype.sqrTo=RS;function BS(a){return this.exp(a,new xr)}function MS(a,u,p){var g=Math.min(this.t+a.t,u);for(p.s=0,p.t=g;g>0;)p[--g]=0;var S;for(S=p.t-this.t;g<S;++g)p[g+this.t]=this.am(0,a[g],p,g,0,this.t);for(S=Math.min(a.t,u);g<S;++g)this.am(0,a[g],p,g,0,u-g);p.clamp()}function YS(a,u,p){--u;var g=p.t=this.t+a.t-u;for(p.s=0;--g>=0;)p[g]=0;for(g=Math.max(u-this.t,0);g<a.t;++g)p[this.t+g-u]=this.am(u-g,a[g],p,0,0,this.t+g-u);p.clamp(),p.drShiftTo(1,p)}function xi(a){this.r2=v(),this.q3=v(),m.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}function WS(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var u=v();return a.copyTo(u),this.reduce(u),u}function jS(a){return a}function ZS(a){for(a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);a.compareTo(this.r2)<0;)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)}function zS(a,u){a.squareTo(u),this.reduce(u)}function qS(a,u,p){a.multiplyTo(u,p),this.reduce(p)}xi.prototype.convert=WS,xi.prototype.revert=jS,xi.prototype.reduce=ZS,xi.prototype.mulTo=qS,xi.prototype.sqrTo=zS;function US(a,u){var p=a.bitLength(),g,S=z(1),b;if(p<=0)return S;p<18?g=1:p<48?g=3:p<144?g=4:p<768?g=5:g=6,p<8?b=new Ht(u):u.isEven()?b=new xi(u):b=new It(u);var E=new Array,T=3,k=g-1,Q=(1<<g)-1;if(E[1]=b.convert(this),g>1){var W=v();for(b.sqrTo(E[1],W);T<=Q;)E[T]=v(),b.mulTo(W,E[T-2],E[T]),T+=2}var R=a.t-1,V,nt=!0,at=v(),ht;for(p=lt(a[R])-1;R>=0;){for(p>=k?V=a[R]>>p-k&Q:(V=(a[R]&(1<<p+1)-1)<<k-p,R>0&&(V|=a[R-1]>>this.DB+p-k)),T=g;(V&1)==0;)V>>=1,--T;if((p-=T)<0&&(p+=this.DB,--R),nt)E[V].copyTo(S),nt=!1;else{for(;T>1;)b.sqrTo(S,at),b.sqrTo(at,S),T-=2;T>0?b.sqrTo(S,at):(ht=S,S=at,at=ht),b.mulTo(at,E[V],S)}for(;R>=0&&(a[R]&1<<p)==0;)b.sqrTo(S,at),ht=S,S=at,at=ht,--p<0&&(p=this.DB-1,--R)}return b.revert(S)}function GS(a){var u=this.s<0?this.negate():this.clone(),p=a.s<0?a.negate():a.clone();if(u.compareTo(p)<0){var g=u;u=p,p=g}var S=u.getLowestSetBit(),b=p.getLowestSetBit();if(b<0)return u;for(S<b&&(b=S),b>0&&(u.rShiftTo(b,u),p.rShiftTo(b,p));u.signum()>0;)(S=u.getLowestSetBit())>0&&u.rShiftTo(S,u),(S=p.getLowestSetBit())>0&&p.rShiftTo(S,p),u.compareTo(p)>=0?(u.subTo(p,u),u.rShiftTo(1,u)):(p.subTo(u,p),p.rShiftTo(1,p));return b>0&&p.lShiftTo(b,p),p}function VS(a){if(a<=0)return 0;var u=this.DV%a,p=this.s<0?a-1:0;if(this.t>0)if(u==0)p=this[0]%a;else for(var g=this.t-1;g>=0;--g)p=(u*p+this[g])%a;return p}function HS(a){var u=a.isEven();if(this.isEven()&&u||a.signum()==0)return m.ZERO;for(var p=a.clone(),g=this.clone(),S=z(1),b=z(0),E=z(0),T=z(1);p.signum()!=0;){for(;p.isEven();)p.rShiftTo(1,p),u?((!S.isEven()||!b.isEven())&&(S.addTo(this,S),b.subTo(a,b)),S.rShiftTo(1,S)):b.isEven()||b.subTo(a,b),b.rShiftTo(1,b);for(;g.isEven();)g.rShiftTo(1,g),u?((!E.isEven()||!T.isEven())&&(E.addTo(this,E),T.subTo(a,T)),E.rShiftTo(1,E)):T.isEven()||T.subTo(a,T),T.rShiftTo(1,T);p.compareTo(g)>=0?(p.subTo(g,p),u&&S.subTo(E,S),b.subTo(T,b)):(g.subTo(p,g),u&&E.subTo(S,E),T.subTo(b,T))}if(g.compareTo(m.ONE)!=0)return m.ZERO;if(T.compareTo(a)>=0)return T.subtract(a);if(T.signum()<0)T.addTo(a,T);else return T;return T.signum()<0?T.add(a):T}var ue=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],JS=(1<<26)/ue[ue.length-1];function KS(a){var u,p=this.abs();if(p.t==1&&p[0]<=ue[ue.length-1]){for(u=0;u<ue.length;++u)if(p[0]==ue[u])return!0;return!1}if(p.isEven())return!1;for(u=1;u<ue.length;){for(var g=ue[u],S=u+1;S<ue.length&&g<JS;)g*=ue[S++];for(g=p.modInt(g);u<S;)if(g%ue[u++]==0)return!1}return p.millerRabin(a)}function tC(a){var u=this.subtract(m.ONE),p=u.getLowestSetBit();if(p<=0)return!1;var g=u.shiftRight(p);a=a+1>>1,a>ue.length&&(a=ue.length);for(var S=v(),b=0;b<a;++b){S.fromInt(ue[Math.floor(Math.random()*ue.length)]);var E=S.modPow(g,this);if(E.compareTo(m.ONE)!=0&&E.compareTo(u)!=0){for(var T=1;T++<p&&E.compareTo(u)!=0;)if(E=E.modPowInt(2,this),E.compareTo(m.ONE)==0)return!1;if(E.compareTo(u)!=0)return!1}}return!0}m.prototype.chunkSize=ul,m.prototype.toRadix=pl,m.prototype.fromRadix=dl,m.prototype.fromNumber=fl,m.prototype.bitwiseTo=xl,m.prototype.changeBit=wS,m.prototype.addTo=AS,m.prototype.dMultiply=$S,m.prototype.dAddOffset=NS,m.prototype.multiplyLowerTo=MS,m.prototype.multiplyUpperTo=YS,m.prototype.modInt=VS,m.prototype.millerRabin=tC,m.prototype.clone=ol,m.prototype.intValue=al,m.prototype.byteValue=ll,m.prototype.shortValue=hl,m.prototype.signum=cl,m.prototype.toByteArray=ml,m.prototype.equals=Ol,m.prototype.min=gl,m.prototype.max=yl,m.prototype.and=Pl,m.prototype.or=Sl,m.prototype.xor=$,m.prototype.andNot=rt,m.prototype.not=he,m.prototype.shiftLeft=yr,m.prototype.shiftRight=Cl,m.prototype.getLowestSetBit=vS,m.prototype.bitCount=SS,m.prototype.testBit=CS,m.prototype.setBit=bS,m.prototype.clearBit=ES,m.prototype.flipBit=DS,m.prototype.add=TS,m.prototype.subtract=kS,m.prototype.multiply=_S,m.prototype.divide=QS,m.prototype.remainder=LS,m.prototype.divideAndRemainder=XS,m.prototype.modPow=US,m.prototype.modInverse=HS,m.prototype.pow=BS,m.prototype.gcd=GS,m.prototype.isProbablePrime=KS,m.prototype.square=IS;var ot=m;ot.prototype.IsNegative=function(){return this.compareTo(ot.ZERO)==-1},ot.op_Equality=function(a,u){return a.compareTo(u)==0},ot.op_Inequality=function(a,u){return a.compareTo(u)!=0},ot.op_GreaterThan=function(a,u){return a.compareTo(u)>0},ot.op_LessThan=function(a,u){return a.compareTo(u)<0},ot.op_Addition=function(a,u){return new ot(a,void 0,void 0).add(new ot(u,void 0,void 0))},ot.op_Subtraction=function(a,u){return new ot(a,void 0,void 0).subtract(new ot(u,void 0,void 0))},ot.Int128Mul=function(a,u){return new ot(a,void 0,void 0).multiply(new ot(u,void 0,void 0))},ot.op_Division=function(a,u){return a.divide(u)},ot.prototype.ToDouble=function(){return parseFloat(this.toString())};var ff=function(a,u){var p;if(typeof Object.getOwnPropertyNames>"u"){for(p in u.prototype)(typeof a.prototype[p]>"u"||a.prototype[p]===Object.prototype[p])&&(a.prototype[p]=u.prototype[p]);for(p in u)typeof a[p]>"u"&&(a[p]=u[p]);a.$baseCtor=u}else{for(var g=Object.getOwnPropertyNames(u.prototype),S=0;S<g.length;S++)typeof Object.getOwnPropertyDescriptor(a.prototype,g[S])>"u"&&Object.defineProperty(a.prototype,g[S],Object.getOwnPropertyDescriptor(u.prototype,g[S]));for(p in u)typeof a[p]>"u"&&(a[p]=u[p]);a.$baseCtor=u}};s.Path=function(){return[]},s.Path.prototype.push=Array.prototype.push,s.Paths=function(){return[]},s.Paths.prototype.push=Array.prototype.push,s.DoublePoint=function(){var a=arguments;this.X=0,this.Y=0,a.length===1?(this.X=a[0].X,this.Y=a[0].Y):a.length===2&&(this.X=a[0],this.Y=a[1])},s.DoublePoint0=function(){this.X=0,this.Y=0},s.DoublePoint0.prototype=s.DoublePoint.prototype,s.DoublePoint1=function(a){this.X=a.X,this.Y=a.Y},s.DoublePoint1.prototype=s.DoublePoint.prototype,s.DoublePoint2=function(a,u){this.X=a,this.Y=u},s.DoublePoint2.prototype=s.DoublePoint.prototype,s.PolyNode=function(){this.m_Parent=null,this.m_polygon=new s.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},s.PolyNode.prototype.IsHoleNode=function(){for(var a=!0,u=this.m_Parent;u!==null;)a=!a,u=u.m_Parent;return a},s.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},s.PolyNode.prototype.Contour=function(){return this.m_polygon},s.PolyNode.prototype.AddChild=function(a){var u=this.m_Childs.length;this.m_Childs.push(a),a.m_Parent=this,a.m_Index=u},s.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},s.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},s.PolyNode.prototype.Childs=function(){return this.m_Childs},s.PolyNode.prototype.Parent=function(){return this.m_Parent},s.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},s.PolyTree=function(){this.m_AllPolys=[],s.PolyNode.call(this)},s.PolyTree.prototype.Clear=function(){for(var a=0,u=this.m_AllPolys.length;a<u;a++)this.m_AllPolys[a]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},s.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},s.PolyTree.prototype.Total=function(){var a=this.m_AllPolys.length;return a>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&a--,a},ff(s.PolyTree,s.PolyNode),s.Math_Abs_Int64=s.Math_Abs_Int32=s.Math_Abs_Double=function(a){return Math.abs(a)},s.Math_Max_Int32_Int32=function(a,u){return Math.max(a,u)},d.msie||d.opera||d.safari?s.Cast_Int32=function(a){return a|0}:s.Cast_Int32=function(a){return~~a},typeof Number.toInteger>"u"&&(Number.toInteger=null),d.chrome?s.Cast_Int64=function(a){return a<-2147483648||a>2147483647?a<0?Math.ceil(a):Math.floor(a):~~a}:d.firefox&&typeof Number.toInteger=="function"?s.Cast_Int64=function(a){return Number.toInteger(a)}:d.msie7||d.msie8?s.Cast_Int64=function(a){return parseInt(a,10)}:d.msie?s.Cast_Int64=function(a){return a<-2147483648||a>2147483647?a<0?Math.ceil(a):Math.floor(a):a|0}:s.Cast_Int64=function(a){return a<0?Math.ceil(a):Math.floor(a)},s.Clear=function(a){a.length=0},s.PI=3.141592653589793,s.PI2=2*3.141592653589793,s.IntPoint=function(){var a=arguments,u=a.length;if(this.X=0,this.Y=0,s.use_xyz)if(this.Z=0,u===3)this.X=a[0],this.Y=a[1],this.Z=a[2];else if(u===2)this.X=a[0],this.Y=a[1],this.Z=0;else if(u===1)if(a[0]instanceof s.DoublePoint){var p=a[0];this.X=s.Clipper.Round(p.X),this.Y=s.Clipper.Round(p.Y),this.Z=0}else{var g=a[0];typeof g.Z>"u"&&(g.Z=0),this.X=g.X,this.Y=g.Y,this.Z=g.Z}else this.X=0,this.Y=0,this.Z=0;else if(u===2)this.X=a[0],this.Y=a[1];else if(u===1)if(a[0]instanceof s.DoublePoint){var p=a[0];this.X=s.Clipper.Round(p.X),this.Y=s.Clipper.Round(p.Y)}else{var g=a[0];this.X=g.X,this.Y=g.Y}else this.X=0,this.Y=0},s.IntPoint.op_Equality=function(a,u){return a.X===u.X&&a.Y===u.Y},s.IntPoint.op_Inequality=function(a,u){return a.X!==u.X||a.Y!==u.Y},s.IntPoint0=function(){this.X=0,this.Y=0,s.use_xyz&&(this.Z=0)},s.IntPoint0.prototype=s.IntPoint.prototype,s.IntPoint1=function(a){this.X=a.X,this.Y=a.Y,s.use_xyz&&(typeof a.Z>"u"?this.Z=0:this.Z=a.Z)},s.IntPoint1.prototype=s.IntPoint.prototype,s.IntPoint1dp=function(a){this.X=s.Clipper.Round(a.X),this.Y=s.Clipper.Round(a.Y),s.use_xyz&&(this.Z=0)},s.IntPoint1dp.prototype=s.IntPoint.prototype,s.IntPoint2=function(a,u,p){this.X=a,this.Y=u,s.use_xyz&&(typeof p>"u"?this.Z=0:this.Z=p)},s.IntPoint2.prototype=s.IntPoint.prototype,s.IntRect=function(){var a=arguments,u=a.length;if(u===4)this.left=a[0],this.top=a[1],this.right=a[2],this.bottom=a[3];else if(u===1){var p=a[0];this.left=p.left,this.top=p.top,this.right=p.right,this.bottom=p.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0.prototype=s.IntRect.prototype,s.IntRect1=function(a){this.left=a.left,this.top=a.top,this.right=a.right,this.bottom=a.bottom},s.IntRect1.prototype=s.IntRect.prototype,s.IntRect4=function(a,u,p,g){this.left=a,this.top=u,this.right=p,this.bottom=g},s.IntRect4.prototype=s.IntRect.prototype,s.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},s.PolyType={ptSubject:0,ptClip:1},s.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},s.JoinType={jtSquare:0,jtRound:1,jtMiter:2},s.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},s.EdgeSide={esLeft:0,esRight:1},s.Direction={dRightToLeft:0,dLeftToRight:1},s.TEdge=function(){this.Bot=new s.IntPoint0,this.Curr=new s.IntPoint0,this.Top=new s.IntPoint0,this.Delta=new s.IntPoint0,this.Dx=0,this.PolyTyp=s.PolyType.ptSubject,this.Side=s.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},s.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new s.IntPoint0},s.MyIntersectNodeSort=function(){},s.MyIntersectNodeSort.Compare=function(a,u){var p=u.Pt.Y-a.Pt.Y;return p>0?1:p<0?-1:0},s.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},s.Scanbeam=function(){this.Y=0,this.Next=null},s.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},s.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},s.OutPt=function(){this.Idx=0,this.Pt=new s.IntPoint0,this.Next=null,this.Prev=null},s.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new s.IntPoint0},s.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},s.ClipperBase.horizontal=-9007199254740992,s.ClipperBase.Skip=-2,s.ClipperBase.Unassigned=-1,s.ClipperBase.tolerance=1e-20,s.ClipperBase.loRange=47453132,s.ClipperBase.hiRange=0xfffffffffffff,s.ClipperBase.near_zero=function(a){return a>-s.ClipperBase.tolerance&&a<s.ClipperBase.tolerance},s.ClipperBase.IsHorizontal=function(a){return a.Delta.Y===0},s.ClipperBase.prototype.PointIsVertex=function(a,u){var p=u;do{if(s.IntPoint.op_Equality(p.Pt,a))return!0;p=p.Next}while(p!==u);return!1},s.ClipperBase.prototype.PointOnLineSegment=function(a,u,p,g){return g?a.X===u.X&&a.Y===u.Y||a.X===p.X&&a.Y===p.Y||a.X>u.X==a.X<p.X&&a.Y>u.Y==a.Y<p.Y&&ot.op_Equality(ot.Int128Mul(a.X-u.X,p.Y-u.Y),ot.Int128Mul(p.X-u.X,a.Y-u.Y)):a.X===u.X&&a.Y===u.Y||a.X===p.X&&a.Y===p.Y||a.X>u.X==a.X<p.X&&a.Y>u.Y==a.Y<p.Y&&(a.X-u.X)*(p.Y-u.Y)===(p.X-u.X)*(a.Y-u.Y)},s.ClipperBase.prototype.PointOnPolygon=function(a,u,p){for(var g=u;;){if(this.PointOnLineSegment(a,g.Pt,g.Next.Pt,p))return!0;if(g=g.Next,g===u)break}return!1},s.ClipperBase.prototype.SlopesEqual=s.ClipperBase.SlopesEqual=function(){var a=arguments,u=a.length,p,g,S,b,E,T,k;return u===3?(p=a[0],g=a[1],k=a[2],k?ot.op_Equality(ot.Int128Mul(p.Delta.Y,g.Delta.X),ot.Int128Mul(p.Delta.X,g.Delta.Y)):s.Cast_Int64(p.Delta.Y*g.Delta.X)===s.Cast_Int64(p.Delta.X*g.Delta.Y)):u===4?(S=a[0],b=a[1],E=a[2],k=a[3],k?ot.op_Equality(ot.Int128Mul(S.Y-b.Y,b.X-E.X),ot.Int128Mul(S.X-b.X,b.Y-E.Y)):s.Cast_Int64((S.Y-b.Y)*(b.X-E.X))-s.Cast_Int64((S.X-b.X)*(b.Y-E.Y))===0):(S=a[0],b=a[1],E=a[2],T=a[3],k=a[4],k?ot.op_Equality(ot.Int128Mul(S.Y-b.Y,E.X-T.X),ot.Int128Mul(S.X-b.X,E.Y-T.Y)):s.Cast_Int64((S.Y-b.Y)*(E.X-T.X))-s.Cast_Int64((S.X-b.X)*(E.Y-T.Y))===0)},s.ClipperBase.SlopesEqual3=function(a,u,p){return p?ot.op_Equality(ot.Int128Mul(a.Delta.Y,u.Delta.X),ot.Int128Mul(a.Delta.X,u.Delta.Y)):s.Cast_Int64(a.Delta.Y*u.Delta.X)===s.Cast_Int64(a.Delta.X*u.Delta.Y)},s.ClipperBase.SlopesEqual4=function(a,u,p,g){return g?ot.op_Equality(ot.Int128Mul(a.Y-u.Y,u.X-p.X),ot.Int128Mul(a.X-u.X,u.Y-p.Y)):s.Cast_Int64((a.Y-u.Y)*(u.X-p.X))-s.Cast_Int64((a.X-u.X)*(u.Y-p.Y))===0},s.ClipperBase.SlopesEqual5=function(a,u,p,g,S){return S?ot.op_Equality(ot.Int128Mul(a.Y-u.Y,p.X-g.X),ot.Int128Mul(a.X-u.X,p.Y-g.Y)):s.Cast_Int64((a.Y-u.Y)*(p.X-g.X))-s.Cast_Int64((a.X-u.X)*(p.Y-g.Y))===0},s.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var a=0,u=this.m_edges.length;a<u;++a){for(var p=0,g=this.m_edges[a].length;p<g;++p)this.m_edges[a][p]=null;s.Clear(this.m_edges[a])}s.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},s.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var a=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=a}this.m_CurrentLM=null},s.ClipperBase.prototype.RangeTest=function(a,u){u.Value?(a.X>s.ClipperBase.hiRange||a.Y>s.ClipperBase.hiRange||-a.X>s.ClipperBase.hiRange||-a.Y>s.ClipperBase.hiRange)&&s.Error("Coordinate outside allowed range in RangeTest()."):(a.X>s.ClipperBase.loRange||a.Y>s.ClipperBase.loRange||-a.X>s.ClipperBase.loRange||-a.Y>s.ClipperBase.loRange)&&(u.Value=!0,this.RangeTest(a,u))},s.ClipperBase.prototype.InitEdge=function(a,u,p,g){a.Next=u,a.Prev=p,a.Curr.X=g.X,a.Curr.Y=g.Y,s.use_xyz&&(a.Curr.Z=g.Z),a.OutIdx=-1},s.ClipperBase.prototype.InitEdge2=function(a,u){a.Curr.Y>=a.Next.Curr.Y?(a.Bot.X=a.Curr.X,a.Bot.Y=a.Curr.Y,s.use_xyz&&(a.Bot.Z=a.Curr.Z),a.Top.X=a.Next.Curr.X,a.Top.Y=a.Next.Curr.Y,s.use_xyz&&(a.Top.Z=a.Next.Curr.Z)):(a.Top.X=a.Curr.X,a.Top.Y=a.Curr.Y,s.use_xyz&&(a.Top.Z=a.Curr.Z),a.Bot.X=a.Next.Curr.X,a.Bot.Y=a.Next.Curr.Y,s.use_xyz&&(a.Bot.Z=a.Next.Curr.Z)),this.SetDx(a),a.PolyTyp=u},s.ClipperBase.prototype.FindNextLocMin=function(a){for(var u;;){for(;s.IntPoint.op_Inequality(a.Bot,a.Prev.Bot)||s.IntPoint.op_Equality(a.Curr,a.Top);)a=a.Next;if(a.Dx!==s.ClipperBase.horizontal&&a.Prev.Dx!==s.ClipperBase.horizontal)break;for(;a.Prev.Dx===s.ClipperBase.horizontal;)a=a.Prev;for(u=a;a.Dx===s.ClipperBase.horizontal;)a=a.Next;if(a.Top.Y!==a.Prev.Bot.Y){u.Prev.Bot.X<a.Bot.X&&(a=u);break}}return a},s.ClipperBase.prototype.ProcessBound=function(a,u){var p,g=a,S;if(g.OutIdx===s.ClipperBase.Skip){if(a=g,u){for(;a.Top.Y===a.Next.Bot.Y;)a=a.Next;for(;a!==g&&a.Dx===s.ClipperBase.horizontal;)a=a.Prev}else{for(;a.Top.Y===a.Prev.Bot.Y;)a=a.Prev;for(;a!==g&&a.Dx===s.ClipperBase.horizontal;)a=a.Next}if(a===g)u?g=a.Next:g=a.Prev;else{u?a=g.Next:a=g.Prev;var b=new s.LocalMinima;b.Next=null,b.Y=a.Bot.Y,b.LeftBound=null,b.RightBound=a,a.WindDelta=0,g=this.ProcessBound(a,u),this.InsertLocalMinima(b)}return g}if(a.Dx===s.ClipperBase.horizontal&&(u?p=a.Prev:p=a.Next,p.Dx===s.ClipperBase.horizontal?p.Bot.X!==a.Bot.X&&p.Top.X!==a.Bot.X&&this.ReverseHorizontal(a):p.Bot.X!==a.Bot.X&&this.ReverseHorizontal(a)),p=a,u){for(;g.Top.Y===g.Next.Bot.Y&&g.Next.OutIdx!==s.ClipperBase.Skip;)g=g.Next;if(g.Dx===s.ClipperBase.horizontal&&g.Next.OutIdx!==s.ClipperBase.Skip){for(S=g;S.Prev.Dx===s.ClipperBase.horizontal;)S=S.Prev;S.Prev.Top.X>g.Next.Top.X&&(g=S.Prev)}for(;a!==g;)a.NextInLML=a.Next,a.Dx===s.ClipperBase.horizontal&&a!==p&&a.Bot.X!==a.Prev.Top.X&&this.ReverseHorizontal(a),a=a.Next;a.Dx===s.ClipperBase.horizontal&&a!==p&&a.Bot.X!==a.Prev.Top.X&&this.ReverseHorizontal(a),g=g.Next}else{for(;g.Top.Y===g.Prev.Bot.Y&&g.Prev.OutIdx!==s.ClipperBase.Skip;)g=g.Prev;if(g.Dx===s.ClipperBase.horizontal&&g.Prev.OutIdx!==s.ClipperBase.Skip){for(S=g;S.Next.Dx===s.ClipperBase.horizontal;)S=S.Next;(S.Next.Top.X===g.Prev.Top.X||S.Next.Top.X>g.Prev.Top.X)&&(g=S.Next)}for(;a!==g;)a.NextInLML=a.Prev,a.Dx===s.ClipperBase.horizontal&&a!==p&&a.Bot.X!==a.Next.Top.X&&this.ReverseHorizontal(a),a=a.Prev;a.Dx===s.ClipperBase.horizontal&&a!==p&&a.Bot.X!==a.Next.Top.X&&this.ReverseHorizontal(a),g=g.Prev}return g},s.ClipperBase.prototype.AddPath=function(a,u,p){s.use_lines?!p&&u===s.PolyType.ptClip&&s.Error("AddPath: Open paths must be subject."):p||s.Error("AddPath: Open paths have been disabled.");var g=a.length-1;if(p)for(;g>0&&s.IntPoint.op_Equality(a[g],a[0]);)--g;for(;g>0&&s.IntPoint.op_Equality(a[g],a[g-1]);)--g;if(p&&g<2||!p&&g<1)return!1;for(var S=new Array,b=0;b<=g;b++)S.push(new s.TEdge);var E=!0;S[1].Curr.X=a[1].X,S[1].Curr.Y=a[1].Y,s.use_xyz&&(S[1].Curr.Z=a[1].Z);var T={Value:this.m_UseFullRange};this.RangeTest(a[0],T),this.m_UseFullRange=T.Value,T.Value=this.m_UseFullRange,this.RangeTest(a[g],T),this.m_UseFullRange=T.Value,this.InitEdge(S[0],S[1],S[g],a[0]),this.InitEdge(S[g],S[0],S[g-1],a[g]);for(var b=g-1;b>=1;--b)T.Value=this.m_UseFullRange,this.RangeTest(a[b],T),this.m_UseFullRange=T.Value,this.InitEdge(S[b],S[b+1],S[b-1],a[b]);for(var k=S[0],Q=k,W=k;;){if(Q.Curr===Q.Next.Curr&&(p||Q.Next!==k)){if(Q===Q.Next)break;Q===k&&(k=Q.Next),Q=this.RemoveEdge(Q),W=Q;continue}if(Q.Prev===Q.Next)break;if(p&&s.ClipperBase.SlopesEqual4(Q.Prev.Curr,Q.Curr,Q.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(Q.Prev.Curr,Q.Curr,Q.Next.Curr))){Q===k&&(k=Q.Next),Q=this.RemoveEdge(Q),Q=Q.Prev,W=Q;continue}if(Q=Q.Next,Q===W||!p&&Q.Next===k)break}if(!p&&Q===Q.Next||p&&Q.Prev===Q.Next)return!1;p||(this.m_HasOpenPaths=!0,k.Prev.OutIdx=s.ClipperBase.Skip),Q=k;do this.InitEdge2(Q,u),Q=Q.Next,E&&Q.Curr.Y!==k.Curr.Y&&(E=!1);while(Q!==k);if(E){if(p)return!1;Q.Prev.OutIdx=s.ClipperBase.Skip;var R=new s.LocalMinima;for(R.Next=null,R.Y=Q.Bot.Y,R.LeftBound=null,R.RightBound=Q,R.RightBound.Side=s.EdgeSide.esRight,R.RightBound.WindDelta=0;Q.Bot.X!==Q.Prev.Top.X&&this.ReverseHorizontal(Q),Q.Next.OutIdx!==s.ClipperBase.Skip;)Q.NextInLML=Q.Next,Q=Q.Next;return this.InsertLocalMinima(R),this.m_edges.push(S),!0}this.m_edges.push(S);var V,nt=null;for(s.IntPoint.op_Equality(Q.Prev.Bot,Q.Prev.Top)&&(Q=Q.Next);Q=this.FindNextLocMin(Q),Q!==nt;){nt===null&&(nt=Q);var R=new s.LocalMinima;R.Next=null,R.Y=Q.Bot.Y,Q.Dx<Q.Prev.Dx?(R.LeftBound=Q.Prev,R.RightBound=Q,V=!1):(R.LeftBound=Q,R.RightBound=Q.Prev,V=!0),R.LeftBound.Side=s.EdgeSide.esLeft,R.RightBound.Side=s.EdgeSide.esRight,p?R.LeftBound.Next===R.RightBound?R.LeftBound.WindDelta=-1:R.LeftBound.WindDelta=1:R.LeftBound.WindDelta=0,R.RightBound.WindDelta=-R.LeftBound.WindDelta,Q=this.ProcessBound(R.LeftBound,V),Q.OutIdx===s.ClipperBase.Skip&&(Q=this.ProcessBound(Q,V));var at=this.ProcessBound(R.RightBound,!V);at.OutIdx===s.ClipperBase.Skip&&(at=this.ProcessBound(at,!V)),R.LeftBound.OutIdx===s.ClipperBase.Skip?R.LeftBound=null:R.RightBound.OutIdx===s.ClipperBase.Skip&&(R.RightBound=null),this.InsertLocalMinima(R),V||(Q=at)}return!0},s.ClipperBase.prototype.AddPaths=function(a,u,p){for(var g=!1,S=0,b=a.length;S<b;++S)this.AddPath(a[S],u,p)&&(g=!0);return g},s.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(a,u,p){return s.IntPoint.op_Equality(a,p)||s.IntPoint.op_Equality(a,u)||s.IntPoint.op_Equality(p,u)?!1:a.X!==p.X?u.X>a.X==u.X<p.X:u.Y>a.Y==u.Y<p.Y},s.ClipperBase.prototype.RemoveEdge=function(a){a.Prev.Next=a.Next,a.Next.Prev=a.Prev;var u=a.Next;return a.Prev=null,u},s.ClipperBase.prototype.SetDx=function(a){a.Delta.X=a.Top.X-a.Bot.X,a.Delta.Y=a.Top.Y-a.Bot.Y,a.Delta.Y===0?a.Dx=s.ClipperBase.horizontal:a.Dx=a.Delta.X/a.Delta.Y},s.ClipperBase.prototype.InsertLocalMinima=function(a){if(this.m_MinimaList===null)this.m_MinimaList=a;else if(a.Y>=this.m_MinimaList.Y)a.Next=this.m_MinimaList,this.m_MinimaList=a;else{for(var u=this.m_MinimaList;u.Next!==null&&a.Y<u.Next.Y;)u=u.Next;a.Next=u.Next,u.Next=a}},s.ClipperBase.prototype.PopLocalMinima=function(a,u){return u.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===a?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},s.ClipperBase.prototype.ReverseHorizontal=function(a){var u=a.Top.X;a.Top.X=a.Bot.X,a.Bot.X=u,s.use_xyz&&(u=a.Top.Z,a.Top.Z=a.Bot.Z,a.Bot.Z=u)},s.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var a=this.m_MinimaList;a!==null;){this.InsertScanbeam(a.Y);var u=a.LeftBound;u!==null&&(u.Curr.X=u.Bot.X,u.Curr.Y=u.Bot.Y,s.use_xyz&&(u.Curr.Z=u.Bot.Z),u.OutIdx=s.ClipperBase.Unassigned),u=a.RightBound,u!==null&&(u.Curr.X=u.Bot.X,u.Curr.Y=u.Bot.Y,s.use_xyz&&(u.Curr.Z=u.Bot.Z),u.OutIdx=s.ClipperBase.Unassigned),a=a.Next}this.m_ActiveEdges=null}},s.ClipperBase.prototype.InsertScanbeam=function(a){if(this.m_Scanbeam===null)this.m_Scanbeam=new s.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=a;else if(a>this.m_Scanbeam.Y){var u=new s.Scanbeam;u.Y=a,u.Next=this.m_Scanbeam,this.m_Scanbeam=u}else{for(var p=this.m_Scanbeam;p.Next!==null&&a<=p.Next.Y;)p=p.Next;if(a===p.Y)return;var g=new s.Scanbeam;g.Y=a,g.Next=p.Next,p.Next=g}},s.ClipperBase.prototype.PopScanbeam=function(a){return this.m_Scanbeam===null?(a.v=0,!1):(a.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},s.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},s.ClipperBase.prototype.CreateOutRec=function(){var a=new s.OutRec;return a.Idx=s.ClipperBase.Unassigned,a.IsHole=!1,a.IsOpen=!1,a.FirstLeft=null,a.Pts=null,a.BottomPt=null,a.PolyNode=null,this.m_PolyOuts.push(a),a.Idx=this.m_PolyOuts.length-1,a},s.ClipperBase.prototype.DisposeOutRec=function(a){var u=this.m_PolyOuts[a];u.Pts=null,u=null,this.m_PolyOuts[a]=null},s.ClipperBase.prototype.UpdateEdgeIntoAEL=function(a){a.NextInLML===null&&s.Error("UpdateEdgeIntoAEL: invalid call");var u=a.PrevInAEL,p=a.NextInAEL;return a.NextInLML.OutIdx=a.OutIdx,u!==null?u.NextInAEL=a.NextInLML:this.m_ActiveEdges=a.NextInLML,p!==null&&(p.PrevInAEL=a.NextInLML),a.NextInLML.Side=a.Side,a.NextInLML.WindDelta=a.WindDelta,a.NextInLML.WindCnt=a.WindCnt,a.NextInLML.WindCnt2=a.WindCnt2,a=a.NextInLML,a.Curr.X=a.Bot.X,a.Curr.Y=a.Bot.Y,a.PrevInAEL=u,a.NextInAEL=p,s.ClipperBase.IsHorizontal(a)||this.InsertScanbeam(a.Top.Y),a},s.ClipperBase.prototype.SwapPositionsInAEL=function(a,u){if(!(a.NextInAEL===a.PrevInAEL||u.NextInAEL===u.PrevInAEL)){if(a.NextInAEL===u){var p=u.NextInAEL;p!==null&&(p.PrevInAEL=a);var g=a.PrevInAEL;g!==null&&(g.NextInAEL=u),u.PrevInAEL=g,u.NextInAEL=a,a.PrevInAEL=u,a.NextInAEL=p}else if(u.NextInAEL===a){var S=a.NextInAEL;S!==null&&(S.PrevInAEL=u);var b=u.PrevInAEL;b!==null&&(b.NextInAEL=a),a.PrevInAEL=b,a.NextInAEL=u,u.PrevInAEL=a,u.NextInAEL=S}else{var E=a.NextInAEL,T=a.PrevInAEL;a.NextInAEL=u.NextInAEL,a.NextInAEL!==null&&(a.NextInAEL.PrevInAEL=a),a.PrevInAEL=u.PrevInAEL,a.PrevInAEL!==null&&(a.PrevInAEL.NextInAEL=a),u.NextInAEL=E,u.NextInAEL!==null&&(u.NextInAEL.PrevInAEL=u),u.PrevInAEL=T,u.PrevInAEL!==null&&(u.PrevInAEL.NextInAEL=u)}a.PrevInAEL===null?this.m_ActiveEdges=a:u.PrevInAEL===null&&(this.m_ActiveEdges=u)}},s.ClipperBase.prototype.DeleteFromAEL=function(a){var u=a.PrevInAEL,p=a.NextInAEL;u===null&&p===null&&a!==this.m_ActiveEdges||(u!==null?u.NextInAEL=p:this.m_ActiveEdges=p,p!==null&&(p.PrevInAEL=u),a.NextInAEL=null,a.PrevInAEL=null)},s.Clipper=function(a){typeof a>"u"&&(a=0),this.m_PolyOuts=null,this.m_ClipType=s.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=s.PolyFillType.pftEvenOdd,this.m_SubjFillType=s.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,s.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=s.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&a)!==0,this.StrictlySimple=(2&a)!==0,this.PreserveCollinear=(4&a)!==0,s.use_xyz&&(this.ZFillFunction=null)},s.Clipper.ioReverseSolution=1,s.Clipper.ioStrictlySimple=2,s.Clipper.ioPreserveCollinear=4,s.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),s.ClipperBase.prototype.Clear.call(this))},s.Clipper.prototype.InsertMaxima=function(a){var u=new s.Maxima;if(u.X=a,this.m_Maxima===null)this.m_Maxima=u,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(a<this.m_Maxima.X)u.Next=this.m_Maxima,u.Prev=null,this.m_Maxima=u;else{for(var p=this.m_Maxima;p.Next!==null&&a>=p.Next.X;)p=p.Next;if(a===p.X)return;u.Next=p.Next,u.Prev=p,p.Next!==null&&(p.Next.Prev=u),p.Next=u}},s.Clipper.prototype.Execute=function(){var a=arguments,u=a.length,p=a[1]instanceof s.PolyTree;if(u===4&&!p){var g=a[0],S=a[1],b=a[2],E=a[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&s.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,s.Clear(S),this.m_SubjFillType=b,this.m_ClipFillType=E,this.m_ClipType=g,this.m_UsingPolyTree=!1;try{var T=this.ExecuteInternal();T&&this.BuildResult(S)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return T}else if(u===4&&p){var g=a[0],k=a[1],b=a[2],E=a[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=b,this.m_ClipFillType=E,this.m_ClipType=g,this.m_UsingPolyTree=!0;try{var T=this.ExecuteInternal();T&&this.BuildResult2(k)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return T}else if(u===2&&!p){var g=a[0],S=a[1];return this.Execute(g,S,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)}else if(u===2&&p){var g=a[0],k=a[1];return this.Execute(g,k,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)}},s.Clipper.prototype.FixHoleLinkage=function(a){if(!(a.FirstLeft===null||a.IsHole!==a.FirstLeft.IsHole&&a.FirstLeft.Pts!==null)){for(var u=a.FirstLeft;u!==null&&(u.IsHole===a.IsHole||u.Pts===null);)u=u.FirstLeft;a.FirstLeft=u}},s.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var a={},u={};if(!this.PopScanbeam(a))return!1;for(this.InsertLocalMinimaIntoAEL(a.v);this.PopScanbeam(u)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(u.v))return!1;this.ProcessEdgesAtTopOfScanbeam(u.v),a.v=u.v,this.InsertLocalMinimaIntoAEL(a.v)}var p,g,S;for(g=0,S=this.m_PolyOuts.length;g<S;g++)p=this.m_PolyOuts[g],!(p.Pts===null||p.IsOpen)&&(p.IsHole^this.ReverseSolution)==this.Area$1(p)>0&&this.ReversePolyPtLinks(p.Pts);for(this.JoinCommonEdges(),g=0,S=this.m_PolyOuts.length;g<S;g++)p=this.m_PolyOuts[g],p.Pts!==null&&(p.IsOpen?this.FixupOutPolyline(p):this.FixupOutPolygon(p));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},s.Clipper.prototype.DisposeAllPolyPts=function(){for(var a=0,u=this.m_PolyOuts.length;a<u;++a)this.DisposeOutRec(a);s.Clear(this.m_PolyOuts)},s.Clipper.prototype.AddJoin=function(a,u,p){var g=new s.Join;g.OutPt1=a,g.OutPt2=u,g.OffPt.X=p.X,g.OffPt.Y=p.Y,s.use_xyz&&(g.OffPt.Z=p.Z),this.m_Joins.push(g)},s.Clipper.prototype.AddGhostJoin=function(a,u){var p=new s.Join;p.OutPt1=a,p.OffPt.X=u.X,p.OffPt.Y=u.Y,s.use_xyz&&(p.OffPt.Z=u.Z),this.m_GhostJoins.push(p)},s.Clipper.prototype.SetZ=function(a,u,p){if(this.ZFillFunction!==null){if(a.Z!==0||this.ZFillFunction===null)return;s.IntPoint.op_Equality(a,u.Bot)?a.Z=u.Bot.Z:s.IntPoint.op_Equality(a,u.Top)?a.Z=u.Top.Z:s.IntPoint.op_Equality(a,p.Bot)?a.Z=p.Bot.Z:s.IntPoint.op_Equality(a,p.Top)?a.Z=p.Top.Z:this.ZFillFunction(u.Bot,u.Top,p.Bot,p.Top,a)}},s.Clipper.prototype.InsertLocalMinimaIntoAEL=function(a){for(var u={},p,g;this.PopLocalMinima(a,u);){p=u.v.LeftBound,g=u.v.RightBound;var S=null;if(p===null?(this.InsertEdgeIntoAEL(g,null),this.SetWindingCount(g),this.IsContributing(g)&&(S=this.AddOutPt(g,g.Bot))):g===null?(this.InsertEdgeIntoAEL(p,null),this.SetWindingCount(p),this.IsContributing(p)&&(S=this.AddOutPt(p,p.Bot)),this.InsertScanbeam(p.Top.Y)):(this.InsertEdgeIntoAEL(p,null),this.InsertEdgeIntoAEL(g,p),this.SetWindingCount(p),g.WindCnt=p.WindCnt,g.WindCnt2=p.WindCnt2,this.IsContributing(p)&&(S=this.AddLocalMinPoly(p,g,p.Bot)),this.InsertScanbeam(p.Top.Y)),g!==null&&(s.ClipperBase.IsHorizontal(g)?(g.NextInLML!==null&&this.InsertScanbeam(g.NextInLML.Top.Y),this.AddEdgeToSEL(g)):this.InsertScanbeam(g.Top.Y)),!(p===null||g===null)){if(S!==null&&s.ClipperBase.IsHorizontal(g)&&this.m_GhostJoins.length>0&&g.WindDelta!==0)for(var b=0,E=this.m_GhostJoins.length;b<E;b++){var T=this.m_GhostJoins[b];this.HorzSegmentsOverlap(T.OutPt1.Pt.X,T.OffPt.X,g.Bot.X,g.Top.X)&&this.AddJoin(T.OutPt1,S,T.OffPt)}if(p.OutIdx>=0&&p.PrevInAEL!==null&&p.PrevInAEL.Curr.X===p.Bot.X&&p.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(p.PrevInAEL.Curr,p.PrevInAEL.Top,p.Curr,p.Top,this.m_UseFullRange)&&p.WindDelta!==0&&p.PrevInAEL.WindDelta!==0){var k=this.AddOutPt(p.PrevInAEL,p.Bot);this.AddJoin(S,k,p.Top)}if(p.NextInAEL!==g){if(g.OutIdx>=0&&g.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(g.PrevInAEL.Curr,g.PrevInAEL.Top,g.Curr,g.Top,this.m_UseFullRange)&&g.WindDelta!==0&&g.PrevInAEL.WindDelta!==0){var k=this.AddOutPt(g.PrevInAEL,g.Bot);this.AddJoin(S,k,g.Top)}var Q=p.NextInAEL;if(Q!==null)for(;Q!==g;)this.IntersectEdges(g,Q,p.Curr),Q=Q.NextInAEL}}}},s.Clipper.prototype.InsertEdgeIntoAEL=function(a,u){if(this.m_ActiveEdges===null)a.PrevInAEL=null,a.NextInAEL=null,this.m_ActiveEdges=a;else if(u===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,a))a.PrevInAEL=null,a.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=a,this.m_ActiveEdges=a;else{for(u===null&&(u=this.m_ActiveEdges);u.NextInAEL!==null&&!this.E2InsertsBeforeE1(u.NextInAEL,a);)u=u.NextInAEL;a.NextInAEL=u.NextInAEL,u.NextInAEL!==null&&(u.NextInAEL.PrevInAEL=a),a.PrevInAEL=u,u.NextInAEL=a}},s.Clipper.prototype.E2InsertsBeforeE1=function(a,u){return u.Curr.X===a.Curr.X?u.Top.Y>a.Top.Y?u.Top.X<s.Clipper.TopX(a,u.Top.Y):a.Top.X>s.Clipper.TopX(u,a.Top.Y):u.Curr.X<a.Curr.X},s.Clipper.prototype.IsEvenOddFillType=function(a){return a.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType===s.PolyFillType.pftEvenOdd:this.m_ClipFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsEvenOddAltFillType=function(a){return a.PolyTyp===s.PolyType.ptSubject?this.m_ClipFillType===s.PolyFillType.pftEvenOdd:this.m_SubjFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsContributing=function(a){var u,p;switch(a.PolyTyp===s.PolyType.ptSubject?(u=this.m_SubjFillType,p=this.m_ClipFillType):(u=this.m_ClipFillType,p=this.m_SubjFillType),u){case s.PolyFillType.pftEvenOdd:if(a.WindDelta===0&&a.WindCnt!==1)return!1;break;case s.PolyFillType.pftNonZero:if(Math.abs(a.WindCnt)!==1)return!1;break;case s.PolyFillType.pftPositive:if(a.WindCnt!==1)return!1;break;default:if(a.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case s.ClipType.ctIntersection:switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return a.WindCnt2!==0;case s.PolyFillType.pftPositive:return a.WindCnt2>0;default:return a.WindCnt2<0}case s.ClipType.ctUnion:switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return a.WindCnt2===0;case s.PolyFillType.pftPositive:return a.WindCnt2<=0;default:return a.WindCnt2>=0}case s.ClipType.ctDifference:if(a.PolyTyp===s.PolyType.ptSubject)switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return a.WindCnt2===0;case s.PolyFillType.pftPositive:return a.WindCnt2<=0;default:return a.WindCnt2>=0}else switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return a.WindCnt2!==0;case s.PolyFillType.pftPositive:return a.WindCnt2>0;default:return a.WindCnt2<0}case s.ClipType.ctXor:if(a.WindDelta===0)switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return a.WindCnt2===0;case s.PolyFillType.pftPositive:return a.WindCnt2<=0;default:return a.WindCnt2>=0}else return!0}return!0},s.Clipper.prototype.SetWindingCount=function(a){for(var u=a.PrevInAEL;u!==null&&(u.PolyTyp!==a.PolyTyp||u.WindDelta===0);)u=u.PrevInAEL;if(u===null){var p=a.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;a.WindDelta===0?a.WindCnt=p===s.PolyFillType.pftNegative?-1:1:a.WindCnt=a.WindDelta,a.WindCnt2=0,u=this.m_ActiveEdges}else if(a.WindDelta===0&&this.m_ClipType!==s.ClipType.ctUnion)a.WindCnt=1,a.WindCnt2=u.WindCnt2,u=u.NextInAEL;else if(this.IsEvenOddFillType(a)){if(a.WindDelta===0){for(var g=!0,S=u.PrevInAEL;S!==null;)S.PolyTyp===u.PolyTyp&&S.WindDelta!==0&&(g=!g),S=S.PrevInAEL;a.WindCnt=g?0:1}else a.WindCnt=a.WindDelta;a.WindCnt2=u.WindCnt2,u=u.NextInAEL}else u.WindCnt*u.WindDelta<0?Math.abs(u.WindCnt)>1?u.WindDelta*a.WindDelta<0?a.WindCnt=u.WindCnt:a.WindCnt=u.WindCnt+a.WindDelta:a.WindCnt=a.WindDelta===0?1:a.WindDelta:a.WindDelta===0?a.WindCnt=u.WindCnt<0?u.WindCnt-1:u.WindCnt+1:u.WindDelta*a.WindDelta<0?a.WindCnt=u.WindCnt:a.WindCnt=u.WindCnt+a.WindDelta,a.WindCnt2=u.WindCnt2,u=u.NextInAEL;if(this.IsEvenOddAltFillType(a))for(;u!==a;)u.WindDelta!==0&&(a.WindCnt2=a.WindCnt2===0?1:0),u=u.NextInAEL;else for(;u!==a;)a.WindCnt2+=u.WindDelta,u=u.NextInAEL},s.Clipper.prototype.AddEdgeToSEL=function(a){this.m_SortedEdges===null?(this.m_SortedEdges=a,a.PrevInSEL=null,a.NextInSEL=null):(a.NextInSEL=this.m_SortedEdges,a.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=a,this.m_SortedEdges=a)},s.Clipper.prototype.PopEdgeFromSEL=function(a){if(a.v=this.m_SortedEdges,a.v===null)return!1;var u=a.v;return this.m_SortedEdges=a.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),u.NextInSEL=null,u.PrevInSEL=null,!0},s.Clipper.prototype.CopyAELToSEL=function(){var a=this.m_ActiveEdges;for(this.m_SortedEdges=a;a!==null;)a.PrevInSEL=a.PrevInAEL,a.NextInSEL=a.NextInAEL,a=a.NextInAEL},s.Clipper.prototype.SwapPositionsInSEL=function(a,u){if(!(a.NextInSEL===null&&a.PrevInSEL===null)&&!(u.NextInSEL===null&&u.PrevInSEL===null)){if(a.NextInSEL===u){var p=u.NextInSEL;p!==null&&(p.PrevInSEL=a);var g=a.PrevInSEL;g!==null&&(g.NextInSEL=u),u.PrevInSEL=g,u.NextInSEL=a,a.PrevInSEL=u,a.NextInSEL=p}else if(u.NextInSEL===a){var p=a.NextInSEL;p!==null&&(p.PrevInSEL=u);var g=u.PrevInSEL;g!==null&&(g.NextInSEL=a),a.PrevInSEL=g,a.NextInSEL=u,u.PrevInSEL=a,u.NextInSEL=p}else{var p=a.NextInSEL,g=a.PrevInSEL;a.NextInSEL=u.NextInSEL,a.NextInSEL!==null&&(a.NextInSEL.PrevInSEL=a),a.PrevInSEL=u.PrevInSEL,a.PrevInSEL!==null&&(a.PrevInSEL.NextInSEL=a),u.NextInSEL=p,u.NextInSEL!==null&&(u.NextInSEL.PrevInSEL=u),u.PrevInSEL=g,u.PrevInSEL!==null&&(u.PrevInSEL.NextInSEL=u)}a.PrevInSEL===null?this.m_SortedEdges=a:u.PrevInSEL===null&&(this.m_SortedEdges=u)}},s.Clipper.prototype.AddLocalMaxPoly=function(a,u,p){this.AddOutPt(a,p),u.WindDelta===0&&this.AddOutPt(u,p),a.OutIdx===u.OutIdx?(a.OutIdx=-1,u.OutIdx=-1):a.OutIdx<u.OutIdx?this.AppendPolygon(a,u):this.AppendPolygon(u,a)},s.Clipper.prototype.AddLocalMinPoly=function(a,u,p){var g,S,b;if(s.ClipperBase.IsHorizontal(u)||a.Dx>u.Dx?(g=this.AddOutPt(a,p),u.OutIdx=a.OutIdx,a.Side=s.EdgeSide.esLeft,u.Side=s.EdgeSide.esRight,S=a,S.PrevInAEL===u?b=u.PrevInAEL:b=S.PrevInAEL):(g=this.AddOutPt(u,p),a.OutIdx=u.OutIdx,a.Side=s.EdgeSide.esRight,u.Side=s.EdgeSide.esLeft,S=u,S.PrevInAEL===a?b=a.PrevInAEL:b=S.PrevInAEL),b!==null&&b.OutIdx>=0&&b.Top.Y<p.Y&&S.Top.Y<p.Y){var E=s.Clipper.TopX(b,p.Y),T=s.Clipper.TopX(S,p.Y);if(E===T&&S.WindDelta!==0&&b.WindDelta!==0&&s.ClipperBase.SlopesEqual5(new s.IntPoint2(E,p.Y),b.Top,new s.IntPoint2(T,p.Y),S.Top,this.m_UseFullRange)){var k=this.AddOutPt(b,p);this.AddJoin(g,k,S.Top)}}return g},s.Clipper.prototype.AddOutPt=function(a,u){if(a.OutIdx<0){var p=this.CreateOutRec();p.IsOpen=a.WindDelta===0;var g=new s.OutPt;return p.Pts=g,g.Idx=p.Idx,g.Pt.X=u.X,g.Pt.Y=u.Y,s.use_xyz&&(g.Pt.Z=u.Z),g.Next=g,g.Prev=g,p.IsOpen||this.SetHoleState(a,p),a.OutIdx=p.Idx,g}else{var p=this.m_PolyOuts[a.OutIdx],S=p.Pts,b=a.Side===s.EdgeSide.esLeft;if(b&&s.IntPoint.op_Equality(u,S.Pt))return S;if(!b&&s.IntPoint.op_Equality(u,S.Prev.Pt))return S.Prev;var g=new s.OutPt;return g.Idx=p.Idx,g.Pt.X=u.X,g.Pt.Y=u.Y,s.use_xyz&&(g.Pt.Z=u.Z),g.Next=S,g.Prev=S.Prev,g.Prev.Next=g,S.Prev=g,b&&(p.Pts=g),g}},s.Clipper.prototype.GetLastOutPt=function(a){var u=this.m_PolyOuts[a.OutIdx];return a.Side===s.EdgeSide.esLeft?u.Pts:u.Pts.Prev},s.Clipper.prototype.SwapPoints=function(a,u){var p=new s.IntPoint1(a.Value);a.Value.X=u.Value.X,a.Value.Y=u.Value.Y,s.use_xyz&&(a.Value.Z=u.Value.Z),u.Value.X=p.X,u.Value.Y=p.Y,s.use_xyz&&(u.Value.Z=p.Z)},s.Clipper.prototype.HorzSegmentsOverlap=function(a,u,p,g){var S;return a>u&&(S=a,a=u,u=S),p>g&&(S=p,p=g,g=S),a<g&&p<u},s.Clipper.prototype.SetHoleState=function(a,u){for(var p=a.PrevInAEL,g=null;p!==null;)p.OutIdx>=0&&p.WindDelta!==0&&(g===null?g=p:g.OutIdx===p.OutIdx&&(g=null)),p=p.PrevInAEL;g===null?(u.FirstLeft=null,u.IsHole=!1):(u.FirstLeft=this.m_PolyOuts[g.OutIdx],u.IsHole=!u.FirstLeft.IsHole)},s.Clipper.prototype.GetDx=function(a,u){return a.Y===u.Y?s.ClipperBase.horizontal:(u.X-a.X)/(u.Y-a.Y)},s.Clipper.prototype.FirstIsBottomPt=function(a,u){for(var p=a.Prev;s.IntPoint.op_Equality(p.Pt,a.Pt)&&p!==a;)p=p.Prev;var g=Math.abs(this.GetDx(a.Pt,p.Pt));for(p=a.Next;s.IntPoint.op_Equality(p.Pt,a.Pt)&&p!==a;)p=p.Next;var S=Math.abs(this.GetDx(a.Pt,p.Pt));for(p=u.Prev;s.IntPoint.op_Equality(p.Pt,u.Pt)&&p!==u;)p=p.Prev;var b=Math.abs(this.GetDx(u.Pt,p.Pt));for(p=u.Next;s.IntPoint.op_Equality(p.Pt,u.Pt)&&p!==u;)p=p.Next;var E=Math.abs(this.GetDx(u.Pt,p.Pt));return Math.max(g,S)===Math.max(b,E)&&Math.min(g,S)===Math.min(b,E)?this.Area(a)>0:g>=b&&g>=E||S>=b&&S>=E},s.Clipper.prototype.GetBottomPt=function(a){for(var u=null,p=a.Next;p!==a;)p.Pt.Y>a.Pt.Y?(a=p,u=null):p.Pt.Y===a.Pt.Y&&p.Pt.X<=a.Pt.X&&(p.Pt.X<a.Pt.X?(u=null,a=p):p.Next!==a&&p.Prev!==a&&(u=p)),p=p.Next;if(u!==null)for(;u!==p;)for(this.FirstIsBottomPt(p,u)||(a=u),u=u.Next;s.IntPoint.op_Inequality(u.Pt,a.Pt);)u=u.Next;return a},s.Clipper.prototype.GetLowermostRec=function(a,u){a.BottomPt===null&&(a.BottomPt=this.GetBottomPt(a.Pts)),u.BottomPt===null&&(u.BottomPt=this.GetBottomPt(u.Pts));var p=a.BottomPt,g=u.BottomPt;return p.Pt.Y>g.Pt.Y?a:p.Pt.Y<g.Pt.Y?u:p.Pt.X<g.Pt.X?a:p.Pt.X>g.Pt.X||p.Next===p?u:g.Next===g||this.FirstIsBottomPt(p,g)?a:u},s.Clipper.prototype.OutRec1RightOfOutRec2=function(a,u){do if(a=a.FirstLeft,a===u)return!0;while(a!==null);return!1},s.Clipper.prototype.GetOutRec=function(a){for(var u=this.m_PolyOuts[a];u!==this.m_PolyOuts[u.Idx];)u=this.m_PolyOuts[u.Idx];return u},s.Clipper.prototype.AppendPolygon=function(a,u){var p=this.m_PolyOuts[a.OutIdx],g=this.m_PolyOuts[u.OutIdx],S;this.OutRec1RightOfOutRec2(p,g)?S=g:this.OutRec1RightOfOutRec2(g,p)?S=p:S=this.GetLowermostRec(p,g);var b=p.Pts,E=b.Prev,T=g.Pts,k=T.Prev;a.Side===s.EdgeSide.esLeft?u.Side===s.EdgeSide.esLeft?(this.ReversePolyPtLinks(T),T.Next=b,b.Prev=T,E.Next=k,k.Prev=E,p.Pts=k):(k.Next=b,b.Prev=k,T.Prev=E,E.Next=T,p.Pts=T):u.Side===s.EdgeSide.esRight?(this.ReversePolyPtLinks(T),E.Next=k,k.Prev=E,T.Next=b,b.Prev=T):(E.Next=T,T.Prev=E,b.Prev=k,k.Next=b),p.BottomPt=null,S===g&&(g.FirstLeft!==p&&(p.FirstLeft=g.FirstLeft),p.IsHole=g.IsHole),g.Pts=null,g.BottomPt=null,g.FirstLeft=p;var Q=a.OutIdx,W=u.OutIdx;a.OutIdx=-1,u.OutIdx=-1;for(var R=this.m_ActiveEdges;R!==null;){if(R.OutIdx===W){R.OutIdx=Q,R.Side=a.Side;break}R=R.NextInAEL}g.Idx=p.Idx},s.Clipper.prototype.ReversePolyPtLinks=function(a){if(a!==null){var u,p;u=a;do p=u.Next,u.Next=u.Prev,u.Prev=p,u=p;while(u!==a)}},s.Clipper.SwapSides=function(a,u){var p=a.Side;a.Side=u.Side,u.Side=p},s.Clipper.SwapPolyIndexes=function(a,u){var p=a.OutIdx;a.OutIdx=u.OutIdx,u.OutIdx=p},s.Clipper.prototype.IntersectEdges=function(a,u,p){var g=a.OutIdx>=0,S=u.OutIdx>=0;if(s.use_xyz&&this.SetZ(p,a,u),s.use_lines&&(a.WindDelta===0||u.WindDelta===0)){if(a.WindDelta===0&&u.WindDelta===0)return;a.PolyTyp===u.PolyTyp&&a.WindDelta!==u.WindDelta&&this.m_ClipType===s.ClipType.ctUnion?a.WindDelta===0?S&&(this.AddOutPt(a,p),g&&(a.OutIdx=-1)):g&&(this.AddOutPt(u,p),S&&(u.OutIdx=-1)):a.PolyTyp!==u.PolyTyp&&(a.WindDelta===0&&Math.abs(u.WindCnt)===1&&(this.m_ClipType!==s.ClipType.ctUnion||u.WindCnt2===0)?(this.AddOutPt(a,p),g&&(a.OutIdx=-1)):u.WindDelta===0&&Math.abs(a.WindCnt)===1&&(this.m_ClipType!==s.ClipType.ctUnion||a.WindCnt2===0)&&(this.AddOutPt(u,p),S&&(u.OutIdx=-1)));return}if(a.PolyTyp===u.PolyTyp)if(this.IsEvenOddFillType(a)){var b=a.WindCnt;a.WindCnt=u.WindCnt,u.WindCnt=b}else a.WindCnt+u.WindDelta===0?a.WindCnt=-a.WindCnt:a.WindCnt+=u.WindDelta,u.WindCnt-a.WindDelta===0?u.WindCnt=-u.WindCnt:u.WindCnt-=a.WindDelta;else this.IsEvenOddFillType(u)?a.WindCnt2=a.WindCnt2===0?1:0:a.WindCnt2+=u.WindDelta,this.IsEvenOddFillType(a)?u.WindCnt2=u.WindCnt2===0?1:0:u.WindCnt2-=a.WindDelta;var E,T,k,Q;a.PolyTyp===s.PolyType.ptSubject?(E=this.m_SubjFillType,k=this.m_ClipFillType):(E=this.m_ClipFillType,k=this.m_SubjFillType),u.PolyTyp===s.PolyType.ptSubject?(T=this.m_SubjFillType,Q=this.m_ClipFillType):(T=this.m_ClipFillType,Q=this.m_SubjFillType);var W,R;switch(E){case s.PolyFillType.pftPositive:W=a.WindCnt;break;case s.PolyFillType.pftNegative:W=-a.WindCnt;break;default:W=Math.abs(a.WindCnt);break}switch(T){case s.PolyFillType.pftPositive:R=u.WindCnt;break;case s.PolyFillType.pftNegative:R=-u.WindCnt;break;default:R=Math.abs(u.WindCnt);break}if(g&&S)W!==0&&W!==1||R!==0&&R!==1||a.PolyTyp!==u.PolyTyp&&this.m_ClipType!==s.ClipType.ctXor?this.AddLocalMaxPoly(a,u,p):(this.AddOutPt(a,p),this.AddOutPt(u,p),s.Clipper.SwapSides(a,u),s.Clipper.SwapPolyIndexes(a,u));else if(g)(R===0||R===1)&&(this.AddOutPt(a,p),s.Clipper.SwapSides(a,u),s.Clipper.SwapPolyIndexes(a,u));else if(S)(W===0||W===1)&&(this.AddOutPt(u,p),s.Clipper.SwapSides(a,u),s.Clipper.SwapPolyIndexes(a,u));else if((W===0||W===1)&&(R===0||R===1)){var V,nt;switch(k){case s.PolyFillType.pftPositive:V=a.WindCnt2;break;case s.PolyFillType.pftNegative:V=-a.WindCnt2;break;default:V=Math.abs(a.WindCnt2);break}switch(Q){case s.PolyFillType.pftPositive:nt=u.WindCnt2;break;case s.PolyFillType.pftNegative:nt=-u.WindCnt2;break;default:nt=Math.abs(u.WindCnt2);break}if(a.PolyTyp!==u.PolyTyp)this.AddLocalMinPoly(a,u,p);else if(W===1&&R===1)switch(this.m_ClipType){case s.ClipType.ctIntersection:V>0&&nt>0&&this.AddLocalMinPoly(a,u,p);break;case s.ClipType.ctUnion:V<=0&&nt<=0&&this.AddLocalMinPoly(a,u,p);break;case s.ClipType.ctDifference:(a.PolyTyp===s.PolyType.ptClip&&V>0&&nt>0||a.PolyTyp===s.PolyType.ptSubject&&V<=0&&nt<=0)&&this.AddLocalMinPoly(a,u,p);break;case s.ClipType.ctXor:this.AddLocalMinPoly(a,u,p);break}else s.Clipper.SwapSides(a,u)}},s.Clipper.prototype.DeleteFromSEL=function(a){var u=a.PrevInSEL,p=a.NextInSEL;u===null&&p===null&&a!==this.m_SortedEdges||(u!==null?u.NextInSEL=p:this.m_SortedEdges=p,p!==null&&(p.PrevInSEL=u),a.NextInSEL=null,a.PrevInSEL=null)},s.Clipper.prototype.ProcessHorizontals=function(){for(var a={};this.PopEdgeFromSEL(a);)this.ProcessHorizontal(a.v)},s.Clipper.prototype.GetHorzDirection=function(a,u){a.Bot.X<a.Top.X?(u.Left=a.Bot.X,u.Right=a.Top.X,u.Dir=s.Direction.dLeftToRight):(u.Left=a.Top.X,u.Right=a.Bot.X,u.Dir=s.Direction.dRightToLeft)},s.Clipper.prototype.ProcessHorizontal=function(a){var u={Dir:null,Left:null,Right:null};this.GetHorzDirection(a,u);for(var p=u.Dir,g=u.Left,S=u.Right,b=a.WindDelta===0,E=a,T=null;E.NextInLML!==null&&s.ClipperBase.IsHorizontal(E.NextInLML);)E=E.NextInLML;E.NextInLML===null&&(T=this.GetMaximaPair(E));var k=this.m_Maxima;if(k!==null)if(p===s.Direction.dLeftToRight){for(;k!==null&&k.X<=a.Bot.X;)k=k.Next;k!==null&&k.X>=E.Top.X&&(k=null)}else{for(;k.Next!==null&&k.Next.X<a.Bot.X;)k=k.Next;k.X<=E.Top.X&&(k=null)}for(var Q=null;;){for(var W=a===E,R=this.GetNextInAEL(a,p);R!==null;){if(k!==null)if(p===s.Direction.dLeftToRight)for(;k!==null&&k.X<R.Curr.X;)a.OutIdx>=0&&!b&&this.AddOutPt(a,new s.IntPoint2(k.X,a.Bot.Y)),k=k.Next;else for(;k!==null&&k.X>R.Curr.X;)a.OutIdx>=0&&!b&&this.AddOutPt(a,new s.IntPoint2(k.X,a.Bot.Y)),k=k.Prev;if(p===s.Direction.dLeftToRight&&R.Curr.X>S||p===s.Direction.dRightToLeft&&R.Curr.X<g||R.Curr.X===a.Top.X&&a.NextInLML!==null&&R.Dx<a.NextInLML.Dx)break;if(a.OutIdx>=0&&!b){s.use_xyz&&(p===s.Direction.dLeftToRight?this.SetZ(R.Curr,a,R):this.SetZ(R.Curr,R,a)),Q=this.AddOutPt(a,R.Curr);for(var V=this.m_SortedEdges;V!==null;){if(V.OutIdx>=0&&this.HorzSegmentsOverlap(a.Bot.X,a.Top.X,V.Bot.X,V.Top.X)){var nt=this.GetLastOutPt(V);this.AddJoin(nt,Q,V.Top)}V=V.NextInSEL}this.AddGhostJoin(Q,a.Bot)}if(R===T&&W){a.OutIdx>=0&&this.AddLocalMaxPoly(a,T,a.Top),this.DeleteFromAEL(a),this.DeleteFromAEL(T);return}if(p===s.Direction.dLeftToRight){var at=new s.IntPoint2(R.Curr.X,a.Curr.Y);this.IntersectEdges(a,R,at)}else{var at=new s.IntPoint2(R.Curr.X,a.Curr.Y);this.IntersectEdges(R,a,at)}var ht=this.GetNextInAEL(R,p);this.SwapPositionsInAEL(a,R),R=ht}if(a.NextInLML===null||!s.ClipperBase.IsHorizontal(a.NextInLML))break;a=this.UpdateEdgeIntoAEL(a),a.OutIdx>=0&&this.AddOutPt(a,a.Bot),u={Dir:p,Left:g,Right:S},this.GetHorzDirection(a,u),p=u.Dir,g=u.Left,S=u.Right}if(a.OutIdx>=0&&Q===null){Q=this.GetLastOutPt(a);for(var V=this.m_SortedEdges;V!==null;){if(V.OutIdx>=0&&this.HorzSegmentsOverlap(a.Bot.X,a.Top.X,V.Bot.X,V.Top.X)){var nt=this.GetLastOutPt(V);this.AddJoin(nt,Q,V.Top)}V=V.NextInSEL}this.AddGhostJoin(Q,a.Top)}if(a.NextInLML!==null)if(a.OutIdx>=0){if(Q=this.AddOutPt(a,a.Top),a=this.UpdateEdgeIntoAEL(a),a.WindDelta===0)return;var xt=a.PrevInAEL,ht=a.NextInAEL;if(xt!==null&&xt.Curr.X===a.Bot.X&&xt.Curr.Y===a.Bot.Y&&xt.WindDelta===0&&xt.OutIdx>=0&&xt.Curr.Y>xt.Top.Y&&s.ClipperBase.SlopesEqual3(a,xt,this.m_UseFullRange)){var nt=this.AddOutPt(xt,a.Bot);this.AddJoin(Q,nt,a.Top)}else if(ht!==null&&ht.Curr.X===a.Bot.X&&ht.Curr.Y===a.Bot.Y&&ht.WindDelta!==0&&ht.OutIdx>=0&&ht.Curr.Y>ht.Top.Y&&s.ClipperBase.SlopesEqual3(a,ht,this.m_UseFullRange)){var nt=this.AddOutPt(ht,a.Bot);this.AddJoin(Q,nt,a.Top)}}else a=this.UpdateEdgeIntoAEL(a);else a.OutIdx>=0&&this.AddOutPt(a,a.Top),this.DeleteFromAEL(a)},s.Clipper.prototype.GetNextInAEL=function(a,u){return u===s.Direction.dLeftToRight?a.NextInAEL:a.PrevInAEL},s.Clipper.prototype.IsMinima=function(a){return a!==null&&a.Prev.NextInLML!==a&&a.Next.NextInLML!==a},s.Clipper.prototype.IsMaxima=function(a,u){return a!==null&&a.Top.Y===u&&a.NextInLML===null},s.Clipper.prototype.IsIntermediate=function(a,u){return a.Top.Y===u&&a.NextInLML!==null},s.Clipper.prototype.GetMaximaPair=function(a){return s.IntPoint.op_Equality(a.Next.Top,a.Top)&&a.Next.NextInLML===null?a.Next:s.IntPoint.op_Equality(a.Prev.Top,a.Top)&&a.Prev.NextInLML===null?a.Prev:null},s.Clipper.prototype.GetMaximaPairEx=function(a){var u=this.GetMaximaPair(a);return u===null||u.OutIdx===s.ClipperBase.Skip||u.NextInAEL===u.PrevInAEL&&!s.ClipperBase.IsHorizontal(u)?null:u},s.Clipper.prototype.ProcessIntersections=function(a){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(a),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,s.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},s.Clipper.prototype.BuildIntersectList=function(a){if(this.m_ActiveEdges!==null){var u=this.m_ActiveEdges;for(this.m_SortedEdges=u;u!==null;)u.PrevInSEL=u.PrevInAEL,u.NextInSEL=u.NextInAEL,u.Curr.X=s.Clipper.TopX(u,a),u=u.NextInAEL;for(var p=!0;p&&this.m_SortedEdges!==null;){for(p=!1,u=this.m_SortedEdges;u.NextInSEL!==null;){var g=u.NextInSEL,S=new s.IntPoint0;if(u.Curr.X>g.Curr.X){this.IntersectPoint(u,g,S),S.Y<a&&(S=new s.IntPoint2(s.Clipper.TopX(u,a),a));var b=new s.IntersectNode;b.Edge1=u,b.Edge2=g,b.Pt.X=S.X,b.Pt.Y=S.Y,s.use_xyz&&(b.Pt.Z=S.Z),this.m_IntersectList.push(b),this.SwapPositionsInSEL(u,g),p=!0}else u=g}if(u.PrevInSEL!==null)u.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},s.Clipper.prototype.EdgesAdjacent=function(a){return a.Edge1.NextInSEL===a.Edge2||a.Edge1.PrevInSEL===a.Edge2},s.Clipper.IntersectNodeSort=function(a,u){return u.Pt.Y-a.Pt.Y},s.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var a=this.m_IntersectList.length,u=0;u<a;u++){if(!this.EdgesAdjacent(this.m_IntersectList[u])){for(var p=u+1;p<a&&!this.EdgesAdjacent(this.m_IntersectList[p]);)p++;if(p===a)return!1;var g=this.m_IntersectList[u];this.m_IntersectList[u]=this.m_IntersectList[p],this.m_IntersectList[p]=g}this.SwapPositionsInSEL(this.m_IntersectList[u].Edge1,this.m_IntersectList[u].Edge2)}return!0},s.Clipper.prototype.ProcessIntersectList=function(){for(var a=0,u=this.m_IntersectList.length;a<u;a++){var p=this.m_IntersectList[a];this.IntersectEdges(p.Edge1,p.Edge2,p.Pt),this.SwapPositionsInAEL(p.Edge1,p.Edge2)}this.m_IntersectList.length=0};var eC=function(a){return a<0?Math.ceil(a-.5):Math.round(a)},nC=function(a){return a<0?Math.ceil(a-.5):Math.floor(a+.5)},iC=function(a){return a<0?-Math.round(Math.abs(a)):Math.round(a)},rC=function(a){return a<0?(a-=.5,a<-2147483648?Math.ceil(a):a|0):(a+=.5,a>2147483647?Math.floor(a):a|0)};d.msie?s.Clipper.Round=eC:d.chromium?s.Clipper.Round=iC:d.safari?s.Clipper.Round=rC:s.Clipper.Round=nC,s.Clipper.TopX=function(a,u){return u===a.Top.Y?a.Top.X:a.Bot.X+s.Clipper.Round(a.Dx*(u-a.Bot.Y))},s.Clipper.prototype.IntersectPoint=function(a,u,p){p.X=0,p.Y=0;var g,S;if(a.Dx===u.Dx){p.Y=a.Curr.Y,p.X=s.Clipper.TopX(a,p.Y);return}if(a.Delta.X===0)p.X=a.Bot.X,s.ClipperBase.IsHorizontal(u)?p.Y=u.Bot.Y:(S=u.Bot.Y-u.Bot.X/u.Dx,p.Y=s.Clipper.Round(p.X/u.Dx+S));else if(u.Delta.X===0)p.X=u.Bot.X,s.ClipperBase.IsHorizontal(a)?p.Y=a.Bot.Y:(g=a.Bot.Y-a.Bot.X/a.Dx,p.Y=s.Clipper.Round(p.X/a.Dx+g));else{g=a.Bot.X-a.Bot.Y*a.Dx,S=u.Bot.X-u.Bot.Y*u.Dx;var b=(S-g)/(a.Dx-u.Dx);p.Y=s.Clipper.Round(b),Math.abs(a.Dx)<Math.abs(u.Dx)?p.X=s.Clipper.Round(a.Dx*b+g):p.X=s.Clipper.Round(u.Dx*b+S)}if(p.Y<a.Top.Y||p.Y<u.Top.Y){if(a.Top.Y>u.Top.Y)return p.Y=a.Top.Y,p.X=s.Clipper.TopX(u,a.Top.Y),p.X<a.Top.X;p.Y=u.Top.Y,Math.abs(a.Dx)<Math.abs(u.Dx)?p.X=s.Clipper.TopX(a,p.Y):p.X=s.Clipper.TopX(u,p.Y)}p.Y>a.Curr.Y&&(p.Y=a.Curr.Y,Math.abs(a.Dx)>Math.abs(u.Dx)?p.X=s.Clipper.TopX(u,p.Y):p.X=s.Clipper.TopX(a,p.Y))},s.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(a){for(var u=this.m_ActiveEdges;u!==null;){var p=this.IsMaxima(u,a);if(p){var g=this.GetMaximaPairEx(u);p=g===null||!s.ClipperBase.IsHorizontal(g)}if(p){this.StrictlySimple&&this.InsertMaxima(u.Top.X);var S=u.PrevInAEL;this.DoMaxima(u),S===null?u=this.m_ActiveEdges:u=S.NextInAEL}else{if(this.IsIntermediate(u,a)&&s.ClipperBase.IsHorizontal(u.NextInLML)?(u=this.UpdateEdgeIntoAEL(u),u.OutIdx>=0&&this.AddOutPt(u,u.Bot),this.AddEdgeToSEL(u)):(u.Curr.X=s.Clipper.TopX(u,a),u.Curr.Y=a),s.use_xyz&&(u.Top.Y===a?u.Curr.Z=u.Top.Z:u.Bot.Y===a?u.Curr.Z=u.Bot.Z:u.Curr.Z=0),this.StrictlySimple){var S=u.PrevInAEL;if(u.OutIdx>=0&&u.WindDelta!==0&&S!==null&&S.OutIdx>=0&&S.Curr.X===u.Curr.X&&S.WindDelta!==0){var b=new s.IntPoint1(u.Curr);s.use_xyz&&this.SetZ(b,S,u);var E=this.AddOutPt(S,b),T=this.AddOutPt(u,b);this.AddJoin(E,T,b)}}u=u.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,u=this.m_ActiveEdges;u!==null;){if(this.IsIntermediate(u,a)){var E=null;u.OutIdx>=0&&(E=this.AddOutPt(u,u.Top)),u=this.UpdateEdgeIntoAEL(u);var S=u.PrevInAEL,k=u.NextInAEL;if(S!==null&&S.Curr.X===u.Bot.X&&S.Curr.Y===u.Bot.Y&&E!==null&&S.OutIdx>=0&&S.Curr.Y===S.Top.Y&&s.ClipperBase.SlopesEqual5(u.Curr,u.Top,S.Curr,S.Top,this.m_UseFullRange)&&u.WindDelta!==0&&S.WindDelta!==0){var T=this.AddOutPt(ePrev2,u.Bot);this.AddJoin(E,T,u.Top)}else if(k!==null&&k.Curr.X===u.Bot.X&&k.Curr.Y===u.Bot.Y&&E!==null&&k.OutIdx>=0&&k.Curr.Y===k.Top.Y&&s.ClipperBase.SlopesEqual5(u.Curr,u.Top,k.Curr,k.Top,this.m_UseFullRange)&&u.WindDelta!==0&&k.WindDelta!==0){var T=this.AddOutPt(k,u.Bot);this.AddJoin(E,T,u.Top)}}u=u.NextInAEL}},s.Clipper.prototype.DoMaxima=function(a){var u=this.GetMaximaPairEx(a);if(u===null){a.OutIdx>=0&&this.AddOutPt(a,a.Top),this.DeleteFromAEL(a);return}for(var p=a.NextInAEL;p!==null&&p!==u;)this.IntersectEdges(a,p,a.Top),this.SwapPositionsInAEL(a,p),p=a.NextInAEL;a.OutIdx===-1&&u.OutIdx===-1?(this.DeleteFromAEL(a),this.DeleteFromAEL(u)):a.OutIdx>=0&&u.OutIdx>=0?(a.OutIdx>=0&&this.AddLocalMaxPoly(a,u,a.Top),this.DeleteFromAEL(a),this.DeleteFromAEL(u)):s.use_lines&&a.WindDelta===0?(a.OutIdx>=0&&(this.AddOutPt(a,a.Top),a.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(a),u.OutIdx>=0&&(this.AddOutPt(u,a.Top),u.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(u)):s.Error("DoMaxima error")},s.Clipper.ReversePaths=function(a){for(var u=0,p=a.length;u<p;u++)a[u].reverse()},s.Clipper.Orientation=function(a){return s.Clipper.Area(a)>=0},s.Clipper.prototype.PointCount=function(a){if(a===null)return 0;var u=0,p=a;do u++,p=p.Next;while(p!==a);return u},s.Clipper.prototype.BuildResult=function(a){s.Clear(a);for(var u=0,p=this.m_PolyOuts.length;u<p;u++){var g=this.m_PolyOuts[u];if(g.Pts!==null){var S=g.Pts.Prev,b=this.PointCount(S);if(!(b<2)){for(var E=new Array(b),T=0;T<b;T++)E[T]=S.Pt,S=S.Prev;a.push(E)}}}},s.Clipper.prototype.BuildResult2=function(a){a.Clear();for(var u=0,p=this.m_PolyOuts.length;u<p;u++){var g=this.m_PolyOuts[u],S=this.PointCount(g.Pts);if(!(g.IsOpen&&S<2||!g.IsOpen&&S<3)){this.FixHoleLinkage(g);var b=new s.PolyNode;a.m_AllPolys.push(b),g.PolyNode=b,b.m_polygon.length=S;for(var E=g.Pts.Prev,T=0;T<S;T++)b.m_polygon[T]=E.Pt,E=E.Prev}}for(var u=0,p=this.m_PolyOuts.length;u<p;u++){var g=this.m_PolyOuts[u];g.PolyNode!==null&&(g.IsOpen?(g.PolyNode.IsOpen=!0,a.AddChild(g.PolyNode)):g.FirstLeft!==null&&g.FirstLeft.PolyNode!==null?g.FirstLeft.PolyNode.AddChild(g.PolyNode):a.AddChild(g.PolyNode))}},s.Clipper.prototype.FixupOutPolyline=function(a){for(var u=a.Pts,p=u.Prev;u!==p;)if(u=u.Next,s.IntPoint.op_Equality(u.Pt,u.Prev.Pt)){u===p&&(p=u.Prev);var g=u.Prev;g.Next=u.Next,u.Next.Prev=g,u=g}u===u.Prev&&(a.Pts=null)},s.Clipper.prototype.FixupOutPolygon=function(a){var u=null;a.BottomPt=null;for(var p=a.Pts,g=this.PreserveCollinear||this.StrictlySimple;;){if(p.Prev===p||p.Prev===p.Next){a.Pts=null;return}if(s.IntPoint.op_Equality(p.Pt,p.Next.Pt)||s.IntPoint.op_Equality(p.Pt,p.Prev.Pt)||s.ClipperBase.SlopesEqual4(p.Prev.Pt,p.Pt,p.Next.Pt,this.m_UseFullRange)&&(!g||!this.Pt2IsBetweenPt1AndPt3(p.Prev.Pt,p.Pt,p.Next.Pt)))u=null,p.Prev.Next=p.Next,p.Next.Prev=p.Prev,p=p.Prev;else{if(p===u)break;u===null&&(u=p),p=p.Next}}a.Pts=p},s.Clipper.prototype.DupOutPt=function(a,u){var p=new s.OutPt;return p.Pt.X=a.Pt.X,p.Pt.Y=a.Pt.Y,s.use_xyz&&(p.Pt.Z=a.Pt.Z),p.Idx=a.Idx,u?(p.Next=a.Next,p.Prev=a,a.Next.Prev=p,a.Next=p):(p.Prev=a.Prev,p.Next=a,a.Prev.Next=p,a.Prev=p),p},s.Clipper.prototype.GetOverlap=function(a,u,p,g,S){return a<u?p<g?(S.Left=Math.max(a,p),S.Right=Math.min(u,g)):(S.Left=Math.max(a,g),S.Right=Math.min(u,p)):p<g?(S.Left=Math.max(u,p),S.Right=Math.min(a,g)):(S.Left=Math.max(u,g),S.Right=Math.min(a,p)),S.Left<S.Right},s.Clipper.prototype.JoinHorz=function(a,u,p,g,S,b){var E=a.Pt.X>u.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight,T=p.Pt.X>g.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight;if(E===T)return!1;if(E===s.Direction.dLeftToRight){for(;a.Next.Pt.X<=S.X&&a.Next.Pt.X>=a.Pt.X&&a.Next.Pt.Y===S.Y;)a=a.Next;b&&a.Pt.X!==S.X&&(a=a.Next),u=this.DupOutPt(a,!b),s.IntPoint.op_Inequality(u.Pt,S)&&(a=u,a.Pt.X=S.X,a.Pt.Y=S.Y,s.use_xyz&&(a.Pt.Z=S.Z),u=this.DupOutPt(a,!b))}else{for(;a.Next.Pt.X>=S.X&&a.Next.Pt.X<=a.Pt.X&&a.Next.Pt.Y===S.Y;)a=a.Next;!b&&a.Pt.X!==S.X&&(a=a.Next),u=this.DupOutPt(a,b),s.IntPoint.op_Inequality(u.Pt,S)&&(a=u,a.Pt.X=S.X,a.Pt.Y=S.Y,s.use_xyz&&(a.Pt.Z=S.Z),u=this.DupOutPt(a,b))}if(T===s.Direction.dLeftToRight){for(;p.Next.Pt.X<=S.X&&p.Next.Pt.X>=p.Pt.X&&p.Next.Pt.Y===S.Y;)p=p.Next;b&&p.Pt.X!==S.X&&(p=p.Next),g=this.DupOutPt(p,!b),s.IntPoint.op_Inequality(g.Pt,S)&&(p=g,p.Pt.X=S.X,p.Pt.Y=S.Y,s.use_xyz&&(p.Pt.Z=S.Z),g=this.DupOutPt(p,!b))}else{for(;p.Next.Pt.X>=S.X&&p.Next.Pt.X<=p.Pt.X&&p.Next.Pt.Y===S.Y;)p=p.Next;!b&&p.Pt.X!==S.X&&(p=p.Next),g=this.DupOutPt(p,b),s.IntPoint.op_Inequality(g.Pt,S)&&(p=g,p.Pt.X=S.X,p.Pt.Y=S.Y,s.use_xyz&&(p.Pt.Z=S.Z),g=this.DupOutPt(p,b))}return E===s.Direction.dLeftToRight===b?(a.Prev=p,p.Next=a,u.Next=g,g.Prev=u):(a.Next=p,p.Prev=a,u.Prev=g,g.Next=u),!0},s.Clipper.prototype.JoinPoints=function(a,u,p){var g=a.OutPt1,S=new s.OutPt,b=a.OutPt2,E=new s.OutPt,T=a.OutPt1.Pt.Y===a.OffPt.Y;if(T&&s.IntPoint.op_Equality(a.OffPt,a.OutPt1.Pt)&&s.IntPoint.op_Equality(a.OffPt,a.OutPt2.Pt)){if(u!==p)return!1;for(S=a.OutPt1.Next;S!==g&&s.IntPoint.op_Equality(S.Pt,a.OffPt);)S=S.Next;var k=S.Pt.Y>a.OffPt.Y;for(E=a.OutPt2.Next;E!==b&&s.IntPoint.op_Equality(E.Pt,a.OffPt);)E=E.Next;var Q=E.Pt.Y>a.OffPt.Y;return k===Q?!1:k?(S=this.DupOutPt(g,!1),E=this.DupOutPt(b,!0),g.Prev=b,b.Next=g,S.Next=E,E.Prev=S,a.OutPt1=g,a.OutPt2=S,!0):(S=this.DupOutPt(g,!0),E=this.DupOutPt(b,!1),g.Next=b,b.Prev=g,S.Prev=E,E.Next=S,a.OutPt1=g,a.OutPt2=S,!0)}else if(T){for(S=g;g.Prev.Pt.Y===g.Pt.Y&&g.Prev!==S&&g.Prev!==b;)g=g.Prev;for(;S.Next.Pt.Y===S.Pt.Y&&S.Next!==g&&S.Next!==b;)S=S.Next;if(S.Next===g||S.Next===b)return!1;for(E=b;b.Prev.Pt.Y===b.Pt.Y&&b.Prev!==E&&b.Prev!==S;)b=b.Prev;for(;E.Next.Pt.Y===E.Pt.Y&&E.Next!==b&&E.Next!==g;)E=E.Next;if(E.Next===b||E.Next===g)return!1;var W={Left:null,Right:null};if(!this.GetOverlap(g.Pt.X,S.Pt.X,b.Pt.X,E.Pt.X,W))return!1;var R=W.Left,V=W.Right,nt=new s.IntPoint0,at;return g.Pt.X>=R&&g.Pt.X<=V?(nt.X=g.Pt.X,nt.Y=g.Pt.Y,s.use_xyz&&(nt.Z=g.Pt.Z),at=g.Pt.X>S.Pt.X):b.Pt.X>=R&&b.Pt.X<=V?(nt.X=b.Pt.X,nt.Y=b.Pt.Y,s.use_xyz&&(nt.Z=b.Pt.Z),at=b.Pt.X>E.Pt.X):S.Pt.X>=R&&S.Pt.X<=V?(nt.X=S.Pt.X,nt.Y=S.Pt.Y,s.use_xyz&&(nt.Z=S.Pt.Z),at=S.Pt.X>g.Pt.X):(nt.X=E.Pt.X,nt.Y=E.Pt.Y,s.use_xyz&&(nt.Z=E.Pt.Z),at=E.Pt.X>b.Pt.X),a.OutPt1=g,a.OutPt2=b,this.JoinHorz(g,S,b,E,nt,at)}else{for(S=g.Next;s.IntPoint.op_Equality(S.Pt,g.Pt)&&S!==g;)S=S.Next;var ht=S.Pt.Y>g.Pt.Y||!s.ClipperBase.SlopesEqual4(g.Pt,S.Pt,a.OffPt,this.m_UseFullRange);if(ht){for(S=g.Prev;s.IntPoint.op_Equality(S.Pt,g.Pt)&&S!==g;)S=S.Prev;if(S.Pt.Y>g.Pt.Y||!s.ClipperBase.SlopesEqual4(g.Pt,S.Pt,a.OffPt,this.m_UseFullRange))return!1}for(E=b.Next;s.IntPoint.op_Equality(E.Pt,b.Pt)&&E!==b;)E=E.Next;var xt=E.Pt.Y>b.Pt.Y||!s.ClipperBase.SlopesEqual4(b.Pt,E.Pt,a.OffPt,this.m_UseFullRange);if(xt){for(E=b.Prev;s.IntPoint.op_Equality(E.Pt,b.Pt)&&E!==b;)E=E.Prev;if(E.Pt.Y>b.Pt.Y||!s.ClipperBase.SlopesEqual4(b.Pt,E.Pt,a.OffPt,this.m_UseFullRange))return!1}return S===g||E===b||S===E||u===p&&ht===xt?!1:ht?(S=this.DupOutPt(g,!1),E=this.DupOutPt(b,!0),g.Prev=b,b.Next=g,S.Next=E,E.Prev=S,a.OutPt1=g,a.OutPt2=S,!0):(S=this.DupOutPt(g,!0),E=this.DupOutPt(b,!1),g.Next=b,b.Prev=g,S.Prev=E,E.Next=S,a.OutPt1=g,a.OutPt2=S,!0)}},s.Clipper.GetBounds=function(a){for(var u=0,p=a.length;u<p&&a[u].length===0;)u++;if(u===p)return new s.IntRect(0,0,0,0);var g=new s.IntRect;for(g.left=a[u][0].X,g.right=g.left,g.top=a[u][0].Y,g.bottom=g.top;u<p;u++)for(var S=0,b=a[u].length;S<b;S++)a[u][S].X<g.left?g.left=a[u][S].X:a[u][S].X>g.right&&(g.right=a[u][S].X),a[u][S].Y<g.top?g.top=a[u][S].Y:a[u][S].Y>g.bottom&&(g.bottom=a[u][S].Y);return g},s.Clipper.prototype.GetBounds2=function(a){var u=a,p=new s.IntRect;for(p.left=a.Pt.X,p.right=a.Pt.X,p.top=a.Pt.Y,p.bottom=a.Pt.Y,a=a.Next;a!==u;)a.Pt.X<p.left&&(p.left=a.Pt.X),a.Pt.X>p.right&&(p.right=a.Pt.X),a.Pt.Y<p.top&&(p.top=a.Pt.Y),a.Pt.Y>p.bottom&&(p.bottom=a.Pt.Y),a=a.Next;return p},s.Clipper.PointInPolygon=function(a,u){var p=0,g=u.length;if(g<3)return 0;for(var S=u[0],b=1;b<=g;++b){var E=b===g?u[0]:u[b];if(E.Y===a.Y&&(E.X===a.X||S.Y===a.Y&&E.X>a.X==S.X<a.X))return-1;if(S.Y<a.Y!=E.Y<a.Y){if(S.X>=a.X)if(E.X>a.X)p=1-p;else{var T=(S.X-a.X)*(E.Y-a.Y)-(E.X-a.X)*(S.Y-a.Y);if(T===0)return-1;T>0==E.Y>S.Y&&(p=1-p)}else if(E.X>a.X){var T=(S.X-a.X)*(E.Y-a.Y)-(E.X-a.X)*(S.Y-a.Y);if(T===0)return-1;T>0==E.Y>S.Y&&(p=1-p)}}S=E}return p},s.Clipper.prototype.PointInPolygon=function(a,u){var p=0,g=u,S=a.X,b=a.Y,E=u.Pt.X,T=u.Pt.Y;do{u=u.Next;var k=u.Pt.X,Q=u.Pt.Y;if(Q===b&&(k===S||T===b&&k>S==E<S))return-1;if(T<b!=Q<b){if(E>=S)if(k>S)p=1-p;else{var W=(E-S)*(Q-b)-(k-S)*(T-b);if(W===0)return-1;W>0==Q>T&&(p=1-p)}else if(k>S){var W=(E-S)*(Q-b)-(k-S)*(T-b);if(W===0)return-1;W>0==Q>T&&(p=1-p)}}E=k,T=Q}while(g!==u);return p},s.Clipper.prototype.Poly2ContainsPoly1=function(a,u){var p=a;do{var g=this.PointInPolygon(p.Pt,u);if(g>=0)return g>0;p=p.Next}while(p!==a);return!0},s.Clipper.prototype.FixupFirstLefts1=function(a,u){for(var p,g,S=0,b=this.m_PolyOuts.length;S<b;S++)p=this.m_PolyOuts[S],g=s.Clipper.ParseFirstLeft(p.FirstLeft),p.Pts!==null&&g===a&&this.Poly2ContainsPoly1(p.Pts,u.Pts)&&(p.FirstLeft=u)},s.Clipper.prototype.FixupFirstLefts2=function(a,u){for(var p=u.FirstLeft,g,S,b=0,E=this.m_PolyOuts.length;b<E;b++)g=this.m_PolyOuts[b],!(g.Pts===null||g===u||g===a)&&(S=s.Clipper.ParseFirstLeft(g.FirstLeft),!(S!==p&&S!==a&&S!==u)&&(this.Poly2ContainsPoly1(g.Pts,a.Pts)?g.FirstLeft=a:this.Poly2ContainsPoly1(g.Pts,u.Pts)?g.FirstLeft=u:(g.FirstLeft===a||g.FirstLeft===u)&&(g.FirstLeft=p)))},s.Clipper.prototype.FixupFirstLefts3=function(a,u){for(var p,g,S=0,b=this.m_PolyOuts.length;S<b;S++)p=this.m_PolyOuts[S],g=s.Clipper.ParseFirstLeft(p.FirstLeft),p.Pts!==null&&g===a&&(p.FirstLeft=u)},s.Clipper.ParseFirstLeft=function(a){for(;a!==null&&a.Pts===null;)a=a.FirstLeft;return a},s.Clipper.prototype.JoinCommonEdges=function(){for(var a=0,u=this.m_Joins.length;a<u;a++){var p=this.m_Joins[a],g=this.GetOutRec(p.OutPt1.Idx),S=this.GetOutRec(p.OutPt2.Idx);if(!(g.Pts===null||S.Pts===null)&&!(g.IsOpen||S.IsOpen)){var b;g===S?b=g:this.OutRec1RightOfOutRec2(g,S)?b=S:this.OutRec1RightOfOutRec2(S,g)?b=g:b=this.GetLowermostRec(g,S),this.JoinPoints(p,g,S)&&(g===S?(g.Pts=p.OutPt1,g.BottomPt=null,S=this.CreateOutRec(),S.Pts=p.OutPt2,this.UpdateOutPtIdxs(S),this.Poly2ContainsPoly1(S.Pts,g.Pts)?(S.IsHole=!g.IsHole,S.FirstLeft=g,this.m_UsingPolyTree&&this.FixupFirstLefts2(S,g),(S.IsHole^this.ReverseSolution)==this.Area$1(S)>0&&this.ReversePolyPtLinks(S.Pts)):this.Poly2ContainsPoly1(g.Pts,S.Pts)?(S.IsHole=g.IsHole,g.IsHole=!S.IsHole,S.FirstLeft=g.FirstLeft,g.FirstLeft=S,this.m_UsingPolyTree&&this.FixupFirstLefts2(g,S),(g.IsHole^this.ReverseSolution)==this.Area$1(g)>0&&this.ReversePolyPtLinks(g.Pts)):(S.IsHole=g.IsHole,S.FirstLeft=g.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(g,S))):(S.Pts=null,S.BottomPt=null,S.Idx=g.Idx,g.IsHole=b.IsHole,b===S&&(g.FirstLeft=S.FirstLeft),S.FirstLeft=g,this.m_UsingPolyTree&&this.FixupFirstLefts3(S,g)))}}},s.Clipper.prototype.UpdateOutPtIdxs=function(a){var u=a.Pts;do u.Idx=a.Idx,u=u.Prev;while(u!==a.Pts)},s.Clipper.prototype.DoSimplePolygons=function(){for(var a=0;a<this.m_PolyOuts.length;){var u=this.m_PolyOuts[a++],p=u.Pts;if(!(p===null||u.IsOpen))do{for(var g=p.Next;g!==u.Pts;){if(s.IntPoint.op_Equality(p.Pt,g.Pt)&&g.Next!==p&&g.Prev!==p){var S=p.Prev,b=g.Prev;p.Prev=b,b.Next=p,g.Prev=S,S.Next=g,u.Pts=p;var E=this.CreateOutRec();E.Pts=g,this.UpdateOutPtIdxs(E),this.Poly2ContainsPoly1(E.Pts,u.Pts)?(E.IsHole=!u.IsHole,E.FirstLeft=u,this.m_UsingPolyTree&&this.FixupFirstLefts2(E,u)):this.Poly2ContainsPoly1(u.Pts,E.Pts)?(E.IsHole=u.IsHole,u.IsHole=!E.IsHole,E.FirstLeft=u.FirstLeft,u.FirstLeft=E,this.m_UsingPolyTree&&this.FixupFirstLefts2(u,E)):(E.IsHole=u.IsHole,E.FirstLeft=u.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(u,E)),g=p}g=g.Next}p=p.Next}while(p!==u.Pts)}},s.Clipper.Area=function(a){if(!Array.isArray(a))return 0;var u=a.length;if(u<3)return 0;for(var p=0,g=0,S=u-1;g<u;++g)p+=(a[S].X+a[g].X)*(a[S].Y-a[g].Y),S=g;return-p*.5},s.Clipper.prototype.Area=function(a){var u=a;if(a===null)return 0;var p=0;do p=p+(a.Prev.Pt.X+a.Pt.X)*(a.Prev.Pt.Y-a.Pt.Y),a=a.Next;while(a!==u);return p*.5},s.Clipper.prototype.Area$1=function(a){return this.Area(a.Pts)},s.Clipper.SimplifyPolygon=function(a,u){var p=new Array,g=new s.Clipper(0);return g.StrictlySimple=!0,g.AddPath(a,s.PolyType.ptSubject,!0),g.Execute(s.ClipType.ctUnion,p,u,u),p},s.Clipper.SimplifyPolygons=function(a,u){typeof u>"u"&&(u=s.PolyFillType.pftEvenOdd);var p=new Array,g=new s.Clipper(0);return g.StrictlySimple=!0,g.AddPaths(a,s.PolyType.ptSubject,!0),g.Execute(s.ClipType.ctUnion,p,u,u),p},s.Clipper.DistanceSqrd=function(a,u){var p=a.X-u.X,g=a.Y-u.Y;return p*p+g*g},s.Clipper.DistanceFromLineSqrd=function(a,u,p){var g=u.Y-p.Y,S=p.X-u.X,b=g*u.X+S*u.Y;return b=g*a.X+S*a.Y-b,b*b/(g*g+S*S)},s.Clipper.SlopesNearCollinear=function(a,u,p,g){return Math.abs(a.X-u.X)>Math.abs(a.Y-u.Y)?a.X>u.X==a.X<p.X?s.Clipper.DistanceFromLineSqrd(a,u,p)<g:u.X>a.X==u.X<p.X?s.Clipper.DistanceFromLineSqrd(u,a,p)<g:s.Clipper.DistanceFromLineSqrd(p,a,u)<g:a.Y>u.Y==a.Y<p.Y?s.Clipper.DistanceFromLineSqrd(a,u,p)<g:u.Y>a.Y==u.Y<p.Y?s.Clipper.DistanceFromLineSqrd(u,a,p)<g:s.Clipper.DistanceFromLineSqrd(p,a,u)<g},s.Clipper.PointsAreClose=function(a,u,p){var g=a.X-u.X,S=a.Y-u.Y;return g*g+S*S<=p},s.Clipper.ExcludeOp=function(a){var u=a.Prev;return u.Next=a.Next,a.Next.Prev=u,u.Idx=0,u},s.Clipper.CleanPolygon=function(a,u){typeof u>"u"&&(u=1.415);var p=a.length;if(p===0)return new Array;for(var g=new Array(p),S=0;S<p;++S)g[S]=new s.OutPt;for(var S=0;S<p;++S)g[S].Pt=a[S],g[S].Next=g[(S+1)%p],g[S].Next.Prev=g[S],g[S].Idx=0;for(var b=u*u,E=g[0];E.Idx===0&&E.Next!==E.Prev;)s.Clipper.PointsAreClose(E.Pt,E.Prev.Pt,b)?(E=s.Clipper.ExcludeOp(E),p--):s.Clipper.PointsAreClose(E.Prev.Pt,E.Next.Pt,b)?(s.Clipper.ExcludeOp(E.Next),E=s.Clipper.ExcludeOp(E),p-=2):s.Clipper.SlopesNearCollinear(E.Prev.Pt,E.Pt,E.Next.Pt,b)?(E=s.Clipper.ExcludeOp(E),p--):(E.Idx=1,E=E.Next);p<3&&(p=0);for(var T=new Array(p),S=0;S<p;++S)T[S]=new s.IntPoint1(E.Pt),E=E.Next;return g=null,T},s.Clipper.CleanPolygons=function(a,u){for(var p=new Array(a.length),g=0,S=a.length;g<S;g++)p[g]=s.Clipper.CleanPolygon(a[g],u);return p},s.Clipper.Minkowski=function(a,u,p,g){var S=g?1:0,b=a.length,E=u.length,T=new Array;if(p)for(var k=0;k<E;k++){for(var Q=new Array(b),W=0,R=a.length,V=a[W];W<R;W++,V=a[W])Q[W]=new s.IntPoint2(u[k].X+V.X,u[k].Y+V.Y);T.push(Q)}else for(var k=0;k<E;k++){for(var Q=new Array(b),W=0,R=a.length,V=a[W];W<R;W++,V=a[W])Q[W]=new s.IntPoint2(u[k].X-V.X,u[k].Y-V.Y);T.push(Q)}for(var nt=new Array,k=0;k<E-1+S;k++)for(var W=0;W<b;W++){var at=new Array;at.push(T[k%E][W%b]),at.push(T[(k+1)%E][W%b]),at.push(T[(k+1)%E][(W+1)%b]),at.push(T[k%E][(W+1)%b]),s.Clipper.Orientation(at)||at.reverse(),nt.push(at)}return nt},s.Clipper.MinkowskiSum=function(a,u,p){if(u[0]instanceof Array){for(var g=u,S=new s.Paths,b=new s.Clipper,E=0;E<g.length;++E){var T=s.Clipper.Minkowski(a,g[E],!0,p);if(b.AddPaths(T,s.PolyType.ptSubject,!0),p){var k=s.Clipper.TranslatePath(g[E],a[0]);b.AddPath(k,s.PolyType.ptClip,!0)}}return b.Execute(s.ClipType.ctUnion,S,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),S}else{var k=u,g=s.Clipper.Minkowski(a,k,!0,p),b=new s.Clipper;return b.AddPaths(g,s.PolyType.ptSubject,!0),b.Execute(s.ClipType.ctUnion,g,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),g}},s.Clipper.TranslatePath=function(a,u){for(var p=new s.Path,g=0;g<a.length;g++)p.push(new s.IntPoint2(a[g].X+u.X,a[g].Y+u.Y));return p},s.Clipper.MinkowskiDiff=function(a,u){var p=s.Clipper.Minkowski(a,u,!1,!0),g=new s.Clipper;return g.AddPaths(p,s.PolyType.ptSubject,!0),g.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),p},s.Clipper.PolyTreeToPaths=function(a){var u=new Array;return s.Clipper.AddPolyNodeToPaths(a,s.Clipper.NodeType.ntAny,u),u},s.Clipper.AddPolyNodeToPaths=function(a,u,p){var g=!0;switch(u){case s.Clipper.NodeType.ntOpen:return;case s.Clipper.NodeType.ntClosed:g=!a.IsOpen;break}a.m_polygon.length>0&&g&&p.push(a.m_polygon);for(var S=0,b=a.Childs(),E=b.length,T=b[S];S<E;S++,T=b[S])s.Clipper.AddPolyNodeToPaths(T,u,p)},s.Clipper.OpenPathsFromPolyTree=function(a){for(var u=new s.Paths,p=0,g=a.ChildCount();p<g;p++)a.Childs()[p].IsOpen&&u.push(a.Childs()[p].m_polygon);return u},s.Clipper.ClosedPathsFromPolyTree=function(a){var u=new s.Paths;return s.Clipper.AddPolyNodeToPaths(a,s.Clipper.NodeType.ntClosed,u),u},ff(s.Clipper,s.ClipperBase),s.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},s.ClipperOffset=function(a,u){typeof a>"u"&&(a=2),typeof u>"u"&&(u=s.ClipperOffset.def_arc_tolerance),this.m_destPolys=new s.Paths,this.m_srcPoly=new s.Path,this.m_destPoly=new s.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new s.IntPoint0,this.m_polyNodes=new s.PolyNode,this.MiterLimit=a,this.ArcTolerance=u,this.m_lowest.X=-1},s.ClipperOffset.two_pi=6.28318530717959,s.ClipperOffset.def_arc_tolerance=.25,s.ClipperOffset.prototype.Clear=function(){s.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},s.ClipperOffset.Round=s.Clipper.Round,s.ClipperOffset.prototype.AddPath=function(a,u,p){var g=a.length-1;if(!(g<0)){var S=new s.PolyNode;if(S.m_jointype=u,S.m_endtype=p,p===s.EndType.etClosedLine||p===s.EndType.etClosedPolygon)for(;g>0&&s.IntPoint.op_Equality(a[0],a[g]);)g--;S.m_polygon.push(a[0]);for(var b=0,E=0,T=1;T<=g;T++)s.IntPoint.op_Inequality(S.m_polygon[b],a[T])&&(b++,S.m_polygon.push(a[T]),(a[T].Y>S.m_polygon[E].Y||a[T].Y===S.m_polygon[E].Y&&a[T].X<S.m_polygon[E].X)&&(E=b));if(!(p===s.EndType.etClosedPolygon&&b<2)&&(this.m_polyNodes.AddChild(S),p===s.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,E);else{var k=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(S.m_polygon[E].Y>k.Y||S.m_polygon[E].Y===k.Y&&S.m_polygon[E].X<k.X)&&(this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,E))}}},s.ClipperOffset.prototype.AddPaths=function(a,u,p){for(var g=0,S=a.length;g<S;g++)this.AddPath(a[g],u,p)},s.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!s.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var a=0;a<this.m_polyNodes.ChildCount();a++){var u=this.m_polyNodes.Childs()[a];(u.m_endtype===s.EndType.etClosedPolygon||u.m_endtype===s.EndType.etClosedLine&&s.Clipper.Orientation(u.m_polygon))&&u.m_polygon.reverse()}else for(var a=0;a<this.m_polyNodes.ChildCount();a++){var u=this.m_polyNodes.Childs()[a];u.m_endtype===s.EndType.etClosedLine&&!s.Clipper.Orientation(u.m_polygon)&&u.m_polygon.reverse()}},s.ClipperOffset.GetUnitNormal=function(a,u){var p=u.X-a.X,g=u.Y-a.Y;if(p===0&&g===0)return new s.DoublePoint2(0,0);var S=1/Math.sqrt(p*p+g*g);return p*=S,g*=S,new s.DoublePoint2(g,-p)},s.ClipperOffset.prototype.DoOffset=function(a){if(this.m_destPolys=new Array,this.m_delta=a,s.ClipperBase.near_zero(a)){for(var u=0;u<this.m_polyNodes.ChildCount();u++){var p=this.m_polyNodes.Childs()[u];p.m_endtype===s.EndType.etClosedPolygon&&this.m_destPolys.push(p.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var g;this.ArcTolerance<=0?g=s.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(a)*s.ClipperOffset.def_arc_tolerance?g=Math.abs(a)*s.ClipperOffset.def_arc_tolerance:g=this.ArcTolerance;var S=3.14159265358979/Math.acos(1-g/Math.abs(a));this.m_sin=Math.sin(s.ClipperOffset.two_pi/S),this.m_cos=Math.cos(s.ClipperOffset.two_pi/S),this.m_StepsPerRad=S/s.ClipperOffset.two_pi,a<0&&(this.m_sin=-this.m_sin);for(var u=0;u<this.m_polyNodes.ChildCount();u++){var p=this.m_polyNodes.Childs()[u];this.m_srcPoly=p.m_polygon;var b=this.m_srcPoly.length;if(!(b===0||a<=0&&(b<3||p.m_endtype!==s.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,b===1){if(p.m_jointype===s.JoinType.jtRound)for(var E=1,T=0,k=1;k<=S;k++){this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+E*a),s.ClipperOffset.Round(this.m_srcPoly[0].Y+T*a)));var Q=E;E=E*this.m_cos-this.m_sin*T,T=Q*this.m_sin+T*this.m_cos}else for(var E=-1,T=-1,k=0;k<4;++k)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+E*a),s.ClipperOffset.Round(this.m_srcPoly[0].Y+T*a))),E<0?E=1:T<0?T=1:E=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var k=0;k<b-1;k++)this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[k],this.m_srcPoly[k+1]));if(p.m_endtype===s.EndType.etClosedLine||p.m_endtype===s.EndType.etClosedPolygon?this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[b-1],this.m_srcPoly[0])):this.m_normals.push(new s.DoublePoint1(this.m_normals[b-2])),p.m_endtype===s.EndType.etClosedPolygon){for(var W=b-1,k=0;k<b;k++)W=this.OffsetPoint(k,W,p.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(p.m_endtype===s.EndType.etClosedLine){for(var W=b-1,k=0;k<b;k++)W=this.OffsetPoint(k,W,p.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var R=this.m_normals[b-1],k=b-1;k>0;k--)this.m_normals[k]=new s.DoublePoint2(-this.m_normals[k-1].X,-this.m_normals[k-1].Y);this.m_normals[0]=new s.DoublePoint2(-R.X,-R.Y),W=0;for(var k=b-1;k>=0;k--)W=this.OffsetPoint(k,W,p.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var W=0,k=1;k<b-1;++k)W=this.OffsetPoint(k,W,p.m_jointype);var V;if(p.m_endtype===s.EndType.etOpenButt){var k=b-1;V=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[k].X+this.m_normals[k].X*a),s.ClipperOffset.Round(this.m_srcPoly[k].Y+this.m_normals[k].Y*a)),this.m_destPoly.push(V),V=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[k].X-this.m_normals[k].X*a),s.ClipperOffset.Round(this.m_srcPoly[k].Y-this.m_normals[k].Y*a)),this.m_destPoly.push(V)}else{var k=b-1;W=b-2,this.m_sinA=0,this.m_normals[k]=new s.DoublePoint2(-this.m_normals[k].X,-this.m_normals[k].Y),p.m_endtype===s.EndType.etOpenSquare?this.DoSquare(k,W):this.DoRound(k,W)}for(var k=b-1;k>0;k--)this.m_normals[k]=new s.DoublePoint2(-this.m_normals[k-1].X,-this.m_normals[k-1].Y);this.m_normals[0]=new s.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),W=b-1;for(var k=W-1;k>0;--k)W=this.OffsetPoint(k,W,p.m_jointype);p.m_endtype===s.EndType.etOpenButt?(V=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*a),s.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*a)),this.m_destPoly.push(V),V=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*a),s.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*a)),this.m_destPoly.push(V)):(W=1,this.m_sinA=0,p.m_endtype===s.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},s.ClipperOffset.prototype.Execute=function(){var a=arguments,u=a[0]instanceof s.PolyTree;if(u){var p=a[0],g=a[1];p.Clear(),this.FixOrientations(),this.DoOffset(g);var S=new s.Clipper(0);if(S.AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),g>0)S.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var b=s.Clipper.GetBounds(this.m_destPolys),E=new s.Path;if(E.push(new s.IntPoint2(b.left-10,b.bottom+10)),E.push(new s.IntPoint2(b.right+10,b.bottom+10)),E.push(new s.IntPoint2(b.right+10,b.top-10)),E.push(new s.IntPoint2(b.left-10,b.top-10)),S.AddPath(E,s.PolyType.ptSubject,!0),S.ReverseSolution=!0,S.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),p.ChildCount()===1&&p.Childs()[0].ChildCount()>0){var T=p.Childs()[0];p.Childs()[0]=T.Childs()[0],p.Childs()[0].m_Parent=p;for(var k=1;k<T.ChildCount();k++)p.AddChild(T.Childs()[k])}else p.Clear()}}else{var p=a[0],g=a[1];s.Clear(p),this.FixOrientations(),this.DoOffset(g);var S=new s.Clipper(0);if(S.AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),g>0)S.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var b=s.Clipper.GetBounds(this.m_destPolys),E=new s.Path;E.push(new s.IntPoint2(b.left-10,b.bottom+10)),E.push(new s.IntPoint2(b.right+10,b.bottom+10)),E.push(new s.IntPoint2(b.right+10,b.top-10)),E.push(new s.IntPoint2(b.left-10,b.top-10)),S.AddPath(E,s.PolyType.ptSubject,!0),S.ReverseSolution=!0,S.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),p.length>0&&p.splice(0,1)}}},s.ClipperOffset.prototype.OffsetPoint=function(a,u,p){if(this.m_sinA=this.m_normals[u].X*this.m_normals[a].Y-this.m_normals[a].X*this.m_normals[u].Y,Math.abs(this.m_sinA*this.m_delta)<1){var g=this.m_normals[u].X*this.m_normals[a].X+this.m_normals[a].Y*this.m_normals[u].Y;if(g>0)return this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[u].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[u].Y*this.m_delta))),u}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[u].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[u].Y*this.m_delta))),this.m_destPoly.push(new s.IntPoint1(this.m_srcPoly[a])),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[a].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[a].Y*this.m_delta)));else switch(p){case s.JoinType.jtMiter:{var S=1+(this.m_normals[a].X*this.m_normals[u].X+this.m_normals[a].Y*this.m_normals[u].Y);S>=this.m_miterLim?this.DoMiter(a,u,S):this.DoSquare(a,u);break}case s.JoinType.jtSquare:this.DoSquare(a,u);break;case s.JoinType.jtRound:this.DoRound(a,u);break}return u=a,u},s.ClipperOffset.prototype.DoSquare=function(a,u){var p=Math.tan(Math.atan2(this.m_sinA,this.m_normals[u].X*this.m_normals[a].X+this.m_normals[u].Y*this.m_normals[a].Y)/4);this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_delta*(this.m_normals[u].X-this.m_normals[u].Y*p)),s.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_delta*(this.m_normals[u].Y+this.m_normals[u].X*p)))),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_delta*(this.m_normals[a].X+this.m_normals[a].Y*p)),s.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_delta*(this.m_normals[a].Y-this.m_normals[a].X*p))))},s.ClipperOffset.prototype.DoMiter=function(a,u,p){var g=this.m_delta/p;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+(this.m_normals[u].X+this.m_normals[a].X)*g),s.ClipperOffset.Round(this.m_srcPoly[a].Y+(this.m_normals[u].Y+this.m_normals[a].Y)*g)))},s.ClipperOffset.prototype.DoRound=function(a,u){for(var p=Math.atan2(this.m_sinA,this.m_normals[u].X*this.m_normals[a].X+this.m_normals[u].Y*this.m_normals[a].Y),g=Math.max(s.Cast_Int32(s.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(p))),1),S=this.m_normals[u].X,b=this.m_normals[u].Y,E,T=0;T<g;++T)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+S*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[a].Y+b*this.m_delta))),E=S,S=S*this.m_cos-this.m_sin*b,b=E*this.m_sin+b*this.m_cos;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[a].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[a].Y*this.m_delta)))},s.Error=function(a){try{throw new Error(a)}catch(u){alert(u.message)}},s.JS={},s.JS.AreaOfPolygon=function(a,u){return u||(u=1),s.Clipper.Area(a)/(u*u)},s.JS.AreaOfPolygons=function(a,u){u||(u=1);for(var p=0,g=0;g<a.length;g++)p+=s.Clipper.Area(a[g]);return p/(u*u)},s.JS.BoundsOfPath=function(a,u){return s.JS.BoundsOfPaths([a],u)},s.JS.BoundsOfPaths=function(a,u){u||(u=1);var p=s.Clipper.GetBounds(a);return p.left/=u,p.bottom/=u,p.right/=u,p.top/=u,p},s.JS.Clean=function(g,u){if(!(g instanceof Array))return[];var p=g[0]instanceof Array,g=s.JS.Clone(g);if(typeof u!="number"||u===null)return s.Error("Delta is not a number in Clean()."),g;if(g.length===0||g.length===1&&g[0].length===0||u<0)return g;p||(g=[g]);for(var S=g.length,b,E,T,k,Q,W,R,V=[],nt=0;nt<S;nt++)if(E=g[nt],b=E.length,b!==0){if(b<3){T=E,V.push(T);continue}for(T=E,k=u*u,Q=E[0],W=1,R=1;R<b;R++)(E[R].X-Q.X)*(E[R].X-Q.X)+(E[R].Y-Q.Y)*(E[R].Y-Q.Y)<=k||(T[W]=E[R],Q=E[R],W++);Q=E[W-1],(E[0].X-Q.X)*(E[0].X-Q.X)+(E[0].Y-Q.Y)*(E[0].Y-Q.Y)<=k&&W--,W<b&&T.splice(W,b-W),T.length&&V.push(T)}return!p&&V.length?V=V[0]:!p&&V.length===0?V=[]:p&&V.length===0&&(V=[[]]),V},s.JS.Clone=function(a){if(!(a instanceof Array))return[];if(a.length===0)return[];if(a.length===1&&a[0].length===0)return[[]];var u=a[0]instanceof Array;u||(a=[a]);var p=a.length,g,S,b,E,T=new Array(p);for(S=0;S<p;S++){for(g=a[S].length,E=new Array(g),b=0;b<g;b++)E[b]={X:a[S][b].X,Y:a[S][b].Y};T[S]=E}return u||(T=T[0]),T},s.JS.Lighten=function(a,u){if(!(a instanceof Array))return[];if(typeof u!="number"||u===null)return s.Error("Tolerance is not a number in Lighten()."),s.JS.Clone(a);if(a.length===0||a.length===1&&a[0].length===0||u<0)return s.JS.Clone(a);var p=a[0]instanceof Array;p||(a=[a]);var g,S,b,E,T,k,Q,W,R,V,nt,at,ht,xt,ge,nn,vi,sC=a.length,oC=u*u,Pi=[];for(g=0;g<sC;g++)if(b=a[g],k=b.length,k!==0){for(E=0;E<1e6;E++){for(T=[],k=b.length,b[k-1].X!==b[0].X||b[k-1].Y!==b[0].Y?(at=1,b.push({X:b[0].X,Y:b[0].Y}),k=b.length):at=0,nt=[],S=0;S<k-2;S++)Q=b[S],R=b[S+1],W=b[S+2],nn=Q.X,vi=Q.Y,ht=W.X-nn,xt=W.Y-vi,(ht!==0||xt!==0)&&(ge=((R.X-nn)*ht+(R.Y-vi)*xt)/(ht*ht+xt*xt),ge>1?(nn=W.X,vi=W.Y):ge>0&&(nn+=ht*ge,vi+=xt*ge)),ht=R.X-nn,xt=R.Y-vi,V=ht*ht+xt*xt,V<=oC&&(nt[S+1]=1,S++);for(T.push({X:b[0].X,Y:b[0].Y}),S=1;S<k-1;S++)nt[S]||T.push({X:b[S].X,Y:b[S].Y});if(T.push({X:b[k-1].X,Y:b[k-1].Y}),at&&b.pop(),nt.length)b=T;else break}k=T.length,T[k-1].X===T[0].X&&T[k-1].Y===T[0].Y&&T.pop(),T.length>2&&Pi.push(T)}return p||(Pi=Pi[0]),typeof Pi>"u"&&(Pi=[]),Pi},s.JS.PerimeterOfPath=function(a,u,p){if(typeof a>"u")return 0;var g=Math.sqrt,S=0,b,E,T=0,k=0,Q=0,W=0,R=a.length;if(R<2)return 0;for(u&&(a[R]=a[0],R++);--R;)b=a[R],T=b.X,k=b.Y,E=a[R-1],Q=E.X,W=E.Y,S+=g((T-Q)*(T-Q)+(k-W)*(k-W));return u&&a.pop(),S/p},s.JS.PerimeterOfPaths=function(a,u,p){p||(p=1);for(var g=0,S=0;S<a.length;S++)g+=s.JS.PerimeterOfPath(a[S],u,p);return g},s.JS.ScaleDownPath=function(a,u){var p,g;for(u||(u=1),p=a.length;p--;)g=a[p],g.X=g.X/u,g.Y=g.Y/u},s.JS.ScaleDownPaths=function(a,u){var p,g,S;for(u||(u=1),p=a.length;p--;)for(g=a[p].length;g--;)S=a[p][g],S.X=S.X/u,S.Y=S.Y/u},s.JS.ScaleUpPath=function(a,u){var p,g,S=Math.round;for(u||(u=1),p=a.length;p--;)g=a[p],g.X=S(g.X*u),g.Y=S(g.Y*u)},s.JS.ScaleUpPaths=function(a,u){var p,g,S,b=Math.round;for(u||(u=1),p=a.length;p--;)for(g=a[p].length;g--;)S=a[p][g],S.X=b(S.X*u),S.Y=b(S.Y*u)},s.ExPolygons=function(){return[]},s.ExPolygon=function(){this.outer=null,this.holes=null},s.JS.AddOuterPolyNodeToExPolygons=function(a,u){var p=new s.ExPolygon;p.outer=a.Contour();var g=a.Childs(),S=g.length;p.holes=new Array(S);var b,E,T,k,Q,W;for(T=0;T<S;T++)for(b=g[T],p.holes[T]=b.Contour(),k=0,Q=b.Childs(),W=Q.length;k<W;k++)E=Q[k],s.JS.AddOuterPolyNodeToExPolygons(E,u);u.push(p)},s.JS.ExPolygonsToPaths=function(a){var u,p,g,S,b=new s.Paths;for(u=0,g=a.length;u<g;u++)for(b.push(a[u].outer),p=0,S=a[u].holes.length;p<S;p++)b.push(a[u].holes[p]);return b},s.JS.PolyTreeToExPolygons=function(a){var u=new s.ExPolygons,p,g,S,b;for(g=0,S=a.Childs(),b=S.length;g<b;g++)p=S[g],s.JS.AddOuterPolyNodeToExPolygons(p,u);return u}})()}),e("default",n),e("__esModule",!0)}}}),pr.register("-/clipper-js@v1.0.2-Mou0diNPTgyilhisGDlW/dist=es2020/clipper-js",["-/clipper-lib@v6.4.2-JisZmmhC7gDAFmHQLYDu/dist=es2020/clipper-lib"],function(e,t){var n,i,r;t&&t.id;function o(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}function s(h,c,d){return d={path:c,exports:{},require:function(f,m){return l(f,m==null?d.path:m)}},h(d,d.exports),d.exports}function l(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}return{setters:[function(h){n=h}],execute:function(){i=s(function(h,c){Object.defineProperty(c,"__esModule",{value:!0}),c.setErrorCallback=void 0;var d=function(){function B(L,M){for(var U=0;U<M.length;U++){var K=M[U];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(L,K.key,K)}}return function(L,M,U){return M&&B(L.prototype,M),U&&B(L,U),L}}(),f=m(n.default);function m(B){return B&&B.__esModule?B:{default:B}}function v(B){if(Array.isArray(B)){for(var L=0,M=Array(B.length);L<B.length;L++)M[L]=B[L];return M}else return Array.from(B)}function C(B,L){if(!(B instanceof L))throw new TypeError("Cannot call a class as a function")}var O=void 0;c.setErrorCallback=function(B){O=B},f.default.Error=function(B){O&&O(B)};var y=new f.default.Clipper,P=new f.default.ClipperOffset,w=function(){function B(){var L=arguments.length<=0||arguments[0]===void 0?[]:arguments[0],M=arguments.length<=1||arguments[1]===void 0?!0:arguments[1],U=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],K=arguments.length<=3||arguments[3]===void 0?!1:arguments[3],st=arguments.length<=4||arguments[4]===void 0?!1:arguments[4];C(this,B),this.paths=L,U&&(this.paths=this.paths.map(_)),K&&(this.paths=this.paths.map(F)),st&&(this.paths=this.paths.map(j)),this.closed=M}return d(B,[{key:"_clip",value:function(L,M){var U=new f.default.PolyTree;y.Clear(),y.AddPaths(this.paths,f.default.PolyType.ptSubject,this.closed),y.AddPaths(L.paths,f.default.PolyType.ptClip,L.closed),y.Execute(M,U);var K=f.default.Clipper.PolyTreeToPaths(U);return new B(K,this.closed)}},{key:"union",value:function(L){return this._clip(L,f.default.ClipType.ctUnion)}},{key:"difference",value:function(L){return this._clip(L,f.default.ClipType.ctDifference)}},{key:"intersect",value:function(L){return this._clip(L,f.default.ClipType.ctIntersection)}},{key:"xor",value:function(L){return this._clip(L,f.default.ClipType.ctXor)}},{key:"offset",value:function(L){var M=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],U=M.jointType,K=U===void 0?"jtSquare":U,st=M.endType,lt=st===void 0?"etClosedPolygon":st,pt=M.miterLimit,mt=pt===void 0?2:pt,dt=M.roundPrecision,bt=dt===void 0?.25:dt;P.Clear(),P.ArcTolerance=bt,P.MiterLimit=mt;var wt=new f.default.Paths;return P.AddPaths(this.paths,f.default.JoinType[K],f.default.EndType[lt]),P.Execute(wt,L),new B(wt,!0)}},{key:"scaleUp",value:function(L){return f.default.JS.ScaleUpPaths(this.paths,L),this}},{key:"scaleDown",value:function(L){return f.default.JS.ScaleDownPaths(this.paths,L),this}},{key:"firstPoint",value:function(){var L=arguments.length<=0||arguments[0]===void 0?!1:arguments[0];if(this.paths.length!==0){var M=this.paths[0],U=M[0];return L?A(U):U}}},{key:"lastPoint",value:function(){var L=arguments.length<=0||arguments[0]===void 0?!1:arguments[0];if(this.paths.length!==0){var M=this.paths[this.paths.length-1],U=this.closed?M[0]:M[M.length-1];return L?A(U):U}}},{key:"areas",value:function(){var L=this,M=this.paths.map(function(U,K){return L.area(K)});return M}},{key:"area",value:function(L){var M=this.paths[L],U=f.default.Clipper.Area(M);return U}},{key:"totalArea",value:function(){return this.areas().reduce(function(L,M){return L+M},0)}},{key:"perimeter",value:function(L){var M=this.paths[L],U=f.default.JS.PerimeterOfPath(M,this.closed,1);return U}},{key:"perimeters",value:function(){var L=this;return this.paths.map(function(M){return f.default.JS.PerimeterOfPath(M,L.closed,1)})}},{key:"totalPerimeter",value:function(){var L=f.default.JS.PerimeterOfPaths(this.paths,this.closed);return L}},{key:"reverse",value:function(){return f.default.Clipper.ReversePaths(this.paths),this}},{key:"thresholdArea",value:function(L){for(var M=[].concat(v(this.paths)),U=0;U<M.length;U++){var K=M[U],st=Math.abs(f.default.Clipper.Area(shape));if(st<L){var lt=this.paths.indexOf(K);this.splice(lt,1)}}}},{key:"join",value:function(L){var M;return(M=this.paths).splice.apply(M,[this.paths.length,0].concat(v(L.paths))),this}},{key:"clone",value:function(){return new B(f.default.JS.Clone(this.paths),this.closed)}},{key:"shapeBounds",value:function(){var L=f.default.JS.BoundsOfPaths(this.paths);return L.width=L.right-L.left,L.height=L.bottom-L.top,L.size=L.width*L.height,L}},{key:"pathBounds",value:function(L){var M=this.paths[L],U=f.default.JS.BoundsOfPath(M);return U.width=U.right-U.left,U.height=U.bottom-U.top,U.size=U.width*U.height,U}},{key:"clean",value:function(L){return new B(f.default.Clipper.CleanPolygons(this.paths,L),this.closed)}},{key:"orientation",value:function(L){var M=this.paths[L];return f.default.Clipper.Orientation(M)}},{key:"pointInShape",value:function(L){var M=arguments.length<=1||arguments[1]===void 0?!1:arguments[1],U=arguments.length<=2||arguments[2]===void 0?!1:arguments[2];M&&(L=I(L)),U&&(L=q(L));for(var K=0;K<this.paths.length;K++){var st=this.pointInPath(K,L),lt=this.orientation(K);if(!st&&lt||st&&!lt)return!1}return!0}},{key:"pointInPath",value:function(L,M){var U=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],K=arguments.length<=3||arguments[3]===void 0?!1:arguments[3];U&&(M=I(M)),K&&(M=q(M));var st=this.paths[L],lt={X:Math.round(M.X),Y:Math.round(M.Y)};return f.default.Clipper.PointInPolygon(lt,st)>0}},{key:"fixOrientation",value:function(){return this.closed?(this.totalArea()<0&&this.reverse(),this):this}},{key:"removeOverlap",value:function(){console.warn("Shape.removeOverlap is being depricated, use Shape.simplify('pftNonZero') instead"),this.simplify("pftNonZero")}},{key:"simplify",value:function(L){if(this.closed){var M=f.default.Clipper.SimplifyPolygons(this.paths,f.default.PolyFillType[L]);return new B(M,!0)}else return this}},{key:"seperateShapes",value:function(){var L=this,M=[];if(this.closed)(function(){for(var dt=new WeakMap,bt=[],wt=[],Tt=0;Tt<L.paths.length;Tt++){var ie=L.paths[Tt],jt=L.orientation(Tt);if(jt){var Oe=L.area(Tt);dt.set(ie,Oe),bt.push(ie)}else wt.push(ie)}bt.sort(function(qn,Or){return dt.get(qn)-dt.get(Or)});var _e=!0,Ht=!1,Zt=void 0;try{for(var Ie=bt[Symbol.iterator](),Jt;!(_e=(Jt=Ie.next()).done);_e=!0){for(var Qe=Jt.value,we=[Qe],tn=L.paths.indexOf(Qe),It=[].concat(wt),le=0;le<It.length;le++){var Le=It[le],en=L.pointInPath(tn,Le[0]);if(en){we.push(Le);var mr=wt.indexOf(Le);wt.splice(mr,1)}}M.push(new B(we,!0))}}catch(qn){Ht=!0,Zt=qn}finally{try{!_e&&Ie.return&&Ie.return()}finally{if(Ht)throw Zt}}})();else{var U=!0,K=!1,st=void 0;try{for(var lt=this.paths[Symbol.iterator](),pt;!(U=(pt=lt.next()).done);U=!0){var mt=pt.value;M.push(new B([mt],!1))}}catch(dt){K=!0,st=dt}finally{try{!U&&lt.return&&lt.return()}finally{if(K)throw st}}}return M}},{key:"round",value:function(){return new B(this.paths.map(F),this.closed)}},{key:"removeDuplicates",value:function(){return new B(this.paths.map(j),this.closed)}},{key:"mapToLower",value:function(){return this.paths.map(D)}}]),B}();c.default=w;function D(B){return B.map(A)}function A(B){var L=B.X,M=B.Y;return{x:L,y:M}}function _(B){return B.map(I)}function I(B){var L=B.x,M=B.y;return{X:L,Y:M}}function F(B){return B.map(q)}function q(B){var L=B.X,M=B.Y;return{X:Math.round(L),Y:Math.round(M)}}function j(B){return B.filter(z)}function z(B,L,M){if(L===0)return!0;var U=M[L-1];return!(B.X===U.X&&B.Y===U.Y)}}),r=o(i),e("default",r),e("__esModule",!0)}}}),pr.register("clipper-js",["-/clipper-js@v1.0.2-Mou0diNPTgyilhisGDlW/dist=es2020/clipper-js"],function(e,t){t&&t.id;var n={default:!0};function i(r){var o={};for(var s in r)s!=="default"&&!n.hasOwnProperty(s)&&(o[s]=r[s]);e(o)}return{setters:[function(r){i(r),e({default:r.default})}],execute:function(){}}});const Td=Za("clipper-js"),sv=Td.default;Td.__esModule;const ov=(e,t)=>1e-8>Math.abs(e.x-t.x)+Math.abs(e.y-t.y);function kd(e,t,n={}){let{endType:i,jointType:r="jtRound",miterLimit:o=2,roundPrecision:s=.25}=n;if(!i){const f=e[0][0],m=e.at(-1).at(-1);i=ov(f,m)?"etClosedRound":"etOpenRound"}const{data:l,scale:h}=hv(e,t),c=new sv(l,!0).offset(t*h,{jointType:r,endType:i,miterLimit:o,roundPrecision:s}),d=uv(c,h);for(;e.length>d.length;)e.pop();return d.forEach((f,m)=>{e[m]=f}),e}const av=(e,t)=>{const n={};return n.X=Math.round(e.x*t),n.Y=Math.round(e.y*t),n},lv=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);function hv(e,t){const n=[],i=e.flat();for(let o=0;o<i.length-2;o+=1){const s=i[o],l=i[o+1],h=lv(s,l);Math.abs(h)!==0&&n.push(h)}const r=t!==0?(1/Math.min(...n,t)+1)*10:(1/Math.min(...n)+1)*10;return{data:e.map((o,s)=>o.map(l=>av(l,r))),scale:r}}function uv(e,t){return Object.values(e.paths).map(n=>(n=n.map(({X:i,Y:r})=>({x:i/t,y:r/t})),[...n,n[0]],[...n,n[0]]))}function dr(e,t,n){const i=d=>d.map(({x:f,y:m})=>({X:f,Y:m})),r=d=>d.map(({X:f,Y:m})=>({x:f,y:m})),o=e.map(i);t=t.map(i);const s=new x.Paths,l=new x.Clipper;l.AddPaths(o,x.PolyType.ptSubject,!0),l.AddPaths(t,x.PolyType.ptClip,!0);const h={intersection:x.ClipType.ctIntersection,union:x.ClipType.ctUnion,difference:x.ClipType.ctDifference,xor:x.ClipType.ctXor};l.Execute(h[n],s);const c=s.map(r);for(;e.length>c.length;)e.pop();return c.forEach((d,f)=>{e[f]=d,e[f].push({x:d[0].x,y:d[0].y})}),e}// @license
const Ys={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},_d=function(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()};_d.prototype={parseSegment:function(){var e=this._string[this._currentIndex],t=Ys[e]?Ys[e]:null;if(t===null){if(this._prevCommand===null||((e==="+"||e==="-"||e==="."||e>="0"&&e<="9")&&this._prevCommand!=="Z"?this._prevCommand==="M"?t="L":this._prevCommand==="m"?t="l":t=this._prevCommand:t=null,t===null))return null}else this._currentIndex+=1;this._prevCommand=t;var n=null,i=t.toUpperCase();return i==="H"||i==="V"?n=[this._parseNumber()]:i==="M"||i==="L"||i==="T"?n=[this._parseNumber(),this._parseNumber()]:i==="S"||i==="Q"?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:i==="C"?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:i==="A"?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:i==="Z"&&(this._skipOptionalSpaces(),n=[]),n===null||n.indexOf(null)>=0?null:{type:t,values:n}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var e=this._string[this._currentIndex];return Ys[e]?Ys[e]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return e==="M"||e==="m"},_isCurrentSpace:function(){var e=this._string[this._currentIndex];return e<=" "&&(e===" "||e===`
`||e==="	"||e==="\r"||e==="\f")},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string[this._currentIndex]!==","?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string[this._currentIndex]===","&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var e=0,t=0,n=1,i=0,r=1,o=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,r=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")&&this._string[this._currentIndex]!==".")return null;for(var l=this._currentIndex;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==l)for(var h=this._currentIndex-1,c=1;h>=l;)t+=c*(this._string[h]-"0"),h-=1,c*=10;if(this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="."){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)n*=10,i+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!==s&&this._currentIndex+1<this._endIndex&&(this._string[this._currentIndex]==="e"||this._string[this._currentIndex]==="E")&&this._string[this._currentIndex+1]!=="x"&&this._string[this._currentIndex+1]!=="m"){if(this._currentIndex+=1,this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,o=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)e*=10,e+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var d=t+i;return d*=r,e&&(d*=Math.pow(10,o*e)),s===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),d)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var e=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,t==="0")e=0;else if(t==="1")e=1;else return null;return this._skipOptionalSpacesOrDelimiter(),e}};const Id=function(e){if(!e||e.length===0)return[];var t=new _d(e),n=[];if(t.initialCommandIsMoveTo())for(;t.hasMoreData();){var i=t.parseSegment();if(i===null)break;n.push(i)}return n},mi=typeof Symbol<"u"?Symbol():"__cachedPathData",za=typeof Symbol<"u"?Symbol():"__cachedNormalizedPathData";var Qd=function(e,t,n,i,r,o,s,l,h,c){var d=function(Jt){return Math.PI*Jt/180},f=function(Jt,Qe,we){var tn=Jt*Math.cos(we)-Qe*Math.sin(we),It=Jt*Math.sin(we)+Qe*Math.cos(we);return{x:tn,y:It}},m=d(s),v=[],C,O,y,P;if(c)C=c[0],O=c[1],y=c[2],P=c[3];else{var w=f(e,t,-m);e=w.x,t=w.y;var D=f(n,i,-m);n=D.x,i=D.y;var A=(e-n)/2,_=(t-i)/2,I=A*A/(r*r)+_*_/(o*o);I>1&&(I=Math.sqrt(I),r=I*r,o=I*o);var F;l===h?F=-1:F=1;var q=r*r,j=o*o,z=q*j-q*_*_-j*A*A,B=q*_*_+j*A*A,L=F*Math.sqrt(Math.abs(z/B));y=L*r*_/o+(e+n)/2,P=L*-o*A/r+(t+i)/2,C=Math.asin(parseFloat(((t-P)/o).toFixed(9))),O=Math.asin(parseFloat(((i-P)/o).toFixed(9))),e<y&&(C=Math.PI-C),n<y&&(O=Math.PI-O),C<0&&(C=Math.PI*2+C),O<0&&(O=Math.PI*2+O),h&&C>O&&(C=C-Math.PI*2),!h&&O>C&&(O=O-Math.PI*2)}var M=O-C;if(Math.abs(M)>Math.PI*120/180){var U=O,K=n,st=i;h&&O>C?O=C+Math.PI*120/180*1:O=C+Math.PI*120/180*-1,n=y+r*Math.cos(O),i=P+o*Math.sin(O),v=Qd(n,i,K,st,r,o,s,0,h,[O,U,y,P])}M=O-C;var lt=Math.cos(C),pt=Math.sin(C),mt=Math.cos(O),dt=Math.sin(O),bt=Math.tan(M/4),wt=4/3*r*bt,Tt=4/3*o*bt,ie=[e,t],jt=[e+wt*pt,t-Tt*lt],Oe=[n+wt*dt,i-Tt*mt],_e=[n,i];if(jt[0]=2*ie[0]-jt[0],jt[1]=2*ie[1]-jt[1],c)return[jt,Oe,_e].concat(v);v=[jt,Oe,_e].concat(v);for(var Ht=[],Zt=0;Zt<v.length;Zt+=3){var r=f(v[Zt][0],v[Zt][1],m),o=f(v[Zt+1][0],v[Zt+1][1],m),Ie=f(v[Zt+2][0],v[Zt+2][1],m);Ht.push([r.x,r.y,o.x,o.y,Ie.x,Ie.y])}return Ht},Oi=function(e){return e.map(function(t){return{type:t.type,values:Array.prototype.slice.call(t.values)}})},cv=function(e){var t=[],n=null,i=null,r=null,o=null;return e.forEach(function(s){var l=s.type;if(l==="M"){var h=s.values[0],c=s.values[1];t.push({type:"M",values:[h,c]}),r=h,o=c,n=h,i=c}else if(l==="m"){var h=n+s.values[0],c=i+s.values[1];t.push({type:"M",values:[h,c]}),r=h,o=c,n=h,i=c}else if(l==="L"){var h=s.values[0],c=s.values[1];t.push({type:"L",values:[h,c]}),n=h,i=c}else if(l==="l"){var h=n+s.values[0],c=i+s.values[1];t.push({type:"L",values:[h,c]}),n=h,i=c}else if(l==="C"){var d=s.values[0],f=s.values[1],m=s.values[2],v=s.values[3],h=s.values[4],c=s.values[5];t.push({type:"C",values:[d,f,m,v,h,c]}),n=h,i=c}else if(l==="c"){var d=n+s.values[0],f=i+s.values[1],m=n+s.values[2],v=i+s.values[3],h=n+s.values[4],c=i+s.values[5];t.push({type:"C",values:[d,f,m,v,h,c]}),n=h,i=c}else if(l==="Q"){var d=s.values[0],f=s.values[1],h=s.values[2],c=s.values[3];t.push({type:"Q",values:[d,f,h,c]}),n=h,i=c}else if(l==="q"){var d=n+s.values[0],f=i+s.values[1],h=n+s.values[2],c=i+s.values[3];t.push({type:"Q",values:[d,f,h,c]}),n=h,i=c}else if(l==="A"){var h=s.values[5],c=s.values[6];t.push({type:"A",values:[s.values[0],s.values[1],s.values[2],s.values[3],s.values[4],h,c]}),n=h,i=c}else if(l==="a"){var h=n+s.values[5],c=i+s.values[6];t.push({type:"A",values:[s.values[0],s.values[1],s.values[2],s.values[3],s.values[4],h,c]}),n=h,i=c}else if(l==="H"){var h=s.values[0];t.push({type:"H",values:[h]}),n=h}else if(l==="h"){var h=n+s.values[0];t.push({type:"H",values:[h]}),n=h}else if(l==="V"){var c=s.values[0];t.push({type:"V",values:[c]}),i=c}else if(l==="v"){var c=i+s.values[0];t.push({type:"V",values:[c]}),i=c}else if(l==="S"){var m=s.values[0],v=s.values[1],h=s.values[2],c=s.values[3];t.push({type:"S",values:[m,v,h,c]}),n=h,i=c}else if(l==="s"){var m=n+s.values[0],v=i+s.values[1],h=n+s.values[2],c=i+s.values[3];t.push({type:"S",values:[m,v,h,c]}),n=h,i=c}else if(l==="T"){var h=s.values[0],c=s.values[1];t.push({type:"T",values:[h,c]}),n=h,i=c}else if(l==="t"){var h=n+s.values[0],c=i+s.values[1];t.push({type:"T",values:[h,c]}),n=h,i=c}else(l==="Z"||l==="z")&&(t.push({type:"Z",values:[]}),n=r,i=o)}),t},Ws=function(e){var t=[],n=null,i=null,r=null,o=null,s=null,l=null,h=null;return e.forEach(function(c){if(c.type==="M"){var d=c.values[0],f=c.values[1];t.push({type:"M",values:[d,f]}),l=d,h=f,o=d,s=f}else if(c.type==="C"){var m=c.values[0],v=c.values[1],C=c.values[2],O=c.values[3],d=c.values[4],f=c.values[5];t.push({type:"C",values:[m,v,C,O,d,f]}),i=C,r=O,o=d,s=f}else if(c.type==="L"){var d=c.values[0],f=c.values[1];t.push({type:"L",values:[d,f]}),o=d,s=f}else if(c.type==="H"){var d=c.values[0];t.push({type:"L",values:[d,s]}),o=d}else if(c.type==="V"){var f=c.values[0];t.push({type:"L",values:[o,f]}),s=f}else if(c.type==="S"){var C=c.values[0],O=c.values[1],d=c.values[2],f=c.values[3],y,P;n==="C"||n==="S"?(y=o+(o-i),P=s+(s-r)):(y=o,P=s),t.push({type:"C",values:[y,P,C,O,d,f]}),i=C,r=O,o=d,s=f}else if(c.type==="T"){var d=c.values[0],f=c.values[1],m,v;n==="Q"||n==="T"?(m=o+(o-i),v=s+(s-r)):(m=o,v=s);var y=o+2*(m-o)/3,P=s+2*(v-s)/3,w=d+2*(m-d)/3,D=f+2*(v-f)/3;t.push({type:"C",values:[y,P,w,D,d,f]}),i=m,r=v,o=d,s=f}else if(c.type==="Q"){var m=c.values[0],v=c.values[1],d=c.values[2],f=c.values[3],y=o+2*(m-o)/3,P=s+2*(v-s)/3,w=d+2*(m-d)/3,D=f+2*(v-f)/3;t.push({type:"C",values:[y,P,w,D,d,f]}),i=m,r=v,o=d,s=f}else if(c.type==="A"){var A=Math.abs(c.values[0]),_=Math.abs(c.values[1]),I=c.values[2],F=c.values[3],q=c.values[4],d=c.values[5],f=c.values[6];if(A===0||_===0)t.push({type:"C",values:[o,s,d,f,d,f]}),o=d,s=f;else if(o!==d||s!==f){var j=Qd(o,s,d,f,A,_,I,F,q);j.forEach(function(L){t.push({type:"C",values:L})}),o=d,s=f}}else c.type==="Z"&&(t.push(c),o=l,s=h);n=c.type}),t};const Bt=(e,t)=>t in e&&"baseVal"in e[t]?e[t].baseVal.value:+e.getAttribute(t),pv=function(e){if(e&&e.normalize){if(this[za])return Oi(this[za]);var t;this[mi]?t=Oi(this[mi]):(t=Id(this.getAttribute("d")||""),this[mi]=Oi(t));var n=Ws(cv(t));return this[za]=Oi(n),n}else{if(this[mi])return Oi(this[mi]);var t=Id(this.getAttribute("d")||"");return this[mi]=Oi(t),t}},dv=function(e){var t=Bt(this,"x"),n=Bt(this,"y"),i=Bt(this,"width"),r=Bt(this,"height"),o=this.hasAttribute("rx")?Bt(this,"rx"):Bt(this,"ry"),s=this.hasAttribute("ry")?Bt(this,"ry"):Bt(this,"rx");o>i/2&&(o=i/2),s>r/2&&(s=r/2);var l=[{type:"M",values:[t+o,n]},{type:"H",values:[t+i-o]},{type:"A",values:[o,s,0,0,1,t+i,n+s]},{type:"V",values:[n+r-s]},{type:"A",values:[o,s,0,0,1,t+i-o,n+r]},{type:"H",values:[t+o]},{type:"A",values:[o,s,0,0,1,t,n+r-s]},{type:"V",values:[n+s]},{type:"A",values:[o,s,0,0,1,t+o,n]},{type:"Z",values:[]}];return l=l.filter(function(h){return!(h.type==="A"&&(h.values[0]===0||h.values[1]===0))}),e&&e.normalize===!0&&(l=Ws(l)),l},fv=function(e){var t=Bt(this,"cx"),n=Bt(this,"cy"),i=Bt(this,"r"),r=[{type:"M",values:[t+i,n]},{type:"A",values:[i,i,0,0,1,t,n+i]},{type:"A",values:[i,i,0,0,1,t-i,n]},{type:"A",values:[i,i,0,0,1,t,n-i]},{type:"A",values:[i,i,0,0,1,t+i,n]},{type:"Z",values:[]}];return e&&e.normalize===!0&&(r=Ws(r)),r},mv=function(e){var t=Bt(this,"cx"),n=Bt(this,"cy"),i=Bt(this,"rx"),r=Bt(this,"ry"),o=[{type:"M",values:[t+i,n]},{type:"A",values:[i,r,0,0,1,t,n+r]},{type:"A",values:[i,r,0,0,1,t-i,n]},{type:"A",values:[i,r,0,0,1,t,n-r]},{type:"A",values:[i,r,0,0,1,t+i,n]},{type:"Z",values:[]}];return e&&e.normalize===!0&&(o=Ws(o)),o},Ov=function(){const e=Bt(this,"x1"),t=Bt(this,"x2"),n=Bt(this,"y1"),i=Bt(this,"y2");return[{type:"M",values:[e,n]},{type:"L",values:[t,i]}]},gv=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var n=this.points.getItem(t);e.push({type:t===0?"M":"L",values:[n.x,n.y]})}return e},yv=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var n=this.points.getItem(t);e.push({type:t===0?"M":"L",values:[n.x,n.y]})}return e.push({type:"Z",values:[]}),e},Ld={circle:fv,ellipse:mv,path:pv,polygon:yv,polyline:gv,line:Ov,rect:dv};function xv(e,t){const n=e.nodeName.toLowerCase();if(n in Ld)return Ld[n].call(e,t);throw new Error(`Unsupported SVG element type: '${n}'`)}function vv([e,t,n,i,r,o,s,l],h){const c=3*n-2*e-s,d=3*i-2*t-l,f=3*r-2*s-e,m=3*o-2*l-t;return Math.max(c*c,f*f)+Math.max(d*d,m*m)<=16*h*h}function Pv([e,t,n,i,r,o,s,l],h){h===void 0&&(h=.5);let c=1-h,d=c*e+h*n,f=c*t+h*i,m=c*n+h*r,v=c*i+h*o,C=c*r+h*s,O=c*o+h*l,y=c*d+h*m,P=c*f+h*v,w=c*m+h*C,D=c*v+h*O,A=c*y+h*w,_=c*P+h*D;return[[e,t,d,f,y,P,A,_],[A,_,w,D,C,O,s,l]]}function Sv(e,t,n=32){const i=1/n,r=[];function o(s,l,h){if(h-l>i&&!vv(s,t)){const c=Pv(s,.5),d=(l+h)/2;o(c[0],l,d),o(c[1],d,h)}else{const c=s[6]-s[0],d=s[7]-s[1];Math.sqrt(c*c+d*d)>0&&r.push(s)}}return o(e,0,1),r}function Cv(e,t={}){const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",e);const{maxError:i=.1}=t,r=[],o=([c,d])=>[c,d],s=xv(n,{normalize:!0});let l=null,h=null;for(const c of s)if(c.type==="M")l=o(c.values),h=l,r.push({points:[l]});else if(c.type==="L")l=o(c.values),r[r.length-1].points.push(l);else if(c.type==="C"){const[d,f,m,v,C,O]=c.values,[y,P]=l,[w,D]=o([d,f]),[A,_]=o([m,v]),[I,F]=o([C,O]),q=Sv([y,P,w,D,A,_,I,F],i);for(const j of q)r[r.length-1].points.push([j[6],j[7]]);l=[I,F]}else if(c.type==="A"){const[d,f,m,v,C,O,y]=c.values,P=m,w=C,D=v,{cos:A,sin:_,atan2:I,sqrt:F,sign:q,acos:j,abs:z,ceil:B}=Math,L=(l[0]-O)/2,M=(l[1]-y)/2,U=A(P)*L+_(P)*M,K=-_(P)*L+A(P)*M,st=U*U,lt=K*K,pt=st/(d*d)+lt/(f*f),mt=pt<=1?F(pt)*d:d,dt=pt<=1?F(pt)*f:f,bt=mt*mt,wt=dt*dt;let Tt=(bt*wt-bt*lt-wt*st)/(bt*lt+wt*st);if(z(Tt)<1e-4&&(Tt=0),Tt<0)throw new Error(`bad arc args ${Tt}`);const ie=(D===w?-1:1)*F(Tt),jt=ie*mt*K/dt,Oe=ie*-dt*U/mt,_e=A(P)*jt-_(P)*Oe+(l[0]+O)/2,Ht=_(P)*jt+A(P)*Oe+(l[1]+y)/2,Zt=(It,le,Le,en)=>I(It*en-le*Le,It*Le+le*en),Ie=Zt(1,0,(U-jt)/mt,(K-Oe)/dt),Jt=Zt((U-jt)/mt,(K-Oe)/dt,(-U-jt)/mt,(-K-Oe)/dt)%(Math.PI*2),Qe=w===0&&Jt>0?Jt-Math.PI*2:w===1&&Jt<0?Jt+Math.PI*2:Jt,we=i,tn=B(z(Qe)/j(1-we/mt));for(let It=1;It<=tn;It++){const le=Ie+Qe*It/tn,Le=A(P)*mt*A(le)-_(P)*dt*_(le)+_e,en=_(P)*mt*A(le)+A(P)*dt*_(le)+Ht;r[r.length-1].points.push([Le,en])}l=[O,y]}else if(c.type==="Z")h&&(l[0]!==h[0]||l[1]!==h[1])&&r[r.length-1].points.push(h);else throw Error(`Unexpected path command: "${c}"`);return r}const Xd=(e,t,n)=>({x:(1-e)*t.x+e*n.x,y:(1-e)*t.y+e*n.y}),$d=(e,t,n,...i)=>i.length>0?[Xd(e,t,n),...$d(e,n,...i)]:[Xd(e,t,n)],Nd=(e,t)=>t.length>1?Nd(e,$d(e,...t)):t[0],wv=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e;function bv(e,...t){t=t.map(wv),e.length<0&&(e=[[{x:0,y:0}]]),t=[e.at(-1).at(-1),...t];const n=[];for(let i=0;i<=1;i+=1/32){const r=Nd(i,t);n.push(r)}return n.forEach(i=>e.at(-1).push(i)),e}const Zn=(e,t,n={x:0,y:0})=>{t=Fd(t),n=Fd(n);const{x:i,y:r}=n,{x:o,y:s}=t,l=o-i,h=s-r;return Ev(e,c=>({x:c.x+l,y:c.y+h}))},Ev=(e,t)=>(e.forEach((n,i)=>{e[i]=n.map(t)}),e),Fd=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,js=e=>{let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.flat().forEach(o=>{t>o.x&&(t=o.x),n<o.x&&(n=o.x),i>o.y&&(i=o.y),r<o.y&&(r=o.y)}),{xMin:t,xMax:n,yMin:i,yMax:r}},zn=(e,t)=>{if(e.length===0&&e.push([{x:0,y:0}]),t==="start")return e[0][0];if(t==="end")return e.at(-1).at(-1);let{xMax:n,xMin:i,yMax:r,yMin:o}=js(e),s=(n+i)/2,l=(r+o)/2;if(t==="cc")return{x:s,y:l};if(t==="lb")return{x:i,y:o};if(t==="rt")return{x:n,y:r};if(t==="lc")return{x:i,y:l};if(t==="lt")return{x:i,y:r};if(t==="cb")return{x:s,y:o};if(t==="ct")return{x:s,y:r};if(t==="rb")return{x:n,y:o};if(t==="rc")return{x:n,y:l};throw'"'+t+'" is not an origin point. "right" or "left" come first then "bottom" or "top"'},qa=(e,t,n)=>(n||(n=zn(e,"cc")),n=Dv(n),Av(e,i=>{let r=t/180*Math.PI,o=i.x-n.x,s=i.y-n.y;return{x:o*Math.cos(r)-s*Math.sin(r)+n.x,y:s*Math.cos(r)+o*Math.sin(r)+n.y}})),Dv=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,Av=(e,t)=>(e.forEach((n,i)=>{e[i]=n.map(t)}),e),Rd=(e,t,n)=>{if(e.length===0&&e.push([{x:0,y:0}]),n===0)return e;const i=e.at(-1).at(-1),r=Tv(e)+t,o=Math.cos(Bd(r)),s=Math.sin(Bd(r)),l=i.x+n*o,h=i.y+n*s;return e.at(-1).push({x:l,y:h}),e};function Tv(e){const t=e.at(-1);if(t.length<2)return 0;const n=t.at(-1),i=t.at(-2),r=n.x-i.x,o=n.y-i.y;return Math.atan2(o,r)*180/Math.PI}const Bd=e=>e/180*Math.PI;function Md(e){const t=e.at(-1);if(t.length<2)return 0;const n=t.at(-1),i=t.at(-2),r=n.x-i.x,o=n.y-i.y;return Math.atan2(o,r)*180/Math.PI}const kv=(e,t,n)=>{if(t===0||n===0)return e;e.length===0&&e.push([{x:0,y:0}]);const i=32,r=[[]],o=t/180*Math.PI,s=e.at(-1).at(-1),l=Md(e),h=(f,m)=>m*Math.cos(f),c=(f,m)=>m*Math.sin(f);for(let f=0;f<=i;f++){const m=o/i*f,v=h(m,n),C=c(m,n);r[0].push({x:v,y:C})}Zn(r,s,r[0][0]),qa(r,l+(t<0?90:-90),r[0][0]),r[0].slice(1).forEach(f=>e.at(-1).push(f));const d=Md(e);return Rd(e,t+l-d,n/1e12),console.log("arc pts",r),e},Yd=(e,t,n)=>{n||(n=zn(e,"cc"));const{x:i,y:r}=Iv(n);typeof t=="number"&&(t=[t,t]);const[o,s]=t;return _v(e,l=>({x:(l.x-i)*o+i,y:(l.y-r)*s+r}))},_v=(e,t)=>(e.forEach((n,i)=>{e[i]=n.map(t)}),e),Iv=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,fr=(e,t)=>Ua(e,t)<1e-6,Ua=([e,t],[n,i])=>Math.sqrt((n-e)**2+(i-t)**2),Qv=(e,t)=>Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2),Zs=(e,t)=>{const n=Qv(e,t);return[(t[0]-e[0])/n,(t[1]-e[1])/n]},Lv=e=>{const t=Math.sqrt(e[0]**2+e[1]**2);return[e[0]/t,e[1]/t]},Xv=(e,t,n,i)=>{const r=Math.sin(i*(1-e))/Math.sin(i),o=Math.sin(i*e)/Math.sin(i);return[t[0]*r+n[0]*o,t[1]*r+n[1]*o]};function Wd(e){if(typeof e[0]!="string")return e;if(e[0]==="chamfer"){const[t,n,i]=e;return i}else if(e[0]==="fillet"){const[t,n,i]=e;return i}else{if(e[0]==="bezier")throw"Can't begin wire with bezier.";return null}}function $v(e){const t=[];let n=!1;return e.forEach(i=>{i[0]==="bezier"&&n===!0?t.at(-1).push(...i.slice(1)):(t.push(i),n=!1),i[0]==="bezier"&&(n=!0)}),t}function Ga(e){if(e.length===0)return[];e=$v(e);let t=Wd(e[0]);const n=[t];for(let i=1;i<e.length;i++){const r=e[i];let o=null,s=i+1,l=e[s];for(;l&&l[0]!=="bezier"&&(o=Wd(l),o===null);)s++,l=e[s];if(typeof r[0]!="string"){if(fr(r,t))continue;n.push(r),t=r}else if(r[0]==="chamfer"){const[h,c,d]=r;if(t&&o){if(fr(d,t)||fr(d,o))continue;const[f,m]=Array.isArray(c)?c:[c,c],v=Zs(d,t),C=[d[0]+v[0]*f,d[1]+v[1]*f],O=Zs(d,o),y=[d[0]+O[0]*m,d[1]+O[1]*m];n.push(C),n.push(y)}else throw"Chamfering requires previous and next points.";t=n.at(-1)}else if(r[0]==="fillet"){let[h,c,d]=r;if(c<0&&(c=1e-8),t&&o){if(fr(d,t)||fr(d,o))continue;const f=Zs(d,t),m=Zs(d,o),v=Math.acos(f[0]*m[0]+f[1]*m[1]);let C=c/Math.tan(v/2);const O=Ua(t,d),y=Ua(o,d);C=Math.min(O,y,C),c=Math.min(C*Math.tan(v/2),c);const P=[d[0]+f[0]*C,d[1]+f[1]*C],w=[d[0]+m[0]*C,d[1]+m[1]*C],D=[],A=Lv([f[0]+m[0],f[1]+m[1]]),_=Math.sqrt(C**2+c**2),I=[d[0]+A[0]*_,d[1]+A[1]*_],F=Math.PI-v,q=[P[0]-I[0],P[1]-I[1]],j=[w[0]-I[0],w[1]-I[1]];for(let z=1/20;z<1;z+=1/20){const[B,L]=Xv(z,q,j,F);let M=[I[0]+B,I[1]+L];D.push(M)}n.push(...D)}else throw"Filleting requires previous and next points.";t=n.at(-1)}else if(r[0]==="bezier"){const[h,...c]=r;if(t&&o){let d=Nv([t,...c,o]);d=d.slice(1,-1),d.length>0&&n.push(...d)}else throw"Beziers requires previous and next points.";t=n.at(-1)}}return[n.map(([i,r])=>({x:i,y:r}))]}const jd=(e,t,n)=>[(1-e)*t[0]+e*n[0],(1-e)*t[1]+e*n[1]],Zd=(e,t,n,...i)=>i.length>0?[jd(e,t,n),...Zd(e,n,...i)]:[jd(e,t,n)],zd=(e,t)=>t.length>1?zd(e,Zd(e,...t)):t[0];function Nv(e){const t=[];for(let n=0;n<=1;n+=1/64){const i=zd(n,e);t.push(i)}return t}function qd(){const[e,...t]=arguments;return t.reduce((n,i)=>dr(n,i,"union"),e)}function Fv(){const[e,...t]=arguments;return t.reduce((n,i)=>dr(n,i,"intersect"),e)}function Rv(){const[e,...t]=arguments;return t.reduce((n,i)=>dr(n,i,"difference"),e)}function Bv(){const[e,...t]=arguments;return t.reduce((n,i)=>dr(n,i,"xor"),e)}function Mv(e){if(e.length===0)throw new Error("Shape must have at least one pt.");const t=e.at(-1);if(t.length<2)return 0;const n=t.at(-1),i=t.at(-2),r=n.x-i.x,o=n.y-i.y;return Math.atan2(o,r)*180/Math.PI}const Yv=(e,[t,n])=>{e.length===0&&e.push([{x:0,y:0}]);const{x:i,y:r}=e.at(-1).at(-1);return e.at(-1).push({x:i+t,y:r+n}),e},Wv=e=>{if(e.length===0)throw new Error("Shape must have at least one pt.");const{x:t,y:n}=e[0][0];return e.at(-1).push({x:t,y:n}),e},jv=e=>{const t=e.flat();if(t.length===1)return t[0];if(t.length===2)return{x:(t[0].x+t[1].x)/2,y:(t[0].y+t[1].y)/2};var n=t[0],i=t[t.length-1];(n.x!=i.x||n.y!=i.y)&&t.push(n);for(var r=0,o=0,s=0,l=t.length,h,c,d,f=0,m=l-1;f<l;m=f++)h=t[f],c=t[m],d=h.x*c.y-c.x*h.y,r+=d,o+=(h.x+c.x)*d,s+=(h.y+c.y)*d;return d=r*3,{x:o/d,y:s/d}},Zv=e=>JSON.parse(JSON.stringify(e)),Ud=e=>{const{xMin:t,xMax:n}=js(e);return n-t},Gd=e=>{const{yMin:t,yMax:n}=js(e);return n-t},zv=e=>{const t=zn(e,"cc");return Zn([0,0],t)},qv=(e,t)=>(e.at(-1).push(t),e),Uv=e=>e.map(t=>t.reverse()).reverse(),Gv=e=>Ms(e,0,{endType:"etClosedPolygon"}),Vv=(e,t)=>Ms(e,t,{endType:"etClosedPolygon"}),Hv=(e,t)=>{const n=(s,l)=>1e-8>Math.abs(s.x-l.x)+Math.abs(s.y-l.y),i=e[0][0],r=e.at(-1).at(-1),o=n(i,r)?"etClosedLine":"etOpenButt";return Ms(e,t/2,{endType:o,jointType:"jtMiter"})},Jv=(e,t,n)=>{const i=Zv(e);for(let r=0;r<t;r++)e.push(...n(i));return e},hn=e=>{let t="";return e.forEach(n=>{const{x:i,y:r}=n[0];t+=`M ${i},${r}`,n.slice(1).forEach(o=>{const{x:s,y:l}=o;t+=`L ${s},${l}`})}),t};function Va(e,t){return Cv(t,{maxError:.001}).map(n=>n.points).forEach(n=>{e.push(n.map((i,r)=>({x:i[0],y:i[1]})))}),e}const Ha=(e,t)=>{const n={x:-e/2,y:t/2},i={x:e/2,y:t/2},r={x:e/2,y:-t/2},o={x:-e/2,y:-t/2};return[[n,i,r,o,n]]},gi=e=>{const t=[],n=(s,l)=>l*Math.cos(s),i=(s,l)=>l*Math.sin(s);for(let s=0;s<180;s++){const l=Math.PI*2/180*s,h=n(l,e),c=i(l,e);t.push({x:h,y:c})}const{x:r,y:o}=t[0];return t.push({x:r,y:o}),[t]},Kv=Object.freeze(Object.defineProperty({__proto__:null,turnForward:Rd,vec:Yv,close:Wv,translate:Zn,rotate:qa,scale:Yd,originate:zv,goTo:qv,reverse:Uv,thicken:Hv,copyPaste:Jv,offset:Ms,offset2:kd,outline:Gv,expand:Vv,intersect:Fv,difference:Rv,union:qd,xor:Bv,getAngle:Mv,extrema:js,getPoint:zn,centroid:jv,width:Ud,height:Gd,getPathData:hn,pathD:Va,arc:kv,rectangle:Ha,circle:gi,bezier:bv,path:Ga,boolean:dr},Symbol.toStringTag,{value:"Module"})),tP=([e,t,n],i)=>{const r=l=>be`
    <path
      class="path-footprint"
      d="${hn([l])}"
      fill-rule="nonzero"
      />
  `,[o,s]=i;return kn`
    <style>
      .path-footprint-dragged {
        fill: black;
      }
    </style>

    <svg 
      style="position: absolute; left: ${o}; top: ${s}; transform: translate(-50%, -50%) scale(1, -1);"
      width="50px"
      height="50px">
      ${n.map(r)}
    </svg>

  `},eP=e=>e.reduce((t,n,i)=>`${t} ${i===0?"M":"L"} ${n.join(",")}`,""),nP=(e,t)=>{e.lt.x,(e.lt.y+e.lb.y)/2,e.rt.x,(e.rt.y+e.rb.y)/2,(e.lt.x+e.rt.x)/2,e.lt.y,(e.lb.x+e.rb.x)/2,e.lb.y;const n=[[e.lt.x,0],[e.rt.x,0]],i=[[0,e.lt.y],[0,e.lb.y]],r=[e.lt.x,e.rt.x];Math.abs(r[1]-r[0]);const o=[e.lb.y,e.lt.y];Math.abs(o[1]-o[0]);const s=t,l=(v,C)=>{let O=[],y=C*Math.ceil(v[0]/C)-C;for(;y<v[1]+C;)y=y+C,O.push(y);return O},h=v=>[[e.lt.x,v],[e.rt.x,v]],c=v=>[[v,e.lt.y],[v,e.lb.y]],d=v=>C=>be`<path stroke="black" vector-effect="non-scaling-stroke" stroke-width="${v}" d="${eP(C)}"/>`,f=l(o,s).map(h).map(d(.2)),m=l(r,s).map(c).map(d(.2));return be`
        <g class="grid no-download">
            ${d(.6)(n)}
            ${d(.6)(i)}
            ${f}
            ${m}
        </g>
    `},iP=({data:e,color:t,groupId:n=""})=>{const i=parseInt(t.slice(-2),16)/255,r=h=>be`
    <path
        d="${h}"
        fill-rule="nonzero"
        fill="${t.slice(0,-2)}"
        fill-opacity=${i}/>
  `,o=h=>be`
    <text 
      text-anchor="middle" 
      x=${h.translate[0]} 
      y=${-h.translate[1]+h.size*.352778}
      transform=${"scale(1 -1)"}
      style=${`font: ${h.size}pt sans-serif;`}
      fill=${t.slice(0,-2)}
      opacity=${i}
      >
      ${h.value}
    </text>
  `,s=({data:h,thickness:c})=>be`
    <path
      d=${h}
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width=${c}
      fill-rule="nonzero"
      stroke="${t.slice(0,-2)}"
      fill="none"
      stroke-opacity=${i}/>
  `,l=[];return e.forEach(h=>{typeof h=="string"?h.split(/(?=M)/g).forEach(c=>{l.push(r(c))}):h.type==="text"?l.push(o(h)):h.type==="wire"&&l.push(s(h))}),be`
    <g id=${n}>
      ${l}
    </g>
  `},rP=({pt:e,start:t,end:n,text:i},r)=>be`
  <circle
    class="draggable-pt"
    cx=${e[0]}
    cy=${e[1]}
    r="0.015"
    data-index=${r}
    data-start=${t}
    data-end=${n}
    data-text=${i}></circle>
`,sP=({d:e,stroke:t,strokeWidth:n,fill:i})=>be`
  <path d=${e} stroke=${t} stroke-width=${n} fill=${i}></path>
`,oP=e=>{var t;const n=e.shapes.map(iP),i=e.paths.map(sP),r=e.pts.map(rP);return(t=e.panZoomParams)==null||t.corners(),be`
    <svg id="viewer" style="width: 100%; height: 100%; transform: scale(1, -1);">
      <g class="transform-group">
            ${e.selectBox.start&&e.selectBox.end?be`
              <path
                class="selectBox"
                d="
                  M ${e.selectBox.start.x} ${e.selectBox.start.y}
                  L ${e.selectBox.end.x} ${e.selectBox.start.y}
                  L ${e.selectBox.end.x} ${e.selectBox.end.y}
                  L ${e.selectBox.start.x} ${e.selectBox.end.y}
                "
              />`:""}

          <g class="shapes">${n}</g>
          <g class="paths">${i}</g>


        ${e.panZoomParams&&e.gridSize>0&&e.grid?nP(e.panZoomParams.corners(),e.gridSize):""}

        <rect
          class="limits no-download"
          width="${e.limits.x[1]-e.limits.x[0]}"
          height="${e.limits.y[1]-e.limits.y[0]}"
          stroke="black" fill="transparent" stroke-width="1"
          vector-effect="non-scaling-stroke"
          transform="translate(${e.limits.x[0]}, ${e.limits.y[0]})"/>
        <g class="pts no-download">${e.viewHandles?r:""}</g>
      </g>

    </svg>
  `},aP=([e,t,n],i)=>{const r=o=>be`
    <path
      class="path-footprint"
      data-index=${i}
      d="${hn([o])}"
      fill-rule="nonzero"
      />
  `;return kn`
    <style>
      .path-footprint {
        fill: black;
      }

      .footprint-svg:hover .path-footprint {
        fill: orange;
      }
    </style>
    <div class="footprint-item">
      <svg
        data-index=${i}
        class="footprint-svg footprint-${i}"
        width="50px"
        height="50px"
        transform="scale(1, -1)">
        ${n.map(r)}
      </svg>
      <span style="padding-left: 5px;">${e}</span>
    </div>
  `},Xt={codemirror:void 0,storedPCB:void 0,transforming:!1,transformUpdate:()=>{},selectBox:{},footprints:[],wires:[],shapes:[],limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4,grid:!0,gridSize:.05,viewHandles:!0,selectedPath:null,panZoomParams:void 0,previewFootprint:null,paths:[],pts:[],name:"",error:""};window.getState=()=>Xt;function lP(){Xt.selectedPath=null,Xt.codemirror.view.state.selection.ranges,Xt.codemirror.view.dispatch({selection:{anchor:0}}),ct("RENDER")}function hP(e){return kn`
		${uP(e)}

		<div class="content">
			<div class="left-side">
				<codemirror-2 class="code-editor"></codemirror-2>
				${e.error!==""?kn`<div class="error-log">${e.error}</div>`:""}
			</div>
			<div class="right-side">
				${oP(e)}
				${e.selectedPath!==null?kn`<div class="path-selected" @click=${lP}>Clear Selected Path</div>`:""}
				<div class="footprint-toolbox">${e.footprints.map(aP)}</div>
				${e.previewFootprint?tP(...e.previewFootprint):""}
			</div>
			<div id="vertical-bar"></div>
		</div>
	`}const uP=e=>kn`
	<div class="top-menu">
		<img src="/logo.svg" class="logo" alt="fab-circuit-logo" />
		<div class="left">
			<div
				class="menu-item"
				@click=${()=>ct("RUN")}>
				run (shift + enter)
			</div>
			<div class="menu-item" @click=${()=>ct("NEW_FILE")}>new</div>
			<div class="menu-item dropdown-container">
			 	import
			 	<div class="dropdown-content">
			 		${Kx(Ux)}
			 	</div>
			 </div>
			 <div class="menu-item dropdown-container">
				download
				<div class="dropdown-content">
					<div class="menu-item"
						@click=${()=>{ct("RUN",{flatten:!0}),Gx(e)}}>
						svg
					</div class="menu-item">
					<div class="menu-item"
						@click=${()=>{ct("RUN",{flatten:!0}),Hx(e)}}>
						png
					</div class="menu-item">
					<div class="menu-item"
						@click=${()=>Vx(`${e.name===""?"anon":e.name}.js`,e.codemirror.view.state.doc.toString())}>
						js
					</div class="menu-item">
					<input 
						.value=${e.name} 
						placeholder="name-here"
						@input=${t=>{e.name=t.target.value}}/>
				</div>
			</div>
			<div class="menu-item dropdown-container">
				drawing
				<div class="dropdown-content">
					<button
						class="center-button"
						@click=${()=>{e.panZoomParams.setScaleXY(e.limits)}}>
						center
					</button>
					<div>
						<span>handles</span>
						<input
							type="checkbox"
							checked=${e.viewHandles}
							@change=${t=>{e.viewHandles=t.target.checked,ct("RENDER")}}
							class="handles-checkbox">
						</input>
					</div>
					<div>
						<span>grid</span>
						<input
							type="checkbox"
							.checked=${e.grid}
							@change=${t=>{e.grid=t.target.checked,ct("RENDER")}}
							>
						</input>
					</div>
					<div>
						<span>grid size:</span>
						<input
							type="number"
							step="0.005"
							min="0"
							value=${e.gridSize}
							@change=${t=>{e.gridSize=Number(t.target.value),ct("RENDER")}}>
						</input>
					</div>
				</div>
			</div>
		</div>
	</div>
`;var cP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dn={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(cP,function(){return function(n){var i={};function r(o){if(i[o])return i[o].exports;var s=i[o]={exports:{},id:o,loaded:!1};return n[o].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}return r.m=n,r.c=i,r.p="",r(0)}([function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(1),s=r(3),l=r(8),h=r(15);function c(C,O,y){var P=null,w=function(z,B){y&&y(z,B),P&&P.visit(z,B)},D=typeof y=="function"?w:null,A=!1;if(O){A=typeof O.comment=="boolean"&&O.comment;var _=typeof O.attachComment=="boolean"&&O.attachComment;(A||_)&&(P=new o.CommentHandler,P.attach=_,O.comment=!0,D=w)}var I=!1;O&&typeof O.sourceType=="string"&&(I=O.sourceType==="module");var F;O&&typeof O.jsx=="boolean"&&O.jsx?F=new s.JSXParser(C,O,D):F=new l.Parser(C,O,D);var q=I?F.parseModule():F.parseScript(),j=q;return A&&P&&(j.comments=P.comments),F.config.tokens&&(j.tokens=F.tokens),F.config.tolerant&&(j.errors=F.errorHandler.errors),j}i.parse=c;function d(C,O,y){var P=O||{};return P.sourceType="module",c(C,P,y)}i.parseModule=d;function f(C,O,y){var P=O||{};return P.sourceType="script",c(C,P,y)}i.parseScript=f;function m(C,O,y){var P=new h.Tokenizer(C,O),w;w=[];try{for(;;){var D=P.getNextToken();if(!D)break;y&&(D=y(D)),w.push(D)}}catch(A){P.errorHandler.tolerate(A)}return P.errorHandler.tolerant&&(w.errors=P.errors()),w}i.tokenize=m;var v=r(2);i.Syntax=v.Syntax,i.version="4.0.1"},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(2),s=function(){function l(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return l.prototype.insertInnerComments=function(h,c){if(h.type===o.Syntax.BlockStatement&&h.body.length===0){for(var d=[],f=this.leading.length-1;f>=0;--f){var m=this.leading[f];c.end.offset>=m.start&&(d.unshift(m.comment),this.leading.splice(f,1),this.trailing.splice(f,1))}d.length&&(h.innerComments=d)}},l.prototype.findTrailingComments=function(h){var c=[];if(this.trailing.length>0){for(var d=this.trailing.length-1;d>=0;--d){var f=this.trailing[d];f.start>=h.end.offset&&c.unshift(f.comment)}return this.trailing.length=0,c}var m=this.stack[this.stack.length-1];if(m&&m.node.trailingComments){var v=m.node.trailingComments[0];v&&v.range[0]>=h.end.offset&&(c=m.node.trailingComments,delete m.node.trailingComments)}return c},l.prototype.findLeadingComments=function(h){for(var c=[],d;this.stack.length>0;){var f=this.stack[this.stack.length-1];if(f&&f.start>=h.start.offset)d=f.node,this.stack.pop();else break}if(d){for(var m=d.leadingComments?d.leadingComments.length:0,v=m-1;v>=0;--v){var C=d.leadingComments[v];C.range[1]<=h.start.offset&&(c.unshift(C),d.leadingComments.splice(v,1))}return d.leadingComments&&d.leadingComments.length===0&&delete d.leadingComments,c}for(var v=this.leading.length-1;v>=0;--v){var f=this.leading[v];f.start<=h.start.offset&&(c.unshift(f.comment),this.leading.splice(v,1))}return c},l.prototype.visitNode=function(h,c){if(!(h.type===o.Syntax.Program&&h.body.length>0)){this.insertInnerComments(h,c);var d=this.findTrailingComments(c),f=this.findLeadingComments(c);f.length>0&&(h.leadingComments=f),d.length>0&&(h.trailingComments=d),this.stack.push({node:h,start:c.start.offset})}},l.prototype.visitComment=function(h,c){var d=h.type[0]==="L"?"Line":"Block",f={type:d,value:h.value};if(h.range&&(f.range=h.range),h.loc&&(f.loc=h.loc),this.comments.push(f),this.attach){var m={comment:{type:d,value:h.value,range:[c.start.offset,c.end.offset]},start:c.start.offset};h.loc&&(m.comment.loc=h.loc),h.type=d,this.leading.push(m),this.trailing.push(m)}},l.prototype.visit=function(h,c){h.type==="LineComment"?this.visitComment(h,c):h.type==="BlockComment"?this.visitComment(h,c):this.attach&&this.visitNode(h,c)},l}();i.CommentHandler=s},function(n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(n,i,r){var o=this&&this.__extends||function(){var O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,P){y.__proto__=P}||function(y,P){for(var w in P)P.hasOwnProperty(w)&&(y[w]=P[w])};return function(y,P){O(y,P);function w(){this.constructor=y}y.prototype=P===null?Object.create(P):(w.prototype=P.prototype,new w)}}();Object.defineProperty(i,"__esModule",{value:!0});var s=r(4),l=r(5),h=r(6),c=r(7),d=r(8),f=r(13),m=r(14);f.TokenName[100]="JSXIdentifier",f.TokenName[101]="JSXText";function v(O){var y;switch(O.type){case h.JSXSyntax.JSXIdentifier:var P=O;y=P.name;break;case h.JSXSyntax.JSXNamespacedName:var w=O;y=v(w.namespace)+":"+v(w.name);break;case h.JSXSyntax.JSXMemberExpression:var D=O;y=v(D.object)+"."+v(D.property);break}return y}var C=function(O){o(y,O);function y(P,w,D){return O.call(this,P,w,D)||this}return y.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():O.prototype.parsePrimaryExpression.call(this)},y.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},y.prototype.finishJSX=function(){this.nextToken()},y.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},y.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},y.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},y.prototype.scanXHTMLEntity=function(P){for(var w="&",D=!0,A=!1,_=!1,I=!1;!this.scanner.eof()&&D&&!A;){var F=this.scanner.source[this.scanner.index];if(F===P)break;if(A=F===";",w+=F,++this.scanner.index,!A)switch(w.length){case 2:_=F==="#";break;case 3:_&&(I=F==="x",D=I||s.Character.isDecimalDigit(F.charCodeAt(0)),_=_&&!I);break;default:D=D&&!(_&&!s.Character.isDecimalDigit(F.charCodeAt(0))),D=D&&!(I&&!s.Character.isHexDigit(F.charCodeAt(0)));break}}if(D&&A&&w.length>2){var q=w.substr(1,w.length-2);_&&q.length>1?w=String.fromCharCode(parseInt(q.substr(1),10)):I&&q.length>2?w=String.fromCharCode(parseInt("0"+q.substr(1),16)):!_&&!I&&m.XHTMLEntities[q]&&(w=m.XHTMLEntities[q])}return w},y.prototype.lexJSX=function(){var P=this.scanner.source.charCodeAt(this.scanner.index);if(P===60||P===62||P===47||P===58||P===61||P===123||P===125){var w=this.scanner.source[this.scanner.index++];return{type:7,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(P===34||P===39){for(var D=this.scanner.index,A=this.scanner.source[this.scanner.index++],_="";!this.scanner.eof();){var I=this.scanner.source[this.scanner.index++];if(I===A)break;I==="&"?_+=this.scanXHTMLEntity(A):_+=I}return{type:8,value:_,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:D,end:this.scanner.index}}if(P===46){var F=this.scanner.source.charCodeAt(this.scanner.index+1),q=this.scanner.source.charCodeAt(this.scanner.index+2),w=F===46&&q===46?"...":".",D=this.scanner.index;return this.scanner.index+=w.length,{type:7,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:D,end:this.scanner.index}}if(P===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(s.Character.isIdentifierStart(P)&&P!==92){var D=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var I=this.scanner.source.charCodeAt(this.scanner.index);if(s.Character.isIdentifierPart(I)&&I!==92)++this.scanner.index;else if(I===45)++this.scanner.index;else break}var j=this.scanner.source.slice(D,this.scanner.index);return{type:100,value:j,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:D,end:this.scanner.index}}return this.scanner.lex()},y.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var P=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(P)),P},y.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var P=this.scanner.index,w="";!this.scanner.eof();){var D=this.scanner.source[this.scanner.index];if(D==="{"||D==="<")break;++this.scanner.index,w+=D,s.Character.isLineTerminator(D.charCodeAt(0))&&(++this.scanner.lineNumber,D==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var A={type:101,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:P,end:this.scanner.index};return w.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(A)),A},y.prototype.peekJSXToken=function(){var P=this.scanner.saveState();this.scanner.scanComments();var w=this.lexJSX();return this.scanner.restoreState(P),w},y.prototype.expectJSX=function(P){var w=this.nextJSXToken();(w.type!==7||w.value!==P)&&this.throwUnexpectedToken(w)},y.prototype.matchJSX=function(P){var w=this.peekJSXToken();return w.type===7&&w.value===P},y.prototype.parseJSXIdentifier=function(){var P=this.createJSXNode(),w=this.nextJSXToken();return w.type!==100&&this.throwUnexpectedToken(w),this.finalize(P,new l.JSXIdentifier(w.value))},y.prototype.parseJSXElementName=function(){var P=this.createJSXNode(),w=this.parseJSXIdentifier();if(this.matchJSX(":")){var D=w;this.expectJSX(":");var A=this.parseJSXIdentifier();w=this.finalize(P,new l.JSXNamespacedName(D,A))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var _=w;this.expectJSX(".");var I=this.parseJSXIdentifier();w=this.finalize(P,new l.JSXMemberExpression(_,I))}return w},y.prototype.parseJSXAttributeName=function(){var P=this.createJSXNode(),w,D=this.parseJSXIdentifier();if(this.matchJSX(":")){var A=D;this.expectJSX(":");var _=this.parseJSXIdentifier();w=this.finalize(P,new l.JSXNamespacedName(A,_))}else w=D;return w},y.prototype.parseJSXStringLiteralAttribute=function(){var P=this.createJSXNode(),w=this.nextJSXToken();w.type!==8&&this.throwUnexpectedToken(w);var D=this.getTokenRaw(w);return this.finalize(P,new c.Literal(w.value,D))},y.prototype.parseJSXExpressionAttribute=function(){var P=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(P,new l.JSXExpressionContainer(w))},y.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},y.prototype.parseJSXNameValueAttribute=function(){var P=this.createJSXNode(),w=this.parseJSXAttributeName(),D=null;return this.matchJSX("=")&&(this.expectJSX("="),D=this.parseJSXAttributeValue()),this.finalize(P,new l.JSXAttribute(w,D))},y.prototype.parseJSXSpreadAttribute=function(){var P=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(P,new l.JSXSpreadAttribute(w))},y.prototype.parseJSXAttributes=function(){for(var P=[];!this.matchJSX("/")&&!this.matchJSX(">");){var w=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();P.push(w)}return P},y.prototype.parseJSXOpeningElement=function(){var P=this.createJSXNode();this.expectJSX("<");var w=this.parseJSXElementName(),D=this.parseJSXAttributes(),A=this.matchJSX("/");return A&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(P,new l.JSXOpeningElement(w,A,D))},y.prototype.parseJSXBoundaryElement=function(){var P=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var w=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(P,new l.JSXClosingElement(w))}var D=this.parseJSXElementName(),A=this.parseJSXAttributes(),_=this.matchJSX("/");return _&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(P,new l.JSXOpeningElement(D,_,A))},y.prototype.parseJSXEmptyExpression=function(){var P=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(P,new l.JSXEmptyExpression)},y.prototype.parseJSXExpressionContainer=function(){var P=this.createJSXNode();this.expectJSX("{");var w;return this.matchJSX("}")?(w=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),w=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(P,new l.JSXExpressionContainer(w))},y.prototype.parseJSXChildren=function(){for(var P=[];!this.scanner.eof();){var w=this.createJSXChildNode(),D=this.nextJSXText();if(D.start<D.end){var A=this.getTokenRaw(D),_=this.finalize(w,new l.JSXText(D.value,A));P.push(_)}if(this.scanner.source[this.scanner.index]==="{"){var I=this.parseJSXExpressionContainer();P.push(I)}else break}return P},y.prototype.parseComplexJSXElement=function(P){for(var w=[];!this.scanner.eof();){P.children=P.children.concat(this.parseJSXChildren());var D=this.createJSXChildNode(),A=this.parseJSXBoundaryElement();if(A.type===h.JSXSyntax.JSXOpeningElement){var _=A;if(_.selfClosing){var I=this.finalize(D,new l.JSXElement(_,[],null));P.children.push(I)}else w.push(P),P={node:D,opening:_,closing:null,children:[]}}if(A.type===h.JSXSyntax.JSXClosingElement){P.closing=A;var F=v(P.opening.name),q=v(P.closing.name);if(F!==q&&this.tolerateError("Expected corresponding JSX closing tag for %0",F),w.length>0){var I=this.finalize(P.node,new l.JSXElement(P.opening,P.children,P.closing));P=w[w.length-1],P.children.push(I),w.pop()}else break}}return P},y.prototype.parseJSXElement=function(){var P=this.createJSXNode(),w=this.parseJSXOpeningElement(),D=[],A=null;if(!w.selfClosing){var _=this.parseComplexJSXElement({node:P,opening:w,closing:A,children:D});D=_.children,A=_.closing}return this.finalize(P,new l.JSXElement(w,D,A))},y.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var P=this.parseJSXElement();return this.finishJSX(),P},y.prototype.isStartOfExpression=function(){return O.prototype.isStartOfExpression.call(this)||this.match("<")},y}(d.Parser);i.JSXParser=C},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};i.Character={fromCodePoint:function(o){return o<65536?String.fromCharCode(o):String.fromCharCode(55296+(o-65536>>10))+String.fromCharCode(56320+(o-65536&1023))},isWhiteSpace:function(o){return o===32||o===9||o===11||o===12||o===160||o>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(o)>=0},isLineTerminator:function(o){return o===10||o===13||o===8232||o===8233},isIdentifierStart:function(o){return o===36||o===95||o>=65&&o<=90||o>=97&&o<=122||o===92||o>=128&&r.NonAsciiIdentifierStart.test(i.Character.fromCodePoint(o))},isIdentifierPart:function(o){return o===36||o===95||o>=65&&o<=90||o>=97&&o<=122||o>=48&&o<=57||o===92||o>=128&&r.NonAsciiIdentifierPart.test(i.Character.fromCodePoint(o))},isDecimalDigit:function(o){return o>=48&&o<=57},isHexDigit:function(o){return o>=48&&o<=57||o>=65&&o<=70||o>=97&&o<=102},isOctalDigit:function(o){return o>=48&&o<=55}}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(6),s=function(){function P(w){this.type=o.JSXSyntax.JSXClosingElement,this.name=w}return P}();i.JSXClosingElement=s;var l=function(){function P(w,D,A){this.type=o.JSXSyntax.JSXElement,this.openingElement=w,this.children=D,this.closingElement=A}return P}();i.JSXElement=l;var h=function(){function P(){this.type=o.JSXSyntax.JSXEmptyExpression}return P}();i.JSXEmptyExpression=h;var c=function(){function P(w){this.type=o.JSXSyntax.JSXExpressionContainer,this.expression=w}return P}();i.JSXExpressionContainer=c;var d=function(){function P(w){this.type=o.JSXSyntax.JSXIdentifier,this.name=w}return P}();i.JSXIdentifier=d;var f=function(){function P(w,D){this.type=o.JSXSyntax.JSXMemberExpression,this.object=w,this.property=D}return P}();i.JSXMemberExpression=f;var m=function(){function P(w,D){this.type=o.JSXSyntax.JSXAttribute,this.name=w,this.value=D}return P}();i.JSXAttribute=m;var v=function(){function P(w,D){this.type=o.JSXSyntax.JSXNamespacedName,this.namespace=w,this.name=D}return P}();i.JSXNamespacedName=v;var C=function(){function P(w,D,A){this.type=o.JSXSyntax.JSXOpeningElement,this.name=w,this.selfClosing=D,this.attributes=A}return P}();i.JSXOpeningElement=C;var O=function(){function P(w){this.type=o.JSXSyntax.JSXSpreadAttribute,this.argument=w}return P}();i.JSXSpreadAttribute=O;var y=function(){function P(w,D){this.type=o.JSXSyntax.JSXText,this.value=w,this.raw=D}return P}();i.JSXText=y},function(n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(2),s=function(){function X($){this.type=o.Syntax.ArrayExpression,this.elements=$}return X}();i.ArrayExpression=s;var l=function(){function X($){this.type=o.Syntax.ArrayPattern,this.elements=$}return X}();i.ArrayPattern=l;var h=function(){function X($,Z,rt){this.type=o.Syntax.ArrowFunctionExpression,this.id=null,this.params=$,this.body=Z,this.generator=!1,this.expression=rt,this.async=!1}return X}();i.ArrowFunctionExpression=h;var c=function(){function X($,Z,rt){this.type=o.Syntax.AssignmentExpression,this.operator=$,this.left=Z,this.right=rt}return X}();i.AssignmentExpression=c;var d=function(){function X($,Z){this.type=o.Syntax.AssignmentPattern,this.left=$,this.right=Z}return X}();i.AssignmentPattern=d;var f=function(){function X($,Z,rt){this.type=o.Syntax.ArrowFunctionExpression,this.id=null,this.params=$,this.body=Z,this.generator=!1,this.expression=rt,this.async=!0}return X}();i.AsyncArrowFunctionExpression=f;var m=function(){function X($,Z,rt){this.type=o.Syntax.FunctionDeclaration,this.id=$,this.params=Z,this.body=rt,this.generator=!1,this.expression=!1,this.async=!0}return X}();i.AsyncFunctionDeclaration=m;var v=function(){function X($,Z,rt){this.type=o.Syntax.FunctionExpression,this.id=$,this.params=Z,this.body=rt,this.generator=!1,this.expression=!1,this.async=!0}return X}();i.AsyncFunctionExpression=v;var C=function(){function X($){this.type=o.Syntax.AwaitExpression,this.argument=$}return X}();i.AwaitExpression=C;var O=function(){function X($,Z,rt){var he=$==="||"||$==="&&";this.type=he?o.Syntax.LogicalExpression:o.Syntax.BinaryExpression,this.operator=$,this.left=Z,this.right=rt}return X}();i.BinaryExpression=O;var y=function(){function X($){this.type=o.Syntax.BlockStatement,this.body=$}return X}();i.BlockStatement=y;var P=function(){function X($){this.type=o.Syntax.BreakStatement,this.label=$}return X}();i.BreakStatement=P;var w=function(){function X($,Z){this.type=o.Syntax.CallExpression,this.callee=$,this.arguments=Z}return X}();i.CallExpression=w;var D=function(){function X($,Z){this.type=o.Syntax.CatchClause,this.param=$,this.body=Z}return X}();i.CatchClause=D;var A=function(){function X($){this.type=o.Syntax.ClassBody,this.body=$}return X}();i.ClassBody=A;var _=function(){function X($,Z,rt){this.type=o.Syntax.ClassDeclaration,this.id=$,this.superClass=Z,this.body=rt}return X}();i.ClassDeclaration=_;var I=function(){function X($,Z,rt){this.type=o.Syntax.ClassExpression,this.id=$,this.superClass=Z,this.body=rt}return X}();i.ClassExpression=I;var F=function(){function X($,Z){this.type=o.Syntax.MemberExpression,this.computed=!0,this.object=$,this.property=Z}return X}();i.ComputedMemberExpression=F;var q=function(){function X($,Z,rt){this.type=o.Syntax.ConditionalExpression,this.test=$,this.consequent=Z,this.alternate=rt}return X}();i.ConditionalExpression=q;var j=function(){function X($){this.type=o.Syntax.ContinueStatement,this.label=$}return X}();i.ContinueStatement=j;var z=function(){function X(){this.type=o.Syntax.DebuggerStatement}return X}();i.DebuggerStatement=z;var B=function(){function X($,Z){this.type=o.Syntax.ExpressionStatement,this.expression=$,this.directive=Z}return X}();i.Directive=B;var L=function(){function X($,Z){this.type=o.Syntax.DoWhileStatement,this.body=$,this.test=Z}return X}();i.DoWhileStatement=L;var M=function(){function X(){this.type=o.Syntax.EmptyStatement}return X}();i.EmptyStatement=M;var U=function(){function X($){this.type=o.Syntax.ExportAllDeclaration,this.source=$}return X}();i.ExportAllDeclaration=U;var K=function(){function X($){this.type=o.Syntax.ExportDefaultDeclaration,this.declaration=$}return X}();i.ExportDefaultDeclaration=K;var st=function(){function X($,Z,rt){this.type=o.Syntax.ExportNamedDeclaration,this.declaration=$,this.specifiers=Z,this.source=rt}return X}();i.ExportNamedDeclaration=st;var lt=function(){function X($,Z){this.type=o.Syntax.ExportSpecifier,this.exported=Z,this.local=$}return X}();i.ExportSpecifier=lt;var pt=function(){function X($){this.type=o.Syntax.ExpressionStatement,this.expression=$}return X}();i.ExpressionStatement=pt;var mt=function(){function X($,Z,rt){this.type=o.Syntax.ForInStatement,this.left=$,this.right=Z,this.body=rt,this.each=!1}return X}();i.ForInStatement=mt;var dt=function(){function X($,Z,rt){this.type=o.Syntax.ForOfStatement,this.left=$,this.right=Z,this.body=rt}return X}();i.ForOfStatement=dt;var bt=function(){function X($,Z,rt,he){this.type=o.Syntax.ForStatement,this.init=$,this.test=Z,this.update=rt,this.body=he}return X}();i.ForStatement=bt;var wt=function(){function X($,Z,rt,he){this.type=o.Syntax.FunctionDeclaration,this.id=$,this.params=Z,this.body=rt,this.generator=he,this.expression=!1,this.async=!1}return X}();i.FunctionDeclaration=wt;var Tt=function(){function X($,Z,rt,he){this.type=o.Syntax.FunctionExpression,this.id=$,this.params=Z,this.body=rt,this.generator=he,this.expression=!1,this.async=!1}return X}();i.FunctionExpression=Tt;var ie=function(){function X($){this.type=o.Syntax.Identifier,this.name=$}return X}();i.Identifier=ie;var jt=function(){function X($,Z,rt){this.type=o.Syntax.IfStatement,this.test=$,this.consequent=Z,this.alternate=rt}return X}();i.IfStatement=jt;var Oe=function(){function X($,Z){this.type=o.Syntax.ImportDeclaration,this.specifiers=$,this.source=Z}return X}();i.ImportDeclaration=Oe;var _e=function(){function X($){this.type=o.Syntax.ImportDefaultSpecifier,this.local=$}return X}();i.ImportDefaultSpecifier=_e;var Ht=function(){function X($){this.type=o.Syntax.ImportNamespaceSpecifier,this.local=$}return X}();i.ImportNamespaceSpecifier=Ht;var Zt=function(){function X($,Z){this.type=o.Syntax.ImportSpecifier,this.local=$,this.imported=Z}return X}();i.ImportSpecifier=Zt;var Ie=function(){function X($,Z){this.type=o.Syntax.LabeledStatement,this.label=$,this.body=Z}return X}();i.LabeledStatement=Ie;var Jt=function(){function X($,Z){this.type=o.Syntax.Literal,this.value=$,this.raw=Z}return X}();i.Literal=Jt;var Qe=function(){function X($,Z){this.type=o.Syntax.MetaProperty,this.meta=$,this.property=Z}return X}();i.MetaProperty=Qe;var we=function(){function X($,Z,rt,he,yr){this.type=o.Syntax.MethodDefinition,this.key=$,this.computed=Z,this.value=rt,this.kind=he,this.static=yr}return X}();i.MethodDefinition=we;var tn=function(){function X($){this.type=o.Syntax.Program,this.body=$,this.sourceType="module"}return X}();i.Module=tn;var It=function(){function X($,Z){this.type=o.Syntax.NewExpression,this.callee=$,this.arguments=Z}return X}();i.NewExpression=It;var le=function(){function X($){this.type=o.Syntax.ObjectExpression,this.properties=$}return X}();i.ObjectExpression=le;var Le=function(){function X($){this.type=o.Syntax.ObjectPattern,this.properties=$}return X}();i.ObjectPattern=Le;var en=function(){function X($,Z,rt,he,yr,Cl){this.type=o.Syntax.Property,this.key=Z,this.computed=rt,this.value=he,this.kind=$,this.method=yr,this.shorthand=Cl}return X}();i.Property=en;var mr=function(){function X($,Z,rt,he){this.type=o.Syntax.Literal,this.value=$,this.raw=Z,this.regex={pattern:rt,flags:he}}return X}();i.RegexLiteral=mr;var qn=function(){function X($){this.type=o.Syntax.RestElement,this.argument=$}return X}();i.RestElement=qn;var Or=function(){function X($){this.type=o.Syntax.ReturnStatement,this.argument=$}return X}();i.ReturnStatement=Or;var rl=function(){function X($){this.type=o.Syntax.Program,this.body=$,this.sourceType="script"}return X}();i.Script=rl;var sl=function(){function X($){this.type=o.Syntax.SequenceExpression,this.expressions=$}return X}();i.SequenceExpression=sl;var ol=function(){function X($){this.type=o.Syntax.SpreadElement,this.argument=$}return X}();i.SpreadElement=ol;var al=function(){function X($,Z){this.type=o.Syntax.MemberExpression,this.computed=!1,this.object=$,this.property=Z}return X}();i.StaticMemberExpression=al;var ll=function(){function X(){this.type=o.Syntax.Super}return X}();i.Super=ll;var hl=function(){function X($,Z){this.type=o.Syntax.SwitchCase,this.test=$,this.consequent=Z}return X}();i.SwitchCase=hl;var ul=function(){function X($,Z){this.type=o.Syntax.SwitchStatement,this.discriminant=$,this.cases=Z}return X}();i.SwitchStatement=ul;var cl=function(){function X($,Z){this.type=o.Syntax.TaggedTemplateExpression,this.tag=$,this.quasi=Z}return X}();i.TaggedTemplateExpression=cl;var pl=function(){function X($,Z){this.type=o.Syntax.TemplateElement,this.value=$,this.tail=Z}return X}();i.TemplateElement=pl;var dl=function(){function X($,Z){this.type=o.Syntax.TemplateLiteral,this.quasis=$,this.expressions=Z}return X}();i.TemplateLiteral=dl;var fl=function(){function X(){this.type=o.Syntax.ThisExpression}return X}();i.ThisExpression=fl;var ml=function(){function X($){this.type=o.Syntax.ThrowStatement,this.argument=$}return X}();i.ThrowStatement=ml;var Ol=function(){function X($,Z,rt){this.type=o.Syntax.TryStatement,this.block=$,this.handler=Z,this.finalizer=rt}return X}();i.TryStatement=Ol;var gl=function(){function X($,Z){this.type=o.Syntax.UnaryExpression,this.operator=$,this.argument=Z,this.prefix=!0}return X}();i.UnaryExpression=gl;var yl=function(){function X($,Z,rt){this.type=o.Syntax.UpdateExpression,this.operator=$,this.argument=Z,this.prefix=rt}return X}();i.UpdateExpression=yl;var xl=function(){function X($,Z){this.type=o.Syntax.VariableDeclaration,this.declarations=$,this.kind=Z}return X}();i.VariableDeclaration=xl;var vl=function(){function X($,Z){this.type=o.Syntax.VariableDeclarator,this.id=$,this.init=Z}return X}();i.VariableDeclarator=vl;var Pl=function(){function X($,Z){this.type=o.Syntax.WhileStatement,this.test=$,this.body=Z}return X}();i.WhileStatement=Pl;var gr=function(){function X($,Z){this.type=o.Syntax.WithStatement,this.object=$,this.body=Z}return X}();i.WithStatement=gr;var Sl=function(){function X($,Z){this.type=o.Syntax.YieldExpression,this.argument=$,this.delegate=Z}return X}();i.YieldExpression=Sl},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(9),s=r(10),l=r(11),h=r(7),c=r(12),d=r(2),f=r(13),m="ArrowParameterPlaceHolder",v=function(){function C(O,y,P){y===void 0&&(y={}),this.config={range:typeof y.range=="boolean"&&y.range,loc:typeof y.loc=="boolean"&&y.loc,source:null,tokens:typeof y.tokens=="boolean"&&y.tokens,comment:typeof y.comment=="boolean"&&y.comment,tolerant:typeof y.tolerant=="boolean"&&y.tolerant},this.config.loc&&y.source&&y.source!==null&&(this.config.source=String(y.source)),this.delegate=P,this.errorHandler=new s.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new c.Scanner(O,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return C.prototype.throwError=function(O){var y=Array.prototype.slice.call(arguments,1),P=O.replace(/%(\d)/g,function(_,I){return o.assert(I<y.length,"Message reference must be in range"),y[I]}),w=this.lastMarker.index,D=this.lastMarker.line,A=this.lastMarker.column+1;throw this.errorHandler.createError(w,D,A,P)},C.prototype.tolerateError=function(O){var y=Array.prototype.slice.call(arguments,1),P=O.replace(/%(\d)/g,function(_,I){return o.assert(I<y.length,"Message reference must be in range"),y[I]}),w=this.lastMarker.index,D=this.scanner.lineNumber,A=this.lastMarker.column+1;this.errorHandler.tolerateError(w,D,A,P)},C.prototype.unexpectedTokenError=function(O,y){var P=y||l.Messages.UnexpectedToken,w;if(O?(y||(P=O.type===2?l.Messages.UnexpectedEOS:O.type===3?l.Messages.UnexpectedIdentifier:O.type===6?l.Messages.UnexpectedNumber:O.type===8?l.Messages.UnexpectedString:O.type===10?l.Messages.UnexpectedTemplate:l.Messages.UnexpectedToken,O.type===4&&(this.scanner.isFutureReservedWord(O.value)?P=l.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(O.value)&&(P=l.Messages.StrictReservedWord))),w=O.value):w="ILLEGAL",P=P.replace("%0",w),O&&typeof O.lineNumber=="number"){var D=O.start,A=O.lineNumber,_=this.lastMarker.index-this.lastMarker.column,I=O.start-_+1;return this.errorHandler.createError(D,A,I,P)}else{var D=this.lastMarker.index,A=this.lastMarker.line,I=this.lastMarker.column+1;return this.errorHandler.createError(D,A,I,P)}},C.prototype.throwUnexpectedToken=function(O,y){throw this.unexpectedTokenError(O,y)},C.prototype.tolerateUnexpectedToken=function(O,y){this.errorHandler.tolerate(this.unexpectedTokenError(O,y))},C.prototype.collectComments=function(){if(!this.config.comment)this.scanner.scanComments();else{var O=this.scanner.scanComments();if(O.length>0&&this.delegate)for(var y=0;y<O.length;++y){var P=O[y],w=void 0;w={type:P.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(P.slice[0],P.slice[1])},this.config.range&&(w.range=P.range),this.config.loc&&(w.loc=P.loc);var D={start:{line:P.loc.start.line,column:P.loc.start.column,offset:P.range[0]},end:{line:P.loc.end.line,column:P.loc.end.column,offset:P.range[1]}};this.delegate(w,D)}}},C.prototype.getTokenRaw=function(O){return this.scanner.source.slice(O.start,O.end)},C.prototype.convertToken=function(O){var y={type:f.TokenName[O.type],value:this.getTokenRaw(O)};if(this.config.range&&(y.range=[O.start,O.end]),this.config.loc&&(y.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),O.type===9){var P=O.pattern,w=O.flags;y.regex={pattern:P,flags:w}}return y},C.prototype.nextToken=function(){var O=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var y=this.scanner.lex();return this.hasLineTerminator=O.lineNumber!==y.lineNumber,y&&this.context.strict&&y.type===3&&this.scanner.isStrictModeReservedWord(y.value)&&(y.type=4),this.lookahead=y,this.config.tokens&&y.type!==2&&this.tokens.push(this.convertToken(y)),O},C.prototype.nextRegexToken=function(){this.collectComments();var O=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(O))),this.lookahead=O,this.nextToken(),O},C.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},C.prototype.startNode=function(O,y){y===void 0&&(y=0);var P=O.start-O.lineStart,w=O.lineNumber;return P<0&&(P+=y,w--),{index:O.start,line:w,column:P}},C.prototype.finalize=function(O,y){if(this.config.range&&(y.range=[O.index,this.lastMarker.index]),this.config.loc&&(y.loc={start:{line:O.line,column:O.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(y.loc.source=this.config.source)),this.delegate){var P={start:{line:O.line,column:O.column,offset:O.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(y,P)}return y},C.prototype.expect=function(O){var y=this.nextToken();(y.type!==7||y.value!==O)&&this.throwUnexpectedToken(y)},C.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var O=this.lookahead;O.type===7&&O.value===","?this.nextToken():O.type===7&&O.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(O)):this.tolerateUnexpectedToken(O,l.Messages.UnexpectedToken)}else this.expect(",")},C.prototype.expectKeyword=function(O){var y=this.nextToken();(y.type!==4||y.value!==O)&&this.throwUnexpectedToken(y)},C.prototype.match=function(O){return this.lookahead.type===7&&this.lookahead.value===O},C.prototype.matchKeyword=function(O){return this.lookahead.type===4&&this.lookahead.value===O},C.prototype.matchContextualKeyword=function(O){return this.lookahead.type===3&&this.lookahead.value===O},C.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var O=this.lookahead.value;return O==="="||O==="*="||O==="**="||O==="/="||O==="%="||O==="+="||O==="-="||O==="<<="||O===">>="||O===">>>="||O==="&="||O==="^="||O==="|="},C.prototype.isolateCoverGrammar=function(O){var y=this.context.isBindingElement,P=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var D=O.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=y,this.context.isAssignmentTarget=P,this.context.firstCoverInitializedNameError=w,D},C.prototype.inheritCoverGrammar=function(O){var y=this.context.isBindingElement,P=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var D=O.call(this);return this.context.isBindingElement=this.context.isBindingElement&&y,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&P,this.context.firstCoverInitializedNameError=w||this.context.firstCoverInitializedNameError,D},C.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type!==2&&!this.match("}")&&this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},C.prototype.parsePrimaryExpression=function(){var O=this.createNode(),y,P,w;switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),y=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(O,new h.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,l.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,P=this.nextToken(),w=this.getTokenRaw(P),y=this.finalize(O,new h.Literal(P.value,w));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,P=this.nextToken(),w=this.getTokenRaw(P),y=this.finalize(O,new h.Literal(P.value==="true",w));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,P=this.nextToken(),w=this.getTokenRaw(P),y=this.finalize(O,new h.Literal(null,w));break;case 10:y=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,y=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":y=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":y=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,P=this.nextRegexToken(),w=this.getTokenRaw(P),y=this.finalize(O,new h.RegexLiteral(P.regex,w,P.pattern,P.flags));break;default:y=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?y=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?y=this.finalize(O,new h.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?y=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),y=this.finalize(O,new h.ThisExpression)):this.matchKeyword("class")?y=this.parseClassExpression():y=this.throwUnexpectedToken(this.nextToken()));break;default:y=this.throwUnexpectedToken(this.nextToken())}return y},C.prototype.parseSpreadElement=function(){var O=this.createNode();this.expect("...");var y=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(O,new h.SpreadElement(y))},C.prototype.parseArrayInitializer=function(){var O=this.createNode(),y=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),y.push(null);else if(this.match("...")){var P=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),y.push(P)}else y.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(O,new h.ArrayExpression(y))},C.prototype.parsePropertyMethod=function(O){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var y=this.context.strict,P=this.context.allowStrictDirective;this.context.allowStrictDirective=O.simple;var w=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&O.firstRestricted&&this.tolerateUnexpectedToken(O.firstRestricted,O.message),this.context.strict&&O.stricted&&this.tolerateUnexpectedToken(O.stricted,O.message),this.context.strict=y,this.context.allowStrictDirective=P,w},C.prototype.parsePropertyMethodFunction=function(){var O=!1,y=this.createNode(),P=this.context.allowYield;this.context.allowYield=!0;var w=this.parseFormalParameters(),D=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(y,new h.FunctionExpression(null,w.params,D,O))},C.prototype.parsePropertyMethodAsyncFunction=function(){var O=this.createNode(),y=this.context.allowYield,P=this.context.await;this.context.allowYield=!1,this.context.await=!0;var w=this.parseFormalParameters(),D=this.parsePropertyMethod(w);return this.context.allowYield=y,this.context.await=P,this.finalize(O,new h.AsyncFunctionExpression(null,w.params,D))},C.prototype.parseObjectPropertyKey=function(){var O=this.createNode(),y=this.nextToken(),P;switch(y.type){case 8:case 6:this.context.strict&&y.octal&&this.tolerateUnexpectedToken(y,l.Messages.StrictOctalLiteral);var w=this.getTokenRaw(y);P=this.finalize(O,new h.Literal(y.value,w));break;case 3:case 1:case 5:case 4:P=this.finalize(O,new h.Identifier(y.value));break;case 7:y.value==="["?(P=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):P=this.throwUnexpectedToken(y);break;default:P=this.throwUnexpectedToken(y)}return P},C.prototype.isPropertyKey=function(O,y){return O.type===d.Syntax.Identifier&&O.name===y||O.type===d.Syntax.Literal&&O.value===y},C.prototype.parseObjectProperty=function(O){var y=this.createNode(),P=this.lookahead,w,D=null,A=null,_=!1,I=!1,F=!1,q=!1;if(P.type===3){var j=P.value;this.nextToken(),_=this.match("["),q=!this.hasLineTerminator&&j==="async"&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","),D=q?this.parseObjectPropertyKey():this.finalize(y,new h.Identifier(j))}else this.match("*")?this.nextToken():(_=this.match("["),D=this.parseObjectPropertyKey());var z=this.qualifiedPropertyName(this.lookahead);if(P.type===3&&!q&&P.value==="get"&&z)w="get",_=this.match("["),D=this.parseObjectPropertyKey(),this.context.allowYield=!1,A=this.parseGetterMethod();else if(P.type===3&&!q&&P.value==="set"&&z)w="set",_=this.match("["),D=this.parseObjectPropertyKey(),A=this.parseSetterMethod();else if(P.type===7&&P.value==="*"&&z)w="init",_=this.match("["),D=this.parseObjectPropertyKey(),A=this.parseGeneratorMethod(),I=!0;else if(D||this.throwUnexpectedToken(this.lookahead),w="init",this.match(":")&&!q)!_&&this.isPropertyKey(D,"__proto__")&&(O.value&&this.tolerateError(l.Messages.DuplicateProtoProperty),O.value=!0),this.nextToken(),A=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))A=q?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),I=!0;else if(P.type===3){var j=this.finalize(y,new h.Identifier(P.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),F=!0;var B=this.isolateCoverGrammar(this.parseAssignmentExpression);A=this.finalize(y,new h.AssignmentPattern(j,B))}else F=!0,A=j}else this.throwUnexpectedToken(this.nextToken());return this.finalize(y,new h.Property(w,D,_,A,I,F))},C.prototype.parseObjectInitializer=function(){var O=this.createNode();this.expect("{");for(var y=[],P={value:!1};!this.match("}");)y.push(this.parseObjectProperty(P)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(O,new h.ObjectExpression(y))},C.prototype.parseTemplateHead=function(){o.assert(this.lookahead.head,"Template literal must start with a template head");var O=this.createNode(),y=this.nextToken(),P=y.value,w=y.cooked;return this.finalize(O,new h.TemplateElement({raw:P,cooked:w},y.tail))},C.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var O=this.createNode(),y=this.nextToken(),P=y.value,w=y.cooked;return this.finalize(O,new h.TemplateElement({raw:P,cooked:w},y.tail))},C.prototype.parseTemplateLiteral=function(){var O=this.createNode(),y=[],P=[],w=this.parseTemplateHead();for(P.push(w);!w.tail;)y.push(this.parseExpression()),w=this.parseTemplateElement(),P.push(w);return this.finalize(O,new h.TemplateLiteral(P,y))},C.prototype.reinterpretExpressionAsPattern=function(O){switch(O.type){case d.Syntax.Identifier:case d.Syntax.MemberExpression:case d.Syntax.RestElement:case d.Syntax.AssignmentPattern:break;case d.Syntax.SpreadElement:O.type=d.Syntax.RestElement,this.reinterpretExpressionAsPattern(O.argument);break;case d.Syntax.ArrayExpression:O.type=d.Syntax.ArrayPattern;for(var y=0;y<O.elements.length;y++)O.elements[y]!==null&&this.reinterpretExpressionAsPattern(O.elements[y]);break;case d.Syntax.ObjectExpression:O.type=d.Syntax.ObjectPattern;for(var y=0;y<O.properties.length;y++)this.reinterpretExpressionAsPattern(O.properties[y].value);break;case d.Syntax.AssignmentExpression:O.type=d.Syntax.AssignmentPattern,delete O.operator,this.reinterpretExpressionAsPattern(O.left);break}},C.prototype.parseGroupExpression=function(){var O;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),O={type:m,params:[],async:!1};else{var y=this.lookahead,P=[];if(this.match("..."))O=this.parseRestElement(P),this.expect(")"),this.match("=>")||this.expect("=>"),O={type:m,params:[O],async:!1};else{var w=!1;if(this.context.isBindingElement=!0,O=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var D=[];for(this.context.isAssignmentTarget=!1,D.push(O);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var A=0;A<D.length;A++)this.reinterpretExpressionAsPattern(D[A]);w=!0,O={type:m,params:D,async:!1}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),D.push(this.parseRestElement(P)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(var A=0;A<D.length;A++)this.reinterpretExpressionAsPattern(D[A]);w=!0,O={type:m,params:D,async:!1}}else D.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(w)break}w||(O=this.finalize(this.startNode(y),new h.SequenceExpression(D)))}if(!w){if(this.expect(")"),this.match("=>")&&(O.type===d.Syntax.Identifier&&O.name==="yield"&&(w=!0,O={type:m,params:[O],async:!1}),!w)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),O.type===d.Syntax.SequenceExpression)for(var A=0;A<O.expressions.length;A++)this.reinterpretExpressionAsPattern(O.expressions[A]);else this.reinterpretExpressionAsPattern(O);var _=O.type===d.Syntax.SequenceExpression?O.expressions:[O];O={type:m,params:_,async:!1}}this.context.isBindingElement=!1}}}return O},C.prototype.parseArguments=function(){this.expect("(");var O=[];if(!this.match(")"))for(;;){var y=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(O.push(y),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),O},C.prototype.isIdentifierName=function(O){return O.type===3||O.type===4||O.type===1||O.type===5},C.prototype.parseIdentifierName=function(){var O=this.createNode(),y=this.nextToken();return this.isIdentifierName(y)||this.throwUnexpectedToken(y),this.finalize(O,new h.Identifier(y.value))},C.prototype.parseNewExpression=function(){var O=this.createNode(),y=this.parseIdentifierName();o.assert(y.name==="new","New expression must start with `new`");var P;if(this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var w=this.parseIdentifierName();P=new h.MetaProperty(y,w)}else this.throwUnexpectedToken(this.lookahead);else{var D=this.isolateCoverGrammar(this.parseLeftHandSideExpression),A=this.match("(")?this.parseArguments():[];P=new h.NewExpression(D,A),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(O,P)},C.prototype.parseAsyncArgument=function(){var O=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,O},C.prototype.parseAsyncArguments=function(){this.expect("(");var O=[];if(!this.match(")"))for(;;){var y=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(O.push(y),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),O},C.prototype.parseLeftHandSideExpressionAllowCall=function(){var O=this.lookahead,y=this.matchContextualKeyword("async"),P=this.context.allowIn;this.context.allowIn=!0;var w;for(this.matchKeyword("super")&&this.context.inFunctionBody?(w=this.createNode(),this.nextToken(),w=this.finalize(w,new h.Super),!this.match("(")&&!this.match(".")&&!this.match("[")&&this.throwUnexpectedToken(this.lookahead)):w=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var D=this.parseIdentifierName();w=this.finalize(this.startNode(O),new h.StaticMemberExpression(w,D))}else if(this.match("(")){var A=y&&O.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var _=A?this.parseAsyncArguments():this.parseArguments();if(w=this.finalize(this.startNode(O),new h.CallExpression(w,_)),A&&this.match("=>")){for(var I=0;I<_.length;++I)this.reinterpretExpressionAsPattern(_[I]);w={type:m,params:_,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var D=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),w=this.finalize(this.startNode(O),new h.ComputedMemberExpression(w,D))}else if(this.lookahead.type===10&&this.lookahead.head){var F=this.parseTemplateLiteral();w=this.finalize(this.startNode(O),new h.TaggedTemplateExpression(w,F))}else break;return this.context.allowIn=P,w},C.prototype.parseSuper=function(){var O=this.createNode();return this.expectKeyword("super"),!this.match("[")&&!this.match(".")&&this.throwUnexpectedToken(this.lookahead),this.finalize(O,new h.Super)},C.prototype.parseLeftHandSideExpression=function(){o.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var O=this.startNode(this.lookahead),y=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var P=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),y=this.finalize(O,new h.ComputedMemberExpression(y,P))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var P=this.parseIdentifierName();y=this.finalize(O,new h.StaticMemberExpression(y,P))}else if(this.lookahead.type===10&&this.lookahead.head){var w=this.parseTemplateLiteral();y=this.finalize(O,new h.TaggedTemplateExpression(y,w))}else break;return y},C.prototype.parseUpdateExpression=function(){var O,y=this.lookahead;if(this.match("++")||this.match("--")){var P=this.startNode(y),w=this.nextToken();O=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&O.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(O.name)&&this.tolerateError(l.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment);var D=!0;O=this.finalize(P,new h.UpdateExpression(w.value,O,D)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(O=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&O.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(O.name)&&this.tolerateError(l.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var A=this.nextToken().value,D=!1;O=this.finalize(this.startNode(y),new h.UpdateExpression(A,O,D))}return O},C.prototype.parseAwaitExpression=function(){var O=this.createNode();this.nextToken();var y=this.parseUnaryExpression();return this.finalize(O,new h.AwaitExpression(y))},C.prototype.parseUnaryExpression=function(){var O;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var y=this.startNode(this.lookahead),P=this.nextToken();O=this.inheritCoverGrammar(this.parseUnaryExpression),O=this.finalize(y,new h.UnaryExpression(P.value,O)),this.context.strict&&O.operator==="delete"&&O.argument.type===d.Syntax.Identifier&&this.tolerateError(l.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else this.context.await&&this.matchContextualKeyword("await")?O=this.parseAwaitExpression():O=this.parseUpdateExpression();return O},C.prototype.parseExponentiationExpression=function(){var O=this.lookahead,y=this.inheritCoverGrammar(this.parseUnaryExpression);if(y.type!==d.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var P=y,w=this.isolateCoverGrammar(this.parseExponentiationExpression);y=this.finalize(this.startNode(O),new h.BinaryExpression("**",P,w))}return y},C.prototype.binaryPrecedence=function(O){var y=O.value,P;return O.type===7?P=this.operatorPrecedence[y]||0:O.type===4?P=y==="instanceof"||this.context.allowIn&&y==="in"?7:0:P=0,P},C.prototype.parseBinaryExpression=function(){var O=this.lookahead,y=this.inheritCoverGrammar(this.parseExponentiationExpression),P=this.lookahead,w=this.binaryPrecedence(P);if(w>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var D=[O,this.lookahead],A=y,_=this.isolateCoverGrammar(this.parseExponentiationExpression),I=[A,P.value,_],F=[w];w=this.binaryPrecedence(this.lookahead),!(w<=0);){for(;I.length>2&&w<=F[F.length-1];){_=I.pop();var q=I.pop();F.pop(),A=I.pop(),D.pop();var j=this.startNode(D[D.length-1]);I.push(this.finalize(j,new h.BinaryExpression(q,A,_)))}I.push(this.nextToken().value),F.push(w),D.push(this.lookahead),I.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var z=I.length-1;y=I[z];for(var B=D.pop();z>1;){var L=D.pop(),M=B&&B.lineStart,j=this.startNode(L,M),q=I[z-1];y=this.finalize(j,new h.BinaryExpression(q,I[z-2],y)),z-=2,B=L}}return y},C.prototype.parseConditionalExpression=function(){var O=this.lookahead,y=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var P=this.context.allowIn;this.context.allowIn=!0;var w=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=P,this.expect(":");var D=this.isolateCoverGrammar(this.parseAssignmentExpression);y=this.finalize(this.startNode(O),new h.ConditionalExpression(y,w,D)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return y},C.prototype.checkPatternParam=function(O,y){switch(y.type){case d.Syntax.Identifier:this.validateParam(O,y,y.name);break;case d.Syntax.RestElement:this.checkPatternParam(O,y.argument);break;case d.Syntax.AssignmentPattern:this.checkPatternParam(O,y.left);break;case d.Syntax.ArrayPattern:for(var P=0;P<y.elements.length;P++)y.elements[P]!==null&&this.checkPatternParam(O,y.elements[P]);break;case d.Syntax.ObjectPattern:for(var P=0;P<y.properties.length;P++)this.checkPatternParam(O,y.properties[P].value);break}O.simple=O.simple&&y instanceof h.Identifier},C.prototype.reinterpretAsCoverFormalsList=function(O){var y=[O],P,w=!1;switch(O.type){case d.Syntax.Identifier:break;case m:y=O.params,w=O.async;break;default:return null}P={simple:!0,paramSet:{}};for(var D=0;D<y.length;++D){var A=y[D];A.type===d.Syntax.AssignmentPattern?A.right.type===d.Syntax.YieldExpression&&(A.right.argument&&this.throwUnexpectedToken(this.lookahead),A.right.type=d.Syntax.Identifier,A.right.name="yield",delete A.right.argument,delete A.right.delegate):w&&A.type===d.Syntax.Identifier&&A.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(P,A),y[D]=A}if(this.context.strict||!this.context.allowYield)for(var D=0;D<y.length;++D){var A=y[D];A.type===d.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(P.message===l.Messages.StrictParamDupe){var _=this.context.strict?P.stricted:P.firstRestricted;this.throwUnexpectedToken(_,P.message)}return{simple:P.simple,params:y,stricted:P.stricted,firstRestricted:P.firstRestricted,message:P.message}},C.prototype.parseAssignmentExpression=function(){var O;if(!this.context.allowYield&&this.matchKeyword("yield"))O=this.parseYieldExpression();else{var y=this.lookahead,P=y;if(O=this.parseConditionalExpression(),P.type===3&&P.lineNumber===this.lookahead.lineNumber&&P.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var w=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(w),O={type:m,params:[w],async:!0}}if(O.type===m||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var D=O.async,A=this.reinterpretAsCoverFormalsList(O);if(A){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var _=this.context.strict,I=this.context.allowStrictDirective;this.context.allowStrictDirective=A.simple;var F=this.context.allowYield,q=this.context.await;this.context.allowYield=!0,this.context.await=D;var j=this.startNode(y);this.expect("=>");var z=void 0;if(this.match("{")){var B=this.context.allowIn;this.context.allowIn=!0,z=this.parseFunctionSourceElements(),this.context.allowIn=B}else z=this.isolateCoverGrammar(this.parseAssignmentExpression);var L=z.type!==d.Syntax.BlockStatement;this.context.strict&&A.firstRestricted&&this.throwUnexpectedToken(A.firstRestricted,A.message),this.context.strict&&A.stricted&&this.tolerateUnexpectedToken(A.stricted,A.message),O=D?this.finalize(j,new h.AsyncArrowFunctionExpression(A.params,z,L)):this.finalize(j,new h.ArrowFunctionExpression(A.params,z,L)),this.context.strict=_,this.context.allowStrictDirective=I,this.context.allowYield=F,this.context.await=q}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment),this.context.strict&&O.type===d.Syntax.Identifier){var M=O;this.scanner.isRestrictedWord(M.name)&&this.tolerateUnexpectedToken(P,l.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(M.name)&&this.tolerateUnexpectedToken(P,l.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(O):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),P=this.nextToken();var U=P.value,K=this.isolateCoverGrammar(this.parseAssignmentExpression);O=this.finalize(this.startNode(y),new h.AssignmentExpression(U,O,K)),this.context.firstCoverInitializedNameError=null}}return O},C.prototype.parseExpression=function(){var O=this.lookahead,y=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var P=[];for(P.push(y);this.lookahead.type!==2&&this.match(",");)this.nextToken(),P.push(this.isolateCoverGrammar(this.parseAssignmentExpression));y=this.finalize(this.startNode(O),new h.SequenceExpression(P))}return y},C.prototype.parseStatementListItem=function(){var O;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,l.Messages.IllegalExportDeclaration),O=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,l.Messages.IllegalImportDeclaration),O=this.parseImportDeclaration();break;case"const":O=this.parseLexicalDeclaration({inFor:!1});break;case"function":O=this.parseFunctionDeclaration();break;case"class":O=this.parseClassDeclaration();break;case"let":O=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:O=this.parseStatement();break}else O=this.parseStatement();return O},C.prototype.parseBlock=function(){var O=this.createNode();this.expect("{");for(var y=[];!this.match("}");)y.push(this.parseStatementListItem());return this.expect("}"),this.finalize(O,new h.BlockStatement(y))},C.prototype.parseLexicalBinding=function(O,y){var P=this.createNode(),w=[],D=this.parsePattern(w,O);this.context.strict&&D.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(D.name)&&this.tolerateError(l.Messages.StrictVarName);var A=null;return O==="const"?!this.matchKeyword("in")&&!this.matchContextualKeyword("of")&&(this.match("=")?(this.nextToken(),A=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(l.Messages.DeclarationMissingInitializer,"const")):(!y.inFor&&D.type!==d.Syntax.Identifier||this.match("="))&&(this.expect("="),A=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(P,new h.VariableDeclarator(D,A))},C.prototype.parseBindingList=function(O,y){for(var P=[this.parseLexicalBinding(O,y)];this.match(",");)this.nextToken(),P.push(this.parseLexicalBinding(O,y));return P},C.prototype.isLexicalDeclaration=function(){var O=this.scanner.saveState();this.scanner.scanComments();var y=this.scanner.lex();return this.scanner.restoreState(O),y.type===3||y.type===7&&y.value==="["||y.type===7&&y.value==="{"||y.type===4&&y.value==="let"||y.type===4&&y.value==="yield"},C.prototype.parseLexicalDeclaration=function(O){var y=this.createNode(),P=this.nextToken().value;o.assert(P==="let"||P==="const","Lexical declaration must be either let or const");var w=this.parseBindingList(P,O);return this.consumeSemicolon(),this.finalize(y,new h.VariableDeclaration(w,P))},C.prototype.parseBindingRestElement=function(O,y){var P=this.createNode();this.expect("...");var w=this.parsePattern(O,y);return this.finalize(P,new h.RestElement(w))},C.prototype.parseArrayPattern=function(O,y){var P=this.createNode();this.expect("[");for(var w=[];!this.match("]");)if(this.match(","))this.nextToken(),w.push(null);else{if(this.match("...")){w.push(this.parseBindingRestElement(O,y));break}else w.push(this.parsePatternWithDefault(O,y));this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(P,new h.ArrayPattern(w))},C.prototype.parsePropertyPattern=function(O,y){var P=this.createNode(),w=!1,D=!1,A=!1,_,I;if(this.lookahead.type===3){var F=this.lookahead;_=this.parseVariableIdentifier();var q=this.finalize(P,new h.Identifier(F.value));if(this.match("=")){O.push(F),D=!0,this.nextToken();var j=this.parseAssignmentExpression();I=this.finalize(this.startNode(F),new h.AssignmentPattern(q,j))}else this.match(":")?(this.expect(":"),I=this.parsePatternWithDefault(O,y)):(O.push(F),D=!0,I=q)}else w=this.match("["),_=this.parseObjectPropertyKey(),this.expect(":"),I=this.parsePatternWithDefault(O,y);return this.finalize(P,new h.Property("init",_,w,I,A,D))},C.prototype.parseObjectPattern=function(O,y){var P=this.createNode(),w=[];for(this.expect("{");!this.match("}");)w.push(this.parsePropertyPattern(O,y)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(P,new h.ObjectPattern(w))},C.prototype.parsePattern=function(O,y){var P;return this.match("[")?P=this.parseArrayPattern(O,y):this.match("{")?P=this.parseObjectPattern(O,y):(this.matchKeyword("let")&&(y==="const"||y==="let")&&this.tolerateUnexpectedToken(this.lookahead,l.Messages.LetInLexicalBinding),O.push(this.lookahead),P=this.parseVariableIdentifier(y)),P},C.prototype.parsePatternWithDefault=function(O,y){var P=this.lookahead,w=this.parsePattern(O,y);if(this.match("=")){this.nextToken();var D=this.context.allowYield;this.context.allowYield=!0;var A=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=D,w=this.finalize(this.startNode(P),new h.AssignmentPattern(w,A))}return w},C.prototype.parseVariableIdentifier=function(O){var y=this.createNode(),P=this.nextToken();return P.type===4&&P.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(P,l.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(P):P.type!==3?this.context.strict&&P.type===4&&this.scanner.isStrictModeReservedWord(P.value)?this.tolerateUnexpectedToken(P,l.Messages.StrictReservedWord):(this.context.strict||P.value!=="let"||O!=="var")&&this.throwUnexpectedToken(P):(this.context.isModule||this.context.await)&&P.type===3&&P.value==="await"&&this.tolerateUnexpectedToken(P),this.finalize(y,new h.Identifier(P.value))},C.prototype.parseVariableDeclaration=function(O){var y=this.createNode(),P=[],w=this.parsePattern(P,"var");this.context.strict&&w.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(w.name)&&this.tolerateError(l.Messages.StrictVarName);var D=null;return this.match("=")?(this.nextToken(),D=this.isolateCoverGrammar(this.parseAssignmentExpression)):w.type!==d.Syntax.Identifier&&!O.inFor&&this.expect("="),this.finalize(y,new h.VariableDeclarator(w,D))},C.prototype.parseVariableDeclarationList=function(O){var y={inFor:O.inFor},P=[];for(P.push(this.parseVariableDeclaration(y));this.match(",");)this.nextToken(),P.push(this.parseVariableDeclaration(y));return P},C.prototype.parseVariableStatement=function(){var O=this.createNode();this.expectKeyword("var");var y=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(O,new h.VariableDeclaration(y,"var"))},C.prototype.parseEmptyStatement=function(){var O=this.createNode();return this.expect(";"),this.finalize(O,new h.EmptyStatement)},C.prototype.parseExpressionStatement=function(){var O=this.createNode(),y=this.parseExpression();return this.consumeSemicolon(),this.finalize(O,new h.ExpressionStatement(y))},C.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(l.Messages.StrictFunction),this.parseStatement()},C.prototype.parseIfStatement=function(){var O=this.createNode(),y,P=null;this.expectKeyword("if"),this.expect("(");var w=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement)):(this.expect(")"),y=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),P=this.parseIfClause())),this.finalize(O,new h.IfStatement(w,y,P))},C.prototype.parseDoWhileStatement=function(){var O=this.createNode();this.expectKeyword("do");var y=this.context.inIteration;this.context.inIteration=!0;var P=this.parseStatement();this.context.inIteration=y,this.expectKeyword("while"),this.expect("(");var w=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(O,new h.DoWhileStatement(P,w))},C.prototype.parseWhileStatement=function(){var O=this.createNode(),y;this.expectKeyword("while"),this.expect("(");var P=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement);else{this.expect(")");var w=this.context.inIteration;this.context.inIteration=!0,y=this.parseStatement(),this.context.inIteration=w}return this.finalize(O,new h.WhileStatement(P,y))},C.prototype.parseForStatement=function(){var O=null,y=null,P=null,w=!0,D,A,_=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){O=this.createNode(),this.nextToken();var I=this.context.allowIn;this.context.allowIn=!1;var F=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=I,F.length===1&&this.matchKeyword("in")){var q=F[0];q.init&&(q.id.type===d.Syntax.ArrayPattern||q.id.type===d.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(l.Messages.ForInOfLoopInitializer,"for-in"),O=this.finalize(O,new h.VariableDeclaration(F,"var")),this.nextToken(),D=O,A=this.parseExpression(),O=null}else F.length===1&&F[0].init===null&&this.matchContextualKeyword("of")?(O=this.finalize(O,new h.VariableDeclaration(F,"var")),this.nextToken(),D=O,A=this.parseAssignmentExpression(),O=null,w=!1):(O=this.finalize(O,new h.VariableDeclaration(F,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){O=this.createNode();var j=this.nextToken().value;if(!this.context.strict&&this.lookahead.value==="in")O=this.finalize(O,new h.Identifier(j)),this.nextToken(),D=O,A=this.parseExpression(),O=null;else{var I=this.context.allowIn;this.context.allowIn=!1;var F=this.parseBindingList(j,{inFor:!0});this.context.allowIn=I,F.length===1&&F[0].init===null&&this.matchKeyword("in")?(O=this.finalize(O,new h.VariableDeclaration(F,j)),this.nextToken(),D=O,A=this.parseExpression(),O=null):F.length===1&&F[0].init===null&&this.matchContextualKeyword("of")?(O=this.finalize(O,new h.VariableDeclaration(F,j)),this.nextToken(),D=O,A=this.parseAssignmentExpression(),O=null,w=!1):(this.consumeSemicolon(),O=this.finalize(O,new h.VariableDeclaration(F,j)))}}else{var z=this.lookahead,I=this.context.allowIn;if(this.context.allowIn=!1,O=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=I,this.matchKeyword("in"))(!this.context.isAssignmentTarget||O.type===d.Syntax.AssignmentExpression)&&this.tolerateError(l.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(O),D=O,A=this.parseExpression(),O=null;else if(this.matchContextualKeyword("of"))(!this.context.isAssignmentTarget||O.type===d.Syntax.AssignmentExpression)&&this.tolerateError(l.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(O),D=O,A=this.parseAssignmentExpression(),O=null,w=!1;else{if(this.match(",")){for(var B=[O];this.match(",");)this.nextToken(),B.push(this.isolateCoverGrammar(this.parseAssignmentExpression));O=this.finalize(this.startNode(z),new h.SequenceExpression(B))}this.expect(";")}}typeof D>"u"&&(this.match(";")||(y=this.parseExpression()),this.expect(";"),this.match(")")||(P=this.parseExpression()));var L;if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),L=this.finalize(this.createNode(),new h.EmptyStatement);else{this.expect(")");var M=this.context.inIteration;this.context.inIteration=!0,L=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=M}return typeof D>"u"?this.finalize(_,new h.ForStatement(O,y,P,L)):w?this.finalize(_,new h.ForInStatement(D,A,L)):this.finalize(_,new h.ForOfStatement(D,A,L))},C.prototype.parseContinueStatement=function(){var O=this.createNode();this.expectKeyword("continue");var y=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var P=this.parseVariableIdentifier();y=P;var w="$"+P.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,w)||this.throwError(l.Messages.UnknownLabel,P.name)}return this.consumeSemicolon(),y===null&&!this.context.inIteration&&this.throwError(l.Messages.IllegalContinue),this.finalize(O,new h.ContinueStatement(y))},C.prototype.parseBreakStatement=function(){var O=this.createNode();this.expectKeyword("break");var y=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var P=this.parseVariableIdentifier(),w="$"+P.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,w)||this.throwError(l.Messages.UnknownLabel,P.name),y=P}return this.consumeSemicolon(),y===null&&!this.context.inIteration&&!this.context.inSwitch&&this.throwError(l.Messages.IllegalBreak),this.finalize(O,new h.BreakStatement(y))},C.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(l.Messages.IllegalReturn);var O=this.createNode();this.expectKeyword("return");var y=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&this.lookahead.type!==2||this.lookahead.type===8||this.lookahead.type===10,P=y?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(O,new h.ReturnStatement(P))},C.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(l.Messages.StrictModeWith);var O=this.createNode(),y;this.expectKeyword("with"),this.expect("(");var P=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement)):(this.expect(")"),y=this.parseStatement()),this.finalize(O,new h.WithStatement(P,y))},C.prototype.parseSwitchCase=function(){var O=this.createNode(),y;this.matchKeyword("default")?(this.nextToken(),y=null):(this.expectKeyword("case"),y=this.parseExpression()),this.expect(":");for(var P=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)P.push(this.parseStatementListItem());return this.finalize(O,new h.SwitchCase(y,P))},C.prototype.parseSwitchStatement=function(){var O=this.createNode();this.expectKeyword("switch"),this.expect("(");var y=this.parseExpression();this.expect(")");var P=this.context.inSwitch;this.context.inSwitch=!0;var w=[],D=!1;for(this.expect("{");!this.match("}");){var A=this.parseSwitchCase();A.test===null&&(D&&this.throwError(l.Messages.MultipleDefaultsInSwitch),D=!0),w.push(A)}return this.expect("}"),this.context.inSwitch=P,this.finalize(O,new h.SwitchStatement(y,w))},C.prototype.parseLabelledStatement=function(){var O=this.createNode(),y=this.parseExpression(),P;if(y.type===d.Syntax.Identifier&&this.match(":")){this.nextToken();var w=y,D="$"+w.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,D)&&this.throwError(l.Messages.Redeclaration,"Label",w.name),this.context.labelSet[D]=!0;var A=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),A=this.parseClassDeclaration();else if(this.matchKeyword("function")){var _=this.lookahead,I=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(_,l.Messages.StrictFunction):I.generator&&this.tolerateUnexpectedToken(_,l.Messages.GeneratorInLegacyContext),A=I}else A=this.parseStatement();delete this.context.labelSet[D],P=new h.LabeledStatement(w,A)}else this.consumeSemicolon(),P=new h.ExpressionStatement(y);return this.finalize(O,P)},C.prototype.parseThrowStatement=function(){var O=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(l.Messages.NewlineAfterThrow);var y=this.parseExpression();return this.consumeSemicolon(),this.finalize(O,new h.ThrowStatement(y))},C.prototype.parseCatchClause=function(){var O=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var y=[],P=this.parsePattern(y),w={},D=0;D<y.length;D++){var A="$"+y[D].value;Object.prototype.hasOwnProperty.call(w,A)&&this.tolerateError(l.Messages.DuplicateBinding,y[D].value),w[A]=!0}this.context.strict&&P.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(P.name)&&this.tolerateError(l.Messages.StrictCatchVariable),this.expect(")");var _=this.parseBlock();return this.finalize(O,new h.CatchClause(P,_))},C.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},C.prototype.parseTryStatement=function(){var O=this.createNode();this.expectKeyword("try");var y=this.parseBlock(),P=this.matchKeyword("catch")?this.parseCatchClause():null,w=this.matchKeyword("finally")?this.parseFinallyClause():null;return!P&&!w&&this.throwError(l.Messages.NoCatchOrFinally),this.finalize(O,new h.TryStatement(y,P,w))},C.prototype.parseDebuggerStatement=function(){var O=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(O,new h.DebuggerStatement)},C.prototype.parseStatement=function(){var O;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:O=this.parseExpressionStatement();break;case 7:var y=this.lookahead.value;y==="{"?O=this.parseBlock():y==="("?O=this.parseExpressionStatement():y===";"?O=this.parseEmptyStatement():O=this.parseExpressionStatement();break;case 3:O=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":O=this.parseBreakStatement();break;case"continue":O=this.parseContinueStatement();break;case"debugger":O=this.parseDebuggerStatement();break;case"do":O=this.parseDoWhileStatement();break;case"for":O=this.parseForStatement();break;case"function":O=this.parseFunctionDeclaration();break;case"if":O=this.parseIfStatement();break;case"return":O=this.parseReturnStatement();break;case"switch":O=this.parseSwitchStatement();break;case"throw":O=this.parseThrowStatement();break;case"try":O=this.parseTryStatement();break;case"var":O=this.parseVariableStatement();break;case"while":O=this.parseWhileStatement();break;case"with":O=this.parseWithStatement();break;default:O=this.parseExpressionStatement();break}break;default:O=this.throwUnexpectedToken(this.lookahead)}return O},C.prototype.parseFunctionSourceElements=function(){var O=this.createNode();this.expect("{");var y=this.parseDirectivePrologues(),P=this.context.labelSet,w=this.context.inIteration,D=this.context.inSwitch,A=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)y.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=P,this.context.inIteration=w,this.context.inSwitch=D,this.context.inFunctionBody=A,this.finalize(O,new h.BlockStatement(y))},C.prototype.validateParam=function(O,y,P){var w="$"+P;this.context.strict?(this.scanner.isRestrictedWord(P)&&(O.stricted=y,O.message=l.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(O.paramSet,w)&&(O.stricted=y,O.message=l.Messages.StrictParamDupe)):O.firstRestricted||(this.scanner.isRestrictedWord(P)?(O.firstRestricted=y,O.message=l.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(P)?(O.firstRestricted=y,O.message=l.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(O.paramSet,w)&&(O.stricted=y,O.message=l.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(O.paramSet,w,{value:!0,enumerable:!0,writable:!0,configurable:!0}):O.paramSet[w]=!0},C.prototype.parseRestElement=function(O){var y=this.createNode();this.expect("...");var P=this.parsePattern(O);return this.match("=")&&this.throwError(l.Messages.DefaultRestParameter),this.match(")")||this.throwError(l.Messages.ParameterAfterRestParameter),this.finalize(y,new h.RestElement(P))},C.prototype.parseFormalParameter=function(O){for(var y=[],P=this.match("...")?this.parseRestElement(y):this.parsePatternWithDefault(y),w=0;w<y.length;w++)this.validateParam(O,y[w],y[w].value);O.simple=O.simple&&P instanceof h.Identifier,O.params.push(P)},C.prototype.parseFormalParameters=function(O){var y;if(y={simple:!0,params:[],firstRestricted:O},this.expect("("),!this.match(")"))for(y.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(y),!(this.match(")")||(this.expect(","),this.match(")")))););return this.expect(")"),{simple:y.simple,params:y.params,stricted:y.stricted,firstRestricted:y.firstRestricted,message:y.message}},C.prototype.matchAsyncFunction=function(){var O=this.matchContextualKeyword("async");if(O){var y=this.scanner.saveState();this.scanner.scanComments();var P=this.scanner.lex();this.scanner.restoreState(y),O=y.lineNumber===P.lineNumber&&P.type===4&&P.value==="function"}return O},C.prototype.parseFunctionDeclaration=function(O){var y=this.createNode(),P=this.matchContextualKeyword("async");P&&this.nextToken(),this.expectKeyword("function");var w=P?!1:this.match("*");w&&this.nextToken();var D,A=null,_=null;if(!O||!this.match("(")){var I=this.lookahead;A=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(I.value)&&this.tolerateUnexpectedToken(I,l.Messages.StrictFunctionName):this.scanner.isRestrictedWord(I.value)?(_=I,D=l.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(I.value)&&(_=I,D=l.Messages.StrictReservedWord)}var F=this.context.await,q=this.context.allowYield;this.context.await=P,this.context.allowYield=!w;var j=this.parseFormalParameters(_),z=j.params,B=j.stricted;_=j.firstRestricted,j.message&&(D=j.message);var L=this.context.strict,M=this.context.allowStrictDirective;this.context.allowStrictDirective=j.simple;var U=this.parseFunctionSourceElements();return this.context.strict&&_&&this.throwUnexpectedToken(_,D),this.context.strict&&B&&this.tolerateUnexpectedToken(B,D),this.context.strict=L,this.context.allowStrictDirective=M,this.context.await=F,this.context.allowYield=q,P?this.finalize(y,new h.AsyncFunctionDeclaration(A,z,U)):this.finalize(y,new h.FunctionDeclaration(A,z,U,w))},C.prototype.parseFunctionExpression=function(){var O=this.createNode(),y=this.matchContextualKeyword("async");y&&this.nextToken(),this.expectKeyword("function");var P=y?!1:this.match("*");P&&this.nextToken();var w,D=null,A,_=this.context.await,I=this.context.allowYield;if(this.context.await=y,this.context.allowYield=!P,!this.match("(")){var F=this.lookahead;D=!this.context.strict&&!P&&this.matchKeyword("yield")?this.parseIdentifierName():this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(F.value)&&this.tolerateUnexpectedToken(F,l.Messages.StrictFunctionName):this.scanner.isRestrictedWord(F.value)?(A=F,w=l.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(F.value)&&(A=F,w=l.Messages.StrictReservedWord)}var q=this.parseFormalParameters(A),j=q.params,z=q.stricted;A=q.firstRestricted,q.message&&(w=q.message);var B=this.context.strict,L=this.context.allowStrictDirective;this.context.allowStrictDirective=q.simple;var M=this.parseFunctionSourceElements();return this.context.strict&&A&&this.throwUnexpectedToken(A,w),this.context.strict&&z&&this.tolerateUnexpectedToken(z,w),this.context.strict=B,this.context.allowStrictDirective=L,this.context.await=_,this.context.allowYield=I,y?this.finalize(O,new h.AsyncFunctionExpression(D,j,M)):this.finalize(O,new h.FunctionExpression(D,j,M,P))},C.prototype.parseDirective=function(){var O=this.lookahead,y=this.createNode(),P=this.parseExpression(),w=P.type===d.Syntax.Literal?this.getTokenRaw(O).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(y,w?new h.Directive(P,w):new h.ExpressionStatement(P))},C.prototype.parseDirectivePrologues=function(){for(var O=null,y=[];;){var P=this.lookahead;if(P.type!==8)break;var w=this.parseDirective();y.push(w);var D=w.directive;if(typeof D!="string")break;D==="use strict"?(this.context.strict=!0,O&&this.tolerateUnexpectedToken(O,l.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(P,l.Messages.IllegalLanguageModeDirective)):!O&&P.octal&&(O=P)}return y},C.prototype.qualifiedPropertyName=function(O){switch(O.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return O.value==="["}return!1},C.prototype.parseGetterMethod=function(){var O=this.createNode(),y=!1,P=this.context.allowYield;this.context.allowYield=!y;var w=this.parseFormalParameters();w.params.length>0&&this.tolerateError(l.Messages.BadGetterArity);var D=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(O,new h.FunctionExpression(null,w.params,D,y))},C.prototype.parseSetterMethod=function(){var O=this.createNode(),y=!1,P=this.context.allowYield;this.context.allowYield=!y;var w=this.parseFormalParameters();w.params.length!==1?this.tolerateError(l.Messages.BadSetterArity):w.params[0]instanceof h.RestElement&&this.tolerateError(l.Messages.BadSetterRestParameter);var D=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(O,new h.FunctionExpression(null,w.params,D,y))},C.prototype.parseGeneratorMethod=function(){var O=this.createNode(),y=!0,P=this.context.allowYield;this.context.allowYield=!0;var w=this.parseFormalParameters();this.context.allowYield=!1;var D=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(O,new h.FunctionExpression(null,w.params,D,y))},C.prototype.isStartOfExpression=function(){var O=!0,y=this.lookahead.value;switch(this.lookahead.type){case 7:O=y==="["||y==="("||y==="{"||y==="+"||y==="-"||y==="!"||y==="~"||y==="++"||y==="--"||y==="/"||y==="/=";break;case 4:O=y==="class"||y==="delete"||y==="function"||y==="let"||y==="new"||y==="super"||y==="this"||y==="typeof"||y==="void"||y==="yield";break}return O},C.prototype.parseYieldExpression=function(){var O=this.createNode();this.expectKeyword("yield");var y=null,P=!1;if(!this.hasLineTerminator){var w=this.context.allowYield;this.context.allowYield=!1,P=this.match("*"),P?(this.nextToken(),y=this.parseAssignmentExpression()):this.isStartOfExpression()&&(y=this.parseAssignmentExpression()),this.context.allowYield=w}return this.finalize(O,new h.YieldExpression(y,P))},C.prototype.parseClassElement=function(O){var y=this.lookahead,P=this.createNode(),w="",D=null,A=null,_=!1,I=!1,F=!1,q=!1;if(this.match("*"))this.nextToken();else{_=this.match("["),D=this.parseObjectPropertyKey();var j=D;if(j.name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(y=this.lookahead,F=!0,_=this.match("["),this.match("*")?this.nextToken():D=this.parseObjectPropertyKey()),y.type===3&&!this.hasLineTerminator&&y.value==="async"){var z=this.lookahead.value;z!==":"&&z!=="("&&z!=="*"&&(q=!0,y=this.lookahead,D=this.parseObjectPropertyKey(),y.type===3&&y.value==="constructor"&&this.tolerateUnexpectedToken(y,l.Messages.ConstructorIsAsync))}}var B=this.qualifiedPropertyName(this.lookahead);return y.type===3?y.value==="get"&&B?(w="get",_=this.match("["),D=this.parseObjectPropertyKey(),this.context.allowYield=!1,A=this.parseGetterMethod()):y.value==="set"&&B&&(w="set",_=this.match("["),D=this.parseObjectPropertyKey(),A=this.parseSetterMethod()):y.type===7&&y.value==="*"&&B&&(w="init",_=this.match("["),D=this.parseObjectPropertyKey(),A=this.parseGeneratorMethod(),I=!0),!w&&D&&this.match("(")&&(w="init",A=q?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),I=!0),w||this.throwUnexpectedToken(this.lookahead),w==="init"&&(w="method"),_||(F&&this.isPropertyKey(D,"prototype")&&this.throwUnexpectedToken(y,l.Messages.StaticPrototype),!F&&this.isPropertyKey(D,"constructor")&&((w!=="method"||!I||A&&A.generator)&&this.throwUnexpectedToken(y,l.Messages.ConstructorSpecialMethod),O.value?this.throwUnexpectedToken(y,l.Messages.DuplicateConstructor):O.value=!0,w="constructor")),this.finalize(P,new h.MethodDefinition(D,_,A,w,F))},C.prototype.parseClassElementList=function(){var O=[],y={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():O.push(this.parseClassElement(y));return this.expect("}"),O},C.prototype.parseClassBody=function(){var O=this.createNode(),y=this.parseClassElementList();return this.finalize(O,new h.ClassBody(y))},C.prototype.parseClassDeclaration=function(O){var y=this.createNode(),P=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var w=O&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),D=null;this.matchKeyword("extends")&&(this.nextToken(),D=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var A=this.parseClassBody();return this.context.strict=P,this.finalize(y,new h.ClassDeclaration(w,D,A))},C.prototype.parseClassExpression=function(){var O=this.createNode(),y=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var P=this.lookahead.type===3?this.parseVariableIdentifier():null,w=null;this.matchKeyword("extends")&&(this.nextToken(),w=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var D=this.parseClassBody();return this.context.strict=y,this.finalize(O,new h.ClassExpression(P,w,D))},C.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var O=this.createNode(),y=this.parseDirectivePrologues();this.lookahead.type!==2;)y.push(this.parseStatementListItem());return this.finalize(O,new h.Module(y))},C.prototype.parseScript=function(){for(var O=this.createNode(),y=this.parseDirectivePrologues();this.lookahead.type!==2;)y.push(this.parseStatementListItem());return this.finalize(O,new h.Script(y))},C.prototype.parseModuleSpecifier=function(){var O=this.createNode();this.lookahead.type!==8&&this.throwError(l.Messages.InvalidModuleSpecifier);var y=this.nextToken(),P=this.getTokenRaw(y);return this.finalize(O,new h.Literal(y.value,P))},C.prototype.parseImportSpecifier=function(){var O=this.createNode(),y,P;return this.lookahead.type===3?(y=this.parseVariableIdentifier(),P=y,this.matchContextualKeyword("as")&&(this.nextToken(),P=this.parseVariableIdentifier())):(y=this.parseIdentifierName(),P=y,this.matchContextualKeyword("as")?(this.nextToken(),P=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(O,new h.ImportSpecifier(P,y))},C.prototype.parseNamedImports=function(){this.expect("{");for(var O=[];!this.match("}");)O.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),O},C.prototype.parseImportDefaultSpecifier=function(){var O=this.createNode(),y=this.parseIdentifierName();return this.finalize(O,new h.ImportDefaultSpecifier(y))},C.prototype.parseImportNamespaceSpecifier=function(){var O=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(l.Messages.NoAsAfterImportNamespace),this.nextToken();var y=this.parseIdentifierName();return this.finalize(O,new h.ImportNamespaceSpecifier(y))},C.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(l.Messages.IllegalImportDeclaration);var O=this.createNode();this.expectKeyword("import");var y,P=[];if(this.lookahead.type===8)y=this.parseModuleSpecifier();else{if(this.match("{")?P=P.concat(this.parseNamedImports()):this.match("*")?P.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(P.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?P.push(this.parseImportNamespaceSpecifier()):this.match("{")?P=P.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var w=this.lookahead.value?l.Messages.UnexpectedToken:l.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}this.nextToken(),y=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(O,new h.ImportDeclaration(P,y))},C.prototype.parseExportSpecifier=function(){var O=this.createNode(),y=this.parseIdentifierName(),P=y;return this.matchContextualKeyword("as")&&(this.nextToken(),P=this.parseIdentifierName()),this.finalize(O,new h.ExportSpecifier(y,P))},C.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(l.Messages.IllegalExportDeclaration);var O=this.createNode();this.expectKeyword("export");var y;if(this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var P=this.parseFunctionDeclaration(!0);y=this.finalize(O,new h.ExportDefaultDeclaration(P))}else if(this.matchKeyword("class")){var P=this.parseClassDeclaration(!0);y=this.finalize(O,new h.ExportDefaultDeclaration(P))}else if(this.matchContextualKeyword("async")){var P=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression();y=this.finalize(O,new h.ExportDefaultDeclaration(P))}else{this.matchContextualKeyword("from")&&this.throwError(l.Messages.UnexpectedToken,this.lookahead.value);var P=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),y=this.finalize(O,new h.ExportDefaultDeclaration(P))}else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var w=this.lookahead.value?l.Messages.UnexpectedToken:l.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}this.nextToken();var D=this.parseModuleSpecifier();this.consumeSemicolon(),y=this.finalize(O,new h.ExportAllDeclaration(D))}else if(this.lookahead.type===4){var P=void 0;switch(this.lookahead.value){case"let":case"const":P=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":P=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}y=this.finalize(O,new h.ExportNamedDeclaration(P,[],null))}else if(this.matchAsyncFunction()){var P=this.parseFunctionDeclaration();y=this.finalize(O,new h.ExportNamedDeclaration(P,[],null))}else{var A=[],_=null,I=!1;for(this.expect("{");!this.match("}");)I=I||this.matchKeyword("default"),A.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");if(this.expect("}"),this.matchContextualKeyword("from"))this.nextToken(),_=this.parseModuleSpecifier(),this.consumeSemicolon();else if(I){var w=this.lookahead.value?l.Messages.UnexpectedToken:l.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}else this.consumeSemicolon();y=this.finalize(O,new h.ExportNamedDeclaration(null,A,_))}return y},C}();i.Parser=v},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});function r(o,s){if(!o)throw new Error("ASSERT: "+s)}i.assert=r},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function o(){this.errors=[],this.tolerant=!1}return o.prototype.recordError=function(s){this.errors.push(s)},o.prototype.tolerate=function(s){if(this.tolerant)this.recordError(s);else throw s},o.prototype.constructError=function(s,l){var h=new Error(s);try{throw h}catch(c){Object.create&&Object.defineProperty&&(h=Object.create(c),Object.defineProperty(h,"column",{value:l}))}return h},o.prototype.createError=function(s,l,h,c){var d="Line "+l+": "+c,f=this.constructError(d,h);return f.index=s,f.lineNumber=l,f.description=c,f},o.prototype.throwError=function(s,l,h,c){throw this.createError(s,l,h,c)},o.prototype.tolerateError=function(s,l,h,c){var d=this.createError(s,l,h,c);if(this.tolerant)this.recordError(d);else throw d},o}();i.ErrorHandler=r},function(n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(9),s=r(4),l=r(11);function h(f){return"0123456789abcdef".indexOf(f.toLowerCase())}function c(f){return"01234567".indexOf(f)}var d=function(){function f(m,v){this.source=m,this.errorHandler=v,this.trackComment=!1,this.isModule=!1,this.length=m.length,this.index=0,this.lineNumber=m.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return f.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},f.prototype.restoreState=function(m){this.index=m.index,this.lineNumber=m.lineNumber,this.lineStart=m.lineStart},f.prototype.eof=function(){return this.index>=this.length},f.prototype.throwUnexpectedToken=function(m){return m===void 0&&(m=l.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},f.prototype.tolerateUnexpectedToken=function(m){m===void 0&&(m=l.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},f.prototype.skipSingleLineComment=function(m){var v=[],C,O;for(this.trackComment&&(v=[],C=this.index-m,O={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{}});!this.eof();){var y=this.source.charCodeAt(this.index);if(++this.index,s.Character.isLineTerminator(y)){if(this.trackComment){O.end={line:this.lineNumber,column:this.index-this.lineStart-1};var P={multiLine:!1,slice:[C+m,this.index-1],range:[C,this.index-1],loc:O};v.push(P)}return y===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,v}}if(this.trackComment){O.end={line:this.lineNumber,column:this.index-this.lineStart};var P={multiLine:!1,slice:[C+m,this.index],range:[C,this.index],loc:O};v.push(P)}return v},f.prototype.skipMultiLineComment=function(){var m=[],v,C;for(this.trackComment&&(m=[],v=this.index-2,C={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var O=this.source.charCodeAt(this.index);if(s.Character.isLineTerminator(O))O===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(O===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){C.end={line:this.lineNumber,column:this.index-this.lineStart};var y={multiLine:!0,slice:[v+2,this.index-2],range:[v,this.index],loc:C};m.push(y)}return m}++this.index}else++this.index}if(this.trackComment){C.end={line:this.lineNumber,column:this.index-this.lineStart};var y={multiLine:!0,slice:[v+2,this.index],range:[v,this.index],loc:C};m.push(y)}return this.tolerateUnexpectedToken(),m},f.prototype.scanComments=function(){var m;this.trackComment&&(m=[]);for(var v=this.index===0;!this.eof();){var C=this.source.charCodeAt(this.index);if(s.Character.isWhiteSpace(C))++this.index;else if(s.Character.isLineTerminator(C))++this.index,C===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,v=!0;else if(C===47)if(C=this.source.charCodeAt(this.index+1),C===47){this.index+=2;var O=this.skipSingleLineComment(2);this.trackComment&&(m=m.concat(O)),v=!0}else if(C===42){this.index+=2;var O=this.skipMultiLineComment();this.trackComment&&(m=m.concat(O))}else break;else if(v&&C===45)if(this.source.charCodeAt(this.index+1)===45&&this.source.charCodeAt(this.index+2)===62){this.index+=3;var O=this.skipSingleLineComment(3);this.trackComment&&(m=m.concat(O))}else break;else if(C===60&&!this.isModule)if(this.source.slice(this.index+1,this.index+4)==="!--"){this.index+=4;var O=this.skipSingleLineComment(4);this.trackComment&&(m=m.concat(O))}else break;else break}return m},f.prototype.isFutureReservedWord=function(m){switch(m){case"enum":case"export":case"import":case"super":return!0;default:return!1}},f.prototype.isStrictModeReservedWord=function(m){switch(m){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},f.prototype.isRestrictedWord=function(m){return m==="eval"||m==="arguments"},f.prototype.isKeyword=function(m){switch(m.length){case 2:return m==="if"||m==="in"||m==="do";case 3:return m==="var"||m==="for"||m==="new"||m==="try"||m==="let";case 4:return m==="this"||m==="else"||m==="case"||m==="void"||m==="with"||m==="enum";case 5:return m==="while"||m==="break"||m==="catch"||m==="throw"||m==="const"||m==="yield"||m==="class"||m==="super";case 6:return m==="return"||m==="typeof"||m==="delete"||m==="switch"||m==="export"||m==="import";case 7:return m==="default"||m==="finally"||m==="extends";case 8:return m==="function"||m==="continue"||m==="debugger";case 10:return m==="instanceof";default:return!1}},f.prototype.codePointAt=function(m){var v=this.source.charCodeAt(m);if(v>=55296&&v<=56319){var C=this.source.charCodeAt(m+1);if(C>=56320&&C<=57343){var O=v;v=(O-55296)*1024+C-56320+65536}}return v},f.prototype.scanHexEscape=function(m){for(var v=m==="u"?4:2,C=0,O=0;O<v;++O)if(!this.eof()&&s.Character.isHexDigit(this.source.charCodeAt(this.index)))C=C*16+h(this.source[this.index++]);else return null;return String.fromCharCode(C)},f.prototype.scanUnicodeCodePointEscape=function(){var m=this.source[this.index],v=0;for(m==="}"&&this.throwUnexpectedToken();!this.eof()&&(m=this.source[this.index++],!!s.Character.isHexDigit(m.charCodeAt(0)));)v=v*16+h(m);return(v>1114111||m!=="}")&&this.throwUnexpectedToken(),s.Character.fromCodePoint(v)},f.prototype.getIdentifier=function(){for(var m=this.index++;!this.eof();){var v=this.source.charCodeAt(this.index);if(v===92)return this.index=m,this.getComplexIdentifier();if(v>=55296&&v<57343)return this.index=m,this.getComplexIdentifier();if(s.Character.isIdentifierPart(v))++this.index;else break}return this.source.slice(m,this.index)},f.prototype.getComplexIdentifier=function(){var m=this.codePointAt(this.index),v=s.Character.fromCodePoint(m);this.index+=v.length;var C;for(m===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,C=this.scanUnicodeCodePointEscape()):(C=this.scanHexEscape("u"),(C===null||C==="\\"||!s.Character.isIdentifierStart(C.charCodeAt(0)))&&this.throwUnexpectedToken()),v=C);!this.eof()&&(m=this.codePointAt(this.index),!!s.Character.isIdentifierPart(m));)C=s.Character.fromCodePoint(m),v+=C,this.index+=C.length,m===92&&(v=v.substr(0,v.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,C=this.scanUnicodeCodePointEscape()):(C=this.scanHexEscape("u"),(C===null||C==="\\"||!s.Character.isIdentifierPart(C.charCodeAt(0)))&&this.throwUnexpectedToken()),v+=C);return v},f.prototype.octalToDecimal=function(m){var v=m!=="0",C=c(m);return!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(v=!0,C=C*8+c(this.source[this.index++]),"0123".indexOf(m)>=0&&!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(C=C*8+c(this.source[this.index++]))),{code:C,octal:v}},f.prototype.scanIdentifier=function(){var m,v=this.index,C=this.source.charCodeAt(v)===92?this.getComplexIdentifier():this.getIdentifier();if(C.length===1?m=3:this.isKeyword(C)?m=4:C==="null"?m=5:C==="true"||C==="false"?m=1:m=3,m!==3&&v+C.length!==this.index){var O=this.index;this.index=v,this.tolerateUnexpectedToken(l.Messages.InvalidEscapedReservedWord),this.index=O}return{type:m,value:C,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}},f.prototype.scanPunctuator=function(){var m=this.index,v=this.source[this.index];switch(v){case"(":case"{":v==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,v="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:v=this.source.substr(this.index,4),v===">>>="?this.index+=4:(v=v.substr(0,3),v==="==="||v==="!=="||v===">>>"||v==="<<="||v===">>="||v==="**="?this.index+=3:(v=v.substr(0,2),v==="&&"||v==="||"||v==="=="||v==="!="||v==="+="||v==="-="||v==="*="||v==="/="||v==="++"||v==="--"||v==="<<"||v===">>"||v==="&="||v==="|="||v==="^="||v==="%="||v==="<="||v===">="||v==="=>"||v==="**"?this.index+=2:(v=this.source[this.index],"<>=!+-*%&|^/".indexOf(v)>=0&&++this.index)))}return this.index===m&&this.throwUnexpectedToken(),{type:7,value:v,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanHexLiteral=function(m){for(var v="";!this.eof()&&s.Character.isHexDigit(this.source.charCodeAt(this.index));)v+=this.source[this.index++];return v.length===0&&this.throwUnexpectedToken(),s.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+v,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanBinaryLiteral=function(m){for(var v="",C;!this.eof()&&(C=this.source[this.index],!(C!=="0"&&C!=="1"));)v+=this.source[this.index++];return v.length===0&&this.throwUnexpectedToken(),this.eof()||(C=this.source.charCodeAt(this.index),(s.Character.isIdentifierStart(C)||s.Character.isDecimalDigit(C))&&this.throwUnexpectedToken()),{type:6,value:parseInt(v,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanOctalLiteral=function(m,v){var C="",O=!1;for(s.Character.isOctalDigit(m.charCodeAt(0))?(O=!0,C="0"+this.source[this.index++]):++this.index;!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index));)C+=this.source[this.index++];return!O&&C.length===0&&this.throwUnexpectedToken(),(s.Character.isIdentifierStart(this.source.charCodeAt(this.index))||s.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(C,8),octal:O,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}},f.prototype.isImplicitOctalLiteral=function(){for(var m=this.index+1;m<this.length;++m){var v=this.source[m];if(v==="8"||v==="9")return!1;if(!s.Character.isOctalDigit(v.charCodeAt(0)))return!0}return!0},f.prototype.scanNumericLiteral=function(){var m=this.index,v=this.source[m];o.assert(s.Character.isDecimalDigit(v.charCodeAt(0))||v===".","Numeric literal must start with a decimal digit or a decimal point");var C="";if(v!=="."){if(C=this.source[this.index++],v=this.source[this.index],C==="0"){if(v==="x"||v==="X")return++this.index,this.scanHexLiteral(m);if(v==="b"||v==="B")return++this.index,this.scanBinaryLiteral(m);if(v==="o"||v==="O")return this.scanOctalLiteral(v,m);if(v&&s.Character.isOctalDigit(v.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(v,m)}for(;s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)C+=this.source[this.index++];v=this.source[this.index]}if(v==="."){for(C+=this.source[this.index++];s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)C+=this.source[this.index++];v=this.source[this.index]}if(v==="e"||v==="E")if(C+=this.source[this.index++],v=this.source[this.index],(v==="+"||v==="-")&&(C+=this.source[this.index++]),s.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)C+=this.source[this.index++];else this.throwUnexpectedToken();return s.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(C),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanStringLiteral=function(){var m=this.index,v=this.source[m];o.assert(v==="'"||v==='"',"String literal must starts with a quote"),++this.index;for(var C=!1,O="";!this.eof();){var y=this.source[this.index++];if(y===v){v="";break}else if(y==="\\")if(y=this.source[this.index++],!y||!s.Character.isLineTerminator(y.charCodeAt(0)))switch(y){case"u":if(this.source[this.index]==="{")++this.index,O+=this.scanUnicodeCodePointEscape();else{var P=this.scanHexEscape(y);P===null&&this.throwUnexpectedToken(),O+=P}break;case"x":var w=this.scanHexEscape(y);w===null&&this.throwUnexpectedToken(l.Messages.InvalidHexEscapeSequence),O+=w;break;case"n":O+=`
`;break;case"r":O+="\r";break;case"t":O+="	";break;case"b":O+="\b";break;case"f":O+="\f";break;case"v":O+="\v";break;case"8":case"9":O+=y,this.tolerateUnexpectedToken();break;default:if(y&&s.Character.isOctalDigit(y.charCodeAt(0))){var D=this.octalToDecimal(y);C=D.octal||C,O+=String.fromCharCode(D.code)}else O+=y;break}else++this.lineNumber,y==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else{if(s.Character.isLineTerminator(y.charCodeAt(0)))break;O+=y}}return v!==""&&(this.index=m,this.throwUnexpectedToken()),{type:8,value:O,octal:C,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanTemplate=function(){var m="",v=!1,C=this.index,O=this.source[C]==="`",y=!1,P=2;for(++this.index;!this.eof();){var w=this.source[this.index++];if(w==="`"){P=1,y=!0,v=!0;break}else if(w==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,v=!0;break}m+=w}else if(w==="\\")if(w=this.source[this.index++],s.Character.isLineTerminator(w.charCodeAt(0)))++this.lineNumber,w==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(w){case"n":m+=`
`;break;case"r":m+="\r";break;case"t":m+="	";break;case"u":if(this.source[this.index]==="{")++this.index,m+=this.scanUnicodeCodePointEscape();else{var D=this.index,A=this.scanHexEscape(w);A!==null?m+=A:(this.index=D,m+=w)}break;case"x":var _=this.scanHexEscape(w);_===null&&this.throwUnexpectedToken(l.Messages.InvalidHexEscapeSequence),m+=_;break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:w==="0"?(s.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(l.Messages.TemplateOctalLiteral),m+="\0"):s.Character.isOctalDigit(w.charCodeAt(0))?this.throwUnexpectedToken(l.Messages.TemplateOctalLiteral):m+=w;break}else s.Character.isLineTerminator(w.charCodeAt(0))?(++this.lineNumber,w==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,m+=`
`):m+=w}return v||this.throwUnexpectedToken(),O||this.curlyStack.pop(),{type:10,value:this.source.slice(C+1,this.index-P),cooked:m,head:O,tail:y,lineNumber:this.lineNumber,lineStart:this.lineStart,start:C,end:this.index}},f.prototype.testRegExp=function(m,v){var C="\uFFFF",O=m,y=this;v.indexOf("u")>=0&&(O=O.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(P,w,D){var A=parseInt(w||D,16);return A>1114111&&y.throwUnexpectedToken(l.Messages.InvalidRegExp),A<=65535?String.fromCharCode(A):C}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C));try{RegExp(O)}catch{this.throwUnexpectedToken(l.Messages.InvalidRegExp)}try{return new RegExp(m,v)}catch{return null}},f.prototype.scanRegExpBody=function(){var m=this.source[this.index];o.assert(m==="/","Regular expression literal must start with a slash");for(var v=this.source[this.index++],C=!1,O=!1;!this.eof();)if(m=this.source[this.index++],v+=m,m==="\\")m=this.source[this.index++],s.Character.isLineTerminator(m.charCodeAt(0))&&this.throwUnexpectedToken(l.Messages.UnterminatedRegExp),v+=m;else if(s.Character.isLineTerminator(m.charCodeAt(0)))this.throwUnexpectedToken(l.Messages.UnterminatedRegExp);else if(C)m==="]"&&(C=!1);else if(m==="/"){O=!0;break}else m==="["&&(C=!0);return O||this.throwUnexpectedToken(l.Messages.UnterminatedRegExp),v.substr(1,v.length-2)},f.prototype.scanRegExpFlags=function(){for(var m="",v="";!this.eof();){var C=this.source[this.index];if(!s.Character.isIdentifierPart(C.charCodeAt(0)))break;if(++this.index,C==="\\"&&!this.eof())if(C=this.source[this.index],C==="u"){++this.index;var O=this.index,y=this.scanHexEscape("u");if(y!==null)for(v+=y,m+="\\u";O<this.index;++O)m+=this.source[O];else this.index=O,v+="u",m+="\\u";this.tolerateUnexpectedToken()}else m+="\\",this.tolerateUnexpectedToken();else v+=C,m+=C}return v},f.prototype.scanRegExp=function(){var m=this.index,v=this.scanRegExpBody(),C=this.scanRegExpFlags(),O=this.testRegExp(v,C);return{type:9,value:"",pattern:v,flags:C,regex:O,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var m=this.source.charCodeAt(this.index);return s.Character.isIdentifierStart(m)?this.scanIdentifier():m===40||m===41||m===59?this.scanPunctuator():m===39||m===34?this.scanStringLiteral():m===46?s.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():s.Character.isDecimalDigit(m)?this.scanNumericLiteral():m===96||m===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():m>=55296&&m<57343&&s.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},f}();i.Scanner=d},function(n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.TokenName={},i.TokenName[1]="Boolean",i.TokenName[2]="<end>",i.TokenName[3]="Identifier",i.TokenName[4]="Keyword",i.TokenName[5]="Null",i.TokenName[6]="Numeric",i.TokenName[7]="Punctuator",i.TokenName[8]="String",i.TokenName[9]="RegularExpression",i.TokenName[10]="Template"},function(n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",frasl:"\u2044",euro:"\u20AC",image:"\u2111",weierp:"\u2118",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",lang:"\u27E8",rang:"\u27E9"}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(10),s=r(12),l=r(13),h=function(){function d(){this.values=[],this.curly=this.paren=-1}return d.prototype.beforeFunctionExpression=function(f){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(f)>=0},d.prototype.isRegexStart=function(){var f=this.values[this.values.length-1],m=f!==null;switch(f){case"this":case"]":m=!1;break;case")":var v=this.values[this.paren-1];m=v==="if"||v==="while"||v==="for"||v==="with";break;case"}":if(m=!1,this.values[this.curly-3]==="function"){var C=this.values[this.curly-4];m=C?!this.beforeFunctionExpression(C):!1}else if(this.values[this.curly-4]==="function"){var C=this.values[this.curly-5];m=C?!this.beforeFunctionExpression(C):!0}break}return m},d.prototype.push=function(f){f.type===7||f.type===4?(f.value==="{"?this.curly=this.values.length:f.value==="("&&(this.paren=this.values.length),this.values.push(f.value)):this.values.push(null)},d}(),c=function(){function d(f,m){this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=m?typeof m.tolerant=="boolean"&&m.tolerant:!1,this.scanner=new s.Scanner(f,this.errorHandler),this.scanner.trackComment=m?typeof m.comment=="boolean"&&m.comment:!1,this.trackRange=m?typeof m.range=="boolean"&&m.range:!1,this.trackLoc=m?typeof m.loc=="boolean"&&m.loc:!1,this.buffer=[],this.reader=new h}return d.prototype.errors=function(){return this.errorHandler.errors},d.prototype.getNextToken=function(){if(this.buffer.length===0){var f=this.scanner.scanComments();if(this.scanner.trackComment)for(var m=0;m<f.length;++m){var v=f[m],C=this.scanner.source.slice(v.slice[0],v.slice[1]),O={type:v.multiLine?"BlockComment":"LineComment",value:C};this.trackRange&&(O.range=v.range),this.trackLoc&&(O.loc=v.loc),this.buffer.push(O)}if(!this.scanner.eof()){var y=void 0;this.trackLoc&&(y={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var P=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart(),w=P?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(w);var D={type:l.TokenName[w.type],value:this.scanner.source.slice(w.start,w.end)};if(this.trackRange&&(D.range=[w.start,w.end]),this.trackLoc&&(y.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},D.loc=y),w.type===9){var A=w.pattern,_=w.flags;D.regex={pattern:A,flags:_}}this.buffer.push(D)}}return this.buffer.shift()},d}();i.Tokenizer=c}])})})(Dn);function An(e,t){var n=[e],i,r,o,s,l,h,c;for(i=0;i<n.length;i+=1)if(l=n[i],typeof l!="number"){t(l);for(o in l)if(o!=="parent")if(h=l[o],h instanceof Array)for(r=0,s=h.length;r<s;r+=1)c=h[r],c instanceof Object&&(c.parent=l),n.push(c);else h!=null&&typeof h.type=="string"&&(h.parent=l,n.push(h))}}function pP(e,t){const n=document.querySelector("svg");let i=!1,r,o,s;t("mousedown",".translate-handle-trigger",l=>{const h=n.panZoomParams.svgPoint;h({x:l.offsetX,y:l.offsetY}),i=!0,e.transforming=!0,r=Number(l.target.dataset.index),o=e.storedPCB.components[r].pos,s=[],Hd(e).forEach((c,d)=>{if(d!==r)return;const{start:f,ast:m}=c,[v,C]=m.body[0].expression.elements,O=Vd(s);An(v,P=>O(P));const y=Vd(s);An(C,P=>y(P))}),e.transformUpdate=(c,d)=>{const f=[],m=fP(f);Hd(e).forEach((v,C)=>{if(C!==r)return;const{start:O,ast:y}=v,[P,w]=y.body[0].expression.elements,D=m(O);An(P,_=>D(_,c));const A=m(O);An(w,_=>A(_,d))}),e.codemirror.view.dispatch({changes:f})}}),t("mousemove","",l=>{if(!i)return;const h=O=>e.gridSize===0||!e.grid?O:Ja(dP(O,e.gridSize),8),c=n.panZoomParams.svgPoint,d=c({x:l.offsetX,y:l.offsetY}),f=o[0]-s[0],m=o[1]-s[1],v=Ja(h(d.x)-f,8),C=Ja(h(d.y)-m,8);ct("TRANSLATE",{x:v,y:C,index:r})}),t("mouseup","",l=>{i=!1,e.transforming=!1}),t("mouseleave","",l=>{i=!1,e.transforming=!1})}const dP=(e,t)=>Math.round(e/t)*t,Ja=(e,t)=>Math.round(e*10**t)/10**t,fP=(e,t)=>n=>{let i=!1,r=!1;return(o,s)=>{if(!r&&o.type==="Literal"&&typeof o.value=="number"){let l=o.range[0];if(o.parent&&o.parent.operator==="/")return;o.parent&&o.parent.operator,o.parent&&o.parent.type==="BinaryExpression"&&(o.parent.operator==="+"||o.parent.operator==="-")&&o.parent.right==o&&(i=!0,l=o.parent.left.range[1]),o.parent&&o.parent.type==="UnaryExpression"&&o.parent.operator==="-"&&(l=o.parent.range[0]);let h=s,c=h<0,d;c?d=`-${Math.abs(h)}`:i?d=`+${h}`:d=`${h}`,e.push({from:l+n,to:o.range[1]+n,insert:d}),r=!0}}},Vd=e=>{let t=!1;return n=>{let i=0;if(n.type==="Literal"&&typeof n.value=="number"){if(n.range[0],n.parent&&n.parent.operator==="/")return;n.parent&&n.parent.operator==="-"&&(t=!0),n.parent&&n.parent.type==="BinaryExpression"&&(n.parent.operator==="+"||n.parent.operator==="-")&&n.parent.right==n&&n.parent.left.range[1],n.parent&&n.parent.type==="UnaryExpression"&&n.parent.operator==="-"&&n.parent.range[0];let r;t?r=-n.value:r=n.value,i=r,i<0?i=-Math.abs(i):i=i,e.push(i)}return i}};function Hd(e){const t=e.codemirror.view.state.doc.toString(),n=_t(e.codemirror.view.state);let i=[];const r=n.cursor();do{const o=t.slice(r.from,r.to);if(r.name!=="PropertyDefinition"||o!=="translate")continue;r.next(),r.next();const s=t.slice(r.from,r.to);i.push({text:s,start:r.from})}while(r.next());return i.map(o=>({...o,ast:Dn.exports.parseScript(o.text,{range:!0,comment:!0})}))}function mP(e,t){const n=document.querySelector("svg");let i=!1,r,o,s,l;t("mousedown",".draggable-pt",h=>{const c=n.panZoomParams.svgPoint;c({x:h.offsetX,y:h.offsetY}),i=!0,e.transforming=!0,r=Number(h.target.dataset.index),o=[Number(h.target.getAttribute("cx")),Number(h.target.getAttribute("cy"))];const[d,f]=h.target.dataset.text.split(",");s=[...o];const m=Dn.exports.parse(d,{range:!0,comment:!0}).body[0],v=Dn.exports.parse(f,{range:!0,comment:!0}).body[0],C=Jd(s,0);An(m,y=>C(y));const O=Jd(s,1);An(v,y=>O(y)),l=(y,P,w)=>{const D=e.pts[w],[A,_]=D.text.split(","),I=Dn.exports.parse(A,{range:!0,comment:!0}).body[0],F=Dn.exports.parse(_,{range:!0,comment:!0}).body[0],q=D.start,j=q+A.length+1,z=[],B=gP(z),L=B(q);An(I,U=>L(U,y));const M=B(j);An(F,U=>M(U,P)),e.codemirror.view.dispatch({changes:z}),ct("RUN",{dragging:!0})}}),t("mousemove","",h=>{if(!i)return;const c=y=>e.gridSize===0||!e.grid?y:Ka(OP(y,e.gridSize),8),d=n.panZoomParams.svgPoint,f=d({x:h.offsetX,y:h.offsetY}),m=o[0]-s[0],v=o[1]-s[1],C=Ka(c(f.x)-m,8),O=Ka(c(f.y)-v,8);l(C,O,r)}),t("mouseup","",h=>{i=!1,e.transforming=!1}),t("mouseleave","",h=>{i=!1,e.transforming=!1})}const OP=(e,t)=>Math.round(e/t)*t,Ka=(e,t)=>Math.round(e*10**t)/10**t,gP=(e,t)=>n=>{let i=!1,r=!1;return(o,s)=>{if(!r&&o.type==="Literal"&&typeof o.value=="number"){let l=o.range[0];if(o.parent&&o.parent.operator==="/")return;o.parent&&o.parent.operator,o.parent&&o.parent.type==="BinaryExpression"&&(o.parent.operator==="+"||o.parent.operator==="-")&&o.parent.right==o&&(i=!0,l=o.parent.left.range[1]),o.parent&&o.parent.type==="UnaryExpression"&&o.parent.operator==="-"&&(l=o.parent.range[0]);let h=s,c=h<0,d;c?d=`-${Math.abs(h)}`:i?d=`+${h}`:d=`${h}`,e.push({from:l+n,to:o.range[1]+n,insert:d}),r=!0}}},Jd=(e,t)=>{let n=!1;return i=>{let r=0;if(i.type==="Literal"&&typeof i.value=="number"){if(i.range[0],i.parent&&i.parent.operator==="/")return;i.parent&&i.parent.operator==="-"&&(n=!0),i.parent&&i.parent.type==="BinaryExpression"&&(i.parent.operator==="+"||i.parent.operator==="-")&&i.parent.right==i&&i.parent.left.range[1],i.parent&&i.parent.type==="UnaryExpression"&&i.parent.operator==="-"&&i.parent.range[0];let o;n?o=-i.value:o=i.value,r=o,r<0?r=-Math.abs(r):r=r,e[t]=r}return r}};function yP(e,t){let n=!1;t("mousedown","#vertical-bar",i=>{n=!0}),t("mousemove","",i=>{if(!n)return;let r=i.clientX/window.innerWidth*100;if(r===0)return;const o=1,s=99;r<o&&(r=o),r>s&&(r=s),document.documentElement.style.setProperty("--vertical-bar",`${r}%`),pauseEvent(i)}),t("mouseup","",i=>{n&&ct("RENDER"),n=!1})}function xP(e,t){let n=!1,i=1,r=0,o=0,s={x:0,y:0};function l(f){f.style.transformOrigin=`${0}px ${0}px`,f.style.transform="translate("+r+"px, "+o+"px) scale("+i+")",e.gridSize>0&&ct("RENDER")}function h({x:f,y:m}){let v=(f-r)/i,C=(m-o)/i;return{x:v,y:C}}t("mousedown","",f=>{f.shiftKey||(n=!0,s={x:f.offsetX-r,y:f.offsetY-o},f.detail===2&&console.log(f.offsetX,f.offsetY,h({x:f.offsetX,y:f.offsetY})))}),t("mousemove","",f=>{if(!n||e.transforming)return;r=f.offsetX-s.x,o=f.offsetY-s.y;const m=document.querySelectorAll(".transform-group");for(const v of m)l(v)}),t("mouseup","",f=>{n=!1}),t("wheel","",f=>{let m=(f.offsetX-r)/i,v=(f.offsetY-o)/i;Math.sign(f.deltaY)<0?i*=1.03:i/=1.03,r=f.offsetX-m*i,o=f.offsetY-v*i;const C=document.querySelectorAll(".transform-group");for(const O of C)l(O);f.preventDefault()});function c(f){const m=document.querySelector("svg").getBoundingClientRect(),v=f.x[1]-f.x[0],C=f.y[1]-f.y[0],O=m.width/v,y=m.height/C,P=Math.min(O,y)*.9;i=P;const w={x:(f.x[0]+f.x[1])/2*P-m.width/2,y:(f.y[0]+f.y[1])/2*P-m.height/2};r=-w.x,o=-w.y;const D=document.querySelectorAll(".transform-group");for(const A of D)l(A)}function d(){const f=document.querySelector("svg");if(f===null)return null;const{left:m,right:v,bottom:C,top:O,width:y,height:P}=f.getBoundingClientRect(),w=h({x:y,y:P}),D=h({x:0,y:P}),A=h({x:y,y:0}),_=h({x:0,y:0});return{rt:w,lt:D,rb:A,lb:_}}return{scale:()=>i,x:()=>r,y:()=>o,corners:d,svgPoint:h,setScaleXY:c}}let Kd=0;function vP(e){var t=new FileReader;t.readAsText(e),t.onloadend=n=>{let i=t.result;ct("UPLOAD_COMP",{text:i,name:`component${Kd}`}),Kd++}}function PP(e){var t=new FileReader;t.readAsText(e),t.onloadend=n=>{let i=t.result;ct("UPLOAD_JS",{text:i})}}function SP(e,t=[]){let n=e[0],i=n.name.split(".");i[0];const r=i[i.length-1];if(r==="kicad_mod")vP(n);else if(r==="js")PP(n);else throw Error("Unknown extension:",r)}function CP(e,t){t("drop","",function(n){let i=n.dataTransfer.files;SP(i),pauseEvent(n)}),t("dragover","",function(n){pauseEvent(n)})}function wP(e,t){let n=null,i=null;const r=document.querySelector("svg");t("mousedown","",o=>{!o.shiftKey||(n=r.panZoomParams.svgPoint({x:o.offsetX,y:o.offsetY}))}),t("mousemove","",o=>{document.body.classList.add("no-select"),!!o.shiftKey&&n!==null&&(i=r.panZoomParams.svgPoint({x:o.offsetX,y:o.offsetY}),e.selectBox.start=n,e.selectBox.end=i,ct("RENDER"))}),t("mouseup","",o=>{!o.shiftKey||(document.body.classList.remove("no-select"),n=null,i=null,e.selectBox.start=n,e.selectBox.end=i,ct("RENDER"))})}const tf=e=>/[0-9]/i.test(e)||e===".";function bP(e,t){let n=!1,i,r,o,s,l,h=null,c=!1,d=!1;t("mousedown",".\u037Cd",f=>{const m=e.codemirror.view.state,v=m.doc,C=m.selection.main.head;v.lineAt(C);let{from:O,to:y,text:P}=v.lineAt(C),w=C,D=C;for(;w>O&&tf(P[w-O-1]);)w--;for(;D<y&&tf(P[D-O]);)D++;let A;if(w>O){let _=w;for(;_>O;)if(_--,A=P[_-O],A!==" ")if(A==="+")h=_;else if(A==="-")h=_,d=!0;else{if(["(","[",",","/","*",";","{","=",":"].includes(A))break;c=!0;break}}l=P.slice(w-O,D-O),i=Number(l),d&&(i=-i),n=!0,r=w,s=l.includes("."),o=l.includes(".")?l.split(".")[1].length:1}),t("mousemove","",f=>{if(!n)return;const m=e.codemirror;let v,C=l.length;if(0>f.movementX,s){let O=Math.round(i*10**o)+f.movementX;O=Math.round(O)/10**o,i=O,v=`${Math.abs(i).toFixed(o)}`}else i+=f.movementX,v=`${Math.abs(i)}`;c?(h==null&&(v=(i<0?"-":"+")+v),m.view.dispatch({changes:{from:r,to:r+C,insert:v}}),h!=null&&m.view.dispatch({changes:{from:h,to:h+1,insert:i<0?"-":"+"}})):h!=null?i<0?(m.view.dispatch({changes:{from:r,to:r+C,insert:v}}),m.view.dispatch({changes:{from:h,to:h+1,insert:"-"}})):(m.view.dispatch({changes:{from:h,to:r+C,insert:v}}),r=h,h=null):(i<0&&(v="-"+v),m.view.dispatch({changes:{from:r,to:r+C,insert:v}})),l=v,ct("RUN",{dragging:!0}),pauseEvent(f)}),t("mouseup","",f=>{n=!1,h=null,c=!1,d=!1})}function tl(e,t){const n=new RegExp(`\\/\\*\\s*--\\s*${e}\\s*--\\s*\\*\\/`,"g"),i=t.matchAll(n).next();return i.value!==void 0?i.value.index+i.value[0].length+1:null}function EP(e,t){const n=document.querySelector("svg");let i=!1,r,o;t("mousedown",".footprint-svg, .path-footprint",s=>{i=!0,r=s.target.dataset.index,o=e.codemirror.view.state.doc.toString(),Dn.exports.parseScript(o,{range:!0,comment:!0})}),t("mousemove","",s=>{if(!i)return;const l=n.panZoomParams.svgPoint;l({x:s.offsetX,y:s.offsetY});var h=event.path||event.composedPath&&event.composedPath();if(!h)return;h.some(m=>m.matches&&m.matches("#viewer"));const c=document.querySelector("#viewer").getBoundingClientRect(),d=s.clientX-c.left,f=s.clientY-c.top;e.previewFootprint=[e.footprints[r],[d,f]],ct("RENDER")}),t("mouseup","",s=>{if(e.previewFootprint!==null){const l=document.querySelector("#viewer").getBoundingClientRect(),h=s.clientX-l.left,c=l.bottom-s.clientY,d=n.panZoomParams.svgPoint,f=d({x:h,y:c}),m=e.codemirror.view.state.doc.toString(),v=tl("ADD_COMPONENTS",m);if(v!==null){const C=e.previewFootprint[0][0],O=`board.add(${C}, { translate: pt(${f.x}, ${f.y}), name: ${C} })
`;e.codemirror.view.dispatch({changes:{from:v,insert:O}}),ct("RUN")}}e.previewFootprint=null,i&&ct("RENDER"),i=!1}),t("mouseleave","",s=>{e.previewFootprint=null,i=!1})}function ef(e,t){const n=e.codemirror.view.state.doc.toString();let i=[],r=[];const o=t.cursor();do{const s=n.slice(o.from,o.to);o.name==="CallExpression"&&s.slice(0,2)==="pt"&&i.push([o.from,o.to]),o.name==="CallExpression"&&s.slice(0,4)==="path"&&r.push([o.from,o.to])}while(o.next());return{pts:i,paths:r}}const DP=(e,t)=>Math.round(e/t)*t,AP=(e,t)=>Math.round(e*10**t)/10**t;function TP(e,t){setInterval(()=>kP(e),300);const n=document.querySelector("svg"),i=r=>e.gridSize===0||!e.grid?r:AP(DP(r,e.gridSize),8);t("mousedown","",r=>{if(e.selectedPath===null)return;const o=n.panZoomParams.svgPoint,s=o({x:r.offsetX,y:r.offsetY}),l={x:i(s.x),y:i(s.y)},h=e.codemirror.view.state.doc.toString();let c=e.selectedPath.pathEnd-2;const d=[" ","	",`
`];let f=" ";for(;c>0&&(f=h[c],!!d.includes(f));)c--;if(f===","||f==="("){const m=`
  pt(${l.x}, ${l.y}),`;e.codemirror.view.dispatch({changes:{from:c+1,insert:m}}),ct("RUN")}})}function kP(e){const t=e.codemirror.view.state.doc;let n=t.toString();const i=pc(e.codemirror.view.state,t.length,1e4),{pts:r,paths:o}=ef(e,i);let s=null;o.forEach(l=>{const[h,c]=l;Xt.codemirror.view.state.selection.ranges.some(d=>{const{from:f,to:m}=d;return f>h&&m<c})&&(s={pathStart:h,pathEnd:c,str:n.substr(h,c-h)})}),Xt.selectedPath=s,ct("RENDER")}function _P(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}window.pauseEvent=_P;const nf=e=>e.composedPath()[0],IP=(e,t)=>nf(e).matches(t),rf=e=>(t,n,i)=>{e.addEventListener(t,r=>{r.trigger=nf(r),(n===""||IP(r,n))&&i(r)})};function QP(e){const t=document.querySelector("svg"),n=rf(t);t.panZoomParams=xP(e,n),e.panZoomParams=t.panZoomParams,wP(e,n),pP(e,n),mP(e,n),TP(e,n);const i=document.querySelector("body"),r=rf(i);EP(e,r),CP(e,r),bP(e,r),yP(e,r),r("keydown","",o=>{let s=event.code;s==="Enter"&&event.shiftKey?(event.preventDefault(),ct("RUN")):s==="KeyT"&&event.shiftKey}),window.addEventListener("unload",()=>{const o=e.codemirror.view.state.doc.toString();window.localStorage.setItem("svg-pcb",o)})}const LP=(e,t)=>({F:{pos:[0,0],shape:hn(gi(t)),layers:["F.Cu"],index:1},B:{pos:[0,0],shape:hn(gi(t)),layers:["B.Cu"],index:2},drill:{pos:[0,0],shape:hn(gi(e)),layers:["drill"]}}),XP=([e,t],[n,i])=>[e+n,t+i],$P=([e,t],n)=>[e*Math.cos(n)-t*Math.sin(n),t*Math.cos(n)+e*Math.sin(n)];class NP{constructor({pads:t,layers:n}){this.pads=t,this.layers=n}pad(t){return this.pads[t]}padX(t){return this.pads[t][0]}padY(t){return this.pads[t][1]}get pos(){return this.pads.center}get posX(){return this.pads.center[0]}get posY(){return this.pads.center[1]}}function FP(e,t={}){let n=t.translate||[0,0],i=t.rotate||0,r=t.padLabelSize||.02;const o=i*Math.PI/180,s={},l=[];let h={};for(const c in e){let{pos:d,shape:f,layers:m,origin:v}=e[c];typeof f=="string"&&(f=Va([],f));let C=[d[0],d[1]];v!==void 0&&(C[0]=v[0],C[1]=v[1]),Zn(f,C),Zn(f,n),qa(f,i,n);let O=XP($P(d,o),n);s[c]=O,c.includes("drill")||l.push({type:"text",value:c,translate:O,rotate:i,size:r}),m.forEach(y=>{y in h?h[y].push(f):h[y]=[f]})}return s.center=n,h.padLabels=l,new NP({pads:s,layers:h})}class RP{constructor(){this.layers={},this.components=[]}add(t,n={}){const i=n.name||"",r={translate:n.translate||[0,0],rotate:n.rotate||0,padLabelSize:n.padLabelSize||.03,componentLabelSize:n.componentLabelSize||.04},o=FP(t,r);for(const s in o.layers)o.layers[s].forEach(l=>{this.addShape(s,l)});return i!==""&&!i.includes("drill")&&this.addShape("componentLabels",{type:"text",value:i,translate:r.translate,rotate:0,size:r.componentLabelSize}),this.components.push(o),o}addShape(t,n){return n[0]&&(typeof n[0][0]=="number"||typeof n[0][0]=="string")&&(n=Ga(n)),t in this.layers?this.layers[t].push(n):this.layers[t]=[n],this.layers[t]}getLayer(t,n=!1){if(!(t in this.layers))return[];const i=[],r=[],o=[];return this.layers[t].forEach(s=>{s.type==="wire"?o.push({type:"wire",data:hn(s.shape),thickness:s.thickness,shape:s.shape}):Array.isArray(s)?i.push(s):s.type==="text"&&r.push(s)}),n?[hn((()=>{var s;return(s=qd(...i,...o.map(l=>kd(l.shape,l.thickness/2,{endType:"etOpenRound",jointType:"jtRound"}))))!=null?s:[]})()),...r]:[...i.map(hn),...r,...o]}wire(t,n,i="F.Cu"){const r={type:"wire",shape:Ga(t),thickness:n};this.addShape(i,r)}}function ne(e){this._line=this._col=this._pos=0,this._stream=e}ne.not_whitespace_or_end=/^(\S|$)/,ne.space_quote_paren_escaped_or_end=/^(\s|\\|"|'|`|,|\(|\)|$)/,ne.string_or_escaped_or_end=/^(\\|"|$)/,ne.string_delimiters=/["]/,ne.quotes=/['`,]/,ne.quotes_map={"'":"quote","`":"quasiquote",",":"unquote"},ne.prototype={peek:YP,consume:WP,until:jP,error:MP,string:ZP,atom:zP,quoted:qP,expr:UP,list:GP};function BP(e){var t=new ne(e),n=t.expr();return n instanceof Error?n:t.peek()!=""?t.error("Superfluous characters after expression: `"+t.peek()+"`"):n}function MP(e){var t=new Error("Syntax error: "+e);return t.line=this._line+1,t.col=this._col+1,t}function YP(){return this._stream.length==this._pos?"":this._stream[this._pos]}function WP(){if(this._stream.length==this._pos)return"";var e=this._stream[this._pos];return this._pos+=1,e=="\r"?(this.peek()==`
`&&(this._pos+=1,e+=`
`),this._line++,this._col=0):e==`
`?(this._line++,this._col=0):this._col++,e}function jP(e){for(var t="";!e.test(this.peek());)t+=this.consume();return t}function ZP(){for(var e=this.consume(),t="";;){t+=this.until(ne.string_or_escaped_or_end);var n=this.peek();if(n=="")return this.error("Unterminated string literal");if(n==e){this.consume();break}if(n=="\\"){this.consume(),n=this.peek(),n=="r"?(this.consume(),t+="\r"):n=="t"?(this.consume(),t+="	"):n=="n"?(this.consume(),t+=`
`):n=="f"?(this.consume(),t+="\f"):n=="b"?(this.consume(),t+="\b"):t+=this.consume();continue}t+=this.consume()}return new String(t)}function zP(){if(ne.string_delimiters.test(this.peek()))return this.string();for(var e="";;){e+=this.until(ne.space_quote_paren_escaped_or_end);var t=this.peek();if(t=="\\"){this.consume(),e+=this.consume();continue}break}return e}function qP(){var e=this.consume(),t=ne.quotes_map[e];t=="unquote"&&this.peek()=="@"&&(this.consume(),t="unquote-splicing",e=",@"),this.until(ne.not_whitespace_or_end);var n=this.expr();return n instanceof Error?n:n===""?this.error("Unexpected `"+this.peek()+"` after `"+e+"`"):[t,n]}function UP(){if(this.until(ne.not_whitespace_or_end),ne.quotes.test(this.peek()))return this.quoted();var e=this.peek()=="("?this.list():this.atom();return this.until(ne.not_whitespace_or_end),e}function GP(){if(this.peek()!="(")return this.error("Expected `(` - saw `"+this.peek()+"` instead.");this.consume();var e=[],t=this.expr();if(t instanceof Error)return t;if(t!=="")for(e.push(t);(t=this.expr())!=="";){if(t instanceof Error)return t;e.push(t)}return this.peek()!=")"?this.error("Expected `)` - saw: `"+this.peek()+"`"):(this.consume(),e)}const VP=e=>e.reduce((t,n)=>{let i=n.split(".");return i.length===0?t:i[0]!=="*"?[...t,n]:[...t,`F.${i[1]}`,`B.${i[1]}`]},[]);function HP(e){let t=BP(e),n=1/25.4;const i={};for(const o of t){const s=o[0]==="pad",l=o[2]==="smd",h=o[2]==="thru_hole",c=o[3];if(s&&(l||h)){let d=o[1],f=o[4].slice(1).map(y=>Number(y)*n);f[1]=-f[1];let m=o[o.length-1];m=m?m.slice(1):[],m=VP(m);let v=o[5].slice(1).map(y=>Number(y)*n);const C={rect:()=>Ha(...v),roundrect:()=>Ha(...v),circle:()=>gi(...v)};let O=c in C?C[c]():[];if(i[d]===void 0?i[d]=[{pos:f,shape:O,layers:m}]:i[d].push({pos:f,shape:O,layers:m}),o[o.length-2]?o[o.length-2][0]==="drill":!1){let y=Number(o[o.length-2][1])/25.4,P={pos:f,shape:gi(y),layers:["drill"]};i[`${d}_drill`]===void 0?i[`${d}_drill`]=[P]:i[`${d}_drill`].push(P)}}}let r=Object.entries(i).reduce((o,s)=>{const[l,h]=s;return h.length===1?o[l]=h[0]:h.forEach((c,d)=>{o[`${l}_${d+1}`]=c}),o},{});return Object.keys(r).forEach(o=>{let s="";r[o].shape.forEach(l=>{l.forEach((h,c)=>{const{x:d,y:f}=h;s+=`${c==0?"M":"L"} ${d} ${f} `})}),r[o].shape=s,r[o].layers=["F.Cu"]}),r}const{stringify:JP}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");const zs={"||":3,"&&":4,"|":5,"??":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},Re=17,KP={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:Re,ClassExpression:Re,FunctionExpression:Re,ObjectExpression:Re,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function yi(e,t){const{generator:n}=e;if(e.write("("),t!=null&&t.length>0){n[t[0].type](t[0],e);const{length:i}=t;for(let r=1;r<i;r++){const o=t[r];e.write(", "),n[o.type](o,e)}}e.write(")")}function sf(e,t,n,i){const r=e.expressionsPrecedence[t.type];if(r===Re)return!0;const o=e.expressionsPrecedence[n.type];return r!==o?!i&&r===15&&o===14&&n.operator==="**"||r<o:r!==13&&r!==14?!1:t.operator==="**"&&n.operator==="**"?!i:i?zs[t.operator]<=zs[n.operator]:zs[t.operator]<zs[n.operator]}function qs(e,t,n,i){const{generator:r}=e;sf(e,t,n,i)?(e.write("("),r[t.type](t,e),e.write(")")):r[t.type](t,e)}function tS(e,t,n,i){const r=t.split(`
`),o=r.length-1;if(e.write(r[0].trim()),o>0){e.write(i);for(let s=1;s<o;s++)e.write(n+r[s].trim()+i);e.write(n+r[o].trim())}}function ae(e,t,n,i){const{length:r}=t;for(let o=0;o<r;o++){const s=t[o];e.write(n),s.type[0]==="L"?e.write("// "+s.value.trim()+`
`,s):(e.write("/*"),tS(e,s.value,n,i),e.write("*/"+i))}}function eS(e){let t=e;for(;t!=null;){const{type:n}=t;if(n[0]==="C"&&n[1]==="a")return!0;if(n[0]==="M"&&n[1]==="e"&&n[2]==="m")t=t.object;else return!1}}function el(e,t){const{generator:n}=e,{declarations:i}=t;e.write(t.kind+" ");const{length:r}=i;if(r>0){n.VariableDeclarator(i[0],e);for(let o=1;o<r;o++)e.write(", "),n.VariableDeclarator(i[o],e)}}let of,af,lf,hf,uf,cf;const nS={Program(e,t){const n=t.indent.repeat(t.indentLevel),{lineEnd:i,writeComments:r}=t;r&&e.comments!=null&&ae(t,e.comments,n,i);const o=e.body,{length:s}=o;for(let l=0;l<s;l++){const h=o[l];r&&h.comments!=null&&ae(t,h.comments,n,i),t.write(n),this[h.type](h,t),t.write(i)}r&&e.trailingComments!=null&&ae(t,e.trailingComments,n,i)},BlockStatement:cf=function(e,t){const n=t.indent.repeat(t.indentLevel++),{lineEnd:i,writeComments:r}=t,o=n+t.indent;t.write("{");const s=e.body;if(s!=null&&s.length>0){t.write(i),r&&e.comments!=null&&ae(t,e.comments,o,i);const{length:l}=s;for(let h=0;h<l;h++){const c=s[h];r&&c.comments!=null&&ae(t,c.comments,o,i),t.write(o),this[c.type](c,t),t.write(i)}t.write(n)}else r&&e.comments!=null&&(t.write(i),ae(t,e.comments,o,i),t.write(n));r&&e.trailingComments!=null&&ae(t,e.trailingComments,o,i),t.write("}"),t.indentLevel--},ClassBody:cf,StaticBlock(e,t){t.write("static "),this.BlockStatement(e,t)},EmptyStatement(e,t){t.write(";")},ExpressionStatement(e,t){const n=t.expressionsPrecedence[e.expression.type];n===Re||n===3&&e.expression.left.type[0]==="O"?(t.write("("),this[e.expression.type](e.expression,t),t.write(")")):this[e.expression.type](e.expression,t),t.write(";")},IfStatement(e,t){t.write("if ("),this[e.test.type](e.test,t),t.write(") "),this[e.consequent.type](e.consequent,t),e.alternate!=null&&(t.write(" else "),this[e.alternate.type](e.alternate,t))},LabeledStatement(e,t){this[e.label.type](e.label,t),t.write(": "),this[e.body.type](e.body,t)},BreakStatement(e,t){t.write("break"),e.label!=null&&(t.write(" "),this[e.label.type](e.label,t)),t.write(";")},ContinueStatement(e,t){t.write("continue"),e.label!=null&&(t.write(" "),this[e.label.type](e.label,t)),t.write(";")},WithStatement(e,t){t.write("with ("),this[e.object.type](e.object,t),t.write(") "),this[e.body.type](e.body,t)},SwitchStatement(e,t){const n=t.indent.repeat(t.indentLevel++),{lineEnd:i,writeComments:r}=t;t.indentLevel++;const o=n+t.indent,s=o+t.indent;t.write("switch ("),this[e.discriminant.type](e.discriminant,t),t.write(") {"+i);const{cases:l}=e,{length:h}=l;for(let c=0;c<h;c++){const d=l[c];r&&d.comments!=null&&ae(t,d.comments,o,i),d.test?(t.write(o+"case "),this[d.test.type](d.test,t),t.write(":"+i)):t.write(o+"default:"+i);const{consequent:f}=d,{length:m}=f;for(let v=0;v<m;v++){const C=f[v];r&&C.comments!=null&&ae(t,C.comments,s,i),t.write(s),this[C.type](C,t),t.write(i)}}t.indentLevel-=2,t.write(n+"}")},ReturnStatement(e,t){t.write("return"),e.argument&&(t.write(" "),this[e.argument.type](e.argument,t)),t.write(";")},ThrowStatement(e,t){t.write("throw "),this[e.argument.type](e.argument,t),t.write(";")},TryStatement(e,t){if(t.write("try "),this[e.block.type](e.block,t),e.handler){const{handler:n}=e;n.param==null?t.write(" catch "):(t.write(" catch ("),this[n.param.type](n.param,t),t.write(") ")),this[n.body.type](n.body,t)}e.finalizer&&(t.write(" finally "),this[e.finalizer.type](e.finalizer,t))},WhileStatement(e,t){t.write("while ("),this[e.test.type](e.test,t),t.write(") "),this[e.body.type](e.body,t)},DoWhileStatement(e,t){t.write("do "),this[e.body.type](e.body,t),t.write(" while ("),this[e.test.type](e.test,t),t.write(");")},ForStatement(e,t){if(t.write("for ("),e.init!=null){const{init:n}=e;n.type[0]==="V"?el(t,n):this[n.type](n,t)}t.write("; "),e.test&&this[e.test.type](e.test,t),t.write("; "),e.update&&this[e.update.type](e.update,t),t.write(") "),this[e.body.type](e.body,t)},ForInStatement:of=function(e,t){t.write(`for ${e.await?"await ":""}(`);const{left:n}=e;n.type[0]==="V"?el(t,n):this[n.type](n,t),t.write(e.type[3]==="I"?" in ":" of "),this[e.right.type](e.right,t),t.write(") "),this[e.body.type](e.body,t)},ForOfStatement:of,DebuggerStatement(e,t){t.write("debugger;",e)},FunctionDeclaration:af=function(e,t){t.write((e.async?"async ":"")+(e.generator?"function* ":"function ")+(e.id?e.id.name:""),e),yi(t,e.params),t.write(" "),this[e.body.type](e.body,t)},FunctionExpression:af,VariableDeclaration(e,t){el(t,e),t.write(";")},VariableDeclarator(e,t){this[e.id.type](e.id,t),e.init!=null&&(t.write(" = "),this[e.init.type](e.init,t))},ClassDeclaration(e,t){if(t.write("class "+(e.id?`${e.id.name} `:""),e),e.superClass){t.write("extends ");const{superClass:n}=e,{type:i}=n,r=t.expressionsPrecedence[i];(i[0]!=="C"||i[1]!=="l"||i[5]!=="E")&&(r===Re||r<t.expressionsPrecedence.ClassExpression)?(t.write("("),this[e.superClass.type](n,t),t.write(")")):this[n.type](n,t),t.write(" ")}this.ClassBody(e.body,t)},ImportDeclaration(e,t){t.write("import ");const{specifiers:n}=e,{length:i}=n;let r=0;if(i>0){for(;r<i;){r>0&&t.write(", ");const o=n[r],s=o.type[6];if(s==="D")t.write(o.local.name,o),r++;else if(s==="N")t.write("* as "+o.local.name,o),r++;else break}if(r<i){for(t.write("{");;){const o=n[r],{name:s}=o.imported;if(t.write(s,o),s!==o.local.name&&t.write(" as "+o.local.name),++r<i)t.write(", ");else break}t.write("}")}t.write(" from ")}this.Literal(e.source,t),t.write(";")},ImportExpression(e,t){t.write("import("),this[e.source.type](e.source,t),t.write(")")},ExportDefaultDeclaration(e,t){t.write("export default "),this[e.declaration.type](e.declaration,t),t.expressionsPrecedence[e.declaration.type]!=null&&e.declaration.type[0]!=="F"&&t.write(";")},ExportNamedDeclaration(e,t){if(t.write("export "),e.declaration)this[e.declaration.type](e.declaration,t);else{t.write("{");const{specifiers:n}=e,{length:i}=n;if(i>0)for(let r=0;;){const o=n[r],{name:s}=o.local;if(t.write(s,o),s!==o.exported.name&&t.write(" as "+o.exported.name),++r<i)t.write(", ");else break}t.write("}"),e.source&&(t.write(" from "),this.Literal(e.source,t)),t.write(";")}},ExportAllDeclaration(e,t){e.exported!=null?t.write("export * as "+e.exported.name+" from "):t.write("export * from "),this.Literal(e.source,t),t.write(";")},MethodDefinition(e,t){e.static&&t.write("static ");const n=e.kind[0];(n==="g"||n==="s")&&t.write(e.kind+" "),e.value.async&&t.write("async "),e.value.generator&&t.write("*"),e.computed?(t.write("["),this[e.key.type](e.key,t),t.write("]")):this[e.key.type](e.key,t),yi(t,e.value.params),t.write(" "),this[e.value.body.type](e.value.body,t)},ClassExpression(e,t){this.ClassDeclaration(e,t)},ArrowFunctionExpression(e,t){t.write(e.async?"async ":"",e);const{params:n}=e;n!=null&&(n.length===1&&n[0].type[0]==="I"?t.write(n[0].name,n[0]):yi(t,e.params)),t.write(" => "),e.body.type[0]==="O"?(t.write("("),this.ObjectExpression(e.body,t),t.write(")")):this[e.body.type](e.body,t)},ThisExpression(e,t){t.write("this",e)},Super(e,t){t.write("super",e)},RestElement:lf=function(e,t){t.write("..."),this[e.argument.type](e.argument,t)},SpreadElement:lf,YieldExpression(e,t){t.write(e.delegate?"yield*":"yield"),e.argument&&(t.write(" "),this[e.argument.type](e.argument,t))},AwaitExpression(e,t){t.write("await ",e),qs(t,e.argument,e)},TemplateLiteral(e,t){const{quasis:n,expressions:i}=e;t.write("`");const{length:r}=i;for(let s=0;s<r;s++){const l=i[s],h=n[s];t.write(h.value.raw,h),t.write("${"),this[l.type](l,t),t.write("}")}const o=n[n.length-1];t.write(o.value.raw,o),t.write("`")},TemplateElement(e,t){t.write(e.value.raw,e)},TaggedTemplateExpression(e,t){qs(t,e.tag,e),this[e.quasi.type](e.quasi,t)},ArrayExpression:uf=function(e,t){if(t.write("["),e.elements.length>0){const{elements:n}=e,{length:i}=n;for(let r=0;;){const o=n[r];if(o!=null&&this[o.type](o,t),++r<i)t.write(", ");else{o==null&&t.write(", ");break}}}t.write("]")},ArrayPattern:uf,ObjectExpression(e,t){const n=t.indent.repeat(t.indentLevel++),{lineEnd:i,writeComments:r}=t,o=n+t.indent;if(t.write("{"),e.properties.length>0){t.write(i),r&&e.comments!=null&&ae(t,e.comments,o,i);const s=","+i,{properties:l}=e,{length:h}=l;for(let c=0;;){const d=l[c];if(r&&d.comments!=null&&ae(t,d.comments,o,i),t.write(o),this[d.type](d,t),++c<h)t.write(s);else break}t.write(i),r&&e.trailingComments!=null&&ae(t,e.trailingComments,o,i),t.write(n+"}")}else r?e.comments!=null?(t.write(i),ae(t,e.comments,o,i),e.trailingComments!=null&&ae(t,e.trailingComments,o,i),t.write(n+"}")):e.trailingComments!=null?(t.write(i),ae(t,e.trailingComments,o,i),t.write(n+"}")):t.write("}"):t.write("}");t.indentLevel--},Property(e,t){e.method||e.kind[0]!=="i"?this.MethodDefinition(e,t):(e.shorthand||(e.computed?(t.write("["),this[e.key.type](e.key,t),t.write("]")):this[e.key.type](e.key,t),t.write(": ")),this[e.value.type](e.value,t))},PropertyDefinition(e,t){e.static&&t.write("static "),this[e.key.type](e.key,t),e.value!=null&&(t.write(" = "),this[e.value.type](e.value,t))},ObjectPattern(e,t){if(t.write("{"),e.properties.length>0){const{properties:n}=e,{length:i}=n;for(let r=0;this[n[r].type](n[r],t),++r<i;)t.write(", ")}t.write("}")},SequenceExpression(e,t){yi(t,e.expressions)},UnaryExpression(e,t){if(e.prefix){const{operator:n,argument:i,argument:{type:r}}=e;t.write(n);const o=sf(t,i,e);!o&&(n.length>1||r[0]==="U"&&(r[1]==="n"||r[1]==="p")&&i.prefix&&i.operator[0]===n&&(n==="+"||n==="-"))&&t.write(" "),o?(t.write(n.length>1?" (":"("),this[r](i,t),t.write(")")):this[r](i,t)}else this[e.argument.type](e.argument,t),t.write(e.operator)},UpdateExpression(e,t){e.prefix?(t.write(e.operator),this[e.argument.type](e.argument,t)):(this[e.argument.type](e.argument,t),t.write(e.operator))},AssignmentExpression(e,t){this[e.left.type](e.left,t),t.write(" "+e.operator+" "),this[e.right.type](e.right,t)},AssignmentPattern(e,t){this[e.left.type](e.left,t),t.write(" = "),this[e.right.type](e.right,t)},BinaryExpression:hf=function(e,t){const n=e.operator==="in";n&&t.write("("),qs(t,e.left,e,!1),t.write(" "+e.operator+" "),qs(t,e.right,e,!0),n&&t.write(")")},LogicalExpression:hf,ConditionalExpression(e,t){const{test:n}=e,i=t.expressionsPrecedence[n.type];i===Re||i<=t.expressionsPrecedence.ConditionalExpression?(t.write("("),this[n.type](n,t),t.write(")")):this[n.type](n,t),t.write(" ? "),this[e.consequent.type](e.consequent,t),t.write(" : "),this[e.alternate.type](e.alternate,t)},NewExpression(e,t){t.write("new ");const n=t.expressionsPrecedence[e.callee.type];n===Re||n<t.expressionsPrecedence.CallExpression||eS(e.callee)?(t.write("("),this[e.callee.type](e.callee,t),t.write(")")):this[e.callee.type](e.callee,t),yi(t,e.arguments)},CallExpression(e,t){const n=t.expressionsPrecedence[e.callee.type];n===Re||n<t.expressionsPrecedence.CallExpression?(t.write("("),this[e.callee.type](e.callee,t),t.write(")")):this[e.callee.type](e.callee,t),e.optional&&t.write("?."),yi(t,e.arguments)},ChainExpression(e,t){this[e.expression.type](e.expression,t)},MemberExpression(e,t){const n=t.expressionsPrecedence[e.object.type];n===Re||n<t.expressionsPrecedence.MemberExpression?(t.write("("),this[e.object.type](e.object,t),t.write(")")):this[e.object.type](e.object,t),e.computed?(e.optional&&t.write("?."),t.write("["),this[e.property.type](e.property,t),t.write("]")):(e.optional?t.write("?."):t.write("."),this[e.property.type](e.property,t))},MetaProperty(e,t){t.write(e.meta.name+"."+e.property.name,e)},Identifier(e,t){t.write(e.name,e)},PrivateIdentifier(e,t){t.write(`#${e.name}`,e)},Literal(e,t){e.raw!=null?t.write(e.raw,e):e.regex!=null?this.RegExpLiteral(e,t):e.bigint!=null?t.write(e.bigint+"n",e):t.write(JP(e.value),e)},RegExpLiteral(e,t){const{regex:n}=e;t.write(`/${n.pattern}/${n.flags}`,e)}},iS={};class rS{constructor(t){const n=t==null?iS:t;this.output="",n.output!=null?(this.output=n.output,this.write=this.writeToStream):this.output="",this.generator=n.generator!=null?n.generator:nS,this.expressionsPrecedence=n.expressionsPrecedence!=null?n.expressionsPrecedence:KP,this.indent=n.indent!=null?n.indent:"  ",this.lineEnd=n.lineEnd!=null?n.lineEnd:`
`,this.indentLevel=n.startingIndentLevel!=null?n.startingIndentLevel:0,this.writeComments=n.comments?n.comments:!1,n.sourceMap!=null&&(this.write=n.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=n.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:n.sourceMap.file||n.sourceMap._file})}write(t){this.output+=t}writeToStream(t){this.output.write(t)}writeAndMap(t,n){this.output+=t,this.map(t,n)}writeToStreamAndMap(t,n){this.output.write(t),this.map(t,n)}map(t,n){if(n!=null){const{type:o}=n;if(o[0]==="L"&&o[2]==="n"){this.column=0,this.line++;return}if(n.loc!=null){const{mapping:s}=this;s.original=n.loc.start,s.name=n.name,this.sourceMap.addMapping(s)}if(o[0]==="T"&&o[8]==="E"||o[0]==="L"&&o[1]==="i"&&typeof n.value=="string"){const{length:s}=t;let{column:l,line:h}=this;for(let c=0;c<s;c++)t[c]===`
`?(l=0,h++):l++;this.column=l,this.line=h;return}}const{length:i}=t,{lineEnd:r}=this;i>0&&(this.lineEndSize>0&&(r.length===1?t[i-1]===r:t.endsWith(r))?(this.line+=this.lineEndSize,this.column=0):this.column+=i)}toString(){return this.output}}function sS(e,t){const n=new rS(t);return n.generator[e.type](e,n),n.output}function oS(e){const t=[];for(const o in e){const s=e[o];if(!s.layers.includes("F.Cu"))continue;let l=[s.pos[0],s.pos[1]];s.origin!=null&&(l[0]=s.origin[0],l[1]=s.origin[1]),t.push(...Zn(Va([],s.shape),l))}const n=Ud(t),i=Gd(t);zn(t,"cc");const r=Math.max(n,i);return Zn(t,zn(t,"cc"),[-25,-25]),Yd(t,[40/r,40/r],zn(t,"cc")),t}const aS=e=>{let t=!1;return e.type!=="ObjectExpression"?!1:(e.properties.forEach(n=>{if(n.value.type!=="ObjectExpression")return;const i=n.value.properties.map(r=>r.key.value);t=t||["shape","pos","layers"].every(r=>i.includes(r))}),t)};function lS(e,t){e.type==="VariableDeclaration"&&e.declarations.forEach(n=>{if(n.type==="VariableDeclarator"&&aS(n.init)){const i=sS(n.init);try{const r=JSON.parse(i),o=[n.id.name,r,oS(r)];t.push(o)}catch{}}})}function hS(e){const t=Dn.exports.parseScript(e,{range:!0,comment:!0}),n=[];return t.body.forEach(i=>{lS(i,n)}),{footprints:n}}const nl={shapes:[],limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4};function uS({shapes:e,limits:t,mm_per_unit:n}){e===void 0&&(e=nl.shapes),t===void 0&&(t=nl.limits),n===void 0&&(n=nl.mm_per_unit),Xt.shapes=e,Xt.limits=t,Xt.mm_per_unit=n}function cS(e){var t,n,i,r;const o=(t=e.d)!=null?t:"",s=(n=e.stroke)!=null?n:"black",l=(i=e.fill)!=null?i:"none",h=(r=e.strokeWidth)!=null?r:.03;Xt.paths.push({d:o,stroke:s,fill:l,strokeWidth:h})}const il={pcb:null,layerColors:{"F.Cu":"#ff8c00cc"},limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4},pS=e=>({pcb:t,layerColors:n,limits:i,mm_per_unit:r})=>{t===void 0&&console.log("renderPCB must include pcb param"),n===void 0&&(n=il.layerColors),i===void 0&&(i=il.limits),r===void 0&&(r=il.mm_per_unit);const o=[];for(const s in n)o.push({data:t.getLayer(s,e),color:n[s],groupId:s});Xt.shapes=o,Xt.limits=i,Xt.mm_per_unit=r};async function dS(e,t){const n=await(await fetch(e,{mode:"cors"})).text();t.codemirror.view.dispatch({changes:{from:0,insert:n}});const i=l=>l.includes("return kicadToObj("),r=t.codemirror.view.state.doc.toString().split(`
`);let o=0,s=0;for(;;){const l=r[o];if(!l||(s+=l.length,o>r.length)||r[o]==="`)})()"&&!i(r[o+1]))break;o++}t.codemirror.foldRange(0,s+o),ct("RUN"),document.querySelector(".center-button").click()}const fS=`/* -- DECLARE_COMPONENTS -- */
const Molex_serial = {"Rx":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[-0.075,0.064],"layers":["F.Cu"],"index":1},"Tx":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[-0.025,0.064],"layers":["F.Cu"],"index":2},"DTR":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[0.025,0.064],"layers":["F.Cu"],"index":3},"GND":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[0.075,0.064],"layers":["F.Cu"],"index":4},"NC1":{"shape":"M -0.055 0.065L 0.055 0.065L 0.055000000000000014 -0.065L -0.055 -0.065L -0.055000000000000014 0.065","pos":[-0.16,-0.065],"layers":["F.Cu"],"index":0},"NC2":{"shape":"M -0.055 0.065L 0.055 0.065L 0.055000000000000014 -0.065L -0.055 -0.065L -0.055000000000000014 0.065","pos":[0.16,-0.065],"layers":["F.Cu"],"index":0}}
const DRV8428_HTSSOP = {"VM":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966 M -0.029 -0.0053L -0.028815032667476745 -0.005296771383201207L -0.028630290689156138 -0.005287089466377069L -0.028445999144681437 -0.005270966045451849L -0.028262382564911655 -0.005248420764330322L -0.02807966465836527 -0.0052194810909647026L -0.027898068038665878 -0.00518418228388917L -0.027717813953321763 -0.005142567349262782L -0.027539122014169908 -0.00509468698847309L -0.02736220992981278 -0.005040599536364314L -0.027187293240373958 -0.004980370890165314L -0.02701458505489567 -0.004914074429203974L -0.02684429579169826 -0.004841790925505785L -0.02667663292201789 -0.004763608445385585L -0.02651180071723478 -0.0046796222421523126L -0.026350000000000002 -0.004589934640057525L -0.026191427899564017 -0.004494654909629058L -0.026036277611605044 -0.00439389913454172L -0.025884738162849894 -0.004287790070187222L -0.025736994180774013 -0.004176456994115627L -0.025593225668661342 -0.004060035548530584L -0.025453607786298054 -0.00393866757503019L -0.025318310636567316 -0.0038125009417948512L -0.02518749905820515 -0.003681689363432686L -0.02506133242496981 -0.003546392213701949L -0.02493996445146942 -0.0034067743313386583L -0.024823543005884376 -0.003263005819225989L -0.02471220992981278 -0.0031152618371501077L -0.02460610086545828 -0.002963722388394958L -0.024505345090370945 -0.002808572100435986L -0.024410065359942477 -0.002650000000000001L -0.024320377757847688 -0.002488199282765222L -0.024236391554614416 -0.002323367077982111L -0.024158209074494216 -0.0021557042083017413L -0.02408592557079603 -0.001985414945104333L -0.024019629109834687 -0.0018127067596260447L -0.023959400463635688 -0.0016377900701872211L -0.023905313011526912 -0.0014608779858300957L -0.02385743265073722 -0.0012821860466782397L -0.023815817716110833 -0.0011019319613341256L -0.0237805189090353 -0.0009203353416347322L -0.02375157923566968 -0.0007376174350883485L -0.023729033954548152 -0.0005540008553185632L -0.023712910533622934 -0.0003697093108438647L -0.023703228616798792 -0.00018496733252325575L -0.023700000000000002 -8.673617379884035e-19L -0.023703228616798792 0.00018496733252325401L -0.023712910533622934 0.00036970931084386385L -0.023729033954548152 0.0005540008553185632L -0.02375157923566968 0.0007376174350883467L -0.0237805189090353 0.0009203353416347313L -0.023815817716110833 0.001101931961334123L -0.02385743265073722 0.0012821860466782405L -0.023905313011526912 0.0014608779858300957L -0.023959400463635688 0.0016377900701872216L -0.024019629109834687 0.001812706759626045L -0.02408592557079603 0.0019854149451043347L -0.024158209074494216 0.002155704208301739L -0.024236391554614416 0.0023233670779821127L -0.024320377757847688 0.00248819928276522L -0.024410065359942477 0.0026499999999999987L -0.024505345090370945 0.0028085721004359855L -0.02460610086545828 0.002963722388394958L -0.02471220992981278 0.0031152618371501064L -0.024823543005884373 0.0032630058192259894L -0.02493996445146942 0.0034067743313386566L -0.02506133242496981 0.0035463922137019483L -0.025187499058205148 0.0036816893634326843L -0.025318310636567316 0.0038125009417948512L -0.02545360778629805 0.003938667575030189L -0.025593225668661342 0.004060035548530583L -0.025736994180774013 0.004176456994115624L -0.025884738162849894 0.004287790070187221L -0.026036277611605044 0.00439389913454172L -0.026191427899564017 0.004494654909629058L -0.026350000000000002 0.004589934640057526L -0.026511800717234777 0.004679622242152314L -0.02667663292201789 0.004763608445385584L -0.02684429579169826 0.004841790925505784L -0.027014585054895665 0.004914074429203973L -0.027187293240373958 0.0049803708901653134L -0.02736220992981278 0.005040599536364315L -0.027539122014169904 0.005094686988473088L -0.027717813953321763 0.00514256734926278L -0.027898068038665878 0.005184182283889169L -0.02807966465836527 0.005219481090964702L -0.028262382564911655 0.0052484207643303206L -0.028445999144681437 0.005270966045451848L -0.028630290689156138 0.005287089466377068L -0.02881503266747675 0.005296771383201208L -0.029 0.0053L -0.029184967332523255 0.005296771383201208L -0.029369709310843862 0.005287089466377068L -0.029554000855318563 0.005270966045451848L -0.029737617435088348 0.0052484207643303206L -0.029920335341634734 0.005219481090964702L -0.030101931961334125 0.005184182283889171L -0.03028218604667824 0.005142567349262782L -0.030460877985830095 0.005094686988473092L -0.030637790070187226 0.005040599536364313L -0.030812706759626045 0.0049803708901653134L -0.030985414945104334 0.004914074429203973L -0.03115570420830174 0.004841790925505784L -0.03132336707798211 0.004763608445385584L -0.03148819928276522 0.004679622242152314L -0.031650000000000005 0.004589934640057526L -0.031808572100435986 0.004494654909629058L -0.03196372238839496 0.004393899134541722L -0.032115261837150105 0.004287790070187223L -0.03226300581922599 0.004176456994115628L -0.03240677433133866 0.004060035548530583L -0.03254639221370195 0.003938667575030189L -0.03268168936343269 0.0038125009417948512L -0.03281250094179485 0.0036816893634326877L -0.03293866757503019 0.00354639221370195L -0.033060035548530584 0.00340677433133866L -0.03317645699411563 0.0032630058192259876L -0.03328779007018722 0.003115261837150108L -0.03339389913454172 0.0029637223883949614L -0.03349465490962906 0.0028085721004359873L -0.03358993464005752 0.002650000000000002L -0.03367962224215232 0.0024881992827652227L -0.03376360844538558 0.0023233670779821127L -0.03384179092550579 0.002155704208301741L -0.03391407442920397 0.0019854149451043347L -0.03398037089016531 0.0018127067596260486L -0.03404059953636431 0.0016377900701872216L -0.034094686988473094 0.001460877985830093L -0.034142567349262784 0.0012821860466782405L -0.03418418228388917 0.0011019319613341265L -0.034219481090964704 0.0009203353416347313L -0.03424842076433032 0.0007376174350883441L -0.03427096604545185 0.0005540008553185632L -0.03428708946637707 0.0003697093108438656L -0.03429677138320121 0.00018496733252325922L -0.034300000000000004 8.673617379884035e-19L -0.03429677138320121 -0.00018496733252325748L -0.03428708946637707 -0.000369709310843863L -0.03427096604545185 -0.0005540008553185614L -0.03424842076433032 -0.0007376174350883467L -0.034219481090964704 -0.0009203353416347287L -0.03418418228388917 -0.0011019319613341213L -0.034142567349262784 -0.001282186046678238L -0.034094686988473094 -0.0014608779858300974L -0.03404059953636432 -0.0016377900701872198L -0.03398037089016532 -0.0018127067596260408L -0.03391407442920397 -0.001985414945104333L -0.03384179092550579 -0.002155704208301744L -0.03376360844538558 -0.002323367077982111L -0.03367962224215232 -0.002488199282765219L -0.03358993464005752 -0.002650000000000001L -0.03349465490962906 -0.002808572100435985L -0.03339389913454172 -0.0029637223883949553L -0.03328779007018722 -0.003115261837150107L -0.03317645699411563 -0.00326300581922599L -0.033060035548530584 -0.003406774331338658L -0.032938667575030195 -0.0035463922137019465L -0.03281250094179486 -0.0036816893634326825L -0.03268168936343269 -0.0038125009417948495L -0.03254639221370195 -0.00393866757503019L -0.032406774331338664 -0.004060035548530582L -0.03226300581922599 -0.004176456994115624L -0.03211526183715011 -0.004287790070187221L -0.03196372238839496 -0.004393899134541719L -0.03180857210043599 -0.004494654909629055L -0.031650000000000005 -0.004589934640057523L -0.03148819928276522 -0.0046796222421523126L -0.03132336707798211 -0.004763608445385586L -0.031155704208301743 -0.004841790925505785L -0.030985414945104338 -0.004914074429203973L -0.030812706759626045 -0.004980370890165314L -0.030637790070187222 -0.005040599536364314L -0.0304608779858301 -0.005094686988473089L -0.03028218604667824 -0.005142567349262781L -0.03010193196133413 -0.005184182283889169L -0.029920335341634737 -0.005219481090964702L -0.02973761743508835 -0.005248420764330322L -0.029554000855318563 -0.005270966045451849L -0.029369709310843862 -0.005287089466377069L -0.029184967332523255 -0.005296771383201207L -0.029 -0.0053","pos":[-0.12,0.089565],"layers":["F.Cu"],"index":1},"PGND":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,0.063975],"layers":["F.Cu"],"index":2},"AOUT1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,0.038385],"layers":["F.Cu"],"index":3},"AOUT2":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,0.012795],"layers":["F.Cu"],"index":4},"BOUT2":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.012795],"layers":["F.Cu"],"index":5},"BOUT1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.038385],"layers":["F.Cu"],"index":6},"GND1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.063975],"layers":["F.Cu"],"index":7},"GND2":{"shape":"M -0.05999999999999999 0.09000000000000001L 0.060000000000000005 0.09000000000000001L 0.06000000000000002 -0.08999999999999998L -0.05999999999999996 -0.09000000000000001L -0.06000000000000002 0.08999999999999998","pos":[0,0],"layers":["F.Cu"],"index":17},"DVDD":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.089565],"layers":["F.Cu"],"index":8},"VREF":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.089565],"layers":["F.Cu"],"index":9},"M0":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.063975],"layers":["F.Cu"],"index":10},"DECAY":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.038385],"layers":["F.Cu"],"index":11},"M1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.012795],"layers":["F.Cu"],"index":12},"STEP":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.012795],"layers":["F.Cu"],"index":13},"DIR":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.038385],"layers":["F.Cu"],"index":14},"EN":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.063975],"layers":["F.Cu"],"index":15},"SLEEP":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.089565],"layers":["F.Cu"],"index":16}};

// constants
const width = 1;
const height = 1;

/* -- DECLARE_PCB -- */
let board = new PCB();

let interior = geo.rectangle(width, height)

board.addShape("interior", interior);

/* -- ADD_COMPONENTS -- */

/* -- ADD_WIRES -- */

/* -- RENDER_PCB -- */
renderPCB({
  pcb: board,
  layerColors: {
    "interior": "#002d00ff",
    "B.Cu": "#ff4c007f",
    "F.Cu": "#ff8c00cc",
    "drill": "#ff3300e5",
    "padLabels": "#ffff99e5",
    "componentLabels": "#00e5e5e5",
  },
  limits: {
    x: [-width/2, width/2],
    y: [-height/2, height/2]
  },
  mm_per_unit: 25.4
});
`;function pf(e){Xt.error=e,ct("RENDER")}class mS extends RP{constructor(){super(),Xt.storedPCB=this}}const OS=()=>Xt.codemirror.view.state.doc.toString(),gS=e=>({geo:Kv,PCB:mS,via:LP,renderPCB:pS(e),renderShapes:uS,renderPath:cS,document:null,window:null,localStorage:null,Function:null,eval:null,pt:(t,n,i=-1,r=-1)=>{const o=Xt.pts.some(h=>h.start===i);if(i===-1||o)return[t,n];const s=OS().slice(i,r),l={pt:[t,n],start:i,end:r,text:s};return Xt.pts.push(l),[t,n]},path:(...t)=>t}),yS={INIT(e,t){ct("RENDER"),t.codemirror=document.querySelector(".code-editor"),QP(t),new URL(window.location.href);const n=window.location.search,i=new URLSearchParams(n).get("code"),r=new URLSearchParams(n).get("file"),o=new URLSearchParams(n).get("bezier")==="false",s=new URLSearchParams(n).get("grid")==="false";if(o&&(t.viewHandles=!1),s&&(t.grid=!1),!i)if(r){let l=r;r.startsWith("http")||(l=`examples/${r}`),dS(l,t)}else{const l=window.localStorage.getItem("svg-pcb");t.codemirror.view.dispatch({changes:{from:0,insert:l!=null?l:""}}),ct("RUN"),document.querySelector(".center-button").click()}ct("RENDER")},RUN({dragging:e=!1,flatten:t=!1}={},n){var i;n.paths=[],n.pts=[],n.error="";const r=n.codemirror.view.state.doc;let o=r.toString();const s=pc(n.codemirror.view.state,r.length,1e4);if(!e){let m=[],v=[];try{const C=hS(o,e);m=C.footprints,v=(i=C.layers)!=null?i:[]}catch(C){console.error(C),pf(C)}n.footprints=m,n.layers=v}const{pts:l,paths:h}=ef(n,s),c=[];let d=0;l.sort((m,v)=>m[0]-v[0]).forEach((m,v)=>{const[C,O]=m;c.push(o.substr(d,C-d));const y=o.substr(C,O-C),P=y.indexOf("("),w=`${y.slice(0,-1)}, ${C+P+1}, ${O-1})`;c.push(w),d=O,v===l.length-1&&c.push(o.substr(O))}),c.length>0&&(o=c.join(""));const f=gS(t);try{new Function(...Object.keys(f),o)(...Object.values(f))}catch(m){console.error("prog erred",m),pf(m)}ct("RENDER")},NEW_FILE(e,t){ct("UPLOAD_JS",{text:fS})},UPLOAD_COMP({text:e,name:t},n){var i;e=e.replaceAll("$",""),e=JSON.stringify(HP(e)),e=`const temp_name = ${e}
`;const r=n.codemirror.view.state.doc.toString(),o=(i=tl("DECLARE_COMPONENTS",r))!=null?i:0;n.codemirror.view.dispatch({changes:{from:o,insert:e}}),n.codemirror.foldRange(0,e.length),ct("RENDER")},UPLOAD_JS({text:e},t){const n=t.codemirror.view.state.doc.toString().length;t.codemirror.view.dispatch({changes:{from:0,to:n,insert:e}}),ct("RUN"),document.querySelector(".center-button").click()},ADD_IMPORT({text:e,name:t},n){var i;if(n.footprints.map(s=>s[0]).includes(t))return;const r=n.codemirror.view.state.doc.toString(),o=(i=tl("DECLARE_COMPONENTS",r))!=null?i:0;e=`const ${t} = ${e}
`,n.codemirror.view.dispatch({changes:{from:o,insert:e}}),ct("RUN")},TRANSLATE({x:e,y:t,index:n},i){i.transformUpdate(e,t),ct("RUN",{dragging:!0})},RENDER(){gf(hP(Xt),document.getElementById("root"))}};function ct(e,t={}){const n=yS[e];if(n)return n(t,Xt);console.log("Action not recongnized:",e)}window.addEventListener("load",()=>{ct("INIT")})});cC();
