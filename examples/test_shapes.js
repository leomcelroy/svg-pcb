/* -- DECLARE_COMPONENTS -- */
const test_footprint = {
  "VCC": {
    "shape": "M -0.05 0.025L 0.05 0.025L 0.05 -0.025L -0.05 -0.025L -0.05 0.025",
    "pos":[-0.1,0.05],
    "layers":["F.Cu"]
  },
  "GND": {
    "shape": "M -0.05 0.025L 0.05 0.025L 0.05 -0.025L -0.05 -0.025L -0.05 0.025",
    "pos":[0.1,0.05],
    "layers":["F.Cu"]
  },
  "D+": {
    "shape": "M -0.05 0.025L 0.05 0.025L 0.05 -0.025L -0.05 -0.025L -0.05 0.025",
    "pos":[-0.1,-0.05],
    "layers":["F.Cu"]
  },
  "D-": {
    "shape": "M -0.05 0.025L 0.05 0.025L 0.05 -0.025L -0.05 -0.025L -0.05 0.025",
    "pos":[0.1,-0.05],
    "layers":["F.Cu"]
  }
}

// press shift+enter to run

// for console press
// mac: Command + Option + j
// Windows/Linux: Shift + CTRL + j

// included: Turtle, PCB, pcb

/* -- DECLARE_PCB -- */
let board = new PCB();

/* -- ADD_COMPONENTS -- */
test_comp1 = board.add(test_footprint, {translate: [0.3, 0.55], name: "COMP1"})
test_comp2 = board.add(test_footprint, {translate: [0.65, 0.25], name: "COMP2"})

// define a shape using turtles
let disk = new Turtle().circle(0.1).difference(new Turtle().rectangle(0.08, 2)).rotate(49).translate([0.77, 0.75]);
let interior = new Turtle().rectangle(0.9, 0.8).translate([0.5, 0.5]).roundcorners(0.1);
// define a shape from a SVG path
let fablab_logo = new Turtle().pathD("m 0.457082,0.3021348 c -0.0389,-4.32e-4 -0.07692,0.018987 -0.09874,0.054144 l 0.01,0.00631 0.02732,-0.016729 0.01718,0.010182 c -3.4e-4,0.00282 -3.5e-4,0.00593 -3.4e-4,0.007 1.55e-4,0.015138 0.02066,0.026647 0.04301,0.026415 0.02235,-2.316e-4 0.03827,-0.013772 0.03816,-0.027093 -1.24e-4,-0.015138 -0.01468,-0.026991 -0.03703,-0.027657 -0.0076,-2.254e-4 -0.01486,0.00129 -0.01817,0.00192 l -0.01253,-0.00802 0.0298,-0.017004 0.08785,0.051066 0.01008,-0.00553 c -0.0097,-0.015938 -0.02342,-0.029731 -0.04073,-0.039695 -0.01765,-0.010159 -0.03686,-0.015103 -0.05586,-0.015314 z m -0.101955,0.059652 c -0.009,0.016353 -0.01408,0.035132 -0.01408,0.055102 0,0.062049 0.04923,0.1125656 0.110788,0.1146045 l 1.1e-5,-0.011821 -0.02354,-0.013716 v -0.027354 c 9.92e-4,-3.745e-4 0.0019,-8.24e-4 0.0028,-0.00137 0.01305,-0.00769 0.01441,-0.029532 0.0031,-0.048785 -0.01135,-0.019254 -0.03113,-0.028628 -0.04417,-0.020939 -0.01305,0.00769 -0.01441,0.029532 -0.0031,0.048785 0.0018,0.00311 0.0039,0.00595 0.0061,0.00851 v 0.020321 L 0.364926,0.4690383 V 0.368288 Z m 0.201508,5.162e-4 -0.01008,0.00553 v 0.033528 l -0.01868,0.00976 c -6.95e-4,-1.132e-4 -0.0048,-0.004 -0.0058,-0.00452 -0.01323,-0.00737 -0.0327,0.00237 -0.04358,0.0219 -0.01088,0.019525 -0.01,0.041849 0.0033,0.049218 0.01323,0.00737 0.03292,-0.00147 0.0438,-0.020996 0.0018,-0.00315 0.0041,-0.010462 0.0052,-0.013659 l 0.01592,-0.0092 -9.5e-5,0.034935 -0.08762,0.05117 4.2e-5,0.011529 c 0.01864,-5.162e-4 0.03743,-0.0056 0.05466,-0.015693 0.05354,-0.031354 0.07226,-0.099366 0.04292,-0.1535122 z").scale([1, -1]).translate([-0.2, -0.1]);

board.addShape("F.Cu", disk);
board.addShape("F.Cu", fablab_logo);
board.addShape("interior", interior);

/* -- ADD_WIRES -- */
board.wire([test_comp1.pad("GND"),
            ["fillet", 0.1, [test_comp2.padX("GND"), test_comp1.padY("GND")]],
            test_comp2.pad("GND")], 0.015)

/* -- RENDER_PCB -- */
renderPCB({
  pcb: board,
  layerColors: {
    "interior": "#002d00ff",
    "B.Cu": "#ff4c007f",
    "F.Cu": "#ff8c00cc",
    "drill": "#ff3300e5",
    "padLabels": "#ffff99e5",
    "componentLabels": "#00e5e5e5",
  },
  limits: {
    x: [0, 1],
    y: [0, 1]
  },
  mm_per_unit: 25.4
})
