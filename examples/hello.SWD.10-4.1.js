/* -- DECLARE_COMPONENTS -- */
const header_SWD_4_1 = {"CLK":{"shape":"M -0.05 0.02500000000000001L 0.05 0.02500000000000001L 0.05 -0.024999999999999994L -0.05 -0.02500000000000001L -0.05 0.024999999999999994 M -0.05 -0.025L -0.04912751258243748 -0.024984770675477396L -0.04825608815639687 -0.024939101256495608L -0.047386788418308665 -0.024863047384206836L -0.046520672475998365 -0.02475670171853926L -0.04565879555832675 -0.024620193825305205L -0.04480220772955602 -0.02445369001834514L -0.04395195261000831 -0.024257393156899912L -0.043109066104575024 -0.024031542398457974L -0.04227457514062632 -0.02377641290737884L -0.041449496416858286 -0.02349231551964771L -0.0406348351646022 -0.023179596364169688L -0.039831583923105 -0.022838636441065024L -0.039040721330273066 -0.022469851157479175L -0.03826321093035273 -0.022073689821473175L -0.037500000000000006 -0.021650635094610966L -0.03675201839416988 -0.02120120240391065L -0.03602017741323133 -0.020725939313876042L -0.035305368692688174 -0.02022542485937369L -0.03460846311685854 -0.01970026884016805L -0.03393030975783652 -0.01915111107797445L -0.03327173484102855 -0.018578620636934856L -0.03263354073852508 -0.017983495008466282L -0.032016504991533724 -0.017366459261474933L -0.03142137936306515 -0.01672826515897146L -0.03084888892202555 -0.01606969024216348L -0.03029973115983195 -0.015391536883141458L -0.029774575140626317 -0.01469463130731183L -0.029274060686123957 -0.01397982258676867L -0.028798797596089352 -0.013247981605830123L -0.028349364905389036 -0.012500000000000004L -0.02792631017852683 -0.011736789069647273L -0.02753014884252083 -0.01095927866972694L -0.02716136355893498 -0.010168416076895007L -0.026820403635830315 -0.009365164835397798L -0.026507684480352293 -0.008550503583141723L -0.026223587092621164 -0.007725424859373685L -0.02596845760154203 -0.006890933895424979L -0.02574260684310009 -0.0060480473899916995L -0.025546309981654865 -0.00519779227044399L -0.025379806174694805 -0.004341204441673265L -0.025243298281460748 -0.003479327524001645L -0.025136952615793167 -0.0026132115816913347L -0.025060898743504395 -0.001743911843603136L -0.025015229324522607 -0.0008724874175625244L -0.025 -3.469446951953614e-18L -0.025015229324522607 0.0008724874175625209L -0.025060898743504395 0.0017439118436031326L -0.025136952615793167 0.0026132115816913347L -0.02524329828146074 0.0034793275240016415L -0.025379806174694798 0.004341204441673258L -0.025546309981654858 0.005197792270443979L -0.025742606843100084 0.0060480473899916995L -0.02596845760154203 0.006890933895424979L -0.02622358709262116 0.007725424859373692L -0.026507684480352293 0.008550503583141723L -0.026820403635830315 0.009365164835397809L -0.027161363558934976 0.010168416076894997L -0.027530148842520825 0.010959278669726943L -0.02792631017852682 0.011736789069647265L -0.028349364905389033 0.012499999999999997L -0.028798797596089352 0.013247981605830114L -0.029274060686123957 0.013979822586768671L -0.029774575140626314 0.014694631307311821L -0.03029973115983195 0.01539153688314146L -0.03084888892202555 0.01606969024216348L -0.03142137936306515 0.016728265158971453L -0.03201650499153372 0.017366459261474926L -0.03263354073852508 0.017983495008466285L -0.03327173484102854 0.018578620636934856L -0.033930309757836515 0.019151111077974445L -0.03460846311685854 0.01970026884016804L -0.035305368692688174 0.020225424859373682L -0.03602017741323133 0.020725939313876042L -0.036752018394169875 0.021201202403910657L -0.037500000000000006 0.021650635094610973L -0.038263210930352724 0.022073689821473175L -0.03904072133027307 0.02246985115747918L -0.03983158392310499 0.02283863644106502L -0.040634835164602194 0.02317959636416969L -0.04144949641685828 0.023492315519647707L -0.04227457514062631 0.023776412907378842L -0.04310906610457501 0.02403154239845797L -0.04395195261000831 0.024257393156899905L -0.04480220772955602 0.024453690018345138L -0.04565879555832675 0.024620193825305205L -0.04652067247599836 0.024756701718539255L -0.04738678841830866 0.024863047384206832L -0.04825608815639686 0.024939101256495615L -0.049127512582437485 0.0249847706754774L -0.05 0.025L -0.05087248741756253 0.0249847706754774L -0.05174391184360312 0.024939101256495615L -0.05261321158169133 0.024863047384206832L -0.05347932752400164 0.024756701718539255L -0.054341204441673265 0.024620193825305205L -0.05519779227044398 0.024453690018345145L -0.05604804738999169 0.02425739315689992L -0.05689093389542498 0.024031542398457978L -0.057725424859373695 0.023776412907378836L -0.05855050358314172 0.023492315519647707L -0.059365164835397805 0.02317959636416969L -0.060168416076895 0.022838636441065034L -0.06095927866972693 0.02246985115747918L -0.061736789069647274 0.022073689821473175L -0.06250000000000001 0.021650635094610973L -0.06324798160583012 0.021201202403910657L -0.06397982258676867 0.02072593931387605L -0.06469463130731183 0.020225424859373696L -0.06539153688314145 0.019700268840168053L -0.06606969024216348 0.01915111107797446L -0.06672826515897146 0.018578620636934856L -0.06736645926147494 0.017983495008466285L -0.06798349500846627 0.01736645926147494L -0.06857862063693486 0.016728265158971467L -0.06915111107797445 0.016069690242163495L -0.06970026884016806 0.015391536883141453L -0.07022542485937369 0.014694631307311835L -0.07072593931387604 0.013979822586768685L -0.07120120240391065 0.013247981605830128L -0.07165063509461096 0.012500000000000004L -0.07207368982147319 0.011736789069647278L -0.07246985115747917 0.010959278669726943L -0.07283863644106503 0.01016841607689501L -0.07317959636416968 0.009365164835397809L -0.07349231551964772 0.008550503583141737L -0.07377641290737884 0.007725424859373692L -0.07403154239845798 0.006890933895424972L -0.07425739315689991 0.0060480473899916995L -0.07445369001834515 0.005197792270443993L -0.07462019382530521 0.004341204441673258L -0.07475670171853926 0.0034793275240016207L -0.07486304738420684 0.0026132115816913347L -0.07493910125649561 0.001743911843603136L -0.0749847706754774 0.0008724874175625418L -0.07500000000000001 3.469446951953614e-18L -0.0749847706754774 -0.0008724874175625348L -0.07493910125649561 -0.0017439118436031256L -0.07486304738420684 -0.0026132115816913278L -0.07475670171853926 -0.003479327524001638L -0.07462019382530521 -0.004341204441673248L -0.07445369001834515 -0.0051977922704439655L -0.07425739315689991 -0.006048047389991686L -0.07403154239845797 -0.006890933895424986L -0.07377641290737885 -0.007725424859373678L -0.07349231551964772 -0.008550503583141703L -0.0731795963641697 -0.009365164835397798L -0.07283863644106502 -0.010168416076895018L -0.07246985115747917 -0.01095927866972694L -0.07207368982147319 -0.011736789069647261L -0.07165063509461098 -0.012500000000000004L -0.07120120240391066 -0.013247981605830118L -0.07072593931387605 -0.013979822586768656L -0.07022542485937369 -0.014694631307311825L -0.06970026884016806 -0.015391536883141464L -0.06915111107797446 -0.01606969024216348L -0.06857862063693487 -0.016728265158971446L -0.0679834950084663 -0.017366459261474915L -0.06736645926147494 -0.01798349500846627L -0.06672826515897146 -0.01857862063693486L -0.0660696902421635 -0.019151111077974448L -0.06539153688314148 -0.01970026884016804L -0.06469463130731183 -0.020225424859373682L -0.0639798225867687 -0.020725939313876035L -0.06324798160583014 -0.021201202403910636L -0.06250000000000001 -0.02165063509461096L -0.061736789069647274 -0.022073689821473175L -0.06095927866972693 -0.02246985115747918L -0.06016841607689501 -0.022838636441065024L -0.05936516483539781 -0.023179596364169684L -0.05855050358314172 -0.023492315519647713L -0.057725424859373695 -0.02377641290737884L -0.056890933895424996 -0.024031542398457967L -0.056048047389991695 -0.024257393156899912L -0.055197792270443996 -0.024453690018345138L -0.054341204441673285 -0.024620193825305198L -0.05347932752400165 -0.02475670171853926L -0.05261321158169134 -0.024863047384206836L -0.05174391184360312 -0.024939101256495608L -0.05087248741756252 -0.024984770675477396L -0.05000000000000001 -0.025","pos":[-0.107,0.05],"layers":["F.Cu"],"index":1},"DIO":{"shape":"M -0.05 0.02500000000000001L 0.05 0.02500000000000001L 0.05 -0.024999999999999994L -0.05 -0.02500000000000001L -0.05 0.024999999999999994","pos":[0.107,0.05],"layers":["F.Cu"],"index":2},"RST":{"shape":"M -0.05 0.02500000000000001L 0.05 0.02500000000000001L 0.05 -0.024999999999999994L -0.05 -0.02500000000000001L -0.05 0.024999999999999994","pos":[-0.107,-0.05],"layers":["F.Cu"],"index":3},"GND":{"shape":"M -0.05 0.02500000000000001L 0.05 0.02500000000000001L 0.05 -0.024999999999999994L -0.05 -0.02500000000000001L -0.05 0.024999999999999994","pos":[0.107,-0.05],"layers":["F.Cu"],"index":4}};
const header_SWD = {"VCC":{"shape":"M -0.047 0.015000000000000005L 0.047 0.015000000000000005L 0.047 -0.014999999999999994L -0.047 -0.015000000000000005L -0.047 0.014999999999999994 M 0.047 -0.015L 0.04752349245053752 -0.014990862405286435L 0.04804634710616188 -0.014963460753897363L 0.0485679269490148 -0.0149178284305241L 0.049087596514400984 -0.014854021031123554L 0.04960472266500396 -0.014772116295183121L 0.05011867536226639 -0.014672214011007084L 0.050628828433995014 -0.014554435894139947L 0.05113456033725499 -0.014418925439074783L 0.051635254915624214 -0.014265847744427303L 0.05213030214988503 -0.014095389311788626L 0.052619098901238684 -0.013907757818501811L 0.053101049646137 -0.013703181864639013L 0.05357556720183616 -0.013481910694487504L 0.05404207344178836 -0.013244213892883903L 0.0545 -0.01299038105676658L 0.05494878896349807 -0.01272072144234639L 0.0553878935520612 -0.012435563588325625L 0.055816778784387094 -0.012135254915624212L 0.05623492212988487 -0.011820161304100829L 0.05664181414529809 -0.011490666646784671L 0.05703695909538287 -0.011147172382160913L 0.05741987555688496 -0.010790097005079767L 0.05779009700507977 -0.01041987555688496L 0.05814717238216091 -0.010036959095382873L 0.05849066664678467 -0.009641814145298088L 0.05882016130410083 -0.009234922129884873L 0.059135254915624214 -0.008816778784387098L 0.05943556358832563 -0.008387893552061201L 0.059720721442346386 -0.007948788963498073L 0.05999038105676658 -0.0075000000000000015L 0.060244213892883904 -0.007042073441788362L 0.0604819106944875 -0.006575567201836163L 0.060703181864639015 -0.006101049646137002L 0.06090775781850181 -0.005619098901238679L 0.06109538931178862 -0.005130302149885033L 0.0612658477444273 -0.004635254915624212L 0.06141892543907478 -0.0041345603372549885L 0.06155443589413995 -0.003628828433995021L 0.06167221401100709 -0.003118675362266392L 0.061772116295183116 -0.0026047226650039584L 0.06185402103112355 -0.002087596514400986L 0.0619178284305241 -0.0015679269490148015L 0.061963460753897366 -0.001046347106161881L 0.06199086240528644 -0.0005234924505375157L 0.062 -1.734723475976807e-18L 0.06199086240528644 0.0005234924505375105L 0.06196346075389736 0.0010463471061618775L 0.0619178284305241 0.0015679269490148015L 0.06185402103112356 0.0020875965144009807L 0.061772116295183116 0.002604722665003955L 0.06167221401100709 0.003118675362266385L 0.06155443589413995 0.003628828433995021L 0.06141892543907478 0.004134560337254987L 0.0612658477444273 0.004635254915624214L 0.06109538931178862 0.005130302149885031L 0.060907757818501815 0.005619098901238684L 0.060703181864639015 0.006101049646136999L 0.06048191069448751 0.006575567201836167L 0.06024421389288391 0.007042073441788359L 0.05999038105676658 0.007499999999999996L 0.05972072144234639 0.007948788963498071L 0.05943556358832563 0.0083878935520612L 0.059135254915624214 0.008816778784387094L 0.05882016130410083 0.009234922129884877L 0.05849066664678467 0.009641814145298088L 0.05814717238216091 0.010036959095382873L 0.05779009700507977 0.010419875556884953L 0.05741987555688496 0.010790097005079768L 0.05703695909538288 0.011147172382160914L 0.05664181414529809 0.011490666646784668L 0.05623492212988487 0.011820161304100824L 0.055816778784387094 0.01213525491562421L 0.0553878935520612 0.012435563588325621L 0.05494878896349807 0.01272072144234639L 0.0545 0.01299038105676658L 0.054042073441788366 0.013244213892883903L 0.053575567201836156 0.013481910694487505L 0.053101049646137 0.013703181864639011L 0.052619098901238684 0.013907757818501811L 0.05213030214988503 0.014095389311788623L 0.051635254915624214 0.014265847744427306L 0.051134560337255 0.014418925439074779L 0.050628828433995014 0.01455443589413994L 0.05011867536226639 0.01467221401100708L 0.04960472266500395 0.014772116295183123L 0.049087596514400984 0.01485402103112355L 0.04856792694901481 0.014917828430524097L 0.04804634710616188 0.014963460753897363L 0.04752349245053751 0.014990862405286437L 0.047 0.015L 0.04647650754946249 0.014990862405286437L 0.045953652893838126 0.014963460753897363L 0.045432073050985206 0.014917828430524097L 0.044912403485599016 0.01485402103112355L 0.04439527733499604 0.014772116295183123L 0.043881324637733615 0.014672214011007087L 0.043371171566004986 0.014554435894139947L 0.04286543966274502 0.014418925439074786L 0.042364745084375786 0.0142658477444273L 0.04186969785011497 0.014095389311788623L 0.041380901098761316 0.013907757818501811L 0.040898950353863005 0.013703181864639018L 0.040424432798163844 0.013481910694487505L 0.039957926558211634 0.013244213892883903L 0.0395 0.01299038105676658L 0.03905121103650193 0.01272072144234639L 0.0386121064479388 0.012435563588325628L 0.038183221215612906 0.012135254915624217L 0.037765077870115134 0.01182016130410083L 0.03735818585470191 0.011490666646784675L 0.03696304090461713 0.011147172382160914L 0.036580124443115036 0.010790097005079768L 0.03620990299492024 0.01041987555688496L 0.03585282761783909 0.01003695909538288L 0.03550933335321533 0.009641814145298095L 0.03517983869589917 0.00923492212988487L 0.03486474508437579 0.008816778784387101L 0.03456443641167438 0.00838789355206121L 0.034279278557653614 0.007948788963498078L 0.03400961894323343 0.007500000000000003L 0.0337557861071161 0.007042073441788362L 0.0335180893055125 0.006575567201836167L 0.033296818135360985 0.006101049646137006L 0.03309224218149819 0.005619098901238684L 0.03290461068821138 0.005130302149885042L 0.0327341522555727 0.004635254915624214L 0.03258107456092522 0.00413456033725498L 0.03244556410586005 0.003628828433995021L 0.03232778598899291 0.0031186753622663953L 0.032227883704816884 0.002604722665003955L 0.03214597896887644 0.0020875965144009703L 0.032082171569475904 0.0015679269490148015L 0.03203653924610264 0.001046347106161881L 0.03200913759471356 0.0005234924505375261L 0.032 1.734723475976807e-18L 0.03200913759471356 -0.0005234924505375209L 0.032036539246102634 -0.0010463471061618757L 0.032082171569475904 -0.0015679269490147963L 0.03214597896887644 -0.0020875965144009825L 0.03222788370481688 -0.0026047226650039498L 0.03232778598899291 -0.0031186753622663814L 0.03244556410586005 -0.0036288284339950124L 0.03258107456092522 -0.004134560337254994L 0.0327341522555727 -0.0046352549156242085L 0.03290461068821137 -0.005130302149885021L 0.03309224218149819 -0.005619098901238679L 0.03329681813536099 -0.006101049646137009L 0.0335180893055125 -0.006575567201836163L 0.03375578610711609 -0.007042073441788355L 0.03400961894323342 -0.0075000000000000015L 0.03427927855765361 -0.00794878896349807L 0.03456443641167437 -0.008387893552061194L 0.03486474508437579 -0.008816778784387094L 0.03517983869589918 -0.009234922129884877L 0.03550933335321533 -0.009641814145298088L 0.03585282761783908 -0.010036959095382866L 0.036209902994920225 -0.01041987555688495L 0.036580124443115036 -0.010790097005079761L 0.03696304090461713 -0.011147172382160914L 0.03735818585470191 -0.011490666646784668L 0.03776507787011512 -0.011820161304100824L 0.0381832212156129 -0.01213525491562421L 0.03861210644793879 -0.01243556358832562L 0.039051211036501915 -0.01272072144234638L 0.03949999999999999 -0.012990381056766576L 0.03995792655821164 -0.013244213892883903L 0.040424432798163844 -0.013481910694487507L 0.040898950353863 -0.013703181864639013L 0.041380901098761316 -0.013907757818501808L 0.04186969785011497 -0.014095389311788626L 0.042364745084375786 -0.014265847744427303L 0.042865439662745 -0.014418925439074779L 0.04337117156600498 -0.014554435894139945L 0.0438813246377336 -0.014672214011007082L 0.04439527733499603 -0.014772116295183118L 0.04491240348559901 -0.014854021031123554L 0.0454320730509852 -0.0149178284305241L 0.045953652893838126 -0.014963460753897364L 0.04647650754946249 -0.014990862405286435L 0.04699999999999999 -0.015","pos":[0.077,-0.1],"layers":["F.Cu"],"index":1},"DIO":{"shape":"M -0.047 0.015000000000000005L 0.047 0.015000000000000005L 0.047 -0.014999999999999994L -0.047 -0.015000000000000005L -0.047 0.014999999999999994","pos":[-0.077,-0.1],"layers":["F.Cu"],"index":2},"GND1":{"shape":"M -0.047 0.015000000000000005L 0.047 0.015000000000000005L 0.047 -0.014999999999999994L -0.047 -0.015000000000000005L -0.047 0.014999999999999994","pos":[0.077,-0.05],"layers":["F.Cu"],"index":3},"GND2":{"shape":"M -0.047 0.015000000000000005L 0.047 0.015000000000000005L 0.047 -0.014999999999999994L -0.047 -0.015000000000000005L -0.047 0.014999999999999994","pos":[0.077,0],"layers":["F.Cu"],"index":5},"GND3":{"shape":"M -0.047 0.015000000000000005L 0.047 0.015000000000000005L 0.047 -0.014999999999999994L -0.047 -0.015000000000000005L -0.047 0.014999999999999994","pos":[0.077,0.1],"layers":["F.Cu"],"index":9},"CLK":{"shape":"M -0.047 0.015000000000000005L 0.047 0.015000000000000005L 0.047 -0.014999999999999994L -0.047 -0.015000000000000005L -0.047 0.014999999999999994","pos":[-0.077,-0.05],"layers":["F.Cu"],"index":4},"SWO":{"shape":"M -0.047 0.015000000000000005L 0.047 0.015000000000000005L 0.047 -0.014999999999999994L -0.047 -0.015000000000000005L -0.047 0.014999999999999994","pos":[-0.077,0],"layers":["F.Cu"],"index":6},"KEY":{"shape":"M -0.047 0.015000000000000005L 0.047 0.015000000000000005L 0.047 -0.014999999999999994L -0.047 -0.015000000000000005L -0.047 0.014999999999999994","pos":[0.077,0.05],"layers":["F.Cu"],"index":7},"NC":{"shape":"M -0.047 0.015000000000000005L 0.047 0.015000000000000005L 0.047 -0.014999999999999994L -0.047 -0.015000000000000005L -0.047 0.014999999999999994","pos":[-0.077,0.05],"layers":["F.Cu"],"index":8},"RST":{"shape":"M -0.047 0.015000000000000005L 0.047 0.015000000000000005L 0.047 -0.014999999999999994L -0.047 -0.015000000000000005L -0.047 0.014999999999999994","pos":[-0.077,0.1],"layers":["F.Cu"],"index":10}};


// commands:
//  - SHIFT+ENTER: render
//  - drap & drop file: kicad import


// constants
const width = .41 // board width
const height = .6 // board height
const x = 1 // x origin
const y = 1 // y origin
const zt = 0 // top z
const w = .015 // wire width
const mask = .004 // solder mask size
const border = 0.05 // rendering border


/* -- DECLARE_PCB -- */
let board = new PCB();

let interior = new Turtle().rectangle(width, height).translate([x+width/2, y+height/2]);
board.addShape("interior", interior);


/* -- ADD_COMPONENTS -- */
let J1 = board.add(header_SWD_4_1, {translate: [x+width/2+.005, y+.1], rotate: 180, name: 'J1 SWD'});
let J3 = board.add(header_SWD, {translate: [J1.posX, y+height-.19], rotate: -90, name: 'J3\ntarget'});


/* -- ADD_WIRES -- */
board.wire([J3.pad("DIO"),
            [J1.padX("DIO")-.08, J3.padY("DIO")],
            [J1.padX("DIO")-.08, J1.padY("DIO")],
            J1.pad("DIO")], w)

board.wire([J3.pad("GND1"),
            [J3.padX("GND1"), J3.padY("GND1")-.09],
            [J3.posX, J3.padY("GND1")-.09],
            [J1.posX, J1.padY("GND")],
            J1.pad("GND")], w)

board.wire([J3.pad("CLK"),
            [J3.padX("CLK"), J3.padY("CLK")+.09],
            [J3.padX("RST")+.08, J3.padY("CLK")+.09],
            [J3.padX("RST")+.08, J1.padY("CLK")],
            J1.pad("CLK")], w)

board.wire([J3.pad("GND2"),
            [J1.posX, J1.padY("GND")],
            J1.pad("GND")], w)

board.wire([J3.pad("GND3"),
            [J3.padX("GND3"), J3.padY("GND3")-.09],
            [J3.posX, J3.padY("GND1")-.09],
            [J1.posX, J1.padY("GND")],
            J1.pad("GND")], w)

board.wire([J3.pad("RST"),
            [J3.padX("RST")+.05, J3.padY("RST")],
            [J3.padX("RST")+.05, J1.padY("RST")],
            J1.pad("RST")], w)


/* -- RENDER_PCB -- */
renderPCB({
  pcb: board,
  layerColors: {
    "interior": "#002d00ff",
    "B.Cu": "#ff4c007f",
    "F.Cu": "#ff8c00cc",
    "drill": "#ff3300e5",
    "padLabels": "#ffff99e5",
    "componentLabels": "#00e5e5e5",
  },
  limits: {
    x: [x-border, x+width+border],
    y: [y-border, y+height+border]
  },
  mm_per_unit: 25.4
})
